"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useUnlinkProfile = useUnlinkProfile;
const react_query_1 = require("@tanstack/react-query");
const is_ecosystem_wallet_js_1 = require("../../../../wallets/ecosystem/is-ecosystem-wallet.js");
const index_js_1 = require("../../../../wallets/in-app/web/lib/auth/index.js");
const useConnectedWallets_js_1 = require("../../../core/hooks/wallets/useConnectedWallets.js");
/**
 * Unlinks a web2 or web3 profile currently connected in-app or ecosystem account.
 * **When a profile is unlinked from the account, it will no longer be able to be used to sign into the account.**
 *
 * @example
 *
 * ### Unlinking an email account
 *
 * ```jsx
 * import { useUnlinkProfile } from "thirdweb/react";
 *
 * const { data: connectedProfiles, isLoading } = useProfiles({
 *   client: props.client,
 * });
 * const { mutate: unlinkProfile } = useUnlinkProfile();
 *
 * const onClick = () => {
 *   unlinkProfile({
 *     client,
 *      // Select any other profile you want to unlink
 *     profileToUnlink: connectedProfiles[1]
 *   });
 * };
 * ```
 *
 * @wallet
 */
function useUnlinkProfile() {
    const wallets = (0, useConnectedWallets_js_1.useConnectedWallets)();
    const queryClient = (0, react_query_1.useQueryClient)();
    return (0, react_query_1.useMutation)({
        mutationFn: async ({ client, profileToUnlink, }) => {
            const ecosystemWallet = wallets.find((w) => (0, is_ecosystem_wallet_js_1.isEcosystemWallet)(w));
            const ecosystem = ecosystemWallet
                ? {
                    id: ecosystemWallet.id,
                    partnerId: ecosystemWallet.getConfig()?.partnerId,
                }
                : undefined;
            await (0, index_js_1.unlinkProfile)({
                client,
                ecosystem,
                profileToUnlink,
            });
        },
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ["profiles"] });
        },
    });
}
//# sourceMappingURL=useUnlinkProfile.js.map