"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.assertInsightEnabled = assertInsightEnabled;
exports.isInsightEnabled = isInsightEnabled;
const utils_js_1 = require("../chains/utils.js");
async function assertInsightEnabled(chains) {
    const chainData = await Promise.all(chains.map((chain) => isInsightEnabled(chain).then((enabled) => ({
        chain,
        enabled,
    }))));
    const insightEnabled = chainData.every((c) => c.enabled);
    if (!insightEnabled) {
        throw new Error(`Insight is not available for chains ${chainData
            .filter((c) => !c.enabled)
            .map((c) => c.chain.id)
            .join(", ")}`);
    }
}
async function isInsightEnabled(chain) {
    const chainData = await (0, utils_js_1.getChainServices)(chain);
    return chainData.some((c) => c.service === "insight" && c.enabled);
}
//# sourceMappingURL=common.js.map