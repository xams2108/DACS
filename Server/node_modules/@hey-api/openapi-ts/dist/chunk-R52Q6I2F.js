import {createRequire}from'module';import gr from'node:fs';import {$RefParser,getResolvedInput,sendRequest}from'@hey-api/json-schema-ref-parser';import G from'node:path';import y from'typescript';import {EOL}from'os';import {loadConfig}from'c12';const require = createRequire(import.meta.url);
var Ha=Object.create;var Ps=Object.defineProperty;var za=Object.getOwnPropertyDescriptor;var Ja=Object.getOwnPropertyNames;var Ga=Object.getPrototypeOf,Za=Object.prototype.hasOwnProperty;var Rn=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var If=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ya=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Ja(t))!Za.call(e,s)&&s!==r&&Ps(e,s,{get:()=>t[s],enumerable:!(n=za(t,s))||n.enumerable});return e};var Tf=(e,t,r)=>(r=e!=null?Ha(Ga(e)):{},Ya(t||!e||!e.__esModule?Ps(r,"default",{value:e,enumerable:true}):r,e));var hr=e=>{gr.existsSync(e)||gr.mkdirSync(e,{recursive:true});},jf=e=>{gr.existsSync(e)&&gr.rmSync(e,{force:true,recursive:true});},Tt=({moduleOutput:e,sourceOutput:t})=>{let r=t.split("/");return `${Array.from({length:r.length}).fill("").join("../")||"./"}${e}`};var js=(...e)=>{let t=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let n=r instanceof Headers?r.entries():Object.entries(r);for(let[s,o]of n)if(o===null)t.delete(s);else if(Array.isArray(o))for(let i of o)t.append(s,i);else o!==void 0&&t.set(s,typeof o=="object"?JSON.stringify(o):o);}return t};var kf=async({fetchOptions:e,inputPath:t,timeout:r,watch:n})=>{let s=new $RefParser,o=getResolvedInput({pathOrUrlOrSchema:t}),i,a,c;if(o.type==="url"){if(n.lastValue&&n.isHeadMethodSupported!==false){try{let f=await sendRequest({fetchOptions:{method:"HEAD",...e,headers:js(e?.headers,n.headers)},timeout:r,url:o.path});if(f.response.status>=300)return {error:"not-ok",response:f.response};c=f.response;}catch(f){return {error:"not-ok",response:new Response(f.message)}}if(!c.ok&&n.isHeadMethodSupported)return {error:"not-ok",response:c};if(n.isHeadMethodSupported===void 0&&(n.isHeadMethodSupported=c.ok),c.status===304)return {error:"not-modified",response:c};if(a===void 0){let f=c.headers.get("ETag");f&&(a=f!==n.headers.get("If-None-Match"),a&&n.headers.set("If-None-Match",f));}if(a===void 0){let f=c.headers.get("Last-Modified");f&&(a=f!==n.headers.get("If-Modified-Since"),a&&n.headers.set("If-Modified-Since",f));}if(a===false)return {error:"not-modified",response:c}}try{let f=await sendRequest({fetchOptions:{method:"GET",...e},timeout:r,url:o.path});if(f.response.status>=300)return {error:"not-ok",response:f.response};c=f.response;}catch(f){return {error:"not-ok",response:new Response(f.message)}}if(!c.ok)return {error:"not-ok",response:c};if(i=c.body?await c.arrayBuffer():new ArrayBuffer(0),a===void 0){let f=new TextDecoder().decode(i);a=f!==n.lastValue,n.lastValue=f;}}else n.lastValue?a=false:n.lastValue=o.type;return a===false?{error:"not-modified",response:c}:{data:await s.bundle({arrayBuffer:i,pathOrUrlOrSchema:void 0,resolvedInput:o})}};var Ct=/^[^$_\p{ID_Start}]+/u,ke=/^-?\d+(\.\d+)?$/,Ns=/^(document|history|location|navigator|window)$/g,Es=/^(console|Array|Date|Error|Function|JSON|Map|Math|Object|Promise|RegExp|Set|WeakMap|WeakSet)$/g,se=/^(arguments|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|eval|export|extends|false|finally|for|from|function|if|implements|import|in|instanceof|interface|let|new|null|package|private|protected|public|return|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)$/g,$s=/^(global|process|Buffer)$/g,ks=/^(any|as|bigint|boolean|namespace|never|null|number|string|symbol|type|undefined|unknown|void)$/g,me=/^[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*$/u;var oe=e=>(e||e==="")&&(me.lastIndex=0,!me.test(e))?`'${e}'`:e,Pt=e=>e&&e.startsWith("'")&&e.endsWith("'")?e.slice(1,e.length-1):e,E=e=>e.replace(/\*\//g,"*").replace(/\/\*/g,"*").replace(/\r?\n(.*)/g,(t,r)=>EOL+r.trim());var de="client",te=e=>{let t=C(e);return t.name==="@hey-api/client-axios"||t.name==="@hey-api/client-nuxt"?"baseURL":"baseUrl"},C=e=>{for(let t of e.pluginOrder){let r=e.plugins[t];if(r?._tags?.includes("client"))return r}return {name:""}};var vs,b=()=>{let e=vs,t=C(e);return e.client=t,e},qs=e=>(vs=e,b()),q=e=>C(e).name.startsWith("legacy/"),ve=e=>{if(q(e))return e.name};var np=y.createPrinter({newLine:y.NewLineKind.LineFeed,removeComments:false}),ws=e=>y.createSourceFile("",e,y.ScriptTarget.ESNext,false,y.ScriptKind.TS),sp=ws(""),op=e=>e.replace(/\\u([0-9a-fA-F]{4})/g,(t,r)=>String.fromCharCode(Number.parseInt(r,16)));function ye({node:e,unescape:t=false}){let r=np.printNode(y.EmitHint.Unspecified,e,sp);if(!t)return r;try{return op(r)}catch{return b().logs.level==="debug"&&console.warn("Could not decode value:",r),r}}function Ms(e){return ws(e).statements[0]}var R=({text:e})=>y.factory.createIdentifier(e),re={boolean:e=>e?y.factory.createTrue():y.factory.createFalse(),export:({alias:e,asType:t=false,name:r})=>{let n=R({text:r});if(e){let s=R({text:e});return y.factory.createExportSpecifier(t,n,s)}return y.factory.createExportSpecifier(t,void 0,n)},import:({alias:e,asType:t=false,name:r})=>{let n=R({text:r});if(e){let s=R({text:e});return y.factory.createImportSpecifier(t,n,s)}return y.factory.createImportSpecifier(t,void 0,n)},number:e=>e<0?y.factory.createPrefixUnaryExpression(y.SyntaxKind.MinusToken,y.factory.createNumericLiteral(Math.abs(e))):y.factory.createNumericLiteral(e),string:(e,t=false)=>{let r=e;t&&(r=Pt(r));let n=r.includes("'")&&r.includes('"'),s=r.includes(`
`),o=r.startsWith("`"),i=r.startsWith("\\`")&&r.endsWith("\\`");return (s||n||o)&&!i&&(r=`\`${r.replace(/(?<!\\)`/g,"\\`").replace(/\${/g,"\\${")}\``),r.startsWith("`")?R({text:r}):ft({text:r})}},mt=e=>e!==null&&typeof e=="object"&&typeof e.kind=="number"&&typeof e.flags=="number"&&typeof e.pos=="number"&&typeof e.end=="number",Xe=e=>e!==void 0,ip=({commentObject:e,node:t})=>{let r=e.lines.filter(i=>!!i||i==="");if(!r.length)return;if(!e.jsdoc){for(let i of r)y.addSyntheticLeadingComment(t,y.SyntaxKind.SingleLineCommentTrivia,` ${i}`,true);return}let n=r.map((i,a)=>{let c=i;return a!==r.length&&(c=`${c}
`),y.factory.createJSDocText(c)}),s=y.factory.createJSDocComment(y.factory.createNodeArray(n),void 0),o=ye({node:s,unescape:true}).replace("/*","").replace("*  */","");y.addSyntheticLeadingComment(t,y.SyntaxKind.MultiLineCommentTrivia,o,true);},V=({comments:e=[],node:t})=>{let r=!!e.find(s=>typeof s=="object"&&s),n=e;r||(n=[{jsdoc:true,lines:e}]);for(let s of n)ip({commentObject:s,node:t});};var H=(e,t)=>y.isTypeNode(e)?e:typeof e=="number"?y.factory.createLiteralTypeNode(re.number(e)):fe({typeArguments:t?.map(r=>H(r)),typeName:e}),In=({expression:e,name:t})=>y.factory.createPropertyAccessChain(e,y.factory.createToken(y.SyntaxKind.QuestionDotToken),t),he=({expression:e,isOptional:t,name:r})=>{let n=typeof e=="string"?R({text:e}):e;if(t)return In({expression:n,name:r});if(typeof r=="string"&&(me.lastIndex=0,!me.test(r))){!r.startsWith("'")&&!r.endsWith("'")&&(r=`'${r}'`);let o=R({text:r});return y.factory.createElementAccessExpression(n,o)}let s=typeof r=="string"?R({text:r}):r;return y.factory.createPropertyAccessExpression(n,s)},Tn=()=>y.factory.createNull(),ge=({identifiers:e=[],isValueAccess:t,shorthand:r,unescape:n,value:s})=>{if(s===null)return Tn();if(Array.isArray(s))return Pn({elements:s});if(typeof s=="object")return Sr({identifiers:e,obj:s,shorthand:r});if(typeof s=="number")return re.number(s);if(typeof s=="boolean")return re.boolean(s);if(typeof s=="string"){if(t){let o=s.split(".");return he({expression:o[0],name:o[1]})}return re.string(s,n)}},br=e=>{let t=e==="public"?y.SyntaxKind.PublicKeyword:e==="protected"?y.SyntaxKind.ProtectedKeyword:e==="private"?y.SyntaxKind.PrivateKeyword:void 0,r=[];return t&&r.push(y.factory.createModifier(t)),r},Xt=e=>e.map(t=>{if("destructure"in t)return jt({name:y.factory.createObjectBindingPattern(t.destructure.map(n=>"destructure"in n?void 0:y.factory.createBindingElement(void 0,void 0,R({text:n.name}),void 0)).filter(Boolean))});let r=br(t.accessLevel);return t.isReadOnly&&(r=[...r,y.factory.createModifier(y.SyntaxKind.ReadonlyKeyword)]),jt({initializer:t.default!==void 0?ge({value:t.default}):void 0,modifiers:r,name:R({text:t.name}),required:t.isRequired!==false,type:t.type!==void 0?H(t.type):void 0})}),At=({keyword:e})=>{let t=y.SyntaxKind.AnyKeyword;switch(e){case "boolean":t=y.SyntaxKind.BooleanKeyword;break;case "never":t=y.SyntaxKind.NeverKeyword;break;case "number":t=y.SyntaxKind.NumberKeyword;break;case "string":t=y.SyntaxKind.StringKeyword;break;case "undefined":t=y.SyntaxKind.UndefinedKeyword;break;case "unknown":t=y.SyntaxKind.UnknownKeyword;break;case "void":t=y.SyntaxKind.VoidKeyword;break}return y.factory.createKeywordTypeNode(t)},Ht=e=>e.map(t=>y.isTypeParameterDeclaration(t)?t:Cn({constraint:t.extends?typeof t.extends=="string"?At({keyword:"boolean"}):t.extends:void 0,defaultType:t.default!==void 0?mt(t.default)?t.default:y.factory.createLiteralTypeNode(t.default?y.factory.createTrue():y.factory.createFalse()):void 0,name:t.name})),Fs=({operator:e,type:t})=>{let r=e==="keyof"?y.SyntaxKind.KeyOfKeyword:e==="readonly"?y.SyntaxKind.ReadonlyKeyword:y.SyntaxKind.UniqueKeyword;return y.factory.createTypeOperatorNode(r,t)},Cn=({constraint:e,defaultType:t,modifiers:r,name:n})=>y.factory.createTypeParameterDeclaration(r,n,e,t),Ds=({members:e,nameType:t,questionToken:r,readonlyToken:n,type:s,typeParameter:o})=>y.factory.createMappedTypeNode(n,o,t,r,s,e),Ls=({literal:e})=>y.factory.createLiteralTypeNode(e),Or=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:s,statements:o=[],types:i=[]})=>{let a=y.factory.createArrowFunction(e?[y.factory.createModifier(y.SyntaxKind.AsyncKeyword)]:void 0,i?Ht(i):void 0,Xt(n),s?H(s):void 0,void 0,Array.isArray(o)?ie({multiLine:r,statements:o}):o);return V({comments:t,node:a}),a},_s=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:s,statements:o=[],types:i=[]})=>{let a=y.factory.createFunctionExpression(e?[y.factory.createModifier(y.SyntaxKind.AsyncKeyword)]:void 0,void 0,void 0,i?Ht(i):void 0,Xt(n),s?H(s):void 0,ie({multiLine:r,statements:o}));return V({comments:t,node:a}),a},Pn=({elements:e,multiLine:t=false})=>y.factory.createArrayLiteralExpression(e.map(n=>mt(n)?n:ge({value:n})).filter(Xe),t||!Array.isArray(e[0])&&typeof e[0]=="object"),Ks=({expression:e})=>y.factory.createAwaitExpression(e),Bs=({parameters:e=[],returnType:t,typeParameters:r})=>y.factory.createFunctionTypeNode(r,e,t),Sr=({comments:e,identifiers:t=[],multiLine:r=true,obj:n,shorthand:s,unescape:o=false})=>{let i=Array.isArray(n)?n.map(c=>{let m=false;if("key"in c){let{key:l}=c;m=l===c.value,(l.match(/^[0-9]/)&&l.match(/\D+/g)||l.match(/\W/g)||l==="")&&!l.startsWith("'")&&!l.endsWith("'")&&(c.key=`'${l}'`);}let f;if("spread"in c){let l=mt(c.spread)?c.spread:R({text:c.spread});f=y.factory.createSpreadAssignment(c.assertion?Jt({expression:l,type:typeof c.assertion=="string"?At({keyword:c.assertion}):c.assertion}):l);}else if(c.shorthand||s&&m)f=y.factory.createShorthandPropertyAssignment(c.value);else {let l=mt(c.value)?c.value:Array.isArray(c.value)&&(!c.value.length||typeof c.value[0]=="object")?Sr({multiLine:r,obj:c.value,shorthand:s,unescape:o}):ge({identifiers:t.includes(c.key)?Object.keys(c.value):[],isValueAccess:c.isValueAccess,shorthand:s,unescape:o,value:c.value});if(!l)return;t.includes(c.key)&&!y.isObjectLiteralExpression(l)&&(l=R({text:c.value})),f=xr({initializer:l,name:c.key});}return V({comments:c.comments,node:f}),f}).filter(Xe):Object.entries(n).map(([c,m])=>{let f=ge({identifiers:t.includes(c)?Object.keys(m):[],shorthand:s,unescape:o,value:m});if(!f)return;t.includes(c)&&!y.isObjectLiteralExpression(f)&&(f=R({text:m}));let l=c===m;return c.match(/^[0-9]/)&&c.match(/\D+/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),c.match(/\W/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),s&&l?y.factory.createShorthandPropertyAssignment(m):xr({initializer:f,name:c})}).filter(Xe),a=y.factory.createObjectLiteralExpression(i,r);return V({comments:e,node:a}),a},Vs=({comments:e={},leadingComment:t,name:r,obj:n})=>{let s=Array.isArray(n)?n.map(i=>{let a=pp({initializer:ge({value:i.value}),name:i.key});return V({comments:i.comments,node:a}),a}):Object.entries(n).map(([i,a])=>{let c=y.factory.createEnumMember(i,ge({unescape:true,value:a}));return V({comments:e[i],node:c}),c}),o=y.factory.createEnumDeclaration([y.factory.createModifier(y.SyntaxKind.ExportKeyword)],R({text:r}),s);return V({comments:t,node:o}),o},pp=({initializer:e,name:t})=>{let r=t;return typeof r=="string"&&(r.startsWith("'")&&r.endsWith("'")?r=ft({isSingleQuote:false,text:r}):r=oe(r)),y.factory.createEnumMember(r,e)},Us=({name:e,statements:t})=>y.factory.createModuleDeclaration([y.factory.createModifier(y.SyntaxKind.ExportKeyword)],R({text:e}),y.factory.createModuleBlock(t),y.NodeFlags.Namespace),Ws=({indexType:e,objectType:t})=>y.factory.createIndexedAccessTypeNode(t,e),ft=({isSingleQuote:e,text:t})=>(e===void 0&&(e=!t.includes("'")),y.factory.createStringLiteral(t,e)),Qs=({condition:e,whenFalse:t,whenTrue:r})=>y.factory.createConditionalExpression(e,y.factory.createToken(y.SyntaxKind.QuestionToken),r,y.factory.createToken(y.SyntaxKind.ColonToken),t),Xs=({text:e})=>y.factory.createTypeOfExpression(R({text:e})),Hs=({comment:e,exportType:t,name:r,type:n,typeParameters:s=[]})=>{let o=y.factory.createTypeAliasDeclaration(t?[y.factory.createModifier(y.SyntaxKind.ExportKeyword)]:void 0,R({text:r}),Ht(s),H(n));return V({comments:e,node:o}),o},fe=({typeArguments:e,typeName:t})=>y.factory.createTypeReferenceNode(t,e),zs=({type:e})=>y.factory.createParenthesizedType(e),jt=({initializer:e,modifiers:t,name:r,required:n=true,type:s})=>y.factory.createParameterDeclaration(t,void 0,r,n?void 0:y.factory.createToken(y.SyntaxKind.QuestionToken),s,e),zt=({argumentsArray:e,expression:t,typeArguments:r})=>y.factory.createNewExpression(t,r,e),Js=({awaitModifier:e,expression:t,initializer:r,statement:n})=>y.factory.createForOfStatement(e,r,t,n),Gs=({left:e,right:t})=>y.factory.createAssignment(e,t),ie=({multiLine:e=true,statements:t})=>y.factory.createBlock(t,e),xr=({initializer:e,name:t})=>y.factory.createPropertyAssignment(t,e),Zs=({flags:e=[],text:t})=>y.factory.createRegularExpressionLiteral(`/${t}/${e.join("")}`),Jt=({expression:e,type:t})=>y.factory.createAsExpression(e,t),Ys=({value:e})=>{let t=[],r="";for(let s of e.slice(0).reverse())if(typeof s=="string")r=`${s}${r}`;else {let o=t.length?y.factory.createTemplateMiddle(r):y.factory.createTemplateTail(r),i=y.factory.createTemplateLiteralTypeSpan(s,o);t.push(i),r="";}return y.factory.createTemplateLiteralType(y.factory.createTemplateHead(r),t.reverse())};var eo=({module:e})=>y.factory.createExportDeclaration(void 0,false,void 0,re.string(e)),xe=({functionName:e,parameters:t=[],types:r})=>{let n=typeof e=="string"?R({text:e}):e,s=t.filter(i=>i!==void 0).map(i=>typeof i=="string"?R({text:i}):i);return y.factory.createCallExpression(n,r,s)},to=({exports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(c=>typeof c!="object"||!c.asType),s=r.map(c=>{let m=typeof c=="string"?{name:c}:c;return re.export({alias:m.alias,asType:n&&m.asType,name:m.name})}),o=y.factory.createNamedExports(s),i=re.string(t);return y.factory.createExportDeclaration(void 0,!n,o,i)},ro=({assertion:e,comment:t,destructure:r,exportConst:n,expression:s,name:o,typeName:i})=>{let a=e?Jt({expression:s,type:typeof e=="string"?fe({typeName:e}):e}):s,c=R({text:o}),m=y.factory.createVariableDeclaration(r?y.factory.createObjectBindingPattern([y.factory.createBindingElement(void 0,void 0,c,void 0)]):c,void 0,i?typeof i=="string"?fe({typeName:i}):i:void 0,a),f=y.factory.createVariableStatement(n?[y.factory.createModifier(y.SyntaxKind.ExportKeyword)]:void 0,y.factory.createVariableDeclarationList([m],y.NodeFlags.Const));return V({comments:t,node:f}),f},no=({imports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(m=>typeof m!="object"||!m.asType),s=r.map(m=>{let f=typeof m=="string"?{name:m}:m;return re.import({alias:f.alias,asType:n&&f.asType,name:f.name})}),o=y.factory.createNamedImports(s),i=y.factory.createImportClause(!n,void 0,o),a=re.string(t);return y.factory.createImportDeclaration(void 0,i,a)};var so=({accessLevel:e,comment:t,multiLine:r=true,parameters:n=[],statements:s=[]})=>{let o=y.factory.createConstructorDeclaration(br(e),Xt(n),ie({multiLine:r,statements:s}));return V({comments:t,node:o}),o},oo=({accessLevel:e,comment:t,isStatic:r=false,multiLine:n=true,name:s,parameters:o=[],returnType:i,statements:a=[],types:c=[]})=>{let m=br(e);r&&(m=[...m,y.factory.createModifier(y.SyntaxKind.StaticKeyword)]);let f=y.factory.createMethodDeclaration(m,void 0,R({text:s}),void 0,c?Ht(c):void 0,Xt(o),i?H(i):void 0,ie({multiLine:n,statements:a}));return V({comments:t,node:f}),f},io=({decorator:e,members:t=[],name:r})=>{let n=[y.factory.createModifier(y.SyntaxKind.ExportKeyword)];e&&(n=[y.factory.createDecorator(xe({functionName:e.name,parameters:e.args.map(o=>ge({value:o})).filter(Xe)})),...n]);let s=[];return t.forEach(o=>{s=[...s,o,R({text:`
`})];}),y.factory.createClassDeclaration(n,R({text:r}),[],[],s)};var lt=({expression:e})=>y.factory.createExpressionStatement(e);var Rr=({expression:e})=>y.factory.createReturnStatement(e),po=({args:e=[],name:t,types:r=[]})=>{let n=r.map(a=>fe({typeName:a})),s=e.map(a=>y.isExpression(a)?a:R({text:a})).filter(Xe),o=xe({functionName:t,parameters:s,types:n});return Rr({expression:o})},co=({expression:e})=>Rr({expression:typeof e=="string"?R({text:e}):e});var Nt=e=>e.slice(1).reduce((t,r)=>(me.lastIndex=0,me.test(r)?In({expression:t,name:r}):y.factory.createElementAccessChain(t,y.factory.createToken(y.SyntaxKind.QuestionDotToken),R({text:r}))),R({text:e[0]})),Ir=e=>e.slice(1).reduce((t,r)=>he({expression:t,name:r}),R({text:e[0]})),mo=({expressions:e})=>e.reduce((r,n)=>he({expression:r,name:n})),Tr=({left:e,operator:t="=",right:r})=>y.factory.createBinaryExpression(e,t==="="?y.SyntaxKind.EqualsToken:t==="==="?y.SyntaxKind.EqualsEqualsEqualsToken:t==="??"?y.SyntaxKind.QuestionQuestionToken:y.SyntaxKind.InKeyword,typeof r=="string"?R({text:r}):r),Et=({elseStatement:e,expression:t,thenStatement:r})=>y.factory.createIfStatement(t,r,e),fo=({path:e})=>{let t=Nt(e),r=Ir(e),n=ie({statements:[lt({expression:Tr({left:r,right:zt({argumentsArray:[r],expression:R({text:"Date"})})})})]});return Et({expression:t,thenStatement:n})},lo=({path:e,transformerName:t})=>{let r=Nt(e),n=Ir(e),s=ie({statements:[lt({expression:xe({functionName:t,parameters:[n]})})]});return [Et({expression:r,thenStatement:s})]},uo=({path:e,transformerName:t})=>{let r=Nt(e),n=Ir(e);return Et({expression:xe({functionName:he({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:ie({statements:[lt({expression:y.factory.createCallChain(he({expression:n,name:"forEach"}),void 0,void 0,[R({text:t})])})]})})},yo=({parameterName:e})=>{let t=R({text:"Date"});return zt({argumentsArray:[R({text:e})],expression:t})},go=({path:e,transformExpression:t})=>{let r=Nt(e),n=Ir(e);return Et({expression:xe({functionName:he({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:ie({statements:[lt({expression:Tr({left:n,right:y.factory.createCallChain(he({expression:n,name:"map"}),void 0,void 0,[Or({parameters:[{name:"item"}],statements:t})])})})]})})};var gp=fe({typeName:"null"}),$t=({isNullable:e,node:t})=>e?y.factory.createUnionTypeNode([t,gp]):t,jn=({indexProperty:e,isNullable:t,properties:r,useLegacyResolution:n})=>{let o=r.map(a=>{let c=a.isReadOnly?[y.factory.createModifier(y.SyntaxKind.ReadonlyKeyword)]:void 0,m=a.isRequired!==false?void 0:y.factory.createToken(y.SyntaxKind.QuestionToken),f=H(a.type);let l=y.factory.createPropertySignature(c,n||typeof a.name=="string"&&a.name.match(me)||typeof a.name!="string"&&y.isPropertyName(a.name)?a.name:ft({text:a.name}),m,f);return V({comments:a.comment,node:l}),l});if(e){let a=e.isReadOnly?[y.factory.createModifier(y.SyntaxKind.ReadonlyKeyword)]:void 0,c=y.factory.createIndexSignature(a,[jt({name:R({text:String(e.name)}),type:At({keyword:"string"})})],H(e.type));o.push(c);}let i=y.factory.createTypeLiteralNode(o);return $t({isNullable:t,node:i})},Gt=({isNullable:e,types:t})=>{let r=t.map(s=>H(s)),n=y.factory.createUnionTypeNode(r);return $t({isNullable:e,node:n})},ho=({isNullable:e,types:t})=>{let r=t.map(s=>H(s)),n=y.factory.createIntersectionTypeNode(r);return $t({isNullable:e,node:n})},xo=({isNullable:e=false,types:t})=>{let r=t.map(s=>H(s)),n=y.factory.createTupleTypeNode(r);return $t({isNullable:e,node:n})},bo=(e,t,r=false,n=true)=>{let s=Gt({types:e}),o=Gt({types:t}),i=jn({properties:[{name:`[key: ${ye({node:s,unescape:true})}]`,type:o}],useLegacyResolution:n});return $t({isNullable:r,node:i})},Oo=(e,t=false)=>{let r=fe({typeArguments:[Array.isArray(e)?Gt({types:e}):e],typeName:"Array"});return $t({isNullable:t,node:r})};var p={anonymousFunction:_s,arrayLiteralExpression:Pn,arrowFunction:Or,asExpression:Jt,assignment:Gs,awaitExpression:Ks,binaryExpression:Tr,block:ie,callExpression:xe,classDeclaration:io,conditionalExpression:Qs,constVariable:ro,constructorDeclaration:so,enumDeclaration:Vs,exportAllDeclaration:eo,exportNamedDeclaration:to,expressionToStatement:lt,forOfStatement:Js,functionTypeNode:Bs,identifier:R,ifStatement:Et,indexedAccessTypeNode:Ws,isTsNode:mt,keywordTypeNode:At,literalTypeNode:Ls,mappedTypeNode:Ds,methodDeclaration:oo,namedImportDeclarations:no,namespaceDeclaration:Us,newExpression:zt,nodeToString:ye,null:Tn,objectExpression:Sr,ots:re,parameterDeclaration:jt,propertyAccessExpression:he,propertyAccessExpressions:mo,propertyAssignment:xr,regularExpressionLiteral:Zs,returnFunctionCall:po,returnStatement:Rr,returnVariable:co,safeAccessExpression:Nt,stringLiteral:ft,stringToTsNodes:Ms,templateLiteralType:Ys,transformArrayMap:go,transformArrayMutation:uo,transformDateMutation:fo,transformFunctionMutation:lo,transformNewDate:yo,typeAliasDeclaration:Hs,typeArrayNode:Oo,typeInterfaceNode:jn,typeIntersectionNode:ho,typeNode:H,typeOfExpression:Xs,typeOperatorNode:Fs,typeParameterDeclaration:Cn,typeParenthesizedNode:zs,typeRecordNode:bo,typeReferenceNode:fe,typeTupleNode:xo,typeUnionNode:Gt,valueToExpression:ge};var xp=[se,ks,Es,$s,Ns],Cr=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");if(Ct.lastIndex=0,Ct.test(t))return `_${t}`;for(let r of xp){if(t.startsWith("_"))return t;t=t.replace(r,"_$1");}return t};var So=/[\p{Lu}]/u,An=/[\p{Ll}]/u,Io=/([\p{Alpha}\p{N}_]|$)/u,kt=/[_.\- `\\[\]{}\\/]+/,bp=new RegExp(`^${kt.source}`),Nn=new RegExp(`${kt.source}${Io.source}`,"gu"),Ro=new RegExp(`\\d+${Io.source}`,"gu"),Op=({case:e,string:t})=>{let r=false,n=false,s=false,o=false,i=e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?"_":"-";for(let a=0;a<t.length;a++){let c=t[a];o=a>2?t[a-3]===i:true;let m=a+1,f=t[m];for(kt.lastIndex=0;f&&kt.test(f);)m+=1,f=t[m];let l=m!==a+1;if(An.lastIndex=0,So.lastIndex=0,So.test(c)&&(r||f&&!l&&f!=="s"&&An.test(f)))t=`${t.slice(0,a)}${i}${t.slice(a)}`,a++,s=n,r=false,n=true;else if(n&&s&&An.test(c)&&!o&&!(c==="s"&&(!f||f.toLocaleLowerCase()!==f)))t=`${t.slice(0,a-1)}${i}${t.slice(a-1)}`,s=n,r=true,n=false;else {let u=c.toLocaleLowerCase(),d=c.toLocaleUpperCase();s=n,r=u===c&&d!==c,n=d===c&&u!==c;}}return t},P=({case:e,stripLeadingSeparators:t=true,value:r})=>{let n=r.trim();return n.length?!e||e==="preserve"?n:n.length===1?(kt.lastIndex=0,kt.test(n)?"":e==="PascalCase"||e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase()):(n!==n.toLocaleLowerCase()&&(n=Op({case:e,string:n})),(t||n[0]!==r[0])&&(n=n.replace(bp,"")),n=e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase(),e==="PascalCase"&&(n=`${n.charAt(0).toLocaleUpperCase()}${n.slice(1)}`),e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?(n=n.replaceAll(Nn,(o,i,a)=>a===0&&!t?o:`_${i}`),n[n.length-1]==="_"&&(n=n.slice(0,n.length-1))):(Nn.lastIndex=0,Ro.lastIndex=0,n=n.replaceAll(Ro,(o,i,a)=>["_","-","."].includes(n.charAt(a+o.length))?o:o.toLocaleUpperCase()),n=n.replaceAll(Nn,(o,i,a)=>a===0&&!t&&o[0]&&r.startsWith(o[0])?o:i.toLocaleUpperCase())),n):""};var be=class{_exportFromIndex;_headers=[];_id;_identifierCase;_imports=new Map;_items=[];_name;_path;namespaces={type:{},value:{}};constructor({dir:t,exportFromIndex:r=false,header:n=true,id:s,identifierCase:o,name:i}){this._exportFromIndex=r,this._id=s,this._identifierCase=o,this._name=this._setName(i),this._path=G.resolve(t,this._name),n&&this._headers.push("// This file is auto-generated by @hey-api/openapi-ts");}add(...t){this._items=this._items.concat(t);}blockIdentifier({$ref:t,namespace:r}){let n=this.namespaces[r][t];if(!n)throw new Error(`Identifier for $ref ${t} in namespace ${r} not found`);return n.name=false,{created:false,name:n.name}}get exportFromIndex(){return this._exportFromIndex}get id(){return this._id}identifier({namespace:t,...r}){return Co({case:this._identifierCase,namespace:this.namespaces[t],...r})}import({module:t,...r}){let n=this._imports.get(t);n||(n=new Map,this._imports.set(t,n));let s=n.get(r.name);return s?{...s,name:s.alias||s.name}:(n.set(r.name,r),{...r,name:r.alias||r.name})}isEmpty(){return !this._items.length}nameWithoutExtension(){let{name:t}=En(this._name);return t}relativePathToFile({context:t,id:r}){let n="";if(r.startsWith(".")){let m=[];if(t.config.configFile){let f=t.config.configFile.split("/");m=f.slice(0,f.length-1);}n=G.resolve(process.cwd(),...m,r);}else {let m=t.file({id:r});if(!m)throw new Error(`File with id ${r} does not exist`);n=m._path;}let s=this._path.split(G.sep),o=n.split(G.sep),i=-1,a="";for(let m of s)if(i+=1,o[i]!==m){let f=Array.from({length:s.length-i}).fill(""),l=o.slice(i),u=l.slice(0,l.length-1);u.length&&u.push(""),a=(f.join("../")||"./")+u.join("/");break}let c=o[o.length-1];return `${a}${En(c).name}`}remove(t){gr.rmSync(this._path,t);}removeNode(){this._items=this._items.slice(0,this._items.length-1);}_setName(t){if(t.includes("index"))return t;let{extension:r,name:n}=En(t);return [n,"gen",r].filter(Boolean).join(".")}_toString(t,r){let n=[];this._headers.length&&n.push(this._headers.join(`
`));let s=r?.options.moduleResolution===y.ModuleResolutionKind.NodeNext,o=[];for(let[i,a]of this._imports.entries()){let c=Array.from(a.values()),m=i;s&&(m.startsWith("./")||m.startsWith("../"))&&(m=`${m}.js`);let f=p.namedImportDeclarations({imports:c,module:m});o.push(ye({node:f}));}return o.length&&n.push(o.join(`
`)),n=n.concat(this._items.map(i=>typeof i=="string"?i:ye({node:i,unescape:true}))),n.join(t)}write(t=`
`,r=null){if(this.isEmpty()){this.remove({force:true});return}let n=this._path;if(typeof this._path=="string"){let s=this._path.split(G.sep);n=s.slice(0,s.length-1).join(G.sep);}hr(n),gr.writeFileSync(this._path,this._toString(t,r));}};function Rp(e){let t=e,r=[],n=t.split("/"),s=n[n.length-1]||"",o=n.indexOf("properties");if(o!==-1)for(t=n.slice(0,o).join("/"),s=n[o-1]||"";o+1<n.length;){let i=n[o+1];if(!i)throw new Error(`Invalid $ref: ${e}`);r.push(i),o+=2;}return {baseRef:t,name:s,properties:r}}var Co=({$ref:e,case:t,count:r=1,create:n=false,nameTransformer:s,namespace:o})=>{let{baseRef:i,name:a,properties:c}=Rp(e);if(!a)return {created:false,name:""};let m=o[i];if(m){let d=m.name;return c.length&&(d+=c.map(g=>`['${g}']`).join("")),{created:false,name:d}}let f=s?.(a)??a,l=P({case:t,value:f});r>1&&(l=`${l}${r}`);let u=o[l];return u?u.$ref===i?{created:false,name:u.name}:Co({$ref:i,case:t,count:r+1,create:n,nameTransformer:s,namespace:o}):n?(u={$ref:i,name:Cr(l)},o[l]=u,o[u.$ref]=u,{created:true,name:u.name}):{created:false,name:""}},En=e=>{let t=e.match(/\.[0-9a-z]+$/i),r=t?t[0].slice(1):"",n=e.slice(0,e.length-(r?r.length+1:0));return {extension:r,name:n}};var qt="#/ir/",Pr=e=>{let t=$n(e);return t.length===3&&t[0]==="components"},U=e=>{let t=$n(e),r=t[t.length-1];return decodeURI(r)},$n=e=>e.replace(/^#\//,"").split("/"),kn=({$ref:e,spec:t})=>{let r=$n(decodeURI(e)),n=t;for(let s of r){let o=s;if(n[o]===void 0)throw new Error(`Reference not found: ${e}`);n=n[o];}return n};var jr=class{config;files;ir;spec;listeners;constructor({config:t,spec:r}){this.config=t,this.files={},this.ir={},this.listeners={},this.spec=r;}async broadcast(t,...r){this.listeners[t]&&await Promise.all(this.listeners[t].map((n,s)=>{try{let o=n(...r);return Promise.resolve(o)}catch(o){throw console.error(`\u{1F525} Event broadcast: "${t}"
index: ${s}
arguments: ${JSON.stringify(r,null,2)}`),o}}));}createFile(t){let r=t.path.split("/"),n=G.resolve(this.config.output.path,...r.slice(0,r.length-1)),s=new be({dir:n,exportFromIndex:t.exportFromIndex,id:t.id,identifierCase:t.identifierCase,name:`${r[r.length-1]}.ts`});return this.files[t.id]=s,s}file({id:t}){return this.files[t]}resolveIrRef(t){return kn({$ref:t,spec:this.ir})}resolveRef(t){return kn({$ref:t,spec:this.spec})}subscribe(t,r){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(r);}};var Po=({$ref:e,filters:t,schema:r})=>{for(let n of t)if(n instanceof RegExp){if(n.lastIndex=0,n.test(e))return  true}else {let s=n[0]||"",o=n[1];if(o===void 0){if(r[s])return  true}else if(r[s]===o)return  true}return  false},wt=({excludeFilters:e,includeFilters:t,...r})=>!e&&!t?true:e&&Po({...r,filters:e})?false:t?Po({...r,filters:t}):true,jo=e=>e.startsWith("@")?e.slice(1).split(":"):new RegExp(e),qe=e=>{if(e)return typeof e=="string"?[jo(e)]:e.map(t=>jo(t))};var A=({source:e,target:t})=>{let r={...t};if(e&&(e.cookie&&(r.cookie?r.cookie={...r.cookie,...e.cookie}:r.cookie=e.cookie),e.header&&(r.header?r.header={...r.header,...e.header}:r.header=e.header),e.path&&(r.path?r.path={...r.path,...e.path}:r.path=e.path),e.query&&(r.query?r.query={...r.query,...e.query}:r.query=e.query)),!!Object.keys(r).length)return r};var ue=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");return Ct.lastIndex=0,Ct.test(t)?`_${t}`:t},ze=e=>e.replace(/^[^\p{ID_Start}]+/u,"").replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"-").replace(/[$+]/g,"-"),vn=e=>{let t=e.replace("[]","Array");return ze(t)};var Mt=({context:e,id:t,method:r,operationIds:n,path:s})=>{if(!t)return;let o=`${r.toUpperCase()} ${s}`;n.has(t)?e.config.logs.level!=="silent"&&console.warn(`\u2757\uFE0F Duplicate operationId: ${t} in ${o}. Please ensure your operation IDs are unique. This behavior is not supported and will likely lead to unexpected results.`):n.set(t,o);},ut=({context:e,count:t=1,id:r,method:n,path:s,state:o})=>{let i;if(r&&(!e.config.plugins["@hey-api/sdk"]||e.config.plugins["@hey-api/sdk"].operationId))i=P({case:"camelCase",value:ze(r)});else {let c=s.replace(/{(.*?)}/g,"by-$1").replace(/[/:+]/g,"-");i=P({case:"camelCase",value:`${n}-${c}`});}if(t>1&&(i=`${i}${t}`),o.ids.has(i))return ut({context:e,count:t+1,id:r,method:n,path:s,state:o});let a=`${n.toUpperCase()} ${s}`;return o.ids.set(i,a),i};var Ao=/^(application\/(pdf|rtf|msword|vnd\.(ms-|openxmlformats-officedocument\.)|zip|x-(7z|tar|rar|zip|iso)|octet-stream|gzip|x-msdownload|json\+download|xml|x-yaml|x-7z-compressed|x-tar)|text\/(yaml|css|javascript)|audio\/(mpeg|wav)|video\/(mp4|x-matroska)|image\/(vnd\.adobe\.photoshop|svg\+xml))(; ?charset=[^;]+)?$/i,No=/^application\/(.*\+)?json(;.*)?$/i,Eo=/^multipart\/form-data(;.*)?$/i,$o=/^text\/[a-z0-9.+-]+(;.*)?$/i,ko=/^application\/x-www-form-urlencoded(;.*)?$/i,vo=/^application\/octet-stream(;.*)?$/i,we=({mediaType:e})=>(Ao.lastIndex=0,Ao.test(e)),Ft=({mediaType:e})=>{if(No.lastIndex=0,No.test(e))return "json";if(Eo.lastIndex=0,Eo.test(e))return "form-data";if($o.lastIndex=0,$o.test(e))return "text";if(ko.lastIndex=0,ko.test(e))return "url-search-params";if(vo.lastIndex=0,vo.test(e))return "octet-stream"};var qo=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&we({mediaType:t})?{...r,format:"binary"}:r:we({mediaType:t})?{format:"binary",type:"string"}:void 0},qn=({mimeTypes:e,response:t})=>{for(let r of e??[])return {mediaType:r,schema:t.schema,type:Ft({mediaType:r})}};var wo=["after","before","cursor","offset","page","start"];function ne({keywords:e=wo}={}){e.length===0&&(e=wo);let t=`^(${e.join("|")})$`;return new RegExp(t)}var $=({items:e,logicalOperator:t="or",mutateSchemaOneItem:r=false,schema:n})=>e.length?n.type==="tuple"?(n.items=e,n):e.length!==1?(n.items=e,n.logicalOperator=t,n):r?(n={...n,...e[0]},n):(n.items=e,n):n;var Oe=(e,t)=>{let r=[];for(let n in t)t[n]===e&&r.push(n);return r.length?r:[U(e)]};var S=(e,t)=>{if(!e?.length)return t?.length?t:void 0;if(!t?.length)return e;let r=new Set(e);for(let n of t)r.add(n);return r.size>e.length?Array.from(r):e};var Zt=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},Tp=({irSchema:e,schema:t})=>{t.description&&(e.description=t.description),t.title&&(e.title=t.title);},Ar=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=S(e.accessScopes,["read"])):r.isProperty&&(e.accessScopes=S(e.accessScopes,["both"]));},Cp=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let s=[];if(r.items){let o=ae({context:e,schema:r.items,state:n});if(t.accessScopes=S(t.accessScopes,o.accessScopes),!s.length&&r.maxItems&&r.maxItems===r.minItems)s=Array(r.maxItems).fill(o);else if("$ref"in r.items)s.push(o);else {let i=r.items.allOf;i&&i.length>1&&!r.items["x-nullable"]?t={...t,...o}:s.push(o);}}return t=$({items:s,schema:t}),t},Pp=({irSchema:e={}})=>(e.type="boolean",e),jp=({irSchema:e={},schema:t})=>(e.type=t.type,e),Ap=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let s={};for(let o in r.properties){let i=r.properties[o];if(typeof i!="boolean"){let a=ae({context:e,schema:i,state:{...n,isProperty:true}});t.accessScopes=S(t.accessScopes,a.accessScopes),s[o]=a;}}if(Object.keys(s).length&&(t.properties=s),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let o=ae({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=o;}return r.required&&(t.required=r.required),t},Np=({irSchema:e={}})=>(e.type="string",e),Dt=({schema:e})=>{let t={};return Tp({irSchema:t,schema:e}),t},Ep=({context:e,schema:t,state:r})=>{let n=Dt({schema:t}),s=[],o=Zt({schema:t}),i=t.allOf;for(let a of i){let c=ae({context:e,schema:a,state:r});if(n.accessScopes=S(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),s.push(c),a.$ref){let m=e.resolveRef(a.$ref);if(m.discriminator&&r.$ref){let l=Oe(r.$ref).map(d=>({const:d,type:"string"})),u={properties:{[m.discriminator]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"};m.required?.includes(m.discriminator)&&(u.required=[m.discriminator]),s.push(u);}if(!r.circularReferenceTracker.has(a.$ref)){let f=ae({context:e,schema:m,state:{...r,$ref:a.$ref}});n.accessScopes=S(n.accessScopes,f.accessScopes);}}}if(o==="object"){let a=Yt({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=S(n.accessScopes,a.accessScopes),a.properties){for(let c of a.required??[])if(!a.properties[c])for(let m of i){let f=m.$ref?e.resolveRef(m.$ref):m;if(Zt({schema:f})==="object"){let l=Yt({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=S(n.accessScopes,l.accessScopes),l.properties?.[c]){a.properties[c]=l.properties[c];break}}}s.push(a);}}if(n=$({items:s,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t["x-nullable"]){let a=[{type:"null"}];s.length&&a.unshift(n),n={items:a,logicalOperator:"or"},a[0].deprecated&&(n.deprecated=a[0].deprecated),a[0].description&&(n.description=a[0].description);}return n},$p=({context:e,schema:t,state:r})=>{let n=Dt({schema:t});n.type="enum";let s=[];for(let[o,i]of t.enum.entries()){let a=typeof i,c;if(a==="string"||a==="number"||a==="boolean"?c=a:a==="object"&&Array.isArray(i)?c="array":i===null?t["x-nullable"]&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${a}" typeof value "${i}" for enum`,t.enum),!c)continue;let m=Yt({context:e,schema:{description:t["x-enum-descriptions"]?.[o],title:t["x-enum-varnames"]?.[o]??t["x-enumNames"]?.[o],type:c==="null"?"string":c},state:r});m.const=i,c==="null"&&(m.type=c),m.type==="array"&&(m.type="tuple"),n.accessScopes=S(n.accessScopes,m.accessScopes),s.push(m);}return n=$({items:s,schema:n}),n},kp=({context:e,schema:t,state:r})=>{let n={};if(n.$ref=decodeURI(t.$ref),n.$ref=n.$ref.replace(/#\/definitions\/([^/]+)/g,"#/components/schemas/$1"),!r.circularReferenceTracker.has(t.$ref)){let s=e.resolveRef(t.$ref),o=ae({context:e,schema:s,state:{...r,$ref:t.$ref,isProperty:false}});n.accessScopes=S(n.accessScopes,o.accessScopes);}return n},vp=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=Dt({schema:r}));let s={};Ar({irSchema:s,schema:r,state:n}),s.default===null&&delete s.default;let o=[Yt({context:e,irSchema:s,schema:r,state:n}),{type:"null"}];return t=$({items:o,schema:t}),t},qp=({context:e,schema:t,state:r})=>{let n=Dt({schema:t});Ar({irSchema:n,schema:t,state:r});let s=Zt({schema:t});return s?t["x-nullable"]?vp({context:e,irSchema:n,schema:{...t,type:s},state:r}):Yt({context:e,irSchema:n,schema:{...t,type:s},state:r}):n},Yt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=Dt({schema:r}),Ar({irSchema:t,schema:r,state:n})),r.type){case "array":return Cp({context:e,irSchema:t,schema:r,state:n});case "boolean":return Pp({irSchema:t});case "integer":case "number":return jp({irSchema:t,schema:r});case "object":return Ap({context:e,irSchema:t,schema:r,state:n});case "string":return Np({irSchema:t});default:return Mo({irSchema:t,schema:r,state:n})}},Mo=({irSchema:e,schema:t,state:r})=>(e||(e=Dt({schema:t})),e.type="unknown",Ar({irSchema:e,schema:t,state:r}),e),ae=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?kp({context:e,schema:t,state:r}):t.enum?$p({context:e,schema:t,state:r}):t.allOf?Ep({context:e,schema:t,state:r}):t.type||t.properties?qp({context:e,schema:t,state:r}):Mo({schema:t,state:r})),Fo=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[U(e)]=ae({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var wp=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",Je=({context:e,name:t,schema:r})=>{if(ne(e.config.input.pagination).test(t))return  true;if("$ref"in r){let s=e.resolveRef(r.$ref??"");if("in"in s&&s.in){let o="schema"in s?s.schema:{...s,in:void 0};return Je({context:e,name:t,schema:o})}return Je({context:e,name:t,schema:s})}if("in"in r){if(!r.in)return  false;let s="schema"in r?r.schema:{...r,in:void 0};return Je({context:e,name:t,schema:s})}for(let s in r.properties)if(ne(e.config.input.pagination).test(s)){let i=r.properties[s];if(typeof i!="boolean"&&!("$ref"in i)){let a=Zt({schema:i});if(wp(a))return s}}for(let s of r.allOf??[]){let o=Je({context:e,name:t,schema:s});if(o)return o}return  false};var Mp=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},Fp=({context:e,method:t,operation:r,path:n,state:s})=>{let o={id:ut({context:e,id:r.operationId,method:t,path:n,state:s}),method:t,path:n};return Mp({irOperation:o,operation:r}),o},Dp=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o})=>{let i=Fp({context:e,method:t,operation:r,path:n,state:o});r.parameters&&(i.parameters=r.parameters);let a=false,c={mediaType:"",schema:{properties:{},required:[],type:"object"}},m=[];for(let f of r.requestBody??[]){let l="$ref"in f?e.resolveRef(f.$ref):f,u=l.in==="body"?l.schema:{...l,format:l.type==="file"?"binary":l.format,required:void 0,type:l.type==="file"?"string":l.type},d=qn({mimeTypes:r.consumes,response:{schema:u}});if(d){let g=Je({context:e,name:"",schema:d.schema&&"$ref"in d.schema?{allOf:[{...d.schema}],description:l.description}:{description:l.description,...d.schema}}),h=ae({context:e,schema:"$ref"in l?{allOf:[{...l,$ref:l.$ref,required:[],type:"string"}],description:l.description}:d.schema&&"$ref"in d.schema?{allOf:[{...d.schema}],description:l.description}:{description:l.description,...d.schema},state:void 0});c.mediaType=d.mediaType,l.in==="body"?c.schema=h:(c.schema.properties[l.name]=h,l.required&&m.push(l.name)),g&&(c.pagination=g),d.type&&(c.type=d.type);}l.required&&(a=true);}c.mediaType&&(m.length&&(c.schema.required=m),i.body=c,a&&(i.body.required=a));for(let f in r.responses){i.responses||(i.responses={});let l=r.responses[f],u="$ref"in l?e.resolveRef(l.$ref):l,d=qn({mimeTypes:r.produces?r.produces:["application/json"],response:u});d?i.responses[f]={mediaType:d.mediaType,schema:ae({context:e,schema:{description:u.description,...qo({content:d})},state:void 0})}:i.responses[f]={schema:{description:u.description,type:f==="204"?"void":"unknown"}};}if(r.security){let f=[];for(let l of r.security)for(let u in l){let d=s.get(u);if(!d)continue;let g;if(d.type==="apiKey"&&(g=d),d.type==="basic"&&(g={description:d.description,scheme:"basic",type:"http"}),d.type==="oauth2")switch(g={description:d.description,flows:{},type:"oauth2"},d.flow){case "accessCode":g.flows.authorizationCode={authorizationUrl:d.authorizationUrl,scopes:d.scopes,tokenUrl:d.tokenUrl};break;case "application":g.flows.clientCredentials={scopes:d.scopes,tokenUrl:d.tokenUrl};break;case "implicit":g.flows.implicit={authorizationUrl:d.authorizationUrl,scopes:d.scopes};break;case "password":g.flows.password={scopes:d.scopes,tokenUrl:d.tokenUrl};break}g&&f.push(g);}f.length&&(i.security=f);}return i},Ge=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o})=>{Mt({context:e,id:r.operationId,method:t,operationIds:o.operationIds,path:n}),e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),e.ir.paths[n][t]=Dp({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o});};var Lp=e=>{switch(e){case "multi":return  true;case "csv":case "pipes":case "ssv":case "tsv":default:return  false}},_p=e=>{switch(e){case "header":case "path":return "simple";case "query":default:return "form"}},Me=({context:e,operation:t,parameters:r})=>{if(!r||!Object.keys(r).length)return;let n={};for(let s of r){let o="$ref"in s?e.resolveRef(s.$ref):s;if(o.in==="body"||o.in==="formData"){t.requestBody||(t.requestBody=[]),t.requestBody.push(o);continue}n[o.in]||(n[o.in]={}),n[o.in][o.name]=Kp({context:e,parameter:o});}return n},Kp=({context:e,parameter:t})=>{let r=t,n=r&&"$ref"in r?{allOf:[{...r,$ref:r.$ref,required:Array.isArray(r.required)?r.required:[],type:r.type}],description:t.description}:{description:t.description,...r,required:Array.isArray(r.required)?r.required:[],type:r.type},s=Je({context:e,name:t.name,schema:n}),o=_p(t.in),c={allowReserved:false,explode:Lp(t.collectionFormat),location:t.in,name:t.name,schema:ae({context:e,schema:n,state:void 0}),style:o};return t.description&&(c.description=t.description),s&&(c.pagination=s),t.required&&(c.required=t.required),c};var Do=/^(([^:/?#]+):)?((\/\/)?([^:/?#]*)(:?([^/?#]*)))?([^?#]*)(\?([^#]*))?(#(.*))?/,Se=e=>{let t={host:"",path:"",port:"",protocol:""};Do.lastIndex=0;let r=e.match(Do);if(!r)return t;let n=r[5]||"";if(n==="."||n==="..")return t;let s=r[8]||"",o=r[2]||"";return o.length===1?t:{host:n,path:s==="/"?"":s,port:r[7]||"",protocol:o}};var Lo=({context:e})=>{let t=e.spec.schemes??[],r=e.spec.host??"",n=e.spec.basePath??"";if(typeof e.config.input.path=="string"){let o=Se(e.config.input.path);t.length||o.protocol&&(t=[o.protocol]),r||(r=`${o.host}${o.port?`:${o.port}`:""}`);}t.length||(t=[""]);let s=t.map(o=>`${o?`${o}://`:""}${r}${n}`).filter(Boolean);s.length&&(e.ir.servers=s.map(o=>({url:o})));};var wn=e=>{let t={ids:new Map,operationIds:new Map},r=new Map,n=qe(e.config.input.exclude),s=qe(e.config.input.include),o=(i,a)=>wt({$ref:i,excludeFilters:n,includeFilters:s,schema:a});for(let i in e.spec.securityDefinitions){let a=e.spec.securityDefinitions[i];r.set(i,a);}if(e.spec.definitions)for(let i in e.spec.definitions){let a=`#/definitions/${i}`,c=e.spec.definitions[i];o(a,c)&&Fo({$ref:a,context:e,schema:c});}Lo({context:e});for(let i in e.spec.paths){if(i.startsWith("x-"))continue;let a=e.spec.paths[i],c=a.$ref?{...e.resolveRef(a.$ref),...a}:a,m={consumes:e.spec.consumes,produces:e.spec.produces,responses:{},security:e.spec.security},f={context:e,operation:{...m,parameters:Me({context:e,operation:m,parameters:c.parameters})},path:i,securitySchemesMap:r,state:t},l=`#/paths${i}/delete`;if(c.delete&&o(l,c.delete)){let j=A({source:Me({context:e,operation:c.delete,parameters:c.delete.parameters}),target:f.operation.parameters});Ge({...f,method:"delete",operation:{...f.operation,...c.delete,parameters:j}});}let u=`#/paths${i}/get`;if(c.get&&o(u,c.get)){let j=A({source:Me({context:e,operation:c.get,parameters:c.get.parameters}),target:f.operation.parameters});Ge({...f,method:"get",operation:{...f.operation,...c.get,parameters:j}});}let d=`#/paths${i}/head`;if(c.head&&o(d,c.head)){let j=A({source:Me({context:e,operation:c.head,parameters:c.head.parameters}),target:f.operation.parameters});Ge({...f,method:"head",operation:{...f.operation,...c.head,parameters:j}});}let g=`#/paths${i}/options`;if(c.options&&o(g,c.options)){let j=A({source:Me({context:e,operation:c.options,parameters:c.options.parameters}),target:f.operation.parameters});Ge({...f,method:"options",operation:{...f.operation,...c.options,parameters:j}});}let h=`#/paths${i}/patch`;if(c.patch&&o(h,c.patch)){let j=A({source:Me({context:e,operation:c.patch,parameters:c.patch.parameters}),target:f.operation.parameters});Ge({...f,method:"patch",operation:{...f.operation,...c.patch,parameters:j}});}let O=`#/paths${i}/post`;if(c.post&&o(O,c.post)){let j=A({source:Me({context:e,operation:c.post,parameters:c.post.parameters}),target:f.operation.parameters});Ge({...f,method:"post",operation:{...f.operation,...c.post,parameters:j}});}let x=`#/paths${i}/put`;if(c.put&&o(x,c.put)){let j=A({source:Me({context:e,operation:c.put,parameters:c.put.parameters}),target:f.operation.parameters});Ge({...f,method:"put",operation:{...f.operation,...c.put,parameters:j}});}}};var _o=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&we({mediaType:t})?{...r,format:"binary"}:r:we({mediaType:t})?{format:"binary",type:"string"}:void 0},Fe=({content:e})=>{for(let t in e)return {mediaType:t,schema:e[t].schema,type:Ft({mediaType:t})}};var dt=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},Bp=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},Nr=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=S(e.accessScopes,["read"])):t.writeOnly?(e.accessScope="write",e.accessScopes=S(e.accessScopes,["write"])):r.isProperty&&(e.accessScopes=S(e.accessScopes,["both"]));},Vp=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let s=[];if(r.items){let o=W({context:e,schema:r.items,state:n});if(t.accessScopes=S(t.accessScopes,o.accessScopes),!s.length&&r.maxItems&&r.maxItems===r.minItems)s=Array(r.maxItems).fill(o);else if("$ref"in r.items)s.push(o);else {let i=r.items.allOf||r.items.anyOf||r.items.oneOf;i&&i.length>1&&!r.items.nullable?t={...t,...o}:s.push(o);}}return t=$({items:s,schema:t}),t},Up=({irSchema:e={}})=>(e.type="boolean",e),Wp=({irSchema:e={},schema:t})=>(e.type=t.type,e),Qp=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let s={};for(let o in r.properties){let i=r.properties[o];if(typeof i!="boolean"){let a=W({context:e,schema:i,state:{...n,isProperty:true}});t.accessScopes=S(t.accessScopes,a.accessScopes),s[o]=a;}}if(Object.keys(s).length&&(t.properties=s),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let o=W({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=o;}return r.required&&(t.required=r.required),t},Xp=({irSchema:e={}})=>(e.type="string",e),Ze=({schema:e})=>{let t={};return Bp({irSchema:t,schema:e}),t},Hp=({context:e,schema:t,state:r})=>{let n=Ze({schema:t}),s=[],o=dt({schema:t}),i=t.allOf;for(let a of i){let c=W({context:e,schema:a,state:r});if(n.accessScopes=S(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),s.push(c),"$ref"in a){let m=e.resolveRef(a.$ref);if(m.discriminator&&r.$ref){let l=Oe(r.$ref,m.discriminator.mapping).map(d=>({const:d,type:"string"})),u={properties:{[m.discriminator.propertyName]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"};m.required?.includes(m.discriminator.propertyName)&&(u.required=[m.discriminator.propertyName]),s.push(u);}if(!r.circularReferenceTracker.has(a.$ref)){let f=W({context:e,schema:m,state:{...r,$ref:a.$ref}});n.accessScopes=S(n.accessScopes,f.accessScopes);}}}if(o==="object"){let a=yt({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=S(n.accessScopes,a.accessScopes),a.properties){for(let c of a.required??[])if(!a.properties[c])for(let m of i){let f="$ref"in m?e.resolveRef(m.$ref):m;if(dt({schema:f})==="object"){let l=yt({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=S(n.accessScopes,l.accessScopes),l.properties?.[c]){a.properties[c]=l.properties[c];break}}}s.push(a);}}if(n=$({items:s,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t.nullable){let a=[{type:"null"}];s.length&&a.unshift(n),n={items:a,logicalOperator:"or"},a[0].deprecated&&(n.deprecated=a[0].deprecated),a[0].description&&(n.description=a[0].description);}return n},zp=({context:e,schema:t,state:r})=>{let n=Ze({schema:t}),s=[],o=dt({schema:t}),i=t.anyOf;for(let a of i){let c=W({context:e,schema:a,state:r});if(n.accessScopes=S(n.accessScopes,c.accessScopes),t.discriminator&&"$ref"in a){let f=Oe(a.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},type:"object"},c],logicalOperator:"and"};}s.push(c);}if(t.nullable&&s.push({type:"null"}),n=$({items:s,mutateSchemaOneItem:true,schema:n}),o==="object"){let a=yt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=S(n.accessScopes,a.accessScopes),a.properties&&(n={items:[n,a],logicalOperator:"and"});}return n},Jp=({context:e,schema:t,state:r})=>{let n=Ze({schema:t});n.type="enum";let s=[];for(let[o,i]of t.enum.entries()){let a=typeof i,c;if(a==="string"||a==="number"||a==="boolean"?c=a:a==="object"&&Array.isArray(i)?c="array":i===null?t.nullable&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${a}" typeof value "${i}" for enum`,t.enum),!c)continue;let m=yt({context:e,schema:{description:t["x-enum-descriptions"]?.[o],title:t["x-enum-varnames"]?.[o]??t["x-enumNames"]?.[o],type:c==="null"?"string":c},state:r});m.const=i,c==="null"&&(m.type=c),m.type==="array"&&(m.type="tuple"),n.accessScopes=S(n.accessScopes,m.accessScopes),s.push(m);}return n=$({items:s,schema:n}),n},Gp=({context:e,schema:t,state:r})=>{let n=Ze({schema:t}),s=[],o=dt({schema:t}),i=t.oneOf;for(let a of i){let c=W({context:e,schema:a,state:r});if(n.accessScopes=S(n.accessScopes,c.accessScopes),t.discriminator&&"$ref"in a){let f=Oe(a.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.items?s=s.concat(c.items):s.push(c);}if(t.nullable&&s.push({type:"null"}),n=$({items:s,mutateSchemaOneItem:true,schema:n}),o==="object"){let a=yt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=S(n.accessScopes,a.accessScopes),a.properties&&(n={items:[n,a],logicalOperator:"and"});}return n},Zp=({context:e,schema:t,state:r})=>{let n={};if(n.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let s=e.resolveRef(t.$ref),o=W({context:e,schema:s,state:{...r,$ref:t.$ref,isProperty:false}});n.accessScopes=S(n.accessScopes,o.accessScopes);}return n},Yp=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=Ze({schema:r}));let s={};Nr({irSchema:s,schema:r,state:n}),s.default===null&&delete s.default;let o=[yt({context:e,irSchema:s,schema:r,state:n}),{type:"null"}];return t=$({items:o,schema:t}),t},ec=({context:e,schema:t,state:r})=>{let n=Ze({schema:t});Nr({irSchema:n,schema:t,state:r});let s=dt({schema:t});return s?t.nullable?Yp({context:e,irSchema:n,schema:{...t,type:s},state:r}):yt({context:e,irSchema:n,schema:{...t,type:s},state:r}):n},yt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=Ze({schema:r}),Nr({irSchema:t,schema:r,state:n})),r.type){case "array":return Vp({context:e,irSchema:t,schema:r,state:n});case "boolean":return Up({irSchema:t});case "integer":case "number":return Wp({irSchema:t,schema:r});case "object":return Qp({context:e,irSchema:t,schema:r,state:n});case "string":return Xp({irSchema:t});default:return Ko({irSchema:t,schema:r,state:n})}},Ko=({irSchema:e,schema:t,state:r})=>(e||(e=Ze({schema:t})),e.type="unknown",Nr({irSchema:e,schema:t,state:r}),e),W=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),"$ref"in t?Zp({context:e,schema:t,state:r}):t.enum?Jp({context:e,schema:t,state:r}):t.allOf?Hp({context:e,schema:t,state:r}):t.anyOf?zp({context:e,schema:t,state:r}):t.oneOf?Gp({context:e,schema:t,state:r}):t.type||t.properties?ec({context:e,schema:t,state:r}):Ko({schema:t,state:r})),Bo=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[U(e)]=W({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var tc=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",gt=({context:e,name:t,schema:r})=>{if(ne(e.config.input.pagination).test(t))return  true;if("$ref"in r){let s=e.resolveRef(r.$ref);if("content"in s||"in"in s){let o;if("in"in s&&(o=s.schema),!o){let i=Fe({content:s.content});i?.schema&&(o=i.schema);}return o?gt({context:e,name:t,schema:o}):false}return gt({context:e,name:t,schema:s})}for(let s in r.properties)if(ne(e.config.input.pagination).test(s)){let i=r.properties[s];if(typeof i!="boolean"&&!("$ref"in i)){let a=dt({schema:i});if(tc(a))return s}}for(let s of r.allOf??[]){let o=gt({context:e,name:t,schema:s});if(o)return o}return  false};var rc=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},nc=({context:e,method:t,operation:r,path:n,state:s})=>{let o={id:ut({context:e,id:r.operationId,method:t,path:n,state:s}),method:t,path:n};return rc({irOperation:o,operation:r}),o},sc=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o})=>{let i=nc({context:e,method:t,operation:r,path:n,state:o});if(r.parameters&&(i.parameters=r.parameters),r.requestBody){let a="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=Fe({content:a.content});if(c){let m=gt({context:e,name:"",schema:c.schema&&"$ref"in c.schema?{allOf:[{...c.schema}],description:a.description}:{description:a.description,...c.schema}});i.body={mediaType:c.mediaType,schema:W({context:e,schema:"$ref"in r.requestBody?{allOf:[{...r.requestBody}],description:a.description}:c.schema&&"$ref"in c.schema?{allOf:[{...c.schema}],description:a.description}:{description:a.description,...c.schema},state:void 0})},m&&(i.body.pagination=m),a.required&&(i.body.required=a.required),c.type&&(i.body.type=c.type);}}for(let a in r.responses){i.responses||(i.responses={});let c=r.responses[a],m="$ref"in c?e.resolveRef(c.$ref):c,f=Fe({content:m.content});f?i.responses[a]={mediaType:f.mediaType,schema:W({context:e,schema:{description:m.description,..._o({content:f})},state:void 0})}:i.responses[a]={schema:{description:m.description,type:a==="204"?"void":"unknown"}};}if(r.security){let a=[];for(let c of r.security)for(let m in c){let f=s.get(m);f&&a.push(f);}a.length&&(i.security=a);}return i},De=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o})=>{Mt({context:e,id:r.operationId,method:t,operationIds:o.operationIds,path:n}),e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),e.ir.paths[n][t]=sc({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o});};var oc=e=>{switch(e){case "query":return  false;default:return}},ic=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},ac=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},Re=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let s="$ref"in n?e.resolveRef(n.$ref):n;r[s.in]||(r[s.in]={}),r[s.in][s.name]=Vo({context:e,parameter:s});}return r},Vo=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=Fe({content:t.content});m&&(r=m.schema);}let n=r&&"$ref"in r?{allOf:[{...r}],deprecated:t.deprecated,description:t.description}:{deprecated:t.deprecated,description:t.description,...r},s=gt({context:e,name:t.name,schema:n}),o=t.style||ac(t.in),i=t.explode!==void 0?t.explode:ic(o),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:oc(t.in),explode:i,location:t.in,name:t.name,schema:W({context:e,schema:n,state:void 0}),style:o};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),s&&(c.pagination=s),t.required&&(c.required=t.required),c},Uo=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[U(e)]=Vo({context:t,parameter:r});};var pc=({context:e,requestBody:t})=>{let r=Fe({content:t.content}),n=r?r.schema:void 0,s={description:t.description,...n},o={schema:W({context:e,schema:s,state:void 0})};return t.description&&(o.description=t.description),t.required&&(o.required=t.required),o},Wo=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[U(e)]=pc({context:t,requestBody:r});};var Qo=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=Se(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var Mn=e=>{let t={ids:new Map,operationIds:new Map},r=new Map,n=qe(e.config.input.exclude),s=qe(e.config.input.include),o=(i,a)=>wt({$ref:i,excludeFilters:n,includeFilters:s,schema:a});if(e.spec.components){for(let i in e.spec.components.securitySchemes){let a=e.spec.components.securitySchemes[i],c="$ref"in a?e.resolveRef(a.$ref):a;r.set(i,c);}for(let i in e.spec.components.parameters){let a=`#/components/parameters/${i}`,c=e.spec.components.parameters[i],m="$ref"in c?e.resolveRef(c.$ref):c;o(a,m)&&Uo({$ref:a,context:e,parameter:m});}for(let i in e.spec.components.requestBodies){let a=`#/components/requestBodies/${i}`,c=e.spec.components.requestBodies[i],m="$ref"in c?e.resolveRef(c.$ref):c;o(a,m)&&Wo({$ref:a,context:e,requestBody:m});}for(let i in e.spec.components.schemas){let a=`#/components/schemas/${i}`,c=e.spec.components.schemas[i];o(a,c)&&Bo({$ref:a,context:e,schema:c});}}Qo({context:e});for(let i in e.spec.paths){let a=e.spec.paths[i],c=a.$ref?{...e.resolveRef(a.$ref),...a}:a,m={context:e,operation:{description:c.description,parameters:Re({context:e,parameters:c.parameters}),security:e.spec.security,servers:c.servers,summary:c.summary},path:i,securitySchemesMap:r,state:t},f=`#/paths${i}/delete`;c.delete&&o(f,c.delete)&&De({...m,method:"delete",operation:{...m.operation,...c.delete,parameters:A({source:Re({context:e,parameters:c.delete.parameters}),target:m.operation.parameters})}});let l=`#/paths${i}/get`;c.get&&o(l,c.get)&&De({...m,method:"get",operation:{...m.operation,...c.get,parameters:A({source:Re({context:e,parameters:c.get.parameters}),target:m.operation.parameters})}});let u=`#/paths${i}/head`;c.head&&o(u,c.head)&&De({...m,method:"head",operation:{...m.operation,...c.head,parameters:A({source:Re({context:e,parameters:c.head.parameters}),target:m.operation.parameters})}});let d=`#/paths${i}/options`;c.options&&o(d,c.options)&&De({...m,method:"options",operation:{...m.operation,...c.options,parameters:A({source:Re({context:e,parameters:c.options.parameters}),target:m.operation.parameters})}});let g=`#/paths${i}/patch`;c.patch&&o(g,c.patch)&&De({...m,method:"patch",operation:{...m.operation,...c.patch,parameters:A({source:Re({context:e,parameters:c.patch.parameters}),target:m.operation.parameters})}});let h=`#/paths${i}/post`;c.post&&o(h,c.post)&&De({...m,method:"post",operation:{...m.operation,...c.post,parameters:A({source:Re({context:e,parameters:c.post.parameters}),target:m.operation.parameters})}});let O=`#/paths${i}/put`;c.put&&o(O,c.put)&&De({...m,method:"put",operation:{...m.operation,...c.put,parameters:A({source:Re({context:e,parameters:c.put.parameters}),target:m.operation.parameters})}});let x=`#/paths${i}/trace`;c.trace&&o(x,c.trace)&&De({...m,method:"trace",operation:{...m.operation,...c.trace,parameters:A({source:Re({context:e,parameters:c.trace.parameters}),target:m.operation.parameters})}});}};var Xo=({content:e})=>{let{mediaType:t,schema:r}=e;return r?r.type==="string"&&!r.format&&we({mediaType:t})?{...r,format:"binary"}:r:we({mediaType:t})?{format:"binary",type:"string"}:void 0},Le=({content:e})=>{for(let t in e)return {mediaType:t,schema:e[t].schema,type:Ft({mediaType:t})}};var Ie=({schema:e})=>typeof e.type=="string"?[e.type]:e.type?e.type:e.properties?["object"]:[],cc=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},Er=({irSchema:e,schema:t,state:r})=>{if(t.const!==void 0&&(e.const=t.const,!t.type))if(t.const===null)e.type="null";else switch(typeof t.const){case "bigint":case "number":e.type="number";break;case "boolean":e.type="boolean";break;case "string":e.type="string";break}t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum&&(e.exclusiveMaximum=t.exclusiveMaximum),t.exclusiveMinimum&&(e.exclusiveMinimum=t.exclusiveMinimum),t.format&&(e.format=t.format),t.maximum!==void 0&&(e.maximum=t.maximum),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minimum!==void 0&&(e.minimum=t.minimum),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=S(e.accessScopes,["read"])):t.writeOnly?(e.accessScope="write",e.accessScopes=S(e.accessScopes,["write"])):r.isProperty&&(e.accessScopes=S(e.accessScopes,["both"]));},mc=({context:e,irSchema:t={},schema:r,state:n})=>{r.prefixItems&&r.prefixItems.length||r.maxItems&&r.maxItems===r.minItems||r.const!==void 0?t.type="tuple":t.type="array";let s=[];for(let o of r.prefixItems??[]){let i=K({context:e,schema:o,state:n});t.accessScopes=S(t.accessScopes,i.accessScopes),s.push(i);}if(r.items){let o=K({context:e,schema:r.items,state:n});if(t.accessScopes=S(t.accessScopes,o.accessScopes),!s.length&&r.maxItems&&r.maxItems===r.minItems)s=Array(r.maxItems).fill(o);else {let i=r.items.allOf||r.items.anyOf||r.items.oneOf;i&&i.length>1&&!Ie({schema:r.items}).includes("null")?t={...t,...o}:s.push(o);}}return t=$({items:s,schema:t}),t},fc=({irSchema:e={}})=>(e.type="boolean",e),lc=({irSchema:e={}})=>(e.type="null",e),uc=({irSchema:e={},schema:t})=>(e.type=t.type,e),dc=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let s={};for(let o in r.properties){let i=r.properties[o];if(typeof i!="boolean"){let a=K({context:e,schema:i,state:{...n,isProperty:true}});t.accessScopes=S(t.accessScopes,a.accessScopes),s[o]=a;}}if(Object.keys(s).length&&(t.properties=s),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let o=K({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=o;}return r.required&&(t.required=r.required),t},yc=({irSchema:e={}})=>(e.type="string",e),_e=({schema:e})=>{let t={};return cc({irSchema:t,schema:e}),t},gc=({context:e,schema:t,state:r})=>{let n=_e({schema:t}),s=[],o=Ie({schema:t}),i=t.allOf;for(let a of i){let c=K({context:e,schema:a,state:r});if(n.accessScopes=S(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),s.push(c),a.$ref){let m=e.resolveRef(a.$ref);if(m.discriminator&&r.$ref){let l=Oe(r.$ref,m.discriminator.mapping).map(d=>({const:d,type:"string"})),u={properties:{[m.discriminator.propertyName]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"};m.required?.includes(m.discriminator.propertyName)&&(u.required=[m.discriminator.propertyName]),s.push(u);}if(!r.circularReferenceTracker.has(a.$ref)){let f=K({context:e,schema:m,state:{...r,$ref:a.$ref}});n.accessScopes=S(n.accessScopes,f.accessScopes);}}}if(o.includes("object")){let a=ht({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=S(n.accessScopes,a.accessScopes),a.properties){for(let c of a.required??[])if(!a.properties[c])for(let m of i){let f=m.$ref?e.resolveRef(m.$ref):m;if(Ie({schema:f}).includes("object")){let l=ht({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=S(n.accessScopes,l.accessScopes),l.properties?.[c]){a.properties[c]=l.properties[c];break}}}s.push(a);}}if(n=$({items:s,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),o.includes("null")){let a=[{type:"null"}];s.length&&a.unshift(n),n={items:a,logicalOperator:"or"};}return n},hc=({context:e,schema:t,state:r})=>{let n=_e({schema:t}),s=[],o=Ie({schema:t}),i=t.anyOf;for(let a of i){let c=K({context:e,schema:a,state:r});if(n.accessScopes=S(n.accessScopes,c.accessScopes),t.discriminator&&a.$ref){let f=Oe(a.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},type:"object"},c],logicalOperator:"and"};}s.push(c);}if(o.includes("null")&&s.push({type:"null"}),n=$({items:s,mutateSchemaOneItem:true,schema:n}),o.includes("object")){let a=ht({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=S(n.accessScopes,a.accessScopes),a.properties&&(n={items:[n,a],logicalOperator:"and"});}return n},xc=({context:e,schema:t,state:r})=>{let n=_e({schema:t});n.type="enum";let s=[],o=Ie({schema:t});for(let[i,a]of t.enum.entries()){let c=typeof a,m;if(c==="string"||c==="number"||c==="boolean"?m=c:c==="object"&&Array.isArray(a)?m="array":a===null?o.includes("null")&&(m="null"):console.warn("\u{1F6A8}",`unhandled "${c}" typeof value "${a}" for enum`,t.enum),!m)continue;let f=ht({context:e,schema:{const:a,description:t["x-enum-descriptions"]?.[i],title:t["x-enum-varnames"]?.[i]??t["x-enumNames"]?.[i],type:m},state:r});n.accessScopes=S(n.accessScopes,f.accessScopes),s.push(f);}return n=$({items:s,schema:n}),n},bc=({context:e,schema:t,state:r})=>{let n=_e({schema:t}),s=[],o=Ie({schema:t}),i=t.oneOf;for(let a of i){let c=K({context:e,schema:a,state:r});if(n.accessScopes=S(n.accessScopes,c.accessScopes),t.discriminator&&a.$ref){let f=Oe(a.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.items?s=s.concat(c.items):s.push(c);}if(o.includes("null")&&s.push({type:"null"}),n=$({items:s,mutateSchemaOneItem:true,schema:n}),o.includes("object")){let a=ht({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=S(n.accessScopes,a.accessScopes),a.properties&&(n={items:[n,a],logicalOperator:"and"});}return n},Oc=({context:e,schema:t,state:r})=>{let n=_e({schema:t}),s={};if(s.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let i=e.resolveRef(t.$ref),a=K({context:e,schema:i,state:{...r,$ref:t.$ref,isProperty:false}});s.accessScopes=S(s.accessScopes,a.accessScopes);}let o=[];return o.push(s),t.type&&typeof t.type!="string"&&t.type.includes("null")&&o.push({type:"null"}),n=$({items:o,mutateSchemaOneItem:true,schema:n}),n},ht=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=_e({schema:r}),Er({irSchema:t,schema:r,state:n})),r.type){case "array":return mc({context:e,irSchema:t,schema:r,state:n});case "boolean":return fc({irSchema:t});case "integer":case "number":return uc({irSchema:t,schema:r});case "null":return lc({irSchema:t});case "object":return dc({context:e,irSchema:t,schema:r,state:n});case "string":return yc({irSchema:t});default:return Ho({irSchema:t,schema:r,state:n})}},Sc=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=_e({schema:r}));let s={};Er({irSchema:s,schema:r,state:n}),r.type.includes("null")&&s.default===null&&delete s.default;let o=[];for(let i of r.type)if(i==="null")o.push({type:"null"});else {let a=ht({context:e,irSchema:s,schema:{...r,type:i},state:n});t.accessScopes=S(t.accessScopes,a.accessScopes),o.push(a);}return t=$({items:o,schema:t}),t},Rc=({context:e,schema:t,state:r})=>{let n=_e({schema:t});Er({irSchema:n,schema:t,state:r});let s=Ie({schema:t});return s.length===1?ht({context:e,irSchema:n,schema:{...t,type:s[0]},state:r}):Sc({context:e,irSchema:n,schema:{...t,type:s},state:r})},Ho=({irSchema:e,schema:t,state:r})=>(e||(e=_e({schema:t})),e.type="unknown",Er({irSchema:e,schema:t,state:r}),e),K=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?Oc({context:e,schema:t,state:r}):t.enum?xc({context:e,schema:t,state:r}):t.allOf?gc({context:e,schema:t,state:r}):t.anyOf?hc({context:e,schema:t,state:r}):t.oneOf?bc({context:e,schema:t,state:r}):t.type||t.properties?Rc({context:e,schema:t,state:r}):Ho({schema:t,state:r})),zo=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[U(e)]=K({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var Jo=e=>e.includes("boolean")||e.includes("integer")||e.includes("number")||e.includes("string"),xt=({context:e,name:t,schema:r})=>{if(ne(e.config.input.pagination).test(t))return  true;if(r.$ref){let s=e.resolveRef(r.$ref);if("content"in s||"in"in s){let o;if("in"in s&&(o=s.schema),!o){let i=Le({content:s.content});i?.schema&&(o=i.schema);}return o?xt({context:e,name:t,schema:o}):false}return xt({context:e,name:t,schema:s})}for(let s in r.properties)if(ne(e.config.input.pagination).test(s)){let i=r.properties[s];if(typeof i!="boolean"){let a=Ie({schema:i});if(!a.length){let m=(i.anyOf??i.oneOf??[]).filter(f=>f.type!=="null");if(m.length===1){let f=Ie({schema:m[0]});if(Jo(f))return s}}if(Jo(a))return s}}for(let s of r.allOf??[]){let o=xt({context:e,name:t,schema:s});if(o)return o}return  false};var Ic=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},Tc=({context:e,method:t,operation:r,path:n,state:s})=>{let o={id:ut({context:e,id:r.operationId,method:t,path:n,state:s}),method:t,path:n};return Ic({irOperation:o,operation:r}),o},Cc=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o})=>{let i=Tc({context:e,method:t,operation:r,path:n,state:o});if(r.parameters&&(i.parameters=r.parameters),r.requestBody){let a="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=Le({content:a.content});if(c){let m=xt({context:e,name:"",schema:{description:a.description,...c.schema}});i.body={mediaType:c.mediaType,schema:K({context:e,schema:{description:a.description,..."$ref"in r.requestBody?r.requestBody:c.schema},state:void 0})},m&&(i.body.pagination=m),a.required&&(i.body.required=a.required),c.type&&(i.body.type=c.type);}}for(let a in r.responses){i.responses||(i.responses={});let c=r.responses[a],m="$ref"in c?e.resolveRef(c.$ref):c,f=Le({content:m.content});f?i.responses[a]={mediaType:f.mediaType,schema:K({context:e,schema:{description:m.description,...Xo({content:f})},state:void 0})}:i.responses[a]={schema:{description:m.description,type:a==="204"?"void":"unknown"}};}if(r.security){let a=[];for(let c of r.security)for(let m in c){let f=s.get(m);f&&a.push(f);}a.length&&(i.security=a);}return i},Ke=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o})=>{Mt({context:e,id:r.operationId,method:t,operationIds:o.operationIds,path:n}),e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),e.ir.paths[n][t]=Cc({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o});};var Pc=e=>{switch(e){case "query":return  false;default:return}},jc=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},Ac=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},Te=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let s="$ref"in n?e.resolveRef(n.$ref):n;r[s.in]||(r[s.in]={}),r[s.in][s.name]=Go({context:e,parameter:s});}return r},Go=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=Le({content:t.content});m&&(r=m.schema);}let n={deprecated:t.deprecated,description:t.description,...r},s=xt({context:e,name:t.name,schema:n}),o=t.style||Ac(t.in),i=t.explode!==void 0?t.explode:jc(o),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:Pc(t.in),explode:i,location:t.in,name:t.name,schema:K({context:e,schema:n,state:void 0}),style:o};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),s&&(c.pagination=s),t.required&&(c.required=t.required),c},Zo=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[U(e)]=Go({context:t,parameter:r});};var Nc=({context:e,requestBody:t})=>{let r=Le({content:t.content}),n=r?r.schema:void 0,s={description:t.description,...n},o={schema:K({context:e,schema:s,state:void 0})};return t.description&&(o.description=t.description),t.required&&(o.required=t.required),o},Yo=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[U(e)]=Nc({context:t,requestBody:r});};var ei=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=Se(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var Fn=e=>{let t={ids:new Map,operationIds:new Map},r=new Map,n=qe(e.config.input.exclude),s=qe(e.config.input.include),o=(i,a)=>wt({$ref:i,excludeFilters:n,includeFilters:s,schema:a});if(e.spec.components){for(let i in e.spec.components.securitySchemes){let a=e.spec.components.securitySchemes[i],c="$ref"in a?e.resolveRef(a.$ref):a;r.set(i,c);}for(let i in e.spec.components.parameters){let a=`#/components/parameters/${i}`,c=e.spec.components.parameters[i],m="$ref"in c?e.resolveRef(c.$ref):c;o(a,m)&&Zo({$ref:a,context:e,parameter:m});}for(let i in e.spec.components.requestBodies){let a=`#/components/requestBodies/${i}`,c=e.spec.components.requestBodies[i],m="$ref"in c?e.resolveRef(c.$ref):c;o(a,m)&&Yo({$ref:a,context:e,requestBody:m});}for(let i in e.spec.components.schemas){let a=`#/components/schemas/${i}`,c=e.spec.components.schemas[i];o(a,c)&&zo({$ref:a,context:e,schema:c});}}ei({context:e});for(let i in e.spec.paths){let a=e.spec.paths[i],c=a.$ref?{...e.resolveRef(a.$ref),...a}:a,m={context:e,operation:{description:c.description,parameters:Te({context:e,parameters:c.parameters}),security:e.spec.security,servers:c.servers,summary:c.summary},path:i,securitySchemesMap:r,state:t},f=`#/paths${i}/delete`;c.delete&&o(f,c.delete)&&Ke({...m,method:"delete",operation:{...m.operation,...c.delete,parameters:A({source:Te({context:e,parameters:c.delete.parameters}),target:m.operation.parameters})}});let l=`#/paths${i}/get`;c.get&&o(l,c.get)&&Ke({...m,method:"get",operation:{...m.operation,...c.get,parameters:A({source:Te({context:e,parameters:c.get.parameters}),target:m.operation.parameters})}});let u=`#/paths${i}/head`;c.head&&o(u,c.head)&&Ke({...m,method:"head",operation:{...m.operation,...c.head,parameters:A({source:Te({context:e,parameters:c.head.parameters}),target:m.operation.parameters})}});let d=`#/paths${i}/options`;c.options&&o(d,c.options)&&Ke({...m,method:"options",operation:{...m.operation,...c.options,parameters:A({source:Te({context:e,parameters:c.options.parameters}),target:m.operation.parameters})}});let g=`#/paths${i}/patch`;c.patch&&o(g,c.patch)&&Ke({...m,method:"patch",operation:{...m.operation,...c.patch,parameters:A({source:Te({context:e,parameters:c.patch.parameters}),target:m.operation.parameters})}});let h=`#/paths${i}/post`;c.post&&o(h,c.post)&&Ke({...m,method:"post",operation:{...m.operation,...c.post,parameters:A({source:Te({context:e,parameters:c.post.parameters}),target:m.operation.parameters})}});let O=`#/paths${i}/put`;c.put&&o(O,c.put)&&Ke({...m,method:"put",operation:{...m.operation,...c.put,parameters:A({source:Te({context:e,parameters:c.put.parameters}),target:m.operation.parameters})}});let x=`#/paths${i}/trace`;c.trace&&o(x,c.trace)&&Ke({...m,method:"trace",operation:{...m.operation,...c.trace,parameters:A({source:Te({context:e,parameters:c.trace.parameters}),target:m.operation.parameters})}});}};var $r=["connect","delete","get","head","options","patch","post","put","trace"];function kr(e="1.0"){return String(e).replace(/^v/gi,"")}var Lt="#/components/parameters/",vr="#/components/schemas/";var Ye=({config:e,name:t})=>e.plugins["@hey-api/sdk"]?.serviceNameBuilder?e.plugins["@hey-api/sdk"].serviceNameBuilder.replace("{{name}}",t):t,Dn=e=>b().plugins["@hey-api/typescript"]?.style==="PascalCase"?P({case:"PascalCase",value:e}):e,ti=e=>{let t=Dn(e);return ue(t).replace(se,"_$1")};var ri=(e,t)=>{if(e.enum&&!t.includes("boolean"))return "enum"},Ln=e=>_t(e).includes("null"),et=e=>e.nullable===true||Ln(e),_t=({type:e})=>Array.isArray(e)?e:e?[e]:[];var er=e=>e.trim().replace(/^#\/definitions\//,"").replace(/^#\/parameters\//,"").replace(/^#\/responses\//,"").replace(/^#\/securityDefinitions\//,"").replace(/^#\/components\/schemas\//,"").replace(/^#\/components\/responses\//,"").replace(/^#\/components\/parameters\//,"").replace(/^#\/components\/examples\//,"").replace(/^#\/components\/requestBodies\//,"").replace(/^#\/components\/headers\//,"").replace(/^#\/components\/securitySchemes\//,"").replace(/^#\/components\/links\//,"").replace(/^#\/components\/callbacks\//,"");var ni=(e,t)=>{if(t==="binary")return "binary";switch(e){case "any":case "object":case "unknown":return "unknown";case "array":return "unknown[]";case "boolean":return "boolean";case "byte":case "double":case "float":case "int":case "integer":case "long":case "number":case "short":return "number";case "char":case "date":case "date-time":case "password":case "string":return "string";case "file":return "binary";case "null":return "null";case "void":return "void"}},si=/(?<!`1)\[.*\]$/g,I=({debug:e,format:t,type:r="unknown"})=>{let n={$refs:[],base:"unknown",imports:[],isNullable:false,template:null,type:"unknown"};if(Array.isArray(r)){let i=r.filter(a=>a!=="null").map(a=>ni(a,t)).filter(Boolean).join(" | ");return n.type=i,n.base=i,n.isNullable=Ln({type:r}),n}let s=ni(r,t);if(s)return n.type=s,n.base=s,n;let o=decodeURIComponent(er(r));if(si.lastIndex=0,si.test(o)){let i=o.match(/(.*?)\[(.*)\]$/);if(i?.length){let a=I({debug:e,type:ue(i[1])}),c=I({debug:e,type:ue(i[2])});return a.type==="unknown[]"?(n.type=`${c.type}[]`,n.base=`${c.type}`,a.$refs=[],a.imports=[]):c.type?(n.type=`${a.type}<${c.type}>`,n.base=a.type,n.template=c.type):(n.type=a.type,n.base=a.type,n.template=a.type),n.$refs=[...n.$refs,...a.$refs,...c.$refs],n.imports=[...n.imports,...a.imports,...c.imports],n}}if(o){let i=Dn(ue(o));return r.startsWith(Lt)&&(i=`Parameter${i}`),n.type=i,n.base=i,r.startsWith("#")&&(n.$refs=[...n.$refs,decodeURIComponent(r)]),n.imports=[...n.imports,i],n}return n};function J(e,t,r){return r.indexOf(e)===t}var Kt=(e,t)=>{if(!Array.isArray(t))return [];let r=(e["x-enum-descriptions"]??[]).filter(s=>typeof s=="string"),n=(e["x-enum-varnames"]??e["x-enumNames"]??[]).filter(s=>typeof s=="string");return t.filter(J).filter(s=>typeof s=="number"||typeof s=="string").map((s,o)=>({customDescription:r[o],customName:n[o],description:void 0,value:s}))};var L=e=>e?.replace(/\\/g,"\\\\").replace(/'/g,"\\'");var qr=({definition:e,getModel:t,openApi:r,types:n})=>{let s=[];return Object.entries(e.properties??{}).forEach(([o,i])=>{let a=!!e.required?.includes(o);if(i.$ref){let c=I({type:i.$ref});s.push({$refs:[],base:c.base,description:i.description||null,enum:[],enums:[],exclusiveMaximum:i.exclusiveMaximum,exclusiveMinimum:i.exclusiveMinimum,export:"reference",format:i.format,imports:c.imports,in:"",isDefinition:false,isNullable:i["x-nullable"]===true,isReadOnly:i.readOnly===true,isRequired:a,link:null,maxItems:i.maxItems,maxLength:i.maxLength,maxProperties:i.maxProperties,maximum:i.maximum,minItems:i.minItems,minLength:i.minLength,minProperties:i.minProperties,minimum:i.minimum,multipleOf:i.multipleOf,name:oe(o),pattern:L(i.pattern),properties:[],template:c.template,type:c.type,uniqueItems:i.uniqueItems});}else {let c=t({definition:i,openApi:r,types:n});s.push({$refs:[],base:c.base,description:i.description||null,enum:c.enum,enums:c.enums,exclusiveMaximum:i.exclusiveMaximum,exclusiveMinimum:i.exclusiveMinimum,export:c.export,format:i.format,imports:c.imports,in:"",isDefinition:false,isNullable:i["x-nullable"]===true,isReadOnly:i.readOnly===true,isRequired:a,link:c.link,maxItems:i.maxItems,maxLength:i.maxLength,maxProperties:i.maxProperties,maximum:i.maximum,minItems:i.minItems,minLength:i.minLength,minProperties:i.minProperties,minimum:i.minimum,multipleOf:i.multipleOf,name:oe(o),pattern:L(i.pattern),properties:c.properties,template:c.template,type:c.type,uniqueItems:i.uniqueItems});}}),s};var Ec=/~1/g,$c=/~0/g;function k(e,t){if(t.$ref){let r=t.$ref.replace(/^#/g,"").split("/").filter(Boolean),n=e;return r.forEach(s=>{let o=decodeURIComponent(s.replace(Ec,"/").replace($c,"~"));if(n.hasOwnProperty(o))n=n[o];else throw new Error(`Could not find reference: "${t.$ref}"`)}),n}return t}var oi=({definitions:e,getModel:t,openApi:r,required:n,types:s})=>e.reduce((o,i)=>{if(i.$ref){let a=k(r,i);return [...o,...t({definition:a,openApi:r,types:s}).properties]}return [...o,...t({definition:i,openApi:r,types:s}).properties]},[]).filter(o=>!o.isRequired&&n.includes(o.name)).map(o=>({...o,isRequired:true}));var ii=({definition:e,definitions:t,getModel:r,openApi:n,type:s,types:o})=>{let i={$refs:[],enums:[],export:s,imports:[],properties:[]},a=[];if(t.map(c=>r({definition:c,openApi:n,types:o})).filter(c=>{let m=c.properties.length,f=c.enums.length;return !(c.type==="unknown"&&!m&&!f)}).forEach(c=>{i.imports.push(...c.imports),i.enums.push(...c.enums),i.properties.push(c);}),e.required&&s==="all-of"){let c=oi({definitions:t,getModel:r,openApi:n,required:e.required,types:o});c.forEach(m=>{i.imports.push(...m.imports),i.enums.push(...m.enums);}),a.push(...c);}if(e.properties){let c=qr({definition:e,getModel:r,openApi:n,types:o});c.forEach(m=>{i.imports.push(...m.imports),i.enums.push(...m.enums),m.export==="enum"&&i.enums.push(m);}),a.push(...c);}return a.length&&i.properties.push({$refs:[],base:"unknown",description:"",enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"properties",properties:a,template:null,type:"unknown"}),i};var Ce=({definition:e,isDefinition:t=false,meta:r,openApi:n,types:s})=>{let o={$refs:[],base:"unknown",description:e.description||null,enum:[],enums:[],exclusiveMaximum:e.exclusiveMaximum,exclusiveMinimum:e.exclusiveMinimum,export:"interface",format:e.format,imports:[],in:"",isDefinition:t,isNullable:e["x-nullable"]===true,isReadOnly:e.readOnly===true,isRequired:false,link:null,maxItems:e.maxItems,maxLength:e.maxLength,maxProperties:e.maxProperties,maximum:e.maximum,meta:r,minItems:e.minItems,minLength:e.minLength,minProperties:e.minProperties,minimum:e.minimum,multipleOf:e.multipleOf,name:r?.name??"",pattern:L(e.pattern),properties:[],template:null,type:"unknown",uniqueItems:e.uniqueItems};if(e.$ref){let i=I({type:e.$ref});return o.export="reference",o.type=i.type,o.base=i.base,o.template=i.template,o.imports.push(...i.imports),o}if(e.enum&&e.type!=="boolean"){let i=Kt(e,e.enum);if(i.length)return o.base="string",o.enum=[...o.enum,...i],o.export="enum",o.type="string",o}if(e.type==="array"&&e.items)if(e.items.$ref){let i=I({type:e.items.$ref});return o.export="array",o.type=i.type,o.base=i.base,o.template=i.template,o.imports.push(...i.imports),o}else {let i=Ce({definition:e.items,openApi:n,types:s});return o.export="array",o.type=i.type,o.base=i.base,o.template=i.template,o.link=i,o.imports.push(...i.imports),o}if(e.type==="object"&&typeof e.additionalProperties=="object")if(e.additionalProperties.$ref){let i=I({type:e.additionalProperties.$ref});return o.export="dictionary",o.type=i.type,o.base=i.base,o.template=i.template,o.imports.push(...i.imports),o}else {let i=Ce({definition:e.additionalProperties,openApi:n,types:s});return o.export="dictionary",o.type=i.type,o.base=i.base,o.template=i.template,o.link=i,o.imports.push(...i.imports),o}if(e.allOf?.length){let i=ii({definition:e,definitions:e.allOf,getModel:Ce,openApi:n,type:"all-of",types:s});return o.export=i.export,o.imports.push(...i.imports),o.properties.push(...i.properties),o.enums=[...o.enums,...i.enums],o}if(e.type==="object")return o.export="interface",o.type="unknown",o.base="unknown",e.properties&&qr({definition:e,getModel:Ce,openApi:n,types:s}).forEach(a=>{o.imports.push(...a.imports),o.enums=[...o.enums,...a.enums],o.properties.push(a),a.export==="enum"&&(o.enums=[...o.enums,a]);}),o;if(e.type){let i=I({format:e.format,type:e.type});return o.export="generic",o.type=i.type,o.base=i.base,o.template=i.template,o.imports.push(...i.imports),o}return o};var ai=e=>{let t={},r=[];return Object.entries(e.definitions??{}).forEach(([n,s])=>{let i=I({type:n}).base.replace(se,"_$1"),a={$ref:`#/definitions/${n}`,name:i};t[i]=a;let c=Ce({definition:s,isDefinition:true,meta:a,openApi:e,types:t});r=[...r,c];}),{models:r,types:t}};function Bt(e,t){let r=e.toLocaleLowerCase(),n=t.toLocaleLowerCase();return r.localeCompare(n,"en")}var tr=(e,t)=>Bt(e.name,t.name);function pi(e){return e.sort(tr)}var kc=(e,t)=>{if(t)return t;if(typeof e=="number")return `'_${e}'`;let r="";return typeof e=="string"&&(r=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_").replace(/^([^$_\p{ID_Start}])/u,"_$1").replace(/(\p{Lowercase})(\p{Uppercase}+)/gu,"$1_$2")),r=r.trim(),r||(r="empty_string"),r.toUpperCase()},ci=e=>e.map(t=>wr(t.value,true)).filter(J).join(" | "),wr=(e,t=false)=>typeof e=="string"?e.includes("'")&&t?`"${e}"`:`'${e}'`:e,Mr=e=>{let t=kc(e.value,e.customName),r=wr(e.value);return {key:t,value:r}},Fr=e=>{let t=e.enum.map(r=>Mr(r)).sort((r,n)=>Bt(r.key,n.key)).map(r=>`${r.key}=${r.value}`).join("&");return {$ref:`enum/${e.name}/${t}`,name:ue(Pt(e.name))}};var mi=e=>{let r=`Parameter${I({type:e}).base.replace(se,"_$1")}`;return {$ref:Lt+e,name:r}},Dr=e=>{let t=ti(e);return {$ref:vr+e,name:t}};var rr=e=>e.format==="date"||e.format==="date-time",_n=e=>{let t=b();return e.base==="binary"?p.typeUnionNode({types:["Blob","File"]}):t.plugins["@hey-api/transformers"]?.dates&&rr(e)?p.typeNode("Date"):p.typeNode(e.base)},vc=e=>{let t=e.base==="null"?false:e.isNullable,r=_n(e);if(e.export==="reference"&&e.$refs.length===1&&e.$refs[0].startsWith(vr)){let s=Dr(e.base);r=p.typeNode(s.name);}return p.typeUnionNode({isNullable:t,types:[r]})},qc=e=>{if(e.link){if(Array.isArray(e.link)){let t=e.link.map(n=>pe(n));return p.typeTupleNode({isNullable:e.isNullable,types:t})}if(e.export==="array"&&e.maxItems&&e.minItems&&e.maxItems===e.minItems&&e.maxItems<=100){let t=Array(e.maxItems).fill(pe(e.link));return p.typeTupleNode({isNullable:e.isNullable,types:t})}return p.typeArrayNode([pe(e.link)],e.isNullable)}return p.typeArrayNode([_n(e)],e.isNullable)},wc=e=>{let t=e.enum.map(r=>wr(r.value));return p.typeUnionNode({isNullable:e.isNullable,types:t})},Mc=e=>{let t=e.link&&!Array.isArray(e.link)?pe(e.link):_n(e);return p.typeRecordNode(["string"],[t],e.isNullable,true)},fi=({model:e,style:t})=>{let r=e.properties.map(s=>p.nodeToString({node:pe(s),unescape:true})).filter(J),n=t==="union"?p.typeUnionNode({isNullable:e.isNullable&&!e.properties.find(s=>s.isNullable),types:r}):p.typeIntersectionNode({isNullable:e.isNullable,types:r});return e.meta?n:p.typeParenthesizedNode({type:n})},Fc=e=>{if(!e.properties.length)return p.typeNode("unknown");let t=b(),r=q(t),n=e.properties.map(s=>{let o=s.isRequired?"":"?",i=pe(s),a=r?/^\dXX$/.test(s.name)?oe(s.name):s.name:oe(Pt(Kn(s.name)));return s.name==="[key: string]"&&(a=s.name,o&&(o="",i=p.typeUnionNode({types:[i,"undefined"]}))),{comment:[s.description&&E(s.description),s.deprecated&&"@deprecated"],isReadOnly:s.isReadOnly,isRequired:o==="",name:a,type:i}});return p.typeInterfaceNode({isNullable:e.isNullable,properties:n,useLegacyResolution:true})},pe=e=>{switch(e.export){case "all-of":return fi({model:e,style:"intersection"});case "any-of":case "one-of":return fi({model:e,style:"union"});case "array":return qc(e);case "dictionary":return Mc(e);case "enum":return wc(e);case "interface":return Fc(e);case "const":case "generic":case "reference":default:return vc(e)}},ce=({client:e,count:t=1,create:r=false,meta:n,nameTransformer:s})=>{let o={created:false,name:""},i=n.name;s&&(i=s(i)),t>1&&(i=`${i}${t}`);let a=e.types[i];return a?a.$ref===n.$ref?o={created:false,name:i}:o=ce({client:e,count:t+1,create:r,meta:n,nameTransformer:s}):r&&(e.types[i]=n,o={created:true,name:i}),o},li=({client:e,name:t})=>{let r={deleted:false,name:""};return e.types[t]&&(delete e.types[t],r={deleted:true,name:t}),r},Kn=e=>{let t=b();return q(t)?P({case:"camelCase",value:vn(e)}).replace(se,"_$1"):e};var tt=e=>`${e.method.toUpperCase()} ${e.path}`,Lr=e=>{let t=e.find(r=>r.in==="header");return t?t.name:null},Pe=e=>e.some(r=>r.isRequired),_r=e=>{if(e==="default")return "default";if(e==="1XX")return "1XX";if(e==="2XX")return "2XX";if(e==="3XX")return "3XX";if(e==="4XX")return "4XX";if(e==="5XX")return "5XX";if(/\d{3}/g.test(e)){let t=Number.parseInt(e,10);if(t>=100&&t<600)return t}return null},Kr=(e,t)=>e.code>t.code?1:e.code<t.code?-1:0,Dc=e=>e==="3XX"||e==="4XX"||e==="5XX"||typeof e=="number"&&e>=300,ui=e=>e==="2XX"||typeof e=="number"&&e>=200&&e<300,Lc=(e,t)=>{let r=[],n=m=>{r.includes(m)||(r=[...r,m]);};t.some(({code:m})=>ui(m))||n("success");let o=(e.description??"").toLocaleLowerCase(),i=e.$refs.join("|").toLocaleLowerCase(),a=["error","problem"];return ["success"].some(m=>o.includes(m)||i.includes(m))&&n("success"),a.some(m=>o.includes(m)||i.includes(m))&&n("error"),r.length||n("error"),r},Br=({config:e,operationKey:t})=>{let r=e.plugins["@hey-api/sdk"]?.filter?new RegExp(e.plugins["@hey-api/sdk"]?.filter):void 0;return !r||r.test(t)},Vr=({config:e,method:t,operationId:r,path:n})=>{if(e.plugins["@hey-api/sdk"]?.operationId&&r)return P({case:"camelCase",value:ze(r)});let s=n;return q(e)&&(s=s.replace(/[^/]*?{api-version}.*?\//g,"")),s=s.replace(/{(.*?)}/g,"by-$1").replace(/[/:+]/g,"-"),P({case:"camelCase",value:`${t}-${s}`})},Ur=e=>{let t=b();return !q(t)||e.prop!=="api-version"},Wr=e=>{let t=b();return q(t)?Kn(e.prop):e.prop},Qr=e=>e.map(t=>{let{code:r}=t;return r==="default"?t.responseTypes=Lc(t,e):ui(r)?t.responseTypes=["success"]:Dc(r)&&(t.responseTypes=["error"]),t});var v=(e,t)=>{if(e.default===void 0||e.default===null)return e.default;switch(_t(e).find(s=>s!=="null")||typeof e.default){case "int":case "integer":case "number":if(t?.export==="enum"&&t.enum?.[e.default]){let{value:s}=t.enum[e.default];return s}return e.default;case "array":case "boolean":case "object":case "string":return e.default;default:return}};var di=({openApi:e,parameter:t,types:r})=>{let n={$refs:[],base:"unknown",description:t.description||null,enum:[],enums:[],exclusiveMaximum:t.exclusiveMaximum,exclusiveMinimum:t.exclusiveMinimum,export:"interface",format:t.format,imports:[],in:t.in,isDefinition:false,isNullable:t["x-nullable"]===true,isReadOnly:false,isRequired:t.required===true,link:null,maxItems:t.maxItems,maxLength:t.maxLength,maximum:t.maximum,mediaType:null,minItems:t.minItems,minLength:t.minLength,minimum:t.minimum,multipleOf:t.multipleOf,pattern:L(t.pattern),prop:t.name,properties:[],template:null,type:"unknown",uniqueItems:t.uniqueItems},s={...n,name:Wr(n)};if(t.$ref){let i=I({type:t.$ref});return s={...s,$refs:[...s.$refs,...i.$refs],base:i.base,export:"reference",imports:[...s.imports,...i.imports],template:i.template,type:i.type},s.default=v(t,s),s}if(t.enum){let i=Kt(t,t.enum);if(i.length)return s={...s,base:"string",enum:[...s.enum,...i],export:"enum",type:"string"},s.default=v(t,s),s}if(t.type==="array"&&t.items){let i=I({format:t.items.format,type:t.items.type});return s={...s,$refs:[...s.$refs,...i.$refs],base:i.base,export:"array",imports:[...s.imports,...i.imports],template:i.template,type:i.type},s.default=v(t,s),s}if(t.type==="object"&&t.items){let i=I({format:t.items.format,type:t.items.type});return s={...s,$refs:[...s.$refs,...i.$refs],base:i.base,export:"dictionary",imports:[...s.imports,...i.imports],template:i.template,type:i.type},s.default=v(t,s),s}let o=t.schema;if(o){if(o.$ref?.startsWith("#/parameters/")&&(o=k(e,o)),o.$ref){let a=I({type:o.$ref});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,export:"reference",imports:[...s.imports,...a.imports],template:a.template,type:a.type},s.default=v(t,s),s}let i=Ce({definition:o,openApi:e,types:r});return s={...s,$refs:[...s.$refs,...i.$refs],base:i.base,enum:[...s.enum,...i.enum],enums:[...s.enums,...i.enums],export:i.export,imports:[...s.imports,...i.imports],link:i.link,properties:[...s.properties,...i.properties],template:i.template,type:i.type},s.default=v(t,s),s}if(t.type){let i=I({format:t.format,type:t.type});return s={...s,$refs:[...s.$refs,...i.$refs],base:i.base,export:"generic",imports:[...s.imports,...i.imports],template:i.template,type:i.type},s.default=v(t,s),s}return s};var _c=["body","formData","header","path","query"],Xr=({openApi:e,parameters:t,types:r})=>{let n={$refs:[],imports:[],parameters:[],parametersBody:null,parametersCookie:[],parametersForm:[],parametersHeader:[],parametersPath:[],parametersQuery:[]};return t.forEach(s=>{let o=k(e,s),i=di({openApi:e,parameter:o,types:r}),a=!Ur(i);if(!(!_c.includes(o.in)||a)){switch(o.in){case "body":n.parametersBody=i;break;case "formData":n.parametersForm=[...n.parametersForm,i];break;case "header":n.parametersHeader=[...n.parametersHeader,i];break;case "path":n.parametersPath=[...n.parametersPath,i];break;case "query":n.parametersQuery=[...n.parametersQuery,i];break}n.$refs=[...n.$refs,...i.$refs],n.imports=[...n.imports,...i.imports],n.parameters=[...n.parameters,i];}}),n};function Hr(e){return e.sort((t,r)=>{let n=t.isRequired&&t.default===void 0,s=r.isRequired&&r.default===void 0;return n&&!s?-1:s&&!n?1:0})}var yi=({code:e,openApi:t,response:r,types:n})=>{let s={$refs:[],base:e!==204?"unknown":"void",code:e,description:r.description||null,enum:[],enums:[],export:"generic",imports:[],in:"response",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],responseTypes:[],template:null,type:e!==204?"unknown":"void"},o=r.schema;if(o){if(o.$ref?.startsWith("#/responses/")&&(o=k(t,o)),o.$ref){let a=I({type:o.$ref});return s.export="reference",s.type=a.type,s.base=a.base,s.template=a.template,s.imports=[...s.imports,...a.imports],s}let i=Ce({definition:o,openApi:t,types:n});return s.export=i.export,s.type=i.type,s.base=i.base,s.template=i.template,s.link=i.link,s.isReadOnly=i.isReadOnly,s.isRequired=i.isRequired,s.isNullable=i.isNullable,s.format=i.format,s.maximum=i.maximum,s.exclusiveMaximum=i.exclusiveMaximum,s.minimum=i.minimum,s.exclusiveMinimum=i.exclusiveMinimum,s.multipleOf=i.multipleOf,s.maxLength=i.maxLength,s.minLength=i.minLength,s.maxItems=i.maxItems,s.minItems=i.minItems,s.uniqueItems=i.uniqueItems,s.maxProperties=i.maxProperties,s.minProperties=i.minProperties,s.pattern=L(i.pattern),s.imports=[...s.imports,...i.imports],s.enum=[...s.enum,...i.enum],s.enums=[...s.enums,...i.enums],s.properties=[...s.properties,...i.properties],s}if(r.headers)for(let i in r.headers)return s.in="header",s.name=i,s.type="string",s.base="string",s;return s};var gi=({openApi:e,responses:t,types:r})=>{let n=[];return Object.entries(t).forEach(([s,o])=>{let i=_r(s);if(!i)return;let a=k(e,o),c=yi({code:i,openApi:e,response:a,types:r});n=[...n,c];}),n=Qr(n),n.sort(Kr)};var hi=({method:e,op:t,openApi:r,pathParams:n,types:s,url:o})=>{let i={$refs:[],deprecated:t.deprecated===true,description:t.description||null,id:t.operationId||null,imports:[],method:e.toUpperCase(),parameters:[...n.parameters],parametersBody:n.parametersBody,parametersCookie:[...n.parametersCookie],parametersForm:[...n.parametersForm],parametersHeader:[...n.parametersHeader],parametersPath:[...n.parametersPath],parametersQuery:[...n.parametersQuery],path:o,responseHeader:null,responses:[],summary:t.summary||null,tags:t.tags||null},a={...i,name:Vr({config:b(),method:i.method,operationId:t.operationId,path:i.path})};if(t.parameters){let c=Xr({openApi:r,parameters:t.parameters,types:s});a.$refs=[...a.$refs,...c.$refs],a.imports=[...a.imports,...c.imports],a.parameters=[...a.parameters,...c.parameters],a.parametersBody=c.parametersBody,a.parametersCookie=[...a.parametersCookie,...c.parametersCookie],a.parametersForm=[...a.parametersForm,...c.parametersForm],a.parametersHeader=[...a.parametersHeader,...c.parametersHeader],a.parametersPath=[...a.parametersPath,...c.parametersPath],a.parametersQuery=[...a.parametersQuery,...c.parametersQuery];}if(t.responses){a.responses=gi({openApi:r,responses:t.responses,types:s});let c=a.responses.filter(m=>m.responseTypes.includes("success"));a.responseHeader=Lr(c),c.forEach(m=>{a.$refs=[...a.$refs,...m.$refs],a.imports=[...a.imports,...m.imports];});}return a.parameters=Hr(a.parameters),a};var xi=({openApi:e,types:t})=>{let r=new Map,n=[],s=b();for(let o in e.paths){let i=e.paths[o],a=Xr({openApi:e,parameters:i.parameters??[],types:t});for(let c in i){let m=c,f=tt({method:m,path:o});if($r.includes(m)){let l=i[m];if(l.operationId&&(r.has(l.operationId)?s.logs.level!=="silent"&&console.warn(`\u2757\uFE0F Duplicate operationId: ${l.operationId} in ${f}. Please ensure your operation IDs are unique. This behavior is not supported and will likely lead to unexpected results.`):r.set(l.operationId,f)),Br({config:s,operationKey:f})){let u=hi({method:m,op:l,openApi:e,pathParams:a,types:t,url:o});n.push(u);}}}}return n};var bi=e=>{let t=e.schemes?.[0]||"http",r=e.host,n=e.basePath||"";return (r?`${t}://${r}${n}`:n).replace(/\/$/g,"")};var Oi=e=>{let t=kr(e.info.version),r=bi(e),{models:n,types:s}=ai(e),o=xi({openApi:e,types:s});return {models:n,operations:o,server:r,types:s,version:t}};var Kc=e=>{let t={};for(let r in e)t[e[r]]=r;return t},Si=(e,t)=>{if(e.components&&t){for(let r in e.components.schemas)if(e.components.schemas.hasOwnProperty(r)){let n=e.components.schemas[r];if(n.discriminator&&n.oneOf?.length&&n.oneOf.some(s=>s.$ref&&er(s.$ref)==t.name))return n.discriminator}}},Ri=(e,t)=>{if(e.mapping){let r=Kc(e.mapping),n=Object.keys(r).find(s=>er(s)==t.name);if(n&&r[n])return r[n]}return t.name};var Bn=({debug:e,definition:t,getModel:r,model:n,openApi:s,types:o})=>{let i=typeof t.additionalProperties=="object"?t.additionalProperties:{},a=r({debug:e,definition:i,openApi:s,parentDefinition:t,types:o});if(i.$ref){let c=I({type:i.$ref});return n.base=c.base,n.default=v(t,n),n.export="dictionary",n.imports.push(...c.imports),n.template=c.template,n.type=c.type,n}if(t.additionalProperties&&t.properties&&Object.keys(t.properties).length>0){let c=typeof t.additionalProperties=="object"&&t.additionalProperties.type&&!Array.isArray(t.additionalProperties.type)?t.additionalProperties.type:a.base,m=[I({type:c}).base,...n.properties.map(f=>f.base)];return a.base=m.filter(J).join(" | "),a.default=v(t,n),a.export="generic",a.isRequired=t.additionalProperties===true,a.name="[key: string]",a}return n.base=a.base,n.default=v(t,n),n.export="dictionary",n.imports.push(...a.imports),n.link=a,n.template=a.template,n.type=a.type,n},zr=({debug:e,definition:t,getModel:r,openApi:n,parent:s,types:o})=>{let i=[],a=Si(n,s);return Object.entries(t.properties??{}).forEach(([c,m])=>{let f=!!t.required?.includes(c),l={default:m.default,deprecated:m.deprecated===true,description:m.description||null,exclusiveMaximum:m.exclusiveMaximum,exclusiveMinimum:m.exclusiveMinimum,format:m.type==="array"?m.items?.format??m.format:m.format,in:"",isDefinition:false,isReadOnly:m.readOnly===true,isRequired:f,maxItems:m.maxItems,maxLength:m.maxLength,maxProperties:m.maxProperties,maximum:m.maximum,minItems:m.minItems,minLength:m.minLength,minProperties:m.minProperties,minimum:m.minimum,multipleOf:m.multipleOf,name:oe(c),pattern:L(m.pattern),uniqueItems:m.uniqueItems};if(s&&a?.propertyName==c){i=[...i,{...l,$refs:[],base:`'${Ri(a,s)}'`,enum:[],enums:[],export:"reference",imports:[],isNullable:et(m),link:null,properties:[],template:null,type:"string"}];return}if(m.$ref){let d=I({type:m.$ref});i=[...i,{...l,$refs:d.$refs,base:d.base,enum:[],enums:[],export:"reference",imports:d.imports,isNullable:d.isNullable||et(m),link:null,properties:[],template:d.template,type:d.type}];return}let u=r({debug:e,definition:m,initialValues:l,openApi:n,parentDefinition:t,types:o});u.isNullable=u.isNullable||et(m),i=[...i,u];}),i};var Ii=({debug:e,definitions:t,getModel:r,openApi:n,required:s,types:o})=>t.reduce((a,c)=>{if(c.$ref){let m=I({type:c.$ref}),f={$ref:c.$ref,name:m.base};o[m.base]=f;let l=k(n,c);return [...a,...r({debug:e,definition:l,meta:f,openApi:n,types:o}).properties]}return [...a,...r({debug:e,definition:c,openApi:n,parentDefinition:c,types:o}).properties]},[]).filter(a=>!a.isRequired&&s.includes(a.name)).map(a=>({...a,isRequired:true}));var Jr=e=>[{definitions:e.allOf,type:"all-of"},{definitions:e.anyOf,type:"any-of"},{definitions:e.oneOf,type:"one-of"}].find(r=>r.definitions?.length),Ti=({debug:e,definition:t,definitions:r,getModel:n,model:s,openApi:o,type:i,types:a})=>{let c={$refs:s.$refs,enums:s.enums,export:i,imports:s.imports,properties:s.properties},m=[];if(r.map(f=>n({debug:e,definition:f,openApi:o,parentDefinition:t,types:a})).forEach(f=>{c.$refs=[...c.$refs,...f.$refs],c.imports=[...c.imports,...f.imports],c.enums=[...c.enums,...f.enums],c.properties=[...c.properties,f];}),t.required&&i==="all-of"){let f=Ii({debug:e,definitions:r,getModel:n,openApi:o,required:t.required,types:a});f.forEach(l=>{c.$refs=[...c.$refs,...l.$refs],c.imports=[...c.imports,...l.imports],c.enums=[...c.enums,...l.enums];}),m=[...m,...f];}if(t.properties){let f=zr({definition:t,getModel:n,openApi:o,types:a});f.forEach(l=>{c.$refs=[...c.$refs,...l.$refs],c.imports=[...c.imports,...l.imports],c.enums=[...c.enums,...l.enums],l.export==="enum"&&(c.enums=[...c.enums,l]);}),m=[...m,...f];}if(m.length){let f=Jr(t);if(f){let l={$refs:[],base:"unknown",description:"",enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"properties",properties:m,template:null,type:"unknown"};f.type==="one-of"?(c.properties=[{...c,base:"",description:null,enum:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:true,link:null,name:"",template:null,type:""},l],c.export="all-of"):c.properties=[...c.properties,l];}}return c};var Q=({debug:e,definition:t,initialValues:r={},isDefinition:n=false,meta:s,openApi:o,parentDefinition:i=null,types:a})=>{let c=_t(t),m=ri(t,c),f={$refs:[],base:"unknown",deprecated:!!t.deprecated,description:t.description||null,enum:[],enums:[],exclusiveMaximum:t.exclusiveMaximum,exclusiveMinimum:t.exclusiveMinimum,export:"interface",format:t.format,imports:[],in:"",isDefinition:n,isNullable:et(t),isReadOnly:t.readOnly===true,isRequired:false,link:null,maxItems:t.maxItems,maxLength:t.maxLength,maxProperties:t.maxProperties,maximum:t.maximum,meta:s,minItems:t.minItems,minLength:t.minLength,minProperties:t.minProperties,minimum:t.minimum,multipleOf:t.multipleOf,name:s?.name??"",pattern:L(t.pattern),properties:[],template:null,type:"unknown",uniqueItems:t.uniqueItems,...r};if(t.$ref){let u=I({debug:e,type:t.$ref});return f.$refs=[...f.$refs,decodeURIComponent(t.$ref)],f.base=u.base,f.export="reference",f.imports=[...f.imports,...u.imports],f.template=u.template,f.type=u.type,f.default=v(t,f),f}if(m==="enum"){let u=Kt(t,t.enum);if(u.length)return f.base="string",f.enum=[...f.enum,...u],f.export="enum",f.type="string",f.default=v(t,f),f.meta||(f.meta=Fr(f)),f}if(c.includes("array")&&(t.items||t.prefixItems)){if(t.prefixItems){let g=t.prefixItems.map(h=>Q({definition:h,openApi:o,parentDefinition:t,types:a}));return f.export="array",f.$refs=[...f.$refs,...g.reduce((h,O)=>[...h,...O.$refs],[])],f.imports=[...f.imports,...g.reduce((h,O)=>[...h,...O.imports],[])],f.link=g,f.default=v(t,f),f}if(!t.items)return f;if(t.items.$ref){let g=I({type:t.items.$ref});return f.$refs=[...f.$refs,decodeURIComponent(t.items.$ref)],f.base=g.base,f.export="array",f.imports=[...f.imports,...g.imports],f.template=g.template,f.type=g.type,f.default=v(t,f),f}if(t.items.anyOf&&i&&i.type){let g=Jr(i);if(g&&g.definitions.some(h=>!_t(h).includes("array")))return Q({definition:t.items,openApi:o,parentDefinition:t,types:a})}let u=Array.isArray(t.items)?{anyOf:t.items}:t.items,d=Q({definition:u,openApi:o,parentDefinition:t,types:a});return f.base=d.base,f.export="array",f.$refs=[...f.$refs,...d.$refs],f.imports=[...f.imports,...d.imports],f.link=d,f.template=d.template,f.type=d.type,f.default=v(t,f),f}let l=Jr(t);if(l){let u=Ti({...l,debug:e,definition:t,getModel:Q,model:f,openApi:o,types:a});return {...f,...u}}if(c.includes("object")||t.properties||t.additionalProperties){if(t.properties&&(Object.keys(t.properties).length>0||!t.additionalProperties)){if(f.base="unknown",f.export="interface",f.type="unknown",f.default=v(t,f),zr({debug:e,definition:t,getModel:Q,openApi:o,parent:f,types:a}).forEach(g=>{f.$refs=[...f.$refs,...g.$refs],f.enums=[...f.enums,...g.enums],f.imports=[...f.imports,...g.imports],f.properties=[...f.properties,g],g.export==="enum"&&(f.enums=[...f.enums,g]);}),t.additionalProperties){let g=Bn({debug:e,definition:t,getModel:Q,model:f,openApi:o,types:a});f.properties=[...f.properties,g];}return !f.properties.length&&f.base==="unknown"&&f.type==="unknown"&&(f.export="dictionary",f.name||(f.name="[key: string]")),f}return Bn({debug:e,definition:t,getModel:Q,model:f,openApi:o,types:a})}if(t.const!==void 0){let u=t.const,d=typeof u=="string"?`"${u}"`:`${u}`;return f.base=d,f.export="const",f.type=d,f}if(c.length){let u=I({format:t.format,type:t.type});return f.base=u.base,f.export="generic",f.$refs=[...f.$refs,...u.$refs],f.imports=[...f.imports,...u.imports],f.isNullable=u.isNullable||f.isNullable,f.template=u.template,f.type=u.type,f.default=v(t,f),f}return f};var Gr=e=>{if(e.schema)return e.schema;if(e.content){let t=Object.entries(e.content);for(let[r,n]of t)if(n.schema){let s=r;return e.content[s].schema}}};var Ci=e=>{let t={},r=[];return e.components?(Object.entries(e.components.schemas??{}).forEach(([n,s])=>{let o=Dr(n);t[o.name]=o;let i=Q({definition:s,isDefinition:true,meta:o,openApi:e,types:t});r=[...r,i];}),Object.entries(e.components.parameters??{}).forEach(([n,s])=>{let o=Gr(s);if(!o)return;let i=mi(n);t[i.name]=i;let a=Q({definition:o,isDefinition:true,meta:i,openApi:e,types:t});a.deprecated=s.deprecated,a.description=s.description||null,r=[...r,a];}),{models:r,types:t}):{models:r,types:t}};var Pi=({openApi:e,parameter:t,types:r})=>{let n={$refs:[],base:"unknown",deprecated:t.deprecated===true,description:t.description||null,enum:[],enums:[],export:"interface",imports:[],in:t.in,isDefinition:false,isNullable:et(t),isReadOnly:false,isRequired:t.required===true,link:null,mediaType:null,prop:t.name,properties:[],template:null,type:"unknown"},s={...n,name:Wr(n)};if(t.$ref){let i=I({type:t.$ref});return s={...s,$refs:[...s.$refs,...i.$refs],base:i.base,export:"reference",imports:[...s.imports,...i.imports],template:i.template,type:i.type},s}let o=Gr(t);if(o){if(o.$ref?.startsWith(Lt)&&(o=k(e,o)),o.$ref){let a=I({type:o.$ref});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,export:"reference",imports:[...s.imports,...a.imports],template:a.template,type:a.type},s.default=v(o),s}let i=Q({definition:o,openApi:e,types:r});return s={...s,$refs:[...s.$refs,...i.$refs],base:i.base,enum:[...s.enum,...i.enum],enums:[...s.enums,...i.enums],exclusiveMaximum:i.exclusiveMaximum,exclusiveMinimum:i.exclusiveMinimum,export:i.export,format:i.format,imports:[...s.imports,...i.imports],isNullable:s.isNullable||i.isNullable,isReadOnly:i.isReadOnly,isRequired:s.isRequired||i.isRequired,link:i.link,maxItems:i.maxItems,maxLength:i.maxLength,maxProperties:i.maxProperties,maximum:i.maximum,minItems:i.minItems,minLength:i.minLength,minProperties:i.minProperties,minimum:i.minimum,multipleOf:i.multipleOf,pattern:L(i.pattern),properties:[...s.properties,...i.properties],template:i.template,type:i.type,uniqueItems:i.uniqueItems},(s.enum.length||s.enums.length)&&!s.meta&&(s.meta=Fr(s)),s.default=i.default,s}return s};var Bc=["cookie","formData","header","path","query"],Zr=({openApi:e,parameters:t,types:r})=>{let n={$refs:[],imports:[],parameters:[],parametersBody:null,parametersCookie:[],parametersForm:[],parametersHeader:[],parametersPath:[],parametersQuery:[]};return t.forEach(s=>{let o=k(e,s),i=Pi({openApi:e,parameter:o,types:r}),a=!Ur(i);if(!(!Bc.includes(o.in)||a)){switch(o.in){case "cookie":n.parametersCookie=[...n.parametersCookie,i];break;case "formData":n.parametersForm=[...n.parametersForm,i];break;case "header":n.parametersHeader=[...n.parametersHeader,i];break;case "path":n.parametersPath=[...n.parametersPath,i];break;case "query":n.parametersQuery=[...n.parametersQuery,i];break}n.$refs=[...n.$refs,...i.$refs],n.imports=[...n.imports,...i.imports],n.parameters=[...n.parameters,i];}}),n};var Vc=["application/json-patch+json","application/json","application/ld+json","application/x-www-form-urlencoded","multipart/batch","multipart/form-data","multipart/mixed","multipart/related","text/json","text/plain"],Yr=(e,t)=>{let r=Object.keys(t).filter(s=>{let o=s.split(";")[0].trim();return Vc.includes(o)}).find(s=>!!t[s]?.schema);if(r)return {mediaType:r,schema:t[r].schema};let n=Object.keys(t).find(s=>!!t[s]?.schema);if(n)return {mediaType:n,schema:t[n].schema}};var ji=({body:e,debug:t,openApi:r,types:n})=>{let s=e["x-body-name"]??"requestBody",o={$refs:[],base:"unknown",default:void 0,description:e.description||null,enum:[],enums:[],export:"interface",imports:[],in:"body",isDefinition:false,isNullable:e.nullable===true,isReadOnly:false,isRequired:e.required===true,link:null,mediaType:null,name:s,prop:s,properties:[],template:null,type:"unknown"};if(!e.content)return o;let i=Yr(r,e.content);if(!i)return o;switch(o.mediaType=i.mediaType,o.mediaType){case "application/x-www-form-urlencoded":case "multipart/form-data":o.in="formData",o.name="formData",o.prop="formData";break}if(i.schema.$ref){let c=I({type:i.schema.$ref});return o.export="reference",o.type=c.type,o.base=c.base,o.template=c.template,o.$refs=[...o.$refs,...c.$refs],o.imports=[...o.imports,...c.imports],o}let a=Q({debug:t,definition:i.schema,openApi:r,types:n});return o.$refs=[...o.$refs,...a.$refs],o.base=a.base,o.enum=[...o.enum,...a.enum],o.enums=[...o.enums,...a.enums],o.exclusiveMaximum=a.exclusiveMaximum,o.exclusiveMinimum=a.exclusiveMinimum,o.export=a.export,o.format=a.format,o.imports=[...o.imports,...a.imports],o.isNullable=o.isNullable||a.isNullable,o.isReadOnly=a.isReadOnly,o.isRequired=o.isRequired||a.isRequired,o.link=a.link,o.maximum=a.maximum,o.maxItems=a.maxItems,o.maxLength=a.maxLength,o.maxProperties=a.maxProperties,o.minimum=a.minimum,o.minItems=a.minItems,o.minLength=a.minLength,o.minProperties=a.minProperties,o.multipleOf=a.multipleOf,o.pattern=L(a.pattern),o.properties=[...o.properties,...a.properties],o.template=a.template,o.type=a.type,o.uniqueItems=a.uniqueItems,o};var Ai=({code:e,openApi:t,response:r,types:n})=>{let s={$refs:[],base:e!==204?"unknown":"void",code:e,description:r.description||null,enum:[],enums:[],export:"generic",imports:[],in:"response",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],responseTypes:[],template:null,type:e!==204?"unknown":"void"};if(r.content){let o=Yr(t,r.content);if(o){if(o.schema.$ref?.startsWith("#/components/responses/")&&(o.schema=k(t,o.schema)),o.schema.$ref){let a=I({type:o.schema.$ref});return s.base=a.base,s.export="reference",s.$refs=[...s.$refs,...a.$refs],s.imports=[...s.imports,...a.imports],s.template=a.template,s.type=a.type,s}let i=Q({definition:o.schema,openApi:t,types:n});return s.export=i.export,s.type=i.type,s.base=i.base,s.template=i.template,s.link=i.link,s.isReadOnly=i.isReadOnly,s.isRequired=i.isRequired,s.isNullable=i.isNullable,s.format=i.format,s.maximum=i.maximum,s.exclusiveMaximum=i.exclusiveMaximum,s.minimum=i.minimum,s.exclusiveMinimum=i.exclusiveMinimum,s.multipleOf=i.multipleOf,s.maxLength=i.maxLength,s.minLength=i.minLength,s.maxItems=i.maxItems,s.minItems=i.minItems,s.uniqueItems=i.uniqueItems,s.maxProperties=i.maxProperties,s.minProperties=i.minProperties,s.pattern=L(i.pattern),s.$refs=[...s.$refs,...i.$refs],s.imports=[...s.imports,...i.imports],s.enum=[...s.enum,...i.enum],s.enums=[...s.enums,...i.enums],s.properties=[...s.properties,...i.properties],s}}if(r.headers)for(let o in r.headers)return s.in="header",s.name=o,s.type="string",s.base="string",s;return s};var Ni=({debug:e,openApi:t,responses:r,types:n})=>{let s=[];return Object.entries(r).forEach(([o,i])=>{let a=_r(o);if(!a)return;let c=k(t,i),m=Ai({code:a,openApi:t,response:c,types:n});s=[...s,m];}),s=Qr(s),s.sort(Kr)};var Vt=(e,t)=>{let r=[...e],n=[...t];for(;n.length>0;){let s=n[0];n=n.slice(1),r.every(i=>i.in!==s.in||i.name!==s.name)&&(r=[...r,s]);}return r},Ei=({debug:e,method:t,op:r,openApi:n,pathParams:s,types:o,url:i})=>{let a={$refs:[],deprecated:!!r.deprecated,description:r.description||null,id:r.operationId||null,imports:[],method:t.toUpperCase(),parameters:[],parametersBody:s.parametersBody,parametersCookie:[],parametersForm:[],parametersHeader:[],parametersPath:[],parametersQuery:[],path:i,responseHeader:null,responses:[],summary:r.summary||null,tags:r.tags||null},c={...a,name:Vr({config:b(),method:a.method,operationId:r.operationId,path:a.path})};if(r.parameters){let m=Zr({openApi:n,parameters:r.parameters,types:o});c.$refs=[...c.$refs,...m.$refs],c.imports=[...c.imports,...m.imports],c.parameters=[...c.parameters,...m.parameters],c.parametersBody=m.parametersBody,c.parametersCookie=[...c.parametersCookie,...m.parametersCookie],c.parametersForm=[...c.parametersForm,...m.parametersForm],c.parametersHeader=[...c.parametersHeader,...m.parametersHeader],c.parametersPath=[...c.parametersPath,...m.parametersPath],c.parametersQuery=[...c.parametersQuery,...m.parametersQuery];}if(r.requestBody){let m=k(n,r.requestBody),f=ji({body:m,debug:e,openApi:n,types:o});c.$refs=[...c.$refs,...f.$refs],c.imports=[...c.imports,...f.imports],c.parameters=[...c.parameters,f],c.parametersBody=f;}if(r.responses){c.responses=Ni({openApi:n,responses:r.responses,types:o});let m=c.responses.filter(f=>f.responseTypes.includes("success"));c.responseHeader=Lr(m),m.forEach(f=>{c.$refs=[...c.$refs,...f.$refs],c.imports=[...c.imports,...f.imports];});}return c.parameters=Vt(c.parameters,s.parameters),c.parametersCookie=Vt(c.parametersCookie,s.parametersCookie),c.parametersForm=Vt(c.parametersForm,s.parametersForm),c.parametersHeader=Vt(c.parametersHeader,s.parametersHeader),c.parametersPath=Vt(c.parametersPath,s.parametersPath),c.parametersQuery=Vt(c.parametersQuery,s.parametersQuery),c.parameters=Hr(c.parameters),c};var $i=({openApi:e,types:t})=>{let r=new Map,n=[],s=b();for(let o in e.paths){let i=e.paths[o],a=Zr({openApi:e,parameters:i.parameters??[],types:t});for(let c in i){let m=c,f=tt({method:m,path:o});if($r.includes(m)){let l=i[m];if(l.operationId&&(r.has(l.operationId)?s.logs.level!=="silent"&&console.warn(`\u2757\uFE0F Duplicate operationId: ${l.operationId} in ${f}. Please ensure your operation IDs are unique. This behavior is not supported and will likely lead to unexpected results.`):r.set(l.operationId,f)),Br({config:s,operationKey:f})){let u=Ei({method:m,op:l,openApi:e,pathParams:a,types:t,url:o});n.push(u);}}}}return n};var ki=e=>{let t=e.servers?.[0],r=t?.variables||{},n=t?.url||"";return Object.entries(r).forEach(([s,o])=>{n=n.replace(`{${s}}`,o.default);}),n.replace(/\/$/g,"")};var vi=e=>{let t=kr(e.info.version),r=ki(e),{models:n,types:s}=Ci(e),o=$i({openApi:e,types:s});return {models:n,operations:o,server:r,types:s,version:t}};function Ix({openApi:e}){let t=e;if("openapi"in t)return vi(t);if("swagger"in t)return Oi(t);throw new Error(`Unsupported OpenAPI specification: ${JSON.stringify(t,null,2)}`)}var Tx=({config:e,spec:t})=>{let r=new jr({config:e,spec:t});if("swagger"in r.spec)return wn(r),r;switch(r.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":return Mn(r),r;case "3.1.0":case "3.1.1":return Fn(r),r;}throw new Error("Unsupported OpenAPI specification")};var qi=e=>{let t={file:true,level:"info",path:process.cwd()};return typeof e?.logs=="string"?t.path=e.logs:t={...t,...e?.logs},t};var rt={_dependencies:["@hey-api/typescript"],_tags:["client"],baseUrl:true,bundle:false,exportFromIndex:false,output:"client"};var Mi=e=>{let t=e.split(G.sep);return t.slice(0,t.length-1).join(G.sep)},B=({config:e,sourceOutput:t})=>{let r=C(e);if("bundle"in r&&r.bundle)return Tt({moduleOutput:"client",sourceOutput:t});if(G.isAbsolute(r.name)){let n=Mi(r.name),s=G.resolve(e.output.path);return G.relative(s,n).replace(/\\/g,"/")}return r.name},F={Options:{asType:true,name:"Options"},OptionsLegacyParser:{asType:true,name:"OptionsLegacyParser"}},wx=({outputPath:e,plugin:t})=>{let r=G.resolve(e,"client");hr(r);let n="";if(G.isAbsolute(t.name)&&(n=Mi(t.name)),t.bundleSource_EXPERIMENTAL&&!n){let f=G.normalize(Rn.resolve(t.name)).split(G.sep);n=[...f.slice(0,f.indexOf("dist")),"src"].join(G.sep);}if(n){gr.cpSync(n,r,{recursive:true});return}let o=G.normalize(Rn.resolve(t.name)).split(G.sep),i=o.slice(0,o.indexOf("dist")+1).join(G.sep),c=[o[o.length-1],"index.d.ts"];t.name!=="@hey-api/client-nuxt"&&c.push("index.d.cts");for(let m of c)gr.copyFileSync(G.resolve(i,m),G.resolve(r,m));};var D=({case:e="PascalCase",config:t,id:r,type:n})=>{let s="";switch(n){case "data":case "error":case "errors":case "response":case "responses":s=`${(n[0]??"").toLocaleUpperCase()}${n.slice(1)}`;break}let o=true;return t.plugins["@hey-api/typescript"]?.identifierCase==="preserve"&&(o=false),`${qt}${P({case:e,value:r})}${o?"-":""}${s}`};var T="types";function Vn(e,t){return {...e,get name(){return t?.(e),e.name}}}var Fi=({context:e,file:t,operation:r})=>{let n=e.file({id:T}).identifier({$ref:D({config:e.config,id:r.id,type:"data"}),namespace:"type"});return Vn(n,s=>{s.name&&t.import({asType:true,module:t.relativePathToFile({context:e,id:T}),name:s.name});})},en=({context:e,file:t,operation:r})=>{let n=e.file({id:T}).identifier({$ref:D({config:e.config,id:r.id,type:"error"}),namespace:"type"});return Vn(n,s=>{s.name&&t.import({asType:true,module:t.relativePathToFile({context:e,id:T}),name:s.name});})},bt=({context:e,file:t,operation:r})=>{let n=e.file({id:T}).identifier({$ref:D({config:e.config,id:r.id,type:"response"}),namespace:"type"});return Vn(n,s=>{s.name&&t.import({asType:true,module:t.relativePathToFile({context:e,id:T}),name:s.name});})};var Uc=({context:e,plugin:t})=>{let{baseUrl:r}=t;if(r===false)return;if(typeof r=="string")return r;let{servers:n}=e.ir;if(n)return n[typeof r=="number"?r:0]?.url},Di=({context:e,plugin:t})=>{let r=e.file({id:de}),n=B({config:e.config,sourceOutput:r.nameWithoutExtension()}),s=r.import({module:n,name:"createClient"}),o=r.import({module:n,name:"createConfig"}),i=r.import({asType:true,module:r.relativePathToFile({context:e,id:T}),name:"ClientOptions"}),a=t.runtimeConfigPath?r.import({module:r.relativePathToFile({context:e,id:t.runtimeConfigPath}),name:"createClientConfig"}):void 0,c=[],m=Uc({context:e,plugin:t});if(m){let u=Se(m);if(u.protocol&&u.host&&!m.includes("{"))c.push({key:te(e.config),value:m});else if(m!=="/"&&m.startsWith("/")){let d=m.endsWith("/")?m.slice(0,-1):m;c.push({key:te(e.config),value:d});}}"throwOnError"in t&&t.throwOnError&&c.push({key:"throwOnError",value:true});let f=[p.callExpression({functionName:o.name,parameters:c.length?[p.objectExpression({obj:c})]:void 0,types:[p.typeReferenceNode({typeName:i.name})]})],l=p.constVariable({exportConst:true,expression:p.callExpression({functionName:s.name,parameters:a?[p.callExpression({functionName:a.name,parameters:f})]:f}),name:"client"});r.add(l);};var Li=({context:e})=>{let t=e.file({id:de}),r=B({config:e.config,sourceOutput:t.nameWithoutExtension()}),n=t.import({asType:true,module:t.relativePathToFile({context:e,id:T}),name:"ClientOptions"}),s=t.import({asType:true,module:r,name:"Config"}),o=t.import({alias:"DefaultClientOptions",asType:true,module:r,name:"ClientOptions"}),i=p.typeReferenceNode({typeName:o.name}),a=p.typeReferenceNode({typeName:"T"}),c=p.typeAliasDeclaration({comment:["The `createClientConfig()` function will be called on client initialization","and the returned object will become the client's initial configuration.","","You may want to initialize your client this way instead of calling","`setConfig()`. This is useful for example if you're using Next.js","to ensure your client always has the correct values."],exportType:true,name:"CreateClientConfig",type:p.functionTypeNode({parameters:[p.parameterDeclaration({name:"override",required:false,type:p.typeReferenceNode({typeArguments:[p.typeIntersectionNode({types:[i,a]})],typeName:s.name})})],returnType:p.typeReferenceNode({typeArguments:[p.typeIntersectionNode({types:[p.typeReferenceNode({typeArguments:[i],typeName:"Required"}),a]})],typeName:s.name})}),typeParameters:[{default:p.typeReferenceNode({typeName:n.name}),extends:i,name:"T"}]});t.add(c);};var nt=({context:e,plugin:t})=>{e.createFile({exportFromIndex:t.exportFromIndex,id:de,path:t.output}),Li({context:e}),Di({context:e,plugin:t});};var Un={...rt,_handler:nt,_handlerLegacy:()=>{},name:"@hey-api/client-axios",throwOnError:false};var Wn={...rt,_handler:nt,_handlerLegacy:()=>{},name:"@hey-api/client-fetch",throwOnError:false};var Qn={...rt,_handler:nt,_handlerLegacy:()=>{},name:"@hey-api/client-next",throwOnError:false};var Xn={...rt,_handler:nt,_handlerLegacy:()=>{},name:"@hey-api/client-nuxt"};var Hn={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/angular",output:"client"};var zn={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/axios",output:"client"};var Jn={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/fetch",output:"client"};var Gn={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/node",output:"client"};var Zn={_handler:()=>{},_handlerLegacy:()=>{},_tags:["client"],name:"legacy/xhr",output:"client"};var tn="schemas",Yn=({plugin:e,schema:t})=>{e.type==="form"&&(t.description&&delete t.description,t["x-enum-descriptions"]&&delete t["x-enum-descriptions"],t["x-enum-varnames"]&&delete t["x-enum-varnames"],t["x-enumNames"]&&delete t["x-enumNames"],t.title&&delete t.title);},Ut=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(s=>Ut({context:e,plugin:t,schema:s}));let n=structuredClone(r);if(n.$ref)return n.$ref=decodeURI(n.$ref),n;if(Yn({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=Ut({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(s=>Ut({context:e,plugin:t,schema:s}))),n.items&&(n.items=Ut({context:e,plugin:t,schema:n.items})),n.properties)for(let s in n.properties){let o=n.properties[s];typeof o!="boolean"&&(n.properties[s]=Ut({context:e,plugin:t,schema:o}));}return n},st=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(s=>st({context:e,plugin:t,schema:s}));let n=structuredClone(r);if("$ref"in n)return n.$ref=decodeURI(n.$ref),n;if(Yn({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=st({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(s=>st({context:e,plugin:t,schema:s}))),n.anyOf&&(n.anyOf=n.anyOf.map(s=>st({context:e,plugin:t,schema:s}))),n.items&&(n.items=st({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(s=>st({context:e,plugin:t,schema:s}))),n.properties)for(let s in n.properties){let o=n.properties[s];typeof o!="boolean"&&(n.properties[s]=st({context:e,plugin:t,schema:o}));}return n},Be=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(s=>Be({context:e,plugin:t,schema:s}));let n=structuredClone(r);if(Yn({plugin:t,schema:n}),n.$ref&&(n.$ref=decodeURI(n.$ref)),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=Be({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(s=>Be({context:e,plugin:t,schema:s}))),n.anyOf&&(n.anyOf=n.anyOf.map(s=>Be({context:e,plugin:t,schema:s}))),n.items&&(n.items=Be({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(s=>Be({context:e,plugin:t,schema:s}))),n.prefixItems&&(n.prefixItems=n.prefixItems.map(s=>Be({context:e,plugin:t,schema:s}))),n.properties)for(let s in n.properties){let o=n.properties[s];typeof o!="boolean"&&(n.properties[s]=Be({context:e,plugin:t,schema:o}));}return n},es=({name:e,plugin:t,schema:r})=>{let n=t.nameBuilder?.(e,r)??`${e}Schema`;return Cr(n)},Wc=({context:e,plugin:t})=>{if(e.spec.definitions)for(let r in e.spec.definitions){let n=e.spec.definitions[r],s=Ut({context:e,plugin:t,schema:n}),o=p.constVariable({assertion:"const",exportConst:true,expression:p.objectExpression({obj:s}),name:es({name:r,plugin:t,schema:n})});e.file({id:tn}).add(o);}},Qc=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],s=st({context:e,plugin:t,schema:n}),o=p.constVariable({assertion:"const",exportConst:true,expression:p.objectExpression({obj:s}),name:es({name:r,plugin:t,schema:n})});e.file({id:tn}).add(o);}},Xc=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],s=Be({context:e,plugin:t,schema:n}),o=p.constVariable({assertion:"const",exportConst:true,expression:p.objectExpression({obj:s}),name:es({name:r,plugin:t,schema:n})});e.file({id:tn}).add(o);}},_i=({context:e,plugin:t})=>{if(e.createFile({exportFromIndex:t.exportFromIndex,id:tn,path:t.output}),"swagger"in e.spec){Wc({context:e,plugin:t});return}switch(e.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":Qc({context:e,plugin:t});break;case "3.1.0":case "3.1.1":Xc({context:e,plugin:t});break;}};var ts=(e,t)=>{let r=b();if(Array.isArray(e))return e.map(s=>ts(s));if(typeof e!="object"||e===null)return e;let n={...e};return Object.entries(n).forEach(([s,o])=>{if(r.plugins["@hey-api/schemas"]?.type==="form"&&["description","x-enum-descriptions","x-enum-varnames","x-enumNames","title"].includes(s)&&t!=="properties"){delete n[s];return}s==="$ref"&&typeof o=="string"&&(n[s]=decodeURIComponent(o)),o&&typeof o=="object"&&(n[s]=ts(o,s));}),n},Hc=(e,t)=>{let r=b(),n=ue(e);return r.plugins["@hey-api/schemas"]?.nameBuilder?r.plugins["@hey-api/schemas"].nameBuilder(n,t):`${n}Schema`},Ki=({files:e,openApi:t})=>{let r=b();e.schemas=new be({dir:r.output.path,id:"schemas",name:"schemas.ts"});let n=(s,o)=>{let i=ts(o),a=p.objectExpression({obj:i}),c=p.constVariable({assertion:"const",exportConst:true,expression:a,name:Hc(s,o)});e.schemas.add(c);};"swagger"in t&&Object.entries(t.definitions??{}).forEach(([s,o])=>{n(s,o);}),"openapi"in t&&Object.entries(t.components?.schemas??{}).forEach(([s,o])=>{n(s,o);});};var rs={_handler:_i,_handlerLegacy:Ki,exportFromIndex:false,name:"@hey-api/schemas",nameBuilder:e=>`${e}Schema`,output:"schemas",type:"json"};var ot=e=>{for(let t in e)if(e[t].required)return  true;return  false},Bi=e=>e?!!(ot(e.cookie)||ot(e.header)||ot(e.path)||ot(e.query)):false,ns=e=>{if(e){for(let t in e.cookie){let r=e.cookie[t];if(r.pagination)return {in:r.location,name:r.pagination===true?t:`${t}.${r.pagination}`,schema:r.pagination===true?r.schema:r.schema.properties[r.pagination]}}for(let t in e.header){let r=e.header[t];if(r.pagination)return {in:r.location,name:r.pagination===true?t:`${t}.${r.pagination}`,schema:r.pagination===true?r.schema:r.schema.properties[r.pagination]}}for(let t in e.path){let r=e.path[t];if(r.pagination)return {in:r.location,name:r.pagination===true?t:`${t}.${r.pagination}`,schema:r.pagination===true?r.schema:r.schema.properties[r.pagination]}}for(let t in e.query){let r=e.query[t];if(r.pagination)return {in:r.location,name:r.pagination===true?t:`${t}.${r.pagination}`,schema:r.pagination===true?r.schema:r.schema.properties[r.pagination]}}}};var je=({schema:e})=>{if(!e.items)return e;let t=[],r=[];for(let n of e.items){if(!n.type&&n.items||e.type==="tuple"){t.push(n);continue}if(!n.type||n.type==="boolean"||n.type==="integer"||n.type==="null"||n.type==="number"||n.type==="string"||n.type==="unknown"||n.type==="void"){let s=`${n.$ref??""}${n.type??""}${n.const!==void 0?`const-${n.const}`:""}`;r.includes(s)||(r.push(s),t.push(n));continue}t.push(n);}if(e.items=t,e.items.length<=1&&e.type!=="array"&&e.type!=="enum"&&e.type!=="tuple"){let n=e.items[0];delete e.logicalOperator,delete e.items,e={...e,...n};}return e.type==="unknown"?{}:e};var Ve=e=>!!(Bi(e.parameters)||e.body?.required),Vi=({context:e,operation:t})=>{let r=t.body;if(!r||!r.pagination)return ns(t.parameters);if(r.pagination===true)return {in:"body",name:"body",schema:r.schema};let n=r.schema,s=n.$ref?e.resolveIrRef(n.$ref):n,i=("schema"in s?s.schema:s)?.properties?.[r.pagination];return i?{in:"body",name:r.pagination,schema:i}:ns(t.parameters)},ss=({statusCode:e})=>{switch(e){case "1XX":return "1XX";case "2XX":return "2XX";case "3XX":return "3XX";case "4XX":return "4XX";case "5XX":return "5XX";case "default":return "default";default:return `${e[0]}XX`}},it=e=>{let t={};if(!e.responses)return t;let r={properties:{},type:"object"},n={properties:{},type:"object"},s;for(let a in e.responses){let c=e.responses[a];switch(ss({statusCode:a})){case "1XX":case "3XX":break;case "2XX":n.properties[a]=c.schema;break;case "4XX":case "5XX":r.properties[a]=c.schema;break;case "default":s=c;break}}if(s){let a=false;Object.keys(n.properties).length||(n.properties.default=s.schema,a=true);let c=(s.schema.description??"").toLocaleLowerCase(),m=(s.schema.$ref??"").toLocaleLowerCase();["success"].some(u=>c.includes(u)||m.includes(u))&&(n.properties.default=s.schema,a=true),["error","problem"].some(u=>c.includes(u)||m.includes(u))&&(r.properties.default=s.schema,a=true),a||(r.properties.default=s.schema);}let o=Object.keys(r.properties);if(o.length){r.required=o,t.errors=r;let a=$({items:Object.values(r.properties),mutateSchemaOneItem:true,schema:{}});a=je({schema:a}),Object.keys(a).length&&a.type!=="unknown"&&(t.error=a);}let i=Object.keys(n.properties);if(i.length){n.required=i,t.responses=n;let a=$({items:Object.values(n.properties),mutateSchemaOneItem:true,schema:{}});a=je({schema:a}),Object.keys(a).length&&a.type!=="unknown"&&(t.response=a);}return t};function bO(e,t){return {...e,config:t,models:e.models.map(r=>zc(r)),services:Jc(e.operations).map(Gc),types:{}}}var zc=e=>({...e,$refs:e.$refs.filter((t,r,n)=>J(t,r,n)),enum:e.enum.filter((t,r,n)=>n.findIndex(s=>s.value===t.value)===r),enums:e.enums.filter((t,r,n)=>n.findIndex(s=>s.name===t.name)===r),imports:e.imports.filter((t,r,n)=>J(t,r,n)&&t!==e.name).sort(Bt)}),Jc=e=>{let t=b(),r=new Map;return e.forEach(n=>{(n.tags?.length&&(t.plugins["@hey-api/sdk"]?.asClass||ve(t))?n.tags.filter(J):["Default"]).forEach(o=>{let i={...n,service:nr(o)},a=r.get(i.service)||Yc(i);a.$refs=[...a.$refs,...i.$refs],a.imports=[...a.imports,...i.imports],a.operations=[...a.operations,i],r.set(i.service,a);});}),Array.from(r.values())},Gc=e=>{let t={...e};return t.operations=Zc(t),t.operations.forEach(r=>{t.imports.push(...r.imports);}),t.imports=t.imports.filter(J).sort(Bt),t},Zc=e=>{let t=new Map;return e.operations.map(r=>{let n={...r};n.imports.push(...n.parameters.flatMap(a=>a.imports));let s=n.responses.filter(a=>a.responseTypes.includes("success"));n.imports.push(...s.flatMap(a=>a.imports));let o=n.name,i=t.get(o)||0;return i>0&&(n.name=`${o}${i}`),t.set(o,i+1),n})},Yc=e=>({$refs:[],imports:[],name:e.service,operations:[]}),nr=e=>P({case:"PascalCase",value:ze(e)});var or="zod",em=p.identifier({text:"and"}),tm=p.identifier({text:"coerce"}),rm=p.identifier({text:"default"}),nm=p.identifier({text:"intersection"}),sm=p.identifier({text:"lazy"}),Wi=p.identifier({text:"length"}),nn=p.identifier({text:"literal"}),Qi=p.identifier({text:"max"}),Xi=p.identifier({text:"min"}),om=p.identifier({text:"object"}),im=p.identifier({text:"optional"}),am=p.identifier({text:"readonly"}),pm=p.identifier({text:"regex"}),cm=p.identifier({text:"union"}),w=p.identifier({text:"z"}),is=e=>`z-${e}`,mm=({context:e,result:t,schema:r})=>{let n=p.propertyAccessExpression({expression:w,name:p.identifier({text:"array"})}),s;if(!r.items)s=p.callExpression({functionName:n,parameters:[sr({schema:{}})]});else {r=je({schema:r});let o=r.items.map(i=>Ot({context:e,result:t,schema:i}));o.length===1?s=p.callExpression({functionName:n,parameters:o}):(r.logicalOperator,s=p.callExpression({functionName:n,parameters:[sr({schema:{}})]}));}return r.minItems===r.maxItems&&r.minItems!==void 0?s=p.callExpression({functionName:p.propertyAccessExpression({expression:s,name:Wi}),parameters:[p.valueToExpression({value:r.minItems})]}):(r.minItems!==void 0&&(s=p.callExpression({functionName:p.propertyAccessExpression({expression:s,name:Xi}),parameters:[p.valueToExpression({value:r.minItems})]})),r.maxItems!==void 0&&(s=p.callExpression({functionName:p.propertyAccessExpression({expression:s,name:Qi}),parameters:[p.valueToExpression({value:r.maxItems})]}))),s},fm=({schema:e})=>typeof e.const=="boolean"?p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:nn}),parameters:[p.ots.boolean(e.const)]}):p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:p.identifier({text:"boolean"})})}),lm=({context:e,schema:t})=>{let r=[],n=false;for(let o of t.items??[])o.type==="string"&&typeof o.const=="string"?r.push(p.stringLiteral({text:o.const})):(o.type==="null"||o.const===null)&&(n=true);if(!r.length)return sr({schema:{}});let s=p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:p.identifier({text:"enum"})}),parameters:[p.arrayLiteralExpression({elements:r,multiLine:false})]});return n&&(s=p.callExpression({functionName:p.propertyAccessExpression({expression:s,name:p.identifier({text:"nullable"})})})),s},um=({schema:e})=>p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:p.identifier({text:"never"})})}),dm=({schema:e})=>p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:p.identifier({text:"null"})})}),rn=({isBigInt:e,value:t})=>{let r=p.valueToExpression({value:t});return e?p.callExpression({functionName:"BigInt",parameters:[r]}):r},ym=({schema:e})=>{let t=e.type==="integer"&&e.format==="int64";if(typeof e.const=="number")return p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:nn}),parameters:[p.ots.number(e.const)]});let r=p.callExpression({functionName:t?p.propertyAccessExpression({expression:p.propertyAccessExpression({expression:w,name:tm}),name:p.identifier({text:"bigint"})}):p.propertyAccessExpression({expression:w,name:p.identifier({text:"number"})})});return !t&&e.type==="integer"&&(r=p.callExpression({functionName:p.propertyAccessExpression({expression:r,name:p.identifier({text:"int"})})})),e.exclusiveMinimum!==void 0?r=p.callExpression({functionName:p.propertyAccessExpression({expression:r,name:p.identifier({text:"gt"})}),parameters:[rn({isBigInt:t,value:e.exclusiveMinimum})]}):e.minimum!==void 0&&(r=p.callExpression({functionName:p.propertyAccessExpression({expression:r,name:p.identifier({text:"gte"})}),parameters:[rn({isBigInt:t,value:e.minimum})]})),e.exclusiveMaximum!==void 0?r=p.callExpression({functionName:p.propertyAccessExpression({expression:r,name:p.identifier({text:"lt"})}),parameters:[rn({isBigInt:t,value:e.exclusiveMaximum})]}):e.maximum!==void 0&&(r=p.callExpression({functionName:p.propertyAccessExpression({expression:r,name:p.identifier({text:"lte"})}),parameters:[rn({isBigInt:t,value:e.maximum})]})),r},gm=({context:e,result:t,schema:r})=>{let n=[],s=r.required??[];for(let i in r.properties){let a=r.properties[i],c=s.includes(i),m=Ot({context:e,optional:!c,result:t,schema:a});ke.lastIndex=0;let f;ke.test(i)?f=i.startsWith("-")?y.factory.createStringLiteral(i):y.factory.createNumericLiteral(i):f=i,(i.match(/^[0-9]/)&&i.match(/\D+/g)||i.match(/\W/g))&&!i.startsWith("'")&&!i.endsWith("'")&&(f=`'${i}'`),n.push(p.propertyAssignment({initializer:m,name:f}));}return {anyType:"AnyZodObject",expression:p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:om}),parameters:[y.factory.createObjectLiteralExpression(n,true)]})}},hm=({schema:e})=>{if(typeof e.const=="string")return p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:nn}),parameters:[p.ots.string(e.const)]});let t=p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:p.identifier({text:"string"})})});if(e.format)switch(e.format){case "date-time":t=p.callExpression({functionName:p.propertyAccessExpression({expression:t,name:p.identifier({text:"datetime"})})});break;case "ipv4":case "ipv6":t=p.callExpression({functionName:p.propertyAccessExpression({expression:t,name:p.identifier({text:"ip"})})});break;case "uri":t=p.callExpression({functionName:p.propertyAccessExpression({expression:t,name:p.identifier({text:"url"})})});break;case "date":case "email":case "time":case "uuid":t=p.callExpression({functionName:p.propertyAccessExpression({expression:t,name:p.identifier({text:e.format})})});break}return e.minLength===e.maxLength&&e.minLength!==void 0?t=p.callExpression({functionName:p.propertyAccessExpression({expression:t,name:Wi}),parameters:[p.valueToExpression({value:e.minLength})]}):(e.minLength!==void 0&&(t=p.callExpression({functionName:p.propertyAccessExpression({expression:t,name:Xi}),parameters:[p.valueToExpression({value:e.minLength})]})),e.maxLength!==void 0&&(t=p.callExpression({functionName:p.propertyAccessExpression({expression:t,name:Qi}),parameters:[p.valueToExpression({value:e.maxLength})]}))),e.pattern&&(t=p.callExpression({functionName:p.propertyAccessExpression({expression:t,name:pm}),parameters:[p.regularExpressionLiteral({text:e.pattern})]})),t},xm=({context:e,schema:t})=>{if(t.const&&Array.isArray(t.const)){let r=t.const.map(s=>p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:nn}),parameters:[p.valueToExpression({value:s})]}));return p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:p.identifier({text:"tuple"})}),parameters:[p.arrayLiteralExpression({elements:r})]})}return sr({schema:{}})},bm=({schema:e})=>p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:p.identifier({text:"undefined"})})}),sr=({schema:e})=>p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:p.identifier({text:"unknown"})})}),Om=({schema:e})=>p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:p.identifier({text:"void"})})}),Ui=({context:e,result:t,schema:r})=>{switch(r.type){case "array":return {expression:mm({context:e,result:t,schema:r})};case "boolean":return {expression:fm({schema:r})};case "enum":return {expression:lm({context:e,schema:r})};case "integer":case "number":return {expression:ym({schema:r})};case "never":return {expression:um({schema:r})};case "null":return {expression:dm({schema:r})};case "object":return gm({context:e,result:t,schema:r});case "string":return {expression:hm({schema:r})};case "tuple":return {expression:xm({context:e,schema:r})};case "undefined":return {expression:bm({schema:r})};case "unknown":return {expression:sr({schema:r})};case "void":return {expression:Om({schema:r})}}},Sm=({context:e,operation:t,result:r})=>{if(t.responses){let{response:n}=it(t);n&&Ot({$ref:D({case:"camelCase",config:e.config,id:t.id,type:"response"}),context:e,result:r,schema:n});}},Ot=({$ref:e,context:t,optional:r,result:n,schema:s})=>{let o=t.file({id:or}),i,a,c;if(e&&(n.circularReferenceTracker.add(e),c=o.identifier({$ref:e,create:true,nameTransformer:is,namespace:"value"})),s.$ref){let m=n.circularReferenceTracker.has(s.$ref),f=o.identifier({$ref:s.$ref,nameTransformer:is,namespace:"value"});if(!f.name){let l=t.resolveIrRef(s.$ref);a=Ot({$ref:s.$ref,context:t,result:n,schema:l}),f=o.identifier({$ref:s.$ref,nameTransformer:is,namespace:"value"});}if(f.name){let l=p.identifier({text:f.name});m?(a=p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:sm}),parameters:[p.arrowFunction({statements:[p.returnStatement({expression:l})]})]}),n.hasCircularReference=true):a=l;}}else if(s.type){let m=Ui({context:t,result:n,schema:s});i=m.anyType,a=m.expression;}else if(s.items)if(s=je({schema:s}),s.items){let m=s.items.map(f=>Ot({context:t,result:n,schema:f}));if(s.logicalOperator==="and"){let f=s.items[0];f.logicalOperator==="or"||f.type&&f.type!=="object"?a=p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:nm}),parameters:m}):(a=m[0],m.slice(1).forEach(l=>{a=p.callExpression({functionName:p.propertyAccessExpression({expression:a,name:em}),parameters:[l]});}));}else a=p.callExpression({functionName:p.propertyAccessExpression({expression:w,name:cm}),parameters:[p.arrayLiteralExpression({elements:m})]});}else a=Ot({context:t,result:n,schema:s});else {let m=Ui({context:t,result:n,schema:{type:"unknown"}});i=m.anyType,a=m.expression;}if(e&&n.circularReferenceTracker.delete(e),a&&(s.accessScope==="read"&&(a=p.callExpression({functionName:p.propertyAccessExpression({expression:a,name:am})})),r&&(a=p.callExpression({functionName:p.propertyAccessExpression({expression:a,name:im})})),s.default!==void 0)){let m=p.valueToExpression({value:s.default});m&&(a=p.callExpression({functionName:p.propertyAccessExpression({expression:a,name:rm}),parameters:[m]}));}if(c&&c.name&&c.created){let m=p.constVariable({exportConst:true,expression:a,name:c.name,typeName:n.hasCircularReference?p.propertyAccessExpression({expression:w,name:i||"ZodTypeAny"}):void 0});o.add(m);}return a},Hi=({context:e,plugin:t})=>{e.createFile({exportFromIndex:t.exportFromIndex,id:or,identifierCase:"camelCase",path:t.output}).import({module:"zod",name:"z"}),e.subscribe("operation",({operation:n})=>{Sm({context:e,operation:n,result:{circularReferenceTracker:new Set,hasCircularReference:false}});}),e.subscribe("schema",({$ref:n,schema:s})=>{Ot({$ref:n,context:e,result:{circularReferenceTracker:new Set,hasCircularReference:false},schema:s});});};var Rm=({dataExpression:e})=>{let t=e!==void 0?p.callExpression({functionName:"BigInt",parameters:[p.callExpression({functionName:p.propertyAccessExpression({expression:e,name:"toString"})})]}):void 0;if(t){if(typeof e=="string")return [t];if(e)return [p.assignment({left:e,right:t})]}return []},Im=({dataExpression:e})=>{let t=p.identifier({text:"Date"});return typeof e=="string"?[p.newExpression({argumentsArray:[p.identifier({text:e})],expression:t})]:e?[p.assignment({left:e,right:p.newExpression({argumentsArray:[e],expression:t})})]:[]},sn=({id:e,type:t})=>{let r="";switch(t){case "data":r="DataResponseTransformer";break;case "error":r="ErrorResponseTransformer";break;case "response":r="ResponseTransformer";break}return `${qt}${P({case:"camelCase",value:e})}${r}`},Tm=({$ref:e,type:t})=>{let r="";switch(t){case "response":r="SchemaResponseTransformer";break}let n=e.split("/");return `${n.slice(0,n.length-1).join("/")}/${P({case:"camelCase",value:n[n.length-1]})}${r}`},zi=({$ref:e})=>Tm({$ref:e,type:"response"}),pr="transformers",on="data",ir=e=>e.map(t=>y.isStatement(t)?t:p.expressionToStatement({expression:t})),Gi=({node:e})=>e.kind===y.SyntaxKind.ReturnStatement,Zi=({context:e,plugin:t,schema:r})=>{let n=p.identifier({text:on}),s=ar({context:e,dataExpression:n,plugin:t,schema:r});return s.length&&!Gi({node:s[s.length-1]})&&s.push(p.returnStatement({expression:n})),s},ar=({context:e,dataExpression:t,plugin:r,schema:n})=>{let s=e.file({id:pr});if(n.$ref){let o=s.identifier({$ref:zi({$ref:n.$ref}),create:true,namespace:"value"});if(o.created&&o.name){let i=e.resolveIrRef(n.$ref),a=Zi({context:e,plugin:r,schema:i});if(a.length){let c=p.constVariable({expression:p.arrowFunction({async:false,multiLine:true,parameters:[{name:on,type:p.keywordTypeNode({keyword:"any"})}],statements:ir(a)}),name:o.name});s.add(c);}else o=s.blockIdentifier({$ref:zi({$ref:n.$ref}),namespace:"value"});}if(o.name){let i=p.callExpression({functionName:o.name,parameters:[t]});if(t)return typeof t=="string"&&t==="item"?[p.returnStatement({expression:i})]:[typeof t=="string"?i:p.assignment({left:t,right:i})]}return []}if(n.type==="array"){if(!t||typeof t=="string")return [];let o=n.items?ar({context:e,dataExpression:"item",plugin:r,schema:n.items?.[0]?n.items[0]:{...n,type:void 0}}):[];if(!o.length)return [];let i=ir(o);return i.some(c=>Gi({node:c}))||i.push(p.returnStatement({expression:p.identifier({text:"item"})})),[p.assignment({left:t,right:p.callExpression({functionName:p.propertyAccessExpression({expression:t,name:"map"}),parameters:[p.arrowFunction({multiLine:true,parameters:[{name:"item",type:"any"}],statements:i})]})})]}if(n.type==="object"){let o=[],i=n.required??[];for(let a in n.properties){let c=n.properties[a],m=p.propertyAccessExpression({expression:t||on,name:a}),f=ar({context:e,dataExpression:m,plugin:r,schema:c});if(!f.length)continue;let l=!c.items?.find(d=>d.type==="null");i.includes(a)&&l?o=o.concat(f):o.push(p.ifStatement({expression:m,thenStatement:p.block({statements:ir(f)})}));}return o}if(r.dates&&n.type==="string"&&(n.format==="date"||n.format==="date-time"))return Im({dataExpression:t});if(r.bigInt&&n.type==="integer"&&n.format==="int64")return Rm({dataExpression:t});if(n.items){if(n.items.length===1)return ar({context:e,dataExpression:"item",plugin:r,schema:n.items[0]});let o=[];if(n.logicalOperator==="and"||n.items.length===2&&n.items.find(i=>i.type==="null"||i.type==="void")){for(let i of n.items){let a=ar({context:e,dataExpression:t||"item",plugin:r,schema:i});if(a.length)if(t)o=o.concat(a);else {let c=p.identifier({text:"item"});o.push(p.ifStatement({expression:c,thenStatement:p.block({statements:ir(a)})}),p.returnStatement({expression:c}));}}return o}n.type!=="enum"&&console.warn(`\u2757\uFE0F Transformers warning: schema ${JSON.stringify(n)} is too complex and won't be currently processed. This will likely produce an incomplete transformer which is not what you want. Please open an issue if you'd like this improved https://github.com/hey-api/openapi-ts/issues`);}return []},Yi=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:pr,path:t.output});e.subscribe("operation",({operation:n})=>{let{response:s}=it(n);if(!s)return;if(s.items&&s.items.length>1){e.config.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${`${n.method.toUpperCase()} ${n.path}`} has ${s.items.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);return}let o=e.file({id:T}).identifier({$ref:D({config:e.config,id:n.id,type:"response"}),namespace:"type"});if(!o.name)return;let i=r.identifier({$ref:sn({id:n.id,type:"response"}),create:true,namespace:"value"});if(!i.name)return;let a=Zi({context:e,plugin:t,schema:s});if(a.length){r.import({asType:true,module:r.relativePathToFile({context:e,id:T}),name:o.name});let c=p.constVariable({exportConst:true,expression:p.arrowFunction({async:true,multiLine:true,parameters:[{name:on,type:p.keywordTypeNode({keyword:"any"})}],returnType:p.typeReferenceNode({typeArguments:[p.typeReferenceNode({typeName:o.name})],typeName:"Promise"}),statements:ir(a)}),name:i.name});r.add(c);}else i=r.blockIdentifier({$ref:sn({id:n.id,type:"response"}),namespace:"value"});});};var cr="TComposable",Ue="DefaultT",as="ResT",mr="sdk";var St=({meta:e,onImport:t,...r})=>{if(!e)return {created:false,name:""};let{created:n,name:s}=ce({meta:e,...r});return s&&t(s),{created:n,name:s}},sa=e=>`${e}ModelResponseTransformer`,Rt=e=>`${P({case:"PascalCase",value:e})}Data`,Wt=e=>`${P({case:"PascalCase",value:e})}Error`,ps=e=>`${e}Transformer`,Ae=e=>`${P({case:"PascalCase",value:e})}Response`,cs=({importedType:e,throwOnError:t})=>{let r=F.OptionsLegacyParser.name;return t?`${r}<${e||"unknown"}, ${t}>`:e?`${r}<${e}>`:r},ea=(e,t)=>{let r=b(),{name:n}=ce({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:Rt}),s=Pe(t.parameters);if(!q(r))return [{isRequired:s,name:"options",type:cs({importedType:n,throwOnError:"ThrowOnError"})}];if(!t.parameters.length)return [];let o=i=>{if(i.default!==void 0)return JSON.stringify(i.default,null,4)};return r.useOptions?[{default:s?void 0:{},name:"data",type:n}]:t.parameters.map(i=>{let a=`${n}['${i.name}']`;return {default:i?.default,isRequired:(!i.isRequired&&!o(i)?"?":"")=="",name:i.name,type:a}})},ta=(e,t)=>{let r=b(),n=p.typeNode("void");if(t.responses.filter(i=>i.responseTypes.includes("success")).length){let{name:i}=ce({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:Ae});n=p.typeUnionNode({types:[i]});}return r.useOptions&&r.plugins["@hey-api/sdk"]?.response==="response"&&(n=p.typeNode("ApiResult",[n])),C(r).name==="legacy/angular"?n=p.typeNode("Observable",[n]):n=p.typeNode("CancelablePromise",[n]),n},ra=e=>{let t=b();if(!q(t))return [e.deprecated&&"@deprecated",e.summary&&E(e.summary),e.description&&E(e.description)];let r=[];e.parameters.length&&(t.useOptions?r=["@param data The data for the request.",...e.parameters.map(o=>`@param data.${o.name} ${o.description?E(o.description):""}`)]:r=e.parameters.map(o=>`@param ${o.name} ${o.description?E(o.description):""}`));let n=e.responses.filter(o=>o.responseTypes.includes("success"));return [e.deprecated&&"@deprecated",e.summary&&E(e.summary),e.description&&E(e.description),...r,...n.map(o=>`@returns ${o.type} ${o.description?E(o.description):""}`),"@throws ApiError"]},Cm=({client:e,onClientImport:t,onImport:r,operation:n})=>{let s=b(),o=Ae(n.name),{name:i}=ce({client:e,meta:{$ref:`transformers/${o}`,name:o},nameTransformer:ps});if(i&&r(i),!q(s)){let f=[{spread:"options"}],u=n.parameters.filter(d=>d.in==="body"||d.in==="formData").map(d=>d.mediaType||(d.in==="formData"?"multipart/form-data":void 0)).filter(Boolean).filter(J);return u.length===1&&(u[0]==="multipart/form-data"&&(f=[...f,{spread:"formDataBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:null},{spread:"options?.headers"}]}],t?.("formDataBodySerializer")),u[0]==="application/x-www-form-urlencoded"&&(f=[...f,{spread:"urlSearchParamsBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:u[0]},{spread:"options?.headers"}]}],t?.("urlSearchParamsBodySerializer"))),f=[...f,{key:"url",value:n.path}],i&&(f=[...f,{key:"responseTransformer",value:i}]),p.objectExpression({identifiers:["responseTransformer"],obj:f})}let a=f=>f.reduce((l,u)=>{let d=u.prop,g=s.useOptions?`data.${u.name}`:u.name;return d===g?l[d]=d:oe(d)===d?l[d]=g:l[`'${d}'`]=g,l},{}),c={method:n.method,url:n.path};n.parametersPath.length&&(c.path=a(n.parametersPath)),n.parametersCookie.length&&(c.cookies=a(n.parametersCookie)),n.parametersHeader.length&&(c.headers=a(n.parametersHeader)),n.parametersQuery.length&&(c.query=a(n.parametersQuery)),n.parametersForm.length&&(c.formData=a(n.parametersForm)),n.parametersBody&&(n.parametersBody.in==="formData"&&(s.useOptions?c.formData=`data.${n.parametersBody.name}`:c.formData=n.parametersBody.name),n.parametersBody.in==="body"&&(s.useOptions?c.body=`data.${n.parametersBody.name}`:c.body=n.parametersBody.name)),n.parametersBody?.mediaType&&(c.mediaType=n.parametersBody?.mediaType),n.responseHeader&&(c.responseHeader=n.responseHeader),i&&(c.responseTransformer=i);let m=n.responses.filter(f=>f.responseTypes.includes("error"));if(m.length>0){let f={};m.forEach(l=>{f[l.code]=l.description??"";}),c.errors=f;}return p.objectExpression({identifiers:["body","cookies","formData","headers","path","query","responseTransformer"],obj:c,shorthand:true})},M=({config:e,handleIllegal:t,id:r,operation:n})=>e.plugins["@hey-api/sdk"]?.methodNameBuilder?e.plugins["@hey-api/sdk"].methodNameBuilder(n):t&&r.match(se)?`${r}_`:r,na=({client:e,onClientImport:t,onImport:r,operation:n})=>{let s=b(),o=Cm({client:e,onClientImport:t,onImport:r,operation:n});if(!q(s)){let a=ce({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:Wt}).name,m=n.responses.filter(f=>f.responseTypes.includes("success")).length?ce({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:Ae}).name:"void";return [p.returnFunctionCall({args:[o],name:`(options?.client ?? client).${n.method.toLocaleLowerCase()}`,types:a&&m?[m,a,"ThrowOnError"]:a?["unknown",a,"ThrowOnError"]:m?[m,"unknown","ThrowOnError"]:[]})]}return ve(s)?[p.returnFunctionCall({args:[o],name:"this.httpRequest.request"})]:C(s).name==="legacy/angular"?[p.returnFunctionCall({args:["OpenAPI","this.http",o],name:"__request"})]:[p.returnFunctionCall({args:["OpenAPI",o],name:"__request"})]},Pm=({client:e,onClientImport:t,onImport:r,onNode:n,service:s})=>{let o=b(),i=C(o),a=q(o);for(let l of s.operations)l.parameters.length&&St({client:e,meta:{$ref:l.name,name:l.name},nameTransformer:Rt,onImport:r}),a||St({client:e,meta:{$ref:l.name,name:l.name},nameTransformer:Wt,onImport:r}),l.responses.filter(d=>d.responseTypes.includes("success")).length&&St({client:e,meta:{$ref:l.name,name:l.name},nameTransformer:Ae,onImport:r});let c={default:("throwOnError"in i?i.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"};if(!o.plugins["@hey-api/sdk"]?.asClass&&!ve(o)){for(let l of s.operations){let u={parameters:ea(e,l),returnType:a?ta(e,l):void 0,statements:na({client:e,onClientImport:t,onImport:r,operation:l}),types:a?void 0:[c]},d=i.name==="legacy/angular"?p.anonymousFunction(u):p.arrowFunction(u),g=p.constVariable({comment:ra(l),exportConst:true,expression:d,name:M({config:o,handleIllegal:true,id:l.name,operation:l})});n(g);}return}let m=s.operations.map(l=>p.methodDeclaration({accessLevel:"public",comment:ra(l),isStatic:ve(o)===void 0&&i.name!=="legacy/angular",name:M({config:o,id:l.name,operation:l}),parameters:ea(e,l),returnType:a?ta(e,l):void 0,statements:na({client:e,onClientImport:t,onImport:r,operation:l}),types:a?void 0:[c]}));if(!m.length)return;ve(o)?m=[p.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"httpRequest",type:"BaseHttpRequest"}]}),...m]:i.name==="legacy/angular"&&(m=[p.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"http",type:"HttpClient"}]}),...m]);let f=p.classDeclaration({decorator:i.name==="legacy/angular"?{args:[{providedIn:"root"}],name:"Injectable"}:void 0,members:m,name:Ye({config:o,name:s.name})});n(f);},oa=({client:e,files:t})=>{let r=b(),n=q(r),s="sdk";if(t.sdk=new be({dir:r.output.path,id:"sdk",name:`${s}.ts`}),!n)t.sdk.import({module:B({config:r,sourceOutput:s}),name:"createClient"}),t.sdk.import({module:B({config:r,sourceOutput:s}),name:"createConfig"}),t.sdk.import({...F.OptionsLegacyParser,module:B({config:r,sourceOutput:s})});else if(C(r).name==="legacy/angular"?(t.sdk.import({module:"@angular/core",name:"Injectable"}),ve(r)||t.sdk.import({module:"@angular/common/http",name:"HttpClient"}),t.sdk.import({asType:true,module:"rxjs",name:"Observable"})):t.sdk.import({asType:true,module:"./core/CancelablePromise",name:"CancelablePromise"}),r.plugins["@hey-api/sdk"]?.response==="response"&&t.sdk.import({asType:true,module:"./core/ApiResult",name:"ApiResult"}),ve(r)){let i=C(r);t.sdk.import({asType:i.name!=="legacy/angular",module:"./core/BaseHttpRequest",name:"BaseHttpRequest"});}else t.sdk.import({module:"./core/OpenAPI",name:"OpenAPI"}),t.sdk.import({alias:"__request",module:"./core/request",name:"request"});if(!n){let o=C(r),i=p.constVariable({exportConst:true,expression:p.callExpression({functionName:"createClient",parameters:[p.callExpression({functionName:"createConfig",parameters:["throwOnError"in o&&o.throwOnError?p.objectExpression({obj:[{key:"throwOnError",value:true}]}):void 0]})]}),name:"client"});t.sdk.add(i);}for(let o of e.services)Pm({client:e,onClientImport:i=>{t.sdk.import({module:B({config:r,sourceOutput:s}),name:i});},onImport:i=>{t.sdk.import({asType:!i.endsWith("Transformer"),module:`./${t.types.nameWithoutExtension()}`,name:i});},onNode:i=>{t.sdk.add(i);},service:o});};var ia=({clientOptions:e,context:t,plugin:r})=>{let n=t.file({id:mr}),o=C(t.config).name==="@hey-api/client-nuxt",i=B({config:t.config,sourceOutput:n.nameWithoutExtension()}),a=n.import({asType:true,module:i,name:"TDataShape"}),c=n.import({asType:true,module:i,name:"Client"}),m=p.typeAliasDeclaration({exportType:true,name:"Options",type:p.typeIntersectionNode({types:[p.typeReferenceNode({typeArguments:o?[p.typeReferenceNode({typeName:"TComposable"}),p.typeReferenceNode({typeName:"TData"}),p.typeReferenceNode({typeName:as}),p.typeReferenceNode({typeName:Ue})]:[p.typeReferenceNode({typeName:"TData"}),p.typeReferenceNode({typeName:"ThrowOnError"})],typeName:e.name}),p.typeInterfaceNode({properties:[{comment:["You can provide a client instance returned by `createClient()` instead of","individual options. This might be also useful if you want to implement a","custom client."],isRequired:!r.client,name:"client",type:p.typeReferenceNode({typeName:c.name})},{comment:["You can pass arbitrary values through the `meta` object. This can be","used to access values that aren't defined as part of the SDK function."],isRequired:false,name:"meta",type:p.typeReferenceNode({typeArguments:[p.keywordTypeNode({keyword:"string"}),p.keywordTypeNode({keyword:"unknown"})],typeName:"Record"})}],useLegacyResolution:false})]}),typeParameters:o?[p.typeParameterDeclaration({constraint:p.typeReferenceNode({typeName:"Composable"}),name:"TComposable"}),p.typeParameterDeclaration({constraint:p.typeReferenceNode({typeName:a.name}),defaultType:p.typeReferenceNode({typeName:a.name}),name:"TData"}),p.typeParameterDeclaration({defaultType:p.keywordTypeNode({keyword:"unknown"}),name:as}),p.typeParameterDeclaration({defaultType:p.keywordTypeNode({keyword:"undefined"}),name:Ue})]:[p.typeParameterDeclaration({constraint:p.typeReferenceNode({typeName:a.name}),defaultType:p.typeReferenceNode({typeName:a.name}),name:"TData"}),p.typeParameterDeclaration({constraint:p.keywordTypeNode({keyword:"boolean"}),defaultType:p.keywordTypeNode({keyword:"boolean"}),name:"ThrowOnError"})]});n.add(m);};var an=({context:e,file:t,operation:r,throwOnError:n})=>{let s=Fi({context:e,file:t,operation:r}),o=bt({context:e,file:t,operation:r}),i=F.Options.name;return C(e.config).name==="@hey-api/client-nuxt"?`${i}<${cr}, ${s.name||"unknown"}, ${o.name||"unknown"}, ${Ue}>`:n?`${i}<${s.name||"unknown"}, ${n}>`:s.name?`${i}<${s.name}>`:i},pn="sdk",jm=e=>{if(!e)return;let t=e.split(";")[0]?.trim();if(t){if(t.startsWith("application/json")||t.endsWith("+json"))return "json";if(["application/","audio/","image/","video/"].some(r=>t.startsWith(r)))return "blob";if(t.startsWith("text/"))return "text"}},Am=({securitySchemeObject:e})=>{if(e.type==="openIdConnect")return {scheme:"bearer",type:"http"};if(e.type==="oauth2")return e.flows.password||e.flows.authorizationCode||e.flows.clientCredentials||e.flows.implicit?{scheme:"bearer",type:"http"}:void 0;if(e.type==="apiKey")return e.in==="header"?{name:e.name,type:"apiKey"}:e.in==="query"||e.in=="cookie"?{in:e.in,name:e.name,type:"apiKey"}:void 0;if(e.type==="http"){let t=e.scheme.toLowerCase();return t==="bearer"||t==="basic"?{scheme:t,type:"http"}:void 0}},Nm=({operation:e,plugin:t})=>{if(!e.security||!t.auth)return [];let r=[];for(let n of e.security){let s=Am({securitySchemeObject:n});s?r.push(s):console.warn(`\u2757\uFE0F SDK warning: unsupported security scheme. Please open an issue if you'd like it added https://github.com/hey-api/openapi-ts/issues
${JSON.stringify(n,null,2)}`);}return r},aa=({context:e,isRequiredOptions:t,operation:r,plugin:n})=>{let s=e.file({id:pn}),o=s.nameWithoutExtension(),i=en({context:e,file:s,operation:r}),a=bt({context:e,file:s,operation:r}),c=[];if(r.body)switch(r.body.type){case "form-data":c.push({spread:"formDataBodySerializer"}),s.import({module:B({config:e.config,sourceOutput:o}),name:"formDataBodySerializer"});break;case "json":break;case "text":case "octet-stream":c.push({key:"bodySerializer",value:null});break;case "url-search-params":c.push({spread:"urlSearchParamsBodySerializer"}),s.import({module:B({config:e.config,sourceOutput:o}),name:"urlSearchParamsBodySerializer"});break}let m=C(e.config);if(m.name==="@hey-api/client-axios"){for(let O in r.responses)if(ss({statusCode:O})==="2XX"){let x=r.responses[O],j=jm(x?.mediaType);j&&j!=="json"&&c.push({key:"responseType",value:j});}}let f=Nm({operation:r,plugin:n});f.length&&c.push({key:"security",value:p.arrayLiteralExpression({elements:f})});for(let O in r.parameters?.query){let x=r.parameters.query[O];if((x.schema.type==="array"||x.schema.type==="tuple")&&(x.style!=="form"||!x.explode)){c.push({key:"querySerializer",value:[{key:"array",value:[{key:"explode",value:false},{key:"style",value:"form"}]}]});break}}if(n.transformer==="@hey-api/transformers"){let O=e.file({id:pr}).identifier({$ref:sn({id:r.id,type:"response"}),namespace:"value"});O.name&&(s.import({module:s.relativePathToFile({context:e,id:pr}),name:O.name}),c.push({key:"responseTransformer",value:O.name}));}if(n.validator==="zod"){let O=e.file({id:or}).identifier({$ref:D({case:"camelCase",config:e.config,id:r.id,type:"response"}),namespace:"value"});O.name&&(s.import({module:s.relativePathToFile({context:e,id:or}),name:O.name}),c.push({key:"responseValidator",value:p.arrowFunction({async:true,parameters:[{name:"data"}],statements:[p.returnStatement({expression:p.awaitExpression({expression:p.callExpression({functionName:p.propertyAccessExpression({expression:p.identifier({text:O.name}),name:p.identifier({text:"parseAsync"})}),parameters:[p.identifier({text:"data"})]})})})]})}));}c.push({key:"url",value:r.path}),c.push({spread:"options"}),r.body&&c.push({key:"headers",value:[{key:"Content-Type",value:r.body.type==="form-data"?null:r.body.mediaType},{spread:"options?.headers"}]});let l=m.name==="@hey-api/client-nuxt",u=a.name||"unknown",d=i.name||"unknown",g=n.client?s.import({alias:"_heyApiClient",module:s.relativePathToFile({context:e,id:de}),name:"client"}):void 0,h=p.propertyAccessExpression({expression:p.identifier({text:"options"}),isOptional:!t,name:"client"});return [p.returnFunctionCall({args:[p.objectExpression({identifiers:["responseTransformer"],obj:c})],name:p.propertyAccessExpression({expression:g?.name?p.binaryExpression({left:h,operator:"??",right:p.identifier({text:g.name})}):h,name:p.identifier({text:r.method})}),types:l?[cr,`${u} | ${Ue}`,d,Ue]:[u,d,"ThrowOnError"]})]},Em=({context:e,plugin:t})=>{let r=C(e.config),n=r.name==="@hey-api/client-nuxt",s=e.file({id:pn}),o=new Map;e.subscribe("operation",({operation:i})=>{let a=!t.client||n||Ve(i),c=bt({context:e,file:s,operation:i}),m=p.methodDeclaration({accessLevel:"public",comment:[i.deprecated&&"@deprecated",i.summary&&E(i.summary),i.description&&E(i.description)],isStatic:true,name:M({config:e.config,handleIllegal:false,id:i.id,operation:i}),parameters:[{isRequired:a,name:"options",type:an({context:e,file:s,operation:i,throwOnError:n?void 0:"ThrowOnError"})}],returnType:void 0,statements:aa({context:e,isRequiredOptions:a,operation:i,plugin:t}),types:n?[{extends:p.typeNode("Composable"),name:cr},{default:c.name?p.typeReferenceNode({typeName:c.name}):p.typeNode("undefined"),extends:c.name?p.typeReferenceNode({typeName:c.name}):void 0,name:Ue}]:[{default:("throwOnError"in r?r.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]}),f=Array.from(new Set(i.tags));f.length||f.push("default");for(let l of f){let u=nr(l),d=o.get(u)??[];d.push(m),o.set(u,d);}}),e.subscribe("after",()=>{for(let[i,a]of o){let c=p.classDeclaration({decorator:void 0,members:a,name:Ye({config:e.config,name:i})});s.add(c);}});},$m=({context:e,plugin:t})=>{let r=C(e.config),n=r.name==="@hey-api/client-nuxt",s=e.file({id:pn});e.subscribe("operation",({operation:o})=>{let i=!t.client||n||Ve(o),a=bt({context:e,file:s,operation:o}),c=p.constVariable({comment:[o.deprecated&&"@deprecated",o.summary&&E(o.summary),o.description&&E(o.description)],exportConst:true,expression:p.arrowFunction({parameters:[{isRequired:i,name:"options",type:an({context:e,file:s,operation:o,throwOnError:n?void 0:"ThrowOnError"})}],returnType:void 0,statements:aa({context:e,isRequiredOptions:i,operation:o,plugin:t}),types:n?[{extends:p.typeNode("Composable"),name:cr},{default:a.name?p.typeReferenceNode({typeName:a.name}):p.typeNode("undefined"),extends:a.name?p.typeReferenceNode({typeName:a.name}):void 0,name:Ue}]:[{default:("throwOnError"in r?r.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]}),name:M({config:e.config,handleIllegal:true,id:o.id,operation:o})});s.add(c);});},pa=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:pn,path:t.output}),n=B({config:e.config,sourceOutput:r.nameWithoutExtension()}),s=r.import({...F.Options,alias:"ClientOptions",module:n});C(e.config).name==="@hey-api/client-nuxt"&&r.import({asType:true,module:n,name:"Composable"}),ia({clientOptions:s,context:e,plugin:t}),t.asClass?Em({context:e,plugin:t}):$m({context:e,plugin:t});};var ms={_dependencies:["@hey-api/typescript"],_handler:pa,_handlerLegacy:oa,_infer:(e,t)=>{e.client&&(typeof e.client=="boolean"&&(e.client=t.pluginByTag("client","\u{1F6AB} client needs to be set to generate SDKs - which HTTP client do you want to use?")),t.ensureDependency(e.client)),e.transformer&&(typeof e.transformer=="boolean"&&(e.transformer=t.pluginByTag("transformer")),t.ensureDependency(e.transformer)),e.validator&&(typeof e.validator=="boolean"&&(e.validator=t.pluginByTag("validator")),t.ensureDependency(e.validator));},asClass:false,auth:true,client:true,exportFromIndex:true,name:"@hey-api/sdk",operationId:true,output:"sdk",response:"body",serviceNameBuilder:"{{name}}Service"};var km="$OpenApiTs",X={$refs:[],base:"",description:null,enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],template:null,type:""},vm=({comments:e,leadingComment:t,meta:r,obj:n,onNode:s,...o})=>{if(!r)return;let{created:i,name:a}=ce({create:true,meta:r,...o});if(i){let c=p.enumDeclaration({comments:e,leadingComment:t,name:a,obj:n});s(c);}},We=({comment:e,meta:t,onCreated:r,onNode:n,type:s,...o})=>{if(!t)return {created:false,name:""};let i=ce({create:true,meta:t,...o}),{created:a,name:c}=i;if(a){let m=p.typeAliasDeclaration({comment:e,exportType:true,name:c,type:s});n(m),r?.(c);}return i},qm=e=>{let t=b(),r=[];ma(e),e.model.enums.forEach(n=>t.plugins["@hey-api/typescript"]?.enums!=="typescript+namespace"?ca({...e,model:n}):wm({...e,model:n,onNode:s=>{r.push(s);}})),r.length&&e.onNode(p.namespaceDeclaration({name:e.model.name,statements:r}));},ca=({client:e,model:t,onNode:r})=>{let n=b(),s={},o={};t.enum.forEach(a=>{let{key:c,value:m}=Mr(a);s[c]=m;let f=a.customDescription||a.description;f&&(o[c]=[E(f)]);});let i=[t.description&&E(t.description),t.deprecated&&"@deprecated"];if(n.plugins["@hey-api/typescript"]?.enums==="typescript"||n.plugins["@hey-api/typescript"]?.enums==="typescript+namespace"){vm({client:e,comments:o,leadingComment:i,meta:t.meta,obj:s,onNode:r});return}We({client:e,comment:i,meta:t.meta,onCreated:a=>{if(n.plugins["@hey-api/typescript"]?.enums==="javascript"){let c=p.objectExpression({multiLine:true,obj:Object.entries(s).map(([f,l])=>({comments:o[f],key:f,value:l})),unescape:true}),m=p.constVariable({assertion:"const",comment:i,exportConst:true,expression:c,name:a});r(m);}},onNode:r,type:ci(t.enum)});},wm=({model:e,onNode:t})=>{let r={},n={};e.enum.forEach(s=>{let{key:o,value:i}=Mr(s);r[o]=i;let a=s.customDescription||s.description;a&&(n[o]=[E(a)]);}),t(p.enumDeclaration({comments:n,leadingComment:[e.description&&E(e.description),e.deprecated&&"@deprecated"],name:e.meta?.name||e.name,obj:r}));},ma=({client:e,model:t,onNode:r})=>{We({client:e,comment:[t.description&&E(t.description),t.deprecated&&"@deprecated"],meta:t.meta,onNode:r,type:pe(t)});},Mm=e=>{switch(e.model.export){case "all-of":case "any-of":case "one-of":case "interface":return qm(e);case "enum":return ca(e);default:return ma(e)}},Fm=({client:e,onNode:t})=>{let r={},n=b();if(!n.plugins["@hey-api/sdk"]&&!n.plugins["@hey-api/typescript"]?.tree)return;let s=q(n);for(let i of e.services)for(let a of i.operations){if(!a.parameters.length&&!a.responses.length)continue;r[a.path]||(r[a.path]={});let c=r[a.path];c[a.method]||(c[a.method]={});let m=c[a.method];if(m.$ref=a.name,a.responses.length>0){if(m.res||(m.res={}),Array.isArray(m.res))continue;a.responses.forEach(l=>{m.res[l.code]=l;});}if(a.parameters.length>0){let l={mediaType:null,...X,in:"body",name:"body",prop:"body"},u=a.parameters.filter(x=>x.in==="body");u.length||(u=a.parameters.filter(x=>x.in==="formData")),u.length===1?l={...X,...u[0],in:"body",isRequired:u[0].isRequired,name:"body",prop:"body"}:u.length>1&&(l={...X,in:"body",isRequired:u.some(x=>x.isRequired),mediaType:"multipart/form-data",name:"body",prop:"body",properties:u});let d={...X,in:"header",isRequired:Pe(a.parameters.filter(x=>x.in==="header")),mediaType:null,name:s?"header":"headers",prop:s?"header":"headers",properties:a.parameters.filter(x=>x.in==="header").sort(tr)},g={...X,in:"path",isRequired:Pe(a.parameters.filter(x=>x.in==="path")),mediaType:null,name:"path",prop:"path",properties:a.parameters.filter(x=>x.in==="path").sort(tr)},h={...X,in:"query",isRequired:Pe(a.parameters.filter(x=>x.in==="query")),mediaType:null,name:"query",prop:"query",properties:a.parameters.filter(x=>x.in==="query").sort(tr)},O=s?pi([...a.parameters]):[l,d,g,h].filter(x=>x.properties.length||x.$refs.length||x.mediaType);m.req=O,We({client:e,meta:{$ref:a.name,name:a.name},nameTransformer:Rt,onNode:t,type:pe({...X,properties:O})});}let f=a.responses.filter(l=>l.responseTypes.includes("success"));if(f.length>0){We({client:e,meta:{$ref:a.name,name:a.name},nameTransformer:Ae,onNode:t,type:pe({...X,export:"any-of",properties:f})});let l=a.responses.filter(u=>u.responseTypes.includes("error"));s||We({client:e,meta:{$ref:a.name,name:a.name},nameTransformer:Wt,onNode:t,type:pe(l.length?{...X,export:"one-of",properties:l}:{...X,base:"unknown"})});}}let o=Object.entries(r).map(([i,a])=>{let c=Object.entries(a).map(([f,l])=>{let u=f,d=[];if(l.req){let h=l.$ref,{name:O}=ce({client:e,meta:{$ref:h,name:h},nameTransformer:Rt}),x={...X,base:O,export:"reference",isRequired:true,name:"req",properties:[],type:O};d=[...d,x];}if(l.res){let h=Object.entries(l.res).map(([x,j])=>({...X,...j,isRequired:true,name:String(x)})),O={...X,isRequired:true,name:"res",properties:h};d=[...d,O];}return {...X,isRequired:true,name:u.toLocaleLowerCase(),properties:d}}).filter(Boolean);return {...X,isRequired:true,name:`'${i}'`,properties:c}});n.plugins["@hey-api/typescript"]?.tree&&We({client:e,meta:{$ref:"@hey-api/openapi-ts",name:km},onNode:t,type:pe({...X,properties:o})});},fa=({client:e,files:t})=>{let r=b();t.types=new be({dir:r.output.path,id:"types",name:"types.ts"});let n=s=>{t.types?.add(s);};for(let s of e.models)Mm({client:e,model:s,onNode:n});Fm({client:e,onNode:n});};var at="data",Dm=e=>e.base==="unknown"&&e.export==="generic"&&e.type==="unknown",la=({client:e,model:t})=>t.$refs.map(n=>{let s=e.models.find(o=>o.meta?.$ref===n);if(!s)throw new Error(`Ref ${n} could not be found. Transformers cannot be generated without having access to all refs.`);return s}),ua=e=>{let t=e.model.meta.name,{name:r}=We({...e,meta:{$ref:`transformers/${t}`,name:t},nameTransformer:sa,onCreated:s=>{let o=cn({...e,meta:{$ref:`transformers/${t}`,name:s},path:[at]});da({...e,async:false,name:s,statements:o});},type:`(${at}: any) => ${t}`});return {created:!!e.client.types[r],name:r}},Lm=e=>{let{model:t}=e,r=la(e);if(r.length===1){let{created:n,name:s}=ua({...e,model:r[0]});return n?[p.transformArrayMutation({path:e.path,transformerName:s})]:[]}return rr(t)||t.link&&!Array.isArray(t.link)&&t.link.export==="any-of"&&t.link.properties.find(n=>rr(n))?[p.transformArrayMap({path:e.path,transformExpression:p.conditionalExpression({condition:p.identifier({text:"item"}),whenFalse:p.identifier({text:"item"}),whenTrue:p.transformNewDate({parameterName:"item"})})})]:[]},_m=e=>{let{model:t}=e,r=[...e.path,t.name];return t.type==="string"&&t.export!=="array"&&rr(t)?[p.transformDateMutation({path:r})]:cn({...e,model:t,path:r})},cn=e=>{let{model:t}=e;switch(t.export){case "array":return Lm(e);case "interface":return t.properties.flatMap(r=>_m({...e,model:r}));case "reference":{if(t.$refs.length!==1)return [];let r=la(e),{created:n,name:s}=ua({...e,model:r[0]});return n?t.in==="response"?[p.expressionToStatement({expression:p.callExpression({functionName:s,parameters:[at]})})]:p.transformFunctionMutation({path:e.path,transformerName:s}):[]}default:return []}},da=({async:e,client:t,name:r,onNode:n,onRemoveNode:s,statements:o})=>{let i={created:false,name:r};if(!o.length)return li({client:t,name:r}),s?.(),i;let a=p.arrowFunction({async:e,multiLine:true,parameters:[{name:at}],statements:[...o,p.returnVariable({expression:at})]}),c=p.constVariable({exportConst:true,expression:a,name:r,typeName:r});return n(c),{created:true,name:r}},ya=({client:e,files:t})=>{let r=b(),n=o=>{t.types?.add(o);},s=()=>{t.types?.removeNode();};for(let o of e.services)for(let i of o.operations){let a=i.responses.filter(f=>f.responseTypes.includes("success"));if(!a.length)continue;let c=a.filter(f=>!Dm(f));if(!c.length)continue;if(c.length>1){r.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${tt(i)} has ${c.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);continue}let m=Ae(i.name);We({client:e,meta:{$ref:`transformers/${m}`,name:m},nameTransformer:ps,onCreated:f=>{let l=a.length>1?a.flatMap(u=>{let d=cn({client:e,meta:{$ref:`transformers/${m}`,name:m},model:u,onNode:n,onRemoveNode:s,path:[at]});return d.length?[p.ifStatement({expression:p.safeAccessExpression(["data"]),thenStatement:p.block({statements:d})})]:[]}):cn({client:e,meta:{$ref:`transformers/${m}`,name:m},model:a[0],onNode:n,onRemoveNode:s,path:[at]});da({async:true,client:e,name:f,onNode:n,onRemoveNode:s,statements:l});},onNode:n,type:`(${at}: any) => Promise<${m}>`});}};var fs={_dependencies:["@hey-api/typescript"],_handler:Yi,_handlerLegacy:ya,_tags:["transformer"],bigInt:true,dates:true,exportFromIndex:false,name:"@hey-api/transformers",output:"transformers"};var ha=({context:e,name:t})=>(ke.lastIndex=0,ke.test(t)?t.startsWith("-")?y.factory.createStringLiteral(t):y.factory.createNumericLiteral(t):P({case:e.config.output.case,value:t}));var mn=p.keywordTypeNode({keyword:"string"}),Bm=({server:e})=>{let t=Se(e.url);return t.protocol&&t.host?p.literalTypeNode({literal:p.stringLiteral({text:e.url})}):p.templateLiteralType({value:[t.protocol||mn,"://",t.host||mn,t.port?`:${t.port}`:"",t.path||""]})},xa=({context:e,identifier:t,servers:r})=>{let n=e.file({id:T});if(!t.name)return;let s=C(e.config),o=r.map(a=>Bm({server:a}));r.length?"strictBaseUrl"in s&&s.strictBaseUrl||o.push(p.typeIntersectionNode({types:[mn,y.factory.createTypeLiteralNode([])]})):o.push(mn);let i=p.typeAliasDeclaration({exportType:true,name:t.name,type:p.typeInterfaceNode({properties:[{name:te(e.config),type:p.typeUnionNode({types:o})}],useLegacyResolution:false})});n.add(i);};var Qt=({schema:e})=>{let t=[e.description&&E(e.description),e.deprecated&&"@deprecated"].filter(Boolean);if(t.length)return t},us=({$ref:e,accessScope:t,plugin:r})=>{if(!t||t==="both")return e;let n=e.split("/"),s=n.pop(),o=t==="read"?r.readableNameBuilder:r.writableNameBuilder,i=Vm({name:s,nameBuilder:o});return n.push(i),n.join("/")},Vm=({name:e,nameBuilder:t})=>t?t.replace("{{name}}",e):e,Um=({schema:e,state:t})=>!!(t?.accessScope&&e.accessScope&&t.accessScope!==e.accessScope),Wm=({$ref:e,context:t,plugin:r,schema:n})=>{let o=t.file({id:T}).identifier({$ref:e,create:true,namespace:"value"});if(!o.created)return;let i=Sa({plugin:r,schema:n}),a=p.objectExpression({multiLine:true,obj:i.obj});return p.constVariable({assertion:"const",comment:Qt({schema:n}),exportConst:true,expression:a,name:o.name||""})},Sa=({plugin:e,schema:t})=>{let r=[];return {obj:(t.items??[]).map((s,o)=>{let i=typeof s.const;r.includes(i)||r.push(i);let a;return s.title?a=s.title:i==="number"||i==="string"?a=`${s.const}`:i==="boolean"?a=s.const?"true":"false":s.const===null?a="null":a=`${o}`,a&&(a=P({case:e.enumsCase,stripLeadingSeparators:false,value:a}),ke.lastIndex=0,ke.test(a)&&(e.enums==="typescript"||e.enums==="typescript+namespace")&&(a=`_${a}`)),{comments:Qt({schema:s}),key:a,value:s.const}}),typeofItems:r}},ds=({$ref:e,context:t,plugin:r,schema:n,state:s})=>{let i=t.file({id:T}).identifier({$ref:e,create:true,namespace:"type"});if(!i.created&&!Pr(e)&&r.enums!=="typescript+namespace")return;let a=_({context:t,plugin:r,schema:{...n,type:void 0},state:s});if(a)return p.typeAliasDeclaration({comment:Qt({schema:n}),exportType:true,name:i.name||"",type:a})},ba=({$ref:e,context:t,plugin:r,schema:n,state:s})=>{let i=t.file({id:T}).identifier({$ref:e,create:true,namespace:"value"});if(!i.created&&r.enums!=="typescript+namespace")return;let a=Sa({plugin:r,schema:n});return a.typeofItems.filter(m=>m!=="number"&&m!=="string").length?ds({$ref:e,context:t,plugin:r,schema:n,state:s}):p.enumDeclaration({leadingComment:Qt({schema:n}),name:i.name||"",obj:a.obj})},Qm=({context:e,namespace:t,plugin:r,schema:n,state:s})=>{if(!n.items)return p.typeArrayNode(p.keywordTypeNode({keyword:"unknown"}));n=je({schema:n});let o=[];for(let i of n.items){let a=_({context:e,namespace:t,plugin:r,schema:i,state:s});a&&o.push(a);}return o.length===1?p.typeArrayNode(o[0]):n.logicalOperator==="and"?p.typeArrayNode(p.typeIntersectionNode({types:o})):p.typeArrayNode(p.typeUnionNode({types:o}))},Xm=({schema:e})=>e.const!==void 0?p.literalTypeNode({literal:p.ots.boolean(e.const)}):p.keywordTypeNode({keyword:"boolean"}),Hm=({$ref:e,context:t,namespace:r,plugin:n,schema:s,state:o})=>{let i=t.file({id:T}),a=e?Pr(e):false,c=a||!!n.exportInlineEnums;if(e&&c){if(!n.enums){let f=ds({$ref:e,context:t,plugin:n,schema:s,state:o});f&&i.add(f);}if(n.enums==="javascript"){let f=ds({$ref:e,context:t,plugin:n,schema:s,state:o});f&&i.add(f);let l=Wm({$ref:e,context:t,plugin:n,schema:s});l&&i.add(l);}if(n.enums==="typescript"){let f=ba({$ref:e,context:t,plugin:n,schema:s,state:o});f&&i.add(f);}if(n.enums==="typescript+namespace"){let f=ba({$ref:e,context:t,plugin:n,schema:s,state:o});f&&(a?i.add(f):r.push(f));}}return _({context:t,plugin:n,schema:{...s,type:void 0},state:o})},zm=({context:e,schema:t})=>t.const!==void 0?p.literalTypeNode({literal:p.ots.number(t.const)}):t.type==="integer"&&t.format==="int64"&&e.config.plugins["@hey-api/transformers"]?.bigInt?p.typeReferenceNode({typeName:"bigint"}):p.keywordTypeNode({keyword:"number"}),Jm=({context:e,namespace:t,plugin:r,schema:n,state:s})=>{let o,i=[],a=[],c=n.required??[],m=false,f=false;for(let l in n.properties){let u=n.properties[l];if(Um({schema:u,state:s})){f=true;continue}let g=c.includes(l);i.push({comment:Qt({schema:u}),isReadOnly:u.accessScope==="read",isRequired:g,name:ha({context:e,name:l}),type:_({$ref:`${qt}${l}`,context:e,namespace:t,plugin:r,schema:u,state:s})}),a.push(u),g||(m=true);}if(n.additionalProperties&&(n.additionalProperties.type!=="never"||!a.length)&&(n.additionalProperties.type==="never"?a=[n.additionalProperties]:a.unshift(n.additionalProperties),m&&a.push({type:"undefined"}),o={isRequired:true,name:"key",type:_({context:e,namespace:t,plugin:r,schema:a.length===1?a[0]:{items:a,logicalOperator:"or"},state:s})}),!(f&&!i.length&&!o))return p.typeInterfaceNode({indexProperty:o,properties:i,useLegacyResolution:false})},Gm=({context:e,schema:t})=>{if(t.const!==void 0)return p.literalTypeNode({literal:p.stringLiteral({text:t.const})});if(t.format){if(t.format==="binary")return p.typeUnionNode({types:[p.typeReferenceNode({typeName:"Blob"}),p.typeReferenceNode({typeName:"File"})]});if((t.format==="date-time"||t.format==="date")&&e.config.plugins["@hey-api/transformers"]?.dates)return p.typeReferenceNode({typeName:"Date"})}return p.keywordTypeNode({keyword:"string"})},Zm=({context:e,namespace:t,plugin:r,schema:n,state:s})=>{let o=[];if(n.const&&Array.isArray(n.const))o=n.const.map(i=>p.valueToExpression({value:i})??p.identifier({text:"unknown"}));else if(n.items)for(let i of n.items){let a=_({context:e,namespace:t,plugin:r,schema:i,state:s});a&&o.push(a);}return p.typeTupleNode({types:o})},Oa=({$ref:e,context:t,namespace:r,plugin:n,schema:s,state:o})=>{switch(s.type){case "array":return Qm({context:t,namespace:r,plugin:n,schema:s,state:o});case "boolean":return Xm({schema:s});case "enum":return Hm({$ref:e,context:t,namespace:r,plugin:n,schema:s,state:o});case "integer":case "number":return zm({context:t,schema:s});case "never":return p.keywordTypeNode({keyword:"never"});case "null":return p.literalTypeNode({literal:p.null()});case "object":return Jm({context:t,namespace:r,plugin:n,schema:s,state:o});case "string":return Gm({context:t,schema:s});case "tuple":return Zm({context:t,namespace:r,plugin:n,schema:s,state:o});case "undefined":return p.keywordTypeNode({keyword:"undefined"});case "unknown":return p.keywordTypeNode({keyword:"unknown"});case "void":return p.keywordTypeNode({keyword:"void"})}},ls=({parameters:e})=>{let t={type:"object"};if(e){let r={},n=[];for(let s in e){let o=e[s];r[s]=je({schema:o.schema}),o.required&&n.push(s);}t.properties=r,n.length&&(t.required=n);}return t},Ym=({context:e,operation:t,plugin:r})=>{let n=e.file({id:T}),s={type:"object"},o=[];s.properties||(s.properties={}),t.body?(s.properties.body=t.body.schema,t.body.required&&o.push("body")):s.properties.body={type:"never"},t.parameters?.header&&(s.properties.headers=ls({parameters:t.parameters.header}),s.properties.headers.required&&o.push("headers")),t.parameters?.path?(s.properties.path=ls({parameters:t.parameters.path}),s.properties.path.required&&o.push("path")):s.properties.path={type:"never"},t.parameters?.query?(s.properties.query=ls({parameters:t.parameters.query}),s.properties.query.required&&o.push("query")):s.properties.query={type:"never"},s.properties.url={const:t.path,type:"string"},o.push("url"),s.required=o;let i=n.identifier({$ref:D({config:e.config,id:t.id,type:"data"}),create:true,namespace:"type"}),a=_({context:e,plugin:r,schema:s,state:r.readOnlyWriteOnlyBehavior==="off"?void 0:{accessScope:"write"}});if(a){let c=p.typeAliasDeclaration({exportType:true,name:i.name||"",type:a});n.add(c);}},ef=({context:e,operation:t,plugin:r})=>{Ym({context:e,operation:t,plugin:r});let n=e.file({id:T}),{error:s,errors:o,response:i,responses:a}=it(t);if(o){let c=n.identifier({$ref:D({config:e.config,id:t.id,type:"errors"}),create:true,namespace:"type"});if(c.name){let m=_({context:e,plugin:r,schema:o,state:r.readOnlyWriteOnlyBehavior==="off"?void 0:{accessScope:"read"}});if(m){let f=p.typeAliasDeclaration({exportType:true,name:c.name,type:m});n.add(f);}if(s){let f=n.identifier({$ref:D({config:e.config,id:t.id,type:"error"}),create:true,namespace:"type"});if(f.name){let l=p.typeReferenceNode({typeName:c.name}),u=y.factory.createTypeOperatorNode(y.SyntaxKind.KeyOfKeyword,l),d=p.typeAliasDeclaration({exportType:true,name:f.name,type:p.indexedAccessTypeNode({indexType:u,objectType:l})});n.add(d);}}}}if(a){let c=n.identifier({$ref:D({config:e.config,id:t.id,type:"responses"}),create:true,namespace:"type"});if(c.name){let m=_({context:e,plugin:r,schema:a,state:r.readOnlyWriteOnlyBehavior==="off"?void 0:{accessScope:"read"}});if(m){let f=p.typeAliasDeclaration({exportType:true,name:c.name,type:m});n.add(f);}if(i){let f=n.identifier({$ref:D({config:e.config,id:t.id,type:"response"}),create:true,namespace:"type"});if(f.name){let l=p.typeReferenceNode({typeName:c.name}),u=y.factory.createTypeOperatorNode(y.SyntaxKind.KeyOfKeyword,l),d=p.typeAliasDeclaration({exportType:true,name:f.name,type:p.indexedAccessTypeNode({indexType:u,objectType:l})});n.add(d);}}}}},Ra=({schema:e})=>{let t=e.accessScopes;return t!==void 0&&t.length>1},ys=({accessScope:e,schema:t})=>{let r=t.accessScopes;return !r||r!==void 0&&(r.includes(e)||r.includes("both"))},_=({$ref:e,context:t,namespace:r=[],plugin:n,schema:s,state:o})=>{let i=t.file({id:T}),a;if(s.$ref){let c=t.resolveIrRef(s.$ref);if(!o?.accessScope||ys({accessScope:o.accessScope,schema:c})){let m=us({$ref:s.$ref,accessScope:Ra({schema:c})?o?.accessScope:void 0,plugin:n}),f=i.identifier({$ref:m,create:true,namespace:"type"});a=p.typeReferenceNode({typeName:f.name||""});}}else if(s.type)a=Oa({$ref:e,context:t,namespace:r,plugin:n,schema:s,state:o});else if(s.items)if(s=je({schema:s}),s.items){let c=[];for(let m of s.items){let f=_({context:t,namespace:r,plugin:n,schema:m,state:o});f&&c.push(f);}a=s.logicalOperator==="and"?p.typeIntersectionNode({types:c}):p.typeUnionNode({types:c});}else a=_({context:t,namespace:r,plugin:n,schema:s,state:o});else a=Oa({context:t,namespace:r,plugin:n,schema:{type:"unknown"},state:o});if(e&&Pr(e)){if(r.length){let c=i.identifier({$ref:e,create:true,namespace:"value"}),m=p.namespaceDeclaration({name:c.name||"",statements:r});i.add(m);}if(s.type!=="enum"&&a){let c=i.identifier({$ref:e,create:true,namespace:"type"}),m=p.typeAliasDeclaration({comment:Qt({schema:s}),exportType:true,name:c.name||"",type:a});i.add(m);}}return a},Ia=({context:e,plugin:t})=>{let n=e.createFile({exportFromIndex:t.exportFromIndex,id:T,identifierCase:t.identifierCase,path:t.output}).identifier({$ref:"ClientOptions",create:true,namespace:"type"});e.subscribe("schema",({$ref:o,schema:i})=>{if(t.readOnlyWriteOnlyBehavior==="off"||!Ra({schema:i})){_({$ref:o,context:e,plugin:t,schema:i,state:void 0});return}ys({accessScope:"read",schema:i})&&_({$ref:us({$ref:o,accessScope:"read",plugin:t}),context:e,plugin:t,schema:i,state:{accessScope:"read"}}),ys({accessScope:"write",schema:i})&&_({$ref:us({$ref:o,accessScope:"write",plugin:t}),context:e,plugin:t,schema:i,state:{accessScope:"write"}});}),e.subscribe("parameter",({$ref:o,parameter:i})=>{_({$ref:o,context:e,plugin:t,schema:i.schema,state:void 0});}),e.subscribe("requestBody",({$ref:o,requestBody:i})=>{_({$ref:o,context:e,plugin:t,schema:i.schema,state:t.readOnlyWriteOnlyBehavior==="off"?void 0:{accessScope:"write"}});}),e.subscribe("operation",({operation:o})=>{ef({context:e,operation:o,plugin:t});});let s=[];e.subscribe("server",({server:o})=>{s.push(o);}),e.subscribe("after",()=>{xa({context:e,identifier:n,servers:s});});};var gs={_handler:Ia,_handlerLegacy:fa,enums:false,enumsCase:"SCREAMING_SNAKE_CASE",exportFromIndex:true,exportInlineEnums:false,identifierCase:"PascalCase",name:"@hey-api/typescript",output:"types",readOnlyWriteOnlyBehavior:"split",readableNameBuilder:"{{name}}Readable",style:"preserve",tree:false,writableNameBuilder:"{{name}}Writable"};var pt=({context:e,operation:t,plugin:r})=>{let n=e.file({id:r.name});return an({context:e,file:n,operation:t})},ln=({context:e,operation:t,plugin:r})=>{let n=e.file({id:r.name}),o={asType:true,name:en({context:e,file:n,operation:t}).name||""};if(o.name||(o=n.import({asType:true,module:r.name,name:"DefaultError"})),C(e.config).name==="@hey-api/client-axios"){let a=n.import({asType:true,module:"axios",name:"AxiosError"});o={...a,name:`${a.name}<${o.name}>`};}return o},un=({context:e,operation:t,plugin:r})=>{let n=e.file({id:r.name});return bt({context:e,file:n,operation:t}).name||"unknown"};var Ca="createQueryKey",yn="QueryKey",fr="TOptions",Ta=p.identifier({text:"infinite"}),dn=p.identifier({text:"options"}),gn=({context:e,plugin:t})=>{let r=e.file({id:t.name}),n=r.identifier({$ref:`#/ir/${Ca}`,create:true,namespace:"value"});if(n.name){let s=p.indexedAccessTypeNode({indexType:p.literalTypeNode({literal:p.ots.number(0)}),objectType:p.typeReferenceNode({typeArguments:[p.typeReferenceNode({typeName:fr})],typeName:yn})}),o=p.constVariable({expression:p.arrowFunction({multiLine:true,parameters:[{name:"id",type:p.typeReferenceNode({typeName:"string"})},{isRequired:false,name:"options",type:p.typeReferenceNode({typeName:fr})},{isRequired:false,name:"infinite",type:p.typeReferenceNode({typeName:"boolean"})}],returnType:p.typeTupleNode({types:[s]}),statements:[p.constVariable({assertion:s,expression:p.objectExpression({multiLine:false,obj:[{key:"_id",value:p.identifier({text:"id"})},{key:te(e.config),value:p.identifier({text:`(options?.client ?? _heyApiClient).getConfig().${te(e.config)}`})}]}),name:"params",typeName:s}),p.ifStatement({expression:Ta,thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"_infinite"}),right:Ta})})]})}),p.ifStatement({expression:p.propertyAccessExpression({expression:dn,isOptional:true,name:p.identifier({text:"body"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"body"}),right:p.propertyAccessExpression({expression:"options",name:"body"})})})]})}),p.ifStatement({expression:p.propertyAccessExpression({expression:dn,isOptional:true,name:p.identifier({text:"headers"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"headers"}),right:p.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),p.ifStatement({expression:p.propertyAccessExpression({expression:dn,isOptional:true,name:p.identifier({text:"path"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"path"}),right:p.propertyAccessExpression({expression:"options",name:"path"})})})]})}),p.ifStatement({expression:p.propertyAccessExpression({expression:dn,isOptional:true,name:p.identifier({text:"query"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"query"}),right:p.propertyAccessExpression({expression:"options",name:"query"})})})]})}),p.returnStatement({expression:p.arrayLiteralExpression({elements:[p.identifier({text:"params"})]})})],types:[{extends:p.typeReferenceNode({typeName:p.identifier({text:F.Options.name})}),name:fr}]}),name:n.name});r.add(o);}},tf=({context:e,id:t,isInfinite:r,plugin:n})=>{let o=e.file({id:n.name}).identifier({$ref:`#/ir/${Ca}`,namespace:"value"});return p.callExpression({functionName:o.name||"",parameters:[p.ots.string(t),"options",r?p.ots.boolean(true):void 0]})},hn=({context:e,plugin:t})=>{let r=e.file({id:t.name}),n=[{name:"_id",type:p.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:p.keywordTypeNode({keyword:"boolean"})}],s=p.typeAliasDeclaration({exportType:true,name:yn,type:p.typeTupleNode({types:[p.typeIntersectionNode({types:[p.typeReferenceNode({typeName:`Pick<${fr}, '${te(e.config)}' | 'body' | 'headers' | 'path' | 'query'>`}),p.typeInterfaceNode({properties:n,useLegacyResolution:true})]})]}),typeParameters:[{extends:p.typeReferenceNode({typeName:p.identifier({text:F.Options.name})}),name:fr}]});r.add(s);},lr=({context:e,isInfinite:t,operation:r})=>`${M({config:e.config,id:r.id,operation:r})}${t?"Infinite":""}QueryKey`,xn=({context:e,isInfinite:t,operation:r,plugin:n,typeQueryKey:s})=>{let o=e.file({id:n.name}),i=pt({context:e,operation:r,plugin:n}),a=lr({context:e,isInfinite:t,operation:r}),c=o.identifier({$ref:`#/queryKey/${a}`,create:true,namespace:"value"});return p.constVariable({exportConst:true,expression:p.arrowFunction({parameters:[{isRequired:Ve(r),name:"options",type:i}],returnType:t?s:void 0,statements:tf({context:e,id:r.id,isInfinite:t,plugin:n})}),name:c.name||""})};var ja="createInfiniteParams",Pa="infiniteQueryOptions",nf=({context:e,plugin:t})=>{let r=e.file({id:t.name}),n=p.constVariable({expression:p.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:p.typeReferenceNode({typeName:`QueryKey<${F.Options.name}>`})},{name:"page",type:p.typeReferenceNode({typeName:"K"})}],statements:[p.constVariable({expression:p.identifier({text:"queryKey[0]"}),name:"params"}),p.ifStatement({expression:p.propertyAccessExpression({expression:p.identifier({text:"page"}),name:p.identifier({text:"body"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"body"}),right:p.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),p.ifStatement({expression:p.propertyAccessExpression({expression:p.identifier({text:"page"}),name:p.identifier({text:"headers"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"headers"}),right:p.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),p.ifStatement({expression:p.propertyAccessExpression({expression:p.identifier({text:"page"}),name:p.identifier({text:"path"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"path"}),right:p.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].path"},{assertion:"any",spread:"page.path"}]})})})]})}),p.ifStatement({expression:p.propertyAccessExpression({expression:p.identifier({text:"page"}),name:p.identifier({text:"query"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"query"}),right:p.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].query"},{assertion:"any",spread:"page.query"}]})})})]})}),p.returnVariable({expression:p.asExpression({expression:p.asExpression({expression:p.identifier({text:"params"}),type:p.keywordTypeNode({keyword:"unknown"})}),type:y.factory.createTypeQueryNode(p.identifier({text:"page"}))})})],types:[{extends:p.typeReferenceNode({typeName:p.identifier({text:`Pick<QueryKey<${F.Options.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:ja});r.add(n);},sf=({context:e,operation:t})=>`${M({config:e.config,id:t.id,operation:t})}InfiniteOptions`,Aa=({context:e,operation:t,plugin:r,queryFn:n,state:s})=>{if(!r.infiniteQueryOptions||!["get","post"].includes(t.method))return s;let o=Vi({context:e,operation:t});if(!o)return s;let i=e.file({id:r.name}),a=Ve(t);s.hasInfiniteQueries||(s.hasInfiniteQueries=true,s.hasCreateQueryKeyParamsFunction||(hn({context:e,plugin:r}),gn({context:e,plugin:r}),s.hasCreateQueryKeyParamsFunction=true),s.hasCreateInfiniteParamsFunction||(nf({context:e,plugin:r}),s.hasCreateInfiniteParamsFunction=true),i.import({module:r.name,name:Pa}),s.typeInfiniteData=i.import({asType:true,module:r.name,name:"InfiniteData"})),s.hasUsedQueryFn=true;let c=pt({context:e,operation:t,plugin:r}),m=ln({context:e,operation:t,plugin:r}),f=un({context:e,operation:t,plugin:r}),l=`${yn}<${c}>`,u=`Pick<${l}[0], 'body' | 'headers' | 'path' | 'query'>`,d=_({context:e,plugin:e.config.plugins["@hey-api/typescript"],schema:o.schema,state:void 0}),g=d?`${ye({node:d,unescape:true})} | ${u}`:`${u}`,h=xn({context:e,isInfinite:true,operation:t,plugin:r,typeQueryKey:l});i.add(h);let O=lr({context:e,isInfinite:true,operation:t}),x=i.identifier({$ref:`#/queryKey/${O}`,namespace:"value"}),j=p.constVariable({comment:[],exportConst:true,expression:p.arrowFunction({parameters:[{isRequired:a,name:"options",type:c}],statements:[p.returnFunctionCall({args:[p.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:p.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:[p.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:p.conditionalExpression({condition:p.binaryExpression({left:p.typeOfExpression({text:"pageParam"}),operator:"===",right:p.ots.string("object")}),whenFalse:p.objectExpression({multiLine:true,obj:[{key:o.in,value:p.objectExpression({multiLine:true,obj:[{key:o.name,value:p.identifier({text:"pageParam"})}]})}]}),whenTrue:p.identifier({text:"pageParam"})}),name:"page",typeName:u}),p.constVariable({expression:p.callExpression({functionName:ja,parameters:["queryKey","page"]}),name:"params"}),p.constVariable({destructure:true,expression:p.awaitExpression({expression:p.callExpression({functionName:n,parameters:[p.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:p.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),p.returnVariable({expression:"data"})]})},{key:"queryKey",value:p.callExpression({functionName:x.name||"",parameters:["options"]})}]})],name:Pa,types:[f,m.name,`${typeof s.typeInfiniteData=="string"?s.typeInfiniteData:s.typeInfiniteData.name}<${f}>`,l,g]})]}),name:sf({context:e,operation:t})});i.add(j);};var Na="mutationOptions",of=({context:e,operation:t})=>`${M({config:e.config,id:t.id,operation:t})}Mutation`,Ea=({context:e,operation:t,plugin:r,queryFn:n,state:s})=>{if(!r.mutationOptions||!["delete","patch","post","put"].includes(t.method))return s;let o=r.name==="@tanstack/angular-query-experimental"||r.name==="@tanstack/svelte-query"||r.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",i=e.file({id:r.name});s.hasMutations||(s.hasMutations=true,i.import({asType:true,module:r.name,name:o})),s.hasUsedQueryFn=true;let a=pt({context:e,operation:t,plugin:r}),c=ln({context:e,operation:t,plugin:r}),m=un({context:e,operation:t,plugin:r}),f=`${o}<${m}, ${c.name}, ${a}>`,l=p.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${a}>`}],returnType:f,statements:[p.constVariable({expression:p.objectExpression({obj:[{key:"mutationFn",value:p.arrowFunction({async:true,multiLine:true,parameters:[{name:"localOptions"}],statements:[p.constVariable({destructure:true,expression:p.awaitExpression({expression:p.callExpression({functionName:n,parameters:[p.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"localOptions"},{key:"throwOnError",value:true}]})]})}),name:"data"}),p.returnVariable({expression:"data"})]})}]}),name:Na,typeName:f}),p.returnVariable({expression:Na})]}),u=p.constVariable({comment:[],exportConst:true,expression:l,name:of({context:e,operation:t})});return i.add(u),s};var $a="queryOptions",af=({context:e,operation:t})=>`${M({config:e.config,id:t.id,operation:t})}Options`,ka=({context:e,operation:t,plugin:r,queryFn:n,state:s})=>{if(!r.queryOptions||!["get","post"].includes(t.method))return s;let o=e.file({id:r.name}),i=Ve(t);s.hasQueries||(s.hasQueries=true,s.hasCreateQueryKeyParamsFunction||(hn({context:e,plugin:r}),gn({context:e,plugin:r}),s.hasCreateQueryKeyParamsFunction=true),o.import({module:r.name,name:$a})),s.hasUsedQueryFn=true;let a=xn({context:e,isInfinite:false,operation:t,plugin:r});o.add(a);let c=pt({context:e,operation:t,plugin:r}),m=lr({context:e,isInfinite:false,operation:t}),f=o.identifier({$ref:`#/queryKey/${m}`,namespace:"value"}),l=p.constVariable({comment:[],exportConst:true,expression:p.arrowFunction({parameters:[{isRequired:i,name:"options",type:c}],statements:[p.returnFunctionCall({args:[p.objectExpression({obj:[{key:"queryFn",value:p.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:[p.constVariable({destructure:true,expression:p.awaitExpression({expression:p.callExpression({functionName:n,parameters:[p.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:p.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),p.returnVariable({expression:"data"})]})},{key:"queryKey",value:p.callExpression({functionName:f.name||"",parameters:["options"]})}]})],name:$a})]}),name:af({context:e,operation:t})});return o.add(l),s};var Ne=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:t.name,path:t.output}),n={hasCreateInfiniteParamsFunction:false,hasCreateQueryKeyParamsFunction:false,hasInfiniteQueries:false,hasMutations:false,hasQueries:false,hasUsedQueryFn:false,typeInfiniteData:void 0};e.subscribe("before",()=>{r.import({...F.Options,module:r.relativePathToFile({context:e,id:mr})});}),e.subscribe("operation",({operation:s})=>{n.hasUsedQueryFn=false;let o=[e.config.plugins["@hey-api/sdk"]?.asClass&&Ye({config:e.config,name:nr(s.tags?.[0]||"default")}),M({config:e.config,handleIllegal:!e.config.plugins["@hey-api/sdk"]?.asClass,id:s.id,operation:s})].filter(Boolean).join(".");ka({context:e,operation:s,plugin:t,queryFn:o,state:n}),Aa({context:e,operation:s,plugin:t,queryFn:o,state:n}),Ea({context:e,operation:s,plugin:t,queryFn:o,state:n}),n.hasUsedQueryFn&&r.import({module:r.relativePathToFile({context:e,id:mr}),name:o.split(".")[0]});}),e.subscribe("after",()=>{(n.hasQueries||n.hasInfiniteQueries)&&r.import({alias:"_heyApiClient",module:r.relativePathToFile({context:e,id:de}),name:"client"});});};var pf=e=>`${M({config:b(),id:e.name,operation:e})}InfiniteOptions`,cf=e=>`${M({config:b(),id:e.name,operation:e})}Mutation`,mf=({config:e,id:t,operation:r})=>`${M({config:e,id:t,operation:r})}Options`,bn=({config:e,id:t,isInfinite:r,operation:n})=>`${M({config:e,id:t,operation:n})}${r?"Infinite":""}QueryKey`,ff=e=>{switch(e.in){case "formData":return "body";case "header":return "headers";default:return e.in}},lf="createInfiniteParams",Ka="createQueryKey",va="infiniteQueryOptions",qa="mutationOptions",xs="QueryKey",wa="queryOptions",dr="TOptions",uf=({file:e})=>{let t=p.constVariable({expression:p.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:p.typeNode(`QueryKey<${F.OptionsLegacyParser.name}>`)},{name:"page",type:p.typeNode("K")}],statements:[p.constVariable({expression:p.identifier({text:"queryKey[0]"}),name:"params"}),p.ifStatement({expression:p.propertyAccessExpression({expression:p.identifier({text:"page"}),name:p.identifier({text:"body"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"body"}),right:p.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),p.ifStatement({expression:p.propertyAccessExpression({expression:p.identifier({text:"page"}),name:p.identifier({text:"headers"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"headers"}),right:p.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),p.ifStatement({expression:p.propertyAccessExpression({expression:p.identifier({text:"page"}),name:p.identifier({text:"path"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"path"}),right:p.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].path"},{spread:"page.path"}]})})})]})}),p.ifStatement({expression:p.propertyAccessExpression({expression:p.identifier({text:"page"}),name:p.identifier({text:"query"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"query"}),right:p.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].query"},{spread:"page.query"}]})})})]})}),p.returnVariable({expression:y.factory.createAsExpression(y.factory.createAsExpression(p.identifier({text:"params"}),y.factory.createKeywordTypeNode(y.SyntaxKind.UnknownKeyword)),y.factory.createTypeQueryNode(p.identifier({text:"page"})))})],types:[{extends:p.typeReferenceNode({typeName:p.identifier({text:`Pick<QueryKey<${F.OptionsLegacyParser.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:lf});e.add(t);},Ma=({file:e})=>{let t=p.indexedAccessTypeNode({indexType:p.typeNode(0),objectType:p.typeNode(xs,[p.typeNode(dr)])}),r=p.identifier({text:"infinite"}),n=p.constVariable({expression:p.arrowFunction({multiLine:true,parameters:[{name:"id",type:p.typeNode("string")},{isRequired:false,name:"options",type:p.typeNode(dr)},{isRequired:false,name:"infinite",type:p.typeNode("boolean")}],returnType:t,statements:[p.constVariable({assertion:t,expression:p.objectExpression({multiLine:false,obj:[{key:"_id",value:p.identifier({text:"id"})},{key:te(b()),value:p.identifier({text:`(options?.client ?? _heyApiClient).getConfig().${te(b())}`})}]}),name:"params",typeName:t}),p.ifStatement({expression:r,thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"_infinite"}),right:r})})]})}),p.ifStatement({expression:p.propertyAccessExpression({expression:p.identifier({text:"options"}),isOptional:true,name:p.identifier({text:"body"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"body"}),right:p.propertyAccessExpression({expression:"options",name:"body"})})})]})}),p.ifStatement({expression:p.propertyAccessExpression({expression:p.identifier({text:"options"}),isOptional:true,name:p.identifier({text:"headers"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"headers"}),right:p.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),p.ifStatement({expression:p.propertyAccessExpression({expression:p.identifier({text:"options"}),isOptional:true,name:p.identifier({text:"path"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"path"}),right:p.propertyAccessExpression({expression:"options",name:"path"})})})]})}),p.ifStatement({expression:p.propertyAccessExpression({expression:p.identifier({text:"options"}),isOptional:true,name:p.identifier({text:"query"})}),thenStatement:p.block({statements:[p.expressionToStatement({expression:p.binaryExpression({left:p.propertyAccessExpression({expression:"params",name:"query"}),right:p.propertyAccessExpression({expression:"options",name:"query"})})})]})}),p.returnVariable({expression:"params"})],types:[{extends:p.typeReferenceNode({typeName:p.identifier({text:F.OptionsLegacyParser.name})}),name:dr}]}),name:Ka});e.add(n);},Fa=({file:e})=>{let t=[{name:"_id",type:p.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:p.keywordTypeNode({keyword:"boolean"})}],r=p.typeAliasDeclaration({name:xs,type:p.typeTupleNode({types:[p.typeIntersectionNode({types:[p.typeReferenceNode({typeName:`Pick<${dr}, '${te(b())}' | 'body' | 'headers' | 'path' | 'query'>`}),p.typeInterfaceNode({properties:t,useLegacyResolution:true})]})]}),typeParameters:[{extends:p.typeReferenceNode({typeName:p.identifier({text:F.OptionsLegacyParser.name})}),name:dr}]});e.add(r);},hs=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:s}=St({client:e,meta:r.parameters.length?{$ref:r.name,name:r.name}:void 0,nameTransformer:Rt,onImport:i=>{t.import({asType:true,module:n,name:i});}});return {typeData:cs({importedType:s})}},Da=({client:e,file:t,operation:r,pluginName:n,typesModulePath:s})=>{let o=b(),{name:i}=St({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:Wt,onImport:m=>{t.import({asType:true,module:s,name:m});}}),a={asType:true,name:i};if(a.name||(a=t.import({asType:true,module:n,name:"DefaultError"})),C(o).name==="@hey-api/client-axios"){let m=t.import({asType:true,module:"axios",name:"AxiosError"});a={...m,name:`${m.name}<${a.name}>`};}return {typeError:a}},La=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:s}=St({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:Ae,onImport:i=>{t.import({asType:true,module:n,name:i});}});return {typeResponse:s||"void"}},_a=({id:e,isInfinite:t})=>p.arrayLiteralExpression({elements:[p.callExpression({functionName:Ka,parameters:[p.ots.string(e),"options",t?p.ots.boolean(true):void 0]})],multiLine:false}),Ee=({client:e,files:t,plugin:r})=>{let n=b();if(q(n))throw new Error("\u{1F6AB} TanStack Query plugin does not support legacy clients");let s=t[r.name];s.import({...F.OptionsLegacyParser,module:B({config:n,sourceOutput:r.output})});let o=Tt({moduleOutput:t.types.nameWithoutExtension(),sourceOutput:r.output}),i=r.name==="@tanstack/angular-query-experimental"||r.name==="@tanstack/svelte-query"||r.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",a,c=false,m=false,f=false,l=false,u=false,d=new Map;for(let g of e.services)for(let h of g.operations){let O=tt(h);if(d.has(O))continue;d.set(O,true);let x=[n.plugins["@hey-api/sdk"]?.asClass&&Ye({config:n,name:g.name}),M({config:n,handleIllegal:!n.plugins["@hey-api/sdk"]?.asClass,id:h.name,operation:h})].filter(Boolean).join("."),j=false;if(r.queryOptions&&["GET","POST"].includes(h.method)){u||(u=true,m||(Fa({file:s}),Ma({file:s}),m=true),s.import({module:r.name,name:wa})),j=true;let{typeData:ee}=hs({client:e,file:s,operation:h,typesModulePath:o}),ct=Pe(h.parameters),Z=p.constVariable({exportConst:true,expression:p.arrowFunction({parameters:[{isRequired:ct,name:"options",type:ee}],statements:_a({id:h.name})}),name:bn({config:n,id:h.name,operation:h})});s.add(Z);let It=p.constVariable({comment:[],exportConst:true,expression:p.arrowFunction({parameters:[{isRequired:ct,name:"options",type:ee}],statements:[p.returnFunctionCall({args:[p.objectExpression({obj:[{key:"queryFn",value:p.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:[p.constVariable({destructure:true,expression:p.awaitExpression({expression:p.callExpression({functionName:x,parameters:[p.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:p.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),p.returnVariable({expression:"data"})]})},{key:"queryKey",value:p.callExpression({functionName:bn({config:n,id:h.name,operation:h}),parameters:["options"]})}]})],name:wa})]}),name:mf({config:n,id:h.name,operation:h})});s.add(It);}if(r.infiniteQueryOptions&&["GET","POST"].includes(h.method)){let ee,ct=h.parameters.find(Z=>{if(ne(n.input.pagination).test(Z.name))return ee=Z,true;if(Z.in==="body"){if(Z.export==="reference"){let $e=Z.$refs[0];return e.models.find(Qe=>Qe.meta?.$ref===$e)?.properties.find(Qe=>{if(ne(n.input.pagination).test(Qe.name))return ee=Qe,true})}return Z.properties.find($e=>{if(ne(n.input.pagination).test($e.name))return ee=$e,true})}});if(ct&&ee){f||(f=true,m||(Fa({file:s}),Ma({file:s}),m=true),c||(uf({file:s}),c=true),s.import({module:r.name,name:va}),a=s.import({asType:true,module:r.name,name:"InfiniteData"})),j=true;let{typeData:Z}=hs({client:e,file:s,operation:h,typesModulePath:o}),{typeError:It}=Da({client:e,file:s,operation:h,pluginName:r.name,typesModulePath:o}),{typeResponse:$e}=La({client:e,file:s,operation:h,typesModulePath:o}),yr=Pe(h.parameters),Qe=`${xs}<${Z}>`,Sn=`Pick<${Qe}[0], 'body' | 'headers' | 'path' | 'query'>`,Wa=`${ee.base} | ${Sn}`,Qa=p.constVariable({exportConst:true,expression:p.arrowFunction({parameters:[{isRequired:yr,name:"options",type:Z}],returnType:Qe,statements:_a({id:h.name,isInfinite:true})}),name:bn({config:n,id:h.name,isInfinite:true,operation:h})});s.add(Qa);let Xa=p.constVariable({comment:[],exportConst:true,expression:p.arrowFunction({parameters:[{isRequired:yr,name:"options",type:Z}],statements:[p.returnFunctionCall({args:[p.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:p.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:[p.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:p.conditionalExpression({condition:p.binaryExpression({left:p.typeOfExpression({text:"pageParam"}),operator:"===",right:p.ots.string("object")}),whenFalse:p.objectExpression({multiLine:true,obj:[{key:ff(ct),value:p.objectExpression({multiLine:true,obj:[{key:ee.name,value:p.identifier({text:"pageParam"})}]})}]}),whenTrue:p.identifier({text:"pageParam"})}),name:"page",typeName:Sn}),p.constVariable({expression:p.callExpression({functionName:"createInfiniteParams",parameters:["queryKey","page"]}),name:"params"}),p.constVariable({destructure:true,expression:p.awaitExpression({expression:p.callExpression({functionName:x,parameters:[p.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:p.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),p.returnVariable({expression:"data"})]})},{key:"queryKey",value:p.callExpression({functionName:bn({config:n,id:h.name,isInfinite:true,operation:h}),parameters:["options"]})}]})],name:va,types:[$e,It.name,`${typeof a=="string"?a:a.name}<${$e}>`,Qe,Wa]})]}),name:pf(h)});s.add(Xa);}}if(r.mutationOptions&&["DELETE","PATCH","POST","PUT"].includes(h.method)){l||(l=true,s.import({asType:true,module:r.name,name:i})),j=true;let{typeData:ee}=hs({client:e,file:s,operation:h,typesModulePath:o}),{typeError:ct}=Da({client:e,file:s,operation:h,pluginName:r.name,typesModulePath:o}),{typeResponse:Z}=La({client:e,file:s,operation:h,typesModulePath:o}),It=p.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${ee}>`}],statements:[p.constVariable({expression:p.objectExpression({obj:[{key:"mutationFn",value:p.arrowFunction({async:true,multiLine:true,parameters:[{name:"localOptions"}],statements:[p.constVariable({destructure:true,expression:p.awaitExpression({expression:p.callExpression({functionName:x,parameters:[p.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"localOptions"},{key:"throwOnError",value:true}]})]})}),name:"data"}),p.returnVariable({expression:"data"})]})}]}),name:qa,typeName:`${i}<${Z}, ${ct.name}, ${ee}>`}),p.returnVariable({expression:qa})]}),$e=p.constVariable({comment:[],exportConst:true,expression:It,name:cf(h)});s.add($e);}(u||f)&&s.import({alias:"_heyApiClient",module:Tt({moduleOutput:t.client.nameWithoutExtension(),sourceOutput:r.output}),name:"client"}),j&&s.import({module:Tt({moduleOutput:t.sdk.nameWithoutExtension(),sourceOutput:r.output}),name:x.split(".")[0]});}};var bs={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:Ne,_handlerLegacy:Ee,exportFromIndex:false,infiniteQueryOptions:true,mutationOptions:true,name:"@tanstack/angular-query-experimental",output:"@tanstack/angular-query-experimental",queryOptions:true};var Os={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:Ne,_handlerLegacy:Ee,exportFromIndex:false,infiniteQueryOptions:true,mutationOptions:true,name:"@tanstack/react-query",output:"@tanstack/react-query",queryOptions:true};var Ss={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:Ne,_handlerLegacy:Ee,exportFromIndex:false,infiniteQueryOptions:true,mutationOptions:true,name:"@tanstack/solid-query",output:"@tanstack/solid-query",queryOptions:true};var Rs={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:Ne,_handlerLegacy:Ee,exportFromIndex:false,infiniteQueryOptions:true,mutationOptions:true,name:"@tanstack/svelte-query",output:"@tanstack/svelte-query",queryOptions:true};var Is={_dependencies:["@hey-api/sdk","@hey-api/typescript"],_handler:Ne,_handlerLegacy:Ee,exportFromIndex:false,infiniteQueryOptions:true,mutationOptions:true,name:"@tanstack/vue-query",output:"@tanstack/vue-query",queryOptions:true};var Ba="fastify",df=({context:e,operation:t})=>{let r=e.file({id:Ba}),n=e.file({id:T}),s=[],o=n.identifier({$ref:D({config:e.config,id:t.id,type:"data"}),namespace:"type"});o.name&&(t.body&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:T}),name:o.name}),s.push({isRequired:t.body.required,name:"Body",type:`${o.name}['body']`})),t.parameters&&(t.parameters.header&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:T}),name:o.name}),s.push({isRequired:ot(t.parameters.header),name:"Headers",type:`${o.name}['headers']`})),t.parameters.path&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:T}),name:o.name}),s.push({isRequired:ot(t.parameters.path),name:"Params",type:`${o.name}['path']`})),t.parameters.query&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:T}),name:o.name}),s.push({isRequired:ot(t.parameters.query),name:"Querystring",type:`${o.name}['query']`}))));let{errors:i,responses:a}=it(t),c,m=n.identifier({$ref:D({config:e.config,id:t.id,type:"errors"}),namespace:"type"});if(m.name&&i&&i.properties){let g=Object.keys(i.properties);if(g.length){if(!g.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:e,id:T}),name:m.name}),c=p.typeReferenceNode({typeName:m.name});else if(g.length>1){r.import({asType:true,module:r.relativePathToFile({context:e,id:T}),name:m.name});let O=p.typeReferenceNode({typeName:m.name}),x=p.literalTypeNode({literal:p.stringLiteral({text:"default"})});c=p.typeReferenceNode({typeArguments:[O,x],typeName:"Omit"});}}}let f,l=n.identifier({$ref:D({config:e.config,id:t.id,type:"responses"}),namespace:"type"});if(l.name&&a&&a.properties){let g=Object.keys(a.properties);if(g.length){if(!g.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:e,id:T}),name:l.name}),f=p.typeReferenceNode({typeName:l.name});else if(g.length>1){r.import({asType:true,module:r.relativePathToFile({context:e,id:T}),name:l.name});let O=p.typeReferenceNode({typeName:l.name}),x=p.literalTypeNode({literal:p.stringLiteral({text:"default"})});f=p.typeReferenceNode({typeArguments:[O,x],typeName:"Omit"});}}}let u=[c,f].filter(Boolean);return u.length&&s.push({name:"Reply",type:p.typeIntersectionNode({types:u})}),s.length?{name:t.id,type:p.typeNode("RouteHandler",[p.typeInterfaceNode({properties:s,useLegacyResolution:false})])}:void 0},Va=({context:e,plugin:t})=>{let r=e.createFile({exportFromIndex:t.exportFromIndex,id:Ba,path:t.output}),n=[];e.subscribe("operation",({operation:s})=>{let o=df({context:e,operation:s});o&&n.push(o);}),e.subscribe("after",()=>{let s=r.identifier({$ref:"RouteHandlers",create:true,namespace:"type"});s.name&&(n.length&&r.import({asType:true,module:"fastify",name:"RouteHandler"}),r.add(p.typeAliasDeclaration({exportType:true,name:s.name,type:p.typeInterfaceNode({properties:n,useLegacyResolution:false})})));});};var Ts={_dependencies:["@hey-api/typescript"],_handler:Va,_handlerLegacy:()=>{},exportFromIndex:false,name:"fastify",output:"fastify"};var Cs={_handler:Hi,_handlerLegacy:()=>{},_tags:["validator"],exportFromIndex:false,name:"zod",output:"zod"};var On={"@hey-api/client-axios":Un,"@hey-api/client-fetch":Wn,"@hey-api/client-next":Qn,"@hey-api/client-nuxt":Xn,"@hey-api/schemas":rs,"@hey-api/sdk":ms,"@hey-api/transformers":fs,"@hey-api/typescript":gs,"@tanstack/angular-query-experimental":bs,"@tanstack/react-query":Os,"@tanstack/solid-query":Ss,"@tanstack/svelte-query":Rs,"@tanstack/vue-query":Is,fastify:Ts,"legacy/angular":Hn,"legacy/axios":zn,"legacy/fetch":Jn,"legacy/node":Gn,"legacy/xhr":Zn,zod:Cs};var Ua=["@hey-api/typescript","@hey-api/sdk"],hf=e=>{let t={path:""};return typeof e.input=="string"?t.path=e.input:e.input&&(e.input.path||e.input.organization)?t={...t,path:"https://get.heyapi.dev",...e.input}:t={...t,path:e.input},t},xf=({pluginConfigs:e,userPlugins:t,userPluginsConfig:r})=>{let n=new Set,s=new Set,o={},i=a=>{if(n.has(a))throw new Error(`Circular reference detected at '${a}'`);if(!s.has(a)){if(n.add(a),!e[a])throw new Error(`\u{1F6AB} unknown plugin dependency "${a}" - do you need to register a custom plugin with this name?`);let m=On[a],f=r[a];if(f&&m){let u=Object.keys(f).find(d=>d.startsWith("_"));if(u)throw new Error(`\u{1F6AB} cannot register plugin "${a}" - attempting to override a native plugin option "${u}"`)}let l={_dependencies:[],...m,...f};if(l._infer){let u={ensureDependency:d=>{typeof d=="string"&&!l._dependencies.includes(d)&&(l._dependencies=[...l._dependencies,d]);},pluginByTag:(d,g)=>{for(let h of t){let O=On[h]||e[h];if(O&&O._tags?.includes(d)&&h!==a)return h}throw new Error(g||`\u{1F6AB} missing plugin - no plugin with tag "${d}" found`)}};l._infer(l,u);}for(let u of l._dependencies)i(u);n.delete(a),s.add(a),o[a]=l;}};for(let a of t)i(a);return {pluginOrder:Array.from(s),plugins:o}},bf=e=>{let t={clean:true,format:false,indexFile:true,lint:false,path:"",tsConfigPath:""};return typeof e.output=="string"?t.path=e.output:t={...t,...e.output},t},Of=e=>typeof e=="string"?e.startsWith("@hey-api/client")||e.startsWith("legacy/"):e.name.startsWith("@hey-api/client")||e.name.startsWith("legacy/")||e._tags&&e._tags.includes("client"),Sf=e=>{let t={},r=Ua;e.plugins&&(e.plugins=e.plugins.filter(s=>typeof s=="string"&&s||typeof s!="string"&&s.name),e.plugins.length===1&&Of(e.plugins[0])?r=[...Ua,...e.plugins]:r=e.plugins);let n=r.map(s=>typeof s=="string"?s:(s.name&&(t[s.name]=s),s.name)).filter(Boolean);return xf({pluginConfigs:{...t,...On},userPlugins:n,userPluginsConfig:t})},Rf=e=>{let t={enabled:false,interval:1e3,timeout:6e4};return typeof e.input.path!="string"||(typeof e.watch=="boolean"?t.enabled=e.watch:typeof e.watch=="number"?(t.enabled=true,t.interval=e.watch):e.watch&&(t={...t,...e.watch})),t},FT=async e=>{let t;if(e?.configFile){let s=e.configFile.split(".");t=s.slice(0,s.length-1).join(".");}let{config:r}=await loadConfig({configFile:t,name:"openapi-ts"});return (Array.isArray(e)?e:Array.isArray(r)?r.map(s=>({...s,...e})):[{...r??{},...e}]).map(s=>{let{base:o,configFile:i="",dryRun:a=false,experimentalParser:c=true,exportCore:m=true,name:f,request:l,useOptions:u=true}=s,d=qi(s);d.level==="debug"&&console.warn("userConfig:",s);let g=hf(s),h=bf(s);if(!g.path)throw new Error("\u{1F6AB} missing input - which OpenAPI specification should we use to generate your output?");if(!h.path)throw new Error("\u{1F6AB} missing output - where should we generate your output?");u||console.warn("\u2757\uFE0F Deprecation warning: useOptions set to false. This setting will be removed in future versions. Please migrate useOptions to true https://heyapi.dev/openapi-ts/migrating.html#v0-27-38"),h.path=G.resolve(process.cwd(),h.path);let O=qs({...Sf(s),base:o,configFile:i,dryRun:a,experimentalParser:c,exportCore:false,input:g,logs:d,name:f,output:h,request:l,useOptions:u,watch:Rf({...s,input:g})});return O.exportCore=q(O)?m:false,d.level==="debug"&&console.warn("config:",O),O})};
export{Rn as a,If as b,Tf as c,C as d,b as e,q as f,ve as g,p as h,pi as i,hr as j,jf as k,wx as l,P as m,be as n,kf as o,Ye as p,Ix as q,Tx as r,bO as s,qi as t,rt as u,nt as v,Ua as w,FT as x};//# sourceMappingURL=chunk-R52Q6I2F.js.map
//# sourceMappingURL=chunk-R52Q6I2F.js.map