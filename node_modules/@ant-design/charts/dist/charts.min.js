/*! For license information please see charts.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react-dom"),require("lodash"),require("react")):"function"==typeof define&&define.amd?define(["react-dom","lodash","react"],e):"object"==typeof exports?exports.Charts=e(require("react-dom"),require("lodash"),require("react")):t.Charts=e(t.ReactDOM,t._,t.React)}(self,((t,e,n)=>(()=>{var r,i,a={8:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var r=n(1869);function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isAnyArray)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!(0,r.isAnyArray)(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isAnyArray)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,i=void 0===n?0:n,a=e.toIndex,o=void 0===a?t.length:a;if(i<0||i>=t.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=i||o>t.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[i],u=i+1;u<o;u++)t[u]<s&&(s=t[u]);return s}(t),a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isAnyArray)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,i=void 0===n?0:n,a=e.toIndex,o=void 0===a?t.length:a;if(i<0||i>=t.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=i||o>t.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[i],u=i+1;u<o;u++)t[u]>s&&(s=t[u]);return s}(t);if(i===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var o=n.min,s=void 0===o?n.autoMinMax?i:0:o,u=n.max,c=void 0===u?n.autoMinMax?a:1:u;if(s>=c)throw new RangeError("min option must be smaller than max option");for(var l=(c-s)/(a-i),f=0;f<t.length;f++)e[f]=(t[f]-i)*l+s;return e}},35:(t,e,n)=>{var r=n(6698).Uint8Array;t.exports=r},56:(t,e,n)=>{var r=n(5405);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},68:(t,e,n)=>{var r=n(957),i=n(8084),a=n(1263),o=n(4265),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,a(t)),t=i(t);return e}:o;t.exports=s},85:(t,e,n)=>{var r=n(4680);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},95:(t,e,n)=>{"use strict";var r=n(6036),i=n(1173),a=n(8478),o=n(5248),s=n(1882).normalizeRanks,u=n(9671),c=n(1882).removeEmptyRanks,l=n(1302),f=n(1152),d=n(5025),h=n(2194),p=n(6889),v=n(1882),g=n(4206).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?v.time:v.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new g({multigraph:!0,compound:!0}),n=M(t.graph());return e.setGraph(r.merge({},m,S(n,y),r.pick(n,b))),r.forEach(t.nodes(),(function(n){var i=M(t.node(n));e.setNode(n,r.defaults(S(i,x),w)),e.setParent(n,t.parent(n))})),r.forEach(t.edges(),(function(n){var i=M(t.edge(n));e.setEdge(n,r.merge({},E,S(i,k),r.pick(i,O)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){r.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){i.run(t)})),e("    nestingGraph.run",(function(){l.run(t)})),e("    rank",(function(){o(v.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e};v.addDummyNode(t,"edge-proxy",i,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){c(t)})),e("    nestingGraph.cleanup",(function(){l.cleanup(t)})),e("    normalizeRanks",(function(){s(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;r.forEach(t.nodes(),(function(n){var i=t.node(n);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=r.max(e,i.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){a.run(t)})),e("    parentDummyChains",(function(){u(t)})),e("    addBorderSegments",(function(){f(t)})),e("    order",(function(){h(t)})),e("    insertSelfEdges",(function(){!function(t){var e=v.buildLayerMatrix(t);r.forEach(e,(function(e){var n=0;r.forEach(e,(function(e,i){var a=t.node(e);a.order=i+n,r.forEach(a.selfEdges,(function(e){v.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:a.rank,order:i+ ++n,e:e.e,label:e.label},"_se")})),delete a.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){d.adjust(t)})),e("    position",(function(){p(t)})),e("    positionSelfEdges",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,a=r.y,o=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{x:i+o,y:a},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){r.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),i=t.node(n.borderTop),a=t.node(n.borderBottom),o=t.node(r.last(n.borderLeft)),s=t.node(r.last(n.borderRight));n.width=Math.abs(s.x-o.x),n.height=Math.abs(a.y-i.y),n.x=o.x+n.width/2,n.y=i.y+n.height/2}})),r.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){a.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){d.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,a=0,o=t.graph(),s=o.marginx||0,u=o.marginy||0;function c(t){var r=t.x,o=t.y,s=t.width,u=t.height;e=Math.min(e,r-s/2),n=Math.max(n,r+s/2),i=Math.min(i,o-u/2),a=Math.max(a,o+u/2)}r.forEach(t.nodes(),(function(e){c(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.has(n,"x")&&c(n)})),e-=s,i-=u,r.forEach(t.nodes(),(function(n){var r=t.node(n);r.x-=e,r.y-=i})),r.forEach(t.edges(),(function(n){var a=t.edge(n);r.forEach(a.points,(function(t){t.x-=e,t.y-=i})),r.has(a,"x")&&(a.x-=e),r.has(a,"y")&&(a.y-=i)})),o.width=n-e+s,o.height=a-i+u}(t)})),e("    assignNodeIntersects",(function(){!function(t){r.forEach(t.edges(),(function(e){var n,r,i=t.edge(e),a=t.node(e.v),o=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=o,r=a),i.points.unshift(v.intersectRect(a,n)),i.points.push(v.intersectRect(o,r))}))}(t)})),e("    reversePoints",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){i.undo(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){r.forEach(t.nodes(),(function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))})),r.forEach(t.edges(),(function(n){var i=t.edge(n),a=e.edge(n);i.points=a.points,r.has(a,"x")&&(i.x=a.x,i.y=a.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var y=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],x=["width","height"],w={width:0,height:0},k=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},O=["labelpos"];function S(t,e){return r.mapValues(r.pick(t,e),Number)}function M(t){var e={};return r.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}},117:(t,e,n)=>{var r=n(5405);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},199:t=>{function e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(n){}return(t.exports=e=function(){return!!n},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},223:(t,e,n)=>{var r=n(2613),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},270:(t,e,n)=>{var r=n(117),i=n(1413),a=n(6876),o=n(3448),s=n(56);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,t.exports=u},272:(t,e,n)=>{var r=n(7671),i=n(8084),a=n(1110);t.exports=function(t){return"function"!=typeof t.constructor||a(t)?{}:r(i(t))}},302:(t,e,n)=>{var r=n(2397),i=n(6354),a=n(9797),o=n(2707),s=a((function(t,e){if(null==t)return[];var n=e.length;return n>1&&o(t,e[0],e[1])?e=[]:n>2&&o(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])}));t.exports=s},319:(t,e,n)=>{var r=n(9780),i=n(519);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},321:(t,e,n)=>{var r=n(2755),i={getId:function(t){return t.id||t.name},getPreH:function(t){return t.preH||0},getPreV:function(t){return t.preV||0},getHGap:function(t){return t.hgap||18},getVGap:function(t){return t.vgap||18},getChildren:function(t){return t.children},getHeight:function(t){return t.height||36},getWidth:function(t){var e=t.label||" ";return t.width||18*e.split("").length}};function a(t,e){var n=this;if(n.vgap=n.hgap=0,t instanceof a)return t;n.data=t;var r=e.getHGap(t),i=e.getVGap(t);return n.preH=e.getPreH(t),n.preV=e.getPreV(t),n.width=e.getWidth(t),n.height=e.getHeight(t),n.width+=n.preH,n.height+=n.preV,n.id=e.getId(t),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(r,i),n}r.assign(a.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){var n=this;n.hgap+=t,n.vgap+=e,n.width+=2*t,n.height+=2*e},eachNode:function(t){for(var e,n=[this];e=n.shift();)t(e),n=e.children.concat(n)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e,n=[this];e=n.shift();)t(e),n=n.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode((function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)})),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode((function(n){n.x+=t,n.y+=e,n.x+=n.preH,n.y+=n.preV}))},right2left:function(){var t=this,e=t.getBoundingBox();t.eachNode((function(t){t.x=t.x-2*(t.x-e.left)-t.width})),t.translate(e.width,0)},bottom2top:function(){var t=this,e=t.getBoundingBox();t.eachNode((function(t){t.y=t.y-2*(t.y-e.top)-t.height})),t.translate(0,e.height)}}),t.exports=function(t,e,n){void 0===e&&(e={});var o,s=new a(t,e=r.assign({},i,e)),u=[s];if(!n&&!t.collapsed)for(;o=u.shift();)if(!o.data.collapsed){var c=e.getChildren(o.data),l=c?c.length:0;if(o.children=new Array(l),c&&l)for(var f=0;f<l;f++){var d=new a(c[f],e);o.children[f]=d,u.push(d),d.parent=o,d.depth=o.depth+1}}return s}},334:(t,e,n)=>{var r=n(9942),i=n(4198)(r);t.exports=i},349:(t,e,n)=>{var r=n(2323),i=n(5434),a=n(477),o=n(8962);t.exports=function(t,e){return(o(t)?r:a)(t,i(e,3))}},381:(t,e,n)=>{var r=n(2323);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},383:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},411:(t,e,n)=>{var r=n(7953);t.exports=function(t,e,n){return t.set(r(t,e),n),n},t.exports.__esModule=!0,t.exports.default=t.exports},457:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<a(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=t[s],c=s+1,l=t[c];if(0>a(u,n))c<i&&0>a(l,u)?(t[r]=l,t[c]=n,r=c):(t[r]=u,t[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break t;t[r]=l,t[c]=n,r=c}}}return e}function a(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,d=null,h=3,p=!1,v=!1,g=!1,y=!1,m="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function w(t){for(var e=r(l);null!==e;){if(null===e.callback)i(l);else{if(!(e.startTime<=t))break;i(l),e.sortIndex=e.expirationTime,n(c,e)}e=r(l)}}function k(t){if(g=!1,w(t),!v)if(null!==r(c))v=!0,O||(O=!0,E());else{var e=r(l);null!==e&&_(k,e.startTime-t)}}var E,O=!1,S=-1,M=5,T=-1;function A(){return!(!y&&e.unstable_now()-T<M)}function P(){if(y=!1,O){var t=e.unstable_now();T=t;var n=!0;try{t:{v=!1,g&&(g=!1,b(S),S=-1),p=!0;var a=h;try{e:{for(w(t),d=r(c);null!==d&&!(d.expirationTime>t&&A());){var o=d.callback;if("function"==typeof o){d.callback=null,h=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof s){d.callback=s,w(t),n=!0;break e}d===r(c)&&i(c),w(t)}else i(c);d=r(c)}if(null!==d)n=!0;else{var u=r(l);null!==u&&_(k,u.startTime-t),n=!1}}break t}finally{d=null,h=a,p=!1}n=void 0}}finally{n?E():O=!1}}}if("function"==typeof x)E=function(){x(P)};else if("undefined"!=typeof MessageChannel){var N=new MessageChannel,C=N.port2;N.port1.onmessage=P,E=function(){C.postMessage(null)}}else E=function(){m(P,0)};function _(t,n){S=m((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(t){switch(h){case 1:case 2:case 3:var e=3;break;default:e=h}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_requestPaint=function(){y=!0},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_scheduleCallback=function(t,i,a){var o=e.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?o+a:o,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:f++,callback:i,priorityLevel:t,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(t.sortIndex=a,n(l,t),null===r(c)&&t===r(l)&&(g?(b(S),S=-1):g=!0,_(k,a-o))):(t.sortIndex=s,n(c,t),v||p||(v=!0,O||(O=!0,E()))),t},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(t){var e=h;return function(){var n=h;h=e;try{return t.apply(this,arguments)}finally{h=n}}}},459:(t,e,n)=>{var r=n(6036),i=n(9509),a=n(2120),o=n(3904);t.exports=function t(e,n,s,u){var c=e.children(n),l=e.node(n),f=l?l.borderLeft:void 0,d=l?l.borderRight:void 0,h={};f&&(c=r.filter(c,(function(t){return t!==f&&t!==d})));var p=i(e,c);r.forEach(p,(function(n){if(e.children(n.v).length){var i=t(e,n.v,s,u);h[n.v]=i,r.has(i,"barycenter")&&(a=n,o=i,r.isUndefined(a.barycenter)?(a.barycenter=o.barycenter,a.weight=o.weight):(a.barycenter=(a.barycenter*a.weight+o.barycenter*o.weight)/(a.weight+o.weight),a.weight+=o.weight))}var a,o}));var v=a(p,s);!function(t,e){r.forEach(t,(function(t){t.vs=r.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(v,h);var g=o(v,u);if(f&&(g.vs=r.flatten([f,g.vs,d],!0),e.predecessors(f).length)){var y=e.node(e.predecessors(f)[0]),m=e.node(e.predecessors(d)[0]);r.has(g,"barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+y.order+m.order)/(g.weight+2),g.weight+=2}return g}},477:(t,e,n)=>{var r=n(334),i=n(1693);t.exports=function(t,e){var n=-1,a=i(t)?Array(t.length):[];return r(t,(function(t,r,i){a[++n]=e(t,r,i)})),a}},486:t=>{t.exports=function(t){return this.__data__.get(t)}},498:(t,e,n)=>{var r=n(5675),i=n(6558),a=n(8873),o=n(4604),s=n(3818),u=n(4359),c=n(7950),l="[object Map]",f="[object Promise]",d="[object Set]",h="[object WeakMap]",p="[object DataView]",v=c(r),g=c(i),y=c(a),m=c(o),b=c(s),x=u;(r&&x(new r(new ArrayBuffer(1)))!=p||i&&x(new i)!=l||a&&x(a.resolve())!=f||o&&x(new o)!=d||s&&x(new s)!=h)&&(x=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case v:return p;case g:return l;case y:return f;case m:return d;case b:return h}return e}),t.exports=x},504:t=>{var e=/\w*$/;t.exports=function(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}},519:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},546:(t,e,n)=>{var r=n(6036),i=n(1882),a=n(4206).Graph;t.exports={debugOrdering:function(t){var e=i.buildLayerMatrix(t),n=new a({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),r.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),r.forEach(e,(function(t,e){var i="layer"+e;n.setNode(i,{rank:"same"}),r.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}}},558:(t,e,n)=>{t.exports={components:n(9360),dijkstra:n(2886),dijkstraAll:n(7880),findCycles:n(9327),floydWarshall:n(1993),isAcyclic:n(4185),postorder:n(3328),preorder:n(4071),prim:n(4248),tarjan:n(7968),topsort:n(4073)}},591:(t,e,n)=>{var r=n(5711);t.exports={Graph:r.Graph,json:n(4545),alg:n(558),version:r.version}},756:t=>{t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},911:(t,e,n)=>{var r=n(9776),i=n(4542),a=n(2920),o=n(2705),s=n(7560),u=n(4620),c=n(6095);t.exports=function t(e,n,l,f,d){e!==n&&a(n,(function(a,u){if(d||(d=new r),s(a))o(e,n,u,l,t,f,d);else{var h=f?f(c(e,u),a,u+"",e,n,d):void 0;void 0===h&&(h=a),i(e,u,h)}}),u)}},943:(t,e,n)=>{var r=n(4359),i=n(6223);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},952:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,r,a,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,a||t,o),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function o(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},s.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,i,a,o){var s=n?n+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,i),!0;case 5:return l.fn.call(l.context,e,r,i,a),!0;case 6:return l.fn.call(l.context,e,r,i,a,o),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var d,h=l.length;for(c=0;c<h;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,r);break;case 4:l[c].fn.call(l[c].context,e,r,i);break;default:if(!u)for(d=1,u=new Array(f-1);d<f;d++)u[d-1]=arguments[d];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,r,i){var a=n?n+t:t;if(!this._events[a])return this;if(!e)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==e||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[a]=1===c.length?c[0]:c:o(this,a)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&o(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s},957:t=>{t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},981:(t,e,n)=>{var r=n(4158),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},1001:(t,e,n)=>{"use strict";var r=n(6036),i=n(4668),a=n(4317).slack,o=n(4317).longestPath,s=n(4206).alg.preorder,u=n(4206).alg.postorder,c=n(1882).simplify;function l(t){t=c(t),o(t);var e,n=i(t);for(h(n),f(n,t);e=v(n);)y(n,t,e,g(n,t,e))}function f(t,e){var n=u(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=d(t,e,n)}(t,e,n)}))}function d(t,e,n){var i=t.node(n).parent,a=!0,o=e.edge(n,i),s=0;return o||(a=!1,o=e.edge(i,n)),s=o.weight,r.forEach(e.nodeEdges(n),(function(r){var o,u,c=r.v===n,l=c?r.w:r.v;if(l!==i){var f=c===a,d=e.edge(r).weight;if(s+=f?d:-d,o=n,u=l,t.hasEdge(o,u)){var h=t.edge(n,l).cutvalue;s+=f?-h:h}}})),s}function h(t,e){arguments.length<2&&(e=t.nodes()[0]),p(t,{},1,e)}function p(t,e,n,i,a){var o=n,s=t.node(i);return e[i]=!0,r.forEach(t.neighbors(i),(function(a){r.has(e,a)||(n=p(t,e,n,a,i))})),s.low=o,s.lim=n++,a?s.parent=a:delete s.parent,n}function v(t){return r.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function g(t,e,n){var i=n.v,o=n.w;e.hasEdge(i,o)||(i=n.w,o=n.v);var s=t.node(i),u=t.node(o),c=s,l=!1;s.lim>u.lim&&(c=u,l=!0);var f=r.filter(e.edges(),(function(e){return l===m(0,t.node(e.v),c)&&l!==m(0,t.node(e.w),c)}));return r.minBy(f,(function(t){return a(e,t)}))}function y(t,e,n,i){var a=n.v,o=n.w;t.removeEdge(a,o),t.setEdge(i.v,i.w,{}),h(t),f(t,e),function(t,e){var n=r.find(t.nodes(),(function(t){return!e.node(t).parent})),i=s(t,n);i=i.slice(1),r.forEach(i,(function(n){var r=t.node(n).parent,i=e.edge(n,r),a=!1;i||(i=e.edge(r,n),a=!0),e.node(n).rank=e.node(r).rank+(a?i.minlen:-i.minlen)}))}(t,e)}function m(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=l,l.initLowLimValues=h,l.initCutValues=f,l.calcCutValue=d,l.leaveEdge=v,l.enterEdge=g,l.exchangeEdges=y},1002:t=>{t.exports=function(t){return this.__data__.has(t)}},1011:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},1079:t=>{t.exports=function(t){return function(){return t}}},1110:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},1126:(t,e,n)=>{var r=n(35);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},1152:(t,e,n)=>{var r=n(6036),i=n(1882);function a(t,e,n,r,a,o){var s={width:0,height:0,rank:o,borderType:e},u=a[e][o-1],c=i.addDummyNode(t,"border",s,n);a[e][o]=c,t.setParent(c,r),u&&t.setEdge(u,c,{weight:1})}t.exports=function(t){r.forEach(t.children(),(function e(n){var i=t.children(n),o=t.node(n);if(i.length&&r.forEach(i,e),r.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var s=o.minRank,u=o.maxRank+1;s<u;++s)a(t,"borderLeft","_bl",n,o,s),a(t,"borderRight","_br",n,o,s)}}))}},1167:t=>{t.exports=function(t,e,n){for(var r=-1,i=t.length,a=e.length,o={};++r<i;){var s=r<a?e[r]:void 0;n(o,t[r],s)}return o}},1173:(t,e,n)=>{"use strict";var r=n(6036),i=n(1318);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?i(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},i={};return r.forEach(t.nodes(),(function a(o){r.has(i,o)||(i[o]=!0,n[o]=!0,r.forEach(t.outEdges(o),(function(t){r.has(n,t.w)?e.push(t):a(t.w)})),delete n[o])})),e}(t);r.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))}))},undo:function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}}},1251:(t,e,n)=>{var r=n(9791).default,i=n(7404);t.exports=function(t,e){if(e&&("object"==r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},1263:(t,e,n)=>{var r=n(3651),i=n(4265),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(t){return null==t?[]:(t=Object(t),r(o(t),(function(e){return a.call(t,e)})))}:i;t.exports=s},1266:(t,e,n)=>{var r=n(1693),i=n(6223);t.exports=function(t){return i(t)&&r(t)}},1302:(t,e,n)=>{var r=n(6036),i=n(1882);function a(t,e,n,o,s,u,c){var l=t.children(c);if(l.length){var f=i.addBorderNode(t,"_bt"),d=i.addBorderNode(t,"_bb"),h=t.node(c);t.setParent(f,c),h.borderTop=f,t.setParent(d,c),h.borderBottom=d,r.forEach(l,(function(r){a(t,e,n,o,s,u,r);var i=t.node(r),l=i.borderTop?i.borderTop:r,h=i.borderBottom?i.borderBottom:r,p=i.borderTop?o:2*o,v=l!==h?1:s-u[c]+1;t.setEdge(f,l,{weight:p,minlen:v,nestingEdge:!0}),t.setEdge(h,d,{weight:p,minlen:v,nestingEdge:!0})})),t.parent(c)||t.setEdge(e,f,{weight:0,minlen:s+u[c]})}else c!==e&&t.setEdge(e,c,{weight:0,minlen:n})}t.exports={run:function(t){var e=i.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};function n(i,a){var o=t.children(i);o&&o.length&&r.forEach(o,(function(t){n(t,a+1)})),e[i]=a}return r.forEach(t.children(),(function(t){n(t,1)})),e}(t),o=r.max(r.values(n))-1,s=2*o+1;t.graph().nestingRoot=e,r.forEach(t.edges(),(function(e){t.edge(e).minlen*=s}));var u=function(t){return r.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;r.forEach(t.children(),(function(r){a(t,e,s,u,o,n,r)})),t.graph().nodeRankFactor=s},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}}},1318:(t,e,n)=>{var r=n(6036),i=n(4206).Graph,a=n(1656);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new i,o=0,s=0;r.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),r.forEach(t.edges(),(function(t){var r=n.edge(t.v,t.w)||0,i=e(t),a=r+i;n.setEdge(t.v,t.w,a),s=Math.max(s,n.node(t.v).out+=i),o=Math.max(o,n.node(t.w).in+=i)}));var c=r.range(s+o+3).map((function(){return new a})),l=o+1;return r.forEach(n.nodes(),(function(t){u(c,l,n.node(t))})),{graph:n,buckets:c,zeroIdx:l}}(t,e||o),c=function(t,e,n){for(var r,i=[],a=e[e.length-1],o=e[0];t.nodeCount();){for(;r=o.dequeue();)s(t,e,n,r);for(;r=a.dequeue();)s(t,e,n,r);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(r=e[u].dequeue()){i=i.concat(s(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,(function(e){return t.outEdges(e.v,e.w)})),!0)};var o=r.constant(1);function s(t,e,n,i,a){var o=a?[]:void 0;return r.forEach(t.inEdges(i.v),(function(r){var i=t.edge(r),s=t.node(r.v);a&&o.push({v:r.v,w:r.w}),s.out-=i,u(e,n,s)})),r.forEach(t.outEdges(i.v),(function(r){var i=t.edge(r),a=r.w,o=t.node(a);o.in-=i,u(e,n,o)})),t.removeNode(i.v),o}function u(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},1326:(t,e,n)=>{var r=n(1758),i=n(7788),a=n(1751),o=n(8812);t.exports=function(t){return a(t)?r(o(t)):i(t)}},1340:(t,e,n)=>{var r=n(4359),i=n(8084),a=n(6223),o=Function.prototype,s=Object.prototype,u=o.toString,c=s.hasOwnProperty,l=u.call(Object);t.exports=function(t){if(!a(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},1362:(t,e,n)=>{var r=n(2681)(n(2150));t.exports=r},1413:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},1417:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},1543:(t,e,n)=>{var r=n(3130),i=n(2823),a=n(1693);t.exports=function(t){return a(t)?r(t):i(t)}},1614:(t,e,n)=>{var r=n(8979),i=n(2432);t.exports=function(t,e){return r(t,e,(function(e,n){return i(t,n)}))}},1618:(t,e,n)=>{function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(5969),a=n(6153),o=n(2552),s=n(2755),u=function(t){function e(){return t.apply(this,arguments)||this}return i=t,(n=e).prototype=Object.create(i.prototype),n.prototype.constructor=n,r(n,i),e.prototype.execute=function(){return o(this.rootNode,this.options,a)},e;var n,i}(i),c={};t.exports=function(t,e){return e=s.assign({},c,e),new u(t,e).execute()}},1643:(t,e,n)=>{var r=n(5543),i=n(1543);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var a=e[n],o=t[a];e[n]=[a,o,r(o)]}return e}},1656:t=>{function e(){var t={};t._next=t._prev=t,this._sentinel=t}function n(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function r(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=e,e.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return n(e),e},e.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&n(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},e.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,r)),n=n._prev;return"["+t.join(", ")+"]"}},1693:(t,e,n)=>{var r=n(5179),i=n(9703);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},1710:(t,e,n)=>{t=n.nmd(t);var r=n(9107),i=e&&!e.nodeType&&e,a=i&&t&&!t.nodeType&&t,o=a&&a.exports===i&&r.process,s=function(){try{return a&&a.require&&a.require("util").types||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=s},1734:(t,e,n)=>{var r=n(3342),i=n(6757),a=n(4814);t.exports=function(t){return i(t)?a(t):r(t)}},1742:(t,e,n)=>{var r;try{r={clone:n(3722),constant:n(1079),each:n(9054),filter:n(7937),has:n(1763),isArray:n(8962),isEmpty:n(4350),isFunction:n(5179),isUndefined:n(7791),keys:n(1543),map:n(349),reduce:n(6309),size:n(9558),transform:n(7951),union:n(3216),values:n(5181)}}catch(t){}r||(r=window._),t.exports=r},1751:(t,e,n)=>{var r=n(8962),i=n(943),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||o.test(t)||!a.test(t)||null!=e&&t in Object(e)}},1758:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},1763:(t,e,n)=>{var r=n(1891),i=n(3919);t.exports=function(t,e){return null!=t&&i(t,e,r)}},1846:(t,e,n)=>{var r=n(4359),i=n(9703),a=n(6223),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return a(t)&&i(t.length)&&!!o[r(t)]}},1863:(t,e,n)=>{var r=n(223),i=n(7560),a=n(943),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(a(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=s.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):o.test(t)?NaN:+t}},1869:(t,e,n)=>{"use strict";n.r(e),n.d(e,{isAnyArray:()=>i});var r=Object.prototype.toString;function i(t){var e=r.call(t);return e.endsWith("Array]")&&!e.includes("Big")}},1882:(t,e,n)=>{"use strict";var r=n(6036),i=n(4206).Graph;function a(t,e,n,i){var a;do{a=r.uniqueId(i)}while(t.hasNode(a));return n.dummy=e,t.setNode(a,n),a}function o(t){return r.max(r.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n})))}t.exports={addDummyNode:a,simplify:function(t){var e=(new i).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e},asNonCompoundGraph:function(t){var e=new i({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,a=t.y,o=e.x-i,s=e.y-a,u=t.width/2,c=t.height/2;if(!o&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*u>Math.abs(o)*c?(s<0&&(c=-c),n=c*o/s,r=c):(o<0&&(u=-u),n=u,r=u*s/o),{x:i+n,y:a+r}},buildLayerMatrix:function(t){var e=r.map(r.range(o(t)+1),(function(){return[]}));return r.forEach(t.nodes(),(function(n){var i=t.node(n),a=i.rank;r.isUndefined(a)||(e[a][i.order]=n)})),e},normalizeRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank})));r.forEach(t.nodes(),(function(n){var i=t.node(n);r.has(i,"rank")&&(i.rank-=e)}))},removeEmptyRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];r.forEach(t.nodes(),(function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)}));var i=0,a=t.graph().nodeRankFactor;r.forEach(n,(function(e,n){r.isUndefined(e)&&n%a!==0?--i:i&&r.forEach(e,(function(e){t.node(e).rank+=i}))}))},addBorderNode:function(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),a(t,"border",i,e)},maxRank:o,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},1888:(t,e,n)=>{var r=n(4666);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},1889:(t,e,n)=>{var r=n(9948),i=n(68);t.exports=function(t,e){return r(t,i(t),e)}},1891:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t,n){return null!=t&&e.call(t,n)}},1896:t=>{t.exports=function(t){return function(e){return t(e)}}},1906:t=>{t.exports=function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")},t.exports.__esModule=!0,t.exports.default=t.exports},1993:(t,e,n)=>{var r=n(1742);t.exports=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach((function(t){r[t]={},r[t][t]={distance:0},i.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var i=n.v===t?n.w:n.v,a=e(n);r[t][i]={distance:a,predecessor:t}}))})),i.forEach((function(t){var e=r[t];i.forEach((function(n){var a=r[n];i.forEach((function(n){var r=a[t],i=e[n],o=a[n],s=r.distance+i.distance;s<o.distance&&(o.distance=s,o.predecessor=i.predecessor)}))}))})),r}(t,e||i,n||function(e){return t.outEdges(e)})};var i=r.constant(1)},2027:(t,e,n)=>{var r=n(6853),i=n(6223);t.exports=function t(e,n,a,o,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,a,o,t,s))}},2050:(t,e,n)=>{var r=n(6698)["__core-js_shared__"];t.exports=r},2099:(t,e,n)=>{var r=n(6682);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},2120:(t,e,n)=>{"use strict";var r=n(6036);t.exports=function(t,e){var n={};return r.forEach(t,(function(t,e){var i=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)})),r.forEach(e.edges(),(function(t){var e=n[t.v],i=n[t.w];r.isUndefined(e)||r.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){var n,i,a,o;e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&(i=e,a=0,o=0,(n=t).weight&&(a+=n.barycenter*n.weight,o+=n.weight),i.weight&&(a+=i.barycenter*i.weight,o+=i.weight),n.vs=i.vs.concat(n.vs),n.barycenter=a/o,n.weight=o,n.i=Math.min(i.i,n.i),i.merged=!0)}}function i(e){return function(n){n.in.push(e),0===--n.indegree&&t.push(n)}}for(;t.length;){var a=t.pop();e.push(a),r.forEach(a.in.reverse(),n(a)),r.forEach(a.out,i(a))}return r.map(r.filter(e,(function(t){return!t.merged})),(function(t){return r.pick(t,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(t){return!t.indegree})))}},2150:(t,e,n)=>{var r=n(2646),i=n(5434),a=n(7358),o=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var u=null==n?0:a(n);return u<0&&(u=o(s+u,0)),r(t,i(e,3),u)}},2194:(t,e,n)=>{"use strict";var r=n(6036),i=n(4295),a=n(9515),o=n(459),s=n(9207),u=n(5489),c=n(4206).Graph,l=n(1882);function f(t,e,n){return r.map(e,(function(e){return s(t,e,n)}))}function d(t,e){var n=new c;r.forEach(t,(function(t){var i=t.graph().root,a=o(t,i,n,e);r.forEach(a.vs,(function(e,n){t.node(e).order=n})),u(t,n,a.vs)}))}function h(t,e){r.forEach(e,(function(e){r.forEach(e,(function(e,n){t.node(e).order=n}))}))}t.exports=function(t){var e=l.maxRank(t),n=f(t,r.range(1,e+1),"inEdges"),o=f(t,r.range(e-1,-1,-1),"outEdges"),s=i(t);h(t,s);for(var u,c=Number.POSITIVE_INFINITY,p=0,v=0;v<4;++p,++v){d(p%2?n:o,p%4>=2),s=l.buildLayerMatrix(t);var g=a(t,s);g<c&&(v=0,u=r.cloneDeep(s),c=g)}h(t,u)}},2323:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},2397:(t,e,n)=>{var r=n(957),i=n(8662);t.exports=function t(e,n,a,o,s){var u=-1,c=e.length;for(a||(a=i),s||(s=[]);++u<c;){var l=e[u];n>0&&a(l)?n>1?t(l,n-1,a,o,s):r(s,l):o||(s[s.length]=l)}return s}},2418:t=>{t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},2432:(t,e,n)=>{var r=n(4528),i=n(3919);t.exports=function(t,e){return null!=t&&i(t,e,r)}},2443:t=>{t.exports=function(t,e){return t<e}},2547:(t,e,n)=>{var r,i=n(2050),a=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!a&&a in t}},2552:(t,e,n)=>{var r=n(7874),i=["LR","RL","TB","BT","H","V"],a=["LR","RL","H"],o=i[0];t.exports=function(t,e,n){var s=e.direction||o;if(e.isHorizontal=function(t){return a.indexOf(t)>-1}(s),s&&-1===i.indexOf(s))throw new TypeError("Invalid direction: "+s);if(s===i[0])n(t,e);else if(s===i[1])n(t,e),t.right2left();else if(s===i[2])n(t,e);else if(s===i[3])n(t,e),t.bottom2top();else if(s===i[4]||s===i[5]){var u=r(t,e),c=u.left,l=u.right;n(c,e),n(l,e),e.isHorizontal?c.right2left():c.bottom2top(),l.translate(c.x-l.x,c.y-l.y),t.x=c.x,t.y=l.y;var f=t.getBoundingBox();e.isHorizontal?f.top<0&&t.translate(0,-f.top):f.left<0&&t.translate(-f.left,0)}var d=e.fixedRoot;return void 0===d&&(d=!0),d&&t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),function(t,e){if(e.radial){var n=e.isHorizontal?["x","y"]:["y","x"],r=n[0],i=n[1],a={x:1/0,y:1/0},o={x:-1/0,y:-1/0},s=0;t.DFTraverse((function(t){s++;var e=t.x,n=t.y;a.x=Math.min(a.x,e),a.y=Math.min(a.y,n),o.x=Math.max(o.x,e),o.y=Math.max(o.y,n)}));var u=o[i]-a[i];if(0===u)return;var c=2*Math.PI/s;t.DFTraverse((function(e){var n=(e[i]-a[i])/u*(2*Math.PI-c)+c,o=e[r]-t[r];e.x=Math.cos(n)*o,e.y=Math.sin(n)*o}))}}(t,e),t}},2569:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},2613:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},2626:t=>{t.exports=function(t){return t!=t}},2646:t=>{t.exports=function(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}},2679:(t,e,n)=>{var r=n(9838);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},2681:(t,e,n)=>{var r=n(5434),i=n(1693),a=n(1543);t.exports=function(t){return function(e,n,o){var s=Object(e);if(!i(e)){var u=r(n,3);e=a(e),n=function(t){return u(s[t],t,s)}}var c=t(e,n,o);return c>-1?s[u?e[c]:c]:void 0}}},2705:(t,e,n)=>{var r=n(4542),i=n(4567),a=n(8972),o=n(2742),s=n(272),u=n(5167),c=n(8962),l=n(1266),f=n(9217),d=n(5179),h=n(7560),p=n(1340),v=n(6646),g=n(6095),y=n(5235);t.exports=function(t,e,n,m,b,x,w){var k=g(t,n),E=g(e,n),O=w.get(E);if(O)r(t,n,O);else{var S=x?x(k,E,n+"",t,e,w):void 0,M=void 0===S;if(M){var T=c(E),A=!T&&f(E),P=!T&&!A&&v(E);S=E,T||A||P?c(k)?S=k:l(k)?S=o(k):A?(M=!1,S=i(E,!0)):P?(M=!1,S=a(E,!0)):S=[]:p(E)||u(E)?(S=k,u(k)?S=y(k):h(k)&&!d(k)||(S=s(E))):M=!1}M&&(w.set(E,S),b(S,E,m,x,w),w.delete(E)),r(t,n,S)}}},2707:(t,e,n)=>{var r=n(1417),i=n(1693),a=n(8468),o=n(7560);t.exports=function(t,e,n){if(!o(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&a(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},2742:t=>{t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},2755:t=>{t.exports={assign:Object.assign,getHeight:function(t,e,n,r){return void 0===r&&(r="height"),"center"===n?(t[r]+e[r])/2:t.height}}},2812:(t,e,n)=>{var r=n(1126),i=n(7444),a=n(504),o=n(4537),s=n(8972);t.exports=function(t,e,n){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return a(t);case"[object Symbol]":return o(t)}}},2823:(t,e,n)=>{var r=n(1110),i=n(6229),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},2828:(t,e,n)=>{var r=n(3275);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},2831:(t,e,n)=>{var r=n(2755);t.exports=function(t,e,n,i){var a=null;t.eachNode((function(t){!function(t,e,n,i,a){var o=("function"==typeof n?n(t):n)*t.depth;if(!i)try{if(t.id===t.parent.children[0].id)return t.x+=o,void(t.y=e?e.y:0)}catch(t){}if(t.x+=o,e){if(t.y=e.y+r.getHeight(e,t,a),e.parent&&t.parent.id!==e.parent.id){var s=e.parent,u=s.y+r.getHeight(s,t,a);t.y=u>t.y?u:t.y}}else t.y=0}(t,a,e,n,i),a=t}))}},2848:(t,e,n)=>{var r=n(5818);t.exports=function(t){return r(t,5)}},2886:(t,e,n)=>{var r=n(1742),i=n(6692);t.exports=function(t,e,n,r){return function(t,e,n,r){var a,o,s={},u=new i,c=function(t){var e=t.v!==a?t.v:t.w,r=s[e],i=n(t),c=o.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);c<r.distance&&(r.distance=c,r.predecessor=a,u.decrease(e,c))};for(t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:n},u.add(t,n)}));u.size()>0&&(a=u.removeMin(),(o=s[a]).distance!==Number.POSITIVE_INFINITY);)r(a).forEach(c);return s}(t,String(e),n||a,r||function(e){return t.outEdges(e)})};var a=r.constant(1)},2920:(t,e,n)=>{var r=n(4096)();t.exports=r},2942:(t,e,n)=>{var r=n(9684),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var a=arguments,o=-1,s=i(a.length-e,0),u=Array(s);++o<s;)u[o]=a[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=a[o];return c[e]=n(u),r(t,this,c)}}},2962:(t,e,n)=>{var r=n(3441)();t.exports=r},2988:(t,e,n)=>{var r=n(3936);t.exports=function(t){return r(this,t).get(t)}},2999:(t,e,n)=>{var r=n(1079),i=n(4680),a=n(4513),o=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:a;t.exports=o},3114:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var n=t.length,r=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},3130:(t,e,n)=>{var r=n(7173),i=n(5167),a=n(8962),o=n(9217),s=n(8468),u=n(6646),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=a(t),l=!n&&i(t),f=!n&&!l&&o(t),d=!n&&!l&&!f&&u(t),h=n||l||f||d,p=h?r(t.length,String):[],v=p.length;for(var g in t)!e&&!c.call(t,g)||h&&("length"==g||f&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,v))||p.push(g);return p}},3153:(t,e,n)=>{var r=n(5785),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(a,"$1"):n||t)})),e}));t.exports=o},3167:(t,e,n)=>{var r=n(85),i=n(9942),a=n(5434);t.exports=function(t,e){var n={};return e=a(e,3),i(t,(function(t,i,a){r(n,i,e(t,i,a))})),n}},3191:(t,e,n)=>{var r=n(7953);t.exports=function(t,e){return t.get(r(t,e))},t.exports.__esModule=!0,t.exports.default=t.exports},3216:(t,e,n)=>{var r=n(2397),i=n(9797),a=n(6362),o=n(1266),s=i((function(t){return a(r(t,1,o,!0))}));t.exports=s},3225:(t,e,n)=>{var r=n(4513);t.exports=function(t){return"function"==typeof t?t:r}},3241:(t,e,n)=>{function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(5969),a=n(4016),o=n(2552),s=n(2755),u=function(t){function e(){return t.apply(this,arguments)||this}return i=t,(n=e).prototype=Object.create(i.prototype),n.prototype.constructor=n,r(n,i),e.prototype.execute=function(){return o(this.rootNode,this.options,a)},e;var n,i}(i),c={};t.exports=function(t,e){return e=s.assign({},c,e),new u(t,e).execute()}},3275:(t,e,n)=>{var r=n(9791).default,i=n(9542);t.exports=function(t){var e=i(t,"string");return"symbol"==r(e)?e:e+""},t.exports.__esModule=!0,t.exports.default=t.exports},3328:(t,e,n)=>{var r=n(4309);t.exports=function(t,e){return r(t,e,"post")}},3342:(t,e,n)=>{var r=n(1758)("length");t.exports=r},3441:(t,e,n)=>{var r=n(5058),i=n(2707),a=n(4121);t.exports=function(t){return function(e,n,o){return o&&"number"!=typeof o&&i(e,n,o)&&(n=o=void 0),e=a(e),void 0===n?(n=e,e=0):n=a(n),o=void 0===o?e<n?1:-1:a(o),r(e,n,o,t)}}},3448:(t,e,n)=>{var r=n(5405),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},3468:(t,e,n)=>{var r=n(7560),i=n(1110),a=n(6678),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return a(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&o.call(t,s))&&n.push(s);return n}},3512:(t,e,n)=>{var r=n(9838),i=n(2569),a=n(1002);function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,t.exports=o},3547:t=>{t.exports=function(){}},3563:(t,e,n)=>{var r=n(8421);t.exports=function(t,e,n){for(var i=-1,a=t.criteria,o=e.criteria,s=a.length,u=n.length;++i<s;){var c=r(a[i],o[i]);if(c)return i>=u?c:c*("desc"==n[i]?-1:1)}return t.index-e.index}},3637:(t,e,n)=>{t.exports={graphlib:n(4206),layout:n(95),debug:n(546),util:{time:n(1882).time,notime:n(1882).notime},version:n(5781)}},3651:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}},3663:(t,e,n)=>{var r=n(3791);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},3722:(t,e,n)=>{var r=n(5818);t.exports=function(t){return r(t,4)}},3743:(t,e,n)=>{var r=n(2099);t.exports=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}},t.exports.__esModule=!0,t.exports.default=t.exports},3791:(t,e,n)=>{var r=n(5850),i=n(8812);t.exports=function(t,e){for(var n=0,a=(e=r(e,t)).length;null!=t&&n<a;)t=t[i(e[n++])];return n&&n==a?t:void 0}},3806:t=>{t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},3818:(t,e,n)=>{var r=n(319)(n(6698),"WeakMap");t.exports=r},3904:(t,e,n)=>{var r=n(6036),i=n(1882);function a(t,e,n){for(var i;e.length&&(i=r.last(e)).i<=n;)e.pop(),t.push(i.vs),n++;return n}t.exports=function(t,e){var n,o=i.partition(t,(function(t){return r.has(t,"barycenter")})),s=o.lhs,u=r.sortBy(o.rhs,(function(t){return-t.i})),c=[],l=0,f=0,d=0;s.sort((n=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:n?e.i-t.i:t.i-e.i})),d=a(c,u,d),r.forEach(s,(function(t){d+=t.vs.length,c.push(t.vs),l+=t.barycenter*t.weight,f+=t.weight,d=a(c,u,d)}));var h={vs:r.flatten(c,!0)};return f&&(h.barycenter=l/f,h.weight=f),h}},3906:t=>{t.exports=function(t){return this.__data__.has(t)}},3919:(t,e,n)=>{var r=n(5850),i=n(5167),a=n(8962),o=n(8468),s=n(9703),u=n(8812);t.exports=function(t,e,n){for(var c=-1,l=(e=r(e,t)).length,f=!1;++c<l;){var d=u(e[c]);if(!(f=null!=t&&n(t,d)))break;t=t[d]}return f||++c!=l?f:!!(l=null==t?0:t.length)&&s(l)&&o(d,l)&&(a(t)||i(t))}},3936:(t,e,n)=>{var r=n(383);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},4008:(t,e,n)=>{var r=n(3936);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},4016:(t,e,n)=>{var r=n(2755);function i(t,e){var n=0;return t.children.length?t.children.forEach((function(t){n+=i(t,e)})):n=t.height,t._subTreeSep=e.getSubTreeSep(t.data),t.totalHeight=Math.max(t.height,n)+2*t._subTreeSep,t.totalHeight}function a(t){var e=t.children,n=e.length;if(n){e.forEach((function(t){a(t)}));var r=e[0],i=e[n-1],o=i.y-r.y+i.height,s=0;if(e.forEach((function(t){s+=t.totalHeight})),o>t.height)t.y=r.y+o/2-t.height/2;else if(1!==e.length||t.height>s){var u=t.y+(t.height-o)/2-r.y;e.forEach((function(t){t.translate(0,u)}))}else t.y=(r.y+r.height/2+i.y+i.height/2)/2-t.height/2}}var o={getSubTreeSep:function(){return 0}};t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},o,e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse((function(t){t.x=t.parent.x+t.parent.width})),t.parent=null,i(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode((function(t){var e=t.children,n=e.length;if(n){var r=e[0];if(r.startY=t.startY+t._subTreeSep,1===n)r.y=t.y+t.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<n;i++){var a=e[i];a.startY=e[i-1].startY+e[i-1].totalHeight,a.y=a.startY+a.totalHeight/2-a.height/2}}}})),a(t)}},4040:(t,e,n)=>{var r=n(4158);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},4069:(t,e,n)=>{var r=n(270),i=n(5422),a=n(6558);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},4071:(t,e,n)=>{var r=n(4309);t.exports=function(t,e){return r(t,e,"pre")}},4073:(t,e,n)=>{var r=n(1742);function i(t){var e={},n={},i=[];if(r.each(t.sinks(),(function o(s){if(r.has(n,s))throw new a;r.has(e,s)||(n[s]=!0,e[s]=!0,r.each(t.predecessors(s),o),delete n[s],i.push(s))})),r.size(e)!==t.nodeCount())throw new a;return i}function a(){}t.exports=i,i.CycleException=a,a.prototype=new Error},4096:t=>{t.exports=function(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===n(a[u],u,a))break}return e}}},4121:(t,e,n)=>{var r=n(1863),i=1/0;t.exports=function(t){return t?(t=r(t))===i||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},4158:(t,e,n)=>{var r=n(1417);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},4185:(t,e,n)=>{var r=n(4073);t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},4198:(t,e,n)=>{var r=n(1693);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var a=n.length,o=e?a:-1,s=Object(n);(e?o--:++o<a)&&!1!==i(s[o],o,s););return n}}},4206:(t,e,n)=>{var r;try{r=n(591)}catch(t){}r||(r=window.graphlib),t.exports=r},4248:(t,e,n)=>{var r=n(1742),i=n(5527),a=n(6692);t.exports=function(t,e){var n,o=new i,s={},u=new a;function c(t){var r=t.v===n?t.w:t.v,i=u.priority(r);if(void 0!==i){var a=e(t);a<i&&(s[r]=n,u.decrease(r,a))}}if(0===t.nodeCount())return o;r.each(t.nodes(),(function(t){u.add(t,Number.POSITIVE_INFINITY),o.setNode(t)})),u.decrease(t.nodes()[0],0);for(var l=!1;u.size()>0;){if(n=u.removeMin(),r.has(s,n))o.setEdge(n,s[n]);else{if(l)throw new Error("Input graph is not connected: "+t);l=!0}t.nodeEdges(n).forEach(c)}return o}},4265:t=>{t.exports=function(){return[]}},4295:(t,e,n)=>{"use strict";var r=n(6036);t.exports=function(t){var e={},n=r.filter(t.nodes(),(function(e){return!t.children(e).length})),i=r.max(r.map(n,(function(e){return t.node(e).rank}))),a=r.map(r.range(i+1),(function(){return[]})),o=r.sortBy(n,(function(e){return t.node(e).rank}));return r.forEach(o,(function n(i){if(!r.has(e,i)){e[i]=!0;var o=t.node(i);a[o.rank].push(i),r.forEach(t.successors(i),n)}})),a}},4309:(t,e,n)=>{var r=n(1742);function i(t,e,n,a,o,s){r.has(a,e)||(a[e]=!0,n||s.push(e),r.each(o(e),(function(e){i(t,e,n,a,o,s)})),n&&s.push(e))}t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var a=(t.isDirected()?t.successors:t.neighbors).bind(t),o=[],s={};return r.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);i(t,e,"post"===n,s,a,o)})),o}},4317:(t,e,n)=>{"use strict";var r=n(6036);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),(function n(i){var a=t.node(i);if(r.has(e,i))return a.rank;e[i]=!0;var o=r.min(r.map(t.outEdges(i),(function(e){return n(e.w)-t.edge(e).minlen})));return o!==Number.POSITIVE_INFINITY&&null!=o||(o=0),a.rank=o}))},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},4336:(t,e,n)=>{var r=n(2999),i=n(9824)(r);t.exports=i},4350:(t,e,n)=>{var r=n(2823),i=n(498),a=n(5167),o=n(8962),s=n(1693),u=n(9217),c=n(1110),l=n(6646),f=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(o(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||l(t)||a(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(f.call(t,n))return!1;return!0}},4359:(t,e,n)=>{var r=n(6014),i=n(9858),a=n(8529),o=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?i(t):a(t)}},4442:(t,e,n)=>{var r=n(5422),i=n(6558),a=n(9838);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(t,e),this.size=n.size,this}},4513:t=>{t.exports=function(t){return t}},4528:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},4537:(t,e,n)=>{var r=n(6014),i=r?r.prototype:void 0,a=i?i.valueOf:void 0;t.exports=function(t){return a?Object(a.call(t)):{}}},4542:(t,e,n)=>{var r=n(85),i=n(1417);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},4545:(t,e,n)=>{var r=n(1742),i=n(5527);function a(t){return r.map(t.nodes(),(function(e){var n=t.node(e),i=t.parent(e),a={v:e};return r.isUndefined(n)||(a.value=n),r.isUndefined(i)||(a.parent=i),a}))}function o(t){return r.map(t.edges(),(function(e){var n=t.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(n)||(i.value=n),i}))}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:a(t),edges:o(t)};return r.isUndefined(t.graph())||(e.value=r.clone(t.graph())),e},read:function(t){var e=new i(t.options).setGraph(t.value);return r.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),r.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}}},4567:(t,e,n)=>{t=n.nmd(t);var r=n(6698),i=e&&!e.nodeType&&e,a=i&&t&&!t.nodeType&&t,o=a&&a.exports===i?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}},4604:(t,e,n)=>{var r=n(319)(n(6698),"Set");t.exports=r},4620:(t,e,n)=>{var r=n(3130),i=n(3468),a=n(1693);t.exports=function(t){return a(t)?r(t,!0):i(t)}},4629:(t,e,n)=>{"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=n(8514)},4666:(t,e,n)=>{var r=n(2646),i=n(2626),a=n(3806);t.exports=function(t,e,n){return e==e?a(t,e,n):r(t,i,n)}},4668:(t,e,n)=>{"use strict";var r=n(6036),i=n(4206).Graph,a=n(4317).slack;function o(t,e){return r.forEach(t.nodes(),(function n(i){r.forEach(e.nodeEdges(i),(function(r){var o=r.v,s=i===o?r.w:o;t.hasNode(s)||a(e,r)||(t.setNode(s,{}),t.setEdge(i,s,{}),n(s))}))})),t.nodeCount()}function s(t,e){return r.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return a(e,n)}))}function u(t,e,n){r.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}t.exports=function(t){var e,n,r=new i({directed:!1}),c=t.nodes()[0],l=t.nodeCount();for(r.setNode(c,{});o(r,t)<l;)e=s(r,t),n=r.hasNode(e.v)?a(t,e):-a(t,e),u(r,t,n);return r}},4680:(t,e,n)=>{var r=n(319),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},4812:t=>{t.exports=function(t,e){return t.has(e)}},4814:t=>{var e="\\ud800-\\udfff",n="["+e+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",a="[^"+e+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")?",c="[\\ufe0e\\ufe0f]?",l=c+u+"(?:\\u200d(?:"+[a,o,s].join("|")+")"+c+u+")*",f="(?:"+[a+r+"?",r,o,s,n].join("|")+")",d=RegExp(i+"(?="+i+")|"+f+l,"g");t.exports=function(t){for(var e=d.lastIndex=0;d.test(t);)++e;return e}},4840:(t,e,n)=>{var r=n(9791).default;function i(){"use strict";t.exports=i=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},a=Object.prototype,o=a.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(t,e,n,r){return Object.defineProperty(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r})}try{f({},"")}catch(e){f=function(t,e,n){return t[e]=n}}function d(t,n,r,i){var a=n&&n.prototype instanceof v?n:v,o=Object.create(a.prototype);return f(o,"_invoke",function(t,n,r){var i=1;return function(a,o){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=O(s,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===i)throw i=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=3;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?4:2,c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=4,r.method="throw",r.arg=c.arg)}}}(t,r,new T(i||[])),!0),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=d;var p={};function v(){}function g(){}function y(){}var m={};f(m,u,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(A([])));x&&x!==a&&o.call(x,u)&&(m=x);var w=y.prototype=v.prototype=Object.create(m);function k(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,a,s,u){var c=h(t[i],t,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&o.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,u)}))}u(c.arg)}var i;f(this,"_invoke",(function(t,r){function a(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(a,a):a()}),!0)}function O(t,n){var r=n.method,i=t.i[r];if(i===e)return n.delegate=null,"throw"===r&&t.i.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var a=h(i,t.i,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,p;var o=a.arg;return o?o.done?(n[t.r]=o.value,n.next=t.n,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function S(t){this.tryEntries.push(t)}function M(t){var n=t[4]||{};n.type="normal",n.arg=e,t[4]=n}function T(t){this.tryEntries=[[-1]],t.forEach(S,this),this.reset(!0)}function A(t){if(null!=t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(r(t)+" is not iterable")}return g.prototype=y,f(w,"constructor",y),f(y,"constructor",g),g.displayName=f(y,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,f(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},n.awrap=function(t){return{__await:t}},k(E.prototype),f(E.prototype,c,(function(){return this})),n.AsyncIterator=E,n.async=function(t,e,r,i,a){void 0===a&&(a=Promise);var o=new E(d(t,e,r,i),a);return n.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(w),f(w,l,"Generator"),f(w,u,(function(){return this})),f(w,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}},n.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e){o.type="throw",o.arg=t,n.next=e}for(var i=n.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return r("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=e,r(u),!0;if(s<c)return r(c),!1}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var i=r;break}}i&&("break"===t||"continue"===t)&&i[0]<=e&&e<=i[2]&&(i=null);var a=i?i[4]:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i[2],p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[2]===t)return this.complete(n[4],n[3]),M(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]===t){var r=n[4];if("throw"===r.type){var i=r.arg;M(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={i:A(t),r:n,n:r},"next"===this.method&&(this.arg=e),p}},n}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},4857:(t,e,n)=>{var r=n(5559),i=0;t.exports=function(t){var e=++i;return r(t)+e}},4968:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},4983:t=>{t.exports=function(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}},5025:(t,e,n)=>{"use strict";var r=n(6036);function i(t){r.forEach(t.nodes(),(function(e){a(t.node(e))})),r.forEach(t.edges(),(function(e){a(t.edge(e))}))}function a(t){var e=t.width;t.width=t.height,t.height=e}function o(t){t.y=-t.y}function s(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||i(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),(function(e){o(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,o),r.has(n,"y")&&o(n)}))}(t),"lr"!==e&&"rl"!==e||(function(t){r.forEach(t.nodes(),(function(e){s(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,s),r.has(n,"x")&&s(n)}))}(t),i(t))}}},5058:t=>{var e=Math.ceil,n=Math.max;t.exports=function(t,r,i,a){for(var o=-1,s=n(e((r-t)/(i||1)),0),u=Array(s);s--;)u[a?s:++o]=t,t+=i;return u}},5096:(t,e,n)=>{var r=n(1614),i=n(7643)((function(t,e){return null==t?{}:r(t,e)}));t.exports=i},5143:(t,e,n)=>{var r=n(8729);t.exports=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports},5157:t=>{t.exports=function(t,e,n,r,i){return i(t,(function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)})),n}},5167:(t,e,n)=>{var r=n(5967),i=n(6223),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&o.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},5179:(t,e,n)=>{var r=n(4359),i=n(7560);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},5181:(t,e,n)=>{var r=n(381),i=n(1543);t.exports=function(t){return null==t?[]:r(t,i(t))}},5235:(t,e,n)=>{var r=n(9948),i=n(4620);t.exports=function(t){return r(t,i(t))}},5248:(t,e,n)=>{"use strict";var r=n(4317).longestPath,i=n(4668),a=n(1001);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":default:!function(t){a(t)}(t);break;case"tight-tree":!function(t){r(t),i(t)}(t);break;case"longest-path":o(t)}};var o=r},5330:(t,e,n)=>{var r=n(5965),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,o,s){var u=1&n,c=r(t),l=c.length;if(l!=r(e).length&&!u)return!1;for(var f=l;f--;){var d=c[f];if(!(u?d in e:i.call(e,d)))return!1}var h=s.get(t),p=s.get(e);if(h&&p)return h==e&&p==t;var v=!0;s.set(t,e),s.set(e,t);for(var g=u;++f<l;){var y=t[d=c[f]],m=e[d];if(a)var b=u?a(m,y,d,e,t,s):a(y,m,d,t,e,s);if(!(void 0===b?y===m||o(y,m,n,a,s):b)){v=!1;break}g||(g="constructor"==d)}if(v&&!g){var x=t.constructor,w=e.constructor;x==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(v=!1)}return s.delete(t),s.delete(e),v}},5343:t=>{t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},5362:(t,e,n)=>{"use strict";var r=n(6036),i=n(4206).Graph,a=n(1882);function o(t,e){var n={};return r.reduce(e,(function(e,i){var a=0,o=0,s=e.length,c=r.last(i);return r.forEach(i,(function(e,l){var f=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),d=f?t.node(f).order:s;(f||e===c)&&(r.forEach(i.slice(o,l+1),(function(e){r.forEach(t.predecessors(e),(function(r){var i=t.node(r),o=i.order;!(o<a||d<o)||i.dummy&&t.node(e).dummy||u(n,r,e)}))})),o=l+1,a=d)})),i})),n}function s(t,e){var n={};function i(e,i,a,o,s){var c;r.forEach(r.range(i,a),(function(i){c=e[i],t.node(c).dummy&&r.forEach(t.predecessors(c),(function(e){var r=t.node(e);r.dummy&&(r.order<o||r.order>s)&&u(n,e,c)}))}))}return r.reduce(e,(function(e,n){var a,o=-1,s=0;return r.forEach(n,(function(r,u){if("border"===t.node(r).dummy){var c=t.predecessors(r);c.length&&(a=t.node(c[0]).order,i(n,s,u,o,a),s=u,o=a)}i(n,s,n.length,a,e.length)})),n})),n}function u(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function c(t,e,n){if(e>n){var i=e;e=n,n=i}return r.has(t[e],n)}function l(t,e,n,i){var a={},o={},s={};return r.forEach(e,(function(t){r.forEach(t,(function(t,e){a[t]=t,o[t]=t,s[t]=e}))})),r.forEach(e,(function(t){var e=-1;r.forEach(t,(function(t){var u=i(t);if(u.length){u=r.sortBy(u,(function(t){return s[t]}));for(var l=(u.length-1)/2,f=Math.floor(l),d=Math.ceil(l);f<=d;++f){var h=u[f];o[t]===t&&e<s[h]&&!c(n,t,h)&&(o[h]=t,o[t]=a[t]=a[h],e=s[h])}}}))})),{root:a,align:o}}function f(t,e,n,a,o){var s={},u=function(t,e,n,a){var o=new i,s=t.graph(),u=function(t,e,n){return function(i,a,o){var s,u=i.node(a),c=i.node(o),l=0;if(l+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":s=-u.width/2;break;case"r":s=u.width/2}if(s&&(l+=n?s:-s),s=0,l+=(u.dummy?e:t)/2,l+=(c.dummy?e:t)/2,l+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":s=c.width/2;break;case"r":s=-c.width/2}return s&&(l+=n?s:-s),s=0,l}}(s.nodesep,s.edgesep,a);return r.forEach(e,(function(e){var i;r.forEach(e,(function(e){var r=n[e];if(o.setNode(r),i){var a=n[i],s=o.edge(a,r);o.setEdge(a,r,Math.max(u(t,e,i),s||0))}i=e}))})),o}(t,e,n,o),c=o?"borderLeft":"borderRight";function l(t,e){for(var n=u.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return l((function(t){s[t]=u.inEdges(t).reduce((function(t,e){return Math.max(t,s[e.v]+u.edge(e))}),0)}),u.predecessors.bind(u)),l((function(e){var n=u.outEdges(e).reduce((function(t,e){return Math.min(t,s[e.w]-u.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(s[e]=Math.max(s[e],n))}),u.successors.bind(u)),r.forEach(a,(function(t){s[t]=s[n[t]]})),s}function d(t,e){return r.minBy(r.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(e,(function(e,r){var a=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+a,n),i=Math.min(e-a,i)})),n-i}))}function h(t,e){var n=r.values(e),i=r.min(n),a=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(o){var s,u=n+o,c=t[u];if(c!==e){var l=r.values(c);(s="l"===o?i-r.min(l):a-r.max(l))&&(t[u]=r.mapValues(c,(function(t){return t+s})))}}))}))}function p(t,e){return r.mapValues(t.ul,(function(n,i){if(e)return t[e.toLowerCase()][i];var a=r.sortBy(r.map(t,i));return(a[1]+a[2])/2}))}t.exports={positionX:function(t){var e,n=a.buildLayerMatrix(t),i=r.merge(o(t,n),s(t,n)),u={};r.forEach(["u","d"],(function(a){e="u"===a?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(e=r.map(e,(function(t){return r.values(t).reverse()})));var o=("u"===a?t.predecessors:t.successors).bind(t),s=l(0,e,i,o),c=f(t,e,s.root,s.align,"r"===n);"r"===n&&(c=r.mapValues(c,(function(t){return-t}))),u[a+n]=c}))}));var c=d(t,u);return h(u,c),p(u,t.graph().align)},findType1Conflicts:o,findType2Conflicts:s,addConflict:u,hasConflict:c,verticalAlignment:l,horizontalCompaction:f,alignCoordinates:h,findSmallestWidthAlignment:d,balance:p}},5385:(t,e,n)=>{var r=n(9030),i=n(7814),a=Object.hasOwnProperty,o=Object.create(null);for(var s in r)a.call(r,s)&&(o[r[s]]=s);var u=t.exports={to:{},get:{}};function c(t,e,n){return Math.min(Math.max(e,t),n)}function l(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}u.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=u.get.hsl(t),n="hsl";break;case"hwb":e=u.get.hwb(t),n="hwb";break;default:e=u.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},u.get.rgb=function(t){if(!t)return null;var e,n,i,o=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=e[2],e=e[1],n=0;n<3;n++){var s=2*n;o[n]=parseInt(e.slice(s,s+2),16)}i&&(o[3]=parseInt(i,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(i=(e=e[1])[3],n=0;n<3;n++)o[n]=parseInt(e[n]+e[n],16);i&&(o[3]=parseInt(i+i,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)o[n]=parseInt(e[n+1],0);e[4]&&(e[5]?o[3]=.01*parseFloat(e[4]):o[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=t.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:a.call(r,e[1])?((o=r[e[1]])[3]=1,o):null:null;for(n=0;n<3;n++)o[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(e[5]?o[3]=.01*parseFloat(e[4]):o[3]=parseFloat(e[4]))}for(n=0;n<3;n++)o[n]=c(o[n],0,255);return o[3]=c(o[3],0,1),o},u.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,c(parseFloat(e[2]),0,100),c(parseFloat(e[3]),0,100),c(isNaN(n)?1:n,0,1)]}return null},u.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,c(parseFloat(e[2]),0,100),c(parseFloat(e[3]),0,100),c(isNaN(n)?1:n,0,1)]}return null},u.to.hex=function(){var t=i(arguments);return"#"+l(t[0])+l(t[1])+l(t[2])+(t[3]<1?l(Math.round(255*t[3])):"")},u.to.rgb=function(){var t=i(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},u.to.rgb.percent=function(){var t=i(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},u.to.hsl=function(){var t=i(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},u.to.hwb=function(){var t=i(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},u.to.keyword=function(t){return o[t.slice(0,3)]}},5405:(t,e,n)=>{var r=n(319)(Object,"create");t.exports=r},5410:t=>{t.exports=function(t,e,n,r){var i=n?n.call(r,t,e):void 0;if(void 0!==i)return!!i;if(t===e)return!0;if("object"!=typeof t||!t||"object"!=typeof e||!e)return!1;var a=Object.keys(t),o=Object.keys(e);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(e),u=0;u<a.length;u++){var c=a[u];if(!s(c))return!1;var l=t[c],f=e[c];if(!1===(i=n?n.call(r,l,f,c):void 0)||void 0===i&&l!==f)return!1}return!0}},5422:(t,e,n)=>{var r=n(9493),i=n(981),a=n(6204),o=n(7464),s=n(4040);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,t.exports=u},5434:(t,e,n)=>{var r=n(7866),i=n(6539),a=n(4513),o=n(8962),s=n(1326);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?o(t)?i(t[0],t[1]):r(t):s(t)}},5442:t=>{"use strict";t.exports=n},5489:(t,e,n)=>{var r=n(6036);t.exports=function(t,e,n){var i,a={};r.forEach(n,(function(n){for(var r,o,s=t.parent(n);s;){if((r=t.parent(s))?(o=a[r],a[r]=s):(o=i,i=s),o&&o!==s)return void e.setEdge(o,s);s=r}}))}},5506:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},5527:(t,e,n)=>{"use strict";var r=n(1742);t.exports=a;var i="\0";function a(t){this._isDirected=!r.has(t,"directed")||t.directed,this._isMultigraph=!!r.has(t,"multigraph")&&t.multigraph,this._isCompound=!!r.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[i]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function o(t,e){t[e]?t[e]++:t[e]=1}function s(t,e){--t[e]||delete t[e]}function u(t,e,n,i){var a=""+e,o=""+n;if(!t&&a>o){var s=a;a=o,o=s}return a+""+o+""+(r.isUndefined(i)?"\0":i)}function c(t,e){return u(t,e.v,e.w,e.name)}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(t){return this._label=t,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return r.keys(this._nodes)},a.prototype.sources=function(){var t=this;return r.filter(this.nodes(),(function(e){return r.isEmpty(t._in[e])}))},a.prototype.sinks=function(){var t=this;return r.filter(this.nodes(),(function(e){return r.isEmpty(t._out[e])}))},a.prototype.setNodes=function(t,e){var n=arguments,i=this;return r.each(t,(function(t){n.length>1?i.setNode(t,e):i.setNode(t)})),this},a.prototype.setNode=function(t,e){return r.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=i,this._children[t]={},this._children[i][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},a.prototype.node=function(t){return this._nodes[t]},a.prototype.hasNode=function(t){return r.has(this._nodes,t)},a.prototype.removeNode=function(t){var e=this;if(r.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],r.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),r.each(r.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],r.each(r.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},a.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(e))e=i;else{for(var n=e+="";!r.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},a.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},a.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==i)return e}},a.prototype.children=function(t){if(r.isUndefined(t)&&(t=i),this._isCompound){var e=this._children[t];if(e)return r.keys(e)}else{if(t===i)return this.nodes();if(this.hasNode(t))return[]}},a.prototype.predecessors=function(t){var e=this._preds[t];if(e)return r.keys(e)},a.prototype.successors=function(t){var e=this._sucs[t];if(e)return r.keys(e)},a.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return r.union(e,this.successors(t))},a.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},a.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;r.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),r.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var i={};function a(t){var r=n.parent(t);return void 0===r||e.hasNode(r)?(i[t]=r,r):r in i?i[r]:a(r)}return this._isCompound&&r.each(e.nodes(),(function(t){e.setParent(t,a(t))})),e},a.prototype.setDefaultEdgeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return r.values(this._edgeObjs)},a.prototype.setPath=function(t,e){var n=this,i=arguments;return r.reduce(t,(function(t,r){return i.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r})),this},a.prototype.setEdge=function(){var t,e,n,i,a=!1,s=arguments[0];"object"==typeof s&&null!==s&&"v"in s?(t=s.v,e=s.w,n=s.name,2===arguments.length&&(i=arguments[1],a=!0)):(t=s,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],a=!0)),t=""+t,e=""+e,r.isUndefined(n)||(n=""+n);var c=u(this._isDirected,t,e,n);if(r.has(this._edgeLabels,c))return a&&(this._edgeLabels[c]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[c]=a?i:this._defaultEdgeLabelFn(t,e,n);var l=function(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return r&&(s.name=r),s}(this._isDirected,t,e,n);return t=l.v,e=l.w,Object.freeze(l),this._edgeObjs[c]=l,o(this._preds[e],t),o(this._sucs[t],e),this._in[e][c]=l,this._out[t][c]=l,this._edgeCount++,this},a.prototype.edge=function(t,e,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return this._edgeLabels[r]},a.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return r.has(this._edgeLabels,i)},a.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],s(this._preds[e],t),s(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},a.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=r.values(n);return e?r.filter(i,(function(t){return t.v===e})):i}},a.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=r.values(n);return e?r.filter(i,(function(t){return t.w===e})):i}},a.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},5543:(t,e,n)=>{var r=n(7560);t.exports=function(t){return t==t&&!r(t)}},5559:(t,e,n)=>{var r=n(5991);t.exports=function(t){return null==t?"":r(t)}},5675:(t,e,n)=>{var r=n(319)(n(6698),"DataView");t.exports=r},5711:(t,e,n)=>{t.exports={Graph:n(5527),version:n(9375)}},5742:(t,e,n)=>{function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(5969),a=n(9953),o=n(2552),s=n(2755),u=function(t){function e(){return t.apply(this,arguments)||this}return i=t,(n=e).prototype=Object.create(i.prototype),n.prototype.constructor=n,r(n,i),e.prototype.execute=function(){var t=this;return t.rootNode.width=0,o(t.rootNode,t.options,a)},e;var n,i}(i),c={};t.exports=function(t,e){return e=s.assign({},c,e),new u(t,e).execute()}},5781:t=>{t.exports="0.8.5"},5785:(t,e,n)=>{var r=n(2679);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},5818:(t,e,n)=>{var r=n(9776),i=n(6532),a=n(9210),o=n(8790),s=n(9761),u=n(4567),c=n(2742),l=n(6358),f=n(1889),d=n(5965),h=n(8174),p=n(498),v=n(3114),g=n(2812),y=n(272),m=n(8962),b=n(9217),x=n(7877),w=n(7560),k=n(6643),E=n(1543),O=n(4620),S="[object Arguments]",M="[object Function]",T="[object Object]",A={};A[S]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[T]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[M]=A["[object WeakMap]"]=!1,t.exports=function t(e,n,P,N,C,_){var L,R=1&n,j=2&n,D=4&n;if(P&&(L=C?P(e,N,C,_):P(e)),void 0!==L)return L;if(!w(e))return e;var I=m(e);if(I){if(L=v(e),!R)return c(e,L)}else{var F=p(e),z=F==M||"[object GeneratorFunction]"==F;if(b(e))return u(e,R);if(F==T||F==S||z&&!C){if(L=j||z?{}:y(e),!R)return j?f(e,s(L,e)):l(e,o(L,e))}else{if(!A[F])return C?e:{};L=g(e,F,R)}}_||(_=new r);var B=_.get(e);if(B)return B;_.set(e,L),k(e)?e.forEach((function(r){L.add(t(r,n,P,r,e,_))})):x(e)&&e.forEach((function(r,i){L.set(i,t(r,n,P,i,e,_))}));var G=I?void 0:(D?j?h:d:j?O:E)(e);return i(G||e,(function(r,i){G&&(r=e[i=r]),a(L,i,t(r,n,P,i,e,_))})),L}},5850:(t,e,n)=>{var r=n(8962),i=n(1751),a=n(3153),o=n(5559);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:a(o(t))}},5965:(t,e,n)=>{var r=n(8832),i=n(1263),a=n(1543);t.exports=function(t){return r(t,a,i)}},5967:(t,e,n)=>{var r=n(4359),i=n(6223);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},5969:(t,e,n)=>{var r=n(321),i=function(){function t(t,e){void 0===e&&(e={}),this.options=e,this.rootNode=r(t,e)}return t.prototype.execute=function(){throw new Error("please override this method")},t}();t.exports=i},5991:(t,e,n)=>{var r=n(6014),i=n(2323),a=n(8962),o=n(943),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(a(e))return i(e,t)+"";if(o(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},6003:e=>{"use strict";e.exports=t},6014:(t,e,n)=>{var r=n(6698).Symbol;t.exports=r},6036:(t,e,n)=>{var r;try{r={cloneDeep:n(2848),constant:n(1079),defaults:n(7945),each:n(9054),filter:n(7937),find:n(1362),flatten:n(7786),forEach:n(6269),forIn:n(8759),has:n(1763),isUndefined:n(7791),last:n(6395),map:n(349),mapValues:n(3167),max:n(9365),merge:n(8815),min:n(9007),minBy:n(9518),now:n(6243),pick:n(5096),range:n(2962),reduce:n(6309),sortBy:n(302),uniqueId:n(4857),values:n(5181),zipObject:n(7023)}}catch(t){}r||(r=window._),t.exports=r},6050:(t,e,n)=>{var r=n(3512),i=n(7029),a=n(4812);t.exports=function(t,e,n,o,s,u){var c=1&n,l=t.length,f=e.length;if(l!=f&&!(c&&f>l))return!1;var d=u.get(t),h=u.get(e);if(d&&h)return d==e&&h==t;var p=-1,v=!0,g=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++p<l;){var y=t[p],m=e[p];if(o)var b=c?o(m,y,p,e,t,u):o(y,m,p,t,e,u);if(void 0!==b){if(b)continue;v=!1;break}if(g){if(!i(e,(function(t,e){if(!a(g,e)&&(y===t||s(y,t,n,o,u)))return g.push(e)}))){v=!1;break}}else if(y!==m&&!s(y,m,n,o,u)){v=!1;break}}return u.delete(t),u.delete(e),v}},6095:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},6124:(t,e,n)=>{var r=n(7108),i=n(8729);t.exports=function(t,e,n,a){var o=r(i(1&a?t.prototype:t),e,n);return 2&a&&"function"==typeof o?function(t){return o.apply(n,t)}:o},t.exports.__esModule=!0,t.exports.default=t.exports},6153:t=>{function e(t,e,n,r){void 0===r&&(r=[]);var i=this;i.w=t||0,i.h=e||0,i.y=n||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function n(t,e,r){r?t.y+=e:t.x+=e,t.children.forEach((function(t){n(t,e,r)}))}function r(t,e){var n=e?t.y:t.x;return t.children.forEach((function(t){n=Math.min(r(t,e),n)})),n}function i(t,e){n(t,-r(t,e),e)}function a(t,e,n){n?e.y=t.x:e.x=t.x,t.c.forEach((function(t,r){a(t,e.children[r],n)}))}function o(t,e,n){void 0===n&&(n=0),e?(t.x=n,n+=t.width):(t.y=n,n+=t.height),t.children.forEach((function(t){o(t,e,n)}))}e.fromNode=function(t,n){if(!t)return null;var r=[];return t.children.forEach((function(t){r.push(e.fromNode(t,n))})),n?new e(t.height,t.width,t.x,r):new e(t.width,t.height,t.y,r)},t.exports=function(t,n){void 0===n&&(n={});var r=n.isHorizontal;function s(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function u(t,e,n){for(var r=t.c[e-1],i=r.mod,a=t.c[e],o=a.mod;null!==r&&null!==a;){d(r)>n.low&&(n=n.nxt);var s=i+r.prelim+r.w-(o+a.prelim);s>0&&(o+=s,c(t,e,n.index,s));var u=d(r),h=d(a);u<=h&&null!==(r=f(r))&&(i+=r.mod),u>=h&&null!==(a=l(a))&&(o+=a.mod)}!r&&a?function(t,e,n,r){var i=t.c[0].el;i.tl=n;var a=r-n.mod-t.c[0].msel;i.mod+=a,i.prelim-=a,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}(t,e,a,o):r&&!a&&function(t,e,n,r){var i=t.c[e].er;i.tr=n;var a=r-n.mod-t.c[e].mser;i.mod+=a,i.prelim-=a,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}(t,e,r,i)}function c(t,e,n,r){t.c[e].mod+=r,t.c[e].msel+=r,t.c[e].mser+=r,function(t,e,n,r){if(n!==e-1){var i=e-n;t.c[n+1].shift+=r/i,t.c[e].shift-=r/i,t.c[e].change-=r-r/i}}(t,e,n,r)}function l(t){return 0===t.cs?t.tl:t.c[0]}function f(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function d(t){return t.y+t.h}function h(t,e,n){for(;null!==n&&t>=n.low;)n=n.nxt;return{low:t,index:e,nxt:n}}o(t,r);var p=e.fromNode(t,r);return function t(e){if(0!==e.cs){t(e.c[0]);for(var n=h(d(e.c[0].el),0,null),r=1;r<e.cs;++r){t(e.c[r]);var i=d(e.c[r].er);u(e,r,n),n=h(i,r,n)}!function(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}(e),s(e)}else s(e)}(p),function t(e,n){n+=e.mod,e.x=e.prelim+n,function(t){for(var e=0,n=0,r=0;r<t.cs;r++)n+=(e+=t.c[r].shift)+t.c[r].change,t.c[r].mod+=n}(e);for(var r=0;r<e.cs;r++)t(e.c[r],n)}(p,0),a(p,t,r),i(t,r),t}},6204:(t,e,n)=>{var r=n(4158);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},6223:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},6229:(t,e,n)=>{var r=n(9122)(Object.keys,Object);t.exports=r},6243:(t,e,n)=>{var r=n(6698);t.exports=function(){return r.Date.now()}},6269:(t,e,n)=>{var r=n(6532),i=n(334),a=n(3225),o=n(8962);t.exports=function(t,e){return(o(t)?r:i)(t,a(e))}},6309:(t,e,n)=>{var r=n(4983),i=n(334),a=n(5434),o=n(5157),s=n(8962);t.exports=function(t,e,n){var u=s(t)?r:o,c=arguments.length<3;return u(t,a(e,4),n,c,i)}},6354:(t,e,n)=>{var r=n(2323),i=n(3791),a=n(5434),o=n(477),s=n(9150),u=n(1896),c=n(3563),l=n(4513),f=n(8962);t.exports=function(t,e,n){e=e.length?r(e,(function(t){return f(t)?function(e){return i(e,1===t.length?t[0]:t)}:t})):[l];var d=-1;e=r(e,u(a));var h=o(t,(function(t,n,i){return{criteria:r(e,(function(e){return e(t)})),index:++d,value:t}}));return s(h,(function(t,e){return c(t,e,n)}))}},6358:(t,e,n)=>{var r=n(9948),i=n(1263);t.exports=function(t,e){return r(t,i(t),e)}},6362:(t,e,n)=>{var r=n(3512),i=n(1888),a=n(7912),o=n(4812),s=n(7972),u=n(4968);t.exports=function(t,e,n){var c=-1,l=i,f=t.length,d=!0,h=[],p=h;if(n)d=!1,l=a;else if(f>=200){var v=e?null:s(t);if(v)return u(v);d=!1,l=o,p=new r}else p=e?[]:h;t:for(;++c<f;){var g=t[c],y=e?e(g):g;if(g=n||0!==g?g:0,d&&y==y){for(var m=p.length;m--;)if(p[m]===y)continue t;e&&p.push(y),h.push(g)}else l(p,y,n)||(p!==h&&p.push(y),h.push(g))}return h}},6395:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},6521:(t,e,n)=>{var r=n(6014),i=n(35),a=n(1417),o=n(6050),s=n(5506),u=n(4968),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,f,d){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!f(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var h=s;case"[object Set]":var p=1&r;if(h||(h=u),t.size!=e.size&&!p)return!1;var v=d.get(t);if(v)return v==e;r|=2,d.set(t,e);var g=o(h(t),h(e),r,c,f,d);return d.delete(t),g;case"[object Symbol]":if(l)return l.call(t)==l.call(e)}return!1}},6532:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},6539:(t,e,n)=>{var r=n(2027),i=n(3663),a=n(2432),o=n(1751),s=n(5543),u=n(756),c=n(8812);t.exports=function(t,e){return o(t)&&s(e)?u(c(t),e):function(n){var o=i(n,t);return void 0===o&&o===e?a(n,t):r(e,o,3)}}},6558:(t,e,n)=>{var r=n(319)(n(6698),"Map");t.exports=r},6584:t=>{t.exports=function(){return!1}},6643:(t,e,n)=>{var r=n(8739),i=n(1896),a=n(1710),o=a&&a.isSet,s=o?i(o):r;t.exports=s},6646:(t,e,n)=>{var r=n(1846),i=n(1896),a=n(1710),o=a&&a.isTypedArray,s=o?i(o):r;t.exports=s},6678:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},6682:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},6692:(t,e,n)=>{var r=n(1742);function i(){this._arr=[],this._keyIndices={}}t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},i.prototype.has=function(t){return r.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var i=this._arr,a=i.length;return n[t]=a,i.push({key:t,priority:e}),this._decrease(a),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},i.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],a=n[e];n[t]=a,n[e]=i,r[a.key]=t,r[i.key]=e}},6698:(t,e,n)=>{var r=n(9107),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();t.exports=a},6727:(t,e,n)=>{"use strict";var r=n(6124).default,i=n(7236).default,a=n(411).default,o=n(3191).default,s=n(7159).default,u=n(9370).default,c=n(8853).default,l=n(9844).default,f=n(7953).default,d=n(9168).default,h=n(3743).default,p=n(4840).default,v=(n(9940).default,n(8186).default),g=n(2828).default,y=n(1869),m=n(8),b=" ".repeat(2),x=" ".repeat(4);function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxRows,r=void 0===n?15:n,i=e.maxColumns,a=void 0===i?10:i,o=e.maxNumSize,s=void 0===o?8:o,u=e.padMinus,c=void 0===u?"auto":u;return"".concat(t.constructor.name," {\n").concat(b,"[\n").concat(x).concat(function(t,e,n,r,i){var a=t.rows,o=t.columns,s=Math.min(a,e),u=Math.min(o,n),c=[];if("auto"===i){i=!1;t:for(var l=0;l<s;l++)for(var f=0;f<u;f++)if(t.get(l,f)<0){i=!0;break t}}for(var d=0;d<s;d++){for(var h=[],p=0;p<u;p++)h.push(k(t.get(d,p),r,i));c.push("".concat(h.join(" ")))}return u!==o&&(c[c.length-1]+=" ... ".concat(o-n," more columns")),s!==a&&c.push("... ".concat(a-e," more rows")),c.join("\n".concat(x))}(t,r,a,s,c),"\n").concat(b,"]\n").concat(b,"rows: ").concat(t.rows,"\n").concat(b,"columns: ").concat(t.columns,"\n}")}function k(t,e,n){return(t>=0&&n?" ".concat(E(t,e-1)):E(t,e)).padEnd(e)}function E(t,e){var n=t.toString();if(n.length<=e)return n;var r=t.toFixed(e);if(r.length>e&&(r=t.toFixed(Math.max(0,e-(r.length-e)))),r.length<=e&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;var i=t.toExponential(e);return i.length>e&&(i=t.toExponential(Math.max(0,e-(i.length-e)))),i.slice(0)}function O(t,e,n){var r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function S(t,e,n){var r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function M(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function T(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function A(t,e){if(!y.isAnyArray(e))throw new TypeError("row indices must be an array");for(var n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.rows)throw new RangeError("row indices are out of range")}function P(t,e){if(!y.isAnyArray(e))throw new TypeError("column indices must be an array");for(var n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.columns)throw new RangeError("column indices are out of range")}function N(t,e,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(_("startRow",e),_("endRow",n),_("startColumn",r),_("endColumn",i),e>n||r>i||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function C(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0;r<t;r++)n.push(e);return n}function _(t,e){if("number"!=typeof e)throw new TypeError("".concat(t," must be a number"))}function L(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}var R=function(){function t(){v(this,t)}return g(t,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.call(this,e,n);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return 0===this.rows||0===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isDistance",value:function(){if(!this.isSymmetric())return!1;for(var t=0;t<this.rows;t++)if(0!==this.get(t,t))return!1;return!0}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,i=!1;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);t++}return r}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,i=!1;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);for(var a=e+1;a<this.rows;a++)0!==this.get(t,a)&&(r=!1);t++}return r}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,n=0;e<t.rows&&n<t.columns;){for(var r=e,i=e;i<t.rows;i++)t.get(i,n)>t.get(r,n)&&(r=i);if(0===t.get(r,n))n++;else{t.swapRows(e,r);for(var a=t.get(e,n),o=n;o<t.columns;o++)t.set(e,o,t.get(e,o)/a);for(var s=e+1;s<t.rows;s++){var u=t.get(s,n)/t.get(e,n);t.set(s,n,0);for(var c=n+1;c<t.columns;c++)t.set(s,c,t.get(s,c)-t.get(e,c)*u)}e++,n++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;r>=0;)if(0===t.maxRow(r))r--;else{for(var i=0,a=!1;i<n&&!1===a;)1===t.get(r,i)?a=!0:i++;for(var o=0;o<r;o++)for(var s=t.get(o,i),u=i;u<e;u++){var c=t.get(o,u)-s*t.get(r,u);t.set(o,u,c)}r--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=typeof t)throw new TypeError("options must be an object");var e=t.rows,n=void 0===e?1:e,r=t.columns,i=void 0===r?1:r;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(i)||i<=0)throw new TypeError("columns must be a positive integer");for(var a=new I(this.rows*n,this.columns*i),o=0;o<n;o++)for(var s=0;s<i;s++)a.setSubMatrix(this,this.rows*o,this.columns*s);return a}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){O(this,t);for(var e=[],n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"getRowVector",value:function(t){return I.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){O(this,t),e=M(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}},{key:"swapRows",value:function(t,e){O(this,t),O(this,e);for(var n=0;n<this.columns;n++){var r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}},{key:"getColumn",value:function(t){S(this,t);for(var e=[],n=0;n<this.rows;n++)e.push(this.get(n,t));return e}},{key:"getColumnVector",value:function(t){return I.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){S(this,t),e=T(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}},{key:"swapColumns",value:function(t,e){S(this,t),S(this,e);for(var n=0;n<this.rows;n++){var r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}},{key:"addRowVector",value:function(t){t=M(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}},{key:"subRowVector",value:function(t){t=M(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}},{key:"mulRowVector",value:function(t){t=M(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}},{key:"divRowVector",value:function(t){t=M(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}},{key:"addColumnVector",value:function(t){t=T(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=T(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=T(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=T(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}},{key:"mulRow",value:function(t,e){O(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}},{key:"mulColumn",value:function(t,e){S(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}},{key:"max",value:function(t){if(this.isEmpty())return NaN;switch(t){case"row":for(var e=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>e[n]&&(e[n]=this.get(n,r));return e;case"column":for(var i=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),a=0;a<this.rows;a++)for(var o=0;o<this.columns;o++)this.get(a,o)>i[o]&&(i[o]=this.get(a,o));return i;case void 0:for(var s=this.get(0,0),u=0;u<this.rows;u++)for(var c=0;c<this.columns;c++)this.get(u,c)>s&&(s=this.get(u,c));return s;default:throw new Error("invalid option: ".concat(t))}}},{key:"maxIndex",value:function(){L(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"min",value:function(t){if(this.isEmpty())return NaN;switch(t){case"row":for(var e=new Array(this.rows).fill(Number.POSITIVE_INFINITY),n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<e[n]&&(e[n]=this.get(n,r));return e;case"column":for(var i=new Array(this.columns).fill(Number.POSITIVE_INFINITY),a=0;a<this.rows;a++)for(var o=0;o<this.columns;o++)this.get(a,o)<i[o]&&(i[o]=this.get(a,o));return i;case void 0:for(var s=this.get(0,0),u=0;u<this.rows;u++)for(var c=0;c<this.columns;c++)this.get(u,c)<s&&(s=this.get(u,c));return s;default:throw new Error("invalid option: ".concat(t))}}},{key:"minIndex",value:function(){L(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"maxRow",value:function(t){if(O(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}},{key:"maxRowIndex",value:function(t){O(this,t),L(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}},{key:"minRow",value:function(t){if(O(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}},{key:"minRowIndex",value:function(t){O(this,t),L(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}},{key:"maxColumn",value:function(t){if(S(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}},{key:"maxColumnIndex",value:function(t){S(this,t),L(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}},{key:"minColumn",value:function(t){if(S(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}},{key:"minColumnIndex",value:function(t){S(this,t),L(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],n=0;n<t;n++)e.push(this.get(n,n));return e}},{key:"norm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius";switch(t){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError("unknown norm type: ".concat(t))}}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}},{key:"dot",value:function(e){t.isMatrix(e)&&(e=e.to1DArray());var n=this.to1DArray();if(n.length!==e.length)throw new RangeError("vectors do not have the same size");for(var r=0,i=0;i<n.length;i++)r+=n[i]*e[i];return r}},{key:"mmul",value:function(t){t=I.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.columns,i=new I(e,r),a=new Float64Array(n),o=0;o<r;o++){for(var s=0;s<n;s++)a[s]=t.get(s,o);for(var u=0;u<e;u++){for(var c=0,l=0;l<n;l++)c+=this.get(u,l)*a[l];i.set(u,o,c)}}return i}},{key:"mpow",value:function(t){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(t)||t<0)throw new RangeError("Exponent must be a non-negative integer");for(var e=I.eye(this.rows),n=this,r=t;r>=1;r/=2)1&r&&(e=e.mmul(n)),n=n.mmul(n);return e}},{key:"strassen2x2",value:function(t){t=I.checkMatrix(t);var e=new I(2,2),n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),a=t.get(0,1),o=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(n+u)*(r+c),f=(o+u)*r,d=n*(a-c),h=u*(s-r),p=(n+i)*c,v=l+h-p+(i-u)*(s+c),g=d+p,y=f+h,m=l-f+d+(o-n)*(r+a);return e.set(0,0,v),e.set(0,1,g),e.set(1,0,y),e.set(1,1,m),e}},{key:"strassen3x3",value:function(t){t=I.checkMatrix(t);var e=new I(3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),a=this.get(1,0),o=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),f=t.get(0,0),d=t.get(0,1),h=t.get(0,2),p=t.get(1,0),v=t.get(1,1),g=t.get(1,2),y=t.get(2,0),m=t.get(2,1),b=t.get(2,2),x=(n-a)*(-d+v),w=(-n+a+o)*(f-d+v),k=(a+o)*(-f+d),E=n*f,O=(-n+u+c)*(f-h+g),S=(-n+u)*(h-g),M=(u+c)*(-f+h),T=(-i+c+l)*(v+y-m),A=(i-l)*(v-m),P=i*y,N=(c+l)*(-y+m),C=(-i+o+s)*(g+y-b),_=(i-s)*(g-b),L=(o+s)*(-y+b),R=E+P+r*p,j=(n+r+i-a-o-c-l)*v+w+k+E+T+P+N,D=E+O+M+(n+r+i-o-s-u-c)*g+P+C+L,F=x+o*(-f+d+p-v-g-y+b)+w+E+P+C+_,z=x+w+k+E+s*m,B=P+C+_+L+a*h,G=E+O+S+c*(-f+h+p-v-g-y+m)+T+A+P,W=T+A+P+N+u*d,V=E+O+S+M+l*b;return e.set(0,0,R),e.set(0,1,j),e.set(0,2,D),e.set(1,0,F),e.set(1,1,z),e.set(1,2,B),e.set(2,0,G),e.set(2,1,W),e.set(2,2,V),e}},{key:"mmulStrassen",value:function(e){e=I.checkMatrix(e);var n=this.clone(),r=n.rows,i=n.columns,a=e.rows,o=e.columns;function s(e,n,r){var i=e.rows,a=e.columns;if(i===n&&a===r)return e;var o=t.zeros(n,r);return o.setSubMatrix(e,0,0)}i!==a&&console.warn("Multiplying ".concat(r," x ").concat(i," and ").concat(a," x ").concat(o," matrix: dimensions do not match."));var u=Math.max(r,a),c=Math.max(i,o);return function e(n,r,i,a){if(i<=512||a<=512)return n.mmul(r);i%2==1&&a%2==1?(n=s(n,i+1,a+1),r=s(r,i+1,a+1)):i%2==1?(n=s(n,i+1,a),r=s(r,i+1,a)):a%2==1&&(n=s(n,i,a+1),r=s(r,i,a+1));var o=parseInt(n.rows/2,10),u=parseInt(n.columns/2,10),c=n.subMatrix(0,o-1,0,u-1),l=r.subMatrix(0,o-1,0,u-1),f=n.subMatrix(0,o-1,u,n.columns-1),d=r.subMatrix(0,o-1,u,r.columns-1),h=n.subMatrix(o,n.rows-1,0,u-1),p=r.subMatrix(o,r.rows-1,0,u-1),v=n.subMatrix(o,n.rows-1,u,n.columns-1),g=r.subMatrix(o,r.rows-1,u,r.columns-1),y=e(t.add(c,v),t.add(l,g),o,u),m=e(t.add(h,v),l,o,u),b=e(c,t.sub(d,g),o,u),x=e(v,t.sub(p,l),o,u),w=e(t.add(c,f),g,o,u),k=e(t.sub(h,c),t.add(l,d),o,u),E=e(t.sub(f,v),t.add(p,g),o,u),O=t.add(y,x);O.sub(w),O.add(E);var S=t.add(b,w),M=t.add(m,x),T=t.sub(y,m);T.add(b),T.add(k);var A=t.zeros(2*O.rows,2*O.columns);return(A=(A=(A=(A=A.setSubMatrix(O,0,0)).setSubMatrix(S,O.rows,0)).setSubMatrix(M,0,O.columns)).setSubMatrix(T,O.rows,O.columns)).subMatrix(0,i-1,0,a-1)}(n=s(n,u,c),e=s(e,u,c),u,c)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=typeof t)throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,i=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(n>=i)throw new RangeError("min must be smaller than max");for(var a=new I(this.rows,this.columns),o=0;o<this.rows;o++){var s=this.getRow(o);s.length>0&&m(s,{min:n,max:i,output:s}),a.setRow(o,s)}return a}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=typeof t)throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,i=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(n>=i)throw new RangeError("min must be smaller than max");for(var a=new I(this.rows,this.columns),o=0;o<this.columns;o++){var s=this.getColumn(o);s.length&&m(s,{min:n,max:i,output:s}),a.setColumn(o,s)}return a}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var n=0;n<t;n++){var r=this.get(e,n),i=this.get(e,this.columns-1-n);this.set(e,n,i),this.set(e,this.columns-1-n,r)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var n=0;n<t;n++){var r=this.get(n,e),i=this.get(this.rows-1-n,e);this.set(n,e,i),this.set(this.rows-1-n,e,r)}return this}},{key:"kroneckerProduct",value:function(t){t=I.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,i=t.columns,a=new I(e*r,n*i),o=0;o<e;o++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var c=0;c<i;c++)a.set(r*o+u,i*s+c,this.get(o,s)*t.get(u,c));return a}},{key:"kroneckerSum",value:function(t){if(t=I.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var e=this.rows,n=t.rows,r=this.kroneckerProduct(I.eye(n,n)),i=I.eye(e,e).kroneckerProduct(t);return r.add(i)}},{key:"transpose",value:function(){for(var t=new I(this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,n,r){N(this,t,e,n,r);for(var i=new I(e-t+1,r-n+1),a=t;a<=e;a++)for(var o=n;o<=r;o++)i.set(a-t,o-n,this.get(a,o));return i}},{key:"subMatrixRow",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new I(t.length,n-e+1),i=0;i<t.length;i++)for(var a=e;a<=n;a++){if(t[i]<0||t[i]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[i]));r.set(i,a-e,this.get(t[i],a))}return r}},{key:"subMatrixColumn",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new I(n-e+1,t.length),i=0;i<t.length;i++)for(var a=e;a<=n;a++){if(t[i]<0||t[i]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[i]));r.set(a-e,i,this.get(a,t[i]))}return r}},{key:"setSubMatrix",value:function(t,e,n){if((t=I.checkMatrix(t)).isEmpty())return this;N(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var i=0;i<t.columns;i++)this.set(e+r,n+i,t.get(r,i));return this}},{key:"selection",value:function(t,e){A(this,t),P(this,e);for(var n=new I(t.length,e.length),r=0;r<t.length;r++)for(var i=t[r],a=0;a<e.length;a++){var o=e[a];n.set(r,a,this.get(i,o))}return n}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}},{key:"clone",value:function(){return this.constructor.copy(this,new I(this.rows,this.columns))}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var e=C(t.rows),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}(this);case"column":return function(t){for(var e=C(t.columns),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return function(t){for(var e=C(t.rows,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}(this);case"column":return function(t){for(var e=C(t.columns,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=1,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e*=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":for(var n=0;n<this.rows;n++)e[n]/=this.columns;return e;case"column":for(var r=0;r<this.columns;r++)e[r]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");var n=e,r=n.unbiased,i=void 0===r||r,a=n.mean,o=void 0===a?this.mean(t):a;if("boolean"!=typeof i)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!y.isAnyArray(o))throw new TypeError("mean must be an array");return function(t,e,n){for(var r=t.rows,i=t.columns,a=[],o=0;o<r;o++){for(var s=0,u=0,c=0,l=0;l<i;l++)s+=c=t.get(o,l)-n[o],u+=c*c;e?a.push((u-s*s/i)/(i-1)):a.push((u-s*s/i)/i)}return a}(this,i,o);case"column":if(!y.isAnyArray(o))throw new TypeError("mean must be an array");return function(t,e,n){for(var r=t.rows,i=t.columns,a=[],o=0;o<i;o++){for(var s=0,u=0,c=0,l=0;l<r;l++)s+=c=t.get(l,o)-n[o],u+=c*c;e?a.push((u-s*s/r)/(r-1)):a.push((u-s*s/r)/r)}return a}(this,i,o);case void 0:if("number"!=typeof o)throw new TypeError("mean must be a number");return function(t,e,n){for(var r=t.rows,i=t.columns,a=r*i,o=0,s=0,u=0,c=0;c<r;c++)for(var l=0;l<i;l++)o+=u=t.get(c,l)-n,s+=u*u;return e?(s-o*o/a)/(a-1):(s-o*o/a)/a}(this,i,o);default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){"object"==typeof t&&(e=t,t=void 0);var n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(var r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}},{key:"center",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");var n=e.center,r=void 0===n?this.mean(t):n;switch(t){case"row":if(!y.isAnyArray(r))throw new TypeError("center must be an array");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}(this,r),this;case"column":if(!y.isAnyArray(r))throw new TypeError("center must be an array");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}(this,r),this;case void 0:if("number"!=typeof r)throw new TypeError("center must be a number");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}(this,r),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");var n=e.scale;switch(t){case"row":if(void 0===n)n=function(t){for(var e=[],n=0;n<t.rows;n++){for(var r=0,i=0;i<t.columns;i++)r+=Math.pow(t.get(n,i),2)/(t.columns-1);e.push(Math.sqrt(r))}return e}(this);else if(!y.isAnyArray(n))throw new TypeError("scale must be an array");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}(this,n),this;case"column":if(void 0===n)n=function(t){for(var e=[],n=0;n<t.columns;n++){for(var r=0,i=0;i<t.rows;i++)r+=Math.pow(t.get(i,n),2)/(t.rows-1);e.push(Math.sqrt(r))}return e}(this);else if(!y.isAnyArray(n))throw new TypeError("scale must be an array");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}(this,n),this;case void 0:if(void 0===n)n=function(t){for(var e=t.size-1,n=0,r=0;r<t.columns;r++)for(var i=0;i<t.rows;i++)n+=Math.pow(t.get(i,r),2)/e;return Math.sqrt(n)}(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}(this,n),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return w(this,t)}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:p().mark((function t(){var e,n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.rows)){t.next=12;break}n=0;case 3:if(!(n<this.columns)){t.next=9;break}return t.next=6,[e,n,this.get(e,n)];case 6:n++,t.next=3;break;case 9:e++,t.next=1;break;case 12:case"end":return t.stop()}}),t,this)}))},{key:"values",value:p().mark((function t(){var e,n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.rows)){t.next=12;break}n=0;case 3:if(!(n<this.columns)){t.next=9;break}return t.next=6,this.get(e,n);case 6:n++,t.next=3;break;case 9:e++,t.next=1;break;case 12:case"end":return t.stop()}}),t,this)}))}],[{key:"from1DArray",value:function(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");for(var r=new I(t,e),i=0;i<t;i++)for(var a=0;a<e;a++)r.set(i,a,n[i*e+a]);return r}},{key:"rowVector",value:function(t){for(var e=new I(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}},{key:"columnVector",value:function(t){for(var e=new I(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}},{key:"zeros",value:function(t,e){return new I(t,e)}},{key:"ones",value:function(t,e){return new I(t,e).fill(1)}},{key:"rand",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!=typeof n)throw new TypeError("options must be an object");for(var r=n.random,i=void 0===r?Math.random:r,a=new I(t,e),o=0;o<t;o++)for(var s=0;s<e;s++)a.set(o,s,i());return a}},{key:"randInt",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!=typeof n)throw new TypeError("options must be an object");var r=n.min,i=void 0===r?0:r,a=n.max,o=void 0===a?1e3:a,s=n.random,u=void 0===s?Math.random:s;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(o))throw new TypeError("max must be an integer");if(i>=o)throw new RangeError("min must be smaller than max");for(var c=o-i,l=new I(t,e),f=0;f<t;f++)for(var d=0;d<e;d++){var h=i+Math.round(u()*c);l.set(f,d,h)}return l}},{key:"eye",value:function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=Math.min(t,e),i=this.zeros(t,e),a=0;a<r;a++)i.set(a,a,n);return i}},{key:"diag",value:function(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var i=Math.min(r,e,n),a=this.zeros(e,n),o=0;o<i;o++)a.set(o,o,t[o]);return a}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new I(n,r),a=0;a<n;a++)for(var o=0;o<r;o++)i.set(a,o,Math.min(t.get(a,o),e.get(a,o)));return i}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),a=0;a<n;a++)for(var o=0;o<r;o++)i.set(a,o,Math.max(t.get(a,o),e.get(a,o)));return i}},{key:"checkMatrix",value:function(e){return t.isMatrix(e)?e:new I(e)}},{key:"isMatrix",value:function(t){return null!=t&&"Matrix"===t.klass}},{key:"copy",value:function(t,e){var n,r=h(t.entries());try{for(r.s();!(n=r.n()).done;){var i=d(n.value,3),a=i[0],o=i[1],s=i[2];e.set(a,o,s)}}catch(t){r.e(t)}finally{r.f()}return e}}])}();function j(t,e){return t-e}R.prototype.klass="Matrix","undefined"!=typeof Symbol&&(R.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return w(this)}),R.random=R.rand,R.randomInt=R.randInt,R.diagonal=R.diag,R.prototype.diagonal=R.prototype.diag,R.identity=R.eye,R.prototype.negate=R.prototype.neg,R.prototype.tensorProduct=R.prototype.kroneckerProduct;var D=new WeakSet,I=function(t){function e(t,n){var r;if(v(this,e),r=s(this,e),c(r,D),l(r,"data",void 0),e.isMatrix(t))f(D,r,F).call(r,t.rows,t.columns),e.copy(t,r);else if(Number.isInteger(t)&&t>=0)f(D,r,F).call(r,t,n);else{if(!y.isAnyArray(t))throw new TypeError("First argument must be a positive number or an array");var i=t;if("number"!=typeof(n=(t=i.length)?i[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");r.data=[];for(var a=0;a<t;a++){if(i[a].length!==n)throw new RangeError("Inconsistent array dimensions");if(!i[a].every((function(t){return"number"==typeof t})))throw new TypeError("Input data contains non-numeric values");r.data.push(Float64Array.from(i[a]))}r.rows=t,r.columns=n}return r}return u(e,t),g(e,[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}},{key:"removeRow",value:function(t){return O(this,t),this.data.splice(t,1),this.rows-=1,this}},{key:"addRow",value:function(t,e){return void 0===e&&(e=t,t=this.rows),O(this,t,!0),e=Float64Array.from(M(this,e)),this.data.splice(t,0,e),this.rows+=1,this}},{key:"removeColumn",value:function(t){S(this,t);for(var e=0;e<this.rows;e++){for(var n=new Float64Array(this.columns-1),r=0;r<t;r++)n[r]=this.data[e][r];for(var i=t+1;i<this.columns;i++)n[i-1]=this.data[e][i];this.data[e]=n}return this.columns-=1,this}},{key:"addColumn",value:function(t,e){void 0===e&&(e=t,t=this.columns),S(this,t,!0),e=T(this,e);for(var n=0;n<this.rows;n++){for(var r=new Float64Array(this.columns+1),i=0;i<t;i++)r[i]=this.data[n][i];for(r[i++]=e[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}}])}(R);function F(t,e){if(this.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(var n=0;n<t;n++)this.data.push(new Float64Array(e));this.rows=t,this.columns=e}!function(t,e){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)+t.get(n,r));return this},t.add=function(t,n){return new e(t).add(n)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)-t.get(n,r));return this},t.sub=function(t,n){return new e(t).sub(n)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)*t.get(n,r));return this},t.mul=function(t,n){return new e(t).mul(n)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)/t.get(n,r));return this},t.div=function(t,n){return new e(t).div(n)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)%t.get(n,r));return this},t.mod=function(t,n){return new e(t).mod(n)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)&t.get(n,r));return this},t.and=function(t,n){return new e(t).and(n)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)|t.get(n,r));return this},t.or=function(t,n){return new e(t).or(n)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)^t.get(n,r));return this},t.xor=function(t,n){return new e(t).xor(n)},t.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)<<t.get(n,r));return this},t.leftShift=function(t,n){return new e(t).leftShift(n)},t.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)>>t.get(n,r));return this},t.signPropagatingRightShift=function(t,n){return new e(t).signPropagatingRightShift(n)},t.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)>>>t.get(n,r));return this},t.rightShift=function(t,n){return new e(t).rightShift(n)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){return new e(t).not()},t.prototype.abs=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){return new e(t).abs()},t.prototype.acos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){return new e(t).acos()},t.prototype.acosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){return new e(t).acosh()},t.prototype.asin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){return new e(t).asin()},t.prototype.asinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){return new e(t).asinh()},t.prototype.atan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){return new e(t).atan()},t.prototype.atanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){return new e(t).atanh()},t.prototype.cbrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){return new e(t).cbrt()},t.prototype.ceil=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){return new e(t).ceil()},t.prototype.clz32=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){return new e(t).clz32()},t.prototype.cos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){return new e(t).cos()},t.prototype.cosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){return new e(t).cosh()},t.prototype.exp=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){return new e(t).exp()},t.prototype.expm1=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){return new e(t).expm1()},t.prototype.floor=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){return new e(t).floor()},t.prototype.fround=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){return new e(t).fround()},t.prototype.log=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){return new e(t).log()},t.prototype.log1p=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){return new e(t).log1p()},t.prototype.log10=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){return new e(t).log10()},t.prototype.log2=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){return new e(t).log2()},t.prototype.round=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){return new e(t).round()},t.prototype.sign=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){return new e(t).sign()},t.prototype.sin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){return new e(t).sin()},t.prototype.sinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){return new e(t).sinh()},t.prototype.sqrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){return new e(t).sqrt()},t.prototype.tan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){return new e(t).tan()},t.prototype.tanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){return new e(t).tanh()},t.prototype.trunc=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){return new e(t).trunc()},t.pow=function(t,n){return new e(t).pow(n)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,Math.pow(this.get(n,r),t.get(n,r)));return this}}(R,I);var z=new WeakMap,B=function(t){function e(t){var n;if(v(this,e),n=s(this,e),i(n,z,void 0),I.isMatrix(t)){if(!t.isSymmetric())throw new TypeError("not symmetric data");a(z,n,I.copy(t,new I(t.rows,t.rows)))}else if(Number.isInteger(t)&&t>=0)a(z,n,new I(t,t));else if(a(z,n,new I(t)),!n.isSymmetric())throw new TypeError("not symmetric data");return n}return u(e,t),g(e,[{key:"size",get:function(){return o(z,this).size}},{key:"rows",get:function(){return o(z,this).rows}},{key:"columns",get:function(){return o(z,this).columns}},{key:"diagonalSize",get:function(){return this.rows}},{key:"clone",value:function(){var t,n=new e(this.diagonalSize),r=h(this.upperRightEntries());try{for(r.s();!(t=r.n()).done;){var i=d(t.value,3),a=i[0],o=i[1],s=i[2];n.set(a,o,s)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"toMatrix",value:function(){return new I(this)}},{key:"get",value:function(t,e){return o(z,this).get(t,e)}},{key:"set",value:function(t,e,n){return o(z,this).set(t,e,n),o(z,this).set(e,t,n),this}},{key:"removeCross",value:function(t){return o(z,this).removeRow(t),o(z,this).removeColumn(t),this}},{key:"addCross",value:function(t,e){void 0===e&&(e=t,t=this.diagonalSize);var n=e.slice();return n.splice(t,1),o(z,this).addRow(t,n),o(z,this).addColumn(t,e),this}},{key:"applyMask",value:function(t){if(t.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");var e,n=[],r=h(t.entries());try{for(r.s();!(e=r.n()).done;){var i=d(e.value,2),a=i[0];i[1]||n.push(a)}}catch(t){r.e(t)}finally{r.f()}n.reverse();for(var o=0,s=n;o<s.length;o++){var u=s[o];this.removeCross(u)}return this}},{key:"toCompact",value:function(){for(var t=this.diagonalSize,e=new Array(t*(t+1)/2),n=0,r=0,i=0;i<e.length;i++)e[i]=this.get(r,n),++n>=t&&(n=++r);return e}},{key:"upperRightEntries",value:p().mark((function t(){var e,n,r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0,n=0;case 1:if(!(e<this.diagonalSize)){t.next=9;break}return r=this.get(e,n),t.next=5,[e,n,r];case 5:++n>=this.diagonalSize&&(n=++e);case 6:t.next=1;break;case 9:case"end":return t.stop()}}),t,this)}))},{key:"upperRightValues",value:p().mark((function t(){var e,n,r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0,n=0;case 1:if(!(e<this.diagonalSize)){t.next=9;break}return r=this.get(e,n),t.next=5,r;case 5:++n>=this.diagonalSize&&(n=++e);case 6:t.next=1;break;case 9:case"end":return t.stop()}}),t,this)}))}],[{key:"isSymmetricMatrix",value:function(t){return I.isMatrix(t)&&"SymmetricMatrix"===t.klassType}},{key:"zeros",value:function(t){return new this(t)}},{key:"ones",value:function(t){return new this(t).fill(1)}},{key:"fromCompact",value:function(t){var n=t.length,r=(Math.sqrt(8*n+1)-1)/2;if(!Number.isInteger(r))throw new TypeError("This array is not a compact representation of a Symmetric Matrix, ".concat(JSON.stringify(t)));for(var i=new e(r),a=0,o=0,s=0;s<n;s++)i.set(a,o,t[s]),++a>=r&&(a=++o);return i}}])}(R);B.prototype.klassType="SymmetricMatrix";var G=function(t){function e(t){var n;if(v(this,e),!(n=s(this,e,[t])).isDistance())throw new TypeError("Provided arguments do no produce a distance matrix");return n}return u(e,t),g(e,[{key:"set",value:function(t,n,i){return t===n&&(i=0),r(e,"set",this,3)([t,n,i])}},{key:"addCross",value:function(t,n){return void 0===n&&(n=t,t=this.diagonalSize),(n=n.slice())[t]=0,r(e,"addCross",this,3)([t,n])}},{key:"toSymmetricMatrix",value:function(){return new B(this)}},{key:"clone",value:function(){var t,n=new e(this.diagonalSize),r=h(this.upperRightEntries());try{for(r.s();!(t=r.n()).done;){var i=d(t.value,3),a=i[0],o=i[1],s=i[2];a!==o&&n.set(a,o,s)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"toCompact",value:function(){for(var t=this.diagonalSize,e=new Array((t-1)*t/2),n=1,r=0,i=0;i<e.length;i++)e[i]=this.get(r,n),++n>=t&&(n=1+ ++r);return e}}],[{key:"isDistanceMatrix",value:function(t){return B.isSymmetricMatrix(t)&&"DistanceMatrix"===t.klassSubType}},{key:"fromCompact",value:function(t){var e=t.length;if(0===e)return new this(0);var n=(Math.sqrt(8*e+1)+1)/2;if(!Number.isInteger(n))throw new TypeError("This array is not a compact representation of a DistanceMatrix, ".concat(JSON.stringify(t)));for(var r=new this(n),i=1,a=0,o=0;o<e;o++)r.set(i,a,t[o]),++i>=n&&(i=1+ ++a);return r}}])}(B);G.prototype.klassSubType="DistanceMatrix";var W=function(t){function e(t,n,r){var i;return v(this,e),(i=s(this,e)).matrix=t,i.rows=n,i.columns=r,i}return u(e,t),g(e)}(R),V=function(t){function e(t,n){var r;return v(this,e),S(t,n),(r=s(this,e,[t,t.rows,1])).column=n,r}return u(e,t),g(e,[{key:"set",value:function(t,e,n){return this.matrix.set(t,this.column,n),this}},{key:"get",value:function(t){return this.matrix.get(t,this.column)}}])}(W),H=function(t){function e(t,n){var r;return v(this,e),P(t,n),(r=s(this,e,[t,t.rows,n.length])).columnIndices=n,r}return u(e,t),g(e,[{key:"set",value:function(t,e,n){return this.matrix.set(t,this.columnIndices[e],n),this}},{key:"get",value:function(t,e){return this.matrix.get(t,this.columnIndices[e])}}])}(W),Y=function(t){function e(t){return v(this,e),s(this,e,[t,t.rows,t.columns])}return u(e,t),g(e,[{key:"set",value:function(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}},{key:"get",value:function(t,e){return this.matrix.get(t,this.columns-e-1)}}])}(W),U=function(t){function e(t){return v(this,e),s(this,e,[t,t.rows,t.columns])}return u(e,t),g(e,[{key:"set",value:function(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}},{key:"get",value:function(t,e){return this.matrix.get(this.rows-t-1,e)}}])}(W),q=function(t){function e(t,n){var r;return v(this,e),O(t,n),(r=s(this,e,[t,1,t.columns])).row=n,r}return u(e,t),g(e,[{key:"set",value:function(t,e,n){return this.matrix.set(this.row,e,n),this}},{key:"get",value:function(t,e){return this.matrix.get(this.row,e)}}])}(W),X=function(t){function e(t,n){var r;return v(this,e),A(t,n),(r=s(this,e,[t,n.length,t.columns])).rowIndices=n,r}return u(e,t),g(e,[{key:"set",value:function(t,e,n){return this.matrix.set(this.rowIndices[t],e,n),this}},{key:"get",value:function(t,e){return this.matrix.get(this.rowIndices[t],e)}}])}(W),K=function(t){function e(t,n,r){var i;return v(this,e),A(t,n),P(t,r),(i=s(this,e,[t,n.length,r.length])).rowIndices=n,i.columnIndices=r,i}return u(e,t),g(e,[{key:"set",value:function(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}},{key:"get",value:function(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}])}(W),$=function(t){function e(t,n,r,i,a){var o;return v(this,e),N(t,n,r,i,a),(o=s(this,e,[t,r-n+1,a-i+1])).startRow=n,o.startColumn=i,o}return u(e,t),g(e,[{key:"set",value:function(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}},{key:"get",value:function(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}])}(W),Z=function(t){function e(t){return v(this,e),s(this,e,[t,t.columns,t.rows])}return u(e,t),g(e,[{key:"set",value:function(t,e,n){return this.matrix.set(e,t,n),this}},{key:"get",value:function(t,e){return this.matrix.get(e,t)}}])}(W),Q=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,e);var i=r.rows,a=void 0===i?1:i;if(t.length%a!==0)throw new Error("the data length is not divisible by the number of rows");return(n=s(this,e)).rows=a,n.columns=t.length/a,n.data=t,n}return u(e,t),g(e,[{key:"set",value:function(t,e,n){var r=this._calculateIndex(t,e);return this.data[r]=n,this}},{key:"get",value:function(t,e){var n=this._calculateIndex(t,e);return this.data[n]}},{key:"_calculateIndex",value:function(t,e){return t*this.columns+e}}])}(R),J=function(t){function e(t){var n;return v(this,e),(n=s(this,e)).data=t,n.rows=t.length,n.columns=t[0].length,n}return u(e,t),g(e,[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}}])}(R),tt=function(){return g((function t(e){v(this,t);var n,r,i,a,o,s,u,c,l,f=(e=J.checkMatrix(e)).clone(),d=f.rows,h=f.columns,p=new Float64Array(d),g=1;for(n=0;n<d;n++)p[n]=n;for(c=new Float64Array(d),r=0;r<h;r++){for(n=0;n<d;n++)c[n]=f.get(n,r);for(n=0;n<d;n++){for(l=Math.min(n,r),o=0,i=0;i<l;i++)o+=f.get(n,i)*c[i];c[n]-=o,f.set(n,r,c[n])}for(a=r,n=r+1;n<d;n++)Math.abs(c[n])>Math.abs(c[a])&&(a=n);if(a!==r){for(i=0;i<h;i++)s=f.get(a,i),f.set(a,i,f.get(r,i)),f.set(r,i,s);u=p[a],p[a]=p[r],p[r]=u,g=-g}if(r<d&&0!==f.get(r,r))for(n=r+1;n<d;n++)f.set(n,r,f.get(n,r)/f.get(r,r))}this.LU=f,this.pivotVector=p,this.pivotSign=g}),[{key:"isSingular",value:function(){for(var t=this.LU,e=t.columns,n=0;n<e;n++)if(0===t.get(n,n))return!0;return!1}},{key:"solve",value:function(t){t=I.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,r,i,a=t.columns,o=t.subMatrixRow(this.pivotVector,0,a-1),s=e.columns;for(i=0;i<s;i++)for(n=i+1;n<s;n++)for(r=0;r<a;r++)o.set(n,r,o.get(n,r)-o.get(i,r)*e.get(n,i));for(i=s-1;i>=0;i--){for(r=0;r<a;r++)o.set(i,r,o.get(i,r)/e.get(i,i));for(n=0;n<i;n++)for(r=0;r<a;r++)o.set(n,r,o.get(n,r)-o.get(i,r)*e.get(n,i))}return o}},{key:"determinant",get:function(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,n=t.columns,r=0;r<n;r++)e*=t.get(r,r);return e}},{key:"lowerTriangularMatrix",get:function(){for(var t=this.LU,e=t.rows,n=t.columns,r=new I(e,n),i=0;i<e;i++)for(var a=0;a<n;a++)i>a?r.set(i,a,t.get(i,a)):i===a?r.set(i,a,1):r.set(i,a,0);return r}},{key:"upperTriangularMatrix",get:function(){for(var t=this.LU,e=t.rows,n=t.columns,r=new I(e,n),i=0;i<e;i++)for(var a=0;a<n;a++)i<=a?r.set(i,a,t.get(i,a)):r.set(i,a,0);return r}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}])}();function et(t,e){var n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}var nt=function(){return g((function t(e){v(this,t);var n,r,i,a,o=(e=J.checkMatrix(e)).clone(),s=e.rows,u=e.columns,c=new Float64Array(u);for(i=0;i<u;i++){var l=0;for(n=i;n<s;n++)l=et(l,o.get(n,i));if(0!==l){for(o.get(i,i)<0&&(l=-l),n=i;n<s;n++)o.set(n,i,o.get(n,i)/l);for(o.set(i,i,o.get(i,i)+1),r=i+1;r<u;r++){for(a=0,n=i;n<s;n++)a+=o.get(n,i)*o.get(n,r);for(a=-a/o.get(i,i),n=i;n<s;n++)o.set(n,r,o.get(n,r)+a*o.get(n,i))}}c[i]=-l}this.QR=o,this.Rdiag=c}),[{key:"solve",value:function(t){t=I.checkMatrix(t);var e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r,i,a,o,s=t.columns,u=t.clone(),c=e.columns;for(a=0;a<c;a++)for(i=0;i<s;i++){for(o=0,r=a;r<n;r++)o+=e.get(r,a)*u.get(r,i);for(o=-o/e.get(a,a),r=a;r<n;r++)u.set(r,i,u.get(r,i)+o*e.get(r,a))}for(a=c-1;a>=0;a--){for(i=0;i<s;i++)u.set(a,i,u.get(a,i)/this.Rdiag[a]);for(r=0;r<a;r++)for(i=0;i<s;i++)u.set(r,i,u.get(r,i)-u.get(a,i)*e.get(r,a))}return u.subMatrix(0,c-1,0,s-1)}},{key:"isFullRank",value:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var t,e,n=this.QR,r=n.columns,i=new I(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)t<e?i.set(t,e,n.get(t,e)):t===e?i.set(t,e,this.Rdiag[t]):i.set(t,e,0);return i}},{key:"orthogonalMatrix",get:function(){var t,e,n,r,i=this.QR,a=i.rows,o=i.columns,s=new I(a,o);for(n=o-1;n>=0;n--){for(t=0;t<a;t++)s.set(t,n,0);for(s.set(n,n,1),e=n;e<o;e++)if(0!==i.get(n,n)){for(r=0,t=n;t<a;t++)r+=i.get(t,n)*s.get(t,e);for(r=-r/i.get(n,n),t=n;t<a;t++)s.set(t,e,s.get(t,e)+r*i.get(t,n))}}return s}}])}(),rt=function(){return g((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(v(this,t),(e=J.checkMatrix(e)).isEmpty())throw new Error("Matrix must be non-empty");var r,i=e.rows,a=e.columns,o=n.computeLeftSingularVectors,s=void 0===o||o,u=n.computeRightSingularVectors,c=void 0===u||u,l=n.autoTranspose,f=void 0!==l&&l,d=Boolean(s),h=Boolean(c),p=!1;if(i<a)if(f){i=(r=e.transpose()).rows,a=r.columns,p=!0;var g=d;d=h,h=g}else r=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else r=e.clone();for(var y=Math.min(i,a),m=Math.min(i+1,a),b=new Float64Array(m),x=new I(i,y),w=new I(a,a),k=new Float64Array(a),E=new Float64Array(i),O=new Float64Array(m),S=0;S<m;S++)O[S]=S;for(var M=Math.min(i-1,a),T=Math.max(0,Math.min(a-2,i)),A=Math.max(M,T),P=0;P<A;P++){if(P<M){b[P]=0;for(var N=P;N<i;N++)b[P]=et(b[P],r.get(N,P));if(0!==b[P]){r.get(P,P)<0&&(b[P]=-b[P]);for(var C=P;C<i;C++)r.set(C,P,r.get(C,P)/b[P]);r.set(P,P,r.get(P,P)+1)}b[P]=-b[P]}for(var _=P+1;_<a;_++){if(P<M&&0!==b[P]){for(var L=0,R=P;R<i;R++)L+=r.get(R,P)*r.get(R,_);L=-L/r.get(P,P);for(var j=P;j<i;j++)r.set(j,_,r.get(j,_)+L*r.get(j,P))}k[_]=r.get(P,_)}if(d&&P<M)for(var D=P;D<i;D++)x.set(D,P,r.get(D,P));if(P<T){k[P]=0;for(var F=P+1;F<a;F++)k[P]=et(k[P],k[F]);if(0!==k[P]){k[P+1]<0&&(k[P]=0-k[P]);for(var z=P+1;z<a;z++)k[z]/=k[P];k[P+1]+=1}if(k[P]=-k[P],P+1<i&&0!==k[P]){for(var B=P+1;B<i;B++)E[B]=0;for(var G=P+1;G<i;G++)for(var W=P+1;W<a;W++)E[G]+=k[W]*r.get(G,W);for(var V=P+1;V<a;V++)for(var H=-k[V]/k[P+1],Y=P+1;Y<i;Y++)r.set(Y,V,r.get(Y,V)+H*E[Y])}if(h)for(var U=P+1;U<a;U++)w.set(U,P,k[U])}}var q=Math.min(a,i+1);if(M<a&&(b[M]=r.get(M,M)),i<q&&(b[q-1]=0),T+1<q&&(k[T]=r.get(T,q-1)),k[q-1]=0,d){for(var X=M;X<y;X++){for(var K=0;K<i;K++)x.set(K,X,0);x.set(X,X,1)}for(var $=M-1;$>=0;$--)if(0!==b[$]){for(var Z=$+1;Z<y;Z++){for(var Q=0,tt=$;tt<i;tt++)Q+=x.get(tt,$)*x.get(tt,Z);Q=-Q/x.get($,$);for(var nt=$;nt<i;nt++)x.set(nt,Z,x.get(nt,Z)+Q*x.get(nt,$))}for(var rt=$;rt<i;rt++)x.set(rt,$,-x.get(rt,$));x.set($,$,1+x.get($,$));for(var it=0;it<$-1;it++)x.set(it,$,0)}else{for(var at=0;at<i;at++)x.set(at,$,0);x.set($,$,1)}}if(h)for(var ot=a-1;ot>=0;ot--){if(ot<T&&0!==k[ot])for(var st=ot+1;st<a;st++){for(var ut=0,ct=ot+1;ct<a;ct++)ut+=w.get(ct,ot)*w.get(ct,st);ut=-ut/w.get(ot+1,ot);for(var lt=ot+1;lt<a;lt++)w.set(lt,st,w.get(lt,st)+ut*w.get(lt,ot))}for(var ft=0;ft<a;ft++)w.set(ft,ot,0);w.set(ot,ot,1)}for(var dt=q-1,ht=Number.EPSILON;q>0;){var pt=void 0,vt=void 0;for(pt=q-2;pt>=-1&&-1!==pt;pt--){var gt=Number.MIN_VALUE+ht*Math.abs(b[pt]+Math.abs(b[pt+1]));if(Math.abs(k[pt])<=gt||Number.isNaN(k[pt])){k[pt]=0;break}}if(pt===q-2)vt=4;else{var yt=void 0;for(yt=q-1;yt>=pt&&yt!==pt;yt--){var mt=(yt!==q?Math.abs(k[yt]):0)+(yt!==pt+1?Math.abs(k[yt-1]):0);if(Math.abs(b[yt])<=ht*mt){b[yt]=0;break}}yt===pt?vt=3:yt===q-1?vt=1:(vt=2,pt=yt)}switch(pt++,vt){case 1:var bt=k[q-2];k[q-2]=0;for(var xt=q-2;xt>=pt;xt--){var wt=et(b[xt],bt),kt=b[xt]/wt,Et=bt/wt;if(b[xt]=wt,xt!==pt&&(bt=-Et*k[xt-1],k[xt-1]=kt*k[xt-1]),h)for(var Ot=0;Ot<a;Ot++)wt=kt*w.get(Ot,xt)+Et*w.get(Ot,q-1),w.set(Ot,q-1,-Et*w.get(Ot,xt)+kt*w.get(Ot,q-1)),w.set(Ot,xt,wt)}break;case 2:var St=k[pt-1];k[pt-1]=0;for(var Mt=pt;Mt<q;Mt++){var Tt=et(b[Mt],St),At=b[Mt]/Tt,Pt=St/Tt;if(b[Mt]=Tt,St=-Pt*k[Mt],k[Mt]=At*k[Mt],d)for(var Nt=0;Nt<i;Nt++)Tt=At*x.get(Nt,Mt)+Pt*x.get(Nt,pt-1),x.set(Nt,pt-1,-Pt*x.get(Nt,Mt)+At*x.get(Nt,pt-1)),x.set(Nt,Mt,Tt)}break;case 3:var Ct=Math.max(Math.abs(b[q-1]),Math.abs(b[q-2]),Math.abs(k[q-2]),Math.abs(b[pt]),Math.abs(k[pt])),_t=b[q-1]/Ct,Lt=b[q-2]/Ct,Rt=k[q-2]/Ct,jt=b[pt]/Ct,Dt=k[pt]/Ct,It=((Lt+_t)*(Lt-_t)+Rt*Rt)/2,Ft=_t*Rt*(_t*Rt),zt=0;0===It&&0===Ft||(zt=Ft/(It+(zt=It<0?0-Math.sqrt(It*It+Ft):Math.sqrt(It*It+Ft))));for(var Bt=(jt+_t)*(jt-_t)+zt,Gt=jt*Dt,Wt=pt;Wt<q-1;Wt++){var Vt=et(Bt,Gt);0===Vt&&(Vt=Number.MIN_VALUE);var Ht=Bt/Vt,Yt=Gt/Vt;if(Wt!==pt&&(k[Wt-1]=Vt),Bt=Ht*b[Wt]+Yt*k[Wt],k[Wt]=Ht*k[Wt]-Yt*b[Wt],Gt=Yt*b[Wt+1],b[Wt+1]=Ht*b[Wt+1],h)for(var Ut=0;Ut<a;Ut++)Vt=Ht*w.get(Ut,Wt)+Yt*w.get(Ut,Wt+1),w.set(Ut,Wt+1,-Yt*w.get(Ut,Wt)+Ht*w.get(Ut,Wt+1)),w.set(Ut,Wt,Vt);if(0===(Vt=et(Bt,Gt))&&(Vt=Number.MIN_VALUE),Ht=Bt/Vt,Yt=Gt/Vt,b[Wt]=Vt,Bt=Ht*k[Wt]+Yt*b[Wt+1],b[Wt+1]=-Yt*k[Wt]+Ht*b[Wt+1],Gt=Yt*k[Wt+1],k[Wt+1]=Ht*k[Wt+1],d&&Wt<i-1)for(var qt=0;qt<i;qt++)Vt=Ht*x.get(qt,Wt)+Yt*x.get(qt,Wt+1),x.set(qt,Wt+1,-Yt*x.get(qt,Wt)+Ht*x.get(qt,Wt+1)),x.set(qt,Wt,Vt)}k[q-2]=Bt;break;case 4:if(b[pt]<=0&&(b[pt]=b[pt]<0?-b[pt]:0,h))for(var Xt=0;Xt<=dt;Xt++)w.set(Xt,pt,-w.get(Xt,pt));for(;pt<dt&&!(b[pt]>=b[pt+1]);){var Kt=b[pt];if(b[pt]=b[pt+1],b[pt+1]=Kt,h&&pt<a-1)for(var $t=0;$t<a;$t++)Kt=w.get($t,pt+1),w.set($t,pt+1,w.get($t,pt)),w.set($t,pt,Kt);if(d&&pt<i-1)for(var Zt=0;Zt<i;Zt++)Kt=x.get(Zt,pt+1),x.set(Zt,pt+1,x.get(Zt,pt)),x.set(Zt,pt,Kt);pt++}q--}}if(p){var Qt=w;w=x,x=Qt}this.m=i,this.n=a,this.s=b,this.U=x,this.V=w}),[{key:"solve",value:function(t){for(var e=t,n=this.threshold,r=this.s.length,i=I.zeros(r,r),a=0;a<r;a++)Math.abs(this.s[a])<=n?i.set(a,a,0):i.set(a,a,1/this.s[a]);for(var o=this.U,s=this.rightSingularVectors,u=s.mmul(i),c=s.rows,l=o.rows,f=I.zeros(c,l),d=0;d<c;d++)for(var h=0;h<l;h++){for(var p=0,v=0;v<r;v++)p+=u.get(d,v)*o.get(h,v);f.set(d,h,p)}return f.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(I.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,n=t.rows,r=t.columns,i=new I(n,this.s.length),a=0;a<n;a++)for(var o=0;o<r;o++)Math.abs(this.s[o])>e&&i.set(a,o,t.get(a,o)/this.s[o]);for(var s=this.U,u=s.rows,c=s.columns,l=new I(n,u),f=0;f<n;f++)for(var d=0;d<u;d++){for(var h=0,p=0;p<c;p++)h+=i.get(f,p)*s.get(d,p);l.set(f,d,h)}return l}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s,r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return I.diag(this.s)}}])}();function it(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=J.checkMatrix(t),e=J.checkMatrix(e),n?new rt(t).solve(e):t.isSquare()?new tt(t).solve(e):new nt(t).solve(e)}function at(t,e){for(var n=[],r=0;r<t;r++)r!==e&&n.push(r);return n}function ot(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-9;if(t>(arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-9))return new Array(e.rows+1).fill(0);for(var i=e.addRow(n,[0]),a=0;a<i.rows;a++)Math.abs(i.get(a,0))<r&&i.set(a,0,0);return i.to1DArray()}var st=function(){return g((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,t);var r=n.assumeSymmetric,i=void 0!==r&&r;if(!(e=J.checkMatrix(e)).isSquare())throw new Error("Matrix is not a square matrix");if(e.isEmpty())throw new Error("Matrix must be non-empty");var a,o,s=e.columns,u=new I(s,s),c=new Float64Array(s),l=new Float64Array(s),f=e;if(i||e.isSymmetric()){for(a=0;a<s;a++)for(o=0;o<s;o++)u.set(a,o,f.get(a,o));!function(t,e,n,r){var i,a,o,s,u,c,l,f;for(u=0;u<t;u++)n[u]=r.get(t-1,u);for(s=t-1;s>0;s--){for(f=0,o=0,c=0;c<s;c++)f+=Math.abs(n[c]);if(0===f)for(e[s]=n[s-1],u=0;u<s;u++)n[u]=r.get(s-1,u),r.set(s,u,0),r.set(u,s,0);else{for(c=0;c<s;c++)n[c]/=f,o+=n[c]*n[c];for(i=n[s-1],a=Math.sqrt(o),i>0&&(a=-a),e[s]=f*a,o-=i*a,n[s-1]=i-a,u=0;u<s;u++)e[u]=0;for(u=0;u<s;u++){for(i=n[u],r.set(u,s,i),a=e[u]+r.get(u,u)*i,c=u+1;c<=s-1;c++)a+=r.get(c,u)*n[c],e[c]+=r.get(c,u)*i;e[u]=a}for(i=0,u=0;u<s;u++)e[u]/=o,i+=e[u]*n[u];for(l=i/(o+o),u=0;u<s;u++)e[u]-=l*n[u];for(u=0;u<s;u++){for(i=n[u],a=e[u],c=u;c<=s-1;c++)r.set(c,u,r.get(c,u)-(i*e[c]+a*n[c]));n[u]=r.get(s-1,u),r.set(s,u,0)}}n[s]=o}for(s=0;s<t-1;s++){if(r.set(t-1,s,r.get(s,s)),r.set(s,s,1),0!==(o=n[s+1])){for(c=0;c<=s;c++)n[c]=r.get(c,s+1)/o;for(u=0;u<=s;u++){for(a=0,c=0;c<=s;c++)a+=r.get(c,s+1)*r.get(c,u);for(c=0;c<=s;c++)r.set(c,u,r.get(c,u)-a*n[c])}}for(c=0;c<=s;c++)r.set(c,s+1,0)}for(u=0;u<t;u++)n[u]=r.get(t-1,u),r.set(t-1,u,0);r.set(t-1,t-1,1),e[0]=0}(s,l,c,u),function(t,e,n,r){var i,a,o,s,u,c,l,f,d,h,p,v,g,y,m,b;for(o=1;o<t;o++)e[o-1]=e[o];e[t-1]=0;var x=0,w=0,k=Number.EPSILON;for(c=0;c<t;c++){for(w=Math.max(w,Math.abs(n[c])+Math.abs(e[c])),l=c;l<t&&!(Math.abs(e[l])<=k*w);)l++;if(l>c)do{for(i=n[c],d=et(f=(n[c+1]-i)/(2*e[c]),1),f<0&&(d=-d),n[c]=e[c]/(f+d),n[c+1]=e[c]*(f+d),h=n[c+1],a=i-n[c],o=c+2;o<t;o++)n[o]-=a;for(x+=a,f=n[l],v=p=1,g=p,y=e[c+1],m=0,b=0,o=l-1;o>=c;o--)for(g=v,v=p,b=m,i=p*e[o],a=p*f,d=et(f,e[o]),e[o+1]=m*d,m=e[o]/d,f=(p=f/d)*n[o]-m*i,n[o+1]=a+m*(p*i+m*n[o]),u=0;u<t;u++)a=r.get(u,o+1),r.set(u,o+1,m*r.get(u,o)+p*a),r.set(u,o,p*r.get(u,o)-m*a);f=-m*b*g*y*e[c]/h,e[c]=m*f,n[c]=p*f}while(Math.abs(e[c])>k*w);n[c]=n[c]+x,e[c]=0}for(o=0;o<t-1;o++){for(u=o,f=n[o],s=o+1;s<t;s++)n[s]<f&&(u=s,f=n[s]);if(u!==o)for(n[u]=n[o],n[o]=f,s=0;s<t;s++)f=r.get(s,o),r.set(s,o,r.get(s,u)),r.set(s,u,f)}}(s,l,c,u)}else{var d=new I(s,s),h=new Float64Array(s);for(o=0;o<s;o++)for(a=0;a<s;a++)d.set(a,o,f.get(a,o));!function(t,e,n,r){var i,a,o,s,u,c,l,f=t-1;for(c=1;c<=f-1;c++){for(l=0,s=c;s<=f;s++)l+=Math.abs(e.get(s,c-1));if(0!==l){for(o=0,s=f;s>=c;s--)n[s]=e.get(s,c-1)/l,o+=n[s]*n[s];for(a=Math.sqrt(o),n[c]>0&&(a=-a),o-=n[c]*a,n[c]=n[c]-a,u=c;u<t;u++){for(i=0,s=f;s>=c;s--)i+=n[s]*e.get(s,u);for(i/=o,s=c;s<=f;s++)e.set(s,u,e.get(s,u)-i*n[s])}for(s=0;s<=f;s++){for(i=0,u=f;u>=c;u--)i+=n[u]*e.get(s,u);for(i/=o,u=c;u<=f;u++)e.set(s,u,e.get(s,u)-i*n[u])}n[c]=l*n[c],e.set(c,c-1,l*a)}}for(s=0;s<t;s++)for(u=0;u<t;u++)r.set(s,u,s===u?1:0);for(c=f-1;c>=1;c--)if(0!==e.get(c,c-1)){for(s=c+1;s<=f;s++)n[s]=e.get(s,c-1);for(u=c;u<=f;u++){for(a=0,s=c;s<=f;s++)a+=n[s]*r.get(s,u);for(a=a/n[c]/e.get(c,c-1),s=c;s<=f;s++)r.set(s,u,r.get(s,u)+a*n[s])}}}(s,d,h,u),function(t,e,n,r,i){var a,o,s,u,c,l,f,d,h,p,v,g,y,m,b,x=t-1,w=t-1,k=Number.EPSILON,E=0,O=0,S=0,M=0,T=0,A=0,P=0,N=0;for(a=0;a<t;a++)for((a<0||a>w)&&(n[a]=i.get(a,a),e[a]=0),o=Math.max(a-1,0);o<t;o++)O+=Math.abs(i.get(a,o));for(;x>=0;){for(u=x;u>0&&(0===(A=Math.abs(i.get(u-1,u-1))+Math.abs(i.get(u,u)))&&(A=O),!(Math.abs(i.get(u,u-1))<k*A));)u--;if(u===x)i.set(x,x,i.get(x,x)+E),n[x]=i.get(x,x),e[x]=0,x--,N=0;else if(u===x-1){if(f=i.get(x,x-1)*i.get(x-1,x),M=(S=(i.get(x-1,x-1)-i.get(x,x))/2)*S+f,P=Math.sqrt(Math.abs(M)),i.set(x,x,i.get(x,x)+E),i.set(x-1,x-1,i.get(x-1,x-1)+E),d=i.get(x,x),M>=0){for(P=S>=0?S+P:S-P,n[x-1]=d+P,n[x]=n[x-1],0!==P&&(n[x]=d-f/P),e[x-1]=0,e[x]=0,S=(d=i.get(x,x-1))/(A=Math.abs(d)+Math.abs(P)),M=P/A,S/=T=Math.sqrt(S*S+M*M),M/=T,o=x-1;o<t;o++)P=i.get(x-1,o),i.set(x-1,o,M*P+S*i.get(x,o)),i.set(x,o,M*i.get(x,o)-S*P);for(a=0;a<=x;a++)P=i.get(a,x-1),i.set(a,x-1,M*P+S*i.get(a,x)),i.set(a,x,M*i.get(a,x)-S*P);for(a=0;a<=w;a++)P=r.get(a,x-1),r.set(a,x-1,M*P+S*r.get(a,x)),r.set(a,x,M*r.get(a,x)-S*P)}else n[x-1]=d+S,n[x]=d+S,e[x-1]=P,e[x]=-P;x-=2,N=0}else{if(d=i.get(x,x),h=0,f=0,u<x&&(h=i.get(x-1,x-1),f=i.get(x,x-1)*i.get(x-1,x)),10===N){for(E+=d,a=0;a<=x;a++)i.set(a,a,i.get(a,a)-d);d=h=.75*(A=Math.abs(i.get(x,x-1))+Math.abs(i.get(x-1,x-2))),f=-.4375*A*A}if(30===N&&(A=(A=(h-d)/2)*A+f)>0){for(A=Math.sqrt(A),h<d&&(A=-A),A=d-f/((h-d)/2+A),a=0;a<=x;a++)i.set(a,a,i.get(a,a)-A);E+=A,d=h=f=.964}for(N+=1,c=x-2;c>=u&&(S=((T=d-(P=i.get(c,c)))*(A=h-P)-f)/i.get(c+1,c)+i.get(c,c+1),M=i.get(c+1,c+1)-P-T-A,T=i.get(c+2,c+1),S/=A=Math.abs(S)+Math.abs(M)+Math.abs(T),M/=A,T/=A,c!==u)&&!(Math.abs(i.get(c,c-1))*(Math.abs(M)+Math.abs(T))<k*(Math.abs(S)*(Math.abs(i.get(c-1,c-1))+Math.abs(P)+Math.abs(i.get(c+1,c+1)))));)c--;for(a=c+2;a<=x;a++)i.set(a,a-2,0),a>c+2&&i.set(a,a-3,0);for(s=c;s<=x-1&&(m=s!==x-1,s!==c&&(S=i.get(s,s-1),M=i.get(s+1,s-1),T=m?i.get(s+2,s-1):0,0!==(d=Math.abs(S)+Math.abs(M)+Math.abs(T))&&(S/=d,M/=d,T/=d)),0!==d);s++)if(A=Math.sqrt(S*S+M*M+T*T),S<0&&(A=-A),0!==A){for(s!==c?i.set(s,s-1,-A*d):u!==c&&i.set(s,s-1,-i.get(s,s-1)),d=(S+=A)/A,h=M/A,P=T/A,M/=S,T/=S,o=s;o<t;o++)S=i.get(s,o)+M*i.get(s+1,o),m&&(S+=T*i.get(s+2,o),i.set(s+2,o,i.get(s+2,o)-S*P)),i.set(s,o,i.get(s,o)-S*d),i.set(s+1,o,i.get(s+1,o)-S*h);for(a=0;a<=Math.min(x,s+3);a++)S=d*i.get(a,s)+h*i.get(a,s+1),m&&(S+=P*i.get(a,s+2),i.set(a,s+2,i.get(a,s+2)-S*T)),i.set(a,s,i.get(a,s)-S),i.set(a,s+1,i.get(a,s+1)-S*M);for(a=0;a<=w;a++)S=d*r.get(a,s)+h*r.get(a,s+1),m&&(S+=P*r.get(a,s+2),r.set(a,s+2,r.get(a,s+2)-S*T)),r.set(a,s,r.get(a,s)-S),r.set(a,s+1,r.get(a,s+1)-S*M)}}}if(0!==O){for(x=t-1;x>=0;x--)if(S=n[x],0===(M=e[x]))for(u=x,i.set(x,x,1),a=x-1;a>=0;a--){for(f=i.get(a,a)-S,T=0,o=u;o<=x;o++)T+=i.get(a,o)*i.get(o,x);if(e[a]<0)P=f,A=T;else if(u=a,0===e[a]?i.set(a,x,0!==f?-T/f:-T/(k*O)):(d=i.get(a,a+1),h=i.get(a+1,a),l=(d*A-P*T)/(M=(n[a]-S)*(n[a]-S)+e[a]*e[a]),i.set(a,x,l),i.set(a+1,x,Math.abs(d)>Math.abs(P)?(-T-f*l)/d:(-A-h*l)/P)),k*(l=Math.abs(i.get(a,x)))*l>1)for(o=a;o<=x;o++)i.set(o,x,i.get(o,x)/l)}else if(M<0)for(u=x-1,Math.abs(i.get(x,x-1))>Math.abs(i.get(x-1,x))?(i.set(x-1,x-1,M/i.get(x,x-1)),i.set(x-1,x,-(i.get(x,x)-S)/i.get(x,x-1))):(b=ut(0,-i.get(x-1,x),i.get(x-1,x-1)-S,M),i.set(x-1,x-1,b[0]),i.set(x-1,x,b[1])),i.set(x,x-1,0),i.set(x,x,1),a=x-2;a>=0;a--){for(p=0,v=0,o=u;o<=x;o++)p+=i.get(a,o)*i.get(o,x-1),v+=i.get(a,o)*i.get(o,x);if(f=i.get(a,a)-S,e[a]<0)P=f,T=p,A=v;else if(u=a,0===e[a]?(b=ut(-p,-v,f,M),i.set(a,x-1,b[0]),i.set(a,x,b[1])):(d=i.get(a,a+1),h=i.get(a+1,a),g=(n[a]-S)*(n[a]-S)+e[a]*e[a]-M*M,y=2*(n[a]-S)*M,0===g&&0===y&&(g=k*O*(Math.abs(f)+Math.abs(M)+Math.abs(d)+Math.abs(h)+Math.abs(P))),b=ut(d*T-P*p+M*v,d*A-P*v-M*p,g,y),i.set(a,x-1,b[0]),i.set(a,x,b[1]),Math.abs(d)>Math.abs(P)+Math.abs(M)?(i.set(a+1,x-1,(-p-f*i.get(a,x-1)+M*i.get(a,x))/d),i.set(a+1,x,(-v-f*i.get(a,x)-M*i.get(a,x-1))/d)):(b=ut(-T-h*i.get(a,x-1),-A-h*i.get(a,x),P,M),i.set(a+1,x-1,b[0]),i.set(a+1,x,b[1]))),k*(l=Math.max(Math.abs(i.get(a,x-1)),Math.abs(i.get(a,x))))*l>1)for(o=a;o<=x;o++)i.set(o,x-1,i.get(o,x-1)/l),i.set(o,x,i.get(o,x)/l)}for(a=0;a<t;a++)if(a<0||a>w)for(o=a;o<t;o++)r.set(a,o,i.get(a,o));for(o=t-1;o>=0;o--)for(a=0;a<=w;a++){for(P=0,s=0;s<=Math.min(o,w);s++)P+=r.get(a,s)*i.get(s,o);r.set(a,o,P)}}}(s,l,c,u,d)}this.n=s,this.e=l,this.d=c,this.V=u}),[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var t,e,n=this.n,r=this.e,i=this.d,a=new I(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)a.set(t,e,0);a.set(t,t,i[t]),r[t]>0?a.set(t,t+1,r[t]):r[t]<0&&a.set(t,t-1,r[t])}return a}}])}();function ut(t,e,n,r){var i,a;return Math.abs(n)>Math.abs(r)?[(t+(i=r/n)*e)/(a=n+i*r),(e-i*t)/a]:[((i=n/r)*t+e)/(a=r+i*n),(i*e-t)/a]}var ct=function(){return g((function t(e){if(v(this,t),!(e=J.checkMatrix(e)).isSymmetric())throw new Error("Matrix is not symmetric");var n,r,i,a=e,o=a.rows,s=new I(o,o),u=!0;for(r=0;r<o;r++){var c=0;for(i=0;i<r;i++){var l=0;for(n=0;n<i;n++)l+=s.get(i,n)*s.get(r,n);l=(a.get(r,i)-l)/s.get(i,i),s.set(r,i,l),c+=l*l}for(c=a.get(r,r)-c,u&&(u=c>0),s.set(r,r,Math.sqrt(Math.max(c,0))),i=r+1;i<o;i++)s.set(r,i,0)}this.L=s,this.positiveDefinite=u}),[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(t){t=J.checkMatrix(t);var e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");var r,i,a,o=t.columns,s=t.clone();for(a=0;a<n;a++)for(i=0;i<o;i++){for(r=0;r<a;r++)s.set(a,i,s.get(a,i)-s.get(r,i)*e.get(a,r));s.set(a,i,s.get(a,i)/e.get(a,a))}for(a=n-1;a>=0;a--)for(i=0;i<o;i++){for(r=a+1;r<n;r++)s.set(a,i,s.get(a,i)-s.get(r,i)*e.get(r,a));s.set(a,i,s.get(a,i)/e.get(a,a))}return s}},{key:"lowerTriangularMatrix",get:function(){return this.L}}])}(),lt=g((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,t),e=J.checkMatrix(e);var r,i=n.Y,a=n.scaleScores,o=void 0!==a&&a,s=n.maxIterations,u=void 0===s?1e3:s,c=n.terminationCriteria,l=void 0===c?1e-10:c;if(i){if((i=y.isAnyArray(i)&&"number"==typeof i[0]?I.columnVector(i):J.checkMatrix(i)).rows!==e.rows)throw new Error("Y should have the same number of rows as X");r=i.getColumnVector(0)}else r=e.getColumnVector(0);for(var f,d,h,p,g=1,m=0;m<u&&g>l;m++)h=(h=e.transpose().mmul(r).div(r.transpose().mmul(r).get(0,0))).div(h.norm()),f=e.mmul(h).div(h.transpose().mmul(h).get(0,0)),m>0&&(g=f.clone().sub(p).pow(2).sum()),p=f.clone(),i?(d=(d=i.transpose().mmul(f).div(f.transpose().mmul(f).get(0,0))).div(d.norm()),r=i.mmul(d).div(d.transpose().mmul(d).get(0,0))):r=f;if(i){var b=e.transpose().mmul(f).div(f.transpose().mmul(f).get(0,0));b=b.div(b.norm());var x=e.clone().sub(f.clone().mmul(b.transpose())),w=r.transpose().mmul(f).div(f.transpose().mmul(f).get(0,0)),k=i.clone().sub(f.clone().mulS(w.get(0,0)).mmul(d.transpose()));this.t=f,this.p=b.transpose(),this.w=h.transpose(),this.q=d,this.u=r,this.s=f.transpose().mmul(f),this.xResidual=x,this.yResidual=k,this.betas=w}else this.w=h.transpose(),this.s=f.transpose().mmul(f).sqrt(),this.t=o?f.clone().div(this.s.get(0,0)):f,this.xResidual=e.sub(f.mmul(h.transpose()))}));e.y3=R,e.jy=ct,e.oN=ct,e.Hc=G,e.cg=st,e.hj=st,e.LU=tt,e.Tb=tt,e.uq=I,e.Zm=H,e.Dq=V,e.__=Y,e.q0=U,e.lh=X,e.pI=q,e.zC=K,e.zg=$,e.g6=Z,e.OL=lt,e.ks=lt,e.QR=nt,e.jp=nt,e.mk=rt,e.W2=rt,e.l=B,e.KY=Q,e.dv=J,e.BR=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=new I(t);var r=!1;if("object"!=typeof e||I.isMatrix(e)||y.isAnyArray(e)?e=new I(e):(n=e,e=t,r=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");var i=n,a=i.center,o=void 0===a||a,s=i.scale,u=void 0===s||s;o&&(t.center("column"),r||e.center("column")),u&&(t.scale("column"),r||e.scale("column"));for(var c=t.standardDeviation("column",{unbiased:!0}),l=r?c:e.standardDeviation("column",{unbiased:!0}),f=t.transpose().mmul(e),d=0;d<f.rows;d++)for(var h=0;h<f.columns;h++)f.set(d,h,f.get(d,h)*(1/(c[d]*l[h]))*(1/(t.rows-1)));return f},e.Wu=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=new I(t);var r=!1;if("object"!=typeof e||I.isMatrix(e)||y.isAnyArray(e)?e=new I(e):(n=e,e=t,r=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");var i=n.center;(void 0===i||i)&&(t=t.center("column"),r||(e=e.center("column")));for(var a=t.transpose().mmul(e),o=0;o<a.rows;o++)for(var s=0;s<a.columns;s++)a.set(o,s,a.get(o,s)*(1/(t.rows-1)));return a},e.a4=function t(e){var n,r,i,a,o,s;if((e=I.checkMatrix(e)).isSquare())return 0===e.columns?1:2===e.columns?(n=e.get(0,0),r=e.get(0,1),i=e.get(1,0),n*e.get(1,1)-r*i):3===e.columns?(a=new K(e,[1,2],[1,2]),o=new K(e,[1,2],[0,2]),s=new K(e,[1,2],[0,1]),n=e.get(0,0),r=e.get(0,1),i=e.get(0,2),n*t(a)-r*t(o)+i*t(s)):new tt(e).determinant;throw Error("determinant can only be calculated for a square matrix")},e.DI=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=J.checkMatrix(t),e?new rt(t).inverse():it(t,I.eye(t.rows))},e.Jo=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.thresholdValue,r=void 0===n?1e-9:n,i=e.thresholdError,a=void 0===i?1e-9:i,o=(t=I.checkMatrix(t)).rows,s=new I(o,o),u=0;u<o;u++){var c=I.columnVector(t.getRow(u)),l=t.subMatrixRow(at(o,u)).transpose(),f=new rt(l).solve(c),d=I.sub(c,l.mmul(f)).abs().max();s.setRow(u,ot(d,f,u,r,a))}return s},e.Zi=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;if((t=I.checkMatrix(t)).isEmpty())return t.transpose();for(var n=new rt(t,{autoTranspose:!0}),r=n.leftSingularVectors,i=n.rightSingularVectors,a=n.diagonal,o=0;o<a.length;o++)Math.abs(a[o])>e?a[o]=1/a[o]:a[o]=0;return i.mmul(I.diag(a).mmul(r.transpose()))},e.kH=it,e.LV=function(t,e){if(y.isAnyArray(t))return t[0]&&y.isAnyArray(t[0])?new J(t):new Q(t,e);throw new Error("the argument is not an array")}},6757:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},6785:(t,e,n)=>{var r=n(334);t.exports=function(t,e){var n=[];return r(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}},6804:t=>{t.exports=function(t,e){return t>e}},6853:(t,e,n)=>{var r=n(9776),i=n(6050),a=n(6521),o=n(5330),s=n(498),u=n(8962),c=n(9217),l=n(6646),f="[object Arguments]",d="[object Array]",h="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,v,g,y){var m=u(t),b=u(e),x=m?d:s(t),w=b?d:s(e),k=(x=x==f?h:x)==h,E=(w=w==f?h:w)==h,O=x==w;if(O&&c(t)){if(!c(e))return!1;m=!0,k=!1}if(O&&!k)return y||(y=new r),m||l(t)?i(t,e,n,v,g,y):a(t,e,x,n,v,g,y);if(!(1&n)){var S=k&&p.call(t,"__wrapped__"),M=E&&p.call(e,"__wrapped__");if(S||M){var T=S?t.value():t,A=M?e.value():e;return y||(y=new r),g(T,A,n,v,y)}}return!!O&&(y||(y=new r),o(t,e,n,v,g,y))}},6876:(t,e,n)=>{var r=n(5405),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},6889:(t,e,n)=>{"use strict";var r=n(6036),i=n(1882),a=n(5362).positionX;t.exports=function(t){(function(t){var e=i.buildLayerMatrix(t),n=t.graph().ranksep,a=0;r.forEach(e,(function(e){var i=r.max(r.map(e,(function(e){return t.node(e).height})));r.forEach(e,(function(e){t.node(e).y=a+i/2})),a+=i+n}))})(t=i.asNonCompoundGraph(t)),r.forEach(a(t),(function(e,n){t.node(n).x=e}))}},7023:(t,e,n)=>{var r=n(9210),i=n(1167);t.exports=function(t,e){return i(t||[],e||[],r)}},7029:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},7108:(t,e,n)=>{var r=n(5143);function i(){return t.exports=i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=r(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},t.exports.__esModule=!0,t.exports.default=t.exports,i.apply(null,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},7159:(t,e,n)=>{var r=n(8729),i=n(199),a=n(1251);t.exports=function(t,e,n){return e=r(e),a(t,i()?Reflect.construct(e,n||[],r(t).constructor):e.apply(t,n))},t.exports.__esModule=!0,t.exports.default=t.exports},7173:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},7219:(t,e,n)=>{var r=n(5422);t.exports=function(){this.__data__=new r,this.size=0}},7236:(t,e,n)=>{var r=n(1906);t.exports=function(t,e,n){r(t,e),e.set(t,n)},t.exports.__esModule=!0,t.exports.default=t.exports},7289:function(t,e){!function(t){"use strict";function e(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}function n(t,e){for(var n=0,r=0;r<t.length;++r)n+=t[r]*e[r];return n}function r(t){return Math.sqrt(n(t,t))}function i(t,e,n){for(var r=0;r<e.length;++r)t[r]=e[r]*n}function a(t,e,n,r,i){for(var a=0;a<t.length;++a)t[a]=e*n[a]+r*i[a]}function o(t,e,r,i,o,s,u){var c=r.fx,l=n(r.fxprime,e),f=c,d=c,h=l,p=0;function v(d,p,v){for(var g=0;g<16;++g)if(o=(d+p)/2,a(i.x,1,r.x,o,e),f=i.fx=t(i.x,i.fxprime),h=n(i.fxprime,e),f>c+s*o*l||f>=v)p=o;else{if(Math.abs(h)<=-u*l)return o;h*(p-d)>=0&&(p=d),d=o,v=f}return 0}o=o||1,s=s||1e-6,u=u||.1;for(var g=0;g<10;++g){if(a(i.x,1,r.x,o,e),f=i.fx=t(i.x,i.fxprime),h=n(i.fxprime,e),f>c+s*o*l||g&&f>=d)return v(p,o,d);if(Math.abs(h)<=-u*l)return o;if(h>=0)return v(o,p,f);d=f,p=o,o*=2}return o}t.bisect=function(t,e,n,r){var i=(r=r||{}).maxIterations||100,a=r.tolerance||1e-10,o=t(e),s=t(n),u=n-e;if(o*s>0)throw"Initial bisect points must have opposite signs";if(0===o)return e;if(0===s)return n;for(var c=0;c<i;++c){var l=e+(u/=2),f=t(l);if(f*o>=0&&(e=l),Math.abs(u)<a||0===f)return l}return e+u},t.nelderMead=function(t,e,n){var r,i=(n=n||{}).maxIterations||200*e.length,o=n.nonZeroDelta||1.05,s=n.zeroDelta||.001,u=n.minErrorDelta||1e-6,c=n.minErrorDelta||1e-5,l=void 0!==n.rho?n.rho:1,f=void 0!==n.chi?n.chi:2,d=void 0!==n.psi?n.psi:-.5,h=void 0!==n.sigma?n.sigma:.5,p=e.length,v=new Array(p+1);v[0]=e,v[0].fx=t(e),v[0].id=0;for(var g=0;g<p;++g){var y=e.slice();y[g]=y[g]?y[g]*o:s,v[g+1]=y,v[g+1].fx=t(y),v[g+1].id=g+1}function m(t){for(var e=0;e<t.length;e++)v[p][e]=t[e];v[p].fx=t.fx}for(var b=function(t,e){return t.fx-e.fx},x=e.slice(),w=e.slice(),k=e.slice(),E=e.slice(),O=0;O<i;++O){if(v.sort(b),n.history){var S=v.map((function(t){var e=t.slice();return e.fx=t.fx,e.id=t.id,e}));S.sort((function(t,e){return t.id-e.id})),n.history.push({x:v[0].slice(),fx:v[0].fx,simplex:S})}for(r=0,g=0;g<p;++g)r=Math.max(r,Math.abs(v[0][g]-v[1][g]));if(Math.abs(v[0].fx-v[p].fx)<u&&r<c)break;for(g=0;g<p;++g){x[g]=0;for(var M=0;M<p;++M)x[g]+=v[M][g];x[g]/=p}var T=v[p];if(a(w,1+l,x,-l,T),w.fx=t(w),w.fx<v[0].fx)a(E,1+f,x,-f,T),E.fx=t(E),E.fx<w.fx?m(E):m(w);else if(w.fx>=v[p-1].fx){var A=!1;if(w.fx>T.fx?(a(k,1+d,x,-d,T),k.fx=t(k),k.fx<T.fx?m(k):A=!0):(a(k,1-d*l,x,d*l,T),k.fx=t(k),k.fx<w.fx?m(k):A=!0),A){if(h>=1)break;for(g=1;g<v.length;++g)a(v[g],1-h,v[0],h,v[g]),v[g].fx=t(v[g])}}else m(w)}return v.sort(b),{fx:v[0].fx,x:v[0]}},t.conjugateGradient=function(t,e,s){var u,c,l,f={x:e.slice(),fx:0,fxprime:e.slice()},d={x:e.slice(),fx:0,fxprime:e.slice()},h=e.slice(),p=1;l=(s=s||{}).maxIterations||20*e.length,f.fx=t(f.x,f.fxprime),i(u=f.fxprime.slice(),f.fxprime,-1);for(var v=0;v<l;++v){if(p=o(t,u,f,d,p),s.history&&s.history.push({x:f.x.slice(),fx:f.fx,fxprime:f.fxprime.slice(),alpha:p}),p){a(h,1,d.fxprime,-1,f.fxprime);var g=n(f.fxprime,f.fxprime);a(u,Math.max(0,n(h,d.fxprime)/g),u,-1,d.fxprime),c=f,f=d,d=c}else i(u,f.fxprime,-1);if(r(f.fxprime)<=1e-5)break}return s.history&&s.history.push({x:f.x.slice(),fx:f.fx,fxprime:f.fxprime.slice(),alpha:p}),f},t.gradientDescent=function(t,e,n){for(var i=(n=n||{}).maxIterations||100*e.length,o=n.learnRate||.001,s={x:e.slice(),fx:0,fxprime:e.slice()},u=0;u<i&&(s.fx=t(s.x,s.fxprime),n.history&&n.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice()}),a(s.x,1,s.x,-o,s.fxprime),!(r(s.fxprime)<=1e-5));++u);return s},t.gradientDescentLineSearch=function(t,e,n){n=n||{};var a,s={x:e.slice(),fx:0,fxprime:e.slice()},u={x:e.slice(),fx:0,fxprime:e.slice()},c=n.maxIterations||100*e.length,l=n.learnRate||1,f=e.slice(),d=n.c1||.001,h=n.c2||.1,p=[];if(n.history){var v=t;t=function(t,e){return p.push(t.slice()),v(t,e)}}s.fx=t(s.x,s.fxprime);for(var g=0;g<c&&(i(f,s.fxprime,-1),l=o(t,f,s,u,l,d,h),n.history&&(n.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice(),functionCalls:p,learnRate:l,alpha:l}),p=[]),a=s,s=u,u=a,!(0===l||r(s.fxprime)<1e-5));++g);return s},t.zeros=e,t.zerosM=function(t,n){return e(t).map((function(){return e(n)}))},t.norm2=r,t.weightedSum=a,t.scale=i}(e)},7358:(t,e,n)=>{var r=n(4121);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},7404:t=>{t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},7444:(t,e,n)=>{var r=n(1126);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},7464:(t,e,n)=>{var r=n(4158);t.exports=function(t){return r(this.__data__,t)>-1}},7549:(t,e,n)=>{"use strict";var r=Math.log(2),i=t.exports,a=n(9597);function o(t){return 1-Math.abs(t)}t.exports.getUnifiedMinMax=function(t,e){return i.getUnifiedMinMaxMulti([t],e)},t.exports.getUnifiedMinMaxMulti=function(t,e){e=e||{};var n=!1,r=!1,i=a.isNumber(e.width)?e.width:2,o=a.isNumber(e.size)?e.size:50,s=a.isNumber(e.min)?e.min:(n=!0,a.findMinMulti(t)),u=a.isNumber(e.max)?e.max:(r=!0,a.findMaxMulti(t)),c=(u-s)/(o-1);return n&&(s-=2*i*c),r&&(u+=2*i*c),{min:s,max:u}},t.exports.create=function(t,e){if(e=e||{},!t||0===t.length)return[];var n=a.isNumber(e.size)?e.size:50,r=a.isNumber(e.width)?e.width:2,s=i.getUnifiedMinMax(t,{size:n,width:r,min:e.min,max:e.max}),u=s.min,c=s.max-u,l=c/(n-1);if(0===c)return[{x:u,y:1}];for(var f=[],d=0;d<n;d++)f.push({x:u+d*l,y:0});var h=function(t,e){for(var n={},r=0,i=-e;i<=e;i++)r+=t(i/e),n[i]=r;return n}(o,r),p=h[r],v=h[r-1]-h[r-2],g=0;t.forEach((function(t){var e=function(t){return Math.floor((t-u)/l)}(t);if(!(e+r<0||e-r>=f.length)){var n=Math.max(e-r,0),i=e,o=Math.min(e+r,f.length-1),s=n-(e-r),c=e+r-o,d=h[-r-1+s]||0,y=h[-r-1+c]||0,m=p/(p-d-y);s>0&&(g+=m*(s-1)*v);var b=Math.max(0,e-r+1);a.inside(0,f.length-1,b)&&(f[b].y+=1*m*v),a.inside(0,f.length-1,i+1)&&(f[i+1].y-=2*m*v),a.inside(0,f.length-1,o+1)&&(f[o+1].y+=1*m*v)}}));var y=g,m=0,b=0;return f.forEach((function(t){m+=t.y,y+=m,t.y=y,b+=y})),b>0&&f.forEach((function(t){t.y/=b})),f},t.exports.getExpectedValueFromPdf=function(t){if(t&&0!==t.length){var e=0;return t.forEach((function(t){e+=t.x*t.y})),e}},t.exports.getXWithLeftTailArea=function(t,e){if(t&&0!==t.length){for(var n=0,r=0,i=0;i<t.length&&(r=i,!((n+=t[i].y)>=e));i++);return t[r].x}},t.exports.getPerplexity=function(t){if(t&&0!==t.length){var e=0;return t.forEach((function(t){var n=Math.log(t.y);isFinite(n)&&(e+=t.y*n)})),e=-e/r,Math.pow(2,e)}}},7560:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7643:(t,e,n)=>{var r=n(7786),i=n(2942),a=n(4336);t.exports=function(t){return a(i(t,void 0,r),t+"")}},7644:(t,e,n)=>{var r=n(9797),i=n(2707);t.exports=function(t){return r((function(e,n){var r=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(a--,o):void 0,s&&i(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),e=Object(e);++r<a;){var u=n[r];u&&t(e,u,r,o)}return e}))}},7652:(t,e,n)=>{function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(5969),a=n(2831),o=n(7874),s=n(2755),u=["LR","RL","H"],c=u[0],l=function(t){function e(){return t.apply(this,arguments)||this}return i=t,(n=e).prototype=Object.create(i.prototype),n.prototype.constructor=n,r(n,i),e.prototype.execute=function(){var t=this.options,e=this.rootNode;t.isHorizontal=!0;var n=t.indent,r=void 0===n?20:n,i=t.dropCap,s=void 0===i||i,l=t.direction,f=void 0===l?c:l,d=t.align;if(f&&-1===u.indexOf(f))throw new TypeError("Invalid direction: "+f);if(f===u[0])a(e,r,s,d);else if(f===u[1])a(e,r,s,d),e.right2left();else if(f===u[2]){var h=o(e,t),p=h.left,v=h.right;a(p,r,s,d),p.right2left(),a(v,r,s,d);var g=p.getBoundingBox();v.translate(g.width,0),e.x=v.x-e.width/2}return e},e;var n,i}(i),f={};t.exports=function(t,e){return e=s.assign({},f,e),new l(t,e).execute()}},7671:(t,e,n)=>{var r=n(7560),i=Object.create,a=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=a},7786:(t,e,n)=>{var r=n(2397);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},7788:(t,e,n)=>{var r=n(3791);t.exports=function(t){return function(e){return r(e,t)}}},7791:t=>{t.exports=function(t){return void 0===t}},7814:(t,e,n)=>{"use strict";var r=n(5343),i=Array.prototype.concat,a=Array.prototype.slice,o=t.exports=function(t){for(var e=[],n=0,o=t.length;n<o;n++){var s=t[n];r(s)?e=i.call(e,a.call(s)):e.push(s)}return e};o.wrap=function(t){return function(){return t(o(arguments))}}},7866:(t,e,n)=>{var r=n(8590),i=n(1643),a=n(756);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},7874:(t,e,n)=>{var r=n(321);t.exports=function(t,e){for(var n=r(t.data,e,!0),i=r(t.data,e,!0),a=t.children.length,o=Math.round(a/2),s=e.getSide||function(t,e){return e<o?"right":"left"},u=0;u<a;u++){var c=t.children[u];"right"===s(c,u)?i.children.push(c):n.children.push(c)}return n.eachNode((function(t){t.isRoot()||(t.side="left")})),i.eachNode((function(t){t.isRoot()||(t.side="right")})),{left:n,right:i}}},7877:(t,e,n)=>{var r=n(9973),i=n(1896),a=n(1710),o=a&&a.isMap,s=o?i(o):r;t.exports=s},7880:(t,e,n)=>{var r=n(2886),i=n(1742);t.exports=function(t,e,n){return i.transform(t.nodes(),(function(i,a){i[a]=r(t,a,e,n)}),{})}},7896:(t,e,n)=>{var r=n(3936);t.exports=function(t){return r(this,t).has(t)}},7912:t=>{t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},7937:(t,e,n)=>{var r=n(3651),i=n(6785),a=n(5434),o=n(8962);t.exports=function(t,e){return(o(t)?r:i)(t,a(e,3))}},7945:(t,e,n)=>{var r=n(9797),i=n(1417),a=n(2707),o=n(4620),s=Object.prototype,u=s.hasOwnProperty,c=r((function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&a(e[0],e[1],c)&&(r=1);++n<r;)for(var l=e[n],f=o(l),d=-1,h=f.length;++d<h;){var p=f[d],v=t[p];(void 0===v||i(v,s[p])&&!u.call(t,p))&&(t[p]=l[p])}return t}));t.exports=c},7950:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},7951:(t,e,n)=>{var r=n(6532),i=n(7671),a=n(9942),o=n(5434),s=n(8084),u=n(8962),c=n(9217),l=n(5179),f=n(7560),d=n(6646);t.exports=function(t,e,n){var h=u(t),p=h||c(t)||d(t);if(e=o(e,4),null==n){var v=t&&t.constructor;n=p?h?new v:[]:f(t)&&l(v)?i(s(t)):{}}return(p?r:a)(t,(function(t,r,i){return e(n,t,r,i)})),n}},7953:t=>{t.exports=function(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")},t.exports.__esModule=!0,t.exports.default=t.exports},7968:(t,e,n)=>{var r=n(1742);t.exports=function(t){var e=0,n=[],i={},a=[];function o(s){var u=i[s]={onStack:!0,lowlink:e,index:e++};if(n.push(s),t.successors(s).forEach((function(t){r.has(i,t)?i[t].onStack&&(u.lowlink=Math.min(u.lowlink,i[t].index)):(o(t),u.lowlink=Math.min(u.lowlink,i[t].lowlink))})),u.lowlink===u.index){var c,l=[];do{c=n.pop(),i[c].onStack=!1,l.push(c)}while(s!==c);a.push(l)}}return t.nodes().forEach((function(t){r.has(i,t)||o(t)})),a}},7972:(t,e,n)=>{var r=n(4604),i=n(3547),a=n(4968),o=r&&1/a(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=o},8084:(t,e,n)=>{var r=n(9122)(Object.getPrototypeOf,Object);t.exports=r},8123:(t,e,n)=>{var r=n(9210),i=n(5850),a=n(8468),o=n(7560),s=n(8812);t.exports=function(t,e,n,u){if(!o(t))return t;for(var c=-1,l=(e=i(e,t)).length,f=l-1,d=t;null!=d&&++c<l;){var h=s(e[c]),p=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return t;if(c!=f){var v=d[h];void 0===(p=u?u(v,h,d):void 0)&&(p=o(v)?v:a(e[c+1])?[]:{})}r(d,h,p),d=d[h]}return t}},8174:(t,e,n)=>{var r=n(8832),i=n(68),a=n(4620);t.exports=function(t){return r(t,a,i)}},8186:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},8373:t=>{function e(n,r){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},8421:(t,e,n)=>{var r=n(943);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,a=t==t,o=r(t),s=void 0!==e,u=null===e,c=e==e,l=r(e);if(!u&&!l&&!o&&t>e||o&&s&&c&&!u&&!l||i&&s&&c||!n&&c||!a)return 1;if(!i&&!o&&!l&&t<e||l&&n&&a&&!i&&!o||u&&n&&a||!s&&a||!c)return-1}return 0}},8468:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},8478:(t,e,n)=>{"use strict";var r=n(6036),i=n(1882);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),(function(e){!function(t,e){var n,r,a,o=e.v,s=t.node(o).rank,u=e.w,c=t.node(u).rank,l=e.name,f=t.edge(e),d=f.labelRank;if(c!==s+1){for(t.removeEdge(e),a=0,++s;s<c;++a,++s)f.points=[],r={width:0,height:0,edgeLabel:f,edgeObj:e,rank:s},n=i.addDummyNode(t,"edge",r,"_d"),s===d&&(r.width=f.width,r.height=f.height,r.dummy="edge-label",r.labelpos=f.labelpos),t.setEdge(o,n,{weight:f.weight},l),0===a&&t.graph().dummyChains.push(n),o=n;t.setEdge(o,u,{weight:f.weight},l)}}(t,e)}))},undo:function(t){r.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)}))}}},8514:(t,e,n)=>{"use strict";var r=n(8834),i=n(5442),a=n(6003);function o(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function u(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{!!(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function c(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&null!==(t=t.alternate)&&(e=t.memoizedState),null!==e)return e.dehydrated}return null}function l(t){if(u(t)!==t)throw Error(o(188))}function f(t){var e=t.tag;if(5===e||26===e||27===e||6===e)return t;for(t=t.child;null!==t;){if(null!==(e=f(t)))return e;t=t.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope");var T=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var A=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var P=Symbol.iterator;function N(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=P&&t[P]||t["@@iterator"])?t:null}var C=Symbol.for("react.client.reference");function _(t){if(null==t)return null;if("function"==typeof t)return t.$$typeof===C?null:t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case g:return"Fragment";case m:return"Profiler";case y:return"StrictMode";case E:return"Suspense";case O:return"SuspenseList";case T:return"Activity"}if("object"==typeof t)switch(t.$$typeof){case v:return"Portal";case w:return(t.displayName||"Context")+".Provider";case x:return(t._context.displayName||"Context")+".Consumer";case k:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case S:return null!==(e=t.displayName||null)?e:_(t.type)||"Memo";case M:e=t._payload,t=t._init;try{return _(t(e))}catch(t){}}return null}var L=Array.isArray,R=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},I=[],F=-1;function z(t){return{current:t}}function B(t){0>F||(t.current=I[F],I[F]=null,F--)}function G(t,e){F++,I[F]=t.current,t.current=e}var W=z(null),V=z(null),H=z(null),Y=z(null);function U(t,e){switch(G(H,e),G(V,t),G(W,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?af(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)t=of(e=af(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}B(W),G(W,t)}function q(){B(W),B(V),B(H)}function X(t){null!==t.memoizedState&&G(Y,t);var e=W.current,n=of(e,t.type);e!==n&&(G(V,t),G(W,n))}function K(t){V.current===t&&(B(W),B(V)),Y.current===t&&(B(Y),Kf._currentValue=D)}var $=Object.prototype.hasOwnProperty,Z=r.unstable_scheduleCallback,Q=r.unstable_cancelCallback,J=r.unstable_shouldYield,tt=r.unstable_requestPaint,et=r.unstable_now,nt=r.unstable_getCurrentPriorityLevel,rt=r.unstable_ImmediatePriority,it=r.unstable_UserBlockingPriority,at=r.unstable_NormalPriority,ot=r.unstable_LowPriority,st=r.unstable_IdlePriority,ut=r.log,ct=r.unstable_setDisableYieldValue,lt=null,ft=null;function dt(t){if("function"==typeof ut&&ct(t),ft&&"function"==typeof ft.setStrictMode)try{ft.setStrictMode(lt,t)}catch(t){}}var ht=Math.clz32?Math.clz32:function(t){return 0==(t>>>=0)?32:31-(pt(t)/vt|0)|0},pt=Math.log,vt=Math.LN2,gt=256,yt=4194304;function mt(t){var e=42&t;if(0!==e)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&t;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&t;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function bt(t,e,n){var r=t.pendingLanes;if(0===r)return 0;var i=0,a=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~a)?i=mt(r):0!==(o&=s)?i=mt(o):n||0!==(n=s&~t)&&(i=mt(n)):0!==(s=r&~a)?i=mt(s):0!==o?i=mt(o):n||0!==(n=r&~t)&&(i=mt(n)),0===i?0:0!==e&&e!==i&&0===(e&a)&&((a=i&-i)>=(n=e&-e)||32===a&&4194048&n)?e:i}function xt(t,e){return 0===(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)}function wt(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function kt(){var t=gt;return!(4194048&(gt<<=1))&&(gt=256),t}function Et(){var t=yt;return!(62914560&(yt<<=1))&&(yt=4194304),t}function Ot(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function St(t,e){t.pendingLanes|=e,268435456!==e&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Mt(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var r=31-ht(e);t.entangledLanes|=e,t.entanglements[r]=1073741824|t.entanglements[r]|4194090&n}function Tt(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ht(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}function At(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Pt(t){return 2<(t&=-t)?8<t?134217727&t?32:268435456:8:2}function Nt(){var t=j.p;return 0!==t?t:void 0===(t=window.event)?32:ld(t.type)}var Ct=Math.random().toString(36).slice(2),_t="__reactFiber$"+Ct,Lt="__reactProps$"+Ct,Rt="__reactContainer$"+Ct,jt="__reactEvents$"+Ct,Dt="__reactListeners$"+Ct,It="__reactHandles$"+Ct,Ft="__reactResources$"+Ct,zt="__reactMarker$"+Ct;function Bt(t){delete t[_t],delete t[Lt],delete t[jt],delete t[Dt],delete t[It]}function Gt(t){var e=t[_t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Rt]||n[_t]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=xf(t);null!==t;){if(n=t[_t])return n;t=xf(t)}return e}n=(t=n).parentNode}return null}function Wt(t){if(t=t[_t]||t[Rt]){var e=t.tag;if(5===e||6===e||13===e||26===e||27===e||3===e)return t}return null}function Vt(t){var e=t.tag;if(5===e||26===e||27===e||6===e)return t.stateNode;throw Error(o(33))}function Ht(t){var e=t[Ft];return e||(e=t[Ft]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Yt(t){t[zt]=!0}var Ut=new Set,qt={};function Xt(t,e){Kt(t,e),Kt(t+"Capture",e)}function Kt(t,e){for(qt[t]=e,t=0;t<e.length;t++)Ut.add(e[t])}var $t,Zt,Qt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jt={},te={};function ee(t,e,n){if(i=e,$.call(te,i)||!$.call(Jt,i)&&(Qt.test(i)?te[i]=!0:(Jt[i]=!0,0)))if(null===n)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":return void t.removeAttribute(e);case"boolean":var r=e.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void t.removeAttribute(e)}t.setAttribute(e,""+n)}var i}function ne(t,e,n){if(null===n)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void t.removeAttribute(e)}t.setAttribute(e,""+n)}}function re(t,e,n,r){if(null===r)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void t.removeAttribute(n)}t.setAttributeNS(e,n,""+r)}}function ie(t){if(void 0===$t)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);$t=e&&e[1]||"",Zt=-1<t.stack.indexOf("\n    at")?" (<anonymous>)":-1<t.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+$t+t+Zt}var ae=!1;function oe(t,e){if(!t||ae)return"";ae=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(e){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(t){var r=t}Reflect.construct(t,[],n)}else{try{n.call()}catch(t){r=t}t.call(n.prototype)}}else{try{throw Error()}catch(t){r=t}(n=t())&&"function"==typeof n.catch&&n.catch((function(){}))}}catch(t){if(t&&r&&"string"==typeof t.stack)return[t.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var u=o.split("\n"),c=s.split("\n");for(i=r=0;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===u.length||i===c.length)for(r=u.length-1,i=c.length-1;1<=r&&0<=i&&u[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(u[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||u[r]!==c[i]){var l="\n"+u[r].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=r&&0<=i);break}}}finally{ae=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?ie(n):""}function se(t){switch(t.tag){case 26:case 27:case 5:return ie(t.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 15:return oe(t.type,!1);case 11:return oe(t.type.render,!1);case 1:return oe(t.type,!0);case 31:return ie("Activity");default:return""}}function ue(t){try{var e="";do{e+=se(t),t=t.return}while(t);return e}catch(t){return"\nError generating stack: "+t.message+"\n"+t.stack}}function ce(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function le(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function fe(t){t._valueTracker||(t._valueTracker=function(t){var e=le(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,a.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function de(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=le(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function he(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}var pe=/[\n"\\]/g;function ve(t){return t.replace(pe,(function(t){return"\\"+t.charCodeAt(0).toString(16)+" "}))}function ge(t,e,n,r,i,a,o,s){t.name="",null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?t.type=o:t.removeAttribute("type"),null!=e?"number"===o?(0===e&&""===t.value||t.value!=e)&&(t.value=""+ce(e)):t.value!==""+ce(e)&&(t.value=""+ce(e)):"submit"!==o&&"reset"!==o||t.removeAttribute("value"),null!=e?me(t,o,ce(e)):null!=n?me(t,o,ce(n)):null!=r&&t.removeAttribute("value"),null==i&&null!=a&&(t.defaultChecked=!!a),null!=i&&(t.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?t.name=""+ce(s):t.removeAttribute("name")}function ye(t,e,n,r,i,a,o,s){if(null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(t.type=a),null!=e||null!=n){if(("submit"===a||"reset"===a)&&null==e)return;n=null!=n?""+ce(n):"",e=null!=e?""+ce(e):n,s||e===t.value||(t.value=e),t.defaultValue=e}r="function"!=typeof(r=null!=r?r:i)&&"symbol"!=typeof r&&!!r,t.checked=s?t.checked:!!r,t.defaultChecked=!!r,null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(t.name=o)}function me(t,e,n){"number"===e&&he(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function be(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ce(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function xe(t,e,n){null==e||((e=""+ce(e))!==t.value&&(t.value=e),null!=n)?t.defaultValue=null!=n?""+ce(n):"":t.defaultValue!==e&&(t.defaultValue=e)}function we(t,e,n,r){if(null==e){if(null!=r){if(null!=n)throw Error(o(92));if(L(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),e=n}n=ce(e),t.defaultValue=n,(r=t.textContent)===n&&""!==r&&null!==r&&(t.value=r)}function ke(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var Ee=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oe(t,e,n){var r=0===e.indexOf("--");null==n||"boolean"==typeof n||""===n?r?t.setProperty(e,""):"float"===e?t.cssFloat="":t[e]="":r?t.setProperty(e,n):"number"!=typeof n||0===n||Ee.has(e)?"float"===e?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Se(t,e,n){if(null!=e&&"object"!=typeof e)throw Error(o(62));if(t=t.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=e&&e.hasOwnProperty(r)||(0===r.indexOf("--")?t.setProperty(r,""):"float"===r?t.cssFloat="":t[r]="");for(var i in e)r=e[i],e.hasOwnProperty(i)&&n[i]!==r&&Oe(t,i,r)}else for(var a in e)e.hasOwnProperty(a)&&Oe(t,a,e[a])}function Me(t){if(-1===t.indexOf("-"))return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Te=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ae=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pe(t){return Ae.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ne=null;function Ce(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var _e=null,Le=null;function Re(t){var e=Wt(t);if(e&&(t=e.stateNode)){var n=t[Lt]||null;t:switch(t=e.stateNode,e.type){case"input":if(ge(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ve(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=r[Lt]||null;if(!i)throw Error(o(90));ge(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)(r=n[e]).form===t.form&&de(r)}break t;case"textarea":xe(t,n.value,n.defaultValue);break t;case"select":null!=(e=n.value)&&be(t,!!n.multiple,e,!1)}}}var je=!1;function De(t,e,n){if(je)return t(e,n);je=!0;try{return t(e)}finally{if(je=!1,(null!==_e||null!==Le)&&(Gc(),_e&&(e=_e,t=Le,Le=_e=null,Re(e),t)))for(e=0;e<t.length;e++)Re(t[e])}}function Ie(t,e){var n=t.stateNode;if(null===n)return null;var r=n[Lt]||null;if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(o(231,e,typeof n));return n}var Fe=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ze=!1;if(Fe)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){ze=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(t){ze=!1}var Ge=null,We=null,Ve=null;function He(){if(Ve)return Ve;var t,e,n=We,r=n.length,i="value"in Ge?Ge.value:Ge.textContent,a=i.length;for(t=0;t<r&&n[t]===i[t];t++);var o=r-t;for(e=1;e<=o&&n[r-e]===i[a-e];e++);return Ve=i.slice(t,1<e?1-e:void 0)}function Ye(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function Ue(){return!0}function qe(){return!1}function Xe(t){function e(e,n,r,i,a){for(var o in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Ue:qe,this.isPropagationStopped=qe,this}return d(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Ue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Ue)},persist:function(){},isPersistent:Ue}),e}var Ke,$e,Ze,Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Je=Xe(Qe),tn=d({},Qe,{view:0,detail:0}),en=Xe(tn),nn=d({},tn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ze&&(Ze&&"mousemove"===t.type?(Ke=t.screenX-Ze.screenX,$e=t.screenY-Ze.screenY):$e=Ke=0,Ze=t),Ke)},movementY:function(t){return"movementY"in t?t.movementY:$e}}),rn=Xe(nn),an=Xe(d({},nn,{dataTransfer:0})),on=Xe(d({},tn,{relatedTarget:0})),sn=Xe(d({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0})),un=Xe(d({},Qe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),cn=Xe(d({},Qe,{data:0})),ln={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=dn[t])&&!!e[t]}function pn(){return hn}var vn=Xe(d({},tn,{key:function(t){if(t.key){var e=ln[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Ye(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?fn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(t){return"keypress"===t.type?Ye(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Ye(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),gn=Xe(d({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Xe(d({},tn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),mn=Xe(d({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Xe(d({},nn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),xn=Xe(d({},Qe,{newState:0,oldState:0})),wn=[9,13,27,32],kn=Fe&&"CompositionEvent"in window,En=null;Fe&&"documentMode"in document&&(En=document.documentMode);var On=Fe&&"TextEvent"in window&&!En,Sn=Fe&&(!kn||En&&8<En&&11>=En),Mn=String.fromCharCode(32),Tn=!1;function An(t,e){switch(t){case"keyup":return-1!==wn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pn(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Nn=!1,Cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _n(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Cn[t.type]:"textarea"===e}function Ln(t,e,n,r){_e?Le?Le.push(r):Le=[r]:_e=r,0<(e=Hl(e,"onChange")).length&&(n=new Je("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Rn=null,jn=null;function Dn(t){Dl(t,0)}function In(t){if(de(Vt(t)))return t}function Fn(t,e){if("change"===t)return e}var zn=!1;if(Fe){var Bn;if(Fe){var Gn="oninput"in document;if(!Gn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Gn="function"==typeof Wn.oninput}Bn=Gn}else Bn=!1;zn=Bn&&(!document.documentMode||9<document.documentMode)}function Vn(){Rn&&(Rn.detachEvent("onpropertychange",Hn),jn=Rn=null)}function Hn(t){if("value"===t.propertyName&&In(jn)){var e=[];Ln(e,jn,t,Ce(t)),De(Dn,e)}}function Yn(t,e,n){"focusin"===t?(Vn(),jn=n,(Rn=e).attachEvent("onpropertychange",Hn)):"focusout"===t&&Vn()}function Un(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return In(jn)}function qn(t,e){if("click"===t)return In(e)}function Xn(t,e){if("input"===t||"change"===t)return In(e)}var Kn="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e};function $n(t,e){if(Kn(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!$.call(e,i)||!Kn(t[i],e[i]))return!1}return!0}function Zn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qn(t,e){var n,r=Zn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Zn(r)}}function Jn(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?Jn(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function tr(t){for(var e=he((t=null!=t&&null!=t.ownerDocument&&null!=t.ownerDocument.defaultView?t.ownerDocument.defaultView:window).document);e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=he((t=e.contentWindow).document)}return e}function er(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var nr=Fe&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,ar=null,or=!1;function sr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;or||null==rr||rr!==he(r)||(r="selectionStart"in(r=rr)&&er(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ar&&$n(ar,r)||(ar=r,0<(r=Hl(ir,"onSelect")).length&&(e=new Je("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=rr)))}function ur(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var cr={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},lr={},fr={};function dr(t){if(lr[t])return lr[t];if(!cr[t])return t;var e,n=cr[t];for(e in n)if(n.hasOwnProperty(e)&&e in fr)return lr[t]=n[e];return t}Fe&&(fr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var hr=dr("animationend"),pr=dr("animationiteration"),vr=dr("animationstart"),gr=dr("transitionrun"),yr=dr("transitionstart"),mr=dr("transitioncancel"),br=dr("transitionend"),xr=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(t,e){xr.set(t,e),Xt(e,[t])}wr.push("scrollEnd");var Er=new WeakMap;function Or(t,e){if("object"==typeof t&&null!==t){var n=Er.get(t);return void 0!==n?n:(e={value:t,source:e,stack:ue(e)},Er.set(t,e),e)}return{value:t,source:e,stack:ue(e)}}var Sr=[],Mr=0,Tr=0;function Ar(){for(var t=Mr,e=Tr=Mr=0;e<t;){var n=Sr[e];Sr[e++]=null;var r=Sr[e];Sr[e++]=null;var i=Sr[e];Sr[e++]=null;var a=Sr[e];if(Sr[e++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==a&&_r(n,i,a)}}function Pr(t,e,n,r){Sr[Mr++]=t,Sr[Mr++]=e,Sr[Mr++]=n,Sr[Mr++]=r,Tr|=r,t.lanes|=r,null!==(t=t.alternate)&&(t.lanes|=r)}function Nr(t,e,n,r){return Pr(t,e,n,r),Lr(t)}function Cr(t,e){return Pr(t,null,null,e),Lr(t)}function _r(t,e,n){t.lanes|=n;var r=t.alternate;null!==r&&(r.lanes|=n);for(var i=!1,a=t.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(t=a.stateNode)||1&t._visibility||(i=!0)),t=a,a=a.return;return 3===t.tag?(a=t.stateNode,i&&null!==e&&(i=31-ht(n),null===(r=(t=a.hiddenUpdates)[i])?t[i]=[e]:r.push(e),e.lane=536870912|n),a):null}function Lr(t){if(50<_c)throw _c=0,Lc=null,Error(o(185));for(var e=t.return;null!==e;)e=(t=e).return;return 3===t.tag?t.stateNode:null}var Rr={};function jr(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(t,e,n,r){return new jr(t,e,n,r)}function Ir(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Fr(t,e){var n=t.alternate;return null===n?((n=Dr(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function zr(t,e){t.flags&=65011714;var n=t.alternate;return null===n?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Br(t,e,n,r,i,a){var s=0;if(r=t,"function"==typeof t)Ir(t)&&(s=1);else if("string"==typeof t)s=function(t,e,n){if(1===n||null!=e.itemProp)return!1;switch(t){case"meta":case"title":return!0;case"style":if("string"!=typeof e.precedence||"string"!=typeof e.href||""===e.href)break;return!0;case"link":if("string"!=typeof e.rel||"string"!=typeof e.href||""===e.href||e.onLoad||e.onError)break;return"stylesheet"!==e.rel||(t=e.disabled,"string"==typeof e.precedence&&null==t);case"script":if(e.async&&"function"!=typeof e.async&&"symbol"!=typeof e.async&&!e.onLoad&&!e.onError&&e.src&&"string"==typeof e.src)return!0}return!1}(t,n,W.current)?26:"html"===t||"head"===t||"body"===t?27:5;else t:switch(t){case T:return(t=Dr(31,n,e,i)).elementType=T,t.lanes=a,t;case g:return Gr(n.children,i,a,e);case y:s=8,i|=24;break;case m:return(t=Dr(12,n,e,2|i)).elementType=m,t.lanes=a,t;case E:return(t=Dr(13,n,e,i)).elementType=E,t.lanes=a,t;case O:return(t=Dr(19,n,e,i)).elementType=O,t.lanes=a,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case b:case w:s=10;break t;case x:s=9;break t;case k:s=11;break t;case S:s=14;break t;case M:s=16,r=null;break t}s=29,n=Error(o(130,null===t?"null":typeof t,"")),r=null}return(e=Dr(s,n,e,i)).elementType=t,e.type=r,e.lanes=a,e}function Gr(t,e,n,r){return(t=Dr(7,t,r,e)).lanes=n,t}function Wr(t,e,n){return(t=Dr(6,t,null,e)).lanes=n,t}function Vr(t,e,n){return(e=Dr(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Hr=[],Yr=0,Ur=null,qr=0,Xr=[],Kr=0,$r=null,Zr=1,Qr="";function Jr(t,e){Hr[Yr++]=qr,Hr[Yr++]=Ur,Ur=t,qr=e}function ti(t,e,n){Xr[Kr++]=Zr,Xr[Kr++]=Qr,Xr[Kr++]=$r,$r=t;var r=Zr;t=Qr;var i=32-ht(r)-1;r&=~(1<<i),n+=1;var a=32-ht(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zr=1<<32-ht(e)+i|n<<i|r,Qr=a+t}else Zr=1<<a|n<<i|r,Qr=t}function ei(t){null!==t.return&&(Jr(t,1),ti(t,1,0))}function ni(t){for(;t===Ur;)Ur=Hr[--Yr],Hr[Yr]=null,qr=Hr[--Yr],Hr[Yr]=null;for(;t===$r;)$r=Xr[--Kr],Xr[Kr]=null,Qr=Xr[--Kr],Xr[Kr]=null,Zr=Xr[--Kr],Xr[Kr]=null}var ri=null,ii=null,ai=!1,oi=null,si=!1,ui=Error(o(519));function ci(t){throw vi(Or(Error(o(418,"")),t)),ui}function li(t){var e=t.stateNode,n=t.type,r=t.memoizedProps;switch(e[_t]=t,e[Lt]=r,n){case"dialog":Il("cancel",e),Il("close",e);break;case"iframe":case"object":case"embed":Il("load",e);break;case"video":case"audio":for(n=0;n<Rl.length;n++)Il(Rl[n],e);break;case"source":Il("error",e);break;case"img":case"image":case"link":Il("error",e),Il("load",e);break;case"details":Il("toggle",e);break;case"input":Il("invalid",e),ye(e,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),fe(e);break;case"select":Il("invalid",e);break;case"textarea":Il("invalid",e),we(e,r.value,r.defaultValue,r.children),fe(e)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||e.textContent===""+n||!0===r.suppressHydrationWarning||$l(e.textContent,n)?(null!=r.popover&&(Il("beforetoggle",e),Il("toggle",e)),null!=r.onScroll&&Il("scroll",e),null!=r.onScrollEnd&&Il("scrollend",e),null!=r.onClick&&(e.onclick=Zl),e=!0):e=!1,e||ci(t)}function fi(t){for(ri=t.return;ri;)switch(ri.tag){case 5:case 13:return void(si=!1);case 27:case 3:return void(si=!0);default:ri=ri.return}}function di(t){if(t!==ri)return!1;if(!ai)return fi(t),ai=!0,!1;var e,n=t.tag;if((e=3!==n&&27!==n)&&((e=5===n)&&(e=!("form"!==(e=t.type)&&"button"!==e)||sf(t.type,t.memoizedProps)),e=!e),e&&ii&&ci(t),fi(t),13===n){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,n=0;t;){if(8===t.nodeType)if("/$"===(e=t.data)){if(0===n){ii=mf(t.nextSibling);break t}n--}else"$"!==e&&"$!"!==e&&"$?"!==e||n++;t=t.nextSibling}ii=null}}else 27===n?(n=ii,pf(t.type)?(t=bf,bf=null,ii=t):ii=n):ii=ri?mf(t.stateNode.nextSibling):null;return!0}function hi(){ii=ri=null,ai=!1}function pi(){var t=oi;return null!==t&&(null===bc?bc=t:bc.push.apply(bc,t),oi=null),t}function vi(t){null===oi?oi=[t]:oi.push(t)}var gi=z(null),yi=null,mi=null;function bi(t,e,n){G(gi,e._currentValue),e._currentValue=n}function xi(t){t._currentValue=gi.current,B(gi)}function wi(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ki(t,e,n,r){var i=t.child;for(null!==i&&(i.return=t);null!==i;){var a=i.dependencies;if(null!==a){var s=i.child;a=a.firstContext;t:for(;null!==a;){var u=a;a=i;for(var c=0;c<e.length;c++)if(u.context===e[c]){a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),wi(a.return,n,t),r||(s=null);break t}a=u.next}}else if(18===i.tag){if(null===(s=i.return))throw Error(o(341));s.lanes|=n,null!==(a=s.alternate)&&(a.lanes|=n),wi(s,n,t),s=null}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}}function Ei(t,e,n,r){t=null;for(var i=e,a=!1;null!==i;){if(!a)if(524288&i.flags)a=!0;else if(262144&i.flags)break;if(10===i.tag){var s=i.alternate;if(null===s)throw Error(o(387));if(null!==(s=s.memoizedProps)){var u=i.type;Kn(i.pendingProps.value,s.value)||(null!==t?t.push(u):t=[u])}}else if(i===Y.current){if(null===(s=i.alternate))throw Error(o(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==t?t.push(Kf):t=[Kf])}i=i.return}null!==t&&ki(e,t,n,r),e.flags|=262144}function Oi(t){for(t=t.firstContext;null!==t;){if(!Kn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Si(t){yi=t,mi=null,null!==(t=t.dependencies)&&(t.firstContext=null)}function Mi(t){return Ai(yi,t)}function Ti(t,e){return null===yi&&Si(t),Ai(t,e)}function Ai(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},null===mi){if(null===t)throw Error(o(308));mi=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else mi=mi.next=e;return n}var Pi="undefined"!=typeof AbortController?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(e,n){t.push(n)}};this.abort=function(){e.aborted=!0,t.forEach((function(t){return t()}))}},Ni=r.unstable_scheduleCallback,Ci=r.unstable_NormalPriority,_i={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Li(){return{controller:new Pi,data:new Map,refCount:0}}function Ri(t){t.refCount--,0===t.refCount&&Ni(Ci,(function(){t.controller.abort()}))}var ji=null,Di=0,Ii=0,Fi=null;function zi(){if(0===--Di&&null!==ji){null!==Fi&&(Fi.status="fulfilled");var t=ji;ji=null,Ii=0,Fi=null;for(var e=0;e<t.length;e++)(0,t[e])()}}var Bi=R.S;R.S=function(t,e){"object"==typeof e&&null!==e&&"function"==typeof e.then&&function(t,e){if(null===ji){var n=ji=[];Di=0,Ii=Pl(),Fi={status:"pending",value:void 0,then:function(t){n.push(t)}}}Di++,e.then(zi,zi)}(0,e),null!==Bi&&Bi(t,e)};var Gi=z(null);function Wi(){var t=Gi.current;return null!==t?t:rc.pooledCache}function Vi(t,e){G(Gi,null===e?Gi.current:e.pool)}function Hi(){var t=Wi();return null===t?null:{parent:_i._currentValue,pool:t}}var Yi=Error(o(460)),Ui=Error(o(474)),qi=Error(o(542)),Xi={then:function(){}};function Ki(t){return"fulfilled"===(t=t.status)||"rejected"===t}function $i(){}function Zi(t,e,n){switch(void 0===(n=t[n])?t.push(e):n!==e&&(e.then($i,$i),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw ta(t=e.reason),t;default:if("string"==typeof e.status)e.then($i,$i);else{if(null!==(t=rc)&&100<t.shellSuspendCounter)throw Error(o(482));(t=e).status="pending",t.then((function(t){if("pending"===e.status){var n=e;n.status="fulfilled",n.value=t}}),(function(t){if("pending"===e.status){var n=e;n.status="rejected",n.reason=t}}))}switch(e.status){case"fulfilled":return e.value;case"rejected":throw ta(t=e.reason),t}throw Qi=e,Yi}}var Qi=null;function Ji(){if(null===Qi)throw Error(o(459));var t=Qi;return Qi=null,t}function ta(t){if(t===Yi||t===qi)throw Error(o(483))}var ea=!1;function na(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ra(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ia(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function aa(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,2&nc){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,e=Lr(t),_r(t,null,n),e}return Pr(t,r,e,n),Lr(t)}function oa(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,4194048&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,Tt(t,n)}}function sa(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=e:a=a.next=e}else i=a=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var ua=!1;function ca(){if(ua&&null!==Fi)throw Fi}function la(t,e,n,r){ua=!1;var i=t.updateQueue;ea=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=t.alternate;null!==l&&(s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u)}if(null!==a){var f=i.baseState;for(o=0,l=c=u=null,s=a;;){var h=-536870913&s.lane,p=h!==s.lane;if(p?(ac&h)===h:(r&h)===h){0!==h&&h===Ii&&(ua=!0),null!==l&&(l=l.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});t:{var v=t,g=s;h=e;var y=n;switch(g.tag){case 1:if("function"==typeof(v=g.payload)){f=v.call(y,f,h);break t}f=v;break t;case 3:v.flags=-65537&v.flags|128;case 0:if(null==(h="function"==typeof(v=g.payload)?v.call(y,f,h):v))break t;f=d({},f,h);break t;case 2:ea=!0}}null!==(h=s.callback)&&(t.flags|=64,p&&(t.flags|=8192),null===(p=i.callbacks)?i.callbacks=[h]:p.push(h))}else p={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=p,u=f):l=l.next=p,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(p=s).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===l&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null===a&&(i.shared.lanes=0),hc|=o,t.lanes=o,t.memoizedState=f}}function fa(t,e){if("function"!=typeof t)throw Error(o(191,t));t.call(e)}function da(t,e){var n=t.callbacks;if(null!==n)for(t.callbacks=null,t=0;t<n.length;t++)fa(n[t],e)}var ha=z(null),pa=z(0);function va(t,e){G(pa,t=fc),G(ha,e),fc=t|e.baseLanes}function ga(){G(pa,fc),G(ha,ha.current)}function ya(){fc=pa.current,B(ha),B(pa)}var ma=0,ba=null,xa=null,wa=null,ka=!1,Ea=!1,Oa=!1,Sa=0,Ma=0,Ta=null,Aa=0;function Pa(){throw Error(o(321))}function Na(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kn(t[n],e[n]))return!1;return!0}function Ca(t,e,n,r,i,a){return ma=a,ba=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,R.H=null===t||null===t.memoizedState?Uo:qo,Oa=!1,a=n(r,i),Oa=!1,Ea&&(a=La(e,n,r,i)),_a(t),a}function _a(t){R.H=Yo;var e=null!==xa&&null!==xa.next;if(ma=0,wa=xa=ba=null,ka=!1,Ma=0,Ta=null,e)throw Error(o(300));null===t||Ts||null!==(t=t.dependencies)&&Oi(t)&&(Ts=!0)}function La(t,e,n,r){ba=t;var i=0;do{if(Ea&&(Ta=null),Ma=0,Ea=!1,25<=i)throw Error(o(301));if(i+=1,wa=xa=null,null!=t.updateQueue){var a=t.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}R.H=Xo,a=e(n,r)}while(Ea);return a}function Ra(){var t=R.H,e=t.useState()[0];return e="function"==typeof e.then?Ba(e):e,t=t.useState()[0],(null!==xa?xa.memoizedState:null)!==t&&(ba.flags|=1024),e}function ja(){var t=0!==Sa;return Sa=0,t}function Da(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Ia(t){if(ka){for(t=t.memoizedState;null!==t;){var e=t.queue;null!==e&&(e.pending=null),t=t.next}ka=!1}ma=0,wa=xa=ba=null,Ea=!1,Ma=Sa=0,Ta=null}function Fa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wa?ba.memoizedState=wa=t:wa=wa.next=t,wa}function za(){if(null===xa){var t=ba.alternate;t=null!==t?t.memoizedState:null}else t=xa.next;var e=null===wa?ba.memoizedState:wa.next;if(null!==e)wa=e,xa=t;else{if(null===t){if(null===ba.alternate)throw Error(o(467));throw Error(o(310))}t={memoizedState:(xa=t).memoizedState,baseState:xa.baseState,baseQueue:xa.baseQueue,queue:xa.queue,next:null},null===wa?ba.memoizedState=wa=t:wa=wa.next=t}return wa}function Ba(t){var e=Ma;return Ma+=1,null===Ta&&(Ta=[]),t=Zi(Ta,t,e),e=ba,null===(null===wa?e.memoizedState:wa.next)&&(e=e.alternate,R.H=null===e||null===e.memoizedState?Uo:qo),t}function Ga(t){if(null!==t&&"object"==typeof t){if("function"==typeof t.then)return Ba(t);if(t.$$typeof===w)return Mi(t)}throw Error(o(438,String(t)))}function Wa(t){var e=null,n=ba.updateQueue;if(null!==n&&(e=n.memoCache),null==e){var r=ba.alternate;null!==r&&null!==(r=r.updateQueue)&&null!=(r=r.memoCache)&&(e={data:r.data.map((function(t){return t.slice()})),index:0})}if(null==e&&(e={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ba.updateQueue=n),n.memoCache=e,void 0===(n=e.data[e.index]))for(n=e.data[e.index]=Array(t),r=0;r<t;r++)n[r]=A;return e.index++,n}function Va(t,e){return"function"==typeof e?e(t):e}function Ha(t){return Ya(za(),xa,t)}function Ya(t,e,n){var r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=t.baseQueue,a=r.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}e.baseQueue=i=a,r.pending=null}if(a=t.baseState,null===i)t.memoizedState=a;else{var u=s=null,c=null,l=e=i.next,f=!1;do{var d=-536870913&l.lane;if(d!==l.lane?(ac&d)===d:(ma&d)===d){var h=l.revertLane;if(0===h)null!==c&&(c=c.next={lane:0,revertLane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),d===Ii&&(f=!0);else{if((ma&h)===h){l=l.next,h===Ii&&(f=!0);continue}d={lane:0,revertLane:l.revertLane,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null},null===c?(u=c=d,s=a):c=c.next=d,ba.lanes|=h,hc|=h}d=l.action,Oa&&n(a,d),a=l.hasEagerState?l.eagerState:n(a,d)}else h={lane:d,revertLane:l.revertLane,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null},null===c?(u=c=h,s=a):c=c.next=h,ba.lanes|=d,hc|=d;l=l.next}while(null!==l&&l!==e);if(null===c?s=a:c.next=u,!Kn(a,t.memoizedState)&&(Ts=!0,f&&null!==(n=Fi)))throw n;t.memoizedState=a,t.baseState=s,t.baseQueue=c,r.lastRenderedState=a}return null===i&&(r.lanes=0),[t.memoizedState,r.dispatch]}function Ua(t){var e=za(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=t(a,s.action),s=s.next}while(s!==i);Kn(a,e.memoizedState)||(Ts=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function qa(t,e,n){var r=ba,i=za(),a=ai;if(a){if(void 0===n)throw Error(o(407));n=n()}else n=e();var s=!Kn((xa||i).memoizedState,n);if(s&&(i.memoizedState=n,Ts=!0),i=i.queue,yo(2048,8,$a.bind(null,r,i,t),[t]),i.getSnapshot!==e||s||null!==wa&&1&wa.memoizedState.tag){if(r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Ka.bind(null,r,i,n,e),null),null===rc)throw Error(o(349));a||124&ma||Xa(r,e,n)}return n}function Xa(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=ba.updateQueue)?(e={lastEffect:null,events:null,stores:null,memoCache:null},ba.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ka(t,e,n,r){e.value=n,e.getSnapshot=r,Za(e)&&Qa(t)}function $a(t,e,n){return n((function(){Za(e)&&Qa(t)}))}function Za(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kn(t,n)}catch(t){return!0}}function Qa(t){var e=Cr(t,2);null!==e&&Dc(e,0,2)}function Ja(t){var e=Fa();if("function"==typeof t){var n=t;if(t=n(),Oa){dt(!0);try{n()}finally{dt(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:t},e}function to(t,e,n,r){return t.baseState=n,Ya(t,xa,"function"==typeof r?r:Va)}function eo(t,e,n,r,i){if(Wo(t))throw Error(o(485));if(null!==(t=e.action)){var a={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(t){a.listeners.push(t)}};null!==R.T?n(!0):a.isTransition=!1,r(a),null===(n=e.pending)?(a.next=e.pending=a,no(e,a)):(a.next=n.next,e.pending=n.next=a)}}function no(t,e){var n=e.action,r=e.payload,i=t.state;if(e.isTransition){var a=R.T,o={};R.T=o;try{var s=n(i,r),u=R.S;null!==u&&u(o,s),ro(t,e,s)}catch(n){ao(t,e,n)}finally{R.T=a}}else try{ro(t,e,a=n(i,r))}catch(n){ao(t,e,n)}}function ro(t,e,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then((function(n){io(t,e,n)}),(function(n){return ao(t,e,n)})):io(t,e,n)}function io(t,e,n){e.status="fulfilled",e.value=n,oo(e),t.state=n,null!==(e=t.pending)&&((n=e.next)===e?t.pending=null:(n=n.next,e.next=n,no(t,n)))}function ao(t,e,n){var r=t.pending;if(t.pending=null,null!==r){r=r.next;do{e.status="rejected",e.reason=n,oo(e),e=e.next}while(e!==r)}t.action=null}function oo(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function so(t,e){return e}function uo(t,e){if(ai){var n=rc.formState;if(null!==n){t:{var r=ba;if(ai){if(ii){e:{for(var i=ii,a=si;8!==i.nodeType;){if(!a){i=null;break e}if(null===(i=mf(i.nextSibling))){i=null;break e}}i="F!"===(a=i.data)||"F"===a?i:null}if(i){ii=mf(i.nextSibling),r="F!"===i.data;break t}}ci(r)}r=!1}r&&(e=n[0])}}return(n=Fa()).memoizedState=n.baseState=e,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:e},n.queue=r,n=zo.bind(null,ba,r),r.dispatch=n,r=Ja(!1),a=Go.bind(null,ba,!1,r.queue),i={state:e,dispatch:null,action:t,pending:null},(r=Fa()).queue=i,n=eo.bind(null,ba,i,a,n),i.dispatch=n,r.memoizedState=t,[e,n,!1]}function co(t){return lo(za(),xa,t)}function lo(t,e,n){if(e=Ya(t,e,so)[0],t=Ha(Va)[0],"object"==typeof e&&null!==e&&"function"==typeof e.then)try{var r=Ba(e)}catch(t){if(t===Yi)throw qi;throw t}else r=e;var i=(e=za()).queue,a=i.dispatch;return n!==e.memoizedState&&(ba.flags|=2048,po(9,{destroy:void 0,resource:void 0},fo.bind(null,i,n),null)),[r,a,t]}function fo(t,e){t.action=e}function ho(t){var e=za(),n=xa;if(null!==n)return lo(e,n,t);za(),e=e.memoizedState;var r=(n=za()).queue.dispatch;return n.memoizedState=t,[e,r,!1]}function po(t,e,n,r){return t={tag:t,create:n,deps:r,inst:e,next:null},null===(e=ba.updateQueue)&&(e={lastEffect:null,events:null,stores:null,memoCache:null},ba.updateQueue=e),null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function vo(){return za().memoizedState}function go(t,e,n,r){var i=Fa();r=void 0===r?null:r,ba.flags|=t,i.memoizedState=po(1|e,{destroy:void 0,resource:void 0},n,r)}function yo(t,e,n,r){var i=za();r=void 0===r?null:r;var a=i.memoizedState.inst;null!==xa&&null!==r&&Na(r,xa.memoizedState.deps)?i.memoizedState=po(e,a,n,r):(ba.flags|=t,i.memoizedState=po(1|e,a,n,r))}function mo(t,e){go(8390656,8,t,e)}function bo(t,e){yo(2048,8,t,e)}function xo(t,e){return yo(4,2,t,e)}function wo(t,e){return yo(4,4,t,e)}function ko(t,e){if("function"==typeof e){t=t();var n=e(t);return function(){"function"==typeof n?n():e(null)}}if(null!=e)return t=t(),e.current=t,function(){e.current=null}}function Eo(t,e,n){n=null!=n?n.concat([t]):null,yo(4,4,ko.bind(null,e,t),n)}function Oo(){}function So(t,e){var n=za();e=void 0===e?null:e;var r=n.memoizedState;return null!==e&&Na(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Mo(t,e){var n=za();e=void 0===e?null:e;var r=n.memoizedState;if(null!==e&&Na(e,r[1]))return r[0];if(r=t(),Oa){dt(!0);try{t()}finally{dt(!1)}}return n.memoizedState=[r,e],r}function To(t,e,n){return void 0===n||1073741824&ma?t.memoizedState=e:(t.memoizedState=n,t=jc(),ba.lanes|=t,hc|=t,n)}function Ao(t,e,n,r){return Kn(n,e)?n:null!==ha.current?(t=To(t,n,r),Kn(t,e)||(Ts=!0),t):42&ma?(t=jc(),ba.lanes|=t,hc|=t,e):(Ts=!0,t.memoizedState=n)}function Po(t,e,n,r,i){var a=j.p;j.p=0!==a&&8>a?a:8;var o,s,u,c=R.T,l={};R.T=l,Go(t,!1,e,n);try{var f=i(),d=R.S;null!==d&&d(l,f),null!==f&&"object"==typeof f&&"function"==typeof f.then?Bo(t,e,(o=r,s=[],u={status:"pending",value:null,reason:null,then:function(t){s.push(t)}},f.then((function(){u.status="fulfilled",u.value=o;for(var t=0;t<s.length;t++)(0,s[t])(o)}),(function(t){for(u.status="rejected",u.reason=t,t=0;t<s.length;t++)(0,s[t])(void 0)})),u),Rc()):Bo(t,e,r,Rc())}catch(n){Bo(t,e,{then:function(){},status:"rejected",reason:n},Rc())}finally{j.p=a,R.T=c}}function No(){}function Co(t,e,n,r){if(5!==t.tag)throw Error(o(476));var i=_o(t).queue;Po(t,i,e,D,null===n?No:function(){return Lo(t),n(r)})}function _o(t){var e=t.memoizedState;if(null!==e)return e;var n={};return(e={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:n},next:null},t.memoizedState=e,null!==(t=t.alternate)&&(t.memoizedState=e),e}function Lo(t){Bo(t,_o(t).next.queue,{},Rc())}function Ro(){return Mi(Kf)}function jo(){return za().memoizedState}function Do(){return za().memoizedState}function Io(t){for(var e=t.return;null!==e;){switch(e.tag){case 24:case 3:var n=Rc(),r=aa(e,t=ia(n),n);return null!==r&&(Dc(r,0,n),oa(r,e,n)),e={cache:Li()},void(t.payload=e)}e=e.return}}function Fo(t,e,n){var r=Rc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Wo(t)?Vo(e,n):null!==(n=Nr(t,e,n,r))&&(Dc(n,0,r),Ho(n,e,r))}function zo(t,e,n){Bo(t,e,n,Rc())}function Bo(t,e,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wo(t))Vo(e,i);else{var a=t.alternate;if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var o=e.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Kn(s,o))return Pr(t,e,i,0),null===rc&&Ar(),!1}catch(t){}if(null!==(n=Nr(t,e,i,r)))return Dc(n,0,r),Ho(n,e,r),!0}return!1}function Go(t,e,n,r){if(r={lane:2,revertLane:Pl(),action:r,hasEagerState:!1,eagerState:null,next:null},Wo(t)){if(e)throw Error(o(479))}else null!==(e=Nr(t,n,r,2))&&Dc(e,0,2)}function Wo(t){var e=t.alternate;return t===ba||null!==e&&e===ba}function Vo(t,e){Ea=ka=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ho(t,e,n){if(4194048&n){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,Tt(t,n)}}var Yo={readContext:Mi,use:Ga,useCallback:Pa,useContext:Pa,useEffect:Pa,useImperativeHandle:Pa,useLayoutEffect:Pa,useInsertionEffect:Pa,useMemo:Pa,useReducer:Pa,useRef:Pa,useState:Pa,useDebugValue:Pa,useDeferredValue:Pa,useTransition:Pa,useSyncExternalStore:Pa,useId:Pa,useHostTransitionStatus:Pa,useFormState:Pa,useActionState:Pa,useOptimistic:Pa,useMemoCache:Pa,useCacheRefresh:Pa},Uo={readContext:Mi,use:Ga,useCallback:function(t,e){return Fa().memoizedState=[t,void 0===e?null:e],t},useContext:Mi,useEffect:mo,useImperativeHandle:function(t,e,n){n=null!=n?n.concat([t]):null,go(4194308,4,ko.bind(null,e,t),n)},useLayoutEffect:function(t,e){return go(4194308,4,t,e)},useInsertionEffect:function(t,e){go(4,2,t,e)},useMemo:function(t,e){var n=Fa();e=void 0===e?null:e;var r=t();if(Oa){dt(!0);try{t()}finally{dt(!1)}}return n.memoizedState=[r,e],r},useReducer:function(t,e,n){var r=Fa();if(void 0!==n){var i=n(e);if(Oa){dt(!0);try{n(e)}finally{dt(!1)}}}else i=e;return r.memoizedState=r.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},r.queue=t,t=t.dispatch=Fo.bind(null,ba,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Fa().memoizedState=t},useState:function(t){var e=(t=Ja(t)).queue,n=zo.bind(null,ba,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Oo,useDeferredValue:function(t,e){return To(Fa(),t,e)},useTransition:function(){var t=Ja(!1);return t=Po.bind(null,ba,t.queue,!0,!1),Fa().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var r=ba,i=Fa();if(ai){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===rc)throw Error(o(349));124&ac||Xa(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,mo($a.bind(null,r,a,t),[t]),r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Ka.bind(null,r,a,n,e),null),n},useId:function(){var t=Fa(),e=rc.identifierPrefix;if(ai){var n=Qr;e="«"+e+"R"+(n=(Zr&~(1<<32-ht(Zr)-1)).toString(32)+n),0<(n=Sa++)&&(e+="H"+n.toString(32)),e+="»"}else e="«"+e+"r"+(n=Aa++).toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:Ro,useFormState:uo,useActionState:uo,useOptimistic:function(t){var e=Fa();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Go.bind(null,ba,!0,n),n.dispatch=e,[t,e]},useMemoCache:Wa,useCacheRefresh:function(){return Fa().memoizedState=Io.bind(null,ba)}},qo={readContext:Mi,use:Ga,useCallback:So,useContext:Mi,useEffect:bo,useImperativeHandle:Eo,useInsertionEffect:xo,useLayoutEffect:wo,useMemo:Mo,useReducer:Ha,useRef:vo,useState:function(){return Ha(Va)},useDebugValue:Oo,useDeferredValue:function(t,e){return Ao(za(),xa.memoizedState,t,e)},useTransition:function(){var t=Ha(Va)[0],e=za().memoizedState;return["boolean"==typeof t?t:Ba(t),e]},useSyncExternalStore:qa,useId:jo,useHostTransitionStatus:Ro,useFormState:co,useActionState:co,useOptimistic:function(t,e){return to(za(),0,t,e)},useMemoCache:Wa,useCacheRefresh:Do},Xo={readContext:Mi,use:Ga,useCallback:So,useContext:Mi,useEffect:bo,useImperativeHandle:Eo,useInsertionEffect:xo,useLayoutEffect:wo,useMemo:Mo,useReducer:Ua,useRef:vo,useState:function(){return Ua(Va)},useDebugValue:Oo,useDeferredValue:function(t,e){var n=za();return null===xa?To(n,t,e):Ao(n,xa.memoizedState,t,e)},useTransition:function(){var t=Ua(Va)[0],e=za().memoizedState;return["boolean"==typeof t?t:Ba(t),e]},useSyncExternalStore:qa,useId:jo,useHostTransitionStatus:Ro,useFormState:ho,useActionState:ho,useOptimistic:function(t,e){var n=za();return null!==xa?to(n,0,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Wa,useCacheRefresh:Do},Ko=null,$o=0;function Zo(t){var e=$o;return $o+=1,null===Ko&&(Ko=[]),Zi(Ko,t,e)}function Qo(t,e){e=e.props.ref,t.ref=void 0!==e?e:null}function Jo(t,e){if(e.$$typeof===h)throw Error(o(525));throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ts(t){return(0,t._init)(t._payload)}function es(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t){for(var e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(t,e){return(t=Fr(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=67108866,n):r:(e.flags|=67108866,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=67108866),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=Wr(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){var a=n.type;return a===g?f(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===M&&ts(a)===e.type)?(Qo(e=i(e,n.props),n),e.return=t,e):(Qo(e=Br(n.type,n.key,n.props,null,t.mode,r),n),e.return=t,e)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Vr(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function f(t,e,n,r,a){return null===e||7!==e.tag?((e=Gr(n,t.mode,r,a)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n){if("string"==typeof e&&""!==e||"number"==typeof e||"bigint"==typeof e)return(e=Wr(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case p:return Qo(n=Br(e.type,e.key,e.props,null,t.mode,n),e),n.return=t,n;case v:return(e=Vr(e,t.mode,n)).return=t,e;case M:return d(t,e=(0,e._init)(e._payload),n)}if(L(e)||N(e))return(e=Gr(e,t.mode,n,null)).return=t,e;if("function"==typeof e.then)return d(t,Zo(e),n);if(e.$$typeof===w)return d(t,Ti(t,e),n);Jo(t,e)}return null}function h(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:u(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(t,e,n,r):null;case v:return n.key===i?l(t,e,n,r):null;case M:return h(t,e,n=(i=n._init)(n._payload),r)}if(L(n)||N(n))return null!==i?null:f(t,e,n,r,null);if("function"==typeof n.then)return h(t,e,Zo(n),r);if(n.$$typeof===w)return h(t,e,Ti(t,n),r);Jo(t,n)}return null}function y(t,e,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case p:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case v:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i);case M:return y(t,e,n,r=(0,r._init)(r._payload),i)}if(L(r)||N(r))return f(e,t=t.get(n)||null,r,i,null);if("function"==typeof r.then)return y(t,e,n,Zo(r),i);if(r.$$typeof===w)return y(t,e,n,Ti(e,r),i);Jo(e,r)}return null}function m(u,c,l,f){if("object"==typeof l&&null!==l&&l.type===g&&null===l.key&&(l=l.props.children),"object"==typeof l&&null!==l){switch(l.$$typeof){case p:t:{for(var b=l.key;null!==c;){if(c.key===b){if((b=l.type)===g){if(7===c.tag){n(u,c.sibling),(f=i(c,l.props.children)).return=u,u=f;break t}}else if(c.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===M&&ts(b)===c.type){n(u,c.sibling),Qo(f=i(c,l.props),l),f.return=u,u=f;break t}n(u,c);break}e(u,c),c=c.sibling}l.type===g?((f=Gr(l.props.children,u.mode,f,l.key)).return=u,u=f):(Qo(f=Br(l.type,l.key,l.props,null,u.mode,f),l),f.return=u,u=f)}return s(u);case v:t:{for(b=l.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===l.containerInfo&&c.stateNode.implementation===l.implementation){n(u,c.sibling),(f=i(c,l.children||[])).return=u,u=f;break t}n(u,c);break}e(u,c),c=c.sibling}(f=Vr(l,u.mode,f)).return=u,u=f}return s(u);case M:return m(u,c,l=(b=l._init)(l._payload),f)}if(L(l))return function(i,o,s,u){for(var c=null,l=null,f=o,p=o=0,v=null;null!==f&&p<s.length;p++){f.index>p?(v=f,f=null):v=f.sibling;var g=h(i,f,s[p],u);if(null===g){null===f&&(f=v);break}t&&f&&null===g.alternate&&e(i,f),o=a(g,o,p),null===l?c=g:l.sibling=g,l=g,f=v}if(p===s.length)return n(i,f),ai&&Jr(i,p),c;if(null===f){for(;p<s.length;p++)null!==(f=d(i,s[p],u))&&(o=a(f,o,p),null===l?c=f:l.sibling=f,l=f);return ai&&Jr(i,p),c}for(f=r(f);p<s.length;p++)null!==(v=y(f,i,p,s[p],u))&&(t&&null!==v.alternate&&f.delete(null===v.key?p:v.key),o=a(v,o,p),null===l?c=v:l.sibling=v,l=v);return t&&f.forEach((function(t){return e(i,t)})),ai&&Jr(i,p),c}(u,c,l,f);if(N(l)){if("function"!=typeof(b=N(l)))throw Error(o(150));return function(i,s,u,c){if(null==u)throw Error(o(151));for(var l=null,f=null,p=s,v=s=0,g=null,m=u.next();null!==p&&!m.done;v++,m=u.next()){p.index>v?(g=p,p=null):g=p.sibling;var b=h(i,p,m.value,c);if(null===b){null===p&&(p=g);break}t&&p&&null===b.alternate&&e(i,p),s=a(b,s,v),null===f?l=b:f.sibling=b,f=b,p=g}if(m.done)return n(i,p),ai&&Jr(i,v),l;if(null===p){for(;!m.done;v++,m=u.next())null!==(m=d(i,m.value,c))&&(s=a(m,s,v),null===f?l=m:f.sibling=m,f=m);return ai&&Jr(i,v),l}for(p=r(p);!m.done;v++,m=u.next())null!==(m=y(p,i,v,m.value,c))&&(t&&null!==m.alternate&&p.delete(null===m.key?v:m.key),s=a(m,s,v),null===f?l=m:f.sibling=m,f=m);return t&&p.forEach((function(t){return e(i,t)})),ai&&Jr(i,v),l}(u,c,l=b.call(l),f)}if("function"==typeof l.then)return m(u,c,Zo(l),f);if(l.$$typeof===w)return m(u,c,Ti(u,l),f);Jo(u,l)}return"string"==typeof l&&""!==l||"number"==typeof l||"bigint"==typeof l?(l=""+l,null!==c&&6===c.tag?(n(u,c.sibling),(f=i(c,l)).return=u,u=f):(n(u,c),(f=Wr(l,u.mode,f)).return=u,u=f),s(u)):n(u,c)}return function(t,e,n,r){try{$o=0;var i=m(t,e,n,r);return Ko=null,i}catch(e){if(e===Yi||e===qi)throw e;var a=Dr(29,e,null,t.mode);return a.lanes=r,a.return=t,a}}}var ns=es(!0),rs=es(!1),is=z(null),as=null;function os(t){var e=t.alternate;G(ls,1&ls.current),G(is,t),null===as&&(null===e||null!==ha.current||null!==e.memoizedState)&&(as=t)}function ss(t){if(22===t.tag){if(G(ls,ls.current),G(is,t),null===as){var e=t.alternate;null!==e&&null!==e.memoizedState&&(as=t)}}else us()}function us(){G(ls,ls.current),G(is,is.current)}function cs(t){B(is),as===t&&(as=null),B(ls)}var ls=z(0);function fs(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||yf(n)))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(128&e.flags)return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function ds(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:d({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var hs={enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Rc(),i=ia(r);i.payload=e,null!=n&&(i.callback=n),null!==(e=aa(t,i,r))&&(Dc(e,0,r),oa(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Rc(),i=ia(r);i.tag=1,i.payload=e,null!=n&&(i.callback=n),null!==(e=aa(t,i,r))&&(Dc(e,0,r),oa(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rc(),r=ia(n);r.tag=2,null!=e&&(r.callback=e),null!==(e=aa(t,r,n))&&(Dc(e,0,n),oa(e,t,n))}};function ps(t,e,n,r,i,a,o){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,a,o):!(e.prototype&&e.prototype.isPureReactComponent&&$n(n,r)&&$n(i,a))}function vs(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hs.enqueueReplaceState(e,e.state,null)}function gs(t,e){var n=e;if("ref"in e)for(var r in n={},e)"ref"!==r&&(n[r]=e[r]);if(t=t.defaultProps)for(var i in n===e&&(n=d({},n)),t)void 0===n[i]&&(n[i]=t[i]);return n}var ys="function"==typeof reportError?reportError:function(t){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof t&&null!==t&&"string"==typeof t.message?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",t);console.error(t)};function ms(t){ys(t)}function bs(t){console.error(t)}function xs(t){ys(t)}function ws(t,e){try{(0,t.onUncaughtError)(e.value,{componentStack:e.stack})}catch(t){setTimeout((function(){throw t}))}}function ks(t,e,n){try{(0,t.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===e.tag?e.stateNode:null})}catch(t){setTimeout((function(){throw t}))}}function Es(t,e,n){return(n=ia(n)).tag=3,n.payload={element:null},n.callback=function(){ws(t,e)},n}function Os(t){return(t=ia(t)).tag=3,t}function Ss(t,e,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var a=r.value;t.payload=function(){return i(a)},t.callback=function(){ks(e,n,r)}}var o=n.stateNode;null!==o&&"function"==typeof o.componentDidCatch&&(t.callback=function(){ks(e,n,r),"function"!=typeof i&&(null===Oc?Oc=new Set([this]):Oc.add(this));var t=r.stack;this.componentDidCatch(r.value,{componentStack:null!==t?t:""})})}var Ms=Error(o(461)),Ts=!1;function As(t,e,n,r){e.child=null===t?rs(e,null,n,r):ns(e,t.child,n,r)}function Ps(t,e,n,r,i){n=n.render;var a=e.ref;if("ref"in r){var o={};for(var s in r)"ref"!==s&&(o[s]=r[s])}else o=r;return Si(e),r=Ca(t,e,n,o,a,i),s=ja(),null===t||Ts?(ai&&s&&ei(e),e.flags|=1,As(t,e,r,i),e.child):(Da(t,e,i),Ks(t,e,i))}function Ns(t,e,n,r,i){if(null===t){var a=n.type;return"function"!=typeof a||Ir(a)||void 0!==a.defaultProps||null!==n.compare?((t=Br(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Cs(t,e,a,r,i))}if(a=t.child,!$s(t,i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(o,r)&&t.ref===e.ref)return Ks(t,e,i)}return e.flags|=1,(t=Fr(a,r)).ref=e.ref,t.return=e,e.child=t}function Cs(t,e,n,r,i){if(null!==t){var a=t.memoizedProps;if($n(a,r)&&t.ref===e.ref){if(Ts=!1,e.pendingProps=r=a,!$s(t,i))return e.lanes=t.lanes,Ks(t,e,i);131072&t.flags&&(Ts=!0)}}return js(t,e,n,r,i)}function _s(t,e,n){var r=e.pendingProps,i=r.children,a=null!==t?t.memoizedState:null;if("hidden"===r.mode){if(128&e.flags){if(r=null!==a?a.baseLanes|n:n,null!==t){for(i=e.child=t.child,a=0;null!==i;)a=a|i.lanes|i.childLanes,i=i.sibling;e.childLanes=a&~r}else e.childLanes=0,e.child=null;return Ls(t,e,r,n)}if(!(536870912&n))return e.lanes=e.childLanes=536870912,Ls(t,e,null!==a?a.baseLanes|n:n,n);e.memoizedState={baseLanes:0,cachePool:null},null!==t&&Vi(0,null!==a?a.cachePool:null),null!==a?va(e,a):ga(),ss(e)}else null!==a?(Vi(0,a.cachePool),va(e,a),us(),e.memoizedState=null):(null!==t&&Vi(0,null),ga(),us());return As(t,e,i,n),e.child}function Ls(t,e,n,r){var i=Wi();return i=null===i?null:{parent:_i._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},null!==t&&Vi(0,null),ga(),ss(e),null!==t&&Ei(t,e,r,!0),null}function Rs(t,e){var n=e.ref;if(null===n)null!==t&&null!==t.ref&&(e.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(o(284));null!==t&&t.ref===n||(e.flags|=4194816)}}function js(t,e,n,r,i){return Si(e),n=Ca(t,e,n,r,void 0,i),r=ja(),null===t||Ts?(ai&&r&&ei(e),e.flags|=1,As(t,e,n,i),e.child):(Da(t,e,i),Ks(t,e,i))}function Ds(t,e,n,r,i,a){return Si(e),e.updateQueue=null,n=La(e,r,n,i),_a(t),r=ja(),null===t||Ts?(ai&&r&&ei(e),e.flags|=1,As(t,e,n,a),e.child):(Da(t,e,a),Ks(t,e,a))}function Is(t,e,n,r,i){if(Si(e),null===e.stateNode){var a=Rr,o=n.contextType;"object"==typeof o&&null!==o&&(a=Mi(o)),a=new n(r,a),e.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=hs,e.stateNode=a,a._reactInternals=e,(a=e.stateNode).props=r,a.state=e.memoizedState,a.refs={},na(e),o=n.contextType,a.context="object"==typeof o&&null!==o?Mi(o):Rr,a.state=e.memoizedState,"function"==typeof(o=n.getDerivedStateFromProps)&&(ds(e,n,o,r),a.state=e.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(o=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),o!==a.state&&hs.enqueueReplaceState(a,a.state,null),la(e,r,a,i),ca(),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4194308),r=!0}else if(null===t){a=e.stateNode;var s=e.memoizedProps,u=gs(n,s);a.props=u;var c=a.context,l=n.contextType;o=Rr,"object"==typeof l&&null!==l&&(o=Mi(l));var f=n.getDerivedStateFromProps;l="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate,s=e.pendingProps!==s,l||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s||c!==o)&&vs(e,a,r,o),ea=!1;var d=e.memoizedState;a.state=d,la(e,r,a,i),ca(),c=e.memoizedState,s||d!==c||ea?("function"==typeof f&&(ds(e,n,f,r),c=e.memoizedState),(u=ea||ps(e,n,u,r,d,c,o))?(l||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.flags|=4194308)):("function"==typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=o,r=u):("function"==typeof a.componentDidMount&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,ra(t,e),l=gs(n,o=e.memoizedProps),a.props=l,f=e.pendingProps,d=a.context,c=n.contextType,u=Rr,"object"==typeof c&&null!==c&&(u=Mi(c)),(c="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==f||d!==u)&&vs(e,a,r,u),ea=!1,d=e.memoizedState,a.state=d,la(e,r,a,i),ca();var h=e.memoizedState;o!==f||d!==h||ea||null!==t&&null!==t.dependencies&&Oi(t.dependencies)?("function"==typeof s&&(ds(e,n,s,r),h=e.memoizedState),(l=ea||ps(e,n,l,r,d,h,u)||null!==t&&null!==t.dependencies&&Oi(t.dependencies))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,u)),"function"==typeof a.componentDidUpdate&&(e.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=h),a.props=r,a.state=h,a.context=u,r=l):("function"!=typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return a=r,Rs(t,e),r=!!(128&e.flags),a||r?(a=e.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:a.render(),e.flags|=1,null!==t&&r?(e.child=ns(e,t.child,null,i),e.child=ns(e,null,n,i)):As(t,e,n,i),e.memoizedState=a.state,t=e.child):t=Ks(t,e,i),t}function Fs(t,e,n,r){return hi(),e.flags|=256,As(t,e,n,r),e.child}var zs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bs(t){return{baseLanes:t,cachePool:Hi()}}function Gs(t,e,n){return t=null!==t?t.childLanes&~n:0,e&&(t|=gc),t}function Ws(t,e,n){var r,i=e.pendingProps,a=!1,s=!!(128&e.flags);if((r=s)||(r=(null===t||null!==t.memoizedState)&&!!(2&ls.current)),r&&(a=!0,e.flags&=-129),r=!!(32&e.flags),e.flags&=-33,null===t){if(ai){if(a?os(e):us(),ai){var u,c=ii;if(u=c){t:{for(u=c,c=si;8!==u.nodeType;){if(!c){c=null;break t}if(null===(u=mf(u.nextSibling))){c=null;break t}}c=u}null!==c?(e.memoizedState={dehydrated:c,treeContext:null!==$r?{id:Zr,overflow:Qr}:null,retryLane:536870912,hydrationErrors:null},(u=Dr(18,null,null,0)).stateNode=c,u.return=e,e.child=u,ri=e,ii=null,u=!0):u=!1}u||ci(e)}if(null!==(c=e.memoizedState)&&null!==(c=c.dehydrated))return yf(c)?e.lanes=32:e.lanes=536870912,null;cs(e)}return c=i.children,i=i.fallback,a?(us(),c=Hs({mode:"hidden",children:c},a=e.mode),i=Gr(i,a,n,null),c.return=e,i.return=e,c.sibling=i,e.child=c,(a=e.child).memoizedState=Bs(n),a.childLanes=Gs(t,r,n),e.memoizedState=zs,i):(os(e),Vs(e,c))}if(null!==(u=t.memoizedState)&&null!==(c=u.dehydrated)){if(s)256&e.flags?(os(e),e.flags&=-257,e=Ys(t,e,n)):null!==e.memoizedState?(us(),e.child=t.child,e.flags|=128,e=null):(us(),a=i.fallback,c=e.mode,i=Hs({mode:"visible",children:i.children},c),(a=Gr(a,c,n,null)).flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,ns(e,t.child,null,n),(i=e.child).memoizedState=Bs(n),i.childLanes=Gs(t,r,n),e.memoizedState=zs,e=a);else if(os(e),yf(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var l=r.dgst;r=l,(i=Error(o(419))).stack="",i.digest=r,vi({value:i,source:null,stack:null}),e=Ys(t,e,n)}else if(Ts||Ei(t,e,n,!1),r=0!==(n&t.childLanes),Ts||r){if(null!==(r=rc)&&0!==(i=0!==((i=42&(i=n&-n)?1:At(i))&(r.suspendedLanes|n))?0:i)&&i!==u.retryLane)throw u.retryLane=i,Cr(t,i),Dc(r,0,i),Ms;"$?"===c.data||qc(),e=Ys(t,e,n)}else"$?"===c.data?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,ii=mf(c.nextSibling),ri=e,ai=!0,oi=null,si=!1,null!==t&&(Xr[Kr++]=Zr,Xr[Kr++]=Qr,Xr[Kr++]=$r,Zr=t.id,Qr=t.overflow,$r=e),(e=Vs(e,i.children)).flags|=4096);return e}return a?(us(),a=i.fallback,c=e.mode,l=(u=t.child).sibling,(i=Fr(u,{mode:"hidden",children:i.children})).subtreeFlags=65011712&u.subtreeFlags,null!==l?a=Fr(l,a):(a=Gr(a,c,n,null)).flags|=2,a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,null===(c=t.child.memoizedState)?c=Bs(n):(null!==(u=c.cachePool)?(l=_i._currentValue,u=u.parent!==l?{parent:l,pool:l}:u):u=Hi(),c={baseLanes:c.baseLanes|n,cachePool:u}),a.memoizedState=c,a.childLanes=Gs(t,r,n),e.memoizedState=zs,i):(os(e),t=(n=t.child).sibling,(n=Fr(n,{mode:"visible",children:i.children})).return=e,n.sibling=null,null!==t&&(null===(r=e.deletions)?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n)}function Vs(t,e){return(e=Hs({mode:"visible",children:e},t.mode)).return=t,t.child=e}function Hs(t,e){return(t=Dr(22,t,null,e)).lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Ys(t,e,n){return ns(e,t.child,null,n),(t=Vs(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Us(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),wi(t.return,e,n)}function qs(t,e,n,r,i){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Xs(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(As(t,e,r.children,n),2&(r=ls.current))r=1&r|2,e.flags|=128;else{if(null!==t&&128&t.flags)t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Us(t,n,e);else if(19===t.tag)Us(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}switch(G(ls,r),i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===fs(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),qs(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===fs(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}qs(e,!0,n,null,a);break;case"together":qs(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ks(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),hc|=e.lanes,0===(n&e.childLanes)){if(null===t)return null;if(Ei(t,e,n,!1),0===(n&e.childLanes))return null}if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Fr(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Fr(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function $s(t,e){return 0!==(t.lanes&e)||!(null===(t=t.dependencies)||!Oi(t))}function Zs(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps)Ts=!0;else{if(!($s(t,n)||128&e.flags))return Ts=!1,function(t,e,n){switch(e.tag){case 3:U(e,e.stateNode.containerInfo),bi(0,_i,t.memoizedState.cache),hi();break;case 27:case 5:X(e);break;case 4:U(e,e.stateNode.containerInfo);break;case 10:bi(0,e.type,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(null!==r)return null!==r.dehydrated?(os(e),e.flags|=128,null):0!==(n&e.child.childLanes)?Ws(t,e,n):(os(e),null!==(t=Ks(t,e,n))?t.sibling:null);os(e);break;case 19:var i=!!(128&t.flags);if((r=0!==(n&e.childLanes))||(Ei(t,e,n,!1),r=0!==(n&e.childLanes)),i){if(r)return Xs(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),G(ls,ls.current),r)break;return null;case 22:case 23:return e.lanes=0,_s(t,e,n);case 24:bi(0,_i,t.memoizedState.cache)}return Ks(t,e,n)}(t,e,n);Ts=!!(131072&t.flags)}else Ts=!1,ai&&1048576&e.flags&&ti(e,qr,e.index);switch(e.lanes=0,e.tag){case 16:t:{t=e.pendingProps;var r=e.elementType,i=r._init;if(r=i(r._payload),e.type=r,"function"!=typeof r){if(null!=r){if((i=r.$$typeof)===k){e.tag=11,e=Ps(null,e,r,t,n);break t}if(i===S){e.tag=14,e=Ns(null,e,r,t,n);break t}}throw e=_(r)||r,Error(o(306,e,""))}Ir(r)?(t=gs(r,t),e.tag=1,e=Is(null,e,r,t,n)):(e.tag=0,e=js(null,e,r,t,n))}return e;case 0:return js(t,e,e.type,e.pendingProps,n);case 1:return Is(t,e,r=e.type,i=gs(r,e.pendingProps),n);case 3:t:{if(U(e,e.stateNode.containerInfo),null===t)throw Error(o(387));r=e.pendingProps;var a=e.memoizedState;i=a.element,ra(t,e),la(e,r,null,n);var s=e.memoizedState;if(r=s.cache,bi(0,_i,r),r!==a.cache&&ki(e,[_i],n,!0),ca(),r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Fs(t,e,r,n);break t}if(r!==i){vi(i=Or(Error(o(424)),e)),e=Fs(t,e,r,n);break t}for(t=9===(t=e.stateNode.containerInfo).nodeType?t.body:"HTML"===t.nodeName?t.ownerDocument.body:t,ii=mf(t.firstChild),ri=e,ai=!0,oi=null,si=!0,n=rs(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hi(),r===i){e=Ks(t,e,n);break t}As(t,e,r,n)}e=e.child}return e;case 26:return Rs(t,e),null===t?(n=Pf(e.type,null,e.pendingProps,null))?e.memoizedState=n:ai||(n=e.type,t=e.pendingProps,(r=rf(H.current).createElement(n))[_t]=e,r[Lt]=t,tf(r,n,t),Yt(r),e.stateNode=r):e.memoizedState=Pf(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return X(e),null===t&&ai&&(r=e.stateNode=wf(e.type,e.pendingProps,H.current),ri=e,si=!0,i=ii,pf(e.type)?(bf=i,ii=mf(r.firstChild)):ii=i),As(t,e,e.pendingProps.children,n),Rs(t,e),null===t&&(e.flags|=4194304),e.child;case 5:return null===t&&ai&&((i=r=ii)&&(null!==(r=function(t,e,n,r){for(;1===t.nodeType;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!r&&("INPUT"!==t.nodeName||"hidden"!==t.type))break}else if(r){if(!t[zt])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if("stylesheet"===(a=t.getAttribute("rel"))&&t.hasAttribute("data-precedence"))break;if(a!==i.rel||t.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||t.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||t.getAttribute("title")!==(null==i.title?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(((a=t.getAttribute("src"))!==(null==i.src?null:i.src)||t.getAttribute("type")!==(null==i.type?null:i.type)||t.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&a&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else{if("input"!==e||"hidden"!==t.type)return t;var a=null==i.name?null:""+i.name;if("hidden"===i.type&&t.getAttribute("name")===a)return t}if(null===(t=mf(t.nextSibling)))break}return null}(r,e.type,e.pendingProps,si))?(e.stateNode=r,ri=e,ii=mf(r.firstChild),si=!1,i=!0):i=!1),i||ci(e)),X(e),i=e.type,a=e.pendingProps,s=null!==t?t.memoizedProps:null,r=a.children,sf(i,a)?r=null:null!==s&&sf(i,s)&&(e.flags|=32),null!==e.memoizedState&&(i=Ca(t,e,Ra,null,null,n),Kf._currentValue=i),Rs(t,e),As(t,e,r,n),e.child;case 6:return null===t&&ai&&((t=n=ii)&&(null!==(n=function(t,e,n){if(""===e)return null;for(;3!==t.nodeType;){if((1!==t.nodeType||"INPUT"!==t.nodeName||"hidden"!==t.type)&&!n)return null;if(null===(t=mf(t.nextSibling)))return null}return t}(n,e.pendingProps,si))?(e.stateNode=n,ri=e,ii=null,t=!0):t=!1),t||ci(e)),null;case 13:return Ws(t,e,n);case 4:return U(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=ns(e,null,r,n):As(t,e,r,n),e.child;case 11:return Ps(t,e,e.type,e.pendingProps,n);case 7:return As(t,e,e.pendingProps,n),e.child;case 8:case 12:return As(t,e,e.pendingProps.children,n),e.child;case 10:return r=e.pendingProps,bi(0,e.type,r.value),As(t,e,r.children,n),e.child;case 9:return i=e.type._context,r=e.pendingProps.children,Si(e),r=r(i=Mi(i)),e.flags|=1,As(t,e,r,n),e.child;case 14:return Ns(t,e,e.type,e.pendingProps,n);case 15:return Cs(t,e,e.type,e.pendingProps,n);case 19:return Xs(t,e,n);case 31:return r=e.pendingProps,n=e.mode,r={mode:r.mode,children:r.children},null===t?((n=Hs(r,n)).ref=e.ref,e.child=n,n.return=e,e=n):((n=Fr(t.child,r)).ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return _s(t,e,n);case 24:return Si(e),r=Mi(_i),null===t?(null===(i=Wi())&&(i=rc,a=Li(),i.pooledCache=a,a.refCount++,null!==a&&(i.pooledCacheLanes|=n),i=a),e.memoizedState={parent:r,cache:i},na(e),bi(0,_i,i)):(0!==(t.lanes&n)&&(ra(t,e),la(e,null,null,n),ca()),i=t.memoizedState,a=e.memoizedState,i.parent!==r?(i={parent:r,cache:r},e.memoizedState=i,0===e.lanes&&(e.memoizedState=e.updateQueue.baseState=i),bi(0,_i,r)):(r=a.cache,bi(0,_i,r),r!==i.cache&&ki(e,[_i],n,!0))),As(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(o(156,e.tag))}function Qs(t){t.flags|=4}function Js(t,e){if("stylesheet"!==e.type||4&e.state.loading)t.flags&=-16777217;else if(t.flags|=16777216,!Wf(e)){if(null!==(e=is.current)&&((4194048&ac)===ac?null!==as:(62914560&ac)!==ac&&!(536870912&ac)||e!==as))throw Qi=Xi,Ui;t.flags|=8192}}function tu(t,e){null!==e&&(t.flags|=4),16384&t.flags&&(e=22!==t.tag?Et():536870912,t.lanes|=e,yc|=e)}function eu(t,e){if(!ai)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nu(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ru(t,e,n){var r=e.pendingProps;switch(ni(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nu(e),null;case 3:return n=e.stateNode,r=null,null!==t&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),xi(_i),q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||(di(e)?Qs(e):null===t||t.memoizedState.isDehydrated&&!(256&e.flags)||(e.flags|=1024,pi())),nu(e),null;case 26:return n=e.memoizedState,null===t?(Qs(e),null!==n?(nu(e),Js(e,n)):(nu(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Qs(e),nu(e),Js(e,n)):(nu(e),e.flags&=-16777217):(t.memoizedProps!==r&&Qs(e),nu(e),e.flags&=-16777217),null;case 27:K(e),n=H.current;var i=e.type;if(null!==t&&null!=e.stateNode)t.memoizedProps!==r&&Qs(e);else{if(!r){if(null===e.stateNode)throw Error(o(166));return nu(e),null}t=W.current,di(e)?li(e):(t=wf(i,r,n),e.stateNode=t,Qs(e))}return nu(e),null;case 5:if(K(e),n=e.type,null!==t&&null!=e.stateNode)t.memoizedProps!==r&&Qs(e);else{if(!r){if(null===e.stateNode)throw Error(o(166));return nu(e),null}if(t=W.current,di(e))li(e);else{switch(i=rf(H.current),t){case 1:t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(t=i.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t="string"==typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?t.multiple=!0:r.size&&(t.size=r.size);break;default:t="string"==typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}t[_t]=e,t[Lt]=r;t:for(i=e.child;null!==i;){if(5===i.tag||6===i.tag)t.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;null===i.sibling;){if(null===i.return||i.return===e)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}e.stateNode=t;t:switch(tf(t,n,r),n){case"button":case"input":case"select":case"textarea":t=!!r.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&Qs(e)}}return nu(e),e.flags&=-16777217,null;case 6:if(t&&null!=e.stateNode)t.memoizedProps!==r&&Qs(e);else{if("string"!=typeof r&&null===e.stateNode)throw Error(o(166));if(t=H.current,di(e)){if(t=e.stateNode,n=e.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}t[_t]=e,(t=!!(t.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||$l(t.nodeValue,n)))||ci(e)}else(t=rf(t).createTextNode(r))[_t]=e,e.stateNode=t}return nu(e),null;case 13:if(r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(i=di(e),null!==r&&null!==r.dehydrated){if(null===t){if(!i)throw Error(o(318));if(!(i=null!==(i=e.memoizedState)?i.dehydrated:null))throw Error(o(317));i[_t]=e}else hi(),!(128&e.flags)&&(e.memoizedState=null),e.flags|=4;nu(e),i=!1}else i=pi(),null!==t&&null!==t.memoizedState&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&e.flags?(cs(e),e):(cs(e),null)}if(cs(e),128&e.flags)return e.lanes=n,e;if(n=null!==r,t=null!==t&&null!==t.memoizedState,n){i=null,null!==(r=e.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var a=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),tu(e,e.updateQueue),nu(e),null;case 4:return q(),null===t&&Bl(e.stateNode.containerInfo),nu(e),null;case 10:return xi(e.type),nu(e),null;case 19:if(B(ls),null===(i=e.memoizedState))return nu(e),null;if(r=!!(128&e.flags),null===(a=i.rendering))if(r)eu(i,!1);else{if(0!==dc||null!==t&&128&t.flags)for(t=e.child;null!==t;){if(null!==(a=fs(t))){for(e.flags|=128,eu(i,!1),t=a.updateQueue,e.updateQueue=t,tu(e,t),e.subtreeFlags=0,t=n,n=e.child;null!==n;)zr(n,t),n=n.sibling;return G(ls,1&ls.current|2),e.child}t=t.sibling}null!==i.tail&&et()>kc&&(e.flags|=128,r=!0,eu(i,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=fs(a))){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,tu(e,t),eu(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!ai)return nu(e),null}else 2*et()-i.renderingStartTime>kc&&536870912!==n&&(e.flags|=128,r=!0,eu(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(null!==(t=i.last)?t.sibling=a:e.child=a,i.last=a)}return null!==i.tail?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=et(),e.sibling=null,t=ls.current,G(ls,r?1&t|2:1&t),e):(nu(e),null);case 22:case 23:return cs(e),ya(),r=null!==e.memoizedState,null!==t?null!==t.memoizedState!==r&&(e.flags|=8192):r&&(e.flags|=8192),r?!!(536870912&n)&&!(128&e.flags)&&(nu(e),6&e.subtreeFlags&&(e.flags|=8192)):nu(e),null!==(n=e.updateQueue)&&tu(e,n.retryQueue),n=null,null!==t&&null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),r=null,null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),r!==n&&(e.flags|=2048),null!==t&&B(Gi),null;case 24:return n=null,null!==t&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),xi(_i),nu(e),null;case 25:case 30:return null}throw Error(o(156,e.tag))}function iu(t,e){switch(ni(e),e.tag){case 1:return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return xi(_i),q(),65536&(t=e.flags)&&!(128&t)?(e.flags=-65537&t|128,e):null;case 26:case 27:case 5:return K(e),null;case 13:if(cs(e),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));hi()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return B(ls),null;case 4:return q(),null;case 10:return xi(e.type),null;case 22:case 23:return cs(e),ya(),null!==t&&B(Gi),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 24:return xi(_i),null;default:return null}}function au(t,e){switch(ni(e),e.tag){case 3:xi(_i),q();break;case 26:case 27:case 5:K(e);break;case 4:q();break;case 13:cs(e);break;case 19:B(ls);break;case 10:xi(e.type);break;case 22:case 23:cs(e),ya(),null!==t&&B(Gi);break;case 24:xi(_i)}}function ou(t,e){try{var n=e.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&t)===t){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(t){ll(e,e.return,t)}}function su(t,e,n){try{var r=e.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var a=i.next;r=a;do{if((r.tag&t)===t){var o=r.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,i=e;var u=n,c=s;try{c()}catch(t){ll(i,u,t)}}}r=r.next}while(r!==a)}}catch(t){ll(e,e.return,t)}}function uu(t){var e=t.updateQueue;if(null!==e){var n=t.stateNode;try{da(e,n)}catch(e){ll(t,t.return,e)}}}function cu(t,e,n){n.props=gs(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(n){ll(t,e,n)}}function lu(t,e){try{var n=t.ref;if(null!==n){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;default:r=t.stateNode}"function"==typeof n?t.refCleanup=n(r):n.current=r}}catch(n){ll(t,e,n)}}function fu(t,e){var n=t.ref,r=t.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(n){ll(t,e,n)}finally{t.refCleanup=null,null!=(t=t.alternate)&&(t.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){ll(t,e,n)}else n.current=null}function du(t){var e=t.type,n=t.memoizedProps,r=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break t;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(e){ll(t,t.return,e)}}function hu(t,e,n){try{var r=t.stateNode;!function(t,e,n,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,s=null,u=null,c=null,l=null,f=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:r.hasOwnProperty(p)||Ql(t,e,p,null,r,d)}}for(var h in r){var p=r[h];if(d=n[h],r.hasOwnProperty(h)&&(null!=p||null!=d))switch(h){case"type":a=p;break;case"name":i=p;break;case"checked":l=p;break;case"defaultChecked":f=p;break;case"value":s=p;break;case"defaultValue":u=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,e));break;default:p!==d&&Ql(t,e,h,p,r,d)}}return void ge(t,s,u,c,l,f,a,i);case"select":for(a in p=s=u=h=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(a)||Ql(t,e,a,null,r,c)}for(i in r)if(a=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=a||null!=c))switch(i){case"value":h=a;break;case"defaultValue":u=a;break;case"multiple":s=a;default:a!==c&&Ql(t,e,i,a,r,c)}return e=u,n=s,r=p,void(null!=h?be(t,!!n,h,!1):!!r!=!!n&&(null!=e?be(t,!!n,e,!0):be(t,!!n,n?[]:"",!1)));case"textarea":for(u in p=h=null,n)if(i=n[u],n.hasOwnProperty(u)&&null!=i&&!r.hasOwnProperty(u))switch(u){case"value":case"children":break;default:Ql(t,e,u,null,r,i)}for(s in r)if(i=r[s],a=n[s],r.hasOwnProperty(s)&&(null!=i||null!=a))switch(s){case"value":h=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==a&&Ql(t,e,s,i,r,a)}return void xe(t,h,p);case"option":for(var v in n)h=n[v],n.hasOwnProperty(v)&&null!=h&&!r.hasOwnProperty(v)&&("selected"===v?t.selected=!1:Ql(t,e,v,null,r,h));for(c in r)h=r[c],p=n[c],!r.hasOwnProperty(c)||h===p||null==h&&null==p||("selected"===c?t.selected=h&&"function"!=typeof h&&"symbol"!=typeof h:Ql(t,e,c,h,r,p));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)h=n[g],n.hasOwnProperty(g)&&null!=h&&!r.hasOwnProperty(g)&&Ql(t,e,g,null,r,h);for(l in r)if(h=r[l],p=n[l],r.hasOwnProperty(l)&&h!==p&&(null!=h||null!=p))switch(l){case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,e));break;default:Ql(t,e,l,h,r,p)}return;default:if(Me(e)){for(var y in n)h=n[y],n.hasOwnProperty(y)&&void 0!==h&&!r.hasOwnProperty(y)&&Jl(t,e,y,void 0,r,h);for(f in r)h=r[f],p=n[f],!r.hasOwnProperty(f)||h===p||void 0===h&&void 0===p||Jl(t,e,f,h,r,p);return}}for(var m in n)h=n[m],n.hasOwnProperty(m)&&null!=h&&!r.hasOwnProperty(m)&&Ql(t,e,m,null,r,h);for(d in r)h=r[d],p=n[d],!r.hasOwnProperty(d)||h===p||null==h&&null==p||Ql(t,e,d,h,r,p)}(r,t.type,n,e),r[Lt]=e}catch(e){ll(t,t.return,e)}}function pu(t){return 5===t.tag||3===t.tag||26===t.tag||27===t.tag&&pf(t.type)||4===t.tag}function vu(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||pu(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(27===t.tag&&pf(t.type))continue t;if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function gu(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(t,e):((e=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=Zl));else if(4!==r&&(27===r&&pf(t.type)&&(n=t.stateNode,e=null),null!==(t=t.child)))for(gu(t,e,n),t=t.sibling;null!==t;)gu(t,e,n),t=t.sibling}function yu(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&(27===r&&pf(t.type)&&(n=t.stateNode),null!==(t=t.child)))for(yu(t,e,n),t=t.sibling;null!==t;)yu(t,e,n),t=t.sibling}function mu(t){var e=t.stateNode,n=t.memoizedProps;try{for(var r=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);tf(e,r,n),e[_t]=t,e[Lt]=n}catch(e){ll(t,t.return,e)}}var bu=!1,xu=!1,wu=!1,ku="function"==typeof WeakSet?WeakSet:Set,Eu=null;function Ou(t,e,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Iu(t,n),4&r&&ou(5,n);break;case 1:if(Iu(t,n),4&r)if(t=n.stateNode,null===e)try{t.componentDidMount()}catch(t){ll(n,n.return,t)}else{var i=gs(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(t){ll(n,n.return,t)}}64&r&&uu(n),512&r&&lu(n,n.return);break;case 3:if(Iu(t,n),64&r&&null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{da(t,e)}catch(t){ll(n,n.return,t)}}break;case 27:null===e&&4&r&&mu(n);case 26:case 5:Iu(t,n),null===e&&4&r&&du(n),512&r&&lu(n,n.return);break;case 12:Iu(t,n);break;case 13:Iu(t,n),4&r&&Nu(t,n),64&r&&null!==(t=n.memoizedState)&&null!==(t=t.dehydrated)&&function(t,e){var n=t.ownerDocument;if("$?"!==t.data||"complete"===n.readyState)e();else{var r=function(){e(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}(t,n=pl.bind(null,n));break;case 22:if(!(r=null!==n.memoizedState||bu)){e=null!==e&&null!==e.memoizedState||xu,i=bu;var a=xu;bu=r,(xu=e)&&!a?zu(t,n,!!(8772&n.subtreeFlags)):Iu(t,n),bu=i,xu=a}break;case 30:break;default:Iu(t,n)}}function Su(t){var e=t.alternate;null!==e&&(t.alternate=null,Su(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(e=t.stateNode)&&Bt(e),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Mu=null,Tu=!1;function Au(t,e,n){for(n=n.child;null!==n;)Pu(t,e,n),n=n.sibling}function Pu(t,e,n){if(ft&&"function"==typeof ft.onCommitFiberUnmount)try{ft.onCommitFiberUnmount(lt,n)}catch(t){}switch(n.tag){case 26:xu||fu(n,e),Au(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:xu||fu(n,e);var r=Mu,i=Tu;pf(n.type)&&(Mu=n.stateNode,Tu=!1),Au(t,e,n),kf(n.stateNode),Mu=r,Tu=i;break;case 5:xu||fu(n,e);case 6:if(r=Mu,i=Tu,Mu=null,Au(t,e,n),Tu=i,null!==(Mu=r))if(Tu)try{(9===Mu.nodeType?Mu.body:"HTML"===Mu.nodeName?Mu.ownerDocument.body:Mu).removeChild(n.stateNode)}catch(t){ll(n,e,t)}else try{Mu.removeChild(n.stateNode)}catch(t){ll(n,e,t)}break;case 18:null!==Mu&&(Tu?(vf(9===(t=Mu).nodeType?t.body:"HTML"===t.nodeName?t.ownerDocument.body:t,n.stateNode),Ad(t)):vf(Mu,n.stateNode));break;case 4:r=Mu,i=Tu,Mu=n.stateNode.containerInfo,Tu=!0,Au(t,e,n),Mu=r,Tu=i;break;case 0:case 11:case 14:case 15:xu||su(2,n,e),xu||su(4,n,e),Au(t,e,n);break;case 1:xu||(fu(n,e),"function"==typeof(r=n.stateNode).componentWillUnmount&&cu(n,e,r)),Au(t,e,n);break;case 21:Au(t,e,n);break;case 22:xu=(r=xu)||null!==n.memoizedState,Au(t,e,n),xu=r;break;default:Au(t,e,n)}}function Nu(t,e){if(null===e.memoizedState&&null!==(t=e.alternate)&&null!==(t=t.memoizedState)&&null!==(t=t.dehydrated))try{Ad(t)}catch(t){ll(e,e.return,t)}}function Cu(t,e){var n=function(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return null===e&&(e=t.stateNode=new ku),e;case 22:return null===(e=(t=t.stateNode)._retryCache)&&(e=t._retryCache=new ku),e;default:throw Error(o(435,t.tag))}}(t);e.forEach((function(e){var r=vl.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}function _u(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],a=t,s=e,u=s;t:for(;null!==u;){switch(u.tag){case 27:if(pf(u.type)){Mu=u.stateNode,Tu=!1;break t}break;case 5:Mu=u.stateNode,Tu=!1;break t;case 3:case 4:Mu=u.stateNode.containerInfo,Tu=!0;break t}u=u.return}if(null===Mu)throw Error(o(160));Pu(a,s,i),Mu=null,Tu=!1,null!==(a=i.alternate)&&(a.return=null),i.return=null}if(13878&e.subtreeFlags)for(e=e.child;null!==e;)Ru(e,t),e=e.sibling}var Lu=null;function Ru(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_u(e,t),ju(t),4&r&&(su(3,t,t.return),ou(3,t),su(5,t,t.return));break;case 1:_u(e,t),ju(t),512&r&&(xu||null===n||fu(n,n.return)),64&r&&bu&&null!==(t=t.updateQueue)&&null!==(r=t.callbacks)&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=null===n?r:n.concat(r));break;case 26:var i=Lu;if(_u(e,t),ju(t),512&r&&(xu||null===n||fu(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=t.memoizedState,null===n)if(null===r)if(null===t.stateNode){t:{r=t.type,n=t.memoizedProps,i=i.ownerDocument||i;e:switch(r){case"title":(!(a=i.getElementsByTagName("title")[0])||a[zt]||a[_t]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector("head > title"))),tf(a,r,n),a[_t]=t,Yt(a),r=a;break t;case"link":var s=Bf("link","href",i).get(r+(n.href||""));if(s)for(var u=0;u<s.length;u++)if((a=s[u]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(u,1);break e}tf(a=i.createElement(r),r,n),i.head.appendChild(a);break;case"meta":if(s=Bf("meta","content",i).get(r+(n.content||"")))for(u=0;u<s.length;u++)if((a=s[u]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(u,1);break e}tf(a=i.createElement(r),r,n),i.head.appendChild(a);break;default:throw Error(o(468,r))}a[_t]=t,Yt(a),r=a}t.stateNode=r}else Gf(i,t.type,t.stateNode);else t.stateNode=jf(i,r,t.memoizedProps);else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?Gf(i,t.type,t.stateNode):jf(i,r,t.memoizedProps)):null===r&&null!==t.stateNode&&hu(t,t.memoizedProps,n.memoizedProps)}break;case 27:_u(e,t),ju(t),512&r&&(xu||null===n||fu(n,n.return)),null!==n&&4&r&&hu(t,t.memoizedProps,n.memoizedProps);break;case 5:if(_u(e,t),ju(t),512&r&&(xu||null===n||fu(n,n.return)),32&t.flags){i=t.stateNode;try{ke(i,"")}catch(e){ll(t,t.return,e)}}4&r&&null!=t.stateNode&&hu(t,i=t.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(wu=!0);break;case 6:if(_u(e,t),ju(t),4&r){if(null===t.stateNode)throw Error(o(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(e){ll(t,t.return,e)}}break;case 3:if(zf=null,i=Lu,Lu=Sf(e.containerInfo),_u(e,t),Lu=i,ju(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ad(e.containerInfo)}catch(e){ll(t,t.return,e)}wu&&(wu=!1,Du(t));break;case 4:r=Lu,Lu=Sf(t.stateNode.containerInfo),_u(e,t),ju(t),Lu=r;break;case 12:default:_u(e,t),ju(t);break;case 13:_u(e,t),ju(t),8192&t.child.flags&&null!==t.memoizedState!=(null!==n&&null!==n.memoizedState)&&(wc=et()),4&r&&null!==(r=t.updateQueue)&&(t.updateQueue=null,Cu(t,r));break;case 22:i=null!==t.memoizedState;var c=null!==n&&null!==n.memoizedState,l=bu,f=xu;if(bu=l||i,xu=f||c,_u(e,t),xu=f,bu=l,ju(t),8192&r)t:for(e=t.stateNode,e._visibility=i?-2&e._visibility:1|e._visibility,i&&(null===n||c||bu||xu||Fu(t)),n=null,e=t;;){if(5===e.tag||26===e.tag){if(null===n){c=n=e;try{if(a=c.stateNode,i)"function"==typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{u=c.stateNode;var d=c.memoizedProps.style,h=null!=d&&d.hasOwnProperty("display")?d.display:null;u.style.display=null==h||"boolean"==typeof h?"":(""+h).trim()}}catch(t){ll(c,c.return,t)}}}else if(6===e.tag){if(null===n){c=e;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(t){ll(c,c.return,t)}}}else if((22!==e.tag&&23!==e.tag||null===e.memoizedState||e===t)&&null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;null===e.sibling;){if(null===e.return||e.return===t)break t;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}4&r&&null!==(r=t.updateQueue)&&null!==(n=r.retryQueue)&&(r.retryQueue=null,Cu(t,n));break;case 19:_u(e,t),ju(t),4&r&&null!==(r=t.updateQueue)&&(t.updateQueue=null,Cu(t,r));case 30:case 21:}}function ju(t){var e=t.flags;if(2&e){try{for(var n,r=t.return;null!==r;){if(pu(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;yu(t,vu(t),i);break;case 5:var a=n.stateNode;32&n.flags&&(ke(a,""),n.flags&=-33),yu(t,vu(t),a);break;case 3:case 4:var s=n.stateNode.containerInfo;gu(t,vu(t),s);break;default:throw Error(o(161))}}catch(e){ll(t,t.return,e)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function Du(t){if(1024&t.subtreeFlags)for(t=t.child;null!==t;){var e=t;Du(e),5===e.tag&&1024&e.flags&&e.stateNode.reset(),t=t.sibling}}function Iu(t,e){if(8772&e.subtreeFlags)for(e=e.child;null!==e;)Ou(t,e.alternate,e),e=e.sibling}function Fu(t){for(t=t.child;null!==t;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:su(4,e,e.return),Fu(e);break;case 1:fu(e,e.return);var n=e.stateNode;"function"==typeof n.componentWillUnmount&&cu(e,e.return,n),Fu(e);break;case 27:kf(e.stateNode);case 26:case 5:fu(e,e.return),Fu(e);break;case 22:null===e.memoizedState&&Fu(e);break;default:Fu(e)}t=t.sibling}}function zu(t,e,n){for(n=n&&!!(8772&e.subtreeFlags),e=e.child;null!==e;){var r=e.alternate,i=t,a=e,o=a.flags;switch(a.tag){case 0:case 11:case 15:zu(i,a,n),ou(4,a);break;case 1:if(zu(i,a,n),"function"==typeof(i=(r=a).stateNode).componentDidMount)try{i.componentDidMount()}catch(t){ll(r,r.return,t)}if(null!==(i=(r=a).updateQueue)){var s=r.stateNode;try{var u=i.shared.hiddenCallbacks;if(null!==u)for(i.shared.hiddenCallbacks=null,i=0;i<u.length;i++)fa(u[i],s)}catch(t){ll(r,r.return,t)}}n&&64&o&&uu(a),lu(a,a.return);break;case 27:mu(a);case 26:case 5:zu(i,a,n),n&&null===r&&4&o&&du(a),lu(a,a.return);break;case 12:zu(i,a,n);break;case 13:zu(i,a,n),n&&4&o&&Nu(i,a);break;case 22:null===a.memoizedState&&zu(i,a,n),lu(a,a.return);break;case 30:break;default:zu(i,a,n)}e=e.sibling}}function Bu(t,e){var n=null;null!==t&&null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),t=null,null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(t=e.memoizedState.cachePool.pool),t!==n&&(null!=t&&t.refCount++,null!=n&&Ri(n))}function Gu(t,e){t=null,null!==e.alternate&&(t=e.alternate.memoizedState.cache),(e=e.memoizedState.cache)!==t&&(e.refCount++,null!=t&&Ri(t))}function Wu(t,e,n,r){if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Vu(t,e,n,r),e=e.sibling}function Vu(t,e,n,r){var i=e.flags;switch(e.tag){case 0:case 11:case 15:Wu(t,e,n,r),2048&i&&ou(9,e);break;case 1:case 13:default:Wu(t,e,n,r);break;case 3:Wu(t,e,n,r),2048&i&&(t=null,null!==e.alternate&&(t=e.alternate.memoizedState.cache),(e=e.memoizedState.cache)!==t&&(e.refCount++,null!=t&&Ri(t)));break;case 12:if(2048&i){Wu(t,e,n,r),t=e.stateNode;try{var a=e.memoizedProps,o=a.id,s=a.onPostCommit;"function"==typeof s&&s(o,null===e.alternate?"mount":"update",t.passiveEffectDuration,-0)}catch(t){ll(e,e.return,t)}}else Wu(t,e,n,r);break;case 23:break;case 22:a=e.stateNode,o=e.alternate,null!==e.memoizedState?2&a._visibility?Wu(t,e,n,r):Yu(t,e):2&a._visibility?Wu(t,e,n,r):(a._visibility|=2,Hu(t,e,n,r,!!(10256&e.subtreeFlags))),2048&i&&Bu(o,e);break;case 24:Wu(t,e,n,r),2048&i&&Gu(e.alternate,e)}}function Hu(t,e,n,r,i){for(i=i&&!!(10256&e.subtreeFlags),e=e.child;null!==e;){var a=t,o=e,s=n,u=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:Hu(a,o,s,u,i),ou(8,o);break;case 23:break;case 22:var l=o.stateNode;null!==o.memoizedState?2&l._visibility?Hu(a,o,s,u,i):Yu(a,o):(l._visibility|=2,Hu(a,o,s,u,i)),i&&2048&c&&Bu(o.alternate,o);break;case 24:Hu(a,o,s,u,i),i&&2048&c&&Gu(o.alternate,o);break;default:Hu(a,o,s,u,i)}e=e.sibling}}function Yu(t,e){if(10256&e.subtreeFlags)for(e=e.child;null!==e;){var n=t,r=e,i=r.flags;switch(r.tag){case 22:Yu(n,r),2048&i&&Bu(r.alternate,r);break;case 24:Yu(n,r),2048&i&&Gu(r.alternate,r);break;default:Yu(n,r)}e=e.sibling}}var Uu=8192;function qu(t){if(t.subtreeFlags&Uu)for(t=t.child;null!==t;)Xu(t),t=t.sibling}function Xu(t){switch(t.tag){case 26:qu(t),t.flags&Uu&&null!==t.memoizedState&&function(t,e,n){if(null===Vf)throw Error(o(475));var r=Vf;if(!("stylesheet"!==e.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&e.state.loading)){if(null===e.instance){var i=Nf(n.href),a=t.querySelector(Cf(i));if(a)return null!==(t=a._p)&&"object"==typeof t&&"function"==typeof t.then&&(r.count++,r=Yf.bind(r),t.then(r,r)),e.state.loading|=4,e.instance=a,void Yt(a);a=t.ownerDocument||t,n=_f(n),(i=Ef.get(i))&&If(n,i),Yt(a=a.createElement("link"));var s=a;s._p=new Promise((function(t,e){s.onload=t,s.onerror=e})),tf(a,"link",n),e.instance=a}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(e,t),(t=e.state.preload)&&!(3&e.state.loading)&&(r.count++,e=Yf.bind(r),t.addEventListener("load",e),t.addEventListener("error",e))}}(Lu,t.memoizedState,t.memoizedProps);break;case 5:default:qu(t);break;case 3:case 4:var e=Lu;Lu=Sf(t.stateNode.containerInfo),qu(t),Lu=e;break;case 22:null===t.memoizedState&&(null!==(e=t.alternate)&&null!==e.memoizedState?(e=Uu,Uu=16777216,qu(t),Uu=e):qu(t))}}function Ku(t){var e=t.alternate;if(null!==e&&null!==(t=e.child)){e.child=null;do{e=t.sibling,t.sibling=null,t=e}while(null!==t)}}function $u(t){var e=t.deletions;if(16&t.flags){if(null!==e)for(var n=0;n<e.length;n++){var r=e[n];Eu=r,Ju(r,t)}Ku(t)}if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Zu(t),t=t.sibling}function Zu(t){switch(t.tag){case 0:case 11:case 15:$u(t),2048&t.flags&&su(9,t,t.return);break;case 3:case 12:default:$u(t);break;case 22:var e=t.stateNode;null!==t.memoizedState&&2&e._visibility&&(null===t.return||13!==t.return.tag)?(e._visibility&=-3,Qu(t)):$u(t)}}function Qu(t){var e=t.deletions;if(16&t.flags){if(null!==e)for(var n=0;n<e.length;n++){var r=e[n];Eu=r,Ju(r,t)}Ku(t)}for(t=t.child;null!==t;){switch((e=t).tag){case 0:case 11:case 15:su(8,e,e.return),Qu(e);break;case 22:2&(n=e.stateNode)._visibility&&(n._visibility&=-3,Qu(e));break;default:Qu(e)}t=t.sibling}}function Ju(t,e){for(;null!==Eu;){var n=Eu;switch(n.tag){case 0:case 11:case 15:su(8,n,e);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ri(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Eu=r;else t:for(n=t;null!==Eu;){var i=(r=Eu).sibling,a=r.return;if(Su(r),r===n){Eu=null;break t}if(null!==i){i.return=a,Eu=i;break t}Eu=a}}}var tc={getCacheForType:function(t){var e=Mi(_i),n=e.data.get(t);return void 0===n&&(n=t(),e.data.set(t,n)),n}},ec="function"==typeof WeakMap?WeakMap:Map,nc=0,rc=null,ic=null,ac=0,oc=0,sc=null,uc=!1,cc=!1,lc=!1,fc=0,dc=0,hc=0,pc=0,vc=0,gc=0,yc=0,mc=null,bc=null,xc=!1,wc=0,kc=1/0,Ec=null,Oc=null,Sc=0,Mc=null,Tc=null,Ac=0,Pc=0,Nc=null,Cc=null,_c=0,Lc=null;function Rc(){return 2&nc&&0!==ac?ac&-ac:null!==R.T?0!==Ii?Ii:Pl():Nt()}function jc(){0===gc&&(gc=536870912&ac&&!ai?536870912:kt());var t=is.current;return null!==t&&(t.flags|=32),gc}function Dc(t,e,n){(t!==rc||2!==oc&&9!==oc)&&null===t.cancelPendingCommit||(Vc(t,0),Bc(t,ac,gc,!1)),St(t,n),2&nc&&t===rc||(t===rc&&(!(2&nc)&&(pc|=n),4===dc&&Bc(t,ac,gc,!1)),kl(t))}function Ic(t,e,n){if(6&nc)throw Error(o(327));for(var r=!n&&!(124&e)&&0===(e&t.expiredLanes)||xt(t,e),i=r?function(t,e){var n=nc;nc|=2;var r=Yc(),i=Uc();rc!==t||ac!==e?(Ec=null,kc=et()+500,Vc(t,e)):cc=xt(t,e);t:for(;;)try{if(0!==oc&&null!==ic){e=ic;var a=sc;e:switch(oc){case 1:oc=0,sc=null,Jc(t,e,a,1);break;case 2:case 9:if(Ki(a)){oc=0,sc=null,Qc(e);break}e=function(){2!==oc&&9!==oc||rc!==t||(oc=7),kl(t)},a.then(e,e);break t;case 3:oc=7;break t;case 4:oc=5;break t;case 7:Ki(a)?(oc=0,sc=null,Qc(e)):(oc=0,sc=null,Jc(t,e,a,7));break;case 5:var s=null;switch(ic.tag){case 26:s=ic.memoizedState;case 5:case 27:var u=ic;if(!s||Wf(s)){oc=0,sc=null;var c=u.sibling;if(null!==c)ic=c;else{var l=u.return;null!==l?(ic=l,tl(l)):ic=null}break e}}oc=0,sc=null,Jc(t,e,a,5);break;case 6:oc=0,sc=null,Jc(t,e,a,6);break;case 8:Wc(),dc=6;break t;default:throw Error(o(462))}}$c();break}catch(e){Hc(t,e)}return mi=yi=null,R.H=r,R.A=i,nc=n,null!==ic?0:(rc=null,ac=0,Ar(),dc)}(t,e):Xc(t,e,!0),a=r;;){if(0===i){cc&&!r&&Bc(t,e,0,!1);break}if(n=t.current.alternate,!a||zc(n)){if(2===i){if(a=e,t.errorRecoveryDisabledLanes&a)var s=0;else s=0!=(s=-536870913&t.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){e=s;t:{var u=t;i=mc;var c=u.current.memoizedState.isDehydrated;if(c&&(Vc(u,s).flags|=256),2!==(s=Xc(u,s,!1))){if(lc&&!c){u.errorRecoveryDisabledLanes|=a,pc|=a,i=4;break t}a=bc,bc=i,null!==a&&(null===bc?bc=a:bc.push.apply(bc,a))}i=s}if(a=!1,2!==i)continue}}if(1===i){Vc(t,0),Bc(t,e,0,!0);break}t:{switch(r=t,a=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&e)!==e)break;case 6:Bc(r,e,gc,!uc);break t;case 2:bc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&e)===e&&10<(i=wc+300-et())){if(Bc(r,e,gc,!uc),0!==bt(r,0,!0))break t;r.timeoutHandle=cf(Fc.bind(null,r,n,bc,Ec,xc,e,gc,pc,yc,uc,a,2,-0,0),i)}else Fc(r,n,bc,Ec,xc,e,gc,pc,yc,uc,a,0,-0,0)}break}i=Xc(t,e,!1),a=!1}kl(t)}function Fc(t,e,n,r,i,a,s,u,c,l,f,d,h,p){if(t.timeoutHandle=-1,(8192&(d=e.subtreeFlags)||!(16785408&~d))&&(Vf={stylesheets:null,count:0,unsuspend:Hf},Xu(e),null!==(d=function(){if(null===Vf)throw Error(o(475));var t=Vf;return t.stylesheets&&0===t.count&&qf(t,t.stylesheets),0<t.count?function(e){var n=setTimeout((function(){if(t.stylesheets&&qf(t,t.stylesheets),t.unsuspend){var e=t.unsuspend;t.unsuspend=null,e()}}),6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}())))return t.cancelPendingCommit=d(nl.bind(null,t,e,a,n,r,i,s,u,c,f,1,h,p)),void Bc(t,a,s,!l);nl(t,e,a,n,r,i,s,u,c)}function zc(t){for(var e=t;;){var n=e.tag;if((0===n||11===n||15===n)&&16384&e.flags&&null!==(n=e.updateQueue)&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Kn(a(),i))return!1}catch(t){return!1}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bc(t,e,n,r){e&=~vc,e&=~pc,t.suspendedLanes|=e,t.pingedLanes&=~e,r&&(t.warmLanes|=e),r=t.expirationTimes;for(var i=e;0<i;){var a=31-ht(i),o=1<<a;r[a]=-1,i&=~o}0!==n&&Mt(t,n,e)}function Gc(){return!!(6&nc)||(El(0,!1),!1)}function Wc(){if(null!==ic){if(0===oc)var t=ic.return;else mi=yi=null,Ia(t=ic),Ko=null,$o=0,t=ic;for(;null!==t;)au(t.alternate,t),t=t.return;ic=null}}function Vc(t,e){var n=t.timeoutHandle;-1!==n&&(t.timeoutHandle=-1,lf(n)),null!==(n=t.cancelPendingCommit)&&(t.cancelPendingCommit=null,n()),Wc(),rc=t,ic=n=Fr(t.current,null),ac=e,oc=0,sc=null,uc=!1,cc=xt(t,e),lc=!1,yc=gc=vc=pc=hc=dc=0,bc=mc=null,xc=!1,8&e&&(e|=32&e);var r=t.entangledLanes;if(0!==r)for(t=t.entanglements,r&=e;0<r;){var i=31-ht(r),a=1<<i;e|=t[i],r&=~a}return fc=e,Ar(),n}function Hc(t,e){ba=null,R.H=Yo,e===Yi||e===qi?(e=Ji(),oc=3):e===Ui?(e=Ji(),oc=4):oc=e===Ms?8:null!==e&&"object"==typeof e&&"function"==typeof e.then?6:1,sc=e,null===ic&&(dc=1,ws(t,Or(e,t.current)))}function Yc(){var t=R.H;return R.H=Yo,null===t?Yo:t}function Uc(){var t=R.A;return R.A=tc,t}function qc(){dc=4,uc||(4194048&ac)!==ac&&null!==is.current||(cc=!0),!(134217727&hc)&&!(134217727&pc)||null===rc||Bc(rc,ac,gc,!1)}function Xc(t,e,n){var r=nc;nc|=2;var i=Yc(),a=Uc();rc===t&&ac===e||(Ec=null,Vc(t,e)),e=!1;var o=dc;t:for(;;)try{if(0!==oc&&null!==ic){var s=ic,u=sc;switch(oc){case 8:Wc(),o=6;break t;case 3:case 2:case 9:case 6:null===is.current&&(e=!0);var c=oc;if(oc=0,sc=null,Jc(t,s,u,c),n&&cc){o=0;break t}break;default:c=oc,oc=0,sc=null,Jc(t,s,u,c)}}Kc(),o=dc;break}catch(e){Hc(t,e)}return e&&t.shellSuspendCounter++,mi=yi=null,nc=r,R.H=i,R.A=a,null===ic&&(rc=null,ac=0,Ar()),o}function Kc(){for(;null!==ic;)Zc(ic)}function $c(){for(;null!==ic&&!J();)Zc(ic)}function Zc(t){var e=Zs(t.alternate,t,fc);t.memoizedProps=t.pendingProps,null===e?tl(t):ic=e}function Qc(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Ds(n,e,e.pendingProps,e.type,void 0,ac);break;case 11:e=Ds(n,e,e.pendingProps,e.type.render,e.ref,ac);break;case 5:Ia(e);default:au(n,e),e=Zs(n,e=ic=zr(e,fc),fc)}t.memoizedProps=t.pendingProps,null===e?tl(t):ic=e}function Jc(t,e,n,r){mi=yi=null,Ia(e),Ko=null,$o=0;var i=e.return;try{if(function(t,e,n,r,i){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(e=n.alternate)&&Ei(e,n,i,!0),null!==(n=is.current)){switch(n.tag){case 13:return null===as?qc():null===n.alternate&&0===dc&&(dc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Xi?n.flags|=16384:(null===(e=n.updateQueue)?n.updateQueue=new Set([r]):e.add(r),fl(t,r,i)),!1;case 22:return n.flags|=65536,r===Xi?n.flags|=16384:(null===(e=n.updateQueue)?(e={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=e):null===(n=e.retryQueue)?e.retryQueue=new Set([r]):n.add(r),fl(t,r,i)),!1}throw Error(o(435,n.tag))}return fl(t,r,i),qc(),!1}if(ai)return null!==(e=is.current)?(!(65536&e.flags)&&(e.flags|=256),e.flags|=65536,e.lanes=i,r!==ui&&vi(Or(t=Error(o(422),{cause:r}),n))):(r!==ui&&vi(Or(e=Error(o(423),{cause:r}),n)),(t=t.current.alternate).flags|=65536,i&=-i,t.lanes|=i,r=Or(r,n),sa(t,i=Es(t.stateNode,r,i)),4!==dc&&(dc=2)),!1;var a=Error(o(520),{cause:r});if(a=Or(a,n),null===mc?mc=[a]:mc.push(a),4!==dc&&(dc=2),null===e)return!0;r=Or(r,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,sa(n,t=Es(n.stateNode,r,t)),!1;case 1:if(e=n.type,a=n.stateNode,!(128&n.flags||"function"!=typeof e.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==Oc&&Oc.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,Ss(i=Os(i),t,n,r),sa(n,i),!1}n=n.return}while(null!==n);return!1}(t,i,e,n,ac))return dc=1,ws(t,Or(n,t.current)),void(ic=null)}catch(e){if(null!==i)throw ic=i,e;return dc=1,ws(t,Or(n,t.current)),void(ic=null)}32768&e.flags?(ai||1===r?t=!0:cc||536870912&ac?t=!1:(uc=t=!0,(2===r||9===r||3===r||6===r)&&null!==(r=is.current)&&13===r.tag&&(r.flags|=16384)),el(e,t)):tl(e)}function tl(t){var e=t;do{if(32768&e.flags)return void el(e,uc);t=e.return;var n=ru(e.alternate,e,fc);if(null!==n)return void(ic=n);if(null!==(e=e.sibling))return void(ic=e);ic=e=t}while(null!==e);0===dc&&(dc=5)}function el(t,e){do{var n=iu(t.alternate,t);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=t.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&null!==(t=t.sibling))return void(ic=t);ic=t=n}while(null!==t);dc=6,ic=null}function nl(t,e,n,r,i,a,s,u,c){t.cancelPendingCommit=null;do{sl()}while(0!==Sc);if(6&nc)throw Error(o(327));if(null!==e){if(e===t.current)throw Error(o(177));if(a=e.lanes|e.childLanes,function(t,e,n,r,i,a){var o=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var s=t.entanglements,u=t.expirationTimes,c=t.hiddenUpdates;for(n=o&~n;0<n;){var l=31-ht(n),f=1<<l;s[l]=0,u[l]=-1;var d=c[l];if(null!==d)for(c[l]=null,l=0;l<d.length;l++){var h=d[l];null!==h&&(h.lane&=-536870913)}n&=~f}0!==r&&Mt(t,r,0),0!==a&&0===i&&0!==t.tag&&(t.suspendedLanes|=a&~(o&~e))}(t,n,a|=Tr,s,u,c),t===rc&&(ic=rc=null,ac=0),Tc=e,Mc=t,Ac=n,Pc=a,Nc=i,Cc=r,10256&e.subtreeFlags||10256&e.flags?(t.callbackNode=null,t.callbackPriority=0,Z(at,(function(){return ul(),null}))):(t.callbackNode=null,t.callbackPriority=0),r=!!(13878&e.flags),13878&e.subtreeFlags||r){r=R.T,R.T=null,i=j.p,j.p=2,s=nc,nc|=4;try{!function(t,e){if(t=t.containerInfo,ef=rd,er(t=tr(t))){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(t){n=null;break t}var s=0,u=-1,c=-1,l=0,f=0,d=t,h=null;e:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(u=s+i),d!==a||0!==r&&3!==d.nodeType||(c=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===t)break e;if(h===n&&++l===i&&(u=s),h===a&&++f===r&&(c=s),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nf={focusedElem:t,selectionRange:n},rd=!1,Eu=e;null!==Eu;)if(t=(e=Eu).child,1024&e.subtreeFlags&&null!==t)t.return=e,Eu=t;else for(;null!==Eu;){switch(a=(e=Eu).alternate,t=e.flags,e.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&t&&null!==a){t=void 0,n=e,i=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var v=gs(n.type,i,(n.elementType,n.type));t=r.getSnapshotBeforeUpdate(v,a),r.__reactInternalSnapshotBeforeUpdate=t}catch(t){ll(n,n.return,t)}}break;case 3:if(1024&t)if(9===(n=(t=e.stateNode.containerInfo).nodeType))gf(t);else if(1===n)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":gf(t);break;default:t.textContent=""}break;default:if(1024&t)throw Error(o(163))}if(null!==(t=e.sibling)){t.return=e.return,Eu=t;break}Eu=e.return}}(t,e)}finally{nc=s,j.p=i,R.T=r}}Sc=1,rl(),il(),al()}}function rl(){if(1===Sc){Sc=0;var t=Mc,e=Tc,n=!!(13878&e.flags);if(13878&e.subtreeFlags||n){n=R.T,R.T=null;var r=j.p;j.p=2;var i=nc;nc|=4;try{Ru(e,t);var a=nf,o=tr(t.containerInfo),s=a.focusedElem,u=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Jn(s.ownerDocument.documentElement,s)){if(null!==u&&er(s)){var c=u.start,l=u.end;if(void 0===l&&(l=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(l,s.value.length);else{var f=s.ownerDocument||document,d=f&&f.defaultView||window;if(d.getSelection){var h=d.getSelection(),p=s.textContent.length,v=Math.min(u.start,p),g=void 0===u.end?v:Math.min(u.end,p);!h.extend&&v>g&&(o=g,g=v,v=o);var y=Qn(s,v),m=Qn(s,g);if(y&&m&&(1!==h.rangeCount||h.anchorNode!==y.node||h.anchorOffset!==y.offset||h.focusNode!==m.node||h.focusOffset!==m.offset)){var b=f.createRange();b.setStart(y.node,y.offset),h.removeAllRanges(),v>g?(h.addRange(b),h.extend(m.node,m.offset)):(b.setEnd(m.node,m.offset),h.addRange(b))}}}}for(f=[],h=s;h=h.parentNode;)1===h.nodeType&&f.push({element:h,left:h.scrollLeft,top:h.scrollTop});for("function"==typeof s.focus&&s.focus(),s=0;s<f.length;s++){var x=f[s];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}rd=!!ef,nf=ef=null}finally{nc=i,j.p=r,R.T=n}}t.current=e,Sc=2}}function il(){if(2===Sc){Sc=0;var t=Mc,e=Tc,n=!!(8772&e.flags);if(8772&e.subtreeFlags||n){n=R.T,R.T=null;var r=j.p;j.p=2;var i=nc;nc|=4;try{Ou(t,e.alternate,e)}finally{nc=i,j.p=r,R.T=n}}Sc=3}}function al(){if(4===Sc||3===Sc){Sc=0,tt();var t=Mc,e=Tc,n=Ac,r=Cc;10256&e.subtreeFlags||10256&e.flags?Sc=5:(Sc=0,Tc=Mc=null,ol(t,t.pendingLanes));var i=t.pendingLanes;if(0===i&&(Oc=null),Pt(n),e=e.stateNode,ft&&"function"==typeof ft.onCommitFiberRoot)try{ft.onCommitFiberRoot(lt,e,void 0,!(128&~e.current.flags))}catch(t){}if(null!==r){e=R.T,i=j.p,j.p=2,R.T=null;try{for(var a=t.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{R.T=e,j.p=i}}3&Ac&&sl(),kl(t),i=t.pendingLanes,4194090&n&&42&i?t===Lc?_c++:(_c=0,Lc=t):_c=0,El(0,!1)}}function ol(t,e){0===(t.pooledCacheLanes&=e)&&null!=(e=t.pooledCache)&&(t.pooledCache=null,Ri(e))}function sl(t){return rl(),il(),al(),ul()}function ul(){if(5!==Sc)return!1;var t=Mc,e=Pc;Pc=0;var n=Pt(Ac),r=R.T,i=j.p;try{j.p=32>n?32:n,R.T=null,n=Nc,Nc=null;var a=Mc,s=Ac;if(Sc=0,Tc=Mc=null,Ac=0,6&nc)throw Error(o(331));var u=nc;if(nc|=4,Zu(a.current),Vu(a,a.current,s,n),nc=u,El(0,!1),ft&&"function"==typeof ft.onPostCommitFiberRoot)try{ft.onPostCommitFiberRoot(lt,a)}catch(t){}return!0}finally{j.p=i,R.T=r,ol(t,e)}}function cl(t,e,n){e=Or(n,e),null!==(t=aa(t,e=Es(t.stateNode,e,2),2))&&(St(t,2),kl(t))}function ll(t,e,n){if(3===t.tag)cl(t,t,n);else for(;null!==e;){if(3===e.tag){cl(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"==typeof e.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Oc||!Oc.has(r))){t=Or(n,t),null!==(r=aa(e,n=Os(2),2))&&(Ss(n,r,e,t),St(r,2),kl(r));break}}e=e.return}}function fl(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new ec;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(lc=!0,i.add(n),t=dl.bind(null,t,e,n),e.then(t,t))}function dl(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,rc===t&&(ac&n)===n&&(4===dc||3===dc&&(62914560&ac)===ac&&300>et()-wc?!(2&nc)&&Vc(t,0):vc|=n,yc===ac&&(yc=0)),kl(t)}function hl(t,e){0===e&&(e=Et()),null!==(t=Cr(t,e))&&(St(t,e),kl(t))}function pl(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),hl(t,n)}function vl(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(e),hl(t,n)}var gl=null,yl=null,ml=!1,bl=!1,xl=!1,wl=0;function kl(t){t!==yl&&null===t.next&&(null===yl?gl=yl=t:yl=yl.next=t),bl=!0,ml||(ml=!0,df((function(){6&nc?Z(rt,Ol):Sl()})))}function El(t,e){if(!xl&&bl){xl=!0;do{for(var n=!1,r=gl;null!==r;){if(!e)if(0!==t){var i=r.pendingLanes;if(0===i)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-ht(42|t)+1)-1,a=201326741&(a&=i&~(o&~s))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Al(r,a))}else a=ac,!(3&(a=bt(r,r===rc?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||xt(r,a)||(n=!0,Al(r,a));r=r.next}}while(n);xl=!1}}function Ol(){Sl()}function Sl(){bl=ml=!1;var t,e=0;0!==wl&&(((t=window.event)&&"popstate"===t.type?t!==uf&&(uf=t,!0):(uf=null,!1))&&(e=wl),wl=0);for(var n=et(),r=null,i=gl;null!==i;){var a=i.next,o=Ml(i,n);0===o?(i.next=null,null===r?gl=a:r.next=a,null===a&&(yl=r)):(r=i,(0!==e||3&o)&&(bl=!0)),i=a}El(e,!1)}function Ml(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=-62914561&t.pendingLanes;0<a;){var o=31-ht(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=wt(s,e)):u<=e&&(t.expiredLanes|=s),a&=~s}if(n=ac,n=bt(t,t===(e=rc)?n:0,null!==t.cancelPendingCommit||-1!==t.timeoutHandle),r=t.callbackNode,0===n||t===e&&(2===oc||9===oc)||null!==t.cancelPendingCommit)return null!==r&&null!==r&&Q(r),t.callbackNode=null,t.callbackPriority=0;if(!(3&n)||xt(t,n)){if((e=n&-n)===t.callbackPriority)return e;switch(null!==r&&Q(r),Pt(n)){case 2:case 8:n=it;break;case 32:default:n=at;break;case 268435456:n=st}return r=Tl.bind(null,t),n=Z(n,r),t.callbackPriority=e,t.callbackNode=n,e}return null!==r&&null!==r&&Q(r),t.callbackPriority=2,t.callbackNode=null,2}function Tl(t,e){if(0!==Sc&&5!==Sc)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(sl()&&t.callbackNode!==n)return null;var r=ac;return 0===(r=bt(t,t===rc?r:0,null!==t.cancelPendingCommit||-1!==t.timeoutHandle))?null:(Ic(t,r,e),Ml(t,et()),null!=t.callbackNode&&t.callbackNode===n?Tl.bind(null,t):null)}function Al(t,e){if(sl())return null;Ic(t,e,!0)}function Pl(){return 0===wl&&(wl=kt()),wl}function Nl(t){return null==t||"symbol"==typeof t||"boolean"==typeof t?null:"function"==typeof t?t:Pe(""+t)}function Cl(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}for(var _l=0;_l<wr.length;_l++){var Ll=wr[_l];kr(Ll.toLowerCase(),"on"+(Ll[0].toUpperCase()+Ll.slice(1)))}kr(hr,"onAnimationEnd"),kr(pr,"onAnimationIteration"),kr(vr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(gr,"onTransitionRun"),kr(yr,"onTransitionStart"),kr(mr,"onTransitionCancel"),kr(br,"onTransitionEnd"),Kt("onMouseEnter",["mouseout","mouseover"]),Kt("onMouseLeave",["mouseout","mouseover"]),Kt("onPointerEnter",["pointerout","pointerover"]),Kt("onPointerLeave",["pointerout","pointerover"]),Xt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jl=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rl));function Dl(t,e){e=!!(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break t;a=s,i.currentTarget=c;try{a(i)}catch(t){ys(t)}i.currentTarget=null,a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break t;a=s,i.currentTarget=c;try{a(i)}catch(t){ys(t)}i.currentTarget=null,a=u}}}}function Il(t,e){var n=e[jt];void 0===n&&(n=e[jt]=new Set);var r=t+"__bubble";n.has(r)||(Gl(e,t,2,!1),n.add(r))}function Fl(t,e,n){var r=0;e&&(r|=4),Gl(n,t,r,e)}var zl="_reactListening"+Math.random().toString(36).slice(2);function Bl(t){if(!t[zl]){t[zl]=!0,Ut.forEach((function(e){"selectionchange"!==e&&(jl.has(e)||Fl(e,!1,t),Fl(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[zl]||(e[zl]=!0,Fl("selectionchange",!1,e))}}function Gl(t,e,n,r){switch(ld(e)){case 2:var i=id;break;case 8:i=ad;break;default:i=od}n=i.bind(null,e,n,t),i=void 0,!ze||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wl(t,e,n,r,i){var a=r;if(!(1&e||2&e||null===r))t:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==s;){if(null===(o=Gt(s)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=a=o;continue t}s=s.parentNode}}r=r.return}De((function(){var r=a,i=Ce(n),o=[];t:{var s=xr.get(t);if(void 0!==s){var c=Je,l=t;switch(t){case"keypress":if(0===Ye(n))break t;case"keydown":case"keyup":c=vn;break;case"focusin":l="focus",c=on;break;case"focusout":l="blur",c=on;break;case"beforeblur":case"afterblur":c=on;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case hr:case pr:case vr:c=sn;break;case br:c=mn;break;case"scroll":case"scrollend":c=en;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=un;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=xn}var f=!!(4&e),d=!f&&("scroll"===t||"scrollend"===t),h=f?null!==s?s+"Capture":null:s;f=[];for(var p,v=r;null!==v;){var g=v;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===h||null!=(g=Ie(v,h))&&f.push(Vl(v,g,p)),d)break;v=v.return}0<f.length&&(s=new c(s,l,null,n,i),o.push({event:s,listeners:f}))}}if(!(7&e)){if(c="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||n===Ne||!(l=n.relatedTarget||n.fromElement)||!Gt(l)&&!l[Rt])&&(c||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?Gt(l):null)&&(d=u(l),f=l.tag,l!==d||5!==f&&27!==f&&6!==f)&&(l=null)):(c=null,l=r),c!==l)){if(f=rn,g="onMouseLeave",h="onMouseEnter",v="mouse","pointerout"!==t&&"pointerover"!==t||(f=gn,g="onPointerLeave",h="onPointerEnter",v="pointer"),d=null==c?s:Vt(c),p=null==l?s:Vt(l),(s=new f(g,v+"leave",c,n,i)).target=d,s.relatedTarget=p,g=null,Gt(i)===r&&((f=new f(h,v+"enter",l,n,i)).target=p,f.relatedTarget=d,g=f),d=g,c&&l)t:{for(h=l,v=0,p=f=c;p;p=Yl(p))v++;for(p=0,g=h;g;g=Yl(g))p++;for(;0<v-p;)f=Yl(f),v--;for(;0<p-v;)h=Yl(h),p--;for(;v--;){if(f===h||null!==h&&f===h.alternate)break t;f=Yl(f),h=Yl(h)}f=null}else f=null;null!==c&&Ul(o,s,c,f,!1),null!==l&&null!==d&&Ul(o,d,l,f,!0)}if("select"===(c=(s=r?Vt(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var y=Fn;else if(_n(s))if(zn)y=Xn;else{y=Un;var m=Yn}else!(c=s.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Me(r.elementType)&&(y=Fn):y=qn;switch(y&&(y=y(t,r))?Ln(o,y,n,i):(m&&m(t,s,r),"focusout"===t&&r&&"number"===s.type&&null!=r.memoizedProps.value&&me(s,"number",s.value)),m=r?Vt(r):window,t){case"focusin":(_n(m)||"true"===m.contentEditable)&&(rr=m,ir=r,ar=null);break;case"focusout":ar=ir=rr=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,sr(o,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":sr(o,n,i)}var b;if(kn)t:{switch(t){case"compositionstart":var x="onCompositionStart";break t;case"compositionend":x="onCompositionEnd";break t;case"compositionupdate":x="onCompositionUpdate";break t}x=void 0}else Nn?An(t,n)&&(x="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(x="onCompositionStart");x&&(Sn&&"ko"!==n.locale&&(Nn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Nn&&(b=He()):(We="value"in(Ge=i)?Ge.value:Ge.textContent,Nn=!0)),0<(m=Hl(r,x)).length&&(x=new cn(x,t,null,n,i),o.push({event:x,listeners:m}),(b||null!==(b=Pn(n)))&&(x.data=b))),(b=On?function(t,e){switch(t){case"compositionend":return Pn(e);case"keypress":return 32!==e.which?null:(Tn=!0,Mn);case"textInput":return(t=e.data)===Mn&&Tn?null:t;default:return null}}(t,n):function(t,e){if(Nn)return"compositionend"===t||!kn&&An(t,e)?(t=He(),Ve=We=Ge=null,Nn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Sn&&"ko"!==e.locale?null:e.data}}(t,n))&&0<(x=Hl(r,"onBeforeInput")).length&&(m=new cn("onBeforeInput","beforeinput",null,n,i),o.push({event:m,listeners:x}),m.data=b),function(t,e,n,r,i){if("submit"===e&&n&&n.stateNode===i){var a=Nl((i[Lt]||null).action),o=r.submitter;o&&null!==(e=(e=o[Lt]||null)?Nl(e.formAction):o.getAttribute("formAction"))&&(a=e,o=null);var s=new Je("action","action",null,r,i);t.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==wl){var t=o?Cl(i,o):new FormData(i);Co(n,{pending:!0,data:t,method:i.method,action:a},null,t)}}else"function"==typeof a&&(s.preventDefault(),t=o?Cl(i,o):new FormData(i),Co(n,{pending:!0,data:t,method:i.method,action:a},a,t))},currentTarget:i}]})}}(o,t,r,n,i)}Dl(o,e)}))}function Vl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hl(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,a=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===a||(null!=(i=Ie(t,n))&&r.unshift(Vl(t,i,a)),null!=(i=Ie(t,e))&&r.push(Vl(t,i,a))),3===t.tag)return r;t=t.return}return[]}function Yl(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag&&27!==t.tag);return t||null}function Ul(t,e,n,r,i){for(var a=e._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(s=s.tag,null!==u&&u===r)break;5!==s&&26!==s&&27!==s||null===c||(u=c,i?null!=(c=Ie(n,a))&&o.unshift(Vl(n,c,u)):i||null!=(c=Ie(n,a))&&o.push(Vl(n,c,u))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}var ql=/\r\n?/g,Xl=/\u0000|\uFFFD/g;function Kl(t){return("string"==typeof t?t:""+t).replace(ql,"\n").replace(Xl,"")}function $l(t,e){return e=Kl(e),Kl(t)===e}function Zl(){}function Ql(t,e,n,r,i,a){switch(n){case"children":"string"==typeof r?"body"===e||"textarea"===e&&""===r||ke(t,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==e&&ke(t,""+r);break;case"className":ne(t,"class",r);break;case"tabIndex":ne(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ne(t,n,r);break;case"style":Se(t,r,a);break;case"data":if("object"!==e){ne(t,"data",r);break}case"src":case"href":if(""===r&&("a"!==e||"href"!==n)){t.removeAttribute(n);break}if(null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){t.removeAttribute(n);break}r=Pe(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===n?("input"!==e&&Ql(t,e,"name",i.name,i,null),Ql(t,e,"formEncType",i.formEncType,i,null),Ql(t,e,"formMethod",i.formMethod,i,null),Ql(t,e,"formTarget",i.formTarget,i,null)):(Ql(t,e,"encType",i.encType,i,null),Ql(t,e,"method",i.method,i,null),Ql(t,e,"target",i.target,i,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){t.removeAttribute(n);break}r=Pe(""+r),t.setAttribute(n,r);break;case"onClick":null!=r&&(t.onclick=Zl);break;case"onScroll":null!=r&&Il("scroll",t);break;case"onScrollEnd":null!=r&&Il("scrollend",t);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":t.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){t.removeAttribute("xlink:href");break}n=Pe(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":!0===r?t.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":Il("beforetoggle",t),Il("toggle",t),ee(t,"popover",r);break;case"xlinkActuate":re(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":re(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":re(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":re(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":re(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":re(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":re(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":re(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":re(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":ee(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&ee(t,n=Te.get(n)||n,r)}}function Jl(t,e,n,r,i,a){switch(n){case"style":Se(t,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));t.innerHTML=n}}break;case"children":"string"==typeof r?ke(t,r):("number"==typeof r||"bigint"==typeof r)&&ke(t,""+r);break;case"onScroll":null!=r&&Il("scroll",t);break;case"onScrollEnd":null!=r&&Il("scrollend",t);break;case"onClick":null!=r&&(t.onclick=Zl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:qt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),"function"==typeof(a=null!=(a=t[Lt]||null)?a[n]:null)&&t.removeEventListener(e,a,i),"function"!=typeof r)?n in t?t[n]=r:!0===r?t.setAttribute(n,""):ee(t,n,r):("function"!=typeof a&&null!==a&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,r,i)))}}function tf(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Il("error",t),Il("load",t);var r,i=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,e));default:Ql(t,e,r,s,n,null)}}return a&&Ql(t,e,"srcSet",n.srcSet,n,null),void(i&&Ql(t,e,"src",n.src,n,null));case"input":Il("invalid",t);var u=r=s=a=null,c=null,l=null;for(i in n)if(n.hasOwnProperty(i)){var f=n[i];if(null!=f)switch(i){case"name":a=f;break;case"type":s=f;break;case"checked":c=f;break;case"defaultChecked":l=f;break;case"value":r=f;break;case"defaultValue":u=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,e));break;default:Ql(t,e,i,f,n,null)}}return ye(t,r,u,c,l,s,a,!1),void fe(t);case"select":for(a in Il("invalid",t),i=s=r=null,n)if(n.hasOwnProperty(a)&&null!=(u=n[a]))switch(a){case"value":r=u;break;case"defaultValue":s=u;break;case"multiple":i=u;default:Ql(t,e,a,u,n,null)}return e=r,n=s,t.multiple=!!i,void(null!=e?be(t,!!i,e,!1):null!=n&&be(t,!!i,n,!0));case"textarea":for(s in Il("invalid",t),r=a=i=null,n)if(n.hasOwnProperty(s)&&null!=(u=n[s]))switch(s){case"value":i=u;break;case"defaultValue":a=u;break;case"children":r=u;break;case"dangerouslySetInnerHTML":if(null!=u)throw Error(o(91));break;default:Ql(t,e,s,u,n,null)}return we(t,i,a,r),void fe(t);case"option":for(c in n)n.hasOwnProperty(c)&&null!=(i=n[c])&&("selected"===c?t.selected=i&&"function"!=typeof i&&"symbol"!=typeof i:Ql(t,e,c,i,n,null));return;case"dialog":Il("beforetoggle",t),Il("toggle",t),Il("cancel",t),Il("close",t);break;case"iframe":case"object":Il("load",t);break;case"video":case"audio":for(i=0;i<Rl.length;i++)Il(Rl[i],t);break;case"image":Il("error",t),Il("load",t);break;case"details":Il("toggle",t);break;case"embed":case"source":case"link":Il("error",t),Il("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(l in n)if(n.hasOwnProperty(l)&&null!=(i=n[l]))switch(l){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,e));default:Ql(t,e,l,i,n,null)}return;default:if(Me(e)){for(f in n)n.hasOwnProperty(f)&&void 0!==(i=n[f])&&Jl(t,e,f,i,n,void 0);return}}for(u in n)n.hasOwnProperty(u)&&null!=(i=n[u])&&Ql(t,e,u,i,n,null)}var ef=null,nf=null;function rf(t){return 9===t.nodeType?t:t.ownerDocument}function af(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function of(t,e){if(0===t)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return 1===t&&"foreignObject"===e?0:t}function sf(t,e){return"textarea"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"bigint"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var uf=null,cf="function"==typeof setTimeout?setTimeout:void 0,lf="function"==typeof clearTimeout?clearTimeout:void 0,ff="function"==typeof Promise?Promise:void 0,df="function"==typeof queueMicrotask?queueMicrotask:void 0!==ff?function(t){return ff.resolve(null).then(t).catch(hf)}:cf;function hf(t){setTimeout((function(){throw t}))}function pf(t){return"head"===t}function vf(t,e){var n=e,r=0,i=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0<r&&8>r){n=r;var o=t.ownerDocument;if(1&n&&kf(o.documentElement),2&n&&kf(o.body),4&n)for(kf(n=o.head),o=n.firstChild;o;){var s=o.nextSibling,u=o.nodeName;o[zt]||"SCRIPT"===u||"STYLE"===u||"LINK"===u&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=s}}if(0===i)return t.removeChild(a),void Ad(e);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=a}while(n);Ad(e)}function gf(t){var e=t.firstChild;for(e&&10===e.nodeType&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gf(n),Bt(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}t.removeChild(n)}}function yf(t){return"$!"===t.data||"$?"===t.data&&"complete"===t.ownerDocument.readyState}function mf(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e||"F!"===e||"F"===e)break;if("/$"===e)return null}}return t}var bf=null;function xf(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}function wf(t,e,n){switch(e=rf(n),t){case"html":if(!(t=e.documentElement))throw Error(o(452));return t;case"head":if(!(t=e.head))throw Error(o(453));return t;case"body":if(!(t=e.body))throw Error(o(454));return t;default:throw Error(o(451))}}function kf(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Bt(t)}var Ef=new Map,Of=new Set;function Sf(t){return"function"==typeof t.getRootNode?t.getRootNode():9===t.nodeType?t:t.ownerDocument}var Mf=j.d;j.d={f:function(){var t=Mf.f(),e=Gc();return t||e},r:function(t){var e=Wt(t);null!==e&&5===e.tag&&"form"===e.type?Lo(e):Mf.r(t)},D:function(t){Mf.D(t),Af("dns-prefetch",t,null)},C:function(t,e){Mf.C(t,e),Af("preconnect",t,e)},L:function(t,e,n){Mf.L(t,e,n);var r=Tf;if(r&&t&&e){var i='link[rel="preload"][as="'+ve(e)+'"]';"image"===e&&n&&n.imageSrcSet?(i+='[imagesrcset="'+ve(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(i+='[imagesizes="'+ve(n.imageSizes)+'"]')):i+='[href="'+ve(t)+'"]';var a=i;switch(e){case"style":a=Nf(t);break;case"script":a=Lf(t)}Ef.has(a)||(t=d({rel:"preload",href:"image"===e&&n&&n.imageSrcSet?void 0:t,as:e},n),Ef.set(a,t),null!==r.querySelector(i)||"style"===e&&r.querySelector(Cf(a))||"script"===e&&r.querySelector(Rf(a))||(tf(e=r.createElement("link"),"link",t),Yt(e),r.head.appendChild(e)))}},m:function(t,e){Mf.m(t,e);var n=Tf;if(n&&t){var r=e&&"string"==typeof e.as?e.as:"script",i='link[rel="modulepreload"][as="'+ve(r)+'"][href="'+ve(t)+'"]',a=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Lf(t)}if(!Ef.has(a)&&(t=d({rel:"modulepreload",href:t},e),Ef.set(a,t),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Rf(a)))return}tf(r=n.createElement("link"),"link",t),Yt(r),n.head.appendChild(r)}}},X:function(t,e){Mf.X(t,e);var n=Tf;if(n&&t){var r=Ht(n).hoistableScripts,i=Lf(t),a=r.get(i);a||((a=n.querySelector(Rf(i)))||(t=d({src:t,async:!0},e),(e=Ef.get(i))&&Ff(t,e),Yt(a=n.createElement("script")),tf(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}},S:function(t,e,n){Mf.S(t,e,n);var r=Tf;if(r&&t){var i=Ht(r).hoistableStyles,a=Nf(t);e=e||"default";var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Cf(a)))s.loading=5;else{t=d({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Ef.get(a))&&If(t,n);var u=o=r.createElement("link");Yt(u),tf(u,"link",t),u._p=new Promise((function(t,e){u.onload=t,u.onerror=e})),u.addEventListener("load",(function(){s.loading|=1})),u.addEventListener("error",(function(){s.loading|=2})),s.loading|=4,Df(o,e,r)}o={type:"stylesheet",instance:o,count:1,state:s},i.set(a,o)}}},M:function(t,e){Mf.M(t,e);var n=Tf;if(n&&t){var r=Ht(n).hoistableScripts,i=Lf(t),a=r.get(i);a||((a=n.querySelector(Rf(i)))||(t=d({src:t,async:!0,type:"module"},e),(e=Ef.get(i))&&Ff(t,e),Yt(a=n.createElement("script")),tf(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}};var Tf="undefined"==typeof document?null:document;function Af(t,e,n){var r=Tf;if(r&&"string"==typeof e&&e){var i=ve(e);i='link[rel="'+t+'"][href="'+i+'"]',"string"==typeof n&&(i+='[crossorigin="'+n+'"]'),Of.has(i)||(Of.add(i),t={rel:t,crossOrigin:n,href:e},null===r.querySelector(i)&&(tf(e=r.createElement("link"),"link",t),Yt(e),r.head.appendChild(e)))}}function Pf(t,e,n,r){var i,a,s,u,c=(c=H.current)?Sf(c):null;if(!c)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(e=Nf(n.href),(r=(n=Ht(c).hoistableStyles).get(e))||(r={type:"style",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){t=Nf(n.href);var l=Ht(c).hoistableStyles,f=l.get(t);if(f||(c=c.ownerDocument||c,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(t,f),(l=c.querySelector(Cf(t)))&&!l._p&&(f.instance=l,f.state.loading=5),Ef.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ef.set(t,n),l||(i=c,a=t,s=n,u=f.state,i.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=i.createElement("link"),u.preload=a,a.addEventListener("load",(function(){return u.loading|=1})),a.addEventListener("error",(function(){return u.loading|=2})),tf(a,"link",s),Yt(a),i.head.appendChild(a))))),e&&null===r)throw Error(o(528,""));return f}if(e&&null!==r)throw Error(o(529,""));return null;case"script":return e=n.async,"string"==typeof(n=n.src)&&e&&"function"!=typeof e&&"symbol"!=typeof e?(e=Lf(n),(r=(n=Ht(c).hoistableScripts).get(e))||(r={type:"script",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Nf(t){return'href="'+ve(t)+'"'}function Cf(t){return'link[rel="stylesheet"]['+t+"]"}function _f(t){return d({},t,{"data-precedence":t.precedence,precedence:null})}function Lf(t){return'[src="'+ve(t)+'"]'}function Rf(t){return"script[async]"+t}function jf(t,e,n){if(e.count++,null===e.instance)switch(e.type){case"style":var r=t.querySelector('style[data-href~="'+ve(n.href)+'"]');if(r)return e.instance=r,Yt(r),r;var i=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Yt(r=(t.ownerDocument||t).createElement("style")),tf(r,"style",i),Df(r,n.precedence,t),e.instance=r;case"stylesheet":i=Nf(n.href);var a=t.querySelector(Cf(i));if(a)return e.state.loading|=4,e.instance=a,Yt(a),a;r=_f(n),(i=Ef.get(i))&&If(r,i),Yt(a=(t.ownerDocument||t).createElement("link"));var s=a;return s._p=new Promise((function(t,e){s.onload=t,s.onerror=e})),tf(a,"link",r),e.state.loading|=4,Df(a,n.precedence,t),e.instance=a;case"script":return a=Lf(n.src),(i=t.querySelector(Rf(a)))?(e.instance=i,Yt(i),i):(r=n,(i=Ef.get(a))&&Ff(r=d({},n),i),Yt(i=(t=t.ownerDocument||t).createElement("script")),tf(i,"link",r),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(o(443,e.type))}else"stylesheet"===e.type&&!(4&e.state.loading)&&(r=e.instance,e.state.loading|=4,Df(r,n.precedence,t));return e.instance}function Df(t,e,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===e)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(t,a.nextSibling):(e=9===n.nodeType?n.head:n).insertBefore(t,e.firstChild)}function If(t,e){null==t.crossOrigin&&(t.crossOrigin=e.crossOrigin),null==t.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),null==t.title&&(t.title=e.title)}function Ff(t,e){null==t.crossOrigin&&(t.crossOrigin=e.crossOrigin),null==t.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),null==t.integrity&&(t.integrity=e.integrity)}var zf=null;function Bf(t,e,n){if(null===zf){var r=new Map,i=zf=new Map;i.set(n,r)}else(r=(i=zf).get(n))||(r=new Map,i.set(n,r));if(r.has(t))return r;for(r.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var a=n[i];if(!(a[zt]||a[_t]||"link"===t&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var o=a.getAttribute(e)||"";o=t+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Gf(t,e,n){(t=t.ownerDocument||t).head.insertBefore(n,"title"===e?t.querySelector("head > title"):null)}function Wf(t){return!!("stylesheet"!==t.type||3&t.state.loading)}var Vf=null;function Hf(){}function Yf(){if(this.count--,0===this.count)if(this.stylesheets)qf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}var Uf=null;function qf(t,e){t.stylesheets=null,null!==t.unsuspend&&(t.count++,Uf=new Map,e.forEach(Xf,t),Uf=null,Yf.call(t))}function Xf(t,e){if(!(4&e.state.loading)){var n=Uf.get(t);if(n)var r=n.get(null);else{n=new Map,Uf.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var o=i[a];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=e.instance).getAttribute("data-precedence"),(a=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=Yf.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),a?a.parentNode.insertBefore(i,a.nextSibling):(t=9===t.nodeType?t.head:t).insertBefore(i,t.firstChild),e.state.loading|=4}}var Kf={$$typeof:w,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function $f(t,e,n,r,i,a,o,s){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ot(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ot(0),this.hiddenUpdates=Ot(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Zf(t,e,n,r,i,a,o,s,u,c,l,f){return t=new $f(t,e,n,o,s,u,c,f),e=1,!0===a&&(e|=24),a=Dr(3,null,null,e),t.current=a,a.stateNode=t,(e=Li()).refCount++,t.pooledCache=e,e.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:e},na(a),t}function Qf(t){return t?t=Rr:Rr}function Jf(t,e,n,r,i,a){i=Qf(i),null===r.context?r.context=i:r.pendingContext=i,(r=ia(e)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=aa(t,r,e))&&(Dc(n,0,e),oa(n,t,e))}function td(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function ed(t,e){td(t,e),(t=t.alternate)&&td(t,e)}function nd(t){if(13===t.tag){var e=Cr(t,67108864);null!==e&&Dc(e,0,67108864),ed(t,67108864)}}var rd=!0;function id(t,e,n,r){var i=R.T;R.T=null;var a=j.p;try{j.p=2,od(t,e,n,r)}finally{j.p=a,R.T=i}}function ad(t,e,n,r){var i=R.T;R.T=null;var a=j.p;try{j.p=8,od(t,e,n,r)}finally{j.p=a,R.T=i}}function od(t,e,n,r){if(rd){var i=sd(r);if(null===i)Wl(t,e,r,ud,n),bd(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return dd=xd(dd,t,e,n,r,i),!0;case"dragenter":return hd=xd(hd,t,e,n,r,i),!0;case"mouseover":return pd=xd(pd,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return vd.set(a,xd(vd.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,gd.set(a,xd(gd.get(a)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(bd(t,r),4&e&&-1<md.indexOf(t)){for(;null!==i;){var a=Wt(i);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var o=mt(a.pendingLanes);if(0!==o){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var u=1<<31-ht(o);s.entanglements[1]|=u,o&=~u}kl(a),!(6&nc)&&(kc=et()+500,El(0,!1))}}break;case 13:null!==(s=Cr(a,2))&&Dc(s,0,2),Gc(),ed(a,2)}if(null===(a=sd(r))&&Wl(t,e,r,ud,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wl(t,e,r,null,n)}}function sd(t){return cd(t=Ce(t))}var ud=null;function cd(t){if(ud=null,null!==(t=Gt(t))){var e=u(t);if(null===e)t=null;else{var n=e.tag;if(13===n){if(null!==(t=c(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return ud=t,null}function ld(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case rt:return 2;case it:return 8;case at:case ot:return 32;case st:return 268435456;default:return 32}default:return 32}}var fd=!1,dd=null,hd=null,pd=null,vd=new Map,gd=new Map,yd=[],md="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bd(t,e){switch(t){case"focusin":case"focusout":dd=null;break;case"dragenter":case"dragleave":hd=null;break;case"mouseover":case"mouseout":pd=null;break;case"pointerover":case"pointerout":vd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gd.delete(e.pointerId)}}function xd(t,e,n,r,i,a){return null===t||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==e&&null!==(e=Wt(e))&&nd(e),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function wd(t){var e=Gt(t.target);if(null!==e){var n=u(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=c(n)))return t.blockedOn=e,void function(t){var e=j.p;try{return j.p=t,function(){if(13===n.tag){var t=Rc();t=At(t);var e=Cr(n,t);null!==e&&Dc(e,0,t),ed(n,t)}}()}finally{j.p=e}}(t.priority)}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function kd(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=sd(t.nativeEvent);if(null!==n)return null!==(e=Wt(n))&&nd(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);Ne=r,n.target.dispatchEvent(r),Ne=null,e.shift()}return!0}function Ed(t,e,n){kd(t)&&n.delete(e)}function Od(){fd=!1,null!==dd&&kd(dd)&&(dd=null),null!==hd&&kd(hd)&&(hd=null),null!==pd&&kd(pd)&&(pd=null),vd.forEach(Ed),gd.forEach(Ed)}function Sd(t,e){t.blockedOn===e&&(t.blockedOn=null,fd||(fd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Od)))}var Md=null;function Td(t){Md!==t&&(Md=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){Md===t&&(Md=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],i=t[e+2];if("function"!=typeof r){if(null===cd(r||n))continue;break}var a=Wt(n);null!==a&&(t.splice(e,3),e-=3,Co(a,{pending:!0,data:i,method:n.method,action:r},r,i))}})))}function Ad(t){function e(e){return Sd(e,t)}null!==dd&&Sd(dd,t),null!==hd&&Sd(hd,t),null!==pd&&Sd(pd,t),vd.forEach(e),gd.forEach(e);for(var n=0;n<yd.length;n++){var r=yd[n];r.blockedOn===t&&(r.blockedOn=null)}for(;0<yd.length&&null===(n=yd[0]).blockedOn;)wd(n),null===n.blockedOn&&yd.shift();if(null!=(n=(t.ownerDocument||t).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[Lt]||null;if("function"==typeof a)o||Td(n);else if(o){var s=null;if(a&&a.hasAttribute("formAction")){if(i=a,o=a[Lt]||null)s=o.formAction;else if(null!==cd(i))continue}else s=o.action;"function"==typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Td(n)}}}function Pd(t){this._internalRoot=t}function Nd(t){this._internalRoot=t}Nd.prototype.render=Pd.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Jf(e.current,Rc(),t,e,null,null)},Nd.prototype.unmount=Pd.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;Jf(t.current,2,null,t,null,null),Gc(),e[Rt]=null}},Nd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Nt();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yd.length&&0!==e&&e<yd[n].priority;n++);yd.splice(n,0,t),0===n&&wd(t)}};var Cd=i.version;if("19.1.0"!==Cd)throw Error(o(527,Cd,"19.1.0"));j.findDOMNode=function(t){var e=t._reactInternals;if(void 0===e){if("function"==typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=function(t){var e=t.alternate;if(!e){if(null===(e=u(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return l(i),t;if(a===r)return l(i),e;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,c=i.child;c;){if(c===n){s=!0,n=i,r=a;break}if(c===r){s=!0,r=i,n=a;break}c=c.sibling}if(!s){for(c=a.child;c;){if(c===n){s=!0,n=a,r=i;break}if(c===r){s=!0,r=a,n=i;break}c=c.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(e),null===(t=null!==t?f(t):null)?null:t.stateNode};var _d={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ld.isDisabled&&Ld.supportsFiber)try{lt=Ld.inject(_d),ft=Ld}catch(t){}}e.createRoot=function(t,e){if(!s(t))throw Error(o(299));var n=!1,r="",i=ms,a=bs,u=xs;return null!=e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onUncaughtError&&(i=e.onUncaughtError),void 0!==e.onCaughtError&&(a=e.onCaughtError),void 0!==e.onRecoverableError&&(u=e.onRecoverableError),void 0!==e.unstable_transitionCallbacks&&e.unstable_transitionCallbacks),e=Zf(t,1,!1,null,0,n,r,i,a,u,0,null),t[Rt]=e.current,Bl(t),new Pd(e)},e.hydrateRoot=function(t,e,n){if(!s(t))throw Error(o(299));var r=!1,i="",a=ms,u=bs,c=xs,l=null;return null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(u=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(l=n.formState)),(e=Zf(t,1,!0,e,0,r,i,a,u,c,0,l)).context=Qf(null),n=e.current,(i=ia(r=At(r=Rc()))).callback=null,aa(n,i,r),n=r,e.current.lanes=n,St(e,n),kl(e),t[Rt]=e.current,Bl(t),new Nd(e)},e.version="19.1.0"},8529:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},8590:(t,e,n)=>{var r=n(9776),i=n(2027);t.exports=function(t,e,n,a){var o=n.length,s=o,u=!a;if(null==t)return!s;for(t=Object(t);o--;){var c=n[o];if(u&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<s;){var l=(c=n[o])[0],f=t[l],d=c[1];if(u&&c[2]){if(void 0===f&&!(l in t))return!1}else{var h=new r;if(a)var p=a(f,d,l,t,e,h);if(!(void 0===p?i(d,f,3,a,h):p))return!1}}return!0}},8662:(t,e,n)=>{var r=n(6014),i=n(5167),a=n(8962),o=r?r.isConcatSpreadable:void 0;t.exports=function(t){return a(t)||i(t)||!!(o&&t&&t[o])}},8729:t=>{function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},8739:(t,e,n)=>{var r=n(498),i=n(6223);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},8759:(t,e,n)=>{var r=n(2920),i=n(3225),a=n(4620);t.exports=function(t,e){return null==t?t:r(t,i(e),a)}},8775:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},8790:(t,e,n)=>{var r=n(9948),i=n(1543);t.exports=function(t,e){return t&&r(e,i(e),t)}},8808:(t,e,n)=>{var r=n(943);t.exports=function(t,e,n){for(var i=-1,a=t.length;++i<a;){var o=t[i],s=e(o);if(null!=s&&(void 0===u?s==s&&!r(s):n(s,u)))var u=s,c=o}return c}},8812:(t,e,n)=>{var r=n(943);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},8815:(t,e,n)=>{var r=n(911),i=n(7644)((function(t,e,n){r(t,e,n)}));t.exports=i},8832:(t,e,n)=>{var r=n(957),i=n(8962);t.exports=function(t,e,n){var a=e(t);return i(t)?a:r(a,n(t))}},8834:(t,e,n)=>{"use strict";t.exports=n(457)},8853:(t,e,n)=>{var r=n(1906);t.exports=function(t,e){r(t,e),e.add(t)},t.exports.__esModule=!0,t.exports.default=t.exports},8873:(t,e,n)=>{var r=n(319)(n(6698),"Promise");t.exports=r},8962:t=>{var e=Array.isArray;t.exports=e},8971:(t,e,n)=>{var r={compactBox:n(1618),dendrogram:n(5742),indented:n(7652),mindmap:n(3241)};t.exports=r},8972:(t,e,n)=>{var r=n(1126);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},8979:(t,e,n)=>{var r=n(3791),i=n(8123),a=n(5850);t.exports=function(t,e,n){for(var o=-1,s=e.length,u={};++o<s;){var c=e[o],l=r(t,c);n(l,c)&&i(u,a(c,t),l)}return u}},9007:(t,e,n)=>{var r=n(8808),i=n(2443),a=n(4513);t.exports=function(t){return t&&t.length?r(t,a,i):void 0}},9030:t=>{"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},9054:(t,e,n)=>{t.exports=n(6269)},9107:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},9122:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},9150:t=>{t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},9168:(t,e,n)=>{var r=n(2418),i=n(9501),a=n(2099),o=n(1011);t.exports=function(t,e){return r(t)||i(t,e)||a(t,e)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},9207:(t,e,n)=>{var r=n(6036),i=n(4206).Graph;t.exports=function(t,e,n){var a=function(t){for(var e;t.hasNode(e=r.uniqueId("_root")););return e}(t),o=new i({compound:!0}).setGraph({root:a}).setDefaultNodeLabel((function(e){return t.node(e)}));return r.forEach(t.nodes(),(function(i){var s=t.node(i),u=t.parent(i);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(o.setNode(i),o.setParent(i,u||a),r.forEach(t[n](i),(function(e){var n=e.v===i?e.w:e.v,a=o.edge(n,i),s=r.isUndefined(a)?0:a.weight;o.setEdge(n,i,{weight:t.edge(e).weight+s})})),r.has(s,"minRank")&&o.setNode(i,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))})),o}},9210:(t,e,n)=>{var r=n(85),i=n(1417),a=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var o=t[e];a.call(t,e)&&i(o,n)&&(void 0!==n||e in t)||r(t,e,n)}},9217:(t,e,n)=>{t=n.nmd(t);var r=n(6698),i=n(6584),a=e&&!e.nodeType&&e,o=a&&t&&!t.nodeType&&t,s=o&&o.exports===a?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u},9276:t=>{"use strict";t.exports=e},9318:(t,e,n)=>{var r=n(4359),i=n(8962),a=n(6223);t.exports=function(t){return"string"==typeof t||!i(t)&&a(t)&&"[object String]"==r(t)}},9327:(t,e,n)=>{var r=n(1742),i=n(7968);t.exports=function(t){return r.filter(i(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}},9360:(t,e,n)=>{var r=n(1742);t.exports=function(t){var e,n={},i=[];function a(i){r.has(n,i)||(n[i]=!0,e.push(i),r.each(t.successors(i),a),r.each(t.predecessors(i),a))}return r.each(t.nodes(),(function(t){e=[],a(t),e.length&&i.push(e)})),i}},9365:(t,e,n)=>{var r=n(8808),i=n(6804),a=n(4513);t.exports=function(t){return t&&t.length?r(t,a,i):void 0}},9370:(t,e,n)=>{var r=n(8373);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},9375:t=>{t.exports="2.1.8"},9381:(t,e,n)=>{var r=n(3936);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},9493:t=>{t.exports=function(){this.__data__=[],this.size=0}},9501:t=>{t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}},t.exports.__esModule=!0,t.exports.default=t.exports},9509:(t,e,n)=>{var r=n(6036);t.exports=function(t,e){return r.map(e,(function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,(function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}}))}},9515:(t,e,n)=>{"use strict";var r=n(6036);function i(t,e,n){for(var i=r.zipObject(n,r.map(n,(function(t,e){return e}))),a=r.flatten(r.map(e,(function(e){return r.sortBy(r.map(t.outEdges(e),(function(e){return{pos:i[e.w],weight:t.edge(e).weight}})),"pos")})),!0),o=1;o<n.length;)o<<=1;var s=2*o-1;o-=1;var u=r.map(new Array(s),(function(){return 0})),c=0;return r.forEach(a.forEach((function(t){var e=t.pos+o;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),u[e=e-1>>1]+=t.weight;c+=t.weight*n}))),c}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}},9518:(t,e,n)=>{var r=n(8808),i=n(5434),a=n(2443);t.exports=function(t,e){return t&&t.length?r(t,i(e,2),a):void 0}},9542:(t,e,n)=>{var r=n(9791).default;t.exports=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},9558:(t,e,n)=>{var r=n(2823),i=n(498),a=n(1693),o=n(9318),s=n(1734);t.exports=function(t){if(null==t)return 0;if(a(t))return o(t)?s(t):t.length;var e=i(t);return"[object Map]"==e||"[object Set]"==e?t.size:r(t).length}},9597:t=>{"use strict";var e=t.exports;t.exports.isNumber=function(t){return"number"==typeof t},t.exports.findMin=function(t){if(0===t.length)return 1/0;for(var e=t[0],n=1;n<t.length;n++)e=Math.min(e,t[n]);return e},t.exports.findMax=function(t){if(0===t.length)return-1/0;for(var e=t[0],n=1;n<t.length;n++)e=Math.max(e,t[n]);return e},t.exports.findMinMulti=function(t){for(var n=e.findMin(t[0]),r=1;r<t.length;r++)n=Math.min(n,e.findMin(t[r]));return n},t.exports.findMaxMulti=function(t){for(var n=e.findMax(t[0]),r=1;r<t.length;r++)n=Math.max(n,e.findMax(t[r]));return n},t.exports.inside=function(t,e,n){return t<=n&&n<=e}},9671:(t,e,n)=>{var r=n(6036);t.exports=function(t){var e=function(t){var e={},n=0;return r.forEach(t.children(),(function i(a){var o=n;r.forEach(t.children(a),i),e[a]={low:o,lim:n++}})),e}(t);r.forEach(t.graph().dummyChains,(function(n){for(var r=t.node(n),i=r.edgeObj,a=function(t,e,n,r){var i,a,o=[],s=[],u=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),o.push(i)}while(i&&(e[i].low>u||c>e[i].lim));for(a=i,i=r;(i=t.parent(i))!==a;)s.push(i);return{path:o.concat(s.reverse()),lca:a}}(t,e,i.v,i.w),o=a.path,s=a.lca,u=0,c=o[u],l=!0;n!==i.w;){if(r=t.node(n),l){for(;(c=o[u])!==s&&t.node(c).maxRank<r.rank;)u++;c===s&&(l=!1)}if(!l){for(;u<o.length-1&&t.node(c=o[u+1]).minRank<=r.rank;)u++;c=o[u]}t.setParent(n,c),n=t.successors(n)[0]}}))}},9684:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},9703:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},9761:(t,e,n)=>{var r=n(9948),i=n(4620);t.exports=function(t,e){return t&&r(e,i(e),t)}},9776:(t,e,n)=>{var r=n(5422),i=n(7219),a=n(8775),o=n(486),s=n(3906),u=n(4442);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=s,c.prototype.set=u,t.exports=c},9780:(t,e,n)=>{var r=n(5179),i=n(2547),a=n(7560),o=n(7950),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,d=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!a(t)||i(t))&&(r(t)?d:s).test(o(t))}},9791:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},9797:(t,e,n)=>{var r=n(4513),i=n(2942),a=n(4336);t.exports=function(t,e){return a(i(t,e,r),t+"")}},9824:t=>{var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),a=16-(i-r);if(r=i,a>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},9838:(t,e,n)=>{var r=n(4069),i=n(9381),a=n(2988),o=n(7896),s=n(4008);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,t.exports=u},9844:(t,e,n)=>{var r=n(3275);t.exports=function(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},9858:(t,e,n)=>{var r=n(6014),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=a.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=o.call(t);return r&&(e?t[s]=n:delete t[s]),i}},9940:t=>{t.exports=function(t){throw new TypeError('"'+t+'" is read-only')},t.exports.__esModule=!0,t.exports.default=t.exports},9942:(t,e,n)=>{var r=n(2920),i=n(1543);t.exports=function(t,e){return t&&r(t,e,i)}},9948:(t,e,n)=>{var r=n(9210),i=n(85);t.exports=function(t,e,n,a){var o=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var c=e[s],l=a?a(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),o?i(n,c,l):r(n,c,l)}return n}},9953:(t,e,n)=>{var r=n(2755);function i(t,e){void 0===t&&(t=0),void 0===e&&(e=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=e}var a={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function o(t,e,n){n?(e.x=t.x,e.y=t.y):(e.x=t.y,e.y=t.x),t.children.forEach((function(t,r){o(t,e.children[r],n)}))}t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},a,e);var n,s=0,u=function t(e){if(!e)return null;e.width=0,e.depth&&e.depth>s&&(s=e.depth);var n=e.children,r=n.length,a=new i(e.height,[]);return n.forEach((function(e,n){var i=t(e);a.children.push(i),0===n&&(a.leftChild=i),n===r-1&&(a.rightChild=i)})),a.originNode=e,a.isLeaf=e.isLeaf(),a}(t);return function t(e){if(e.isLeaf||0===e.children.length)e.drawingDepth=s;else{var n=e.children.map((function(e){return t(e)})),r=Math.min.apply(null,n);e.drawingDepth=r-1}return e.drawingDepth}(u),function t(r){r.x=r.drawingDepth*e.rankSep,r.isLeaf?(r.y=0,n&&(r.y=n.y+n.height+e.nodeSep,r.originNode.parent!==n.originNode.parent&&(r.y+=e.subTreeSep)),n=r):(r.children.forEach((function(e){t(e)})),r.y=(r.leftChild.y+r.rightChild.y)/2)}(u),o(u,t,e.isHorizontal),t}},9973:(t,e,n)=>{var r=n(498),i=n(6223);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}}},o={};function s(t){var e=o[t];if(void 0!==e)return e.exports;var n=o[t]={id:t,loaded:!1,exports:{}};return a[t].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=a,s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},i=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,s.t=function(t,e){if(1&e&&(t=this(t)),8&e)return t;if("object"==typeof t&&t){if(4&e&&t.__esModule)return t;if(16&e&&"function"==typeof t.then)return t}var n=Object.create(null);s.r(n);var a={};r=r||[null,i({}),i([]),i(i)];for(var o=2&e&&t;"object"==typeof o&&!~r.indexOf(o);o=i(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>t[e]));return a.default=()=>t,s.d(n,a),n},s.d=(t,e)=>{for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},s.u=t=>t+".min.js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})(),s.b=document.baseURI||self.location.href,s.nc=void 0;var u={};return(()=>{"use strict";s.r(u),s.d(u,{Area:()=>Eht,Bar:()=>Sht,Base:()=>wht,BidirectionalBar:()=>Tpt,Box:()=>apt,Bullet:()=>fpt,CirclePacking:()=>Ept,CollapseExpandIcon:()=>r,Column:()=>Tht,Dendrogram:()=>iR,DualAxes:()=>Pht,Fishbone:()=>fR,FlowDirectionGraph:()=>gR,FlowGraph:()=>wR,Funnel:()=>Cht,G2:()=>f,G6:()=>n,Gauge:()=>hpt,Heatmap:()=>rpt,Histogram:()=>ept,IndentedTree:()=>LR,Line:()=>Lht,Liquid:()=>vpt,MindMap:()=>zR,Mix:()=>Cpt,NetworkGraph:()=>WR,OrganizationChart:()=>qR,Pie:()=>jht,RCNode:()=>i,Radar:()=>zht,RadialBar:()=>wpt,Rose:()=>Zht,Sankey:()=>spt,Scatter:()=>Iht,Stock:()=>cpt,Sunburst:()=>Lpt,Tiny:()=>Kht,Treemap:()=>bpt,Venn:()=>Ppt,Violin:()=>Spt,Waterfall:()=>Jht,WordCloud:()=>ypt,getNodeSide:()=>ER,measureTextSize:()=>oR,measureTextWidth:()=>slt,mergeOptions:()=>tR});var t={};s.r(t),s.d(t,{add:()=>Zt,adjoint:()=>gt,clone:()=>ct,copy:()=>lt,create:()=>ut,determinant:()=>yt,equals:()=>ne,exactEquals:()=>ee,frob:()=>$t,fromQuat:()=>Ft,fromQuat2:()=>_t,fromRotation:()=>Tt,fromRotationTranslation:()=>Ct,fromRotationTranslationScale:()=>Dt,fromRotationTranslationScaleOrigin:()=>It,fromScaling:()=>Mt,fromTranslation:()=>St,fromValues:()=>ft,fromXRotation:()=>At,fromYRotation:()=>Pt,fromZRotation:()=>Nt,frustum:()=>zt,getRotation:()=>jt,getScaling:()=>Rt,getTranslation:()=>Lt,identity:()=>ht,invert:()=>vt,lookAt:()=>qt,mul:()=>re,multiply:()=>mt,multiplyScalar:()=>Jt,multiplyScalarAndAdd:()=>te,ortho:()=>Yt,orthoNO:()=>Ht,orthoZO:()=>Ut,perspective:()=>Gt,perspectiveFromFieldOfView:()=>Vt,perspectiveNO:()=>Bt,perspectiveZO:()=>Wt,rotate:()=>wt,rotateX:()=>kt,rotateY:()=>Et,rotateZ:()=>Ot,scale:()=>xt,set:()=>dt,str:()=>Kt,sub:()=>ie,subtract:()=>Qt,targetTo:()=>Xt,translate:()=>bt,transpose:()=>pt});var e={};s.r(e),s.d(e,{circle:()=>Xv,diamond:()=>$v,rect:()=>Qv,simple:()=>tg,triangle:()=>Kv,triangleRect:()=>Jv,vee:()=>Zv});var n={};s.r(n),s.d(n,{AntVDagreLayout:()=>eb,AutoAdaptLabel:()=>fd,Background:()=>Iw,Badge:()=>Ch,BaseBehavior:()=>ld,BaseCombo:()=>Ev,BaseEdge:()=>ng,BaseLayout:()=>Qg,BaseNode:()=>Hh,BasePlugin:()=>Rw,BaseShape:()=>Th,BaseTransform:()=>lA,BrushSelect:()=>Qd,BubbleSets:()=>bk,CameraSetting:()=>kk,Canvas:()=>TA,CanvasEvent:()=>yl,Circle:()=>Yh,CircleCombo:()=>Ov,CircularLayout:()=>ab,ClickSelect:()=>sh,CollapseExpand:()=>Dg,ComboCombinedLayout:()=>ex,ComboEvent:()=>ml,CommonEvent:()=>bl,CompactBoxLayout:()=>py.compactBox,ConcentricLayout:()=>fb,ContainerEvent:()=>xl,Contextmenu:()=>Sk,CreateEdge:()=>Bg,Cubic:()=>rg,CubicHorizontal:()=>ig,CubicRadial:()=>ag,CubicVertical:()=>og,D3ForceLayout:()=>Hx,DagreLayout:()=>Xx,DendrogramLayout:()=>py.dendrogram,Diamond:()=>qh,Donut:()=>Xh,DragCanvas:()=>Vg,DragElement:()=>Yg,DragElementForce:()=>ry,EdgeBundling:()=>Mk,EdgeEvent:()=>wl,EdgeFilterLens:()=>jk,Ellipse:()=>Zh,ExtensionCategory:()=>Tl,FishboneLayout:()=>Mw,Fisheye:()=>Ik,FixElementSize:()=>ay,FocusElement:()=>oy,ForceAtlas2Layout:()=>Jx,ForceLayout:()=>Lb,FruchtermanLayout:()=>ew,Fullscreen:()=>Fk,Graph:()=>LP,GraphEvent:()=>kl,GridLayout:()=>rw,GridLine:()=>zk,HTML:()=>gv,Hexagon:()=>Qh,History:()=>Hk,HistoryEvent:()=>El,HoverActivate:()=>sy,Hull:()=>wE,Icon:()=>Gh,Image:()=>mv,IndentedLayout:()=>py.indented,Label:()=>Nh,LassoSelect:()=>uy,Legend:()=>DO,Line:()=>sg,MDSLayout:()=>Kb,MapNodeSize:()=>FP,MindmapLayout:()=>py.mindmap,Minimap:()=>IO,NodeEvent:()=>Ol,OptimizeViewportTransform:()=>cy,PlaceRadialLabels:()=>zP,Polyline:()=>yg,ProcessParallelEdges:()=>GP,Quadratic:()=>mg,RadialLayout:()=>gw,RandomLayout:()=>Ew,Rect:()=>bv,RectCombo:()=>Sv,ScrollCanvas:()=>fy,Shortcut:()=>Zd,SnakeLayout:()=>Nw,Snapline:()=>WO,Star:()=>xv,Timebar:()=>DT,Toolbar:()=>WT,Tooltip:()=>$T,Triangle:()=>wv,Watermark:()=>rA,ZoomCanvas:()=>hy,effect:()=>mA,getExtension:()=>Cl,getExtensions:()=>_l,iconfont:()=>XP,idOf:()=>Kf,invokeLayoutMethod:()=>ey,isCollapsed:()=>uh,omitStyleProps:()=>vh,parseSize:()=>gh,positionOf:()=>Rd,register:()=>xA,setVisibility:()=>sd,subStyleProps:()=>hh,treeToGraphData:()=>jP,version:()=>Ll});var r={};s.r(r),s.d(r,{ArrowCountIcon:()=>aL,PlusMinusIcon:()=>sL});var i={};s.r(i),s.d(i,{OrganizationChartNode:()=>cL,TextNode:()=>NL});var a={};s.r(a),s.d(a,{area:()=>v0,bottom:()=>E0,bottomLeft:()=>E0,bottomRight:()=>E0,inside:()=>E0,left:()=>E0,outside:()=>T0,right:()=>E0,spider:()=>_0,surround:()=>R0,top:()=>E0,topLeft:()=>E0,topRight:()=>E0});var o={};s.r(o),s.d(o,{interpolateBlues:()=>I2,interpolateBrBG:()=>K1,interpolateBuGn:()=>h2,interpolateBuPu:()=>v2,interpolateCividis:()=>X2,interpolateCool:()=>c3,interpolateCubehelixDefault:()=>s3,interpolateGnBu:()=>y2,interpolateGreens:()=>z2,interpolateGreys:()=>G2,interpolateInferno:()=>x3,interpolateMagma:()=>b3,interpolateOrRd:()=>b2,interpolateOranges:()=>q2,interpolatePRGn:()=>Z1,interpolatePiYG:()=>J1,interpolatePlasma:()=>w3,interpolatePuBu:()=>E2,interpolatePuBuGn:()=>w2,interpolatePuOr:()=>e2,interpolatePuRd:()=>S2,interpolatePurples:()=>V2,interpolateRainbow:()=>f3,interpolateRdBu:()=>r2,interpolateRdGy:()=>a2,interpolateRdPu:()=>T2,interpolateRdYlBu:()=>s2,interpolateRdYlGn:()=>c2,interpolateReds:()=>Y2,interpolateSinebow:()=>v3,interpolateSpectral:()=>f2,interpolateTurbo:()=>g3,interpolateViridis:()=>m3,interpolateWarm:()=>u3,interpolateYlGn:()=>C2,interpolateYlGnBu:()=>P2,interpolateYlOrBr:()=>L2,interpolateYlOrRd:()=>j2,schemeAccent:()=>$0,schemeBlues:()=>D2,schemeBrBG:()=>X1,schemeBuGn:()=>d2,schemeBuPu:()=>p2,schemeCategory10:()=>K0,schemeDark2:()=>Z0,schemeGnBu:()=>g2,schemeGreens:()=>F2,schemeGreys:()=>B2,schemeObservable10:()=>Q0,schemeOrRd:()=>m2,schemeOranges:()=>U2,schemePRGn:()=>$1,schemePaired:()=>J0,schemePastel1:()=>t1,schemePastel2:()=>e1,schemePiYG:()=>Q1,schemePuBu:()=>k2,schemePuBuGn:()=>x2,schemePuOr:()=>t2,schemePuRd:()=>O2,schemePurples:()=>W2,schemeRdBu:()=>n2,schemeRdGy:()=>i2,schemeRdPu:()=>M2,schemeRdYlBu:()=>o2,schemeRdYlGn:()=>u2,schemeReds:()=>H2,schemeSet1:()=>n1,schemeSet2:()=>r1,schemeSet3:()=>i1,schemeSpectral:()=>l2,schemeTableau10:()=>a1,schemeYlGn:()=>N2,schemeYlGnBu:()=>A2,schemeYlOrBr:()=>_2,schemeYlOrRd:()=>R2});var c={};s.r(c),s.d(c,{frequency:()=>knt,id:()=>Ent,name:()=>Ont,weight:()=>wnt});var l={};s.r(l),s.d(l,{geoAlbers:()=>wat,geoAlbersUsa:()=>kat,geoAzimuthalEqualArea:()=>Mat,geoAzimuthalEqualAreaRaw:()=>Sat,geoAzimuthalEquidistant:()=>Aat,geoAzimuthalEquidistantRaw:()=>Tat,geoConicConformal:()=>Rat,geoConicConformalRaw:()=>Lat,geoConicEqualArea:()=>xat,geoConicEqualAreaRaw:()=>bat,geoConicEquidistant:()=>Fat,geoConicEquidistantRaw:()=>Iat,geoEqualEarth:()=>Yat,geoEqualEarthRaw:()=>Hat,geoEquirectangular:()=>Dat,geoEquirectangularRaw:()=>jat,geoGnomonic:()=>qat,geoGnomonicRaw:()=>Uat,geoIdentity:()=>Xat,geoMercator:()=>Nat,geoMercatorRaw:()=>Pat,geoNaturalEarth1:()=>$at,geoNaturalEarth1Raw:()=>Kat,geoOrthographic:()=>Qat,geoOrthographicRaw:()=>Zat,geoProjection:()=>gat,geoProjectionMutator:()=>yat,geoStereographic:()=>tot,geoStereographicRaw:()=>Jat,geoTransverseMercator:()=>not,geoTransverseMercatorRaw:()=>eot});var f={};function d(t){if(Array.isArray(t))return t}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){if(t){if("string"==typeof t)return h(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(t,e){return d(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(t,e)||p(t,e)||v()}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function m(t){var e=function(t){if("object"!=y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(e)?e:e+""}function b(t,e,n){return(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function O(t,e,n){return e&&E(t.prototype,e),n&&E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function S(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function M(t){return function(t){if(Array.isArray(t))return h(t)}(t)||S(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}function A(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(A=function(){return!!t})()}function P(t,e){if(e&&("object"==y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function N(t,e,n){return e=T(e),P(t,A()?Reflect.construct(e,n||[],T(t).constructor):e.apply(t,n))}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function _(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}s.r(f),s.d(f,{AREA_CLASS_NAME:()=>oJ,Academy:()=>Z$,Bin:()=>j9,BinX:()=>D9,COMPONENT_CLASS_NAME:()=>iJ,Chart:()=>$ct,ChartEvent:()=>I0,Classic:()=>U$,ClassicDark:()=>K$,Dark:()=>X$,DiffY:()=>H9,DodgeX:()=>I9,ELEMENT_CLASS_NAME:()=>eJ,Filter:()=>h7,FlexX:()=>u7,Group:()=>t7,GroupColor:()=>r7,GroupX:()=>e7,GroupY:()=>n7,Jitter:()=>B9,JitterX:()=>G9,JitterY:()=>W9,LABEL_CLASS_NAME:()=>aJ,LABEL_LAYER_CLASS_NAME:()=>tJ,Light:()=>Y$,LinearAxis:()=>NZ,MAIN_LAYER_CLASS_NAME:()=>JQ,MASK_CLASS_NAME:()=>sJ,MaybeDefaultX:()=>CX,MaybeDefaultY:()=>RX,MaybeFunctionAttribute:()=>HX,MaybeGradient:()=>oU,MaybeIdentityX:()=>Wq,MaybeIdentityY:()=>Gq,MaybeKey:()=>oY,MaybeSeries:()=>sU,MaybeSize:()=>dq,MaybeStackY:()=>Yct,MaybeTitle:()=>iY,MaybeTooltip:()=>aY,MaybeTuple:()=>Eq,MaybeTupleX:()=>gX,MaybeTupleY:()=>bX,MaybeVisualPosition:()=>Sq,MaybeZeroPadding:()=>Aq,MaybeZeroX:()=>mj,MaybeZeroY:()=>fq,MaybeZeroY1:()=>yj,MaybeZeroZ:()=>Uct,NormalizeY:()=>U9,PLOT_CLASS_NAME:()=>rJ,Pack:()=>l7,Runtime:()=>Vct,Sample:()=>d7,Select:()=>Z9,SelectX:()=>Q9,SelectY:()=>J9,Selection:()=>dH,SortColor:()=>s7,SortX:()=>a7,SortY:()=>o7,StackEnter:()=>Y9,StackY:()=>o9,SymmetryY:()=>V9,VIEW_CLASS_NAME:()=>nJ,corelib:()=>Ott,dataOf:()=>XV,extend:()=>cot,geolib:()=>sot,graphlib:()=>Int,plotlib:()=>uet,register:()=>Wct,render:()=>dct,renderToMountedElement:()=>hct,select:()=>fH,selectG2Elements:()=>pJ,selectPlotArea:()=>yJ,seriesOf:()=>KV,stdlib:()=>uot});const L=s(952);var R=1e-6,j="undefined"!=typeof Float32Array?Float32Array:Array;function D(){var t=new j(3);return j!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function I(t){var e=new j(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function F(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function z(t,e,n){var r=new j(3);return r[0]=t,r[1]=e,r[2]=n,r}function B(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function G(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function W(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function V(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function H(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Y(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function U(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function q(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function X(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function K(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function $(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2];return t[0]=i*u-a*s,t[1]=a*o-r*u,t[2]=r*s-i*o,t}function Z(t,e,n,r){var i=e[0],a=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t}function Q(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,t}function J(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t}function tt(t,e,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=e[0],u=e[1],c=e[2],l=i*c-a*u,f=a*s-r*c,d=r*u-i*s,h=i*d-a*f,p=a*l-r*d,v=r*f-i*l,g=2*o;return l*=g,f*=g,d*=g,h*=2,p*=2,v*=2,t[0]=s+l+h,t[1]=u+f+p,t[2]=c+d+v,t}function et(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return Math.abs(n-a)<=R*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=R*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=R*Math.max(1,Math.abs(i),Math.abs(s))}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var nt=V,rt=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)},it=F;function at(){var t=new j(4);return j!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function ot(t,e,n,r){var i=new j(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function st(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,t}function ut(){var t=new j(16);return j!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function ct(t){var e=new j(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function lt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ft(t,e,n,r,i,a,o,s,u,c,l,f,d,h,p,v){var g=new j(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=i,g[5]=a,g[6]=o,g[7]=s,g[8]=u,g[9]=c,g[10]=l,g[11]=f,g[12]=d,g[13]=h,g[14]=p,g[15]=v,g}function dt(t,e,n,r,i,a,o,s,u,c,l,f,d,h,p,v,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=d,t[12]=h,t[13]=p,t[14]=v,t[15]=g,t}function ht(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pt(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function vt(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],p=e[12],v=e[13],g=e[14],y=e[15],m=n*s-r*o,b=n*u-i*o,x=n*c-a*o,w=r*u-i*s,k=r*c-a*s,E=i*c-a*u,O=l*v-f*p,S=l*g-d*p,M=l*y-h*p,T=f*g-d*v,A=f*y-h*v,P=d*y-h*g,N=m*P-b*A+x*T+w*M-k*S+E*O;return N?(N=1/N,t[0]=(s*P-u*A+c*T)*N,t[1]=(i*A-r*P-a*T)*N,t[2]=(v*E-g*k+y*w)*N,t[3]=(d*k-f*E-h*w)*N,t[4]=(u*M-o*P-c*S)*N,t[5]=(n*P-i*M+a*S)*N,t[6]=(g*x-p*E-y*b)*N,t[7]=(l*E-d*x+h*b)*N,t[8]=(o*A-s*M+c*O)*N,t[9]=(r*M-n*A-a*O)*N,t[10]=(p*k-v*x+y*m)*N,t[11]=(f*x-l*k-h*m)*N,t[12]=(s*S-o*T-u*O)*N,t[13]=(n*T-r*S+i*O)*N,t[14]=(v*b-p*w-g*m)*N,t[15]=(l*w-f*b+d*m)*N,t):null}function gt(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],p=e[12],v=e[13],g=e[14],y=e[15];return t[0]=s*(d*y-h*g)-f*(u*y-c*g)+v*(u*h-c*d),t[1]=-(r*(d*y-h*g)-f*(i*y-a*g)+v*(i*h-a*d)),t[2]=r*(u*y-c*g)-s*(i*y-a*g)+v*(i*c-a*u),t[3]=-(r*(u*h-c*d)-s*(i*h-a*d)+f*(i*c-a*u)),t[4]=-(o*(d*y-h*g)-l*(u*y-c*g)+p*(u*h-c*d)),t[5]=n*(d*y-h*g)-l*(i*y-a*g)+p*(i*h-a*d),t[6]=-(n*(u*y-c*g)-o*(i*y-a*g)+p*(i*c-a*u)),t[7]=n*(u*h-c*d)-o*(i*h-a*d)+l*(i*c-a*u),t[8]=o*(f*y-h*v)-l*(s*y-c*v)+p*(s*h-c*f),t[9]=-(n*(f*y-h*v)-l*(r*y-a*v)+p*(r*h-a*f)),t[10]=n*(s*y-c*v)-o*(r*y-a*v)+p*(r*c-a*s),t[11]=-(n*(s*h-c*f)-o*(r*h-a*f)+l*(r*c-a*s)),t[12]=-(o*(f*g-d*v)-l*(s*g-u*v)+p*(s*d-u*f)),t[13]=n*(f*g-d*v)-l*(r*g-i*v)+p*(r*d-i*f),t[14]=-(n*(s*g-u*v)-o*(r*g-i*v)+p*(r*u-i*s)),t[15]=n*(s*d-u*f)-o*(r*d-i*f)+l*(r*u-i*s),t}function yt(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],d=t[11],h=t[12],p=t[13],v=t[14],g=t[15];return(e*o-n*a)*(f*g-d*v)-(e*s-r*a)*(l*g-d*p)+(e*u-i*a)*(l*v-f*p)+(n*s-r*o)*(c*g-d*h)-(n*u-i*o)*(c*v-f*h)+(r*u-i*s)*(c*p-l*h)}function mt(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],h=e[10],p=e[11],v=e[12],g=e[13],y=e[14],m=e[15],b=n[0],x=n[1],w=n[2],k=n[3];return t[0]=b*r+x*s+w*f+k*v,t[1]=b*i+x*u+w*d+k*g,t[2]=b*a+x*c+w*h+k*y,t[3]=b*o+x*l+w*p+k*m,b=n[4],x=n[5],w=n[6],k=n[7],t[4]=b*r+x*s+w*f+k*v,t[5]=b*i+x*u+w*d+k*g,t[6]=b*a+x*c+w*h+k*y,t[7]=b*o+x*l+w*p+k*m,b=n[8],x=n[9],w=n[10],k=n[11],t[8]=b*r+x*s+w*f+k*v,t[9]=b*i+x*u+w*d+k*g,t[10]=b*a+x*c+w*h+k*y,t[11]=b*o+x*l+w*p+k*m,b=n[12],x=n[13],w=n[14],k=n[15],t[12]=b*r+x*s+w*f+k*v,t[13]=b*i+x*u+w*d+k*g,t[14]=b*a+x*c+w*h+k*y,t[15]=b*o+x*l+w*p+k*m,t}function bt(t,e,n){var r,i,a,o,s,u,c,l,f,d,h,p,v=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*y+e[12],t[13]=e[1]*v+e[5]*g+e[9]*y+e[13],t[14]=e[2]*v+e[6]*g+e[10]*y+e[14],t[15]=e[3]*v+e[7]*g+e[11]*y+e[15]):(r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],h=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=d,t[10]=h,t[11]=p,t[12]=r*v+s*g+f*y+e[12],t[13]=i*v+u*g+d*y+e[13],t[14]=a*v+c*g+h*y+e[14],t[15]=o*v+l*g+p*y+e[15]),t}function xt(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function wt(t,e,n,r){var i,a,o,s,u,c,l,f,d,h,p,v,g,y,m,b,x,w,k,E,O,S,M,T,A=r[0],P=r[1],N=r[2],C=Math.hypot(A,P,N);return C<R?null:(A*=C=1/C,P*=C,N*=C,i=Math.sin(n),o=1-(a=Math.cos(n)),s=e[0],u=e[1],c=e[2],l=e[3],f=e[4],d=e[5],h=e[6],p=e[7],v=e[8],g=e[9],y=e[10],m=e[11],b=A*A*o+a,x=P*A*o+N*i,w=N*A*o-P*i,k=A*P*o-N*i,E=P*P*o+a,O=N*P*o+A*i,S=A*N*o+P*i,M=P*N*o-A*i,T=N*N*o+a,t[0]=s*b+f*x+v*w,t[1]=u*b+d*x+g*w,t[2]=c*b+h*x+y*w,t[3]=l*b+p*x+m*w,t[4]=s*k+f*E+v*O,t[5]=u*k+d*E+g*O,t[6]=c*k+h*E+y*O,t[7]=l*k+p*E+m*O,t[8]=s*S+f*M+v*T,t[9]=u*S+d*M+g*T,t[10]=c*S+h*M+y*T,t[11]=l*S+p*M+m*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function kt(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*r,t[5]=o*i+l*r,t[6]=s*i+f*r,t[7]=u*i+d*r,t[8]=c*i-a*r,t[9]=l*i-o*r,t[10]=f*i-s*r,t[11]=d*i-u*r,t}function Et(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-c*r,t[1]=o*i-l*r,t[2]=s*i-f*r,t[3]=u*i-d*r,t[8]=a*r+c*i,t[9]=o*r+l*i,t[10]=s*r+f*i,t[11]=u*r+d*i,t}function Ot(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*r,t[1]=o*i+l*r,t[2]=s*i+f*r,t[3]=u*i+d*r,t[4]=c*i-a*r,t[5]=l*i-o*r,t[6]=f*i-s*r,t[7]=d*i-u*r,t}function St(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Mt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Tt(t,e,n){var r,i,a,o=n[0],s=n[1],u=n[2],c=Math.hypot(o,s,u);return c<R?null:(o*=c=1/c,s*=c,u*=c,r=Math.sin(e),a=1-(i=Math.cos(e)),t[0]=o*o*a+i,t[1]=s*o*a+u*r,t[2]=u*o*a-s*r,t[3]=0,t[4]=o*s*a-u*r,t[5]=s*s*a+i,t[6]=u*s*a+o*r,t[7]=0,t[8]=o*u*a+s*r,t[9]=s*u*a-o*r,t[10]=u*u*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function At(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Pt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Nt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ct(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=r+r,u=i+i,c=a+a,l=r*s,f=r*u,d=r*c,h=i*u,p=i*c,v=a*c,g=o*s,y=o*u,m=o*c;return t[0]=1-(h+v),t[1]=f+m,t[2]=d-y,t[3]=0,t[4]=f-m,t[5]=1-(l+v),t[6]=p+g,t[7]=0,t[8]=d+y,t[9]=p-g,t[10]=1-(l+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function _t(t,e){var n=new j(3),r=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=r*r+i*i+a*a+o*o;return f>0?(n[0]=2*(s*o+l*r+u*a-c*i)/f,n[1]=2*(u*o+l*i+c*r-s*a)/f,n[2]=2*(c*o+l*a+s*i-u*r)/f):(n[0]=2*(s*o+l*r+u*a-c*i),n[1]=2*(u*o+l*i+c*r-s*a),n[2]=2*(c*o+l*a+s*i-u*r)),Ct(t,e,n),t}function Lt(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Rt(t,e){var n=e[0],r=e[1],i=e[2],a=e[4],o=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(a,o,s),t[2]=Math.hypot(u,c,l),t}function jt(t,e){var n=new j(3);Rt(n,e);var r=1/n[0],i=1/n[1],a=1/n[2],o=e[0]*r,s=e[1]*i,u=e[2]*a,c=e[4]*r,l=e[5]*i,f=e[6]*a,d=e[8]*r,h=e[9]*i,p=e[10]*a,v=o+l+p,g=0;return v>0?(g=2*Math.sqrt(v+1),t[3]=.25*g,t[0]=(f-h)/g,t[1]=(d-u)/g,t[2]=(s-c)/g):o>l&&o>p?(g=2*Math.sqrt(1+o-l-p),t[3]=(f-h)/g,t[0]=.25*g,t[1]=(s+c)/g,t[2]=(d+u)/g):l>p?(g=2*Math.sqrt(1+l-o-p),t[3]=(d-u)/g,t[0]=(s+c)/g,t[1]=.25*g,t[2]=(f+h)/g):(g=2*Math.sqrt(1+p-o-l),t[3]=(s-c)/g,t[0]=(d+u)/g,t[1]=(f+h)/g,t[2]=.25*g),t}function Dt(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3],u=i+i,c=a+a,l=o+o,f=i*u,d=i*c,h=i*l,p=a*c,v=a*l,g=o*l,y=s*u,m=s*c,b=s*l,x=r[0],w=r[1],k=r[2];return t[0]=(1-(p+g))*x,t[1]=(d+b)*x,t[2]=(h-m)*x,t[3]=0,t[4]=(d-b)*w,t[5]=(1-(f+g))*w,t[6]=(v+y)*w,t[7]=0,t[8]=(h+m)*k,t[9]=(v-y)*k,t[10]=(1-(f+p))*k,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function It(t,e,n,r,i){var a=e[0],o=e[1],s=e[2],u=e[3],c=a+a,l=o+o,f=s+s,d=a*c,h=a*l,p=a*f,v=o*l,g=o*f,y=s*f,m=u*c,b=u*l,x=u*f,w=r[0],k=r[1],E=r[2],O=i[0],S=i[1],M=i[2],T=(1-(v+y))*w,A=(h+x)*w,P=(p-b)*w,N=(h-x)*k,C=(1-(d+y))*k,_=(g+m)*k,L=(p+b)*E,R=(g-m)*E,j=(1-(d+v))*E;return t[0]=T,t[1]=A,t[2]=P,t[3]=0,t[4]=N,t[5]=C,t[6]=_,t[7]=0,t[8]=L,t[9]=R,t[10]=j,t[11]=0,t[12]=n[0]+O-(T*O+N*S+L*M),t[13]=n[1]+S-(A*O+C*S+R*M),t[14]=n[2]+M-(P*O+_*S+j*M),t[15]=1,t}function Ft(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,u=i+i,c=n*o,l=r*o,f=r*s,d=i*o,h=i*s,p=i*u,v=a*o,g=a*s,y=a*u;return t[0]=1-f-p,t[1]=l+y,t[2]=d-g,t[3]=0,t[4]=l-y,t[5]=1-c-p,t[6]=h+v,t[7]=0,t[8]=d+g,t[9]=h-v,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function zt(t,e,n,r,i,a,o){var s=1/(n-e),u=1/(i-r),c=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t}function Bt(t,e,n,r,i){var a,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(r-i),t[10]=(i+r)*a,t[14]=2*i*r*a):(t[10]=-1,t[14]=-2*r),t}D(),at();var Gt=Bt;function Wt(t,e,n,r,i){var a,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(r-i),t[10]=i*a,t[14]=i*r*a):(t[10]=-1,t[14]=-r),t}function Vt(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+s),c=2/(i+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-s)*u*.5,t[9]=(i-a)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Ht(t,e,n,r,i,a,o){var s=1/(e-n),u=1/(r-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(o+a)*c,t[15]=1,t}var Yt=Ht;function Ut(t,e,n,r,i,a,o){var s=1/(e-n),u=1/(r-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=a*c,t[15]=1,t}function qt(t,e,n,r){var i,a,o,s,u,c,l,f,d,h,p=e[0],v=e[1],g=e[2],y=r[0],m=r[1],b=r[2],x=n[0],w=n[1],k=n[2];return Math.abs(p-x)<R&&Math.abs(v-w)<R&&Math.abs(g-k)<R?ht(t):(l=p-x,f=v-w,d=g-k,i=m*(d*=h=1/Math.hypot(l,f,d))-b*(f*=h),a=b*(l*=h)-y*d,o=y*f-m*l,(h=Math.hypot(i,a,o))?(i*=h=1/h,a*=h,o*=h):(i=0,a=0,o=0),s=f*o-d*a,u=d*i-l*o,c=l*a-f*i,(h=Math.hypot(s,u,c))?(s*=h=1/h,u*=h,c*=h):(s=0,u=0,c=0),t[0]=i,t[1]=s,t[2]=l,t[3]=0,t[4]=a,t[5]=u,t[6]=f,t[7]=0,t[8]=o,t[9]=c,t[10]=d,t[11]=0,t[12]=-(i*p+a*v+o*g),t[13]=-(s*p+u*v+c*g),t[14]=-(l*p+f*v+d*g),t[15]=1,t)}function Xt(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=r[0],u=r[1],c=r[2],l=i-n[0],f=a-n[1],d=o-n[2],h=l*l+f*f+d*d;h>0&&(l*=h=1/Math.sqrt(h),f*=h,d*=h);var p=u*d-c*f,v=c*l-s*d,g=s*f-u*l;return(h=p*p+v*v+g*g)>0&&(p*=h=1/Math.sqrt(h),v*=h,g*=h),t[0]=p,t[1]=v,t[2]=g,t[3]=0,t[4]=f*g-d*v,t[5]=d*p-l*g,t[6]=l*v-f*p,t[7]=0,t[8]=l,t[9]=f,t[10]=d,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function Kt(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function $t(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Zt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Qt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Jt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function te(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function ee(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function ne(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],d=t[10],h=t[11],p=t[12],v=t[13],g=t[14],y=t[15],m=e[0],b=e[1],x=e[2],w=e[3],k=e[4],E=e[5],O=e[6],S=e[7],M=e[8],T=e[9],A=e[10],P=e[11],N=e[12],C=e[13],_=e[14],L=e[15];return Math.abs(n-m)<=R*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(r-b)<=R*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-x)<=R*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-w)<=R*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-k)<=R*Math.max(1,Math.abs(o),Math.abs(k))&&Math.abs(s-E)<=R*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-O)<=R*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(c-S)<=R*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(l-M)<=R*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(f-T)<=R*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(d-A)<=R*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(h-P)<=R*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(p-N)<=R*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(v-C)<=R*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(g-_)<=R*Math.max(1,Math.abs(g),Math.abs(_))&&Math.abs(y-L)<=R*Math.max(1,Math.abs(y),Math.abs(L))}var re=mt,ie=Qt;function ae(){var t=new j(9);return j!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function oe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function se(t,e,n,r,i,a,o,s,u){var c=new j(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=a,c[6]=o,c[7]=s,c[8]=u,c}function ue(){var t=new j(4);return j!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function ce(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function le(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+o*s+i*c-a*u,t[1]=i*l+o*u+a*s-r*c,t[2]=a*l+o*c+r*u-i*s,t[3]=o*l-r*s-i*u-a*c,t}function fe(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=a*s,t}function de(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var a=Math.sin(e),o=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=a*u*l-o*s*c,t[1]=o*s*l+a*u*c,t[2]=o*u*c-a*s*l,t[3]=o*u*l+a*s*c,t}var he=ot,pe=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},ve=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},ge=le,ye=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=a*o,t};function me(){var t=new j(2);return j!=Float32Array&&(t[0]=0,t[1]=0),t}function be(t,e){return t[0]=e[0],t[1]=e[1],t}function xe(t,e,n){return t[0]=e,t[1]=n,t}function we(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function ke(t,e){return t[0]*e[0]+t[1]*e[1]}function Ee(t,e){return t[0]===e[0]&&t[1]===e[1]}function Oe(t){return"number"==typeof t}function Se(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function Me(t){return null==t}function Te(t){return"string"==typeof t}D(),z(1,0,0),z(0,1,0),ue(),ue(),ae(),me();const Ae=function(t,e,n){return t<e?e:t>n?n:t};var Pe=function(t,e){return Pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Pe(t,e)};function Ne(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Pe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ce=function(){return Ce=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ce.apply(this,arguments)};function _e(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Le(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))}function Re(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function je(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function De(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function Ie(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var Fe={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function ze(t){return Array.isArray(t)&&t.every((function(t){var e=t[0].toLowerCase();return Fe[e]===t.length-1&&"achlmqstvz".includes(e)}))}function Be(t){return ze(t)&&t.every((function(t){var e=t[0];return e===e.toUpperCase()}))}function Ge(t){return Be(t)&&t.every((function(t){var e=t[0];return"ACLMQZ".includes(e)}))}var We={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function Ve(t){for(var e=t.pathValue[t.segmentStart],n=e.toLowerCase(),r=t.data;r.length>=Fe[n]&&("m"===n&&r.length>2?(t.segments.push([e].concat(r.splice(0,2))),n="l",e="m"===e?"l":"L"):t.segments.push([e].concat(r.splice(0,Fe[n]))),Fe[n]););}function He(t){var e=t.index,n=t.pathValue,r=n.charCodeAt(e);return 48===r?(t.param=0,void(t.index+=1)):49===r?(t.param=1,void(t.index+=1)):void(t.err='[path-util]: invalid Arc flag "'.concat(n[e],'", expecting 0 or 1 at index ').concat(e))}function Ye(t){return t>=48&&t<=57}function Ue(t){var e,n=t.max,r=t.pathValue,i=t.index,a=i,o=!1,s=!1,u=!1,c=!1;if(a>=n)t.err="[path-util]: Invalid path value at index ".concat(a,', "pathValue" is missing param');else if(43!==(e=r.charCodeAt(a))&&45!==e||(a+=1,e=r.charCodeAt(a)),Ye(e)||46===e){if(46!==e){if(o=48===e,a+=1,e=r.charCodeAt(a),o&&a<n&&e&&Ye(e))return void(t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(r[i],'" illegal number'));for(;a<n&&Ye(r.charCodeAt(a));)a+=1,s=!0;e=r.charCodeAt(a)}if(46===e){for(c=!0,a+=1;Ye(r.charCodeAt(a));)a+=1,u=!0;e=r.charCodeAt(a)}if(101===e||69===e){if(c&&!s&&!u)return void(t.err="[path-util]: Invalid path value at index ".concat(a,', "').concat(r[a],'" invalid float exponent'));if(a+=1,43!==(e=r.charCodeAt(a))&&45!==e||(a+=1),!(a<n&&Ye(r.charCodeAt(a))))return void(t.err="[path-util]: Invalid path value at index ".concat(a,', "').concat(r[a],'" invalid integer exponent'));for(;a<n&&Ye(r.charCodeAt(a));)a+=1}t.index=a,t.param=+t.pathValue.slice(i,a)}else t.err="[path-util]: Invalid path value at index ".concat(a,', "').concat(r[a],'" is not a number')}function qe(t){return 10===t||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(t)}function Xe(t){for(var e=t.pathValue,n=t.max;t.index<n&&qe(e.charCodeAt(t.index));)t.index+=1}function Ke(t){var e,n=t.max,r=t.pathValue,i=t.index,a=r.charCodeAt(i),o=Fe[r[i].toLowerCase()];if(t.segmentStart=i,function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}(a))if(t.index+=1,Xe(t),t.data=[],o){for(;;){for(var s=o;s>0;s-=1){if(97!=(32|a)||3!==s&&4!==s?Ue(t):He(t),t.err.length)return;t.data.push(t.param),Xe(t),t.index<n&&44===r.charCodeAt(t.index)&&(t.index+=1,Xe(t))}if(t.index>=t.max)break;if(!((e=r.charCodeAt(t.index))>=48&&e<=57||43===e||45===e||46===e))break}Ve(t)}else Ve(t);else t.err='[path-util]: Invalid path value "'.concat(r[i],'" is not a path command')}var $e=function(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""};function Ze(t,e){var n=t[0],r=e.x1,i=e.y1,a=e.x2,o=e.y2,s=t.slice(1).map(Number),u=t;if("TQ".includes(n)||(e.qx=null,e.qy=null),"H"===n)u=["L",t[1],i];else if("V"===n)u=["L",r,t[1]];else if("S"===n){var c=2*r-a,l=2*i-o;e.x1=c,e.y1=l,u=["C",c,l].concat(s)}else if("T"===n){var f=2*r-e.qx,d=2*i-e.qy;e.qx=f,e.qy=d,u=["Q",f,d].concat(s)}else if("Q"===n){var h=s[0],p=s[1];e.qx=h,e.qy=p}return u}function Qe(t){if(Ge(t))return[].concat(t);for(var e=function(t){if(Be(t))return[].concat(t);var e=function(t){if(ze(t))return[].concat(t);var e=new $e(t);for(Xe(e);e.index<e.max&&!e.err.length;)Ke(e);return e.err?e.err:e.segments}(t),n=0,r=0,i=0,a=0;return e.map((function(t){var e,o=t.slice(1).map(Number),s=t[0],u=s.toUpperCase();if("M"===s)return n=o[0],r=o[1],i=n,a=r,["M",n,r];if(s!==u)switch(u){case"A":e=[u,o[0],o[1],o[2],o[3],o[4],o[5]+n,o[6]+r];break;case"V":e=[u,o[0]+r];break;case"H":e=[u,o[0]+n];break;default:var c=o.map((function(t,e){return t+(e%2?r:n)}));e=[u].concat(c)}else e=[u].concat(o);var l=e.length;switch(u){case"Z":n=i,r=a;break;case"H":n=e[1];break;case"V":r=e[1];break;default:n=e[l-2],r=e[l-1],"M"===u&&(i=n,a=r)}return e}))}(t),n=Ce({},We),r=0;r<e.length;r+=1){e[r]=Ze(e[r],n);var i=e[r],a=i.length;n.x1=+i[a-2],n.y1=+i[a-1],n.x2=+i[a-4]||n.x1,n.y2=+i[a-3]||n.y1}return e}function Je(t,e,n){var r=t[0],i=t[1];return[r+(e[0]-r)*n,i+(e[1]-i)*n]}function tn(t,e,n,r,i){var a=Se([t,e],[n,r]),o={x:0,y:0};if("number"==typeof i)if(i<=0)o={x:t,y:e};else if(i>=a)o={x:n,y:r};else{var s=Je([t,e],[n,r],i/a);o={x:s[0],y:s[1]}}return{length:a,point:o,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}}function en(t,e){var n=t.x,r=t.y,i=e.x,a=e.y,o=n*i+r*a,s=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(a,2)));return(n*a-r*i<0?-1:1)*Math.acos(o/s)}function nn(t,e,n,r,i,a,o,s,u,c){var l=Math.abs,f=Math.sin,d=Math.cos,h=Math.sqrt,p=Math.PI,v=l(n),g=l(r),y=(i%360+360)%360*(p/180);if(t===s&&e===u)return{x:t,y:e};if(0===v||0===g)return tn(t,e,s,u,c).point;var m=(t-s)/2,b=(e-u)/2,x={x:d(y)*m+f(y)*b,y:-f(y)*m+d(y)*b},w=Math.pow(x.x,2)/Math.pow(v,2)+Math.pow(x.y,2)/Math.pow(g,2);w>1&&(v*=h(w),g*=h(w));var k=(Math.pow(v,2)*Math.pow(g,2)-Math.pow(v,2)*Math.pow(x.y,2)-Math.pow(g,2)*Math.pow(x.x,2))/(Math.pow(v,2)*Math.pow(x.y,2)+Math.pow(g,2)*Math.pow(x.x,2)),E=(a!==o?1:-1)*h(k=k<0?0:k),O=E*(v*x.y/g),S=E*(-g*x.x/v),M=d(y)*O-f(y)*S+(t+s)/2,T=f(y)*O+d(y)*S+(e+u)/2,A={x:(x.x-O)/v,y:(x.y-S)/g},P=en({x:1,y:0},A),N=en(A,{x:(-x.x-O)/v,y:(-x.y-S)/g});!o&&N>0?N-=2*p:o&&N<0&&(N+=2*p);var C=P+(N%=2*p)*c,_=v*d(C),L=g*f(C);return{x:d(y)*_-f(y)*L+M,y:f(y)*_+d(y)*L+T}}function rn(t,e,n,r,i,a,o,s,u,c,l){var f,d=l.bbox,h=void 0===d||d,p=l.length,v=void 0===p||p,g=l.sampleSize,y=void 0===g?30:g,m="number"==typeof c,b=t,x=e,w=0,k=[b,x,w],E=[b,x],O={x:0,y:0},S=[{x:b,y:x}];m&&c<=0&&(O={x:b,y:x});for(var M=0;M<=y;M+=1){if(b=(f=nn(t,e,n,r,i,a,o,s,u,M/y)).x,x=f.y,h&&S.push({x:b,y:x}),v&&(w+=Se(E,[b,x])),E=[b,x],m&&w>=c&&c>k[2]){var T=(w-c)/(w-k[2]);O={x:E[0]*(1-T)+k[0]*T,y:E[1]*(1-T)+k[1]*T}}k=[b,x,w]}return m&&c>=w&&(O={x:s,y:u}),{length:w,point:O,min:{x:Math.min.apply(null,S.map((function(t){return t.x}))),y:Math.min.apply(null,S.map((function(t){return t.y})))},max:{x:Math.max.apply(null,S.map((function(t){return t.x}))),y:Math.max.apply(null,S.map((function(t){return t.y})))}}}function an(t,e,n,r,i,a,o,s,u){var c=1-u;return{x:Math.pow(c,3)*t+3*Math.pow(c,2)*u*n+3*c*Math.pow(u,2)*i+Math.pow(u,3)*o,y:Math.pow(c,3)*e+3*Math.pow(c,2)*u*r+3*c*Math.pow(u,2)*a+Math.pow(u,3)*s}}function on(t,e,n,r,i,a,o,s,u,c){var l,f=c.bbox,d=void 0===f||f,h=c.length,p=void 0===h||h,v=c.sampleSize,g=void 0===v?10:v,y="number"==typeof u,m=t,b=e,x=0,w=[m,b,x],k=[m,b],E={x:0,y:0},O=[{x:m,y:b}];y&&u<=0&&(E={x:m,y:b});for(var S=0;S<=g;S+=1){if(m=(l=an(t,e,n,r,i,a,o,s,S/g)).x,b=l.y,d&&O.push({x:m,y:b}),p&&(x+=Se(k,[m,b])),k=[m,b],y&&x>=u&&u>w[2]){var M=(x-u)/(x-w[2]);E={x:k[0]*(1-M)+w[0]*M,y:k[1]*(1-M)+w[1]*M}}w=[m,b,x]}return y&&u>=x&&(E={x:o,y:s}),{length:x,point:E,min:{x:Math.min.apply(null,O.map((function(t){return t.x}))),y:Math.min.apply(null,O.map((function(t){return t.y})))},max:{x:Math.max.apply(null,O.map((function(t){return t.x}))),y:Math.max.apply(null,O.map((function(t){return t.y})))}}}function sn(t,e,n,r,i,a,o){var s=1-o;return{x:Math.pow(s,2)*t+2*s*o*n+Math.pow(o,2)*i,y:Math.pow(s,2)*e+2*s*o*r+Math.pow(o,2)*a}}function un(t,e,n,r,i,a,o,s){var u,c=s.bbox,l=void 0===c||c,f=s.length,d=void 0===f||f,h=s.sampleSize,p=void 0===h?10:h,v="number"==typeof o,g=t,y=e,m=0,b=[g,y,m],x=[g,y],w={x:0,y:0},k=[{x:g,y}];v&&o<=0&&(w={x:g,y});for(var E=0;E<=p;E+=1){if(g=(u=sn(t,e,n,r,i,a,E/p)).x,y=u.y,l&&k.push({x:g,y}),d&&(m+=Se(x,[g,y])),x=[g,y],v&&m>=o&&o>b[2]){var O=(m-o)/(m-b[2]);w={x:x[0]*(1-O)+b[0]*O,y:x[1]*(1-O)+b[1]*O}}b=[g,y,m]}return v&&o>=m&&(w={x:i,y:a}),{length:m,point:w,min:{x:Math.min.apply(null,k.map((function(t){return t.x}))),y:Math.min.apply(null,k.map((function(t){return t.y})))},max:{x:Math.max.apply(null,k.map((function(t){return t.x}))),y:Math.max.apply(null,k.map((function(t){return t.y})))}}}function cn(t,e,n){for(var r,i,a,o,s,u,c,l,f,d=Qe(t),h="number"==typeof e,p=[],v=0,g=0,y=0,m=0,b=[],x=[],w=0,k={x:0,y:0},E=k,O=k,S=k,M=0,T=0,A=d.length;T<A;T+=1)p=(c="M"===(l=(f=d[T])[0]))?p:[v,g].concat(f.slice(1)),c?(E=k={x:y=f[1],y:m=f[2]},w=0,h&&e<.001&&(S=k)):"L"===l?(w=(r=tn(p[0],p[1],p[2],p[3],(e||0)-M)).length,k=r.min,E=r.max,O=r.point):"A"===l?(w=(i=rn(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],(e||0)-M,n||{})).length,k=i.min,E=i.max,O=i.point):"C"===l?(w=(a=on(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],(e||0)-M,n||{})).length,k=a.min,E=a.max,O=a.point):"Q"===l?(w=(o=un(p[0],p[1],p[2],p[3],p[4],p[5],(e||0)-M,n||{})).length,k=o.min,E=o.max,O=o.point):"Z"===l&&(w=(s=tn((p=[v,g,y,m])[0],p[1],p[2],p[3],(e||0)-M)).length,k=s.min,E=s.max,O=s.point),h&&M<e&&M+w>=e&&(S=O),x.push(E),b.push(k),M+=w,v=(u="Z"!==l?f.slice(-2):[y,m])[0],g=u[1];return h&&e>=M&&(S={x:v,y:g}),{length:M,point:S,min:{x:Math.min.apply(null,b.map((function(t){return t.x}))),y:Math.min.apply(null,b.map((function(t){return t.y})))},max:{x:Math.max.apply(null,x.map((function(t){return t.x}))),y:Math.max.apply(null,x.map((function(t){return t.y})))}}}function ln(t,e){return cn(t,void 0,Ce(Ce({},e),{bbox:!1,length:!0})).length}function fn(t){return Array.isArray(t)}const dn=function(t){if(fn(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])};function hn(t){if(!Array.isArray(t))return-1/0;var e=t.length;if(!e)return-1/0;for(var n=t[0],r=1;r<e;r++)n=Math.max(n,t[r]);return n}function pn(t,e,n){return void 0===n&&(n=1e-5),t===e||Math.abs(t-e)<n}const vn=function(t,e){return(t%e+e)%e};function gn(t,e,n){if(t[n].length>7){t[n].shift();for(var r=t[n],i=n;r.length;)e[n]="A",t.splice(i+=1,0,["C"].concat(r.splice(0,6)));t.splice(n,1)}}function yn(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}function mn(t,e,n,r,i,a,o,s,u,c){var l,f,d,h,p,v=t,g=e,y=n,m=r,b=s,x=u,w=120*Math.PI/180,k=Math.PI/180*(+i||0),E=[];if(c)f=c[0],d=c[1],h=c[2],p=c[3];else{v=(l=yn(v,g,-k)).x,g=l.y;var O=(v-(b=(l=yn(b,x,-k)).x))/2,S=(g-(x=l.y))/2,M=O*O/(y*y)+S*S/(m*m);M>1&&(y*=M=Math.sqrt(M),m*=M);var T=y*y,A=m*m,P=(a===o?-1:1)*Math.sqrt(Math.abs((T*A-T*S*S-A*O*O)/(T*S*S+A*O*O)));h=P*y*S/m+(v+b)/2,p=P*-m*O/y+(g+x)/2,f=Math.asin(((g-p)/m*Math.pow(10,9)|0)/Math.pow(10,9)),d=Math.asin(((x-p)/m*Math.pow(10,9)|0)/Math.pow(10,9)),f=v<h?Math.PI-f:f,d=b<h?Math.PI-d:d,f<0&&(f=2*Math.PI+f),d<0&&(d=2*Math.PI+d),o&&f>d&&(f-=2*Math.PI),!o&&d>f&&(d-=2*Math.PI)}var N=d-f;if(Math.abs(N)>w){var C=d,_=b,L=x;d=f+w*(o&&d>f?1:-1),E=mn(b=h+y*Math.cos(d),x=p+m*Math.sin(d),y,m,i,0,o,_,L,[d,C,h,p])}N=d-f;var R=Math.cos(f),j=Math.sin(f),D=Math.cos(d),I=Math.sin(d),F=Math.tan(N/4),z=4/3*y*F,B=4/3*m*F,G=[v,g],W=[v+z*j,g-B*R],V=[b+z*I,x-B*D],H=[b,x];if(W[0]=2*G[0]-W[0],W[1]=2*G[1]-W[1],c)return W.concat(V,H,E);for(var Y=[],U=0,q=(E=W.concat(V,H,E)).length;U<q;U+=1)Y[U]=U%2?yn(E[U-1],E[U],k).y:yn(E[U],E[U+1],k).x;return Y}var bn=function(t,e,n,r){return De(De([],Je([t,e],[n,r],.5),!0),[n,r,n,r],!1)};function xn(t,e){var n,r=t[0],i=t.slice(1).map(Number),a=i[0],o=i[1],s=e.x1,u=e.y1,c=e.x,l=e.y;switch("TQ".includes(r)||(e.qx=null,e.qy=null),r){case"M":return e.x=a,e.y=o,t;case"A":return n=[s,u].concat(i),["C"].concat(mn(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]));case"Q":return e.qx=a,e.qy=o,n=[s,u].concat(i),["C"].concat(function(t,e,n,r,i,a){var o=1/3,s=2/3;return[o*t+s*n,o*e+s*r,o*i+s*n,o*a+s*r,i,a]}(n[0],n[1],n[2],n[3],n[4],n[5]));case"L":return["C"].concat(bn(s,u,a,o));case"Z":return s===c&&u===l?["C",s,u,c,l,c,l]:["C"].concat(bn(s,u,c,l))}return t}function wn(t,e){if(void 0===e&&(e=!1),function(t){return Ge(t)&&t.every((function(t){var e=t[0];return"MC".includes(e)}))}(t)){var n=[].concat(t);return e?[n,[]]:n}for(var r,i,a=Qe(t),o=Ce({},We),s=[],u="",c=a.length,l=[],f=0;f<c;f+=1){a[f]&&(u=a[f][0]),s[f]=u;var d=xn(a[f],o);a[f]=d,gn(a,s,f),c=a.length,"Z"===u&&l.push(f),i=(r=a[f]).length,o.x1=+r[i-2],o.y1=+r[i-1],o.x2=+r[i-4]||o.x1,o.y2=+r[i-3]||o.y1}return e?[a,l]:a}function kn(t){return t.map((function(t,e,n){var r=e&&n[e-1].slice(-2).concat(t.slice(1)),i=e?on(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],{bbox:!1}).length:0;return{s:t,ss:e?i?function(t,e){void 0===e&&(e=.5);var n=t.slice(0,2),r=t.slice(2,4),i=t.slice(4,6),a=t.slice(6,8),o=Je(n,r,e),s=Je(r,i,e),u=Je(i,a,e),c=Je(o,s,e),l=Je(s,u,e),f=Je(c,l,e);return[["C"].concat(o,c,f),["C"].concat(l,u,a)]}(r):[t,t]:[t],l:i}}))}function En(t,e,n){var r=kn(t),i=kn(e),a=r.length,o=i.length,s=r.filter((function(t){return t.l})).length,u=i.filter((function(t){return t.l})).length,c=r.filter((function(t){return t.l})).reduce((function(t,e){return t+e.l}),0)/s||0,l=i.filter((function(t){return t.l})).reduce((function(t,e){return t+e.l}),0)/u||0,f=n||Math.max(a,o),d=[c,l],h=[f-a,f-o],p=0,v=[r,i].map((function(t,e){return t.l===f?t.map((function(t){return t.s})):t.map((function(t,n){return p=n&&h[e]&&t.l>=d[e],h[e]-=p?1:0,p?t.ss:[t.s]})).flat()}));return v[0].length===v[1].length?v:En(v[0],v[1],f)}function On(t){return function(t){var e=0,n=0,r=0;return wn(t).map((function(t){var i;if("M"===t[0])return e=t[1],n=t[2],0;var a=t.slice(1),o=a[0],s=a[1],u=a[2],c=a[3],l=a[4],f=a[5];return r=function(t,e,n,r,i,a,o,s){return 3*((s-e)*(n+i)-(o-t)*(r+a)+r*(t-i)-n*(e-a)+s*(i+t/3)-o*(a+e/3))/20}(e,n,o,s,u,c,l,f),i=t.slice(-2),e=i[0],n=i[1],r})).reduce((function(t,e){return t+e}),0)}(t)>=0}function Sn(t){var e=t.slice(1).map((function(e,n,r){return n?r[n-1].slice(-2).concat(e.slice(1)):t[0].slice(1).concat(e.slice(1))})).map((function(t){return t.map((function(e,n){return t[t.length-n-2*(1-n%2)]}))})).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map((function(t){return["C"].concat(t.slice(2))})))}function Mn(t){return t.map((function(t){return Array.isArray(t)?[].concat(t):t}))}function Tn(t,e){var n=t.length-1,r=[],i=0,a=function(t){var e=t.length,n=e-1;return t.map((function(r,i){return t.map((function(r,a){var o,s=i+a;return 0===a||t[s]&&"M"===t[s][0]?(o=t[s],["M"].concat(o.slice(-2))):(s>=e&&(s-=n),t[s])}))}))}(t);return a.forEach((function(a,o){t.slice(1).forEach((function(r,a){i+=Se(t[(o+a)%n].slice(-2),e[a%n].slice(-2))})),r[o]=i,i=0})),a[r.indexOf(Math.min.apply(null,r))]}const An=function(t){return void 0===t};var Pn={}.toString;const Nn=function(t,e){return Pn.call(t)==="[object "+e+"]"},Cn=function(t){return Nn(t,"Boolean")};function _n(t){return"function"==typeof t}const Ln=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};function Rn(t,e,n){return cn(t,e,Ce(Ce({},n),{bbox:!1,length:!0})).point}function jn(){return jn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},jn.apply(null,arguments)}function Dn(t,e,n,r){var i=jn(T(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof i?function(t){return i.apply(n,t)}:i}function In(t,e,n,r){var i=t-n,a=e-r;return Math.sqrt(i*i+a*a)}function Fn(t,e){var n=Math.min.apply(Math,De([],je(t),!1)),r=Math.min.apply(Math,De([],je(e),!1));return{x:n,y:r,width:Math.max.apply(Math,De([],je(t),!1))-n,height:Math.max.apply(Math,De([],je(e),!1))-r}}function zn(t,e,n,r,i,a){return n*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+t}function Bn(t,e,n,r,i,a){return n*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+e}function Gn(t,e,n,r,i,a,o){for(var s=function(t,e,n){return Math.atan(-e/t*Math.tan(n))}(n,r,i),u=1/0,c=-1/0,l=[a,o],f=2*-Math.PI;f<=2*Math.PI;f+=Math.PI){var d=s+f;a<o?a<d&&d<o&&l.push(d):o<d&&d<a&&l.push(d)}for(f=0;f<l.length;f++){var h=zn(t,0,n,r,i,l[f]);h<u&&(u=h),h>c&&(c=h)}var p=function(t,e,n){return Math.atan(e/(t*Math.tan(n)))}(n,r,i),v=1/0,g=-1/0,y=[a,o];for(f=2*-Math.PI;f<=2*Math.PI;f+=Math.PI){var m=p+f;a<o?a<m&&m<o&&y.push(m):o<m&&m<a&&y.push(m)}for(f=0;f<y.length;f++){var b=Bn(0,e,n,r,i,y[f]);b<v&&(v=b),b>g&&(g=b)}return{x:u,y:v,width:c-u,height:g-v}}function Wn(t,e,n,r,i,a){var o=-1,s=1/0,u=[n,r],c=20;a&&a>200&&(c=a/10);for(var l=1/c,f=l/10,d=0;d<=c;d++){var h=d*l,p=[i.apply(void 0,De([],je(t.concat([h])),!1)),i.apply(void 0,De([],je(e.concat([h])),!1))];(m=In(u[0],u[1],p[0],p[1]))<s&&(o=h,s=m)}if(0===o)return{x:t[0],y:e[0]};if(1===o){var v=t.length;return{x:t[v-1],y:e[v-1]}}for(s=1/0,d=0;d<32&&!(f<1e-4);d++){var g=o-f,y=o+f,m=(p=[i.apply(void 0,De([],je(t.concat([g])),!1)),i.apply(void 0,De([],je(e.concat([g])),!1))],In(u[0],u[1],p[0],p[1]));if(g>=0&&m<s)o=g,s=m;else{var b=[i.apply(void 0,De([],je(t.concat([y])),!1)),i.apply(void 0,De([],je(e.concat([y])),!1))],x=In(u[0],u[1],b[0],b[1]);y<=1&&x<s?(o=y,s=x):f*=.5}}return{x:i.apply(void 0,De([],je(t.concat([o])),!1)),y:i.apply(void 0,De([],je(e.concat([o])),!1))}}function Vn(t,e,n,r){return In(t,e,n,r)}function Hn(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}}function Yn(t,e,n,r,i){var a=1-i;return a*a*a*t+3*e*i*a*a+3*n*i*i*a+r*i*i*i}function Un(t,e,n,r){var i,a,o,s=-3*t+9*e-9*n+3*r,u=6*t-12*e+6*n,c=3*e-3*t,l=[];if(pn(s,0))pn(u,0)||(i=-c/u)>=0&&i<=1&&l.push(i);else{var f=u*u-4*s*c;pn(f,0)?l.push(-u/(2*s)):f>0&&(a=(-u-(o=Math.sqrt(f)))/(2*s),(i=(-u+o)/(2*s))>=0&&i<=1&&l.push(i),a>=0&&a<=1&&l.push(a))}return l}function qn(t,e,n,r,i,a,o,s){for(var u=[t,o],c=[e,s],l=Un(t,n,i,o),f=Un(e,r,a,s),d=0;d<l.length;d++)u.push(Yn(t,n,i,o,l[d]));for(d=0;d<f.length;d++)c.push(Yn(e,r,a,s,f[d]));return Fn(u,c)}function Xn(t,e,n,r,i,a,o,s,u,c,l){var f=function(t,e,n,r,i,a,o,s,u,c,l){return Wn([t,n,i,o],[e,r,a,s],u,c,Yn,l)}(t,e,n,r,i,a,o,s,u,c,l);return In(f.x,f.y,u,c)}function Kn(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function $n(t,e,n){var r=t+n-2*e;if(pn(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function Zn(t,e,n,r,i,a){var o=$n(t,n,i)[0],s=$n(e,r,a)[0],u=[t,i],c=[e,a];return void 0!==o&&u.push(Kn(t,n,i,o)),void 0!==s&&c.push(Kn(e,r,a,s)),Fn(u,c)}function Qn(t,e,n,r,i,a,o,s){var u=function(t,e,n,r,i,a,o,s){return Wn([t,n,i],[e,r,a],o,s,Kn)}(t,e,n,r,i,a,o,s);return In(u.x,u.y,o,s)}function Jn(){Jn=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n,r){return Object.defineProperty(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r})}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(e,n,r,i){var a=n&&n.prototype instanceof d?n:d,o=Object.create(a.prototype);return u(o,"_invoke",function(e,n,r){var i=1;return function(a,o){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=k(s,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===i)throw i=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=3;var c=l(e,n,r);if("normal"===c.type){if(i=r.done?4:2,c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=4,r.method="throw",r.arg=c.arg)}}}(e,r,new S(i||[])),!0),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function d(){}function h(){}function p(){}var v={};u(v,a,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(M([])));m&&m!==n&&r.call(m,a)&&(v=m);var b=p.prototype=d.prototype=Object.create(v);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function n(i,a,o,s){var u=l(t[i],t,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==y(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(f).then((function(t){c.value=t,o(c)}),(function(t){return n("throw",t,o,s)}))}s(u.arg)}var i;u(this,"_invoke",(function(t,r){function a(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(a,a):a()}),!0)}function k(e,n){var r=n.method,i=e.i[r];if(i===t)return n.delegate=null,"throw"===r&&e.i.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=l(i,e.i,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,f;var o=a.arg;return o?o.done?(n[e.r]=o.value,n.next=e.n,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function E(t){this.tryEntries.push(t)}function O(e){var n=e[4]||{};n.type="normal",n.arg=t,e[4]=n}function S(t){this.tryEntries=[[-1]],t.forEach(E,this),this.reset(!0)}function M(e){if(null!=e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(y(e)+" is not iterable")}return h.prototype=p,u(b,"constructor",p),u(p,"constructor",h),h.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},x(w.prototype),u(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(b),u(b,s,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}},e.values=M,S.prototype={constructor:S,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(t){o.type="throw",o.arg=e,n.next=t}for(var i=n.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a[4],s=this.prev,u=a[1],c=a[2];if(-1===a[0])return r("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<u)return this.method="next",this.arg=t,r(u),!0;if(s<c)return r(c),!1}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var i=r;break}}i&&("break"===t||"continue"===t)&&i[0]<=e&&e<=i[2]&&(i=null);var a=i?i[4]:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i[2],f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[2]===t)return this.complete(n[4],n[3]),O(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]===t){var r=n[4];if("throw"===r.type){var i=r.arg;O(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={i:M(e),r:n,n:r},"next"===this.method&&(this.arg=t),f}},e}function tr(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function er(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){tr(a,r,i,o,s,"next",t)}function s(t){tr(a,r,i,o,s,"throw",t)}o(void 0)}))}}function nr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=p(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function rr(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==s.g?s.g:"undefined"!=typeof self&&self;var ir={exports:{}};!function(t){t.exports=function(){function t(t,n,i,a,o){e(t,n,i||0,a||t.length-1,o||r)}function e(t,r,i,a,o){for(;a>i;){if(a-i>600){var s=a-i+1,u=r-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1);e(t,r,Math.max(i,Math.floor(r-u*l/s+f)),Math.min(a,Math.floor(r+(s-u)*l/s+f)),o)}var d=t[r],h=i,p=a;for(n(t,i,r),o(t[a],d)>0&&n(t,i,a);h<p;){for(n(t,h,p),h++,p--;o(t[h],d)<0;)h++;for(;o(t[p],d)>0;)p--}0===o(t[i],d)?n(t,i,p):n(t,++p,a),p<=r&&(i=p+1),r<=p&&(a=p-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=v(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var a=e;a<n;a++){var o=t.children[a];u(i,t.leaf?r(o):o)}return i}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function h(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function v(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,r,i,a){for(var o=[n,r];o.length;)if(!((r=o.pop())-(n=o.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,a),o.push(n,s,s,r)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,n=[];if(!p(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var a=0;a<e.children.length;a++){var o=e.children[a],s=e.leaf?r(o):o;p(t,s)&&(e.leaf?n.push(o):h(t,s)?this._all(o,n):i.push(o))}e=i.pop()}return n},i.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],a=e.leaf?this.toBBox(i):i;if(p(t,a)){if(e.leaf||h(t,a))return!0;n.push(i)}}e=n.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=v([]),this},i.prototype.remove=function(t,e){if(!t)return this;for(var n,r,i,o=this.data,s=this.toBBox(t),u=[],c=[];o||u.length;){if(o||(o=u.pop(),r=u[u.length-1],n=c.pop(),i=!0),o.leaf){var l=a(t,o.children,e);if(-1!==l)return o.children.splice(l,1),u.push(o),this._condense(u),this}i||o.leaf||!h(o,s)?r?(n++,o=r.children[n],i=!1):o=null:(u.push(o),c.push(n),n=0,r=o,o=o.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},i.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=v(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=v([])).leaf=!1,i.height=r;var u=Math.ceil(a/s),c=u*Math.ceil(Math.sqrt(s));g(t,e,n,c,this.compareMinX);for(var l=e;l<=n;l+=c){var f=Math.min(l+c-1,n);g(t,l,f,u,this.compareMinY);for(var d=l;d<=f;d+=u){var h=Math.min(d+u-1,f);i.children.push(this._build(t,d,h,r-1))}}return o(i,this.toBBox),i},i.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,a=1/0,o=void 0,s=0;s<e.children.length;s++){var u=e.children[s],c=f(u),l=(d=t,h=u,(Math.max(h.maxX,d.maxX)-Math.min(h.minX,d.minX))*(Math.max(h.maxY,d.maxY)-Math.min(h.minY,d.minY))-c);l<a?(a=l,i=c<i?c:i,o=u):l===a&&c<i&&(i=c,o=u)}e=o||e.children[0]}var d,h;return e},i.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],a=this._chooseSubtree(r,this.data,e,i);for(a.children.push(t),u(a,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},i.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=v(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},i.prototype._splitRoot=function(t,e){this.data=v([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,n){for(var r,i=1/0,a=1/0,o=e;o<=n-e;o++){var u=s(t,0,o,this.toBBox),c=s(t,o,n,this.toBBox),l=(h=u,p=c,v=void 0,g=void 0,y=void 0,m=void 0,v=Math.max(h.minX,p.minX),g=Math.max(h.minY,p.minY),y=Math.min(h.maxX,p.maxX),m=Math.min(h.maxY,p.maxY),Math.max(0,y-v)*Math.max(0,m-g)),d=f(u)+f(c);l<i?(i=l,r=o,a=d<a?d:a):l===i&&d<a&&(a=d,r=o)}var h,p,v,g,y,m;return r||n-e},i.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:c,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},i.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,a=s(t,0,e,i),o=s(t,n-e,n,i),c=d(a)+d(o),l=e;l<n-e;l++){var f=t.children[l];u(a,t.leaf?i(f):f),c+=d(a)}for(var h=n-e-1;h>=e;h--){var p=t.children[h];u(o,t.leaf?i(p):p),c+=d(o)}return c},i.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)u(e[r],t)},i.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},i}()}(ir);var ar=ir.exports,or=function(t){return t.GROUP="g",t.FRAGMENT="fragment",t.CIRCLE="circle",t.ELLIPSE="ellipse",t.IMAGE="image",t.RECT="rect",t.LINE="line",t.POLYLINE="polyline",t.POLYGON="polygon",t.TEXT="text",t.PATH="path",t.HTML="html",t.MESH="mesh",t}({}),sr=function(t){return t[t.ZERO=0]="ZERO",t[t.NEGATIVE_ONE=1]="NEGATIVE_ONE",t}({}),ur=function(){return O((function t(){k(this,t),this.plugins=[]}),[{key:"addRenderingPlugin",value:function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)}},{key:"removeAllRenderingPlugins",value:function(){var t=this;this.plugins.forEach((function(e){var n=t.context.renderingPlugins.indexOf(e);n>=0&&t.context.renderingPlugins.splice(n,1)}))}}])}(),cr=function(){return O((function t(e){k(this,t),this.clipSpaceNearZ=sr.NEGATIVE_ONE,this.plugins=[],this.config=w({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},e)}),[{key:"registerPlugin",value:function(t){var e=this.plugins.findIndex((function(e){return e===t}));-1===e&&this.plugins.push(t)}},{key:"unregisterPlugin",value:function(t){var e=this.plugins.findIndex((function(e){return e===t}));e>-1&&this.plugins.splice(e,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(t){return this.plugins.find((function(e){return e.name===t}))}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(t){Object.assign(this.config,t)}}])}(),lr=W,fr=B,dr=U,hr=Y,pr=q,vr=nt,gr=function(){function t(){k(this,t),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return O(t,[{key:"update",value:function(t,e){fr(this.center,t),fr(this.halfExtents,e),vr(this.min,this.center,this.halfExtents),lr(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,e){lr(this.center,e,t),pr(this.center,this.center,.5),vr(this.halfExtents,e,t),pr(this.halfExtents,this.halfExtents,.5),fr(this.min,t),fr(this.max,e)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(e){if(!t.isEmpty(e))if(t.isEmpty(this))this.setMinMax(e.getMin(),e.getMax());else{var n=this.center,r=n[0],i=n[1],a=n[2],o=this.halfExtents,s=o[0],u=o[1],c=o[2],l=r-s,f=r+s,d=i-u,h=i+u,p=a-c,v=a+c,g=e.center,y=g[0],m=g[1],b=g[2],x=e.halfExtents,w=x[0],k=x[1],E=x[2],O=y-w,S=y+w,M=m-k,T=m+k,A=b-E,P=b+E;O<l&&(l=O),S>f&&(f=S),M<d&&(d=M),T>h&&(h=T),A<p&&(p=A),P>v&&(v=P),n[0]=.5*(l+f),n[1]=.5*(d+h),n[2]=.5*(p+v),o[0]=.5*(f-l),o[1]=.5*(h-d),o[2]=.5*(v-p),this.min[0]=l,this.min[1]=d,this.min[2]=p,this.max[0]=f,this.max[1]=h,this.max[2]=v}}},{key:"setFromTransformedAABB",value:function(t,e){var n=this.center,r=this.halfExtents,i=t.center,a=t.halfExtents,o=e[0],s=e[4],u=e[8],c=e[1],l=e[5],f=e[9],d=e[2],h=e[6],p=e[10],v=Math.abs(o),g=Math.abs(s),y=Math.abs(u),m=Math.abs(c),b=Math.abs(l),x=Math.abs(f),w=Math.abs(d),k=Math.abs(h),E=Math.abs(p);n[0]=e[12]+o*i[0]+s*i[1]+u*i[2],n[1]=e[13]+c*i[0]+l*i[1]+f*i[2],n[2]=e[14]+d*i[0]+h*i[1]+p*i[2],r[0]=v*a[0]+g*a[1]+y*a[2],r[1]=m*a[0]+b*a[1]+x*a[2],r[2]=w*a[0]+k*a[1]+E*a[2],vr(this.min,n,r),lr(this.max,n,r)}},{key:"intersects",value:function(t){var e=this.getMax(),n=this.getMin(),r=t.getMax(),i=t.getMin();return n[0]<=r[0]&&e[0]>=i[0]&&n[1]<=r[1]&&e[1]>=i[1]&&n[2]<=r[2]&&e[2]>=i[2]}},{key:"intersection",value:function(e){if(!this.intersects(e))return null;var n=new t,r=dr([0,0,0],this.getMin(),e.getMin()),i=hr([0,0,0],this.getMax(),e.getMax());return n.setMinMax(r,i),n}},{key:"getNegativeFarPoint",value:function(t){return 273===t.pnVertexFlag?fr([0,0,0],this.min):272===t.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:257===t.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:256===t.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:17===t.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:16===t.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:1===t.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(t){return 273===t.pnVertexFlag?fr([0,0,0],this.max):272===t.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:257===t.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:256===t.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:17===t.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:16===t.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:1===t.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(t){return!t||0===t.halfExtents[0]&&0===t.halfExtents[1]&&0===t.halfExtents[2]}}])}(),yr=function(){return O((function t(e,n){k(this,t),this.distance=e||0,this.normal=n||z(0,1,0),this.updatePNVertexFlag()}),[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return K(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/it(this.normal);q(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,e,n){var r=this.distanceToPoint(t),i=r/(r-this.distanceToPoint(e)),a=i>=0&&i<=1;return a&&n&&Z(n,t,e,i),a}}])}(),mr=function(t){return t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE",t}({}),br=function(){return O((function t(e){if(k(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new yr)}),[{key:"extractFromVPMatrix",value:function(t){var e=g(t,16),n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],p=e[12],v=e[13],y=e[14],m=e[15];G(this.planes[0].normal,a-n,c-o,h-l),this.planes[0].distance=m-p,G(this.planes[1].normal,a+n,c+o,h+l),this.planes[1].distance=m+p,G(this.planes[2].normal,a+r,c+s,h+f),this.planes[2].distance=m+v,G(this.planes[3].normal,a-r,c-s,h-f),this.planes[3].distance=m-v,G(this.planes[4].normal,a-i,c-u,h-d),this.planes[4].distance=m-y,G(this.planes[5].normal,a+i,c+u,h+d),this.planes[5].distance=m+y,this.planes.forEach((function(t){t.normalize(),t.updatePNVertexFlag()}))}}])}(),xr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;k(this,t),this.x=0,this.y=0,this.x=e,this.y=n}return O(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y}}])}(),wr=function(){function t(e,n,r,i){k(this,t),this.x=e,this.y=n,this.width=r,this.height=i,this.left=e,this.right=e+r,this.top=n,this.bottom=n+i}return O(t,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(e){return new t(e.x,e.y,e.width,e.height)}},{key:"applyTransform",value:function(e,n){var r=ot(e.x,e.y,0,1),i=ot(e.x+e.width,e.y,0,1),a=ot(e.x,e.y+e.height,0,1),o=ot(e.x+e.width,e.y+e.height,0,1),s=at(),u=at(),c=at(),l=at();st(s,r,n),st(u,i,n),st(c,a,n),st(l,o,n);var f=Math.min(s[0],u[0],c[0],l[0]),d=Math.min(s[1],u[1],c[1],l[1]),h=Math.max(s[0],u[0],c[0],l[0]),p=Math.max(s[1],u[1],c[1],l[1]);return t.fromRect({x:f,y:d,width:h-f,height:p-d})}}])}(),kr="Method not implemented.",Er="Use document.documentElement instead.";function Or(t){return void 0===t?0:t>360||t<-360?t%360:t}var Sr=D();function Mr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Array.isArray(t)&&3===t.length?r?I(t):B(Sr,t):Oe(t)?r?z(t,e,n):G(Sr,t,e,n):r?z(t[0],t[1]||e,t[2]||n):G(Sr,t[0],t[1]||e,t[2]||n)}var Tr=Math.PI/180;function Ar(t){return t*Tr}var Pr=180/Math.PI;function Nr(t){return t*Pr}var Cr=Math.PI/2;function _r(t,e){return 16===e.length?function(t,e){var n,r,i=g(Rt(D(),e),3),a=i[0],o=i[1],s=i[2],u=Math.asin(-e[2]/a);return u<Cr?u>-Cr?(n=Math.atan2(e[6]/o,e[10]/s),r=Math.atan2(e[1]/a,e[0]/a)):(r=0,n=-Math.atan2(e[4]/o,e[5]/o)):(r=0,n=Math.atan2(e[4]/o,e[5]/o)),t[0]=n,t[1]=u,t[2]=r,t}(t,e):function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=r*r,s=i*i,u=a*a,c=n*n+o+s+u,l=n*a-r*i;return l>.499995*c?(t[0]=Cr,t[1]=2*Math.atan2(r,n),t[2]=0):l<-.499995*c?(t[0]=-Cr,t[1]=2*Math.atan2(r,n),t[2]=0):(t[0]=Math.asin(2*(n*i-a*r)),t[1]=Math.atan2(2*(n*a+r*i),1-2*(s+u)),t[2]=Math.atan2(2*(n*r+i*a),1-2*(o+s))),t}(t,e)}function Lr(t){var e=t[0],n=t[1],r=t[3],i=t[4],a=Math.sqrt(e*e+n*n),o=Math.sqrt(r*r+i*i);if(e*i-n*r<0&&(e<i?a=-a:o=-o),a){var s=1/a;e*=s,n*=s}if(o){var u=1/o;r*=u,i*=u}var c=Nr(Math.atan2(n,e));return[t[6],t[7],a,o,c]}var Rr=ut(),jr=ut(),Dr=at(),Ir=[D(),D(),D()],Fr=D();function zr(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}var Br=function(t){return t[t.ORBITING=0]="ORBITING",t[t.EXPLORING=1]="EXPLORING",t[t.TRACKING=2]="TRACKING",t}({}),Gr=function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.ROTATIONAL=1]="ROTATIONAL",t[t.TRANSLATIONAL=2]="TRANSLATIONAL",t[t.CINEMATIC=3]="CINEMATIC",t}({}),Wr=function(t){return t[t.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",t[t.PERSPECTIVE=1]="PERSPECTIVE",t}({}),Vr="updated",Hr=2e-4,Yr=function(){return O((function t(){k(this,t),this.clipSpaceNearZ=sr.NEGATIVE_ONE,this.eventEmitter=new L,this.matrix=ut(),this.right=z(1,0,0),this.up=z(0,1,0),this.forward=z(0,0,1),this.position=z(0,0,1),this.focalPoint=z(0,0,0),this.distanceVector=z(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=ut(),this.projectionMatrixInverse=ut(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=Br.EXPLORING,this.trackingMode=Gr.DEFAULT,this.projectionMode=Wr.PERSPECTIVE,this.frustum=new br,this.orthoMatrix=ut()}),[{key:"isOrtho",value:function(){return this.projectionMode===Wr.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(t){this.enableUpdate=t}},{key:"setType",value:function(t,e){return this.type=t,this.type===Br.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Br.TRACKING&&void 0!==e&&this.setTrackingMode(e),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==Br.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){return this.rotateWorld=t,this._getAngles(),this}},{key:"getViewTransform",value:function(){return vt(ut(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(t,e){var n=St(ut(),[t,e,0]);this.jitteredProjectionMatrix=mt(ut(),n,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setProjectionMatrix",value:function(t){this.projectionMatrix=t}},{key:"setFov",value:function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setNear",value:function(t){return this.projectionMode===Wr.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this}},{key:"setFar",value:function(t){return this.projectionMode===Wr.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this}},{key:"setViewOffset",value:function(t,e,n,r,i,a){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.projectionMode===Wr.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===Wr.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(t){return this.zoom=t,this.projectionMode===Wr.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===Wr.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(t,e){var n=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),r=n.x,i=n.y,a=this.roll;this.rotate(0,0,-a),this.setPosition(r,i),this.setFocalPoint(r,i),this.setZoom(t),this.rotate(0,0,a);var o=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),s=z(o.x-r,o.y-i,0),u=K(s,this.right)/F(this.right),c=K(s,this.up)/F(this.up),l=g(this.getPosition(),2),f=l[0],d=l[1],h=g(this.getFocalPoint(),2),p=h[0],v=h[1];return this.setPosition(f-u,d-c),this.setFocalPoint(p-u,v-c),this}},{key:"setPerspective",value:function(t,e,n,r){var i;this.projectionMode=Wr.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=r;var a=this.near*Math.tan(Ar(.5*this.fov))/this.zoom,o=2*a,s=this.aspect*o,u=-.5*s;if(null!==(i=this.view)&&void 0!==i&&i.enabled){var c=this.view.fullWidth,l=this.view.fullHeight;u+=this.view.offsetX*s/c,a-=this.view.offsetY*o/l,s*=this.view.width/c,o*=this.view.height/l}return function(t,e,n,r,i,a,o){var s,u,c=2*a,l=n-e,f=r-i,d=c/l,h=c/f,p=(n+e)/l,v=(r+i)/f,g=o-a,y=o*a;arguments.length>7&&void 0!==arguments[7]&&arguments[7]?(s=-o/g,u=-y/g):(s=-(o+a)/g,u=-2*y/g),t[0]=d,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=p,t[9]=v,t[10]=s,t[11]=-1,t[12]=0,t[13]=0,t[14]=u,t[15]=0}(this.projectionMatrix,u,u+s,a-o,a,t,this.far,this.clipSpaceNearZ===sr.ZERO),vt(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(t,e,n,r,i,a){var o;this.projectionMode=Wr.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=r,this.near=i,this.far=a;var s=(this.rright-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,l=(this.top+this.bottom)/2,f=c-s,d=c+s,h=l+u,p=l-u;if(null!==(o=this.view)&&void 0!==o&&o.enabled){var v=(this.rright-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d=(f+=v*this.view.offsetX)+v*this.view.width,p=(h-=g*this.view.offsetY)-g*this.view.height}return this.clipSpaceNearZ===sr.NEGATIVE_ONE?Yt(this.projectionMatrix,f,d,h,p,i,a):Ut(this.projectionMatrix,f,d,h,p,i,a),vt(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(t){var e=Mr(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.position[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.position[2]);return this._setPosition(e),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.focalPoint[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.focalPoint[2],r=z(0,1,0);if(this.focalPoint=Mr(t,e,n),this.trackingMode===Gr.CINEMATIC){var i=V(D(),this.focalPoint,this.position);t=i[0],e=i[1],n=i[2];var a=F(i),o=Nr(Math.asin(e/a)),s=90+Nr(Math.atan2(n,t)),u=ut();Et(u,u,Ar(s)),kt(u,u,Ar(o)),r=Q(D(),[0,1,0],u)}return vt(this.matrix,qt(ut(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<Hr&&(this.distance=Hr),this.dollyingStep=this.distance/100;var e=D();t=this.distance;var n=this.forward,r=this.focalPoint;return e[0]=t*n[0]+r[0],e[1]=t*n[1]+r[1],e[2]=t*n[2]+r[2],this._setPosition(e),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(t){return this.maxDistance=t,this}},{key:"setMinDistance",value:function(t){return this.minDistance=t,this}},{key:"setAzimuth",value:function(t){return this.azimuth=Or(t),this.computeMatrix(),this._getAxes(),this.type===Br.ORBITING||this.type===Br.EXPLORING?this._getPosition():this.type===Br.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=Or(t),this.computeMatrix(),this._getAxes(),this.type===Br.ORBITING||this.type===Br.EXPLORING?this._getPosition():this.type===Br.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(t){return this.roll=Or(t),this.computeMatrix(),this._getAxes(),this.type===Br.ORBITING||this.type===Br.EXPLORING?this._getPosition():this.type===Br.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var t=ce(ue(),[0,0,1],Ar(this.roll));ht(this.matrix);var e=ce(ue(),[1,0,0],Ar((this.rotateWorld&&this.type!==Br.TRACKING||this.type===Br.TRACKING?1:-1)*this.elevation)),n=ce(ue(),[0,1,0],Ar((this.rotateWorld&&this.type!==Br.TRACKING||this.type===Br.TRACKING?1:-1)*this.azimuth)),r=le(ue(),n,e);r=le(ue(),r,t);var i=Ft(ut(),r);this.type===Br.ORBITING||this.type===Br.EXPLORING?(bt(this.matrix,this.matrix,this.focalPoint),mt(this.matrix,this.matrix,i),bt(this.matrix,this.matrix,[0,0,this.distance])):this.type===Br.TRACKING&&(bt(this.matrix,this.matrix,this.position),mt(this.matrix,this.matrix,i))}},{key:"_setPosition",value:function(t,e,n){this.position=Mr(t,e,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){B(this.right,Mr(st(at(),[1,0,0,0],this.matrix))),B(this.up,Mr(st(at(),[0,1,0,0],this.matrix))),B(this.forward,Mr(st(at(),[0,0,1,0],this.matrix))),X(this.right,this.right),X(this.up,this.up),X(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],r=F(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===Br.TRACKING||this.rotateWorld?(this.elevation=Nr(Math.asin(e/r)),this.azimuth=Nr(Math.atan2(-t,-n))):(this.elevation=-Nr(Math.asin(e/r)),this.azimuth=-Nr(Math.atan2(-t,-n)))}},{key:"_getPosition",value:function(){B(this.position,Mr(st(at(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){J(this.distanceVector,[0,0,-this.distance],oe(ae(),this.matrix)),W(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=V(D(),this.focalPoint,this.position),this.distance=F(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===Wr.ORTHOGRAPHIC){var t=this.position,e=ce(ue(),[0,0,1],-this.roll*Math.PI/180);It(this.orthoMatrix,e,z((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),z(this.zoom,this.zoom,1),t)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var t=this.getViewTransform(),e=mt(ut(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(e),this.eventEmitter.emit(Vr)}}},{key:"rotate",value:function(t,e,n){throw new Error(kr)}},{key:"pan",value:function(t,e){throw new Error(kr)}},{key:"dolly",value:function(t){throw new Error(kr)}},{key:"createLandmark",value:function(t,e){throw new Error(kr)}},{key:"gotoLandmark",value:function(t,e){throw new Error(kr)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(kr)}}])}(),Ur=function(t){return t[t.Standard=0]="Standard",t}({}),qr=function(t){return t[t.ADDED=0]="ADDED",t[t.REMOVED=1]="REMOVED",t[t.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",t}({}),Xr={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new wr(0,0,0,0)},Kr=function(t){return t.COORDINATE="<coordinate>",t.COLOR="<color>",t.PAINT="<paint>",t.NUMBER="<number>",t.ANGLE="<angle>",t.OPACITY_VALUE="<opacity-value>",t.SHADOW_BLUR="<shadow-blur>",t.LENGTH="<length>",t.PERCENTAGE="<percentage>",t.LENGTH_PERCENTAGE="<length> | <percentage>",t.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",t.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",t.LIST_OF_POINTS="<list-of-points>",t.PATH="<path>",t.FILTER="<filter>",t.Z_INDEX="<z-index>",t.OFFSET_DISTANCE="<offset-distance>",t.DEFINED_PATH="<defined-path>",t.MARKER="<marker>",t.TRANSFORM="<transform>",t.TRANSFORM_ORIGIN="<transform-origin>",t.TEXT="<text>",t.TEXT_TRANSFORM="<text-transform>",t}({});function $r(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Zr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Qr(){}var Jr=.7,ti=1/Jr,ei="\\s*([+-]?\\d+)\\s*",ni="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ii=/^#([0-9a-f]{3,8})$/,ai=new RegExp("^rgb\\(".concat(ei,",").concat(ei,",").concat(ei,"\\)$")),oi=new RegExp("^rgb\\(".concat(ri,",").concat(ri,",").concat(ri,"\\)$")),si=new RegExp("^rgba\\(".concat(ei,",").concat(ei,",").concat(ei,",").concat(ni,"\\)$")),ui=new RegExp("^rgba\\(".concat(ri,",").concat(ri,",").concat(ri,",").concat(ni,"\\)$")),ci=new RegExp("^hsl\\(".concat(ni,",").concat(ri,",").concat(ri,"\\)$")),li=new RegExp("^hsla\\(".concat(ni,",").concat(ri,",").concat(ri,",").concat(ni,"\\)$")),fi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function di(){return this.rgb().formatHex()}function hi(){return this.rgb().formatRgb()}function pi(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ii.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?vi(e):3===n?new yi(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ai.exec(t))?new yi(e[1],e[2],e[3],1):(e=oi.exec(t))?new yi(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=si.exec(t))?gi(e[1],e[2],e[3],e[4]):(e=ui.exec(t))?gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ci.exec(t))?Ei(e[1],e[2]/100,e[3]/100,1):(e=li.exec(t))?Ei(e[1],e[2]/100,e[3]/100,e[4]):fi.hasOwnProperty(t)?vi(fi[t]):"transparent"===t?new yi(NaN,NaN,NaN,0):null}function vi(t){return new yi(t>>16&255,t>>8&255,255&t,1)}function gi(t,e,n,r){return r<=0&&(t=e=n=NaN),new yi(t,e,n,r)}function yi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function mi(){return"#".concat(ki(this.r)).concat(ki(this.g)).concat(ki(this.b))}function bi(){var t=xi(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(wi(this.r),", ").concat(wi(this.g),", ").concat(wi(this.b)).concat(1===t?")":", ".concat(t,")"))}function xi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function wi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ki(t){return((t=wi(t))<16?"0":"")+t.toString(16)}function Ei(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Si(t,e,n,r)}function Oi(t){if(t instanceof Si)return new Si(t.h,t.s,t.l,t.opacity);if(t instanceof Qr||(t=pi(t)),!t)return new Si;if(t instanceof Si)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Si(o,s,u,t.opacity)}function Si(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Mi(t){return(t=(t||0)%360)<0?t+360:t}function Ti(t){return Math.max(0,Math.min(1,t||0))}function Ai(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Pi(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=e?e.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var u=t.apply(this,i);return n.cache=s.set(o,u)||s,u};return n.cache=new(Pi.Cache||Map),Pi.cacheList.push(n.cache),n}$r(Qr,pi,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:di,formatHex:di,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Oi(this).formatHsl()},formatRgb:hi,toString:hi}),$r(yi,(function(t,e,n,r){return 1===arguments.length?((i=t)instanceof Qr||(i=pi(i)),i?new yi((i=i.rgb()).r,i.g,i.b,i.opacity):new yi):new yi(t,e,n,null==r?1:r);var i}),Zr(Qr,{brighter:function(t){return t=null==t?ti:Math.pow(ti,t),new yi(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Jr:Math.pow(Jr,t),new yi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new yi(wi(this.r),wi(this.g),wi(this.b),xi(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mi,formatHex:mi,formatHex8:function(){return"#".concat(ki(this.r)).concat(ki(this.g)).concat(ki(this.b)).concat(ki(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:bi,toString:bi})),$r(Si,(function(t,e,n,r){return 1===arguments.length?Oi(t):new Si(t,e,n,null==r?1:r)}),Zr(Qr,{brighter:function(t){return t=null==t?ti:Math.pow(ti,t),new Si(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Jr:Math.pow(Jr,t),new Si(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new yi(Ai(t>=240?t-240:t+120,i,r),Ai(t,i,r),Ai(t<120?t+240:t-120,i,r),this.opacity)},clamp:function(){return new Si(Mi(this.h),Ti(this.s),Ti(this.l),xi(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=xi(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(Mi(this.h),", ").concat(100*Ti(this.s),"%, ").concat(100*Ti(this.l),"%").concat(1===t?")":", ".concat(t,")"))}})),Pi.Cache=Map,Pi.cacheList=[],Pi.clearCache=function(){Pi.cacheList.forEach((function(t){return t.clear()}))};var Ni=function(t){return t[t.kUnknown=0]="kUnknown",t[t.kNumber=1]="kNumber",t[t.kPercentage=2]="kPercentage",t[t.kEms=3]="kEms",t[t.kPixels=4]="kPixels",t[t.kRems=5]="kRems",t[t.kDegrees=6]="kDegrees",t[t.kRadians=7]="kRadians",t[t.kGradians=8]="kGradians",t[t.kTurns=9]="kTurns",t[t.kMilliseconds=10]="kMilliseconds",t[t.kSeconds=11]="kSeconds",t[t.kInteger=12]="kInteger",t}({}),Ci=function(t){return t[t.kUNumber=0]="kUNumber",t[t.kUPercent=1]="kUPercent",t[t.kULength=2]="kULength",t[t.kUAngle=3]="kUAngle",t[t.kUTime=4]="kUTime",t[t.kUOther=5]="kUOther",t}({}),_i=function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t}({}),Li=function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t}({}),Ri=[{name:"em",unit_type:Ni.kEms},{name:"px",unit_type:Ni.kPixels},{name:"deg",unit_type:Ni.kDegrees},{name:"rad",unit_type:Ni.kRadians},{name:"grad",unit_type:Ni.kGradians},{name:"ms",unit_type:Ni.kMilliseconds},{name:"s",unit_type:Ni.kSeconds},{name:"rem",unit_type:Ni.kRems},{name:"turn",unit_type:Ni.kTurns}],ji=function(t){return t[t.kUnknownType=0]="kUnknownType",t[t.kUnparsedType=1]="kUnparsedType",t[t.kKeywordType=2]="kKeywordType",t[t.kUnitType=3]="kUnitType",t[t.kSumType=4]="kSumType",t[t.kProductType=5]="kProductType",t[t.kNegateType=6]="kNegateType",t[t.kInvertType=7]="kInvertType",t[t.kMinType=8]="kMinType",t[t.kMaxType=9]="kMaxType",t[t.kClampType=10]="kClampType",t[t.kTransformType=11]="kTransformType",t[t.kPositionType=12]="kPositionType",t[t.kURLImageType=13]="kURLImageType",t[t.kColorType=14]="kColorType",t[t.kUnsupportedColorType=15]="kUnsupportedColorType",t}({}),Di=function(t){var e=1;switch(t){case Ni.kPixels:case Ni.kDegrees:case Ni.kSeconds:break;case Ni.kMilliseconds:e=.001;break;case Ni.kRadians:e=180/Math.PI;break;case Ni.kGradians:e=.9;break;case Ni.kTurns:e=360}return e},Ii=function(t){switch(t){case Ni.kNumber:case Ni.kInteger:return"";case Ni.kPercentage:return"%";case Ni.kEms:return"em";case Ni.kRems:return"rem";case Ni.kPixels:return"px";case Ni.kDegrees:return"deg";case Ni.kRadians:return"rad";case Ni.kGradians:return"grad";case Ni.kMilliseconds:return"ms";case Ni.kSeconds:return"s";case Ni.kTurns:return"turn"}return""},Fi=function(){return O((function t(){k(this,t)}),[{key:"toString",value:function(){return this.buildCSSText(_i.kNo,Li.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=ji.kUnitType&&this.getType()<=ji.kClampType}}],[{key:"isAngle",value:function(t){return t===Ni.kDegrees||t===Ni.kRadians||t===Ni.kGradians||t===Ni.kTurns}},{key:"isLength",value:function(t){return t>=Ni.kEms&&t<Ni.kDegrees}},{key:"isRelativeUnit",value:function(t){return t===Ni.kPercentage||t===Ni.kEms||t===Ni.kRems}},{key:"isTime",value:function(t){return t===Ni.kSeconds||t===Ni.kMilliseconds}}])}(),zi=function(t){function e(t){var n;return k(this,e),(n=N(this,e)).colorSpace=t,n}return _(e,t),O(e,[{key:"getType",value:function(){return ji.kColorType}},{key:"to",value:function(t){return this}}])}(Fi),Bi=function(t){return t[t.Constant=0]="Constant",t[t.LinearGradient=1]="LinearGradient",t[t.RadialGradient=2]="RadialGradient",t}({}),Gi=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e)).type=t,r.value=n,r}return _(e,t),O(e,[{key:"clone",value:function(){return new e(this.type,this.value)}},{key:"buildCSSText",value:function(t,e,n){return n}},{key:"getType",value:function(){return ji.kColorType}}])}(Fi),Wi=function(t){function e(t){var n;return k(this,e),(n=N(this,e)).value=t,n}return _(e,t),O(e,[{key:"clone",value:function(){return new e(this.value)}},{key:"getType",value:function(){return ji.kKeywordType}},{key:"buildCSSText",value:function(t,e,n){return n+this.value}}])}(Fi),Vi=function(t){return function(t){switch(t){case Ci.kUNumber:return Ni.kNumber;case Ci.kULength:return Ni.kPixels;case Ci.kUPercent:return Ni.kPercentage;case Ci.kUTime:return Ni.kSeconds;case Ci.kUAngle:return Ni.kDegrees;default:return Ni.kUnknown}}(function(t){switch(t){case Ni.kNumber:case Ni.kInteger:return Ci.kUNumber;case Ni.kPercentage:return Ci.kUPercent;case Ni.kPixels:return Ci.kULength;case Ni.kMilliseconds:case Ni.kSeconds:return Ci.kUTime;case Ni.kDegrees:case Ni.kRadians:case Ni.kGradians:case Ni.kTurns:return Ci.kUAngle;default:return Ci.kUOther}}(t))},Hi=function(t){function e(t){var n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ni.kNumber;return k(this,e),n=N(this,e),r="string"==typeof a?(i=a)?"number"===i?Ni.kNumber:"percent"===i||"%"===i?Ni.kPercentage:function(t){return Ri.find((function(e){return e.name===t})).unit_type}(i):Ni.kUnknown:a,n.unit=r,n.value=t,n}return _(e,t),O(e,[{key:"clone",value:function(){return new e(this.value,this.unit)}},{key:"equals",value:function(t){var e=t;return this.value===e.value&&this.unit===e.unit}},{key:"getType",value:function(){return ji.kUnitType}},{key:"convertTo",value:function(t){if(this.unit===t)return new e(this.value,this.unit);var n=Vi(this.unit);if(n!==Vi(t)||n===Ni.kUnknown)return null;var r=Di(this.unit)/Di(t);return new e(this.value*r,t)}},{key:"buildCSSText",value:function(t,e,n){var r;switch(this.unit){case Ni.kUnknown:break;case Ni.kInteger:r=Number(this.value).toFixed(0);break;case Ni.kNumber:case Ni.kPercentage:case Ni.kEms:case Ni.kRems:case Ni.kPixels:case Ni.kDegrees:case Ni.kRadians:case Ni.kGradians:case Ni.kMilliseconds:case Ni.kSeconds:case Ni.kTurns:var i=this.value,a=Ii(this.unit);if(i<-999999||i>999999){var o=Ii(this.unit);r=!Number.isFinite(i)||Number.isNaN(i)?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(Number.isFinite(t)?"NaN":t>0?"infinity":"-infinity")+e}(i,o):i+(o||"")}else r="".concat(i).concat(a)}return n+r}}])}(Fi),Yi=new Hi(0,"px");new Hi(1,"px");var Ui=new Hi(0,"deg"),qi=function(t){function e(t,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return k(this,e),(i=N(this,e,["rgb"])).r=t,i.g=n,i.b=r,i.alpha=a,i.isNone=o,i}return _(e,t),O(e,[{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(t,e,n){return"".concat(n,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])}(zi),Xi=new Wi("unset"),Ki={"":Xi,unset:Xi,initial:new Wi("initial"),inherit:new Wi("inherit")},$i=new qi(0,0,0,0,!0),Zi=new qi(0,0,0,0),Qi=Pi((function(t,e,n,r){return new qi(t,e,n,r)}),(function(t,e,n,r){return"rgba(".concat(t,",").concat(e,",").concat(n,",").concat(r,")")})),Ji=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ni.kNumber;return new Hi(t,e)};function ta(t){var e=t.type,n=t.value;return"hex"===e?"#".concat(n):"literal"===e?n:"rgb"===e?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}new Hi(50,"%");var ea=function(){var t=/^(linear\-gradient)/i,e=/^(repeating\-linear\-gradient)/i,n=/^(radial\-gradient)/i,r=/^(repeating\-radial\-gradient)/i,i=/^(conic\-gradient)/i,a=/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,o=/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,s=/^(left|center|right|top|bottom)/i,u=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,c=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,l=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,f=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,d=/^\(/,h=/^\)/,p=/^,/,v=/^\#([0-9a-fA-F]+)/,g=/^([a-zA-Z]+)/,y=/^rgb/i,m=/^rgba/i,b=/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/,x="";function w(t){throw new Error("".concat(x,": ").concat(t))}function k(){return E("linear-gradient",t,S)||E("repeating-linear-gradient",e,S)||E("radial-gradient",n,M)||E("repeating-radial-gradient",r,M)||E("conic-gradient",i,M)}function E(t,e,n){return O(e,(function(e){var r=n();return r&&(I(p)||w("Missing comma before color stops")),{type:t,orientation:r,colorStops:C(_)}}))}function O(t,e){var n=I(t);if(n){I(d)||w("Missing (");var r=e(n);return I(h)||w("Missing )"),r}}function S(){return D("directional",a,1)||D("angular",f,1)}function M(){var t,e,n=T();return n&&((t=[]).push(n),e=x,I(p)&&((n=T())?t.push(n):x=e)),t}function T(){var t,e=function(){var t=D("shape",/^(circle)/i,0);return t&&(t.style=j()||A()),t}()||((t=D("shape",/^(ellipse)/i,0))&&(t.style=R()||A()),t);if(e)e.at=P();else{var n=A();if(n){e=n;var r=P();r&&(e.at=r)}else{var i=N();i&&(e={type:"default-radial",at:i})}}return e}function A(){return D("extent-keyword",o,1)}function P(){if(D("position",/^at/,0)){var t=N();return t||w("Missing positioning value"),t}}function N(){var t={x:R(),y:R()};if(t.x||t.y)return{type:"position",value:t}}function C(t){var e=t(),n=[];if(e)for(n.push(e);I(p);)(e=t())?n.push(e):w("One extra comma");return n}function _(){var t=D("hex",v,1)||O(m,(function(){return{type:"rgba",value:C(L)}}))||O(y,(function(){return{type:"rgb",value:C(L)}}))||D("literal",g,0);return t||w("Expected color definition"),t.length=R(),t}function L(){return I(b)[1]}function R(){return D("%",c,1)||D("position-keyword",s,1)||j()}function j(){return D("px",u,1)||D("em",l,1)}function D(t,e,n){var r=I(e);if(r)return{type:t,value:r[n]}}function I(t){var e=/^[\n\r\t\s]+/.exec(x);e&&F(e[0].length);var n=t.exec(x);return n&&F(n[0].length),n}function F(t){x=x.substring(t)}return function(t){return x=t,e=C(k),x.length>0&&w("Invalid input not EOF"),e;var e}}(),na=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,ra=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,ia=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,aa=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,oa={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},sa=Pi((function(t){var e;return e="angular"===t.type?Number(t.value):oa[t.value]||0,Ji(e,"deg")})),ua=Pi((function(t){var e=50,n=50,r="%",i="%";if("position"===(null==t?void 0:t.type)){var a=t.value,o=a.x,s=a.y;"position-keyword"===(null==o?void 0:o.type)&&("left"===o.value?e=0:"center"===o.value?e=50:"right"===o.value?e=100:"top"===o.value?n=0:"bottom"===o.value&&(n=100)),"position-keyword"===(null==s?void 0:s.type)&&("left"===s.value?e=0:"center"===s.value?n=50:"right"===s.value?e=100:"top"===s.value?n=0:"bottom"===s.value&&(n=100)),"px"!==(null==o?void 0:o.type)&&"%"!==(null==o?void 0:o.type)&&"em"!==(null==o?void 0:o.type)||(r=null==o?void 0:o.type,e=Number(o.value)),"px"!==(null==s?void 0:s.type)&&"%"!==(null==s?void 0:s.type)&&"em"!==(null==s?void 0:s.type)||(i=null==s?void 0:s.type,n=Number(s.value))}return{cx:Ji(e,r),cy:Ji(n,i)}})),ca=Pi((function(t){if(t.indexOf("linear")>-1||t.indexOf("radial")>-1)return ea(t).map((function(t){var e=t.type,n=t.orientation,r=t.colorStops;!function(t){var e,n,r=t.length;t[r-1].length=null!==(e=t[r-1].length)&&void 0!==e?e:{type:"%",value:"100"},r>1&&(t[0].length=null!==(n=t[0].length)&&void 0!==n?n:{type:"%",value:"0"});for(var i=0,a=Number(t[0].length.value),o=1;o<r;o++){var s,u=null===(s=t[o].length)||void 0===s?void 0:s.value;if(!Me(u)&&!Me(a)){for(var c=1;c<o-i;c++)t[i+c].length={type:"%",value:"".concat(a+(Number(u)-a)*c/(o-i))};i=o,a=Number(u)}}}(r);var i,a=r.map((function(t){return{offset:Ji(Number(t.length.value),"%"),color:ta(t)}}));if("linear-gradient"===e)return new Gi(Bi.LinearGradient,{angle:n?sa(n):Ui,steps:a});if("radial-gradient"===e&&(n||(n=[{type:"shape",value:"circle"}]),"shape"===n[0].type&&"circle"===n[0].value)){var o,s=ua(n[0].at),u=s.cx,c=s.cy;if(n[0].style){var l=n[0].style,f=l.type,d=l.value;"extent-keyword"===f?(Ki[i=d]||(Ki[i]=new Wi(i)),o=Ki[i]):o=Ji(d,f)}return new Gi(Bi.RadialGradient,{cx:u,cy:c,size:o,steps:a})}}));var e=t[0];if("("===t[1]||"("===t[2])if("l"===e){var n=na.exec(t);if(n){var r,i=(null===(r=n[2].match(aa))||void 0===r?void 0:r.map((function(t){return t.split(":")})))||[];return[new Gi(Bi.LinearGradient,{angle:Ji(parseFloat(n[1]),"deg"),steps:i.map((function(t){var e=g(t,2),n=e[0],r=e[1];return{offset:Ji(100*Number(n),"%"),color:r}}))})]}}else if("r"===e){var a=function(t){var e=ra.exec(t);if(e){var n,r=(null===(n=e[4].match(aa))||void 0===n?void 0:n.map((function(t){return t.split(":")})))||[];return{cx:Ji(50,"%"),cy:Ji(50,"%"),steps:r.map((function(t){var e=g(t,2),n=e[0],r=e[1];return{offset:Ji(100*Number(n),"%"),color:r}}))}}return null}(t);if(a){if(!Te(a))return[new Gi(Bi.RadialGradient,a)];t=a}}else if("p"===e)return function(t){var e=ia.exec(t);if(e){var n=e[1],r=e[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}(t)}));function la(t){return t&&!!t.image}function fa(t){return t&&!Me(t.r)&&!Me(t.g)&&!Me(t.b)}var da=Pi((function(t){if(la(t))return w({repetition:"repeat"},t);if(Me(t)&&(t=""),"transparent"===t)return Zi;if("currentColor"===t)t="black";else if("none"===t)return $i;var e=ca(t);if(e)return e;var n=pi(t),r=[0,0,0,0];return null!==n&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),Qi.apply(void 0,r)}));function ha(t,e){if(fa(t)&&fa(e))return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(t){var e=t.slice();if(e[3])for(var n=0;n<3;n++)e[n]=Math.round(Ae(e[n],0,255));return e[3]=Ae(e[3],0,1),"rgba(".concat(e.join(","),")")}]}function pa(t,e){if(Me(e))return Ji(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(t)>=0)return Ji(Number(e),"px");if("deg".search(t)>=0)return Ji(Number(e),"deg")}var n=[];e=e.replace(t,(function(t){return n.push(t),"U".concat(t)}));var r="U(".concat(t.source,")");return n.map((function(t){return Ji(Number(e.replace(new RegExp("U".concat(t),"g"),"").replace(new RegExp(r,"g"),"*0")),t)}))[0]}var va=function(t){return pa(new RegExp("px","g"),t)},ga=Pi(va);Pi((function(t){return pa(new RegExp("%","g"),t)}));var ya=function(t){return Oe(t)||isFinite(Number(t))?Ji(Number(t)||0,"px"):pa(new RegExp("px|%|em|rem","g"),t)},ma=Pi(ya),ba=function(t){return pa(new RegExp("deg|rad|grad|turn","g"),t)},xa=Pi(ba);function wa(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a="",o=t.value||0,s=e.value||0,u=Vi(t.unit),c=t.convertTo(u),l=e.convertTo(u);return c&&l?(o=c.value,s=l.value,a=Ii(t.unit)):(Hi.isLength(t.unit)||Hi.isLength(e.unit))&&(o=Oa(t,i,n),s=Oa(e,i,n),a="px"),[o,s,function(t){return r&&(t=Math.max(t,0)),t+a}]}function ka(t){var e=0;return t.unit===Ni.kDegrees?e=t.value:t.unit===Ni.kRadians?e=Nr(Number(t.value)):t.unit===Ni.kTurns?e=360*Number(t.value):t.value&&(e=t.value),e}function Ea(t,e){var n;return Array.isArray(t)?n=t.map((function(t){return Number(t)})):Te(t)?n=t.split(" ").map((function(t){return Number(t)})):Oe(t)&&(n=[t]),2===e?1===n.length?[n[0],n[0]]:[n[0],n[1]]:4===e?1===n.length?[n[0],n[0],n[0],n[0]]:2===n.length?[n[0],n[1],n[0],n[1]]:3===n.length?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]:"even"===e&&n.length%2==1?[].concat(M(n),M(n)):n}function Oa(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.unit===Ni.kPixels)return Number(t.value);if(t.unit===Ni.kPercentage&&n){var i=n.nodeName===or.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[e]:0)+t.value/100*i.halfExtents[e]*2}return 0}var Sa=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function Ma(t){return t.toString()}var Ta=function(t){return"number"==typeof t?Ji(t):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t)?Ji(Number(t)):Ji(0)},Aa=Pi(Ta);function Pa(t,e){return[t,e,Ma]}function Na(t,e){return function(n,r){return[n,r,function(n){return Ma(Ae(n,t,e))}]}}function Ca(t,e){if(t.length===e.length)return[t,e,function(t){return t}]}function _a(t){return 0===t.parsedStyle.d.totalLength&&(t.parsedStyle.d.totalLength=ln(t.parsedStyle.d.absolutePath)),t.parsedStyle.d.totalLength}function La(t){return 0===t.parsedStyle.points.totalLength&&(t.parsedStyle.points.totalLength=function(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=In(r[0],r[1],i[0],i[1])}return e}(t.parsedStyle.points.points)),t.parsedStyle.points.totalLength}function Ra(t,e){return t[0]===e[0]&&t[1]===e[1]}function ja(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||0===Math.sin(u)||pn(u,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),l=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,l=l>Math.PI/2?Math.PI-l:l,{xExtra:Math.cos(u/2-c)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(l-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0}}function Da(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}Pi((function(t){return Te(t)?t.split(" ").map(Aa):t.map(Aa)}));var Ia=function(t,e){var n=t.x*e.x+t.y*e.y,r=Math.sqrt((Math.pow(t.x,2)+Math.pow(t.y,2))*(Math.pow(e.x,2)+Math.pow(e.y,2)));return(t.x*e.y-t.y*e.x<0?-1:1)*Math.acos(n/r)},Fa=function(t,e,n,r,i,a,o,s){e=Math.abs(e),n=Math.abs(n);var u=Ar(r=vn(r,360));if(t.x===o.x&&t.y===o.y)return{x:t.x,y:t.y,ellipticalArcAngle:0};if(0===e||0===n)return{x:0,y:0,ellipticalArcAngle:0};var c=(t.x-o.x)/2,l=(t.y-o.y)/2,f={x:Math.cos(u)*c+Math.sin(u)*l,y:-Math.sin(u)*c+Math.cos(u)*l},d=Math.pow(f.x,2)/Math.pow(e,2)+Math.pow(f.y,2)/Math.pow(n,2);d>1&&(e*=Math.sqrt(d),n*=Math.sqrt(d));var h=(Math.pow(e,2)*Math.pow(n,2)-Math.pow(e,2)*Math.pow(f.y,2)-Math.pow(n,2)*Math.pow(f.x,2))/(Math.pow(e,2)*Math.pow(f.y,2)+Math.pow(n,2)*Math.pow(f.x,2));h=h<0?0:h;var p=(i!==a?1:-1)*Math.sqrt(h),v=p*(e*f.y/n),g=p*(-n*f.x/e),y={x:Math.cos(u)*v-Math.sin(u)*g+(t.x+o.x)/2,y:Math.sin(u)*v+Math.cos(u)*g+(t.y+o.y)/2},m={x:(f.x-v)/e,y:(f.y-g)/n},b=Ia({x:1,y:0},m),x=Ia(m,{x:(-f.x-v)/e,y:(-f.y-g)/n});!a&&x>0?x-=2*Math.PI:a&&x<0&&(x+=2*Math.PI);var w=b+(x%=2*Math.PI)*s,k=e*Math.cos(w),E=n*Math.sin(w);return{x:Math.cos(u)*k-Math.sin(u)*E+y.x,y:Math.sin(u)*k+Math.cos(u)*E+y.y,ellipticalArcStartAngle:b,ellipticalArcEndAngle:b+x,ellipticalArcAngle:w,ellipticalArcCenter:y,resultantRx:e,resultantRy:n}};function za(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.arcParams,i=r.rx,a=void 0===i?0:i,o=r.ry,s=void 0===o?0:o,u=r.xRotation,c=r.arcFlag,l=r.sweepFlag,f=Fa({x:t.prePoint[0],y:t.prePoint[1]},a,s,u,!!c,!!l,{x:t.currentPoint[0],y:t.currentPoint[1]},e),d=Fa({x:t.prePoint[0],y:t.prePoint[1]},a,s,u,!!c,!!l,{x:t.currentPoint[0],y:t.currentPoint[1]},n?e+.005:e-.005),h=d.x-f.x,p=d.y-f.y,v=Math.sqrt(h*h+p*p);return{x:-h/v,y:-p/v}}function Ba(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ga(t,e){return Ba(t)*Ba(e)?(t[0]*e[0]+t[1]*e[1])/(Ba(t)*Ba(e)):1}function Wa(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Ga(t,e))}function Va(t,e){var n=e[1],r=e[2],i=vn(Ar(e[3]),2*Math.PI),a=e[4],o=e[5],s=t[0],u=t[1],c=e[6],l=e[7],f=Math.cos(i)*(s-c)/2+Math.sin(i)*(u-l)/2,d=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(u-l)/2,h=f*f/(n*n)+d*d/(r*r);h>1&&(n*=Math.sqrt(h),r*=Math.sqrt(h));var p=n*n*(d*d)+r*r*(f*f),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*d/r:0,y=n?v*-r*f/n:0,m=(s+c)/2+Math.cos(i)*g-Math.sin(i)*y,b=(u+l)/2+Math.sin(i)*g+Math.cos(i)*y,x=[(f-g)/n,(d-y)/r],w=[(-1*f-g)/n,(-1*d-y)/r],k=Wa([1,0],x),E=Wa(x,w);return Ga(x,w)<=-1&&(E=Math.PI),Ga(x,w)>=1&&(E=0),0===o&&E>0&&(E-=2*Math.PI),1===o&&E<0&&(E+=2*Math.PI),{cx:m,cy:b,rx:Ra(t,[c,l])?0:n,ry:Ra(t,[c,l])?0:r,startAngle:k,endAngle:k+E,xRotation:i,arcFlag:a,sweepFlag:o}}var Ha=function(t){if(""===t||Array.isArray(t)&&0===t.length)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var e;try{e=Qe(t)}catch(n){e=Qe(""),console.error("[g]: Invalid SVG Path definition: ".concat(t))}!function(t){for(var e=0;e<t.length;e++){var n=t[e-1],r=t[e];if("M"===r[0]&&n){var i=n[0],a=[r[1],r[2]],o=void 0;"L"===i||"M"===i?o=[n[1],n[2]]:"C"!==i&&"A"!==i&&"Q"!==i||(o=[n[n.length-2],n[n.length-1]]),o&&Ra(a,o)&&(t.splice(e,1),e--)}}}(e);var n=function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e}(e),r=function(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var a=t[i],o=a[0];"M"===o?(r.length&&(n.push(r),r=[]),r.push([a[1],a[2]])):"Z"===o?r.length&&(e.push(r),r=[]):r.push([a[1],a[2]])}return r.length>0&&n.push(r),{polygons:e,polylines:n}}(e),i=r.polygons,a=r.polylines,o=function(t){for(var e=[],n=null,r=null,i=null,a=0,o=t.length,s=0;s<o;s++){var u=t[s];r=t[s+1];var c=u[0],l={command:c,prePoint:n,params:u,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(c){case"M":i=[u[1],u[2]],a=s;break;case"A":var f=Va(n,u);l.arcParams=f}if("Z"===c)n=i,r=t[a+1];else{var d=u.length;n=[u[d-2],u[d-1]]}r&&"Z"===r[0]&&(r=t[a],e[a]&&(e[a].prePoint=n)),l.currentPoint=n,e[a]&&Ra(n,e[a].currentPoint)&&(e[a].prePoint=l.prePoint);var h=r?[r[r.length-2],r[r.length-1]]:null;l.nextPoint=h;var p=l.prePoint;if(["L","H","V"].includes(c))l.startTangent=[p[0]-n[0],p[1]-n[1]],l.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===c){var v=[u[1],u[2]];l.startTangent=[p[0]-v[0],p[1]-v[1]],l.endTangent=[n[0]-v[0],n[1]-v[1]]}else if("T"===c){var g=e[s-1],y=Da(g.currentPoint,p);"Q"===g.command?(l.command="Q",l.startTangent=[p[0]-y[0],p[1]-y[1]],l.endTangent=[n[0]-y[0],n[1]-y[1]]):(l.command="TL",l.startTangent=[p[0]-n[0],p[1]-n[1]],l.endTangent=[n[0]-p[0],n[1]-p[1]])}else if("C"===c){var m=[u[1],u[2]],b=[u[3],u[4]];l.startTangent=[p[0]-m[0],p[1]-m[1]],l.endTangent=[n[0]-b[0],n[1]-b[1]],0===l.startTangent[0]&&0===l.startTangent[1]&&(l.startTangent=[m[0]-b[0],m[1]-b[1]]),0===l.endTangent[0]&&0===l.endTangent[1]&&(l.endTangent=[b[0]-m[0],b[1]-m[1]])}else if("S"===c){var x=e[s-1],w=Da(x.currentPoint,p),k=[u[1],u[2]];"C"===x.command?(l.command="C",l.startTangent=[p[0]-w[0],p[1]-w[1]],l.endTangent=[n[0]-k[0],n[1]-k[1]]):(l.command="SQ",l.startTangent=[p[0]-k[0],p[1]-k[1]],l.endTangent=[n[0]-k[0],n[1]-k[1]])}else if("A"===c){var E=za(l,0),O=E.x,S=E.y,M=za(l,1,!1),T=M.x,A=M.y;l.startTangent=[O,S],l.endTangent=[T,A]}e.push(l)}return e}(e),s=function(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var a=t[i],o=a.currentPoint,s=a.params,u=a.prePoint,c=void 0;switch(a.command){case"Q":c=Zn(u[0],u[1],s[1],s[2],s[3],s[4]);break;case"C":c=qn(u[0],u[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var l=a.arcParams;c=Gn(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:e.push(o[0]),n.push(o[1])}c&&(a.box=c,e.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height))}e=e.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0})),n=n.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0}));var f=dn(e),d=dn(n),h=hn(e),p=hn(n);if(0===r.length)return{x:f,y:d,width:h-f,height:p-d};for(var v=0;v<r.length;v++){var g=r[v],y=g.currentPoint;y[0]===f?f-=ja(g,0).xExtra:y[0]===h&&(h+=ja(g,0).xExtra),y[1]===d?d-=ja(g,0).yExtra:y[1]===p&&(p+=ja(g,0).yExtra)}return{x:f,y:d,width:h-f,height:p-d}}(o),u=s.x,c=s.y,l=s.width,f=s.height;return{absolutePath:e,hasArc:n,segments:o,polygons:i,polylines:a,totalLength:0,rect:{x:Number.isFinite(u)?u:0,y:Number.isFinite(c)?c:0,width:Number.isFinite(l)?l:0,height:Number.isFinite(f)?f:0}}},Ya=Pi(Ha);function Ua(t){return Te(t)?Ya(t):Ha(t)}function qa(t,e,n){var r=t.curve,i=e.curve;r&&0!==r.length||(r=wn(t.absolutePath,!1),t.curve=r),i&&0!==i.length||(i=wn(e.absolutePath,!1),e.curve=i);var a=[r,i];r.length!==i.length&&(a=En(r,i));var o=On(a[0])!==On(a[1])?Sn(a[0]):Mn(a[0]);return[o,Tn(a[1],o),function(t){return t}]}function Xa(t,e){return[t.points,e.points,function(t){return t}]}var Ka=null,$a=/\s*(\w+)\(([^)]*)\)/g;function Za(t){return function(e){var n=0;return t.map((function(t){return t===Ka?e[n++]:t}))}}function Qa(t){return t}var Ja={matrix:["NNNNNN",[Ka,Ka,0,0,Ka,Ka,0,0,0,0,1,0,Ka,Ka,0,1],Qa],matrix3d:["NNNNNNNNNNNNNNNN",Qa],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Za([Ka,Ka,new Hi(1)]),Qa],scaleX:["N",Za([Ka,new Hi(1),new Hi(1)]),Za([Ka,new Hi(1)])],scaleY:["N",Za([new Hi(1),Ka,new Hi(1)]),Za([new Hi(1),Ka])],scaleZ:["N",Za([new Hi(1),new Hi(1),Ka])],scale3d:["NNN",Qa],skew:["Aa",null,Qa],skewX:["A",null,Za([Ka,Ui])],skewY:["A",null,Za([Ui,Ka])],translate:["Tt",Za([Ka,Ka,Yi]),Qa],translateX:["T",Za([Ka,Yi,Yi]),Za([Ka,Yi])],translateY:["T",Za([Yi,Ka,Yi]),Za([Yi,Ka])],translateZ:["L",Za([Yi,Yi,Ka])],translate3d:["TTL",Qa]};function to(t){for(var e=[],n=t.length,r=0;r<n;r++){var i=t[r],a=i[0],o=i.slice(1);if("translate"===a||"skew"===a?1===o.length&&o.push(0):"scale"===a&&1===o.length&&o.push(o[0]),!Ja[a])return[];var s=o.map((function(t){return Ji(t)}));e.push({t:a,d:s})}return e}function eo(t){if(Array.isArray(t))return to(t);if("none"===(t=(t||"none").trim()))return[];var e,n=[],r=0;for($a.lastIndex=0;e=$a.exec(t);){if(e.index!==r)return[];r=e.index+e[0].length;var i=e[1],a=Ja[i];if(!a)return[];var o=e[2].split(","),s=a[0];if(s.length<o.length)return[];for(var u=[],c=0;c<s.length;c++){var l,f=o[c],d=s[c];if(l=f?{A:function(t){return"0"===t.trim()?Ui:xa(t)},N:Aa,T:ma,L:ga}[d.toUpperCase()](f):{a:Ui,n:u[0],t:Yi}[d],void 0===l)return[];u.push(l)}if(n.push({t:i,d:u}),$a.lastIndex===t.length)return n}return[]}function no(t){if(Array.isArray(t))return to(t);if("none"===(t=(t||"none").trim()))return[];var e,n=[],r=0;for($a.lastIndex=0;e=$a.exec(t);){if(e.index!==r)return[];r=e.index+e[0].length;var i=e[1],a=Ja[i];if(!a)return[];var o=e[2].split(","),s=a[0];if(s.length<o.length)return[];for(var u=[],c=0;c<s.length;c++){var l,f=o[c],d=s[c];if(l=f?{A:function(t){return"0"===t.trim()?Ui:ba(t)},N:Ta,T:ya,L:va}[d.toUpperCase()](f):{a:Ui,n:u[0],t:Yi}[d],void 0===l)return[];u.push(l)}if(n.push({t:i,d:u}),$a.lastIndex===t.length)return n}return[]}function ro(t){var e,n,r,i;switch(t.t){case"rotateX":return i=Ar(ka(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return i=Ar(ka(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return i=Ar(ka(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=t.d[0].value,n=t.d[1].value,r=t.d[2].value,i=Ar(ka(t.d[3]));var a=e*e+n*n+r*r;if(0===a)e=1,n=0,r=0;else if(1!==a){var o=Math.sqrt(a);e/=o,n/=o,r/=o}var s=Math.sin(i/2),u=s*Math.cos(i/2),c=s*s;return[1-2*(n*n+r*r)*c,2*(e*n*c+r*u),2*(e*r*c-n*u),0,2*(e*n*c-r*u),1-2*(e*e+r*r)*c,2*(n*r*c+e*u),0,2*(e*r*c+n*u),2*(n*r*c-e*u),1-2*(e*e+n*n)*c,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":var l=Ar(ka(t.d[0])),f=Ar(ka(t.d[1]));return[1,Math.tan(f),0,0,Math.tan(l),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return i=Ar(ka(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return i=Ar(ka(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,e=Oa(t.d[0],0,null)||0,n=Oa(t.d[1],0,null)||0,0,1];case"translateX":return[1,0,0,0,0,1,0,0,0,0,1,0,e=Oa(t.d[0],0,null)||0,0,0,1];case"translateY":return[1,0,0,0,0,1,0,0,0,0,1,0,0,n=Oa(t.d[0],0,null)||0,0,1];case"translateZ":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r=Oa(t.d[0],0,null)||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,e=Oa(t.d[0],0,null)||0,n=Oa(t.d[1],0,null)||0,r=Oa(t.d[2],0,null)||0,1];case"perspective":var d=Oa(t.d[0],0,null)||0;return[1,0,0,0,0,1,0,0,0,0,1,d?-1/d:0,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map((function(t){return t.value}))}}function io(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function ao(t){var e=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return function(t,e,n,r,i,a){if(!function(t,e){var n=e[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0}(Rr,t))return!1;if(lt(jr,Rr),jr[3]=0,jr[7]=0,jr[11]=0,jr[15]=1,Math.abs(yt(jr))<1e-8)return!1;var o,s,u=Rr[3],c=Rr[7],l=Rr[11],f=Rr[12],d=Rr[13],h=Rr[14],p=Rr[15];if(0!==u||0!==c||0!==l){if(Dr[0]=u,Dr[1]=c,Dr[2]=l,Dr[3]=p,!vt(jr,jr))return!1;pt(jr,jr),st(i,Dr,jr)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=f,e[1]=d,e[2]=h,s=Rr,(o=Ir)[0][0]=s[0],o[0][1]=s[1],o[0][2]=s[2],o[1][0]=s[4],o[1][1]=s[5],o[1][2]=s[6],o[2][0]=s[8],o[2][1]=s[9],o[2][2]=s[10],n[0]=F(Ir[0]),X(Ir[0],Ir[0]),r[0]=K(Ir[0],Ir[1]),zr(Ir[1],Ir[1],Ir[0],1,-r[0]),n[1]=F(Ir[1]),X(Ir[1],Ir[1]),r[0]/=n[1],r[1]=K(Ir[0],Ir[2]),zr(Ir[2],Ir[2],Ir[0],1,-r[1]),r[2]=K(Ir[1],Ir[2]),zr(Ir[2],Ir[2],Ir[1],1,-r[2]),n[2]=F(Ir[2]),X(Ir[2],Ir[2]),r[1]/=n[2],r[2]/=n[2],$(Fr,Ir[1],Ir[2]),K(Ir[0],Fr)<0)for(var v=0;v<3;v++)n[v]*=-1,Ir[v][0]*=-1,Ir[v][1]*=-1,Ir[v][2]*=-1;a[0]=.5*Math.sqrt(Math.max(1+Ir[0][0]-Ir[1][1]-Ir[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-Ir[0][0]+Ir[1][1]-Ir[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-Ir[0][0]-Ir[1][1]+Ir[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+Ir[0][0]+Ir[1][1]+Ir[2][2],0)),Ir[2][1]>Ir[1][2]&&(a[0]=-a[0]),Ir[0][2]>Ir[2][0]&&(a[1]=-a[1]),Ir[1][0]>Ir[0][1]&&(a[2]=-a[2])}(function(t){return 0===t.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(ro).reduce(io)}(t),e,n,r,i,a),[[e,n,r,a,i]]}var oo=function(){function t(t,e){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var i=0;i<4;i++)for(var a=0;a<4;a++)n[r][i]+=e[r][a]*t[a][i];return n}return function(e,n,r,i,a){for(var o=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],s=0;s<4;s++)o[s][3]=a[s];for(var u=0;u<3;u++)for(var c=0;c<3;c++)o[3][u]+=e[c]*o[c][u];var l=i[0],f=i[1],d=i[2],h=i[3],p=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];p[0][0]=1-2*(f*f+d*d),p[0][1]=2*(l*f-d*h),p[0][2]=2*(l*d+f*h),p[1][0]=2*(l*f+d*h),p[1][1]=1-2*(l*l+d*d),p[1][2]=2*(f*d-l*h),p[2][0]=2*(l*d-f*h),p[2][1]=2*(f*d+l*h),p[2][2]=1-2*(l*l+f*f),o=t(o,p);var v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r[2]&&(v[2][1]=r[2],o=t(o,v)),r[1]&&(v[2][1]=0,v[2][0]=r[0],o=t(o,v)),r[0]&&(v[2][0]=0,v[1][0]=r[0],o=t(o,v));for(var g=0;g<3;g++)for(var y=0;y<3;y++)o[g][y]*=n[g];return function(t){return 0===t[0][2]&&0===t[0][3]&&0===t[1][2]&&0===t[1][3]&&0===t[2][0]&&0===t[2][1]&&1===t[2][2]&&0===t[2][3]&&0===t[3][2]&&1===t[3][3]}(o)?[o[0][0],o[0][1],o[1][0],o[1][1],o[3][0],o[3][1]]:o[0].concat(o[1],o[2],o[3])}}();function so(t){return t.toFixed(6).replace(".000000","")}function uo(t,e){var n,r;return t.decompositionPair!==e&&(t.decompositionPair=e,n=ao(t)),e.decompositionPair!==t&&(e.decompositionPair=t,r=ao(e)),null===n[0]||null===r[0]?[[!1],[!0],function(n){return n?e[0].d:t[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(t){var e=function(t,e,n){var r=function(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}(t,e),i=[];if(1===(r=Ae(r,-1,1)))i=t;else for(var a=Math.acos(r),o=1*Math.sin(n*a)/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(t[s]*(Math.cos(n*a)-r*o)+e[s]*o);return i}(n[0][3],r[0][3],t[5]);return oo(t[0],t[1],t[2],e,t[4]).map(so).join(",")}])}function co(t){return t.replace(/[XY]/,"")}function lo(t){return t.replace(/(X|Y|Z|3d)?$/,"3d")}var fo=function(t,e){return"perspective"===t&&"perspective"===e||("matrix"===t||"matrix3d"===t)&&("matrix"===e||"matrix3d"===e)};function ho(t,e,n){var r=!1;if(!t.length||!e.length){t.length||(r=!0,t=e,e=[]);for(var i=function(){var n=t[a],r=n.t,i=n.d,o="scale"===r.substring(0,5)?1:0;e.push({t:r,d:i.map((function(t){return"number"==typeof t?Ji(o):Ji(o,t.unit)}))})},a=0;a<t.length;a++)i()}var o=[],s=[],u=[];if(t.length!==e.length){var c=uo(t,e);o=[c[0]],s=[c[1]],u=[["matrix",[c[2]]]]}else for(var l=0;l<t.length;l++){var f=t[l].t,d=e[l].t,h=t[l].d,p=e[l].d,v=Ja[f],g=Ja[d],y=void 0;if(fo(f,d)){var m=uo([t[l]],[e[l]]);o.push(m[0]),s.push(m[1]),u.push(["matrix",[m[2]]])}else{if(f===d)y=f;else if(v[2]&&g[2]&&co(f)===co(d))y=co(f),h=v[2](h),p=g[2](p);else{if(!v[1]||!g[1]||lo(f)!==lo(d)){var b=uo(t,e);o=[b[0]],s=[b[1]],u=[["matrix",[b[2]]]];break}y=lo(f),h=v[1](h),p=g[1](p)}for(var x=[],w=[],k=[],E=0;E<h.length;E++){var O=wa(h[E],p[E],n,!1,E);x[E]=O[0],w[E]=O[1],k.push(O[2])}o.push(x),s.push(w),u.push([y,k])}}if(r){var S=o;o=s,s=S}return[o,s,function(t){return t.map((function(t,e){var n=t.map((function(t,n){return u[e][1][n](t)})).join(",");return"matrix"===u[e][0]&&16===n.split(",").length&&(u[e][0]="matrix3d"),"matrix3d"===u[e][0]&&6===n.split(",").length&&(u[e][0]="matrix"),"".concat(u[e][0],"(").concat(n,")")})).join(" ")}]}var po=Pi((function(t){if(Te(t)){if("text-anchor"===t)return[Ji(0,"px"),Ji(0,"px")];var e=t.split(" ");return 1===e.length&&("top"===e[0]||"bottom"===e[0]?(e[1]=e[0],e[0]="center"):e[1]="center"),2!==e.length?null:[ma(vo(e[0])),ma(vo(e[1]))]}return[Ji(t[0]||0,"px"),Ji(t[1]||0,"px")]}));function vo(t){return"center"===t?"50%":"left"===t||"top"===t?"0%":"right"===t||"bottom"===t?"100%":t}var go=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:Kr.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:Kr.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:Kr.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:Kr.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:Kr.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:Kr.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:Kr.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:Kr.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:Kr.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:Kr.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:Kr.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:Kr.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:Kr.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:Kr.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:Kr.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:Kr.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:Kr.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:Kr.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:Kr.FILTER},{n:"clipPath",syntax:Kr.DEFINED_PATH},{n:"textPath",syntax:Kr.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:Kr.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:Kr.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:Kr.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:Kr.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:Kr.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:Kr.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:Kr.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:Kr.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:Kr.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:Kr.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:Kr.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:Kr.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Kr.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Kr.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:Kr.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:Kr.COORDINATE},{n:"y1",int:!0,l:!0,syntax:Kr.COORDINATE},{n:"z1",int:!0,l:!0,syntax:Kr.COORDINATE},{n:"x2",int:!0,l:!0,syntax:Kr.COORDINATE},{n:"y2",int:!0,l:!0,syntax:Kr.COORDINATE},{n:"z2",int:!0,l:!0,syntax:Kr.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:Kr.PATH,p:50},{n:"points",int:!0,l:!0,syntax:Kr.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:Kr.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:Kr.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:Kr.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:Kr.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:Kr.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:Kr.NUMBER,d:function(t){return t===or.PATH||t===or.POLYGON||t===or.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:Kr.MARKER},{n:"markerEnd",syntax:Kr.MARKER},{n:"markerMid",syntax:Kr.MARKER},{n:"markerStartOffset",syntax:Kr.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:Kr.LENGTH,l:!0,int:!0,d:"0"}],yo=new Set(go.filter((function(t){return!!t.l})).map((function(t){return t.n}))),mo={},bo=function(){return O((function t(e){var n=this;k(this,t),this.runtime=e,go.forEach((function(t){n.registerMetadata(t)}))}),[{key:"registerMetadata",value:function(t){[t.n].concat(M(t.a||[])).forEach((function(e){mo[e]=t}))}},{key:"getPropertySyntax",value:function(t){return this.runtime.CSSPropertySyntaxFactory[t]}},{key:"processProperties",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(t.attributes,e);var r=t.parsedStyle.clipPath,i=t.parsedStyle.offsetPath;!function(t,e){var n=xo(t);for(var r in e)n.has(r)&&(t.parsedStyle[r]=e[r])}(t,e);var a=!!n.forceUpdateGeometry;if(!a)for(var o in e)if(yo.has(o)){a=!0;break}var s,u=xo(t);u.has("fill")&&e.fill&&(t.parsedStyle.fill=da(e.fill)),u.has("stroke")&&e.stroke&&(t.parsedStyle.stroke=da(e.stroke)),u.has("shadowColor")&&e.shadowColor&&(t.parsedStyle.shadowColor=da(e.shadowColor)),u.has("filter")&&e.filter&&(t.parsedStyle.filter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("none"===(t=t.toLowerCase().trim()))return[];for(var e,n=/\s*([\w-]+)\(([^)]*)\)/g,r=[],i=0;e=n.exec(t);){if(e.index!==i)return[];if(i=e.index+e[0].length,Sa.indexOf(e[1])>-1&&r.push({name:e[1],params:e[2].split(" ").map((function(t){return pa(/deg|rad|grad|turn|px|%/g,t)||da(t)}))}),n.lastIndex===t.length)return r}return[]}(e.filter)),u.has("radius")&&!Me(e.radius)&&(t.parsedStyle.radius=Ea(e.radius,4)),u.has("lineDash")&&!Me(e.lineDash)&&(t.parsedStyle.lineDash=Ea(e.lineDash,"even")),u.has("points")&&e.points&&(t.parsedStyle.points={points:Te(s=e.points)?s.split(" ").map((function(t){var e=g(t.split(","),2),n=e[0],r=e[1];return[Number(n),Number(r)]})):s,totalLength:0,segments:[]}),u.has("d")&&""===e.d&&(t.parsedStyle.d=w({},Xr)),u.has("d")&&e.d&&(t.parsedStyle.d=Ua(e.d)),u.has("textTransform")&&e.textTransform&&this.runtime.CSSPropertySyntaxFactory[Kr.TEXT_TRANSFORM].calculator(null,null,{value:e.textTransform},t,null),u.has("clipPath")&&!An(e.clipPath)&&this.runtime.CSSPropertySyntaxFactory[Kr.DEFINED_PATH].calculator("clipPath",r,e.clipPath,t,this.runtime),u.has("offsetPath")&&e.offsetPath&&this.runtime.CSSPropertySyntaxFactory[Kr.DEFINED_PATH].calculator("offsetPath",i,e.offsetPath,t,this.runtime),u.has("transform")&&e.transform&&(t.parsedStyle.transform=eo(e.transform)),u.has("transformOrigin")&&e.transformOrigin&&(t.parsedStyle.transformOrigin=po(e.transformOrigin)),u.has("markerStart")&&e.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[Kr.MARKER].calculator(null,e.markerStart,e.markerStart,null,null)),u.has("markerEnd")&&e.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[Kr.MARKER].calculator(null,e.markerEnd,e.markerEnd,null,null)),u.has("markerMid")&&e.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[Kr.MARKER].calculator("",e.markerMid,e.markerMid,null,null)),u.has("zIndex")&&!Me(e.zIndex)&&this.runtime.CSSPropertySyntaxFactory[Kr.Z_INDEX].postProcessor(t),u.has("offsetDistance")&&!Me(e.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[Kr.OFFSET_DISTANCE].postProcessor(t),u.has("transform")&&e.transform&&this.runtime.CSSPropertySyntaxFactory[Kr.TRANSFORM].postProcessor(t),u.has("transformOrigin")&&e.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[Kr.TRANSFORM_ORIGIN].postProcessor(t),a&&(t.geometry.dirty=!0,t.renderable.boundsDirty=!0,t.renderable.renderBoundsDirty=!0,n.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(t))}},{key:"updateGeometry",value:function(t){var e=t.nodeName,n=this.runtime.geometryUpdaterFactory[e];if(n){var r=t.geometry;r.contentBounds||(r.contentBounds=new gr),r.renderBounds||(r.renderBounds=new gr);var i=t.parsedStyle,a=n.update(i,t),o=a.cx,s=void 0===o?0:o,u=a.cy,c=void 0===u?0:u,l=a.cz,f=void 0===l?0:l,d=a.hwidth,h=void 0===d?0:d,p=a.hheight,v=void 0===p?0:p,g=a.hdepth,y=void 0===g?0:g,m=[Math.abs(h),Math.abs(v),y],b=i.stroke,x=i.lineWidth,w=void 0===x?1:x,k=i.increasedLineWidthForHitTesting,E=void 0===k?0:k,O=i.shadowType,S=void 0===O?"outer":O,M=i.shadowColor,T=i.filter,A=void 0===T?[]:T,P=i.transformOrigin,N=[s,c,f];r.contentBounds.update(N,m);var C=e===or.POLYLINE||e===or.POLYGON||e===or.PATH?Math.SQRT2:.5;if(b&&!b.isNone){var _=((w||0)+(E||0))*C;m[0]+=_,m[1]+=_}if(r.renderBounds.update(N,m),M&&S&&"inner"!==S){var L=r.renderBounds,R=L.min,j=L.max,D=i.shadowBlur||0,I=i.shadowOffsetX||0,F=i.shadowOffsetY||0,z=R[0]-D+I,B=j[0]+D+I,G=R[1]-D+F,V=j[1]+D+F;R[0]=Math.min(R[0],z),j[0]=Math.max(j[0],B),R[1]=Math.min(R[1],G),j[1]=Math.max(j[1],V),r.renderBounds.setMinMax(R,j)}A.forEach((function(t){var e=t.name,n=t.params;if("blur"===e){var i=n[0].value;r.renderBounds.update(r.renderBounds.center,W(r.renderBounds.halfExtents,r.renderBounds.halfExtents,[i,i,0]))}else if("drop-shadow"===e){var a=n[0].value,o=n[1].value,s=n[2].value,u=r.renderBounds,c=u.min,l=u.max,f=c[0]-s+a,d=l[0]+s+a,h=c[1]-s+o,p=l[1]+s+o;c[0]=Math.min(c[0],f),l[0]=Math.max(l[0],d),c[1]=Math.min(c[1],h),l[1]=Math.max(l[1],p),r.renderBounds.setMinMax(c,l)}})),t.geometry.dirty=!1;var H=v<0,Y=(h<0?-1:1)*(P?Oa(P[0],0,t,!0):0),U=(H?-1:1)*(P?Oa(P[1],1,t,!0):0);(Y||U)&&t.setOrigin(Y,U)}}},{key:"updateSizeAttenuation",value:function(t,e){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=(t.style.rawLineWidth||1)/e,t.nodeName===or.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=(t.style.rawR||1)/e)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===or.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))}}])}();function xo(t){return t.constructor.PARSED_STYLE_LIST}var wo=function(){return O((function t(){k(this,t),this.mixer=Pa}),[{key:"calculator",value:function(t,e,n,r){return ka(n)}}])}(),ko=function(){return O((function t(){k(this,t)}),[{key:"calculator",value:function(t,e,n,r,i){return n instanceof Wi&&(n=null),i.sceneGraphService.updateDisplayObjectDependency(t,e,n,r),"clipPath"===t&&r.forEach((function(t){0===t.childNodes.length&&i.sceneGraphService.dirtifyToRoot(t)})),n}}])}(),Eo=function(){return O((function t(){k(this,t),this.parser=da,this.mixer=ha}),[{key:"calculator",value:function(t,e,n,r){return n instanceof Wi?"none"===n.value?$i:Zi:n}}])}(),Oo=function(){return O((function t(){k(this,t)}),[{key:"calculator",value:function(t,e,n){return n instanceof Wi?[]:n}}])}();function So(t){var e=t.parsedStyle.fontSize;return Me(e)?null:e}var Mo=function(){return O((function t(){k(this,t),this.mixer=Pa}),[{key:"calculator",value:function(t,e,n,r,i){if(Oe(n))return n;if(!Hi.isRelativeUnit(n.unit))return n.value;if(n.unit===Ni.kPercentage)return 0;if(n.unit===Ni.kEms){if(r.parentNode){var a=So(r.parentNode);if(a)return a*n.value}return 0}if(n.unit===Ni.kRems){var o;if(null!=r&&null!==(o=r.ownerDocument)&&void 0!==o&&o.documentElement){var s=So(r.ownerDocument.documentElement);if(s)return s*n.value}return 0}}}])}(),To=function(){return O((function t(){k(this,t),this.mixer=Ca}),[{key:"calculator",value:function(t,e,n){return n.map((function(t){return t.value}))}}])}(),Ao=function(){return O((function t(){k(this,t),this.mixer=Ca}),[{key:"calculator",value:function(t,e,n){return n.map((function(t){return t.value}))}}])}(),Po=function(){return O((function t(){k(this,t)}),[{key:"calculator",value:function(t,e,n,r){var i;n instanceof Wi&&(n=null);var a=null===(i=n)||void 0===i?void 0:i.cloneNode(!0);return a&&(a.style.isMarker=!0),a}}])}(),No=function(){return O((function t(){k(this,t),this.mixer=Pa}),[{key:"calculator",value:function(t,e,n){return n.value}}])}(),Co=function(){return O((function t(){k(this,t),this.mixer=Na(0,1)}),[{key:"calculator",value:function(t,e,n){return n.value}},{key:"postProcessor",value:function(t){var e=t.parsedStyle,n=e.offsetPath,r=e.offsetDistance;if(n){var i=n.nodeName;if(i===or.LINE||i===or.PATH||i===or.POLYLINE){var a=n.getPoint(r);a&&t.setLocalPosition(a.x,a.y)}}}}])}(),_o=function(){return O((function t(){k(this,t),this.mixer=Na(0,1)}),[{key:"calculator",value:function(t,e,n){return n.value}}])}(),Lo=function(){return O((function t(){k(this,t),this.parser=Ua,this.mixer=qa}),[{key:"calculator",value:function(t,e,n){return n instanceof Wi&&"unset"===n.value?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new wr(0,0,0,0)}:n}}])}(),Ro=O((function t(){k(this,t),this.mixer=Xa})),jo=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).mixer=Na(0,1/0),t}return _(e,t),O(e)}(Mo),Do=function(){return O((function t(){k(this,t)}),[{key:"calculator",value:function(t,e,n,r){return n instanceof Wi?"unset"===n.value?"":n.value:"".concat(n)}},{key:"postProcessor",value:function(t){t.nodeValue="".concat(t.parsedStyle.text)||""}}])}(),Io=function(){return O((function t(){k(this,t)}),[{key:"calculator",value:function(t,e,n,r){var i=r.getAttribute("text");if(i){var a=i;"capitalize"===n.value?a=i.charAt(0).toUpperCase()+i.slice(1):"lowercase"===n.value?a=i.toLowerCase():"uppercase"===n.value&&(a=i.toUpperCase()),r.parsedStyle.text=a}return n.value}}])}(),Fo=new WeakMap,zo="undefined"!=typeof window&&void 0!==window.document;function Bo(t){return!!t.getAttribute}function Go(t,e){var n=Number(t.parsedStyle.zIndex||0),r=Number(e.parsedStyle.zIndex||0);if(n===r){var i=t.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(t)-a.indexOf(e)}}return n-r}function Wo(t){var e=t;do{var n;if(null===(n=e.parsedStyle)||void 0===n?void 0:n.clipPath)return e;e=e.parentElement}while(null!==e);return null}function Vo(t,e){if(zo)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}var Ho={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Yo="object"==typeof performance&&performance.now?performance:Date;function Uo(t){return t.nodeName===or.FRAGMENT||t.getRootNode().nodeName===or.FRAGMENT}function qo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=!1,i=!1,a=!!e&&!e.isNone,o=!!n&&!n.isNone;return"visiblepainted"===t||"painted"===t||"auto"===t?(r=a,i=o):"visiblefill"===t||"fill"===t?r=!0:"visiblestroke"===t||"stroke"===t?i=!0:"visible"!==t&&"all"!==t||(r=!0,i=!0),[r,i]}var Xo=1,Ko="object"==typeof self&&self.self===self?self:"object"==typeof s.g&&s.g.global===s.g?s.g:{},$o=Date.now(),Zo={},Qo=Date.now(),Jo=function(t){if("function"!=typeof t)throw new TypeError("".concat(t," is not a function"));var e=Date.now(),n=e-Qo,r=n>16?0:16-n,i=Xo++;return Zo[i]=t,Object.keys(Zo).length>1||setTimeout((function(){Qo=e;var t=Zo;Zo={},Object.keys(t).forEach((function(e){return t[e](Ko.performance&&"function"==typeof Ko.performance.now?Ko.performance.now():Date.now()-$o)}))}),r),i},ts=function(t){delete Zo[t]},es=function(t){return"string"!=typeof t?Jo:""===t?Ko.requestAnimationFrame:Ko["".concat(t,"RequestAnimationFrame")]},ns=function(t,e){for(var n=0;void 0!==t[n];){if(e(t[n]))return t[n];n+=1}}(["","webkit","moz","ms","o"],(function(t){return!!es(t)})),rs=es(ns),is=function(t){return"string"!=typeof t?ts:""===t?Ko.cancelAnimationFrame:Ko["".concat(t,"CancelAnimationFrame")]||Ko["".concat(t,"CancelRequestAnimationFrame")]}(ns);Ko.requestAnimationFrame=rs,Ko.cancelAnimationFrame=is;var as=function(){return O((function t(){k(this,t),this.callbacks=[]}),[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(t,e){this.callbacks.push(e)}},{key:"promise",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Promise.all(this.callbacks.map((function(t){return t.apply(void 0,e)})))}}])}(),os=function(){return O((function t(){k(this,t),this.callbacks=[]}),[{key:"tapPromise",value:function(t,e){this.callbacks.push(e)}},{key:"promise",value:(t=er(Jn().mark((function t(){var e,n,r,i,a=arguments;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callbacks.length){t.next=14;break}return t.next=3,(e=this.callbacks)[0].apply(e,a);case 3:n=t.sent,r=0;case 5:if(!(r<this.callbacks.length-1)){t.next=13;break}return i=this.callbacks[r],t.next=9,i(n);case 9:n=t.sent;case 10:r++,t.next=5;break;case 13:return t.abrupt("return",n);case 14:return t.abrupt("return",null);case 15:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t}(),ss=function(){return O((function t(){k(this,t),this.callbacks=[]}),[{key:"tap",value:function(t,e){this.callbacks.push(e)}},{key:"call",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=arguments;this.callbacks.forEach((function(t){t.apply(void 0,r)}))}}])}(),us=function(){return O((function t(){k(this,t),this.callbacks=[]}),[{key:"tap",value:function(t,e){this.callbacks.push(e)}},{key:"call",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this.callbacks.length){for(var r=arguments,i=this.callbacks[0].apply(void 0,r),a=0;a<this.callbacks.length-1;a++)i=(0,this.callbacks[a])(i);return i}return null}}])}(),cs=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],ls=/([\"\'])[^\'\"]+\1/;function fs(t,e,n){return ht(t),t[4]=Math.tan(e),t[1]=Math.tan(n),t}var ds=ut(),hs=ut(),ps={scale:function(t){Mt(ds,[t[0].value,t[1].value,1])},scaleX:function(t){Mt(ds,[t[0].value,1,1])},scaleY:function(t){Mt(ds,[1,t[0].value,1])},scaleZ:function(t){Mt(ds,[1,1,t[0].value])},scale3d:function(t){Mt(ds,[t[0].value,t[1].value,t[2].value])},translate:function(t){St(ds,[t[0].value,t[1].value,0])},translateX:function(t){St(ds,[t[0].value,0,0])},translateY:function(t){St(ds,[0,t[0].value,0])},translateZ:function(t){St(ds,[0,0,t[0].value])},translate3d:function(t){St(ds,[t[0].value,t[1].value,t[2].value])},rotate:function(t){Nt(ds,Ar(ka(t[0])))},rotateX:function(t){At(ds,Ar(ka(t[0])))},rotateY:function(t){Pt(ds,Ar(ka(t[0])))},rotateZ:function(t){Nt(ds,Ar(ka(t[0])))},rotate3d:function(t){Tt(ds,Ar(ka(t[3])),[t[0].value,t[1].value,t[2].value])},skew:function(t){fs(ds,Ar(t[0].value),Ar(t[1].value))},skewX:function(t){fs(ds,Ar(t[0].value),0)},skewY:function(t){fs(ds,0,Ar(t[0].value))},matrix:function(t){dt(ds,t[0].value,t[1].value,0,0,t[2].value,t[3].value,0,0,0,0,1,0,t[4].value,t[5].value,0,1)},matrix3d:function(e){dt.apply(t,[ds].concat(M(e.map((function(t){return t.value})))))}},vs=z(1,1,1),gs=D(),ys={translate:function(t,e){ku.sceneGraphService.setLocalScale(t,vs,!1),ku.sceneGraphService.setLocalEulerAngles(t,gs,void 0,void 0,!1),ku.sceneGraphService.setLocalPosition(t,[e[0].value,e[1].value,0],!1),ku.sceneGraphService.dirtifyLocal(t,t.transformable)}};function ms(t,e){if(t.length){if(1===t.length&&ys[t[0].t])return void ys[t[0].t](e,t[0].d);for(var n=ht(hs),r=0;r<t.length;r++){var i=t[r],a=i.t,o=i.d,s=ps[a];s&&(s(o),re(n,n,ds))}e.setLocalTransform(n)}else e.resetLocalTransform();return e.getLocalTransform()}var bs=function(){return O((function t(){k(this,t),this.parser=no,this.mixer=ho}),[{key:"calculator",value:function(t,e,n,r){return n instanceof Wi?[]:n}},{key:"postProcessor",value:function(t){ms(t.parsedStyle.transform,t)}}])}(),xs=function(){return O((function t(){k(this,t)}),[{key:"postProcessor",value:function(t){var e=t.parsedStyle.transformOrigin;e[0].unit===Ni.kPixels&&e[1].unit===Ni.kPixels?t.setOrigin(e[0].value,e[1].value):t.getGeometryBounds()}}])}(),ws=function(){return O((function t(){k(this,t)}),[{key:"calculator",value:function(t,e,n,r){return n.value}},{key:"postProcessor",value:function(t){if(t.parentNode){var e=t.parentNode,n=e.renderable,r=e.sortable;n&&(n.dirty=!0),r&&(r.dirty=!0,r.dirtyReason=qr.Z_INDEX_CHANGED)}}}])}(),ks=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t,e){var n=t.cx,r=void 0===n?0:n,i=t.cy,a=void 0===i?0:i,o=t.r,s=void 0===o?0:o;return{cx:r,cy:a,hwidth:s,hheight:s}}}])}(),Es=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t,e){var n=t.cx,r=void 0===n?0:n,i=t.cy,a=void 0===i?0:i,o=t.rx,s=void 0===o?0:o,u=t.ry;return{cx:r,cy:a,hwidth:s,hheight:void 0===u?0:u}}}])}(),Os=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t){var e=t.x1,n=t.y1,r=t.x2,i=t.y2,a=Math.min(e,r),o=Math.max(e,r),s=Math.min(n,i),u=(o-a)/2,c=(Math.max(n,i)-s)/2;return{cx:a+u,cy:s+c,hwidth:u,hheight:c}}}])}(),Ss=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t){var e=t.d.rect,n=e.x,r=e.y,i=e.width/2,a=e.height/2;return{cx:n+i,cy:r+a,hwidth:i,hheight:a}}}])}(),Ms=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t){if(t.points&&fn(t.points.points)){var e=t.points.points,n=Math.min.apply(Math,M(e.map((function(t){return t[0]})))),r=Math.max.apply(Math,M(e.map((function(t){return t[0]})))),i=Math.min.apply(Math,M(e.map((function(t){return t[1]})))),a=Math.max.apply(Math,M(e.map((function(t){return t[1]})))),o=(r-n)/2,s=(a-i)/2;return{cx:n+o,cy:i+s,hwidth:o,hheight:s}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),Ts=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t,e){var n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i,o=t.src,s=t.width,u=void 0===s?0:s,c=t.height,l=u,f=void 0===c?0:c;return o&&!Te(o)&&(l||(l=o.width,t.width=l),f||(f=o.height,t.height=f)),{cx:r+l/2,cy:a+f/2,hwidth:l/2,hheight:f/2}}}])}(),As=function(){return O((function t(e){k(this,t),this.globalRuntime=e}),[{key:"isReadyToMeasure",value:function(t,e){return t.text}},{key:"update",value:function(t,e){var n,r=t.text,i=t.textAlign,a=void 0===i?"start":i,o=t.lineWidth,s=void 0===o?1:o,u=t.textBaseline,c=void 0===u?"alphabetic":u,l=t.dx,f=void 0===l?0:l,d=t.dy,h=void 0===d?0:d,p=t.x,v=void 0===p?0:p,g=t.y,y=void 0===g?0:g;if(!this.isReadyToMeasure(t,e))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var m=((null==e||null===(n=e.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n?void 0:n.getConfig())||{}).offscreenCanvas,b=this.globalRuntime.textService.measureText(r,t,m);t.metrics=b;var x=b.width/2,w=b.height/2,k=v+x;"center"===a||"middle"===a?k+=s/2-x:"right"!==a&&"end"!==a||(k+=s-2*x);var E=y-w;return"middle"===c?E+=w:"top"===c||"hanging"===c?E+=2*w:"alphabetic"===c||"bottom"!==c&&"ideographic"!==c||(E+=0),f&&(k+=f),h&&(E+=h),{cx:k,cy:E,hwidth:x,hheight:w}}}])}(),Ps=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t,e){return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),Ns=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t,e){var n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i,o=t.width,s=void 0===o?0:o,u=t.height,c=void 0===u?0:u;return{cx:r+s/2,cy:a+c/2,hwidth:s/2,hheight:c/2}}}])}(),Cs=function(){return O((function t(e){k(this,t),this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new xr,this.page=new xr,this.canvas=new xr,this.viewport=new xr,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}),[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return!this.manager||this.path&&this.path[0]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(kr)}}])}(),_s=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).client=new xr,t.movement=new xr,t.offset=new xr,t.global=new xr,t.screen=new xr,t}return _(e,t),O(e,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}},{key:"initMouseEvent",value:function(){throw new Error(kr)}}])}(Cs),Ls=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).width=0,t.height=0,t.isPrimary=!1,t}return _(e,t),O(e,[{key:"getCoalescedEvents",value:function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])}(_s),Rs=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])}(_s),js=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[null])).type=t,r.detail=n,Object.assign(r,n),r}return _(e,t),O(e)}(Cs),Ds=new WeakMap,Is=function(){return O((function t(){k(this,t),this.emitter=new L}),[{key:"on",value:function(t,e,n){return this.addEventListener(t,e,n),this}},{key:"addEventListener",value:function(t,e,n){var r=!1,i=!1;if(Cn(n))r=n;else if(n){var a=n.capture;r=void 0!==a&&a;var o=n.once;i=void 0!==o&&o}r&&(t+="capture"),e=_n(e)?e:e.handleEvent;var s=_n(e)?void 0:e;return i?this.emitter.once(t,e,s):this.emitter.on(t,e,s),this}},{key:"off",value:function(t,e,n){return t?this.removeEventListener(t,e,n):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var t;null===(t=this.emitter)||void 0===t||t.removeAllListeners()}},{key:"removeEventListener",value:function(t,e,n){var r;if(!this.emitter)return this;(Cn(n)?n:null==n?void 0:n.capture)&&(t+="capture"),e=_n(e)?e:null===(r=e)||void 0===r?void 0:r.handleEvent;var i=_n(e)?void 0:e;return this.emitter.off(t,e,i),this}},{key:"emit",value:function(t,e){this.dispatchEvent(new js(t,e))}},{key:"dispatchEvent",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Ds.get(this);if(r||(r=this.document?this:this.defaultView?this.defaultView:null===(e=this.ownerDocument)||void 0===e?void 0:e.defaultView)&&Ds.set(this,r),r){if(t.manager=r.getEventService(),!t.manager)return!1;t.defaultPrevented=!1,t.path?t.path.length=0:t.page=[],n||(t.target=this),t.manager.dispatchEvent(t,t.type,n)}else this.emitter.emit(t.type,t);return!t.defaultPrevented}}])}(),Fs=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).shadow=!1,t.ownerDocument=null,t.isConnected=!1,t.baseURI="",t.childNodes=[],t.nodeType=0,t.nodeName="",t.nodeValue=null,t.parentNode=null,t}return _(e,t),O(e,[{key:"textContent",get:function(){var t="";this.nodeName===or.TEXT&&(t+=this.style.text);var e,n=nr(this.childNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.nodeName===or.TEXT?t+=r.nodeValue:t+=r.textContent}}catch(t){n.e(t)}finally{n.f()}return t},set:function(t){var e=this;this.childNodes.slice().forEach((function(t){e.removeChild(t)})),this.nodeName===or.TEXT&&(this.style.text="".concat(t))}},{key:"getRootNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(t):t.composed&&this.host?this.host.getRootNode(t):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(t){throw new Error(kr)}},{key:"lookupNamespaceURI",value:function(t){throw new Error(kr)}},{key:"lookupPrefix",value:function(t){throw new Error(kr)}},{key:"normalize",value:function(){throw new Error(kr)}},{key:"isEqualNode",value:function(t){return this===t}},{key:"isSameNode",value:function(t){return this.isEqualNode(t)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(t){if(t===this)return 0;for(var n=t,r=this,i=[n],a=[r];null!==(o=n.parentNode)&&void 0!==o?o:r.parentNode;){var o;n=n.parentNode?(i.push(n.parentNode),n.parentNode):n,r=r.parentNode?(a.push(r.parentNode),r.parentNode):r}if(n!==r)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var s=i.length>a.length?i:a,u=s===i?a:i;if(s[s.length-u.length]===u[0])return s===i?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var c=s.length-u.length,l=u.length-1;l>=0;l--){var f=u[l],d=s[c+l];if(d!==f){var h=f.parentNode.childNodes;return h.indexOf(f)<h.indexOf(d)?u===i?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:s===i?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(t){return this.contains(t)}},{key:"contains",value:function(t){for(var e=t;e&&this!==e;)e=e.parentNode;return!!e}},{key:"getAncestor",value:function(t){for(var e=this;t>0&&e;)e=e.parentNode,t--;return e}},{key:"forEach",value:function(t){for(var e=[this];e.length>0;){var n=e.pop();if(!1===t(n))break;for(var r=n.childNodes.length-1;r>=0;r--)e.push(n.childNodes[r])}}}],[{key:"isNode",value:function(t){return!!t.childNodes}}])}(Is);Fs.DOCUMENT_POSITION_DISCONNECTED=1,Fs.DOCUMENT_POSITION_PRECEDING=2,Fs.DOCUMENT_POSITION_FOLLOWING=4,Fs.DOCUMENT_POSITION_CONTAINS=8,Fs.DOCUMENT_POSITION_CONTAINED_BY=16,Fs.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var zs=function(){return O((function t(e,n){var r=this;k(this,t),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=ut(),this.tmpVec3=D(),this.onPointerDown=function(t){var e=r.createPointerEvent(t);if(r.dispatchEvent(e,"pointerdown"),"touch"===e.pointerType)r.dispatchEvent(e,"touchstart");else if("mouse"===e.pointerType||"pen"===e.pointerType){var n=2===e.button;r.dispatchEvent(e,n?"rightdown":"mousedown")}r.trackingData(t.pointerId).pressTargetsByButton[t.button]=e.composedPath(),r.freeEvent(e)},this.onPointerUp=function(t){var e=Yo.now(),n=r.createPointerEvent(t,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)r.dispatchEvent(n,"touchend");else if("mouse"===n.pointerType||"pen"===n.pointerType){var i=2===n.button;r.dispatchEvent(n,i?"rightup":"mouseup")}var a=r.trackingData(t.pointerId),o=r.findMountedTarget(a.pressTargetsByButton[t.button]),s=o;if(o&&!n.composedPath().includes(o)){for(var u=o;u&&!n.composedPath().includes(u);){if(n.currentTarget=u,r.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)r.notifyTarget(n,"touchendoutside");else if("mouse"===n.pointerType||"pen"===n.pointerType){var c=2===n.button;r.notifyTarget(n,c?"rightupoutside":"mouseupoutside")}Fs.isNode(u)&&(u=u.parentNode)}delete a.pressTargetsByButton[t.button],s=u}if(s){var l,f=r.clonePointerEvent(n,"click");f.target=s,f.path=[],a.clicksByButton[t.button]||(a.clicksByButton[t.button]={clickCount:0,target:f.target,timeStamp:e});var d=r.context.renderingContext.root.ownerDocument.defaultView,h=a.clicksByButton[t.button];h.target===f.target&&e-h.timeStamp<d.getConfig().dblClickSpeed?++h.clickCount:h.clickCount=1,h.target=f.target,h.timeStamp=e,f.detail=h.clickCount,null!==(l=n.detail)&&void 0!==l&&l.preventClick||(r.context.config.useNativeClickEvent||"mouse"!==f.pointerType&&"touch"!==f.pointerType||r.dispatchEvent(f,"click"),r.dispatchEvent(f,"pointertap")),r.freeEvent(f)}r.freeEvent(n)},this.onPointerMove=function(t){var e=r.createPointerEvent(t,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),n="mouse"===e.pointerType||"pen"===e.pointerType,i=r.trackingData(t.pointerId),a=r.findMountedTarget(i.overTargets);if(i.overTargets&&a!==e.target){var o="mousemove"===t.type?"mouseout":"pointerout",s=r.createPointerEvent(t,o,a||void 0);if(r.dispatchEvent(s,"pointerout"),n&&r.dispatchEvent(s,"mouseout"),!e.composedPath().includes(a)){var u=r.createPointerEvent(t,"pointerleave",a||void 0);for(u.eventPhase=u.AT_TARGET;u.target&&!e.composedPath().includes(u.target);)u.currentTarget=u.target,r.notifyTarget(u),n&&r.notifyTarget(u,"mouseleave"),Fs.isNode(u.target)&&(u.target=u.target.parentNode);r.freeEvent(u)}r.freeEvent(s)}if(a!==e.target){var c="mousemove"===t.type?"mouseover":"pointerover",l=r.clonePointerEvent(e,c);r.dispatchEvent(l,"pointerover"),n&&r.dispatchEvent(l,"mouseover");for(var f=a&&Fs.isNode(a)&&a.parentNode;f&&f!==(Fs.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&f!==e.target;)f=f.parentNode;if(!f||f===(Fs.isNode(r.rootTarget)&&r.rootTarget.parentNode)){var d=r.clonePointerEvent(e,"pointerenter");for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==a&&d.target!==(Fs.isNode(r.rootTarget)&&r.rootTarget.parentNode);)d.currentTarget=d.target,r.notifyTarget(d),n&&r.notifyTarget(d,"mouseenter"),Fs.isNode(d.target)&&(d.target=d.target.parentNode);r.freeEvent(d)}r.freeEvent(l)}r.dispatchEvent(e,"pointermove"),"touch"===e.pointerType&&r.dispatchEvent(e,"touchmove"),n&&(r.dispatchEvent(e,"mousemove"),r.cursor=r.getCursor(e.target)),i.overTargets=e.composedPath(),r.freeEvent(e)},this.onPointerOut=function(t){var e=r.trackingData(t.pointerId);if(e.overTargets){var n="mouse"===t.pointerType||"pen"===t.pointerType,i=r.findMountedTarget(e.overTargets),a=r.createPointerEvent(t,"pointerout",i||void 0);r.dispatchEvent(a),n&&r.dispatchEvent(a,"mouseout");var o=r.createPointerEvent(t,"pointerleave",i||void 0);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==(Fs.isNode(r.rootTarget)&&r.rootTarget.parentNode);)o.currentTarget=o.target,r.notifyTarget(o),n&&r.notifyTarget(o,"mouseleave"),Fs.isNode(o.target)&&(o.target=o.target.parentNode);e.overTargets=null,r.freeEvent(a),r.freeEvent(o)}r.cursor=null},this.onPointerOver=function(t){var e=r.trackingData(t.pointerId),n=r.createPointerEvent(t),i="mouse"===n.pointerType||"pen"===n.pointerType;r.dispatchEvent(n,"pointerover"),i&&r.dispatchEvent(n,"mouseover"),"mouse"===n.pointerType&&(r.cursor=r.getCursor(n.target));var a=r.clonePointerEvent(n,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==(Fs.isNode(r.rootTarget)&&r.rootTarget.parentNode);)a.currentTarget=a.target,r.notifyTarget(a),i&&r.notifyTarget(a,"mouseenter"),Fs.isNode(a.target)&&(a.target=a.target.parentNode);e.overTargets=n.composedPath(),r.freeEvent(n),r.freeEvent(a)},this.onPointerUpOutside=function(t){var e=r.trackingData(t.pointerId),n=r.findMountedTarget(e.pressTargetsByButton[t.button]),i=r.createPointerEvent(t);if(n){for(var a=n;a;)i.currentTarget=a,r.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType||"mouse"!==i.pointerType&&"pen"!==i.pointerType||r.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),Fs.isNode(a)&&(a=a.parentNode);delete e.pressTargetsByButton[t.button]}r.freeEvent(i)},this.onWheel=function(t){var e=r.createWheelEvent(t);r.dispatchEvent(e),r.freeEvent(e)},this.onClick=function(t){if(r.context.config.useNativeClickEvent){var e=r.createPointerEvent(t);r.dispatchEvent(e),r.freeEvent(e)}},this.onPointerCancel=function(t){var e=r.createPointerEvent(t,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(e),r.freeEvent(e)},this.globalRuntime=e,this.context=n}),[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var t=this.context.contextService.getBoundingClientRect(),e=1,n=1,r=this.context.contextService.getDomElement();if(r&&t){var i=r.offsetWidth,a=r.offsetHeight;i&&a&&(e=t.width/i,n=t.height/a)}return{scaleX:e,scaleY:n,bbox:t}}},{key:"client2Viewport",value:function(t){var e=this.getScale(),n=e.scaleX,r=e.scaleY,i=e.bbox;return new xr((t.x-((null==i?void 0:i.left)||0))/n,(t.y-((null==i?void 0:i.top)||0))/r)}},{key:"viewport2Client",value:function(t){var e=this.getScale(),n=e.scaleX,r=e.scaleY,i=e.bbox;return new xr((t.x+((null==i?void 0:i.left)||0))*n,(t.y+((null==i?void 0:i.top)||0))*r)}},{key:"viewport2Canvas",value:function(t){var e=t.x,n=t.y,r=this.rootTarget.defaultView.getCamera(),i=this.context.config,a=i.width,o=i.height,s=r.getPerspectiveInverse(),u=r.getWorldTransform(),c=mt(this.tmpMatrix,u,s),l=G(this.tmpVec3,e/a*2-1,2*(1-n/o)-1,0);return Q(l,l,c),new xr(l[0],l[1])}},{key:"canvas2Viewport",value:function(t){var e=this.rootTarget.defaultView.getCamera(),n=e.getPerspective(),r=e.getViewTransform(),i=mt(this.tmpMatrix,n,r),a=G(this.tmpVec3,t.x,t.y,0);Q(this.tmpVec3,this.tmpVec3,i);var o=this.context.config,s=o.width,u=o.height;return new xr((a[0]+1)/2*s,(1-(a[1]+1)/2)*u)}},{key:"setPickHandler",value:function(t){this.pickHandler=t}},{key:"addEventMapping",value:function(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((function(t,e){return t.priority-e.priority}))}},{key:"mapEvent",value:function(t){if(this.rootTarget){var e=this.mappingTable[t.type];if(e)for(var n=0,r=e.length;n<r;n++)e[n].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}}},{key:"dispatchEvent",value:function(t,e,n){if(n){t.eventPhase=t.AT_TARGET;var r=this.rootTarget.defaultView||null;t.currentTarget=r,this.notifyListeners(t,e)}else t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e)}},{key:"propagate",value:function(t,e){if(t.target){var n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var r=n.length-1;r>=1;r--)if(t.currentTarget=n[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){var i=n.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var a=i+1;a<n.length;a++)if(t.currentTarget=n[a],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(t){var e=[t],n=this.rootTarget.defaultView||null;if(n&&n===t)return e.unshift(n.document),e;for(var r=0;r<2048&&t!==this.rootTarget;r++)Fs.isNode(t)&&t.parentNode&&(e.push(t.parentNode),t=t.parentNode);return n&&e.push(n),e}},{key:"hitTest",value:function(t){var e=t.viewportX,n=t.viewportY,r=this.context.config,i=r.width,a=r.height,o=r.disableHitTesting;return e<0||n<0||e>i||n>a?null:!o&&this.pickHandler(t)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(t,e){var n,r=null==e?void 0:e.target;if(null!==(n=r)&&void 0!==n&&n.shadowRoot&&(r=e.composedPath()[0]),r){if(r===t)return!0;if(t&&t.contains)return t.contains(r)}return!(null==e||!e.composedPath)&&e.composedPath().indexOf(t)>-1}},{key:"getExistedHTML",value:function(t){if(t.nativeEvent.composedPath)for(var e=0,n=t.nativeEvent.composedPath();e<n.length;e++){var r=n[e],i=this.nativeHTMLMap.get(r);if(i)return i}return null}},{key:"pickTarget",value:function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})}},{key:"createPointerEvent",value:function(t,e,n,r){var i=this.allocateEvent(Ls);this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t;var a=this.getExistedHTML(i),o=this.context.contextService.getDomElement();return i.target=null!=n?n:a||this.isNativeEventFromCanvas(o,i.nativeEvent)&&this.pickTarget(i)||r,"string"==typeof e&&(i.type=e),i}},{key:"createWheelEvent",value:function(t){var e=this.allocateEvent(Rs);this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t;var n=this.getExistedHTML(e),r=this.context.contextService.getDomElement();return e.target=n||this.isNativeEventFromCanvas(r,e.nativeEvent)&&this.pickTarget(e),e}},{key:"trackingData",value:function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}},{key:"cloneWheelEvent",value:function(t){var e=this.allocateEvent(Rs);return e.nativeEvent=t.nativeEvent,e.originalEvent=t.originalEvent,this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.target=t.target,e.path=t.composedPath().slice(),e.type=t.type,e}},{key:"clonePointerEvent",value:function(t,e){var n=this.allocateEvent(Ls);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=null!=e?e:n.type,n}},{key:"copyPointerData",value:function(t,e){e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist}},{key:"copyMouseData",value:function(t,e){e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.client.copyFrom(t.client),e.movement.copyFrom(t.movement),e.canvas.copyFrom(t.canvas),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global),e.offset.copyFrom(t.offset)}},{key:"copyWheelData",value:function(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}},{key:"copyData",value:function(t,e){e.isTrusted=t.isTrusted,e.timeStamp=Yo.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.page.copyFrom(t.page),e.viewport.copyFrom(t.viewport)}},{key:"allocateEvent",value:function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=[],e.target=null,e}},{key:"freeEvent",value:function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}},{key:"notifyTarget",value:function(t,e){e=null!=e?e:t.type;var n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(e,"capture"):e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}},{key:"notifyListeners",value:function(t,e){var n=t.currentTarget.emitter,r=n._events[e];if(r)if("fn"in r)r.once&&n.removeListener(e,r.fn,void 0,!0),r.fn.call(t.currentTarget||r.context,t);else for(var i=0;i<r.length&&!t.propagationImmediatelyStopped;i++)r[i].once&&n.removeListener(e,r[i].fn,void 0,!0),r[i].fn.call(t.currentTarget||r[i].context,t)}},{key:"findMountedTarget",value:function(t){if(!t)return null;for(var e=t[t.length-1],n=t.length-2;n>=0;n--){var r=t[n];if(!(r===this.rootTarget||Fs.isNode(r)&&r.parentNode===e))break;e=t[n]}return e}},{key:"getCursor",value:function(t){for(var e=t;e;){var n=Bo(e)&&e.getAttribute("cursor");if(n)return n;e=Fs.isNode(e)&&e.parentNode}}}])}(),Bs=function(){return O((function t(){k(this,t)}),[{key:"getOrCreateCanvas",value:function(t,e){if(this.canvas)return this.canvas;if(t||ku.offscreenCanvas)this.canvas=t||ku.offscreenCanvas,this.context=this.canvas.getContext("2d",w({willReadFrequently:!0},e));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",w({willReadFrequently:!0},e)),this.context&&this.context.measureText||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",w({willReadFrequently:!0},e))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(t,e){return this.context||this.getOrCreateCanvas(t,e),this.context}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch(t){}try{return document.createElement("canvas")}catch(t){}return null}}])}(),Gs=function(t){return t[t.CAMERA_CHANGED=0]="CAMERA_CHANGED",t[t.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",t[t.NONE=2]="NONE",t}({}),Ws=function(){return O((function t(e,n){k(this,t),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new ss,initAsync:new as,dirtycheck:new us,cull:new us,beginFrame:new ss,beforeRender:new ss,render:new ss,afterRender:new ss,endFrame:new ss,destroy:new ss,pick:new os,pickSync:new us,pointerDown:new ss,pointerUp:new ss,pointerMove:new ss,pointerOut:new ss,pointerOver:new ss,pointerWheel:new ss,pointerCancel:new ss,click:new ss},this.globalRuntime=e,this.context=n}),[{key:"init",value:function(t){var e=this,n=w(w({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach((function(t){t.apply(n,e.globalRuntime)})),this.hooks.init.call(),0===this.hooks.initAsync.getCallbacksNum()?(this.inited=!0,t()):this.hooks.initAsync.promise().then((function(){e.inited=!0,t()})).catch((function(t){}))}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){return!this.context.config.renderer.getConfig().enableDirtyRectangleRendering||this.context.renderingContext.renderReasons.has(Gs.CAMERA_CHANGED)}},{key:"render",value:function(t,e,n){var r=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var i=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(i.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),i.renderReasons.size&&this.inited){i.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var a=1===i.renderReasons.size&&i.renderReasons.has(Gs.CAMERA_CHANGED),o=!t.disableRenderHooks||!(t.disableRenderHooks&&a);o&&this.renderDisplayObject(i.root,t,i),this.hooks.beginFrame.call(e),o&&i.renderListCurrentFrame.forEach((function(t){r.hooks.beforeRender.call(t),r.hooks.render.call(t),r.hooks.afterRender.call(t)})),this.hooks.endFrame.call(e),i.renderListCurrentFrame=[],i.renderReasons.clear(),n()}}},{key:"renderDisplayObject",value:function(t,e,n){var r=this,i=e.renderer.getConfig(),a=i.enableDirtyCheck,o=i.enableCulling;function s(t){var e=t.renderable,i=t.sortable,s=a?e.dirty||n.dirtyRectangleRenderingDisabled?t:null:t;if(s){var u=o?r.hooks.cull.call(s,r.context.camera):s;u&&(r.stats.rendered+=1,n.renderListCurrentFrame.push(u))}e.dirty=!1,i.renderOrder=r.zIndexCounter,r.zIndexCounter+=1,r.stats.total+=1,i.dirty&&(r.sort(t,i),i.dirty=!1,i.dirtyChildren=[],i.dirtyReason=void 0)}for(var u=[t];u.length>0;){var c=u.pop();s(c);for(var l=c.sortable.sorted||c.childNodes,f=l.length-1;f>=0;f--)u.push(l[f])}}},{key:"sort",value:function(t,e){e.sorted&&e.dirtyReason!==qr.Z_INDEX_CHANGED?e.dirtyChildren.forEach((function(n){if(-1===t.childNodes.indexOf(n)){var r=e.sorted.indexOf(n);r>=0&&e.sorted.splice(r,1)}else if(0===e.sorted.length)e.sorted.push(n);else{var i=function(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;Go(t[i],e)<0?n=i+1:r=i}return n}(e.sorted,n);e.sorted.splice(i,0,n)}})):e.sorted=t.childNodes.slice().sort(Go)}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()}},{key:"dirtify",value:function(){this.context.renderingContext.renderReasons.add(Gs.DISPLAY_OBJECT_CHANGED)}}])}(),Vs=/\[\s*(.*)=(.*)\s*\]/,Hs=function(){return O((function t(){k(this,t)}),[{key:"selectOne",value:function(t,e){var n=this;if(t.startsWith("."))return e.find((function(e){return((null==e?void 0:e.classList)||[]).indexOf(n.getIdOrClassname(t))>-1}));if(t.startsWith("#"))return e.find((function(e){return e.id===n.getIdOrClassname(t)}));if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,a=r.value;return i?e.find((function(t){return e!==t&&("name"===i?t.name===a:n.attributeToString(t,i)===a)})):null}return e.find((function(n){return e!==n&&n.nodeName===t}))}},{key:"selectAll",value:function(t,e){var n=this;if(t.startsWith("."))return e.findAll((function(r){return e!==r&&((null==r?void 0:r.classList)||[]).indexOf(n.getIdOrClassname(t))>-1}));if(t.startsWith("#"))return e.findAll((function(r){return e!==r&&r.id===n.getIdOrClassname(t)}));if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,a=r.value;return i?e.findAll((function(t){return e!==t&&("name"===i?t.name===a:n.attributeToString(t,i)===a)})):[]}return e.findAll((function(n){return e!==n&&n.nodeName===t}))}},{key:"is",value:function(t,e){if(t.startsWith("."))return e.className===this.getIdOrClassname(t);if(t.startsWith("#"))return e.id===this.getIdOrClassname(t);if(t.startsWith("[")){var n=this.getAttribute(t),r=n.name,i=n.value;return"name"===r?e.name===i:this.attributeToString(e,r)===i}return e.nodeName===t}},{key:"getIdOrClassname",value:function(t){return t.substring(1)}},{key:"getAttribute",value:function(t){var e=t.match(Vs),n="",r="";return e&&e.length>2&&(n=e[1].replace(/"/g,""),r=e[2].replace(/"/g,"")),{name:n,value:r}}},{key:"attributeToString",value:function(t,e){if(!t.getAttribute)return"";var n=t.getAttribute(e);return Me(n)?"":n.toString?n.toString():""}}])}(),Ys=function(t){return t.ATTR_MODIFIED="DOMAttrModified",t.INSERTED="DOMNodeInserted",t.MOUNTED="DOMNodeInsertedIntoDocument",t.REMOVED="removed",t.UNMOUNTED="DOMNodeRemovedFromDocument",t.REPARENT="reparent",t.DESTROY="destroy",t.BOUNDS_CHANGED="bounds-changed",t.CULLED="culled",t}({}),Us=function(t){function e(t,n,r,i,a,o,s,u){var c;return k(this,e),(c=N(this,e,[null])).relatedNode=n,c.prevValue=r,c.newValue=i,c.attrName=a,c.attrChange=o,c.prevParsedValue=s,c.newParsedValue=u,c.type=t,c}return _(e,t),O(e)}(Cs);function qs(t){var e=t.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0)}Us.ADDITION=2,Us.MODIFICATION=1,Us.REMOVAL=3;var Xs,Ks,$s,Zs=new Us(Ys.REPARENT,null,"","","",0,"",""),Qs=me(),Js=D(),tu=z(1,1,1),eu=ut(),nu=me(),ru=D(),iu=ut(),au=ue(),ou=D(),su=ue(),uu=D(),cu=D(),lu=D(),fu=ut(),du=ue(),hu=ue(),pu=ue(),vu={affectChildren:!0},gu=function(){return O((function t(e){k(this,t),this.pendingEvents=new Map,this.boundsChangedEvent=new js(Ys.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=e}),[{key:"matches",value:function(t,e){return this.runtime.sceneGraphSelector.is(t,e)}},{key:"querySelector",value:function(t,e){return this.runtime.sceneGraphSelector.selectOne(t,e)}},{key:"querySelectorAll",value:function(t,e){return this.runtime.sceneGraphSelector.selectAll(t,e)}},{key:"attach",value:function(t,e,n){var r,i=!1;t.parentNode&&(i=t.parentNode!==e,this.detach(t));var a=t.nodeName===or.FRAGMENT,o=Uo(e);t.parentNode=e;var s=a?t.childNodes:[t];Oe(n)?s.forEach((function(t){e.childNodes.splice(n,0,t),t.parentNode=e})):s.forEach((function(t){e.childNodes.push(t),t.parentNode=e}));var u=e.sortable;if((null!=u&&null!==(r=u.sorted)&&void 0!==r&&r.length||t.parsedStyle.zIndex)&&(-1===u.dirtyChildren.indexOf(t)&&u.dirtyChildren.push(t),u.dirty=!0,u.dirtyReason=qr.ADDED),!o){if(a)this.dirtifyFragment(t);else{var c=t.transformable;c&&this.dirtifyWorld(t,c)}i&&t.dispatchEvent(Zs)}}},{key:"detach",value:function(t){if(t.parentNode){var e,n,r=t.transformable,i=t.parentNode.sortable;(null!=i&&null!==(e=i.sorted)&&void 0!==e&&e.length||null!==(n=t.style)&&void 0!==n&&n.zIndex)&&(-1===i.dirtyChildren.indexOf(t)&&i.dirtyChildren.push(t),i.dirty=!0,i.dirtyReason=qr.REMOVED);var a=t.parentNode.childNodes.indexOf(t);a>-1&&t.parentNode.childNodes.splice(a,1),r&&this.dirtifyWorld(t,r),t.parentNode=null}}},{key:"getOrigin",value:function(t){return t.getGeometryBounds(),t.transformable.origin}},{key:"setOrigin",value:function(t,e){"number"==typeof e&&(e=[e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0]);var n=t.transformable;if(e[0]!==n.origin[0]||e[1]!==n.origin[1]||e[2]!==n.origin[2]){var r=n.origin;r[0]=e[0],r[1]=e[1],r[2]=e[2]||0,this.dirtifyLocal(t,n)}}},{key:"rotate",value:function(t,e){"number"==typeof e&&(e=z(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=t.transformable;if(null!==t.parentNode&&t.parentNode.transformable){var r=au;de(r,e[0],e[1],e[2]);var i=this.getRotation(t),a=this.getRotation(t.parentNode);pe(pu,a),fe(pu,pu),le(r,pu,r),le(n.localRotation,r,i),ye(n.localRotation,n.localRotation),this.dirtifyLocal(t,n)}else this.rotateLocal(t,e)}},{key:"rotateLocal",value:function(t,e){"number"==typeof e&&(e=z(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=t.transformable;de(hu,e[0],e[1],e[2]),ge(n.localRotation,n.localRotation,hu),this.dirtifyLocal(t,n)}},{key:"setEulerAngles",value:function(t,e){"number"==typeof e&&(e=z(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=t.transformable;if(null!==t.parentNode&&t.parentNode.transformable){de(n.localRotation,e[0],e[1],e[2]);var r=this.getRotation(t.parentNode);pe(du,fe(au,r)),ge(n.localRotation,n.localRotation,du),this.dirtifyLocal(t,n)}else this.setLocalEulerAngles(t,e)}},{key:"setLocalEulerAngles",value:function(t,e){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];"number"==typeof e&&(e=z(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var r=t.transformable;de(r.localRotation,e[0],e[1],e[2]),n&&this.dirtifyLocal(t,r)}},{key:"translateLocal",value:function(t,e){"number"==typeof e&&(e=z(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=t.transformable;et(e,Js)||(tt(e,e,n.localRotation),W(n.localPosition,n.localPosition,e),this.dirtifyLocal(t,n))}},{key:"setPosition",value:function(t,e){var n,r=t.transformable;if(lu[0]=e[0],lu[1]=e[1],lu[2]=null!==(n=e[2])&&void 0!==n?n:0,!et(this.getPosition(t),lu)){if(B(r.position,lu),null!==t.parentNode&&t.parentNode.transformable){var i=t.parentNode.transformable;lt(fu,i.worldTransform),vt(fu,fu),Q(r.localPosition,lu,fu)}else B(r.localPosition,lu);this.dirtifyLocal(t,r)}}},{key:"setLocalPosition",value:function(t,e){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.transformable;cu[0]=e[0],cu[1]=e[1],cu[2]=null!==(n=e[2])&&void 0!==n?n:0,et(i.localPosition,cu)||(B(i.localPosition,cu),r&&this.dirtifyLocal(t,i))}},{key:"scaleLocal",value:function(t,e){var n,r=t.transformable;H(r.localScale,r.localScale,G(ru,e[0],e[1],null!==(n=e[2])&&void 0!==n?n:1)),this.dirtifyLocal(t,r)}},{key:"setLocalScale",value:function(t,e){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.transformable;G(ru,e[0],e[1],null!==(n=e[2])&&void 0!==n?n:i.localScale[2]),et(ru,i.localScale)||(B(i.localScale,ru),r&&this.dirtifyLocal(t,i))}},{key:"translate",value:function(t,e){"number"==typeof e&&(e=G(ru,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)),et(e,Js)||(W(ru,this.getPosition(t),e),this.setPosition(t,ru))}},{key:"setRotation",value:function(t,e,n,r,i){var a=t.transformable;if("number"==typeof e&&(e=he(e,n,r,i)),null!==t.parentNode&&t.parentNode.transformable){var o=this.getRotation(t.parentNode);pe(au,o),fe(au,au),le(a.localRotation,au,e),ye(a.localRotation,a.localRotation),this.dirtifyLocal(t,a)}else this.setLocalRotation(t,e)}},{key:"setLocalRotation",value:function(t,e,n,r,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];"number"==typeof e&&(e=ve(au,e,n,r,i));var o=t.transformable;pe(o.localRotation,e),a&&this.dirtifyLocal(t,o)}},{key:"setLocalSkew",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];"number"==typeof e&&(e=xe(nu,e,n));var i=t.transformable;be(i.localSkew,e),r&&this.dirtifyLocal(t,i)}},{key:"dirtifyLocal",value:function(t,e){Uo(t)||e.localDirtyFlag||(e.localDirtyFlag=!0,e.dirtyFlag||this.dirtifyWorld(t,e))}},{key:"dirtifyWorld",value:function(t,e){e.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,e),this.dirtifyToRoot(t,!0)}},{key:"dirtifyFragment",value:function(t){var e=t.transformable;e&&(e.frozen=!1,e.dirtyFlag=!0,e.localDirtyFlag=!0);var n=t.renderable;n&&(n.renderBoundsDirty=!0,n.boundsDirty=!0,n.dirty=!0);for(var r=t.childNodes.length,i=0;i<r;i++)this.dirtifyFragment(t.childNodes[i]);t.nodeName===or.FRAGMENT&&this.pendingEvents.set(t,!1)}},{key:"triggerPendingEvents",value:function(){var t=this,e=new Set,n=function(n,r){n.isConnected&&!e.has(n)&&n.nodeName!==or.FRAGMENT&&(t.boundsChangedEvent.detail=r,t.boundsChangedEvent.target=n,n.isMutationObserved?n.dispatchEvent(t.boundsChangedEvent):n.ownerDocument.defaultView.dispatchEvent(t.boundsChangedEvent,!0),e.add(n))};this.pendingEvents.forEach((function(t,e){e.nodeName!==or.FRAGMENT&&(vu.affectChildren=t,t?e.forEach((function(t){n(t,vu)})):n(e,vu))})),e.clear(),this.clearPendingEvents()}},{key:"clearPendingEvents",value:function(){this.pendingEvents.clear()}},{key:"dirtifyToRoot",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t;for(n.renderable&&(n.renderable.dirty=!0);n;)qs(n),n=n.parentNode;e&&t.forEach((function(t){qs(t)})),this.informDependentDisplayObjects(t),this.pendingEvents.set(t,e)}},{key:"updateDisplayObjectDependency",value:function(t,e,n,r){if(e&&e!==n){var i=this.displayObjectDependencyMap.get(e);if(i&&i[t]){var a=i[t].indexOf(r);i[t].splice(a,1)}}if(n){var o=this.displayObjectDependencyMap.get(n);o||(this.displayObjectDependencyMap.set(n,{}),o=this.displayObjectDependencyMap.get(n)),o[t]||(o[t]=[]),o[t].push(r)}}},{key:"informDependentDisplayObjects",value:function(t){var e=this,n=this.displayObjectDependencyMap.get(t);n&&Object.keys(n).forEach((function(t){n[t].forEach((function(n){e.dirtifyToRoot(n,!0),n.dispatchEvent(new Us(Ys.ATTR_MODIFIED,n,e,e,t,Us.MODIFICATION,e,e)),n.isCustomElement&&n.isConnected&&n.attributeChangedCallback&&n.attributeChangedCallback(t,e,e)}))}))}},{key:"getPosition",value:function(t){var e=t.transformable;return Lt(e.position,this.getWorldTransform(t,e))}},{key:"getRotation",value:function(t){var e=t.transformable;return jt(e.rotation,this.getWorldTransform(t,e))}},{key:"getScale",value:function(t){var e=t.transformable;return Rt(e.scaling,this.getWorldTransform(t,e))}},{key:"getWorldTransform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.transformable;return e.localDirtyFlag||e.dirtyFlag?(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.sync(t,e),e.worldTransform):e.worldTransform}},{key:"getLocalPosition",value:function(t){return t.transformable.localPosition}},{key:"getLocalRotation",value:function(t){return t.transformable.localRotation}},{key:"getLocalScale",value:function(t){return t.transformable.localScale}},{key:"getLocalSkew",value:function(t){return t.transformable.localSkew}},{key:"calcLocalTransform",value:function(t){if(0!==t.localSkew[0]||0!==t.localSkew[1]){It(t.localTransform,t.localRotation,t.localPosition,z(1,1,1),t.origin),0===t.localSkew[0]&&0===t.localSkew[1]||(ht(iu),iu[4]=Math.tan(t.localSkew[0]),iu[1]=Math.tan(t.localSkew[1]),mt(t.localTransform,t.localTransform,iu));var e=It(iu,ve(au,0,0,0,1),G(ru,1,1,1),t.localScale,t.origin);mt(t.localTransform,t.localTransform,e)}else{var n=t.localTransform,r=t.localPosition,i=t.localRotation,a=t.localScale,o=t.origin,s=0!==r[0]||0!==r[1]||0!==r[2],u=1!==i[3]||0!==i[0]||0!==i[1]||0!==i[2],c=1!==a[0]||1!==a[1]||1!==a[2],l=0!==o[0]||0!==o[1]||0!==o[2];u||c||l?It(n,i,r,a,o):s?St(n,r):ht(n)}}},{key:"getLocalTransform",value:function(t){var e=t.transformable;return e.localDirtyFlag&&(this.calcLocalTransform(e),e.localDirtyFlag=!1),e.localTransform}},{key:"setLocalTransform",value:function(t,e){var n=Lt(ou,e),r=jt(su,e),i=Rt(uu,e);this.setLocalScale(t,i,!1),this.setLocalPosition(t,n,!1),this.setLocalRotation(t,r,void 0,void 0,void 0,!1),this.dirtifyLocal(t,t.transformable)}},{key:"resetLocalTransform",value:function(t){this.setLocalScale(t,tu,!1),this.setLocalPosition(t,Js,!1),this.setLocalEulerAngles(t,Js,void 0,void 0,!1),this.setLocalSkew(t,Qs,void 0,!1),this.dirtifyLocal(t,t.transformable)}},{key:"getTransformedGeometryBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.getGeometryBounds(t,e);if(!gr.isEmpty(r)){var i=n||new gr;return i.setFromTransformedAABB(r,this.getWorldTransform(t)),i}return null}},{key:"getGeometryBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.geometry;return n.dirty&&ku.styleValueRegistry.updateGeometry(t),(e?n.renderBounds:n.contentBounds||null)||new gr}},{key:"getBounds",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.renderable;if(!r.boundsDirty&&!n&&r.bounds)return r.bounds;if(!r.renderBoundsDirty&&n&&r.renderBounds)return r.renderBounds;var i=n?r.renderBounds:r.bounds,a=this.getTransformedGeometryBounds(t,n,i);if(t.childNodes.forEach((function(t){var r=e.getBounds(t,n);r&&(a?a.add(r):(a=i||new gr).update(r.center,r.halfExtents))})),a||(a=new gr),n){var o=Wo(t);if(o){var s=o.parsedStyle.clipPath.getBounds(n);a?s&&(a=s.intersection(a)):a.update(s.center,s.halfExtents)}}return n?(r.renderBounds=a,r.renderBoundsDirty=!1):(r.bounds=a,r.boundsDirty=!1),a}},{key:"getLocalBounds",value:function(t){if(t.parentNode){var e=eu;t.parentNode.transformable&&(e=vt(iu,this.getWorldTransform(t.parentNode)));var n=this.getBounds(t);if(!gr.isEmpty(n)){var r=new gr;return r.setFromTransformedAABB(n,e),r}}return this.getBounds(t)}},{key:"getBoundingClientRect",value:function(t){var e,n,r=this.getGeometryBounds(t);gr.isEmpty(r)||(n=new gr).setFromTransformedAABB(r,this.getWorldTransform(t));var i=null===(e=t.ownerDocument)||void 0===e||null===(e=e.defaultView)||void 0===e?void 0:e.getContextService().getBoundingClientRect();if(n){var a=g(n.getMin(),2),o=a[0],s=a[1],u=g(n.getMax(),2),c=u[0],l=u[1];return new wr(o+((null==i?void 0:i.left)||0),s+((null==i?void 0:i.top)||0),c-o,l-s)}return new wr((null==i?void 0:i.left)||0,(null==i?void 0:i.top)||0,0,0)}},{key:"dirtifyWorldInternal",value:function(t,e){var n=this;if(!e.dirtyFlag){e.dirtyFlag=!0,e.frozen=!1,t.childNodes.forEach((function(t){var e=t.transformable;e.dirtyFlag||n.dirtifyWorldInternal(t,e)}));var r=t.renderable;r&&(r.renderBoundsDirty=!0,r.boundsDirty=!0,r.dirty=!0)}}},{key:"syncHierarchy",value:function(t){var e=t.transformable;if(!e.frozen){e.frozen=!0,(e.localDirtyFlag||e.dirtyFlag)&&this.sync(t,e);for(var n=t.childNodes,r=0;r<n.length;r++)this.syncHierarchy(n[r])}}},{key:"sync",value:function(t,e){if(e.localDirtyFlag&&(this.calcLocalTransform(e),e.localDirtyFlag=!1),e.dirtyFlag){var n=t.parentNode,r=n&&n.transformable;null!==n&&r?mt(e.worldTransform,r.worldTransform,e.localTransform):lt(e.worldTransform,e.localTransform),e.dirtyFlag=!1}}},{key:"unfreezeParentToRoot",value:function(t){for(var e=t.parentNode;e;){var n=e.transformable;n&&(n.frozen=!1),e=e.parentNode}}}])}(),yu={MetricsString:"|ÉqÅ",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},mu=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,bu=new RegExp("".concat(/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/.source,"|").concat(/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/.source,"|").concat(/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/.source,"|").concat(/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/.source)),xu=new RegExp("".concat(/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/.source,"|").concat(/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/.source,"|").concat(/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/.source,"|").concat(/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/.source)),wu=function(){return O((function t(e){var n=this;k(this,t),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(t,e){return!n.isBreakingSpace(e)&&!(!t||!xu.exec(e)&&!bu.exec(t))},this.trimByKinsokuShorui=function(t){var e=M(t),n=e[e.length-2];if(!n)return t;var r=n[n.length-1];return e[e.length-2]=n.slice(0,-1),e[e.length-1]=r+e[e.length-1],e},this.runtime=e}),[{key:"measureFont",value:function(t,e){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var n={ascent:0,descent:0,fontSize:0},r=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(e),i=this.runtime.offscreenCanvasCreator.getOrCreateContext(e,{willReadFrequently:!0});i.font=t;var a=yu.MetricsString+yu.BaselineSymbol,o=Math.ceil(i.measureText(a).width),s=Math.ceil(i.measureText(yu.BaselineSymbol).width),u=yu.HeightMultiplier*s;s=s*yu.BaselineMultiplier|0,r.width=o,r.height=u,i.fillStyle="#f00",i.fillRect(0,0,o,u),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a,0,s);var c=i.getImageData(0,0,o||1,u||1).data,l=c.length,f=4*o,d=0,h=0,p=!1;for(d=0;d<s;++d){for(var v=0;v<f;v+=4)if(255!==c[h+v]){p=!0;break}if(p)break;h+=f}for(n.ascent=s-d,h=l-f,p=!1,d=u;d>s;--d){for(var g=0;g<f;g+=4)if(255!==c[h+g]){p=!0;break}if(p)break;h-=f}return n.descent=d-s,n.fontSize=n.ascent+n.descent,this.fontMetricsCache[t]=n,n}},{key:"measureText",value:function(t,e,n){var r=e.fontSize,i=void 0===r?16:r,a=e.wordWrap,o=void 0!==a&&a,s=e.lineHeight,u=e.lineWidth,c=void 0===u?1:u,l=e.textBaseline,f=void 0===l?"alphabetic":l,d=e.textAlign,h=void 0===d?"start":d,p=e.letterSpacing,v=void 0===p?0:p,g=e.textPath;e.textPathSide,e.textPathStartOffset;var y=e.leading,m=void 0===y?0:y,b=function(t){for(var e=t.fontSize,n=void 0===e?16:e,r=t.fontFamily,i=void 0===r?"sans-serif":r,a=t.fontStyle,o=void 0===a?"normal":a,s=t.fontVariant,u=void 0===s?"normal":s,c=t.fontWeight,l=void 0===c?"normal":c,f=Oe(n)&&"".concat(n,"px")||"16px",d=i.split(","),h=d.length-1;h>=0;h--){var p=d[h].trim();!ls.test(p)&&cs.indexOf(p)<0&&(p='"'.concat(p,'"')),d[h]=p}return"".concat(o," ").concat(u," ").concat(l," ").concat(f," ").concat(d.join(","))}(e),x=this.measureFont(b,n);0===x.fontSize&&(x.fontSize=i,x.ascent=i);var w=this.runtime.offscreenCanvasCreator.getOrCreateContext(n);w.font=b,e.isOverflowing=!1;var k=(o?this.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),E=new Array(k.length),O=0;if(!g){for(var S=0;S<k.length;S++){var M=w.measureText(k[S]).width+(k[S].length-1)*v;E[S]=M,O=Math.max(O,M)}var T=O+c,A=s||x.fontSize+c,P=Math.max(A,x.fontSize+c)+(k.length-1)*(A+m),N=0;return"middle"===f?N=-P/2:"bottom"===f||"alphabetic"===f||"ideographic"===f?N=-P:"top"!==f&&"hanging"!==f||(N=0),{font:b,width:T,height:P,lines:k,lineWidths:E,lineHeight:A+=m,maxLineWidth:O,fontProperties:x,lineMetrics:E.map((function(t,e){var n=0;return"center"===h||"middle"===h?n-=t/2:"right"!==h&&"end"!==h||(n-=t),new wr(n-c/2,N+e*A,t+c,A)}))}}g.getTotalLength();for(var C=0;C<k.length;C++)w.measureText(k[C]).width,k[C].length}},{key:"wordWrap",value:function(t,e,n){var r=this,i=this,a=e.wordWrapWidth,o=void 0===a?0:a,s=e.letterSpacing,u=void 0===s?0:s,c=e.maxLines,l=void 0===c?1/0:c,f=e.textOverflow,d=this.runtime.offscreenCanvasCreator.getOrCreateContext(n),h=o+u,p="";"ellipsis"===f?p="...":f&&"clip"!==f&&(p=f);var v=Array.from(t),g=[],y=0,m=0,b=0,x={},w=function(t){return r.getFromCache(t,u,x,d)},k=w(p);function E(t,e,n,r){for(;w(t)<r&&e<v.length-1&&!i.isNewline(v[e+1]);)t+=v[e+=1];for(;w(t)>r&&e>n;)e-=1,t=t.slice(0,-1);return{lineTxt:t,txtLastCharIndex:e}}function O(t,e){if(!(k<=0||k>h))if(g[t]){var n=E(g[t],e,b+1,h-k);g[t]=n.lineTxt+p}else g[t]=p}for(var S=0;S<v.length;S++){var M=v[S],T=v[S-1],A=v[S+1],P=w(M);if(this.isNewline(M)){if(y+1>=l){e.isOverflowing=!0,S<v.length-1&&O(y,S-1);break}b=S-1,m=0,g[y+=1]=""}else{if(m>0&&m+P>h){var N=E(g[y],S-1,b+1,h);if(N.txtLastCharIndex!==S-1){if(g[y]=N.lineTxt,N.txtLastCharIndex===v.length-1)break;S=N.txtLastCharIndex+1,M=v[S],T=v[S-1],A=v[S+1],P=w(M)}if(y+1>=l){e.isOverflowing=!0,O(y,S-1);break}if(b=S-1,m=0,g[y+=1]="",this.isBreakingSpace(M))continue;this.canBreakInLastChar(M)||(g=this.trimToBreakable(g),m=this.sumTextWidthByCache(g[y]||"",w)),this.shouldBreakByKinsokuShorui(M,A)&&(g=this.trimByKinsokuShorui(g),m+=w(T||""))}m+=P,g[y]=(g[y]||"")+M}}return g.join("\n")}},{key:"isBreakingSpace",value:function(t){return"string"==typeof t&&yu.BreakingSpaces.indexOf(t.charCodeAt(0))>=0}},{key:"isNewline",value:function(t){return"string"==typeof t&&yu.Newlines.indexOf(t.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(t){var e=M(t),n=e[e.length-2],r=this.findBreakableIndex(n);if(-1===r||!n)return e;var i=n.slice(r,r+1),a=r+1,o=r+(this.isBreakingSpace(i)?0:1);return e[e.length-1]+=n.slice(a,n.length),e[e.length-2]=n.slice(0,o),e}},{key:"canBreakInLastChar",value:function(t){return!t||!mu.test(t)}},{key:"sumTextWidthByCache",value:function(t,e){return t.split("").reduce((function(t,n){return t+e(n)}),0)}},{key:"findBreakableIndex",value:function(t){for(var e=t.length-1;e>=0;e--)if(!mu.test(t[e]))return e;return-1}},{key:"getFromCache",value:function(t,e,n,r){var i=n[t];if("number"!=typeof i){var a=t.length*e;i=r.measureText(t).width+a,n[t]=i}return i}}])}(),ku={},Eu=(Ks=new Ts,$s=new Ms,b(b(b(b(b(b(b(b(b(b(Xs={},or.FRAGMENT,null),or.CIRCLE,new ks),or.ELLIPSE,new Es),or.RECT,Ks),or.IMAGE,Ks),or.GROUP,new Ps),or.LINE,new Os),or.TEXT,new As(ku)),or.POLYLINE,$s),or.POLYGON,$s),b(b(b(Xs,or.PATH,new Ss),or.HTML,new Ns),or.MESH,null)),Ou=function(t){var e=new Eo,n=new Mo;return b(b(b(b(b(b(b(b(b(b(t={},Kr.PERCENTAGE,null),Kr.NUMBER,new No),Kr.ANGLE,new wo),Kr.DEFINED_PATH,new ko),Kr.PAINT,e),Kr.COLOR,e),Kr.FILTER,new Oo),Kr.LENGTH,n),Kr.LENGTH_PERCENTAGE,n),Kr.LENGTH_PERCENTAGE_12,new To),b(b(b(b(b(b(b(b(b(b(t,Kr.LENGTH_PERCENTAGE_14,new Ao),Kr.COORDINATE,new Mo),Kr.OFFSET_DISTANCE,new Co),Kr.OPACITY_VALUE,new _o),Kr.PATH,new Lo),Kr.LIST_OF_POINTS,new Ro),Kr.SHADOW_BLUR,new jo),Kr.TEXT,new Do),Kr.TEXT_TRANSFORM,new Io),Kr.TRANSFORM,new bs),b(b(b(t,Kr.TRANSFORM_ORIGIN,new xs),Kr.Z_INDEX,new ws),Kr.MARKER,new Po)}();ku.CameraContribution=Yr,ku.AnimationTimeline=null,ku.EasingFunction=null,ku.offscreenCanvasCreator=new Bs,ku.sceneGraphSelector=new Hs,ku.sceneGraphService=new gu(ku),ku.textService=new wu(ku),ku.geometryUpdaterFactory=Eu,ku.CSSPropertySyntaxFactory=Ou,ku.styleValueRegistry=new bo(ku),ku.layoutRegistry=null,ku.globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==s.g?s.g:{},ku.enableStyleSyntax=!0,ku.enableSizeAttenuation=!1;var Su=0,Mu=new Us(Ys.INSERTED,null,"","","",0,"",""),Tu=new Us(Ys.REMOVED,null,"","","",0,"",""),Au=new js(Ys.DESTROY),Pu=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).entity=Su++,t.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},t.cullable={strategy:Ur.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},t.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},t.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},t.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},t.rBushNode={aabb:void 0},t.namespaceURI="g",t.scrollLeft=0,t.scrollTop=0,t.clientTop=0,t.clientLeft=0,t.destroyed=!1,t.style={},t.computedStyle={},t.parsedStyle={},t.attributes={},t}return _(e,t),O(e,[{key:"className",get:function(){return this.getAttribute("class")||""},set:function(t){this.setAttribute("class",t)}},{key:"classList",get:function(){return this.className.split(" ").filter((function(t){return""!==t}))}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t-1]||null}return null}},{key:"cloneNode",value:function(t){throw new Error(kr)}},{key:"appendChild",value:function(t,e){var n;if(t.destroyed)throw new Error("Cannot append a destroyed element.");return ku.sceneGraphService.attach(t,this,e),null!==(n=this.ownerDocument)&&void 0!==n&&n.defaultView&&(Uo(this)||t.nodeName!==or.FRAGMENT?this.ownerDocument.defaultView.mountChildren(t):this.ownerDocument.defaultView.mountFragment(t)),this.isMutationObserved&&(Mu.relatedNode=this,t.dispatchEvent(Mu)),t}},{key:"insertBefore",value:function(t,e){if(e){t.parentElement&&t.parentElement.removeChild(t);var n=this.childNodes.indexOf(e);-1===n?this.appendChild(t):this.appendChild(t,n)}else this.appendChild(t);return t}},{key:"replaceChild",value:function(t,e){var n=this.childNodes.indexOf(e);return this.removeChild(e),this.appendChild(t,n),e}},{key:"removeChild",value:function(t){var e;return Tu.relatedNode=this,t.dispatchEvent(Tu),null!==(e=t.ownerDocument)&&void 0!==e&&e.defaultView&&t.ownerDocument.defaultView.unmountChildren(t),ku.sceneGraphService.detach(t),t}},{key:"removeChildren",value:function(){for(var t=this.childNodes.length-1;t>=0;t--){var e=this.childNodes[t];this.removeChild(e)}}},{key:"destroyChildren",value:function(){for(var t=this.childNodes.length-1;t>=0;t--){var e=this.childNodes[t];e.childNodes.length>0&&e.destroyChildren(),e.destroy()}}},{key:"matches",value:function(t){return ku.sceneGraphService.matches(t,this)}},{key:"getElementById",value:function(t){return ku.sceneGraphService.querySelector("#".concat(t),this)}},{key:"getElementsByName",value:function(t){return ku.sceneGraphService.querySelectorAll('[name="'.concat(t,'"]'),this)}},{key:"getElementsByClassName",value:function(t){return ku.sceneGraphService.querySelectorAll(".".concat(t),this)}},{key:"getElementsByTagName",value:function(t){return ku.sceneGraphService.querySelectorAll(t,this)}},{key:"querySelector",value:function(t){return ku.sceneGraphService.querySelector(t,this)}},{key:"querySelectorAll",value:function(t){return ku.sceneGraphService.querySelectorAll(t,this)}},{key:"closest",value:function(t){var e=this;do{if(ku.sceneGraphService.matches(t,e))return e;e=e.parentElement}while(null!==e);return null}},{key:"find",value:function(t){var e=this,n=null;return this.forEach((function(r){return r===e||!t(r)||(n=r,!1)})),n}},{key:"findAll",value:function(t){var e=this,n=[];return this.forEach((function(r){r!==e&&t(r)&&n.push(r)})),n}},{key:"after",value:function(){var t=this;if(this.parentNode){for(var e=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(n,r){var i;return null===(i=t.parentNode)||void 0===i?void 0:i.appendChild(n,e+r+1)}))}}},{key:"before",value:function(){if(this.parentNode){for(var t,e=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r[0],o=r.slice(1);this.parentNode.appendChild(a,e),(t=a).after.apply(t,M(o))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e){return t.appendChild(e)}))}},{key:"prepend",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e,n){return t.appendChild(e,n)}))}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){this.destroyChildren(),this.dispatchEvent(Au),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){return ku.sceneGraphService.getGeometryBounds(this)}},{key:"getRenderBounds",value:function(){return ku.sceneGraphService.getBounds(this,!0)}},{key:"getBounds",value:function(){return ku.sceneGraphService.getBounds(this)}},{key:"getLocalBounds",value:function(){return ku.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return ku.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(t){if("symbol"!=typeof t)return this.attributes[t]}},{key:"hasAttribute",value:function(t){return this.getAttributeNames().includes(t)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(t){this.setAttribute(t,null),delete this.attributes[t]}},{key:"setAttribute",value:function(t,e,n,r){this.attributes[t]=e}},{key:"getAttributeNS",value:function(t,e){throw new Error(kr)}},{key:"getAttributeNode",value:function(t){throw new Error(kr)}},{key:"getAttributeNodeNS",value:function(t,e){throw new Error(kr)}},{key:"hasAttributeNS",value:function(t,e){throw new Error(kr)}},{key:"removeAttributeNS",value:function(t,e){throw new Error(kr)}},{key:"removeAttributeNode",value:function(t){throw new Error(kr)}},{key:"setAttributeNS",value:function(t,e,n){throw new Error(kr)}},{key:"setAttributeNode",value:function(t){throw new Error(kr)}},{key:"setAttributeNodeNS",value:function(t){throw new Error(kr)}},{key:"toggleAttribute",value:function(t,e){throw new Error(kr)}}])}(Fs);function Nu(t){return!(null==t||!t.nodeName)}var Cu=ku.globalThis.Proxy?ku.globalThis.Proxy:function(){},_u=new Us(Ys.ATTR_MODIFIED,null,null,null,null,Us.MODIFICATION,null,null),Lu=D(),Ru=ue(),ju=function(t){function e(t){var n;return k(this,e),(n=N(this,e)).isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=t,n.id=t.id||"",n.name=t.name||"",(t.className||t.class)&&(n.className=t.className||t.class),n.nodeName=t.type||or.GROUP,t.initialParsedStyle&&Object.assign(n.parsedStyle,t.initialParsedStyle),n.initAttributes(t.style),ku.enableStyleSyntax&&(n.style=new Cu({setProperty:function(t,e){n.setAttribute(t,e)},getPropertyValue:function(t){return n.getAttribute(t)},removeProperty:function(t){n.removeAttribute(t)},item:function(){return""}},{get:function(t,e){return void 0!==t[e]?t[e]:n.getAttribute(e)},set:function(t,e,r){return n.setAttribute(e,r),!0}})),n}return _(e,t),O(e,[{key:"destroy",value:function(){Dn(e,"destroy",this,3)([]),this.getAnimations().forEach((function(t){t.cancel()}))}},{key:"cloneNode",value:function(t,e){var n=w({},this.attributes);for(var r in n){var i=n[r];Nu(i)&&"clipPath"!==r&&"offsetPath"!==r&&"textPath"!==r&&(n[r]=i.cloneNode(t)),e&&(n[r]=e(r,i))}var a=new this.constructor(w(w({},this.config),{},{style:n}));return a.setLocalTransform(this.getLocalTransform()),t&&this.children.forEach((function(e){if(!e.style.isMarker){var n=e.cloneNode(t);a.appendChild(n)}})),a}},{key:"initAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ku.styleValueRegistry.processProperties(this,t,{forceUpdateGeometry:!0}),this.renderable.dirty=!0}},{key:"setAttribute",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];An(n)||(r||n!==this.attributes[t])&&(this.internalSetAttribute(t,n,{memoize:i}),Dn(e,"setAttribute",this,3)([t,n]))}},{key:"internalSetAttribute",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.renderable,i=this.attributes[t],a=this.parsedStyle[t];ku.styleValueRegistry.processProperties(this,b({},t,e),n),r.dirty=!0;var o,s=this.parsedStyle[t];this.isConnected&&(_u.relatedNode=this,_u.prevValue=i,_u.newValue=e,_u.attrName=t,_u.prevParsedValue=a,_u.newParsedValue=s,this.isMutationObserved?this.dispatchEvent(_u):(_u.target=this,this.ownerDocument.defaultView.dispatchEvent(_u,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&(null===(o=this.attributeChangedCallback)||void 0===o||o.call(this,t,i,e,a,s))}},{key:"getBBox",value:function(){var t=this.getBounds(),e=g(t.getMin(),2),n=e[0],r=e[1],i=g(t.getMax(),2),a=i[0],o=i[1];return new wr(n,r,a-n,o-r)}},{key:"setOrigin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ku.sceneGraphService.setOrigin(this,Mr(t,e,n,!1)),this}},{key:"getOrigin",value:function(){return ku.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ku.sceneGraphService.setPosition(this,Mr(t,e,n,!1)),this}},{key:"setLocalPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ku.sceneGraphService.setLocalPosition(this,Mr(t,e,n,!1)),this}},{key:"translate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ku.sceneGraphService.translate(this,Mr(t,e,n,!1)),this}},{key:"translateLocal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ku.sceneGraphService.translateLocal(this,Mr(t,e,n,!1)),this}},{key:"getPosition",value:function(){return ku.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return ku.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(t,e,n){return this.scaleLocal(t,e,n)}},{key:"scaleLocal",value:function(t,e,n){return"number"==typeof t&&(t=Mr(t,e=e||t,n=n||t,!1)),ku.sceneGraphService.scaleLocal(this,t),this}},{key:"setLocalScale",value:function(t,e,n){return"number"==typeof t&&(t=Mr(t,e=e||t,n=n||t,!1)),ku.sceneGraphService.setLocalScale(this,t),this}},{key:"getLocalScale",value:function(){return ku.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return ku.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){return Nr(g(_r(Lu,ku.sceneGraphService.getWorldTransform(this)),3)[2])}},{key:"getLocalEulerAngles",value:function(){return Nr(g(_r(Lu,ku.sceneGraphService.getLocalRotation(this)),3)[2])}},{key:"setEulerAngles",value:function(t){return ku.sceneGraphService.setEulerAngles(this,0,0,t),this}},{key:"setLocalEulerAngles",value:function(t){return ku.sceneGraphService.setLocalEulerAngles(this,0,0,t),this}},{key:"rotateLocal",value:function(t,e,n){return Me(e)&&Me(n)?ku.sceneGraphService.rotateLocal(this,0,0,t):ku.sceneGraphService.rotateLocal(this,t,e,n),this}},{key:"rotate",value:function(t,e,n){return Me(e)&&Me(n)?ku.sceneGraphService.rotate(this,0,0,t):ku.sceneGraphService.rotate(this,t,e,n),this}},{key:"setRotation",value:function(t,e,n,r){return ku.sceneGraphService.setRotation(this,t,e,n,r),this}},{key:"setLocalRotation",value:function(t,e,n,r){return ku.sceneGraphService.setLocalRotation(this,t,e,n,r),this}},{key:"setLocalSkew",value:function(t,e){return ku.sceneGraphService.setLocalSkew(this,t,e),this}},{key:"getRotation",value:function(){return ku.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return ku.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return ku.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return ku.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return ku.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(t){return ku.sceneGraphService.setLocalTransform(this,t),this}},{key:"resetLocalTransform",value:function(){ku.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(t,e){var n,r=null===(n=this.ownerDocument)||void 0===n?void 0:n.timeline;return r?r.play(this,t,e):null}},{key:"isVisible",value:function(){var t;return"hidden"!==(null===(t=this.parsedStyle)||void 0===t?void 0:t.visibility)}},{key:"interactive",get:function(){return this.isInteractive()},set:function(t){this.style.pointerEvents=t?"auto":"none"}},{key:"isInteractive",value:function(){var t;return"none"!==(null===(t=this.parsedStyle)||void 0===t?void 0:t.pointerEvents)}},{key:"isCulled",value:function(){return!(!this.cullable||!this.cullable.enable||this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,M(this.parentNode.children.map((function(t){return Number(t.style.zIndex)}))))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,M(this.parentNode.children.map((function(t){return Number(t.style.zIndex)}))))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1];return i?Ln(i)?(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),this):2===n.length?(this.setAttribute(i,a),this):this.attributes[i]:this.attributes}},{key:"getMatrix",value:function(t){var e=t||this.getWorldTransform(),n=g(Lt(Lu,e),2),r=n[0],i=n[1],a=g(Rt(Lu,e),2),o=a[0],s=a[1],u=jt(Ru,e),c=g(_r(Lu,u),3),l=c[0],f=c[2];return function(t,e,n,r,i){var a=Math.cos(t),o=Math.sin(t);return se(r*a,i*o,0,-r*o,i*a,0,e,n,1)}(l||f,r,i,o,s)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(t){var e=g(Lr(t),5),n=e[0],r=e[1],i=e[2],a=e[3],o=e[4];this.setEulerAngles(o).setPosition(n,r).setLocalScale(i,a)}},{key:"setLocalMatrix",value:function(t){var e=g(Lr(t),5),n=e[0],r=e[1],i=e[2],a=e[3],o=e[4];this.setLocalEulerAngles(o).setLocalPosition(n,r).setLocalScale(i,a)}},{key:"show",value:function(){this.forEach((function(t){t.style.visibility="visible"}))}},{key:"hide",value:function(){this.forEach((function(t){t.style.visibility="hidden"}))}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(t){return this.children[t]||null}},{key:"add",value:function(t,e){return this.appendChild(t,e)}},{key:"set",value:function(t,e){this.config[t]=e}},{key:"get",value:function(t){return this.config[t]}},{key:"moveTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(t,e,n),this}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(t,e,n),this}},{key:"setZIndex",value:function(t){return this.style.zIndex=t,this}}])}(Pu);ju.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var Du=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,e),N(this,e,[w({type:or.CIRCLE},t)])}return _(e,t),O(e)}(ju);Du.PARSED_STYLE_LIST=new Set([].concat(M(ju.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var Iu=["style"],Fu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=rr(n,Iu);return k(this,e),(t=N(this,e,[w({style:r},i)])).isCustomElement=!0,t}return _(e,t),O(e)}(ju);Fu.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var zu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,e),N(this,e,[w({type:or.ELLIPSE},t)])}return _(e,t),O(e)}(ju);zu.PARSED_STYLE_LIST=new Set([].concat(M(ju.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"])),(function(t){function e(){return k(this,e),N(this,e,[{type:or.FRAGMENT}])}return _(e,t),O(e)}(ju)).PARSED_STYLE_LIST=new Set(["class","className"]);var Bu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,e),N(this,e,[w({type:or.GROUP},t)])}return _(e,t),O(e)}(ju);Bu.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var Gu=["style"],Wu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=rr(n,Gu);return k(this,e),(t=N(this,e,[w({type:or.HTML,style:r},i)])).cullable.enable=!1,t}return _(e,t),O(e,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var t=vt(ut(),this.parentNode.getWorldTransform()),e=this.getBounds();if(!gr.isEmpty(e)){var n=new gr;return n.setFromTransformedAABB(e,t),n}}return this.getBounds()}}])}(ju);Wu.PARSED_STYLE_LIST=new Set([].concat(M(ju.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var Vu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,e),N(this,e,[w({type:or.IMAGE},t)])}return _(e,t),O(e)}(ju);Vu.PARSED_STYLE_LIST=new Set([].concat(M(ju.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var Hu=["style"],Yu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=rr(n,Hu);k(this,e),(t=N(this,e,[w({type:or.LINE,style:w({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},r)},i)])).markerStartAngle=0,t.markerEndAngle=0;var a=t.parsedStyle,o=a.markerStart,s=a.markerEnd;return o&&Nu(o)&&(t.markerStartAngle=o.getLocalEulerAngles(),t.appendChild(o)),s&&Nu(s)&&(t.markerEndAngle=s.getLocalEulerAngles(),t.appendChild(s)),t.transformMarker(!0),t.transformMarker(!1),t}return _(e,t),O(e,[{key:"attributeChangedCallback",value:function(t,e,n,r,i){"x1"===t||"y1"===t||"x2"===t||"y2"===t||"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&Nu(r)&&(this.markerStartAngle=0,r.remove()),i&&Nu(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t&&(r&&Nu(r)&&(this.markerEndAngle=0,r.remove()),i&&Nu(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1)))}},{key:"transformMarker",value:function(t){var e,n,r,i,a,o,s,u=this.parsedStyle,c=u.markerStart,l=u.markerEnd,f=u.markerStartOffset,d=u.markerEndOffset,h=u.x1,p=u.x2,v=u.y1,g=u.y2,y=t?c:l;y&&Nu(y)&&(t?(i=h,a=v,n=p-h,r=g-v,o=f||0,s=this.markerStartAngle):(i=p,a=g,n=h-p,r=v-g,o=d||0,s=this.markerEndAngle),e=Math.atan2(r,n),y.setLocalEulerAngles(180*e/Math.PI+s),y.setLocalPosition(i+Math.cos(e)*o,a+Math.sin(e)*o))}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle,r=Hn(n.x1,n.y1,n.x2,n.y2,t),i=r.x,a=r.y,o=Q(D(),z(i,a,0),e?this.getWorldTransform():this.getLocalTransform());return new xr(o[0],o[1])}},{key:"getPointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(t/this.getTotalLength(),e)}},{key:"getTotalLength",value:function(){var t=this.parsedStyle;return Vn(t.x1,t.y1,t.x2,t.y2)}}])}(ju);Yu.PARSED_STYLE_LIST=new Set([].concat(M(ju.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var Uu=["style"],qu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=rr(n,Uu);k(this,e),(t=N(this,e,[w({type:or.PATH,style:r,initialParsedStyle:{miterLimit:4,d:w({},Xr)}},i)])).markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var a=t.parsedStyle,o=a.markerStart,s=a.markerEnd,u=a.markerMid;return o&&Nu(o)&&(t.markerStartAngle=o.getLocalEulerAngles(),t.appendChild(o)),u&&Nu(u)&&t.placeMarkerMid(u),s&&Nu(s)&&(t.markerEndAngle=s.getLocalEulerAngles(),t.appendChild(s)),t.transformMarker(!0),t.transformMarker(!1),t}return _(e,t),O(e,[{key:"attributeChangedCallback",value:function(t,e,n,r,i){"d"===t?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&Nu(r)&&(this.markerStartAngle=0,r.remove()),i&&Nu(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t?(r&&Nu(r)&&(this.markerEndAngle=0,r.remove()),i&&Nu(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===t&&this.placeMarkerMid(i)}},{key:"transformMarker",value:function(t){var e=this.parsedStyle,n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,o=t?n:r;if(o&&Nu(o)){var s,u,c,l,f,d,h;if(t){var p=g(this.getStartTangent(),2),v=p[0],y=p[1];l=y[0],f=y[1],u=v[0]-y[0],c=v[1]-y[1],d=i||0,h=this.markerStartAngle}else{var m=g(this.getEndTangent(),2),b=m[0],x=m[1];l=x[0],f=x[1],u=b[0]-x[0],c=b[1]-x[1],d=a||0,h=this.markerEndAngle}s=Math.atan2(c,u),o.setLocalEulerAngles(180*s/Math.PI+h),o.setLocalPosition(l+Math.cos(s)*d,f+Math.sin(s)*d)}}},{key:"placeMarkerMid",value:function(t){var e=this.parsedStyle.d.segments;if(this.markerMidList.forEach((function(t){t.remove()})),t&&Nu(t))for(var n=1;n<e.length-1;n++){var r=g(e[n].currentPoint,2),i=r[0],a=r[1],o=1===n?t:t.cloneNode(!0);this.markerMidList.push(o),this.appendChild(o),o.setLocalPosition(i,a)}}},{key:"getTotalLength",value:function(){return _a(this)}},{key:"getPointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Rn(this.parsedStyle.d.absolutePath,t),r=n.x,i=n.y,a=Q(D(),z(r,i,0),e?this.getWorldTransform():this.getLocalTransform());return new xr(a[0],a[1])}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPointAtLength(t*_a(this),e)}},{key:"getStartTangent",value:function(){var t=this.parsedStyle.d.segments,e=[];if(t.length>1){var n=t[0].currentPoint,r=t[1].currentPoint,i=t[1].startTangent;e=[],i?(e.push([n[0]-i[0],n[1]-i[1]]),e.push([n[0],n[1]])):(e.push([r[0],r[1]]),e.push([n[0],n[1]]))}return e}},{key:"getEndTangent",value:function(){var t=this.parsedStyle.d.segments,e=t.length,n=[];if(e>1){var r=t[e-2].currentPoint,i=t[e-1].currentPoint,a=t[e-1].endTangent;n=[],a?(n.push([i[0]-a[0],i[1]-a[1]]),n.push([i[0],i[1]])):(n.push([r[0],r[1]]),n.push([i[0],i[1]]))}return n}}])}(ju);qu.PARSED_STYLE_LIST=new Set([].concat(M(ju.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var Xu=["style"],Ku=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=rr(n,Xu);k(this,e),(t=N(this,e,[w({type:or.POLYGON,style:r,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},i)])).markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var a=t.parsedStyle,o=a.markerStart,s=a.markerEnd,u=a.markerMid;return o&&Nu(o)&&(t.markerStartAngle=o.getLocalEulerAngles(),t.appendChild(o)),u&&Nu(u)&&t.placeMarkerMid(u),s&&Nu(s)&&(t.markerEndAngle=s.getLocalEulerAngles(),t.appendChild(s)),t.transformMarker(!0),t.transformMarker(!1),t}return _(e,t),O(e,[{key:"attributeChangedCallback",value:function(t,e,n,r,i){"points"===t?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&Nu(r)&&(this.markerStartAngle=0,r.remove()),i&&Nu(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t?(r&&Nu(r)&&(this.markerEndAngle=0,r.remove()),i&&Nu(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===t&&this.placeMarkerMid(i)}},{key:"transformMarker",value:function(t){var e=this.parsedStyle,n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,o=(e.points||{}).points,s=t?n:r;if(s&&Nu(s)&&o){var u,c,l,f,d,h,p;if(f=o[0][0],d=o[0][1],t)c=o[1][0]-o[0][0],l=o[1][1]-o[0][1],h=i||0,p=this.markerStartAngle;else{var v=o.length;this.parsedStyle.isClosed?(c=o[v-1][0]-o[0][0],l=o[v-1][1]-o[0][1]):(f=o[v-1][0],d=o[v-1][1],c=o[v-2][0]-o[v-1][0],l=o[v-2][1]-o[v-1][1]),h=a||0,p=this.markerEndAngle}u=Math.atan2(l,c),s.setLocalEulerAngles(180*u/Math.PI+p),s.setLocalPosition(f+Math.cos(u)*h,d+Math.sin(u)*h)}}},{key:"placeMarkerMid",value:function(t){var e=(this.parsedStyle.points||{}).points;if(this.markerMidList.forEach((function(t){t.remove()})),this.markerMidList=[],t&&Nu(t)&&e)for(var n=1;n<(this.parsedStyle.isClosed?e.length:e.length-1);n++){var r=e[n][0],i=e[n][1],a=1===n?t:t.cloneNode(!0);this.markerMidList.push(a),this.appendChild(a),a.setLocalPosition(r,i)}}}])}(ju);Ku.PARSED_STYLE_LIST=new Set([].concat(M(ju.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var $u=["style"],Zu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.style,r=rr(t,$u);return k(this,e),N(this,e,[w({type:or.POLYLINE,style:n,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},r)])}return _(e,t),O(e,[{key:"getTotalLength",value:function(){return La(this)}},{key:"getPointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(t/this.getTotalLength(),e)}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle.points.points;if(0===this.parsedStyle.points.segments.length){var r,i,a=[],o=0,s=this.getTotalLength();n.forEach((function(t,e){n[e+1]&&((r=[0,0])[0]=o/s,i=Vn(t[0],t[1],n[e+1][0],n[e+1][1]),o+=i,r[1]=o/s,a.push(r))})),this.parsedStyle.points.segments=a}var u=0,c=0;this.parsedStyle.points.segments.forEach((function(e,n){t>=e[0]&&t<=e[1]&&(u=(t-e[0])/(e[1]-e[0]),c=n)}));var l=Hn(n[c][0],n[c][1],n[c+1][0],n[c+1][1],u),f=l.x,d=l.y,h=Q(D(),z(f,d,0),e?this.getWorldTransform():this.getLocalTransform());return new xr(h[0],h[1])}},{key:"getStartTangent",value:function(){var t=this.parsedStyle.points.points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e}},{key:"getEndTangent",value:function(){var t=this.parsedStyle.points.points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n}}])}(Ku);Zu.PARSED_STYLE_LIST=new Set([].concat(M(Ku.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var Qu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,e),N(this,e,[w({type:or.RECT},t)])}return _(e,t),O(e)}(ju);Qu.PARSED_STYLE_LIST=new Set([].concat(M(ju.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var Ju=["style"],tc=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.style,r=rr(t,Ju);return k(this,e),N(this,e,[w({type:or.TEXT,style:w({fill:"black"},n)},r)])}return _(e,t),O(e,[{key:"getComputedTextLength",value:function(){var t;return this.getGeometryBounds(),(null===(t=this.parsedStyle.metrics)||void 0===t?void 0:t.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var t;return this.getGeometryBounds(),(null===(t=this.parsedStyle.metrics)||void 0===t?void 0:t.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])}(ju);tc.PARSED_STYLE_LIST=new Set([].concat(M(ju.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textPathSide","textPathStartOffset","metrics","dx","dy"]));var ec=function(){return O((function t(){k(this,t),this.registry={},this.define(or.CIRCLE,Du),this.define(or.ELLIPSE,zu),this.define(or.RECT,Qu),this.define(or.IMAGE,Vu),this.define(or.LINE,Yu),this.define(or.GROUP,Bu),this.define(or.PATH,qu),this.define(or.POLYGON,Ku),this.define(or.POLYLINE,Zu),this.define(or.TEXT,tc),this.define(or.HTML,Wu)}),[{key:"define",value:function(t,e){this.registry[t]=e}},{key:"get",value:function(t){return this.registry[t]}}])}(),nc=function(t){function e(){var t;k(this,e),(t=N(this,e)).defaultView=null,t.ownerDocument=null,t.nodeName="document";try{t.timeline=new ku.AnimationTimeline(t)}catch(t){}var n={};return go.forEach((function(t){var e=t.n,r=t.inh,i=t.d;r&&i&&(n[e]=_n(i)?i(or.GROUP):i)})),t.documentElement=new Bu({id:"g-root",style:n}),t.documentElement.ownerDocument=t,t.documentElement.parentNode=t,t.childNodes=[t.documentElement],t}return _(e,t),O(e,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(t,e){if("svg"===t)return this.documentElement;var n=this.defaultView.customElements.get(t);n||(console.warn("Unsupported tagName: ",t),n="tspan"===t?tc:Bu);var r=new n(e);return r.ownerDocument=this,r}},{key:"createElementNS",value:function(t,e,n){return this.createElement(e,n)}},{key:"cloneNode",value:function(t){throw new Error(kr)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(t){}}},{key:"elementsFromBBox",value:function(t,e,n,r){var i=this.defaultView.context.rBushRoot.search({minX:t,minY:e,maxX:n,maxY:r}),a=[];return i.forEach((function(t){var e=t.displayObject,n=e.parsedStyle.pointerEvents,r=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(void 0===n?"auto":n);(!r||r&&e.isVisible())&&!e.isCulled()&&e.isInteractive()&&a.push(e)})),a.sort((function(t,e){return e.sortable.renderOrder-t.sortable.renderOrder})),a}},{key:"elementFromPointSync",value:function(t,e){var n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,i=n.y,a=this.defaultView.getConfig(),o=a.width,s=a.height;if(r<0||i<0||r>o||i>s)return null;var u=this.defaultView.viewport2Client({x:r,y:i}),c=u.x,l=u.y,f=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:t,y:e,viewportX:r,viewportY:i,clientX:c,clientY:l},picked:[]}).picked;return f&&f[0]||this.documentElement}},{key:"elementFromPoint",value:(r=er(Jn().mark((function t(e,n){var r,i,a,o,s,u,c,l,f,d,h;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.defaultView.canvas2Viewport({x:e,y:n}),i=r.x,a=r.y,o=this.defaultView.getConfig(),s=o.width,u=o.height,!(i<0||a<0||i>s||a>u)){t.next=4;break}return t.abrupt("return",null);case 4:return c=this.defaultView.viewport2Client({x:i,y:a}),l=c.x,f=c.y,t.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:e,y:n,viewportX:i,viewportY:a,clientX:l,clientY:f},picked:[]});case 7:return d=t.sent,h=d.picked,t.abrupt("return",h&&h[0]||this.documentElement);case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"elementsFromPointSync",value:function(t,e){var n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,i=n.y,a=this.defaultView.getConfig(),o=a.width,s=a.height;if(r<0||i<0||r>o||i>s)return[];var u=this.defaultView.viewport2Client({x:r,y:i}),c=u.x,l=u.y,f=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:t,y:e,viewportX:r,viewportY:i,clientX:c,clientY:l},picked:[]}).picked;return f[f.length-1]!==this.documentElement&&f.push(this.documentElement),f}},{key:"elementsFromPoint",value:(n=er(Jn().mark((function t(e,n){var r,i,a,o,s,u,c,l,f,d,h;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.defaultView.canvas2Viewport({x:e,y:n}),i=r.x,a=r.y,o=this.defaultView.getConfig(),s=o.width,u=o.height,!(i<0||a<0||i>s||a>u)){t.next=4;break}return t.abrupt("return",[]);case 4:return c=this.defaultView.viewport2Client({x:i,y:a}),l=c.x,f=c.y,t.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:e,y:n,viewportX:i,viewportY:a,clientX:l,clientY:f},picked:[]});case 7:return d=t.sent,(h=d.picked)[h.length-1]!==this.documentElement&&h.push(this.documentElement),t.abrupt("return",h);case 11:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"appendChild",value:function(t,e){throw new Error(Er)}},{key:"insertBefore",value:function(t,e){throw new Error(Er)}},{key:"removeChild",value:function(t,e){throw new Error(Er)}},{key:"replaceChild",value:function(t,e,n){throw new Error(Er)}},{key:"append",value:function(){throw new Error(Er)}},{key:"prepend",value:function(){throw new Error(Er)}},{key:"getElementById",value:function(t){return this.documentElement.getElementById(t)}},{key:"getElementsByName",value:function(t){return this.documentElement.getElementsByName(t)}},{key:"getElementsByTagName",value:function(t){return this.documentElement.getElementsByTagName(t)}},{key:"getElementsByClassName",value:function(t){return this.documentElement.getElementsByClassName(t)}},{key:"querySelector",value:function(t){return this.documentElement.querySelector(t)}},{key:"querySelectorAll",value:function(t){return this.documentElement.querySelectorAll(t)}},{key:"find",value:function(t){return this.documentElement.find(t)}},{key:"findAll",value:function(t){return this.documentElement.findAll(t)}}]);var n,r}(Fs),rc=function(){function t(e){k(this,t),this.strategies=e}return O(t,[{key:"apply",value:function(e){var n=e.camera,r=e.renderingService,i=e.renderingContext,a=this.strategies;r.hooks.cull.tap(t.tag,(function(t){if(t){var e=t.cullable;return 0===a.length?e.visible=i.unculledEntities.indexOf(t.entity)>-1:e.visible=a.every((function(e){return e.isVisible(n,t)})),!t.isCulled()&&t.isVisible()?t:(t.dispatchEvent(new js(Ys.CULLED)),null)}return t})),r.hooks.afterRender.tap(t.tag,(function(t){t.cullable.visibilityPlaneMask=-1}))}}])}();rc.tag="Culling";var ic=function(){function t(){var e=this;k(this,t),this.autoPreventDefault=!1,this.rootPointerEvent=new Ls(null),this.rootWheelEvent=new Rs(null),this.onPointerMove=function(t){var n,r=null===(n=e.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView;if(!r.supportsTouchEvents||"touch"!==t.pointerType){var i,a=nr(e.normalizeToPointerEvent(t,r));try{for(a.s();!(i=a.n()).done;){var o=i.value,s=e.bootstrapEvent(e.rootPointerEvent,o,r,t);e.context.eventService.mapEvent(s)}}catch(t){a.e(t)}finally{a.f()}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(t){var n,r,i=null===(n=e.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView,a=nr(e.normalizeToPointerEvent(t,i));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=e.bootstrapEvent(e.rootPointerEvent,o,i,t);e.context.eventService.mapEvent(s)}}catch(t){a.e(t)}finally{a.f()}e.setCursor(e.context.eventService.cursor)}}return O(t,[{key:"apply",value:function(e){var n=this;this.context=e;var r=e.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler((function(t){return n.context.renderingService.hooks.pickSync.call({position:t,picked:[],topmost:!0}).picked[0]||null})),r.hooks.pointerWheel.tap(t.tag,(function(t){var e=n.normalizeWheelEvent(t);n.context.eventService.mapEvent(e)})),r.hooks.pointerDown.tap(t.tag,(function(t){if(!i.supportsTouchEvents||"touch"!==t.pointerType){var e=n.normalizeToPointerEvent(t,i);n.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();var r,a=nr(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=n.bootstrapEvent(n.rootPointerEvent,o,i,t);n.context.eventService.mapEvent(s)}}catch(t){a.e(t)}finally{a.f()}n.setCursor(n.context.eventService.cursor)}})),r.hooks.pointerUp.tap(t.tag,(function(t){if(!i.supportsTouchEvents||"touch"!==t.pointerType){var e,r=n.context.contextService.getDomElement(),a=n.context.eventService.isNativeEventFromCanvas(r,t)?"":"outside",o=nr(n.normalizeToPointerEvent(t,i));try{for(o.s();!(e=o.n()).done;){var s=e.value,u=n.bootstrapEvent(n.rootPointerEvent,s,i,t);u.type+=a,n.context.eventService.mapEvent(u)}}catch(t){o.e(t)}finally{o.f()}n.setCursor(n.context.eventService.cursor)}})),r.hooks.pointerMove.tap(t.tag,this.onPointerMove),r.hooks.pointerOver.tap(t.tag,this.onPointerMove),r.hooks.pointerOut.tap(t.tag,this.onPointerMove),r.hooks.click.tap(t.tag,this.onClick),r.hooks.pointerCancel.tap(t.tag,(function(t){var e,r=nr(n.normalizeToPointerEvent(t,i));try{for(r.s();!(e=r.n()).done;){var a=e.value,o=n.bootstrapEvent(n.rootPointerEvent,a,i,t);n.context.eventService.mapEvent(o)}}catch(t){r.e(t)}finally{r.f()}n.setCursor(n.context.eventService.cursor)}))}},{key:"bootstrapEvent",value:function(t,e,n,r){t.view=n,t.originalEvent=null,t.nativeEvent=r,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);var i=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),a=i.x,o=i.y;t.viewport.x=a,t.viewport.y=o;var s=this.context.eventService.viewport2Canvas(t.viewport),u=s.x,c=s.y;return t.canvas.x=u,t.canvas.y=c,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=r.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=Ho[t.type]||t.type),t}},{key:"normalizeWheelEvent",value:function(t){var e=this.rootWheelEvent;this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ;var n=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),r=n.x,i=n.y;e.viewport.x=r,e.viewport.y=i;var a=this.context.eventService.viewport2Canvas(e.viewport),o=a.x,s=a.y;return e.canvas.x=o,e.canvas.y=s,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.nativeEvent=t,e.type=t.type,e}},{key:"transferMouseData",value:function(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=Yo.now(),t.type=e.type,t.altKey=e.altKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.ctrlKey=e.ctrlKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null}},{key:"setCursor",value:function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(t,e){var n=[];if(e.isTouchEvent(t))for(var r=0;r<t.changedTouches.length;r++){var i=t.changedTouches[r];An(i.button)&&(i.button=0),An(i.buttons)&&(i.buttons=1),An(i.isPrimary)&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),An(i.width)&&(i.width=i.radiusX||1),An(i.height)&&(i.height=i.radiusY||1),An(i.tiltX)&&(i.tiltX=0),An(i.tiltY)&&(i.tiltY=0),An(i.pointerType)&&(i.pointerType="touch"),An(i.pointerId)&&(i.pointerId=i.identifier||0),An(i.pressure)&&(i.pressure=i.force||.5),An(i.twist)&&(i.twist=0),An(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=t.type,n.push(i)}else if(e.isMouseEvent(t)){var a=t;An(a.isPrimary)&&(a.isPrimary=!0),An(a.width)&&(a.width=1),An(a.height)&&(a.height=1),An(a.tiltX)&&(a.tiltX=0),An(a.tiltY)&&(a.tiltY=0),An(a.pointerType)&&(a.pointerType="mouse"),An(a.pointerId)&&(a.pointerId=1),An(a.pressure)&&(a.pressure=.5),An(a.twist)&&(a.twist=0),An(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,n.push(a)}else n.push(t);return n}}])}();ic.tag="Event";var ac=[or.CIRCLE,or.ELLIPSE,or.IMAGE,or.RECT,or.LINE,or.POLYLINE,or.POLYGON,or.TEXT,or.PATH,or.HTML],oc=function(){return O((function t(){k(this,t)}),[{key:"isVisible",value:function(t,e){var n,r=e.cullable;if(!r.enable)return!0;var i=e.getRenderBounds();if(gr.isEmpty(i))return!1;var a=t.getFrustum(),o=null===(n=e.parentNode)||void 0===n||null===(n=n.cullable)||void 0===n?void 0:n.visibilityPlaneMask;return r.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(e,i,o||mr.INDETERMINATE,a.planes),r.visible=r.visibilityPlaneMask!==mr.OUTSIDE,r.visible}},{key:"computeVisibilityWithPlaneMask",value:function(t,e,n,r){if(n===mr.OUTSIDE||n===mr.INSIDE)return n;for(var i=mr.INSIDE,a=ac.indexOf(t.nodeName)>-1,o=0,s=r.length;o<s;++o){var u=1<<o;if(0!==(n&u)&&(!a||4!==o&&5!==o)){var c=r[o],l=c.normal,f=c.distance;if(K(l,e.getPositiveFarPoint(r[o]))+f<0)return mr.OUTSIDE;K(l,e.getNegativeFarPoint(r[o]))+f<0&&(i|=u)}}return i}}])}(),sc=function(){function t(){k(this,t),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return O(t,[{key:"apply",value:function(e){var n,r=this,i=e.renderingService,a=e.renderingContext,o=e.rBushRoot,s=a.root.ownerDocument.defaultView;this.rBush=o;var u=function(t){t.target.renderable.dirty=!0,i.dirtify()},c=function(t){r.syncTasks.set(t.target,t.detail.affectChildren),i.dirtify()},l=function(t){var e=t.target;ku.enableSizeAttenuation&&ku.styleValueRegistry.updateSizeAttenuation(e,s.getCamera().getZoom())},f=function(t){var e=t.target,n=e.rBushNode;n.aabb&&r.rBush.remove(n.aabb),r.syncTasks.delete(e),ku.sceneGraphService.dirtifyToRoot(e),i.dirtify()};i.hooks.init.tap(t.tag,(function(){s.addEventListener(Ys.MOUNTED,l),s.addEventListener(Ys.UNMOUNTED,f),s.addEventListener(Ys.ATTR_MODIFIED,u),s.addEventListener(Ys.BOUNDS_CHANGED,c)})),i.hooks.destroy.tap(t.tag,(function(){s.removeEventListener(Ys.MOUNTED,l),s.removeEventListener(Ys.UNMOUNTED,f),s.removeEventListener(Ys.ATTR_MODIFIED,u),s.removeEventListener(Ys.BOUNDS_CHANGED,c),r.syncTasks.clear()}));var d=null!==(n=ku.globalThis.requestIdleCallback)&&void 0!==n?n:rs.bind(ku.globalThis);i.hooks.endFrame.tap(t.tag,(function(){r.isFirstTimeRendering?(r.isFirstTimeRendering=!1,r.syncing=!0,d((function(){r.syncRTree(!0),r.isFirstTimeRenderingFinished=!0}))):r.syncRTree()}))}},{key:"syncNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.isConnected){var n=t.rBushNode;n.aabb&&this.rBush.remove(n.aabb);var r=t.getRenderBounds();if(r){var i=t.renderable;e&&(i.dirtyRenderBounds||(i.dirtyRenderBounds=new gr),i.dirtyRenderBounds.update(r.center,r.halfExtents));var a=g(r.getMin(),2),o=a[0],s=a[1],u=g(r.getMax(),2),c=u[0],l=u[1];n.aabb||(n.aabb={}),n.aabb.displayObject=t,n.aabb.minX=o,n.aabb.minY=s,n.aabb.maxX=c,n.aabb.maxY=l}return n.aabb&&!(isNaN(n.aabb.maxX)||isNaN(n.aabb.maxX)||isNaN(n.aabb.minX)||isNaN(n.aabb.minY))?n.aabb:void 0}}},{key:"syncRTree",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||!this.syncing&&0!==this.syncTasks.size){this.syncing=!0;var n=[],r=new Set,i=function(i){if(!r.has(i)&&i.renderable){var a=t.syncNode(i,e);a&&(n.push(a),r.add(i))}};this.syncTasks.forEach((function(t,e){t&&e.forEach(i);for(var n=e;n;)i(n),n=n.parentElement})),this.rBush.load(n),n.length=0,this.syncing=!1}}}])}();sc.tag="Prepare";var uc=function(t){return t.READY="ready",t.BEFORE_RENDER="beforerender",t.RERENDER="rerender",t.AFTER_RENDER="afterrender",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.RESIZE="resize",t.DIRTY_RECTANGLE="dirtyrectangle",t.RENDERER_CHANGED="rendererchanged",t}({}),cc=new js(Ys.MOUNTED),lc=new js(Ys.UNMOUNTED),fc=new js(uc.BEFORE_RENDER),dc=new js(uc.RERENDER),hc=new js(uc.AFTER_RENDER),pc=function(t){function e(t){var n;k(this,e),(n=N(this,e)).Element=ju,n.inited=!1,n.context={};var r=t.container,i=t.canvas,a=t.renderer,o=t.width,s=t.height,u=t.background,c=t.cursor,l=t.supportsMutipleCanvasesInOneContainer,f=t.cleanUpOnDestroy,d=void 0===f||f,h=t.offscreenCanvas,p=t.devicePixelRatio,v=t.requestAnimationFrame,g=t.cancelAnimationFrame,y=t.createImage,m=t.supportsTouchEvents,b=t.supportsPointerEvents,x=t.isTouchEvent,E=t.isMouseEvent,O=t.dblClickSpeed,S=o,M=s,T=p||zo&&window.devicePixelRatio||1;return T=T>=1?Math.ceil(T):1,i&&(S=o||function(t){var e=Vo(t,"width");return"auto"===e?t.offsetWidth:parseFloat(e)}(i)||i.width/T,M=s||function(t){var e=Vo(t,"height");return"auto"===e?t.offsetHeight:parseFloat(e)}(i)||i.height/T),n.customElements=new ec,n.devicePixelRatio=T,n.requestAnimationFrame=null!=v?v:rs.bind(ku.globalThis),n.cancelAnimationFrame=null!=g?g:is.bind(ku.globalThis),n.supportsTouchEvents=null!=m?m:"ontouchstart"in ku.globalThis,n.supportsPointerEvents=null!=b?b:!!ku.globalThis.PointerEvent,n.isTouchEvent=null!=x?x:function(t){return n.supportsTouchEvents&&t instanceof ku.globalThis.TouchEvent},n.isMouseEvent=null!=E?E:function(t){return!ku.globalThis.MouseEvent||t instanceof ku.globalThis.MouseEvent&&(!n.supportsPointerEvents||!(t instanceof ku.globalThis.PointerEvent))},h&&(ku.offscreenCanvas=h),n.document=new nc,n.document.defaultView=n,l||function(t,e,n){if(t){var r="string"==typeof t?document.getElementById(t):t;Fo.has(r)&&Fo.get(r).destroy(n),Fo.set(r,e)}}(r,n,d),n.initRenderingContext(w(w({},t),{},{width:S,height:M,background:null!=u?u:"transparent",cursor:null!=c?c:"default",cleanUpOnDestroy:d,devicePixelRatio:T,requestAnimationFrame:n.requestAnimationFrame,cancelAnimationFrame:n.cancelAnimationFrame,supportsTouchEvents:n.supportsTouchEvents,supportsPointerEvents:n.supportsPointerEvents,isTouchEvent:n.isTouchEvent,isMouseEvent:n.isMouseEvent,dblClickSpeed:null!=O?O:200,createImage:null!=y?y:function(){return new window.Image}})),n.initDefaultCamera(S,M,a.clipSpaceNearZ),n.initRenderer(a,!0),n}return _(e,t),O(e,[{key:"initRenderingContext",value:function(t){this.context.config=t,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(t,e,n){var r=this,i=new ku.CameraContribution;i.clipSpaceNearZ=n,i.setType(Br.EXPLORING,Gr.DEFAULT).setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0).setOrthographic(t/-2,t/2,e/2,e/-2,.1,1e3),i.canvas=this,i.eventEmitter.on(Vr,(function(){r.context.renderingContext.renderReasons.add(Gs.CAMERA_CHANGED),ku.enableSizeAttenuation&&r.getConfig().renderer.getConfig().enableSizeAttenuation&&r.updateSizeAttenuation()})),this.context.camera=i}},{key:"updateSizeAttenuation",value:function(){var t=this.getCamera().getZoom();this.document.documentElement.forEach((function(e){ku.styleValueRegistry.updateSizeAttenuation(e,t)}))}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var t=this;return this.readyPromise||(this.readyPromise=new Promise((function(e){t.resolveReadyPromise=function(){e(t)}})),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0;Pi.clearCache(),e||this.dispatchEvent(new js(uc.BEFORE_DESTROY)),this.frameId&&this.cancelAnimationFrame(this.frameId);var n=this.getRoot();t&&(this.unmountChildren(n),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),e||this.dispatchEvent(new js(uc.AFTER_DESTROY));var r=function(t){t.currentTarget=null,t.manager=null,t.target=null,t.relatedNode=null};r(cc),r(lc),r(fc),r(dc),r(hc),r(_u),r(Mu),r(Tu),r(Au)}},{key:"changeSize",value:function(t,e){this.resize(t,e)}},{key:"resize",value:function(t,e){var n=this.context.config;n.width=t,n.height=e,this.getContextService().resize(t,e);var r=this.context.camera,i=r.getProjectionMode();r.setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0),i===Wr.ORTHOGRAPHIC?r.setOrthographic(t/-2,t/2,e/2,e/-2,r.getNear(),r.getFar()):r.setAspect(t/e),this.dispatchEvent(new js(uc.RESIZE,{width:t,height:e}))}},{key:"appendChild",value:function(t,e){return this.document.documentElement.appendChild(t,e)}},{key:"insertBefore",value:function(t,e){return this.document.documentElement.insertBefore(t,e)}},{key:"removeChild",value:function(t){return this.document.documentElement.removeChild(t)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(t){var e=this;t&&(fc.detail=t,hc.detail=t),this.dispatchEvent(fc),this.getRenderingService().render(this.getConfig(),t,(function(){e.dispatchEvent(dc)})),this.dispatchEvent(hc)}},{key:"run",value:function(){var t=this,e=function(n,r){t.render(r),t.frameId=t.requestAnimationFrame(e)};e()}},{key:"initRenderer",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new ar,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new ic,new sc,new rc([new oc])),this.loadRendererContainerModule(t),this.context.contextService=new this.context.ContextService(w(w({},ku),this.context)),this.context.renderingService=new Ws(ku,this.context),this.context.eventService=new zs(ku,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(t,n,!0)):this.context.contextService.initAsync().then((function(){e.initRenderingService(t,n)})).catch((function(t){console.error(t)}))}},{key:"initRenderingService",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.context.renderingService.init((function(){e.inited=!0,n?r?e.requestAnimationFrame((function(){e.dispatchEvent(new js(uc.READY))})):e.dispatchEvent(new js(uc.READY)):e.dispatchEvent(new js(uc.RENDERER_CHANGED)),e.readyPromise&&e.resolveReadyPromise(),n||e.getRoot().forEach((function(t){var e=t.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0,e.dirty=!0)})),e.mountChildren(e.getRoot()),t.getConfig().enableAutoRendering&&e.run()}))}},{key:"loadRendererContainerModule",value:function(t){var e=this;t.getPlugins().forEach((function(t){t.context=e.context,t.init(ku)}))}},{key:"setRenderer",value:function(t){var e=this.getConfig();if(e.renderer!==t){var n=e.renderer;e.renderer=t,this.destroy(!1,!0),M((null==n?void 0:n.getPlugins())||[]).reverse().forEach((function(t){t.destroy(ku)})),this.initRenderer(t)}}},{key:"setCursor",value:function(t){this.getConfig().cursor=t,this.getContextService().applyCursorStyle(t)}},{key:"unmountChildren",value:function(t){var e=this;t.childNodes.forEach((function(t){e.unmountChildren(t)})),this.inited&&(t.isMutationObserved?t.dispatchEvent(lc):(lc.target=t,this.dispatchEvent(lc,!0)),t!==this.document.documentElement&&(t.ownerDocument=null),t.isConnected=!1),t.isCustomElement&&t.disconnectedCallback&&t.disconnectedCallback()}},{key:"mountChildren",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uo(t);this.inited?t.isConnected||(t.ownerDocument=this.document,t.isConnected=!0,n||(t.isMutationObserved?t.dispatchEvent(cc):(cc.target=t,this.dispatchEvent(cc,!0)))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",t.nodeName),t.childNodes.forEach((function(t){e.mountChildren(t,n)})),t.isCustomElement&&t.connectedCallback&&t.connectedCallback()}},{key:"mountFragment",value:function(t){this.mountChildren(t,!1)}},{key:"client2Viewport",value:function(t){return this.getEventService().client2Viewport(t)}},{key:"viewport2Client",value:function(t){return this.getEventService().viewport2Client(t)}},{key:"viewport2Canvas",value:function(t){return this.getEventService().viewport2Canvas(t)}},{key:"canvas2Viewport",value:function(t){return this.getEventService().canvas2Viewport(t)}},{key:"getPointByClient",value:function(t,e){return this.client2Viewport({x:t,y:e})}},{key:"getClientByPoint",value:function(t,e){return this.viewport2Client({x:t,y:e})}}])}(Is),vc=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).landmarks=[],t}return _(e,t),O(e,[{key:"rotate",value:function(t,e,n){if(this.relElevation=Or(e),this.relAzimuth=Or(t),this.relRoll=Or(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===Br.EXPLORING){var r=ce(ue(),[1,0,0],Ar((this.rotateWorld?1:-1)*this.relElevation)),i=ce(ue(),[0,1,0],Ar((this.rotateWorld?1:-1)*this.relAzimuth)),a=ce(ue(),[0,0,1],Ar(this.relRoll)),o=le(ue(),i,r);o=le(ue(),o,a);var s=Ft(ut(),o);bt(this.matrix,this.matrix,[0,0,-this.distance]),mt(this.matrix,this.matrix,s),bt(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===Br.ORBITING||this.type===Br.EXPLORING?this._getPosition():this.type===Br.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,e){var n=Mr(t,e,0),r=I(this.position);return W(r,r,q(D(),this.right,n[0])),W(r,r,q(D(),this.up,n[1])),this._setPosition(r),this.triggerUpdate(),this}},{key:"dolly",value:function(t){var e=this.forward,n=I(this.position),r=this.dollyingStep,i=this.distance+t*this.dollyingStep;return r=Math.max(Math.min(i,this.maxDistance),this.minDistance)-this.distance,n[0]+=r*e[0],n[1]+=r*e[1],n[2]+=r*e[2],this._setPosition(n),this.type===Br.ORBITING||this.type===Br.EXPLORING?this._getDistance():this.type===Br.TRACKING&&W(this.focalPoint,n,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){void 0!==this.landmarkAnimationID&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(t){var e,n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.position,s=void 0===o?this.position:o,u=a.focalPoint,c=void 0===u?this.focalPoint:u,l=a.roll,f=a.zoom,d=new ku.CameraContribution;d.setType(this.type,void 0),d.setPosition(s[0],null!==(e=s[1])&&void 0!==e?e:this.position[1],null!==(n=s[2])&&void 0!==n?n:this.position[2]),d.setFocalPoint(c[0],null!==(r=c[1])&&void 0!==r?r:this.focalPoint[1],null!==(i=c[2])&&void 0!==i?i:this.focalPoint[2]),d.setRoll(null!=l?l:this.roll),d.setZoom(null!=f?f:this.zoom);var h={name:t,matrix:ct(d.getWorldTransform()),right:I(d.right),up:I(d.up),forward:I(d.forward),position:I(d.getPosition()),focalPoint:I(d.getFocalPoint()),distanceVector:I(d.getDistanceVector()),distance:d.getDistance(),dollyingStep:d.getDollyingStep(),azimuth:d.getAzimuth(),elevation:d.getElevation(),roll:d.getRoll(),relAzimuth:d.relAzimuth,relElevation:d.relElevation,relRoll:d.relRoll,zoom:d.getZoom()};return this.landmarks.push(h),h}},{key:"gotoLandmark",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Te(t)?this.landmarks.find((function(e){return e.name===t})):t;if(r){var i=Oe(n)?{duration:n}:n,a=i.easing,o=void 0===a?"linear":a,s=i.duration,u=void 0===s?100:s,c=i.easingFunction,l=void 0===c?void 0:c,f=i.onfinish,d=void 0===f?void 0:f,h=i.onframe,p=void 0===h?void 0:h;this.cancelLandmarkAnimation();var v,g=r.position,y=r.focalPoint,m=r.zoom,b=r.roll,x=l||ku.EasingFunction(o),w=function(){e.setFocalPoint(y),e.setPosition(g),e.setRoll(b),e.setZoom(m),e.computeMatrix(),e.triggerUpdate(),null==d||d()};if(0===u)return w();var k=function(t){void 0===v&&(v=t);var n=t-v;if(n>=u)w();else{var r,i,a=x(n/u),o=D(),s=D();if(Z(o,e.focalPoint,y,a),Z(s,e.position,g,a),i=e.roll*(1-a)+b*a,r=e.zoom*(1-a)+m*a,e.setFocalPoint(o),e.setPosition(s),e.setRoll(i),e.setZoom(r),rt(o,y)+rt(s,g)<=.01&&void 0===m&&void 0===b)return w();e.computeMatrix(),e.triggerUpdate(),n<u&&(null==p||p(a),e.landmarkAnimationID=e.canvas.requestAnimationFrame(k))}};this.canvas.requestAnimationFrame(k)}}}])}(Yr);ku.CameraContribution=vc,new WeakMap;var gc=function(t){function e(t,n,r,i){var a;return k(this,e),(a=N(this,e,[t])).currentTime=r,a.timelineTime=i,a.target=n,a.type="finish",a.bubbles=!1,a.currentTarget=n,a.defaultPrevented=!1,a.eventPhase=a.AT_TARGET,a.timeStamp=Date.now(),a.currentTime=r,a.timelineTime=i,a}return _(e,t),O(e)}(Cs),yc=0,mc=function(){return O((function t(e,n){var r;k(this,t),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=e,e.animation=this,this.timeline=n,this.id="".concat(yc++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number(null===(r=this.effect)||void 0===r?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}),[{key:"pending",get:function(){return null===this._startTime&&!this._paused&&0!==this.playbackRate||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var t=this;return this.readyPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise((function(e,n){t.resolveReadyPromise=function(){e(t)},t.rejectReadyPromise=function(){n(new Error)}})),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var t=this;return this.finishedPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise((function(e,n){t.resolveFinishedPromise=function(){e(t)},t.rejectFinishedPromise=function(){n(new Error)}})),"finished"===this.playState&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var e;(t=Number(t),isNaN(t))||(this.timeline.restart(),this._paused||null===this._startTime||(this._startTime=Number(null===(e=this.timeline)||void 0===e?void 0:e.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))}},{key:"startTime",get:function(){return this._startTime},set:function(t){if(null!==t){if(this.updatePromises(),t=Number(t),isNaN(t))return;if(this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var e=this.currentTime;this._playbackRate=t,this.startTime=null,"paused"!==this.playState&&"idle"!==this.playState&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),null!==e&&(this.currentTime=e),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||"running"===this.playState||!this._finishedFlag}},{key:"updatePromises",value:function(){var t=this.oldPlayState,e=this.pending?"pending":this.playState;return this.readyPromise&&e!==t&&("idle"===e?(this.rejectReadyPromise(),this.readyPromise=void 0):"pending"===t?this.resolveReadyPromise():"pending"===e&&(this.readyPromise=void 0)),this.finishedPromise&&e!==t&&("idle"===e?(this.rejectFinishedPromise(),this.finishedPromise=void 0):"finished"===e?this.resolveFinishedPromise():"finished"===t&&(this.finishedPromise=void 0)),this.oldPlayState=e,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),-1===this.timeline.animations.indexOf(this)&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._isFinished||this._paused||this._idle?this._idle&&(this.rewind(),this._idle=!1):this.currentTimePending=!0,this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var t=this;if(this.updatePromises(),this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var e=new gc(null,this,this.currentTime,null);setTimeout((function(){t.oncancel(e)}))}}},{key:"reverse",value:function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),null!==t&&(this.currentTime=t),this.updatePromises()}},{key:"updatePlaybackRate",value:function(t){this.playbackRate=t}},{key:"targetAnimations",value:function(){var t;return(null===(t=this.effect)||void 0===t?void 0:t.target).getAnimations()}},{key:"markTarget",value:function(){var t=this.targetAnimations();-1===t.indexOf(this)&&t.push(this)}},{key:"unmarkTarget",value:function(){var t=this.targetAnimations(),e=t.indexOf(this);-1!==e&&t.splice(e,1)}},{key:"tick",value:function(t,e){this._idle||this._paused||(null===this._startTime?e&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),e&&(this.currentTimePending=!1,this.fireEvents(t))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else{if(!(this._totalDuration<1/0))throw new Error("Unable to rewind negative playback rate animation with infinite duration");this.currentTime=this._totalDuration}}},{key:"persist",value:function(){throw new Error(kr)}},{key:"addEventListener",value:function(t,e,n){throw new Error(kr)}},{key:"removeEventListener",value:function(t,e,n){throw new Error(kr)}},{key:"dispatchEvent",value:function(t){throw new Error(kr)}},{key:"commitStyles",value:function(){throw new Error(kr)}},{key:"ensureAlive",value:function(){var t,e;this.playbackRate<0&&0===this.currentTime?this._inEffect=!(null===(t=this.effect)||void 0===t||!t.update(-1)):this._inEffect=!(null===(e=this.effect)||void 0===e||!e.update(this.currentTime)),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(t,e){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!e&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(t){var e=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var n=new gc(null,this,this.currentTime,t);setTimeout((function(){e.onfinish&&e.onfinish(n)}))}this._finishedFlag=!0}}else{if(this.onframe&&"running"===this.playState){var r=new gc(null,this,this.currentTime,t);this.onframe(r)}this._finishedFlag=!1}}}])}(),bc=.1,xc="function"==typeof Float32Array,wc=function(t,e){return 1-3*e+3*t},kc=function(t,e){return 3*e-6*t},Ec=function(t){return 3*t},Oc=function(t,e,n){return((wc(e,n)*t+kc(e,n))*t+Ec(e))*t},Sc=function(t,e,n){return 3*wc(e,n)*t*t+2*kc(e,n)*t+Ec(e)},Mc=function(t,e,n,r){if(!(t>=0&&t<=1&&n>=0&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===r)return function(t){return t};for(var i=xc?new Float32Array(11):new Array(11),a=0;a<11;++a)i[a]=Oc(a*bc,t,n);return function(a){return 0===a||1===a?a:Oc(function(e){for(var r=0,a=1;10!==a&&i[a]<=e;++a)r+=bc;--a;var o=r+(e-i[a])/(i[a+1]-i[a])*bc,s=Sc(o,t,n);return s>=.001?function(t,e,n,r){for(var i=0;i<4;++i){var a=Sc(e,n,r);if(0===a)return e;e-=(Oc(e,n,r)-t)/a}return e}(e,o,t,n):0===s?o:function(t,e,n,r,i){var a,o,s=0;do{(a=Oc(o=e+(n-e)/2,r,i)-t)>0?n=o:e=o}while(Math.abs(a)>1e-7&&++s<10);return o}(e,r,r+bc,t,n)}(a),e,r)}},Tc=function(t){return Math.pow(t,2)},Ac=function(t){return Math.pow(t,3)},Pc=function(t){return Math.pow(t,4)},Nc=function(t){return Math.pow(t,5)},Cc=function(t){return Math.pow(t,6)},_c=function(t){return 1-Math.cos(t*Math.PI/2)},Lc=function(t){return 1-Math.sqrt(1-t*t)},Rc=function(t){return t*t*(3*t-2)},jc=function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)},Dc=function(t){var e=g(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],2),n=e[0],r=void 0===n?1:n,i=e[1],a=void 0===i?.5:i,o=Ae(Number(r),1,10),s=Ae(Number(a),.1,2);return 0===t||1===t?t:-o*Math.pow(2,10*(t-1))*Math.sin((t-1-s/(2*Math.PI)*Math.asin(1/o))*(2*Math.PI)/s)},Ic=function(t){var e=arguments.length>2?arguments[2]:void 0,n=g(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],4),r=n[0],i=void 0===r?1:r,a=n[1],o=void 0===a?100:a,s=n[2],u=void 0===s?10:s,c=n[3],l=void 0===c?0:c;i=Ae(i,.1,1e3),o=Ae(o,.1,1e3),u=Ae(u,.1,1e3),l=Ae(l,.1,1e3);var f=Math.sqrt(o/i),d=u/(2*Math.sqrt(o*i)),h=d<1?f*Math.sqrt(1-d*d):0,p=d<1?(d*f-l)/h:-l+f,v=e?e*t/1e3:t;return v=d<1?Math.exp(-v*d*f)*(1*Math.cos(h*v)+p*Math.sin(h*v)):(1+p*v)*Math.exp(-v*f),0===t||1===t?t:1-v},Fc=function(t){var e=g(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],2),n=e[0],r=void 0===n?10:n;return("start"===e[1]?Math.ceil:Math.floor)(Ae(t,0,1)*r)/r},zc=function(t){var e=g(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],4),n=e[0],r=e[1],i=e[2],a=e[3];return Mc(n,r,i,a)(t)},Bc=Mc(.42,0,1,1),Gc=function(t){return function(e){return 1-t(1-e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],arguments.length>2?arguments[2]:void 0)}},Wc=function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return e<.5?t(2*e,n,r)/2:1-t(-2*e+2,n,r)/2}},Vc=function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return e<.5?(1-t(1-2*e,n,r))/2:(t(2*e-1,n,r)+1)/2}},Hc={steps:Fc,"step-start":function(t){return Fc(t,[1,"start"])},"step-end":function(t){return Fc(t,[1,"end"])},linear:function(t){return t},"cubic-bezier":zc,ease:function(t){return zc(t,[.25,.1,.25,1])},in:Bc,out:Gc(Bc),"in-out":Wc(Bc),"out-in":Vc(Bc),"in-quad":Tc,"out-quad":Gc(Tc),"in-out-quad":Wc(Tc),"out-in-quad":Vc(Tc),"in-cubic":Ac,"out-cubic":Gc(Ac),"in-out-cubic":Wc(Ac),"out-in-cubic":Vc(Ac),"in-quart":Pc,"out-quart":Gc(Pc),"in-out-quart":Wc(Pc),"out-in-quart":Vc(Pc),"in-quint":Nc,"out-quint":Gc(Nc),"in-out-quint":Wc(Nc),"out-in-quint":Vc(Nc),"in-expo":Cc,"out-expo":Gc(Cc),"in-out-expo":Wc(Cc),"out-in-expo":Vc(Cc),"in-sine":_c,"out-sine":Gc(_c),"in-out-sine":Wc(_c),"out-in-sine":Vc(_c),"in-circ":Lc,"out-circ":Gc(Lc),"in-out-circ":Wc(Lc),"out-in-circ":Vc(Lc),"in-back":Rc,"out-back":Gc(Rc),"in-out-back":Wc(Rc),"out-in-back":Vc(Rc),"in-bounce":jc,"out-bounce":Gc(jc),"in-out-bounce":Wc(jc),"out-in-bounce":Vc(jc),"in-elastic":Dc,"out-elastic":Gc(Dc),"in-out-elastic":Wc(Dc),"out-in-elastic":Vc(Dc),spring:Ic,"spring-in":Ic,"spring-out":Gc(Ic),"spring-in-out":Wc(Ic),"spring-out-in":Vc(Ic)},Yc=function(t){return t};function Uc(t,e){return function(n){if(n>=1)return 1;var r=1/t;return(n+=e*r)-n%r}}var qc="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",Xc=new RegExp("cubic-bezier\\(".concat(qc,",").concat(qc,",").concat(qc,",").concat(qc,"\\)")),Kc=/steps\(\s*(\d+)\s*\)/,$c=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function Zc(t){var e=Xc.exec(t);if(e)return Mc.apply(void 0,M(e.slice(1).map(Number)));var n=Kc.exec(t);if(n)return Uc(Number(n[1]),0);var r,i,a=$c.exec(t);return a?Uc(Number(a[1]),{start:1,middle:.5,end:0}[a[2]]):Hc[(r=t,(i=r,"-"===(i=i.replace(/([A-Z])/g,(function(t){return"-".concat(t.toLowerCase())}))).charAt(0)?i.substring(1):i).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim())]||Hc.linear}function Qc(t){return"offset"!==t&&"easing"!==t&&"composite"!==t&&"computedOffset"!==t}var Jc=function(t,e,n){return function(r){var i=el(t,e,r);return Oe(i)?i:n(i)}};function tl(t,e,n,r){var i=mo[t];if(i&&i.syntax&&i.int){var a=ku.styleValueRegistry.getPropertySyntax(i.syntax);if(a){var o=a.parser,s=o?o(e,r):e,u=o?o(n,r):n,c=a.mixer(s,u,r);if(c){var l=Jc.apply(void 0,M(c));return function(t){return 0===t?e:1===t?n:l(t)}}}}return Jc(!1,!0,(function(t){return t?n:e}))}function el(t,e,n){if("number"==typeof t&&"number"==typeof e)return t*(1-n)+e*n;if("boolean"==typeof t&&"boolean"==typeof e||"string"==typeof t&&"string"==typeof e)return n<.5?t:e;if(Array.isArray(t)&&Array.isArray(e)){for(var r=t.length,i=e.length,a=Math.max(r,i),o=[],s=0;s<a;s++)o.push(el(t[s<r?s:r-1],e[s<i?s:i-1],n));return o}throw new Error("Mismatched interpolation arguments ".concat(t,":").concat(e))}var nl=function(){return O((function t(){k(this,t),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=Yc,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}),[{key:"easing",get:function(){return this._easing},set:function(t){this.easingFunction=Zc(t),this._easing=t}}])}();function rl(t,e){if(null===t)return[];Array.isArray(t)||(t=function(t){var e=[];for(var n in t)if(!(n in["easing","offset","composite"])){var r=t[n];Array.isArray(r)||(r=[r]);for(var i=r.length,a=0;a<i;a++){if(!e[a]){var o={};"offset"in t&&(o.offset=Number(t.offset)),"easing"in t&&(o.easing=t.easing),"composite"in t&&(o.composite=t.composite),e[a]=o}void 0!==r[a]&&null!==r[a]&&(e[a][n]=r[a])}}return e.sort((function(t,e){return(t.computedOffset||0)-(e.computedOffset||0)})),e}(t));for(var n=t.map((function(t){var n={};for(var r in null!=e&&e.composite&&(n.composite="auto"),t){var i=t[r];if("offset"===r){if(null!==i){if(i=Number(i),!isFinite(i))throw new Error("Keyframe offsets must be numbers.");if(i<0||i>1)throw new Error("Keyframe offsets must be between 0 and 1.");n.computedOffset=i}}else if("composite"===r&&-1===["replace","add","accumulate","auto"].indexOf(i))throw new Error("".concat(i," compositing is not supported"));n[r]=i}return void 0===n.offset&&(n.offset=null),void 0===n.easing&&(n.easing=(null==e?void 0:e.easing)||"linear"),void 0===n.composite&&(n.composite="auto"),n})),r=!0,i=-1/0,a=0;a<n.length;a++){var o=n[a].offset;if(Me(o))r=!1;else{if(o<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=o}}return n=n.filter((function(t){return Number(t.offset)>=0&&Number(t.offset)<=1})),r||function(){var t,e,r=n.length;n[r-1].computedOffset=Number(null!==(t=n[r-1].offset)&&void 0!==t?t:1),r>1&&(n[0].computedOffset=Number(null!==(e=n[0].offset)&&void 0!==e?e:0));for(var i=0,a=Number(n[0].computedOffset),o=1;o<r;o++){var s=n[o].computedOffset;if(!Me(s)&&!Me(a)){for(var u=1;u<o-i;u++)n[i+u].computedOffset=a+(Number(s)-a)*u/(o-i);i=o,a=Number(s)}}}(),n}var il="backwards|forwards|both|none".split("|"),al="reverse|alternate|alternate-reverse".split("|");var ol=function(){return O((function t(e,n,r){var i,a=this;k(this,t),this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=function(t,e){return function(t,e){var n=new nl;return e&&(n.fill="both",n.duration="auto"),"number"!=typeof t||isNaN(t)?void 0!==t&&Object.keys(t).forEach((function(e){if(void 0!==t[e]&&null!==t[e]&&"auto"!==t[e]){if(("number"==typeof n[e]||"duration"===e)&&("number"!=typeof t[e]||isNaN(t[e])))return;if("fill"===e&&-1===il.indexOf(t[e]))return;if("direction"===e&&-1===al.indexOf(t[e]))return;n[e]=t[e]}})):n.duration=t,n}(t=function(t){return"number"==typeof t&&(t=isNaN(t)?{duration:"auto"}:{duration:t}),t}(null!=t?t:{duration:"auto"}),e)}(r,!1),this.timing.effect=this,this.timing.activeDuration=(i=this.timing,Math.abs(function(t){var e;return 0===t.duration||0===t.iterations?0:("auto"===t.duration?0:Number(t.duration))*(null!==(e=t.iterations)&&void 0!==e?e:1)}(i)/(i.playbackRate||1))),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=rl(n,this.timing),this.interpolations=function(t,e,n){var r=function(t,e){for(var n={},r=0;r<t.length;r++)for(var i in t[r])if(Qc(i)){var a={offset:t[r].offset,computedOffset:t[r].computedOffset,easing:t[r].easing,easingFunction:Zc(t[r].easing)||e.easingFunction,value:t[r][i]};n[i]=n[i]||[],n[i].push(a)}return n}(t,e),i=function(t,e){var n=[];for(var r in t)for(var i=t[r],a=0;a<i.length-1;a++){var o=a,s=a+1,u=i[o].computedOffset,c=i[s].computedOffset,l=u,f=c;0===a&&(l=-1/0,0===c&&(s=o)),a===i.length-2&&(f=1/0,1===u&&(o=s)),n.push({applyFrom:l,applyTo:f,startOffset:i[o].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[o].easingFunction,property:r,interpolation:tl(r,i[o].value,i[s].value,e)})}return n.sort((function(t,e){return t.startOffset-e.startOffset})),n}(r,n);return function(t,e){if(null!==e)i.filter((function(t){return e>=t.applyFrom&&e<t.applyTo})).forEach((function(n){var r=e-n.startOffset,i=n.endOffset-n.startOffset,a=0===i?0:r/i;t.setAttribute(n.property,n.interpolation(a),!1,!1)}));else for(var n in r)Qc(n)&&t.setAttribute(n,null)}}(this.normalizedKeyframes,this.timing,this.target);var o=ku.globalThis.Proxy;this.computedTiming=o?new o(this.timing,{get:function(t,e){return"duration"===e?"auto"===t.duration?0:t.duration:"fill"===e?"auto"===t.fill?"none":t.fill:"localTime"===e?a.animation&&a.animation.currentTime||null:"currentIteration"===e?a.animation&&"running"===a.animation.playState?t.currentIteration||0:null:"progress"===e?a.animation&&"running"===a.animation.playState?t.progress||0:null:t[e]},set:function(){return!0}}):this.timing}),[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(t){return null!==t&&(this.timeFraction=function(t,e,n){var r=function(t,e,n){if(null===e)return 0;var r=n.endTime;return e<Math.min(n.delay,r)?1:e>=Math.min(n.delay+t+n.endDelay,r)?2:3}(t,e,n),i=function(t,e,n,r,i){switch(r){case 1:return"backwards"===e||"both"===e?0:null;case 3:return n-i;case 2:return"forwards"===e||"both"===e?t:null;case 0:return null}}(t,n.fill,e,r,n.delay);if(null===i)return null;var a="auto"===n.duration?0:n.duration,o=function(t,e,n,r,i){var a=i;return 0===t?1!==e&&(a+=n):a+=r/t,a}(a,r,n.iterations,i,n.iterationStart),s=function(t,e,n,r,i,a){var o=t===1/0?e%1:t%1;return 0!==o||2!==n||0===r||0===i&&0!==a||(o=1),o}(o,n.iterationStart,r,n.iterations,i,a),u=function(t,e,n,r){return 2===t&&e===1/0?1/0:1===n?Math.floor(r)-1:Math.floor(r)}(r,n.iterations,s,o),c=function(t,e,n){var r=t;if("normal"!==t&&"reverse"!==t){var i=e;"alternate-reverse"===t&&(i+=1),r="normal",i!==1/0&&i%2!=0&&(r="reverse")}return"normal"===r?n:1-n}(n.direction,u,s);return n.currentIteration=u,n.progress=c,n.easingFunction(c)}(this.timing.activeDuration,t,this.timing),null!==this.timeFraction)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(t){this.normalizedKeyframes=rl(t)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(t){var e=this;Object.keys(t||{}).forEach((function(n){e.timing[n]=t[n]}))}}])}();function sl(t,e){return Number(t.id)-Number(e.id)}var ul=function(){return O((function t(e){var n=this;k(this,t),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(t){n.currentTime=t,n.discardAnimations(),0===n.animations.length?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(t){var e=n.rafCallbacks;n.rafCallbacks=[],t<Number(n.currentTime)&&(t=Number(n.currentTime)),n.animations.sort(sl),n.animations=n.tick(t,!0,n.animations)[0],e.forEach((function(e){e[1](t)})),n.applyPendingEffects()},this.document=e}),[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(t,e,n){var r=new ol(t,e,n),i=new mc(r,this);return this.animations.push(i),this.restartWebAnimationsNextTick(),i.updatePromises(),i.play(),i.updatePromises(),i}},{key:"applyDirtiedAnimation",value:function(t){var e=this;if(!this.inTick){t.markTarget();var n=t.targetAnimations();n.sort(sl),this.tick(Number(this.currentTime),!1,n.slice())[1].forEach((function(t){var n=e.animations.indexOf(t);-1!==n&&e.animations.splice(n,1)})),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame((function(){})),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach((function(t){null==t||t.applyInterpolations()})),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter((function(t){return t.updatePromises()}))}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter((function(t){return"finished"!==t.playState&&"idle"!==t.playState}))}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(t){var e=this.rafId++;return 0===this.rafCallbacks.length&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([e,t]),e}},{key:"requestAnimationFrame",value:function(t){var e=this;return this.rAF((function(n){e.updateAnimationsPromises(),t(n),e.updateAnimationsPromises()}))}},{key:"tick",value:function(t,e,n){var r,i,a=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var o=[],s=[],u=[],c=[];return n.forEach((function(n){n.tick(t,e),n._inEffect?(s.push(n.effect),n.markTarget()):(o.push(n.effect),n.unmarkTarget()),n._needsTick&&(a.ticking=!0);var r=n._inEffect||n._needsTick;n._inTimeline=r,r?u.push(n):c.push(n)})),(r=this.pendingEffects).push.apply(r,o),(i=this.pendingEffects).push.apply(i,s),this.ticking&&this.requestAnimationFrame((function(){})),this.inTick=!1,[u,c]}}])}();ku.EasingFunction=Zc,ku.AnimationTimeline=ul;const cl=function(t){return Me(t)?"":t.toString()},ll=function(t){var e=cl(t);return e.charAt(0).toUpperCase()+e.substring(1)},fl=function(t){return"object"==typeof t&&null!==t},dl=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)};var hl=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Te(t)||Te(e))return!1;if(dl(t)||dl(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=hl(t[r],e[r]));r++);return n}if(fl(t)||fl(e)){var i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(n=!0,r=0;r<i.length&&(n=hl(t[i[r]],e[i[r]]));r++);return n}return!1};const pl=hl;var vl,gl,yl,ml,bl,xl,wl,kl,El,Ol,Sl={duration:500},Ml={duration:1e3,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",iterations:1,fill:"both"};!function(t){t.NodeAdded="NodeAdded",t.NodeUpdated="NodeUpdated",t.NodeRemoved="NodeRemoved",t.EdgeAdded="EdgeAdded",t.EdgeUpdated="EdgeUpdated",t.EdgeRemoved="EdgeRemoved",t.ComboAdded="ComboAdded",t.ComboUpdated="ComboUpdated",t.ComboRemoved="ComboRemoved"}(vl||(vl={})),function(t){t.DRAW="draw",t.COLLAPSE="collapse",t.EXPAND="expand",t.TRANSFORM="transform"}(gl||(gl={})),function(t){t.CLICK="canvas:click",t.DBLCLICK="canvas:dblclick",t.POINTER_OVER="canvas:pointerover",t.POINTER_LEAVE="canvas:pointerleave",t.POINTER_ENTER="canvas:pointerenter",t.POINTER_MOVE="canvas:pointermove",t.POINTER_OUT="canvas:pointerout",t.POINTER_DOWN="canvas:pointerdown",t.POINTER_UP="canvas:pointerup",t.CONTEXT_MENU="canvas:contextmenu",t.DRAG_START="canvas:dragstart",t.DRAG="canvas:drag",t.DRAG_END="canvas:dragend",t.DRAG_ENTER="canvas:dragenter",t.DRAG_OVER="canvas:dragover",t.DRAG_LEAVE="canvas:dragleave",t.DROP="canvas:drop",t.WHEEL="canvas:wheel"}(yl||(yl={})),function(t){t.CLICK="combo:click",t.DBLCLICK="combo:dblclick",t.POINTER_OVER="combo:pointerover",t.POINTER_LEAVE="combo:pointerleave",t.POINTER_ENTER="combo:pointerenter",t.POINTER_MOVE="combo:pointermove",t.POINTER_OUT="combo:pointerout",t.POINTER_DOWN="combo:pointerdown",t.POINTER_UP="combo:pointerup",t.CONTEXT_MENU="combo:contextmenu",t.DRAG_START="combo:dragstart",t.DRAG="combo:drag",t.DRAG_END="combo:dragend",t.DRAG_ENTER="combo:dragenter",t.DRAG_OVER="combo:dragover",t.DRAG_LEAVE="combo:dragleave",t.DROP="combo:drop"}(ml||(ml={})),function(t){t.CLICK="click",t.DBLCLICK="dblclick",t.POINTER_OVER="pointerover",t.POINTER_LEAVE="pointerleave",t.POINTER_ENTER="pointerenter",t.POINTER_MOVE="pointermove",t.POINTER_OUT="pointerout",t.POINTER_DOWN="pointerdown",t.POINTER_UP="pointerup",t.CONTEXT_MENU="contextmenu",t.DRAG_START="dragstart",t.DRAG="drag",t.DRAG_END="dragend",t.DRAG_ENTER="dragenter",t.DRAG_OVER="dragover",t.DRAG_LEAVE="dragleave",t.DROP="drop",t.KEY_DOWN="keydown",t.KEY_UP="keyup",t.WHEEL="wheel",t.PINCH="pinch"}(bl||(bl={})),function(t){t.KEY_DOWN="keydown",t.KEY_UP="keyup"}(xl||(xl={})),function(t){t.CLICK="edge:click",t.DBLCLICK="edge:dblclick",t.POINTER_OVER="edge:pointerover",t.POINTER_LEAVE="edge:pointerleave",t.POINTER_ENTER="edge:pointerenter",t.POINTER_MOVE="edge:pointermove",t.POINTER_OUT="edge:pointerout",t.POINTER_DOWN="edge:pointerdown",t.POINTER_UP="edge:pointerup",t.CONTEXT_MENU="edge:contextmenu",t.DRAG_ENTER="edge:dragenter",t.DRAG_OVER="edge:dragover",t.DRAG_LEAVE="edge:dragleave",t.DROP="edge:drop"}(wl||(wl={})),function(t){t.BEFORE_CANVAS_INIT="beforecanvasinit",t.AFTER_CANVAS_INIT="aftercanvasinit",t.BEFORE_SIZE_CHANGE="beforesizechange",t.AFTER_SIZE_CHANGE="aftersizechange",t.BEFORE_ELEMENT_CREATE="beforeelementcreate",t.AFTER_ELEMENT_CREATE="afterelementcreate",t.BEFORE_ELEMENT_UPDATE="beforeelementupdate",t.AFTER_ELEMENT_UPDATE="afterelementupdate",t.BEFORE_ELEMENT_DESTROY="beforeelementdestroy",t.AFTER_ELEMENT_DESTROY="afterelementdestroy",t.BEFORE_ELEMENT_TRANSLATE="beforeelementtranslate",t.AFTER_ELEMENT_TRANSLATE="afterelementtranslate",t.BEFORE_DRAW="beforedraw",t.AFTER_DRAW="afterdraw",t.BEFORE_RENDER="beforerender",t.AFTER_RENDER="afterrender",t.BEFORE_ANIMATE="beforeanimate",t.AFTER_ANIMATE="afteranimate",t.BEFORE_LAYOUT="beforelayout",t.AFTER_LAYOUT="afterlayout",t.BEFORE_STAGE_LAYOUT="beforestagelayout",t.AFTER_STAGE_LAYOUT="afterstagelayout",t.BEFORE_TRANSFORM="beforetransform",t.AFTER_TRANSFORM="aftertransform",t.BATCH_START="batchstart",t.BATCH_END="batchend",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.BEFORE_RENDERER_CHANGE="beforerendererchange",t.AFTER_RENDERER_CHANGE="afterrendererchange"}(kl||(kl={})),function(t){t.UNDO="undo",t.REDO="redo",t.CANCEL="cancel",t.ADD="add",t.CLEAR="clear",t.CHANGE="change"}(El||(El={})),function(t){t.CLICK="node:click",t.DBLCLICK="node:dblclick",t.POINTER_OVER="node:pointerover",t.POINTER_LEAVE="node:pointerleave",t.POINTER_ENTER="node:pointerenter",t.POINTER_MOVE="node:pointermove",t.POINTER_OUT="node:pointerout",t.POINTER_DOWN="node:pointerdown",t.POINTER_UP="node:pointerup",t.CONTEXT_MENU="node:contextmenu",t.DRAG_START="node:dragstart",t.DRAG="node:drag",t.DRAG_END="node:dragend",t.DRAG_ENTER="node:dragenter",t.DRAG_OVER="node:dragover",t.DRAG_LEAVE="node:dragleave",t.DROP="node:drop"}(Ol||(Ol={}));var Tl,Al="combo",Pl="tree";!function(t){t.NODE="node",t.EDGE="edge",t.COMBO="combo",t.THEME="theme",t.PALETTE="palette",t.LAYOUT="layout",t.BEHAVIOR="behavior",t.PLUGIN="plugin",t.ANIMATION="animation",t.TRANSFORM="transform",t.SHAPE="shape"}(Tl||(Tl={}));var Nl={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};function Cl(t,e){var n,r=null===(n=Nl[t])||void 0===n?void 0:n[e];if(r)return r}function _l(t){return Nl[t]}var Ll="5.0.46",Rl="G6";function jl(t){return"[".concat(Rl," v").concat(Ll,"] ").concat(t)}var Dl={mute:!1,debug:function(t){!Dl.mute&&console.debug(jl(t))},info:function(t){!Dl.mute&&console.info(jl(t))},warn:function(t){!Dl.mute&&console.warn(jl(t))},error:function(t){!Dl.mute&&console.error(jl(t))}};function Il(t){var e=t.theme;return e?Cl(Tl.THEME,e)||(Dl.warn("The theme of ".concat(e," is not registered.")),{}):{}}function Fl(t,e){if(Array.isArray(t)&&0===t.length)return null;var n=Array.isArray(t)?t[0]:t,r=Array.isArray(t)?t.slice(1):e||[];return new Proxy(n,{get:function(t,e){return"function"!=typeof t[e]||["onframe","onfinish"].includes(e)?"finished"===e?Promise.all([n.finished].concat(M(r.map((function(t){return t.finished}))))):Reflect.get(t,e):function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];t[e].apply(t,i),r.forEach((function(t){var n,r;return null===(r=t[e])||void 0===r?void 0:(n=r).call.apply(n,[t].concat(i))}))}},set:function(t,e,n){return["onframe","onfinish"].includes(e)||r.forEach((function(t){t[e]=n})),Reflect.set(t,e,n)}})}function zl(t){var e=t.reduce((function(t,e){return Object.entries(e).forEach((function(e){var n=g(e,2),r=n[0],i=n[1];void 0===t[r]?t[r]=[i]:t[r].push(i)})),t}),{});Object.entries(e).forEach((function(n){var r=g(n,2),i=r[0],a=r[1];(a.length!==t.length||a.some((function(t){return Me(t)}))||a.every((function(t){return!["sourceNode","targetNode","childrenNode"].includes(i)&&pl(t,a[0])})))&&delete e[i]}));var n=Object.entries(e).reduce((function(t,e){var n=g(e,2),r=n[0];return n[1].forEach((function(e,n){t[n]?t[n][r]=e:t[n]=b({},r,e)})),t}),[]);return 0!==t.length&&0===n.length&&n.push.apply(n,[{_:0},{_:0}]),n}function Bl(t){switch(t){case"opacity":return 1;case"x":case"y":case"z":case"zIndex":return 0;case"visibility":return"visible";case"collapsed":return!1;case"states":return[];default:return}}function Gl(t,e){var n=t.animation;if(!1===n||!1===e)return!1;var r=Object.assign({},Sl);return Ln(n)&&Object.assign(r,n),Ln(e)&&Object.assign(r,e),r}function Wl(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!r&&0===t&&0===e&&0===n)return null;if(Array.isArray(r)){for(var i=-1,a=[],o=0;o<r.length;o++){var s=r[o];if("translate"===s[0]){if(s[1]===t&&s[2]===e)return null;i=o,a.push(["translate",t,e])}else if("translate3d"===s[0]){if(s[1]===t&&s[2]===e&&s[3]===n)return null;i=o,a.push(["translate3d",t,e,null!=n?n:0])}else a.push(s)}return-1===i&&a.splice(0,0,Oe(n)?["translate3d",t,e,null!=n?n:0]:["translate",t,e]),0===a.length?null:a}var u=r?r.replace(/translate(3d)?\([^)]*\)/g,""):"";return 0===n?"translate(".concat(t,", ").concat(e,")").concat(u):"translate3d(".concat(t,", ").concat(e,", ").concat(n,")").concat(u)}var Vl=function(t,e,n){if(!n.length)return null;var r,i=g(e,2),a=i[0],o=i[1],s=n.map((function(e){var n=e.fields,i=e.shape,s=(e.states,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["fields","shape","states"])),u=function(e){var n;if(e){var r=t.getShape(e);if(!r)return null;var i="get".concat(ll(e),"Style"),s=(null===(n=null==t?void 0:t[i])||void 0===n?void 0:n.bind(t))||function(t){return t};return{shape:r,fromStyle:(null==s?void 0:s(a))||{},toStyle:(null==s?void 0:s(o))||{}}}return{shape:t,fromStyle:a,toStyle:o}}(i);if(!u)return null;var c=u.shape,l=u.fromStyle,f=u.toStyle,d=[{},{}];if(n.forEach((function(t){var e,n;Object.assign(d[0],b({},t,null!==(e=l[t])&&void 0!==e?e:Bl(t))),Object.assign(d[1],b({},t,null!==(n=f[t])&&void 0!==n?n:Bl(t)))})),d.some((function(t){return Object.keys(t).some((function(t){return["x","y","z"].includes(t)}))}))){var h=c.attributes||{},p=h.x,v=void 0===p?0:p,g=h.y,y=void 0===g?0:g,m=h.z,x=h.transform,w=void 0===x?"":x;d.forEach((function(t){var e,n,r;t.transform=Wl(null!==(e=t.x)&&void 0!==e?e:v,null!==(n=t.y)&&void 0!==n?n:y,null!==(r=t.z)&&void 0!==r?r:m,w)}))}var k=c.animate(zl(d),s);return void 0===i&&(r=k),k})).filter(Boolean),u=r||(null==s?void 0:s[0]);return u?Fl(u,s.filter((function(t){return t!=t}))):null},Hl=[{fields:["x","y"]}],Yl=Hl,Ul=[{fields:["sourceNode","targetNode"]}],ql=Ul,Xl=[{fields:["childrenNode","x","y"]}],Kl=Xl,$l=Object.prototype.hasOwnProperty;const Zl=function(t,e){if(!e||!fn(t))return{};for(var n,r={},i=_n(e)?e:function(t){return t[e]},a=0;a<t.length;a++){var o=t[a];n=i(o),$l.call(r,n)?r[n].push(o):r[n]=[o]}return r},Ql=function(t,e,n){var r,i,a,o,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),r=null,o=t.apply(i,a),r||(i=a=null)},c=function(){var c=Date.now();s||!1!==n.leading||(s=c);var l=e-(c-s);return i=this,a=arguments,l<=0||l>e?(r&&(clearTimeout(r),r=null),s=c,o=t.apply(i,a),r||(i=a=null)):r||!1===n.trailing||(r=setTimeout(u,l)),o};return c.cancel=function(){clearTimeout(r),s=0,r=i=a=null},c};var Jl=function(t){if("object"!=typeof t||null===t)return t;var e;if(fn(t)){e=[];for(var n=0,r=t.length;n<r;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=Jl(t[n]):e[n]=t[n]}else for(var i in e={},t)"object"==typeof t[i]&&null!=t[i]?e[i]=Jl(t[i]):e[i]=t[i];return e};const tf=Jl;function ef(t){return t instanceof Float32Array||!(!Array.isArray(t)||2!==t.length&&3!==t.length)&&t.every((function(t){return"number"==typeof t}))}function nf(t,e,n){return t>=e&&t<=n}function rf(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(Array.isArray(t)){var e=g(t,4),n=e[0],r=void 0===n?0:n,i=e[1],a=void 0===i?r:i,o=e[2],s=void 0===o?r:o,u=e[3];return[r,a,s,void 0===u?a:u]}return[t,t,t,t]}function af(){var t=rf(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0);return t[0]+t[2]}function of(t){return t.max[0]-t.min[0]}function sf(t){return t.max[1]-t.min[1]}function uf(t){return[of(t),sf(t)]}function cf(t,e){var n=ef(t)?lf(t):t.getShape("key").getBounds();return e?ff(n,e):n}function lf(t){var e=g(t,3),n=e[0],r=e[1],i=e[2],a=void 0===i?0:i,o=new gr;return o.setMinMax([n,r,a],[n,r,a]),o}function ff(t,e){var n=g(rf(e),4),r=n[0],i=n[1],a=n[2],o=n[3],s=g(t.min,3),u=s[0],c=s[1],l=s[2],f=g(t.max,3),d=f[0],h=f[1],p=f[2],v=new gr;return v.setMinMax([u-o,c-r,l],[d+i,h+a,p]),v}function df(t){if(0===t.length)return new gr;if(1===t.length)return t[0];var e=new gr;e.setMinMax(t[0].min,t[0].max);for(var n=1;n<t.length;n++){var r=t[n];e.setMinMax([Math.min(e.min[0],r.min[0]),Math.min(e.min[1],r.min[1]),Math.min(e.min[2],r.min[2])],[Math.max(e.max[0],r.max[0]),Math.max(e.max[1],r.max[1]),Math.max(e.max[2],r.max[2])])}return e}function hf(t,e){return nf(t[0],e.min[0],e.max[0])&&nf(t[1],e.min[1],e.max[1])}function pf(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=g(e.min,2),i=r[0],a=r[1],o=g(e.max,2),s=o[0],u=o[1],c=(t[1]===a||t[1]===u)&&(n||nf(t[0],i,s)),l=(t[0]===i||t[0]===s)&&(n||nf(t[1],a,u));return c||l}function vf(t,e){var n=e.center;return t[0]===n[0]&&t[1]===n[1]}function gf(t,e){var n=g(t,2),r=n[0],i=n[1],a=g(e.min,2),o=a[0],s=a[1],u=g(e.max,2),c=r-o,l=u[0]-r,f=i-s,d=u[1]-i,h=Math.min(c,l,f,d);return h===c?"left":h===l?"right":h===f?"top":h===d?"bottom":"left"}function yf(t,e){var n=tf(t);if(hf(t,e))switch(gf(t,e)){case"left":n[0]=e.min[0];break;case"right":n[0]=e.max[0];break;case"top":n[1]=e.min[1];break;case"bottom":n[1]=e.max[1]}else{var r=g(t,2),i=r[0],a=r[1],o=g(e.min,2),s=o[0],u=o[1],c=g(e.max,2),l=c[0],f=c[1];n[0]=nf(i,s,l)?i:i<s?s:l,n[1]=nf(a,u,f)?a:a<u?u:f}return n}var mf=function(t,e){return t===e},bf=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},t}(),xf=function(){function t(t){void 0===t&&(t=mf),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new bf(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new bf(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},t.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,r=t.callback,i=void 0===r?void 0:r;if(!this.head)return null;for(var a=this.head;a;){if(i&&i(a.value))return a;if(void 0!==n&&this.compare(a.value,n))return a;a=a.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach((function(t){return e.append(t)})),this},t.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},t.prototype.reverse=function(){for(var t=this.head,e=null,n=null;t;)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map((function(e){return e.toString(t)})).toString()},t}();const wf=xf;!function(){function t(){this.linkedList=new wf}t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)}}();var kf=function(t,e,n){void 0===e&&(e=[]);var r=e.filter((function(e){return e.source===t||e.target===t}));return"target"===n?r.filter((function(e){return e.source===t})).map((function(t){return t.target})):"source"===n?r.filter((function(e){return e.target===t})).map((function(t){return t.source})):r.map((function(e){return e.source===t?e.target:e.source}))};const Ef=function(t){var e={},n=t.nodes,r=void 0===n?[]:n,i=t.edges,a=void 0===i?[]:i;return r.forEach((function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}})),a.forEach((function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++})),e};var Of={}.toString;const Sf=function(t,e){return Of.call(t)==="[object "+e+"]"},Mf=function(t){return Sf(t,"Function")},Tf=function(t){return Array.isArray?Array.isArray(t):Sf(t,"Array")};Object.keys;const Af=function(t){if(!function(t){return"object"==typeof t&&null!==t}(t)||!Sf(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};var Pf=Array.prototype;Pf.splice,Pf.indexOf,Array.prototype.splice;Object.prototype.hasOwnProperty;Number.isInteger&&Number.isInteger,Math.PI,Math.PI;var Nf=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return function(t,e){if(t)if(Tf(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e}(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break}(t,(function(n,r){Mf(t)&&"prototype"===r||e.push(n)})),e};const Cf=Nf;Object.prototype;var _f=function(t){if("object"!=typeof t||null===t)return t;var e;if(Tf(t)){e=[];for(var n=0,r=t.length;n<r;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=_f(t[n]):e[n]=t[n]}else for(var i in e={},t)"object"==typeof t[i]&&null!=t[i]?e[i]=_f(t[i]):e[i]=t[i];return e};const Lf=_f;function Rf(t,e,n,r){for(var i in n=n||0,r=r||5,e)if(e.hasOwnProperty(i)){var a=e[i];null!==a&&Af(a)?(Af(t[i])||(t[i]={}),n<r?Rf(t[i],a,n+1,r):t[i]=e[i]):Tf(a)?(t[i]=[],t[i]=t[i].concat(a)):void 0!==a&&(t[i]=a)}}const jf=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)Rf(t,e[r]);return t};Object.prototype.hasOwnProperty,Object.prototype.hasOwnProperty;const Df=function(t){return t};var If;!function(t,e){if(!Mf(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=e?e.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var s=t.apply(this,r);return o.set(a,s),s};n.cache=new Map}((function(t,e){void 0===e&&(e={});var n,r=e.fontSize,i=e.fontFamily,a=e.fontWeight,o=e.fontStyle,s=e.fontVariant;return If||(If=document.createElement("canvas").getContext("2d")),If.font=[o,s,a,r+"px",i].join(" "),If.measureText((n=t,Sf(n,"String")?t:"")).width}),(function(t,e){return void 0===e&&(e={}),function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}([t],Cf(e)).join("")})),function(){function t(){this.map={}}t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length}}();function Ff(t,e,n,r){if(t===e)return[t];if(r[e])return r[e];for(var i=[],a=0,o=n[e];a<o.length;a++){var s=Ff(t,o[a],n,r);if(!s)return;for(var u=0,c=s;u<c.length;u++){var l=c[u];Tf(l)?i.push(De(De([],l,!0),[e],!1)):i.push([l,e])}}return r[e]=i,r[e]}var zf,Bf=function(t,e,n,r,i){var a=function(t,e,n,r){var i=t.nodes,a=void 0===i?[]:i,o=t.edges,s=void 0===o?[]:o,u=[],c={},l={},f={};a.forEach((function(t,n){var r=t.id;u.push(r),l[r]=1/0,r===e&&(l[r]=0)}));for(var d=a.length,h=function(t){var e=function(t,e,n){for(var r,i=1/0,a=0;a<e.length;a++){var o=e[a].id;!n[o]&&t[o]<=i&&(i=t[o],r=e[a])}return r}(l,a,c),i=e.id;if(c[i]=!0,l[i]===1/0)return"continue";var o=[];o=n?function(t,e){return e.filter((function(e){return e.source===t}))}(i,s):function(t,e){return e.filter((function(e){return e.source===t||e.target===t}))}(i,s),o.forEach((function(t){var n=t.target,a=t.source,o=n===i?a:n,s=r&&t[r]?t[r]:1;l[o]>l[e.id]+s?(l[o]=l[e.id]+s,f[o]=[e.id]):l[o]===l[e.id]+s&&f[o].push(e.id)}))},p=0;p<d;p++)h();f[e]=[e];var v={};for(var g in l)l[g]!==1/0&&Ff(e,g,f,v);var y={};for(var g in v)y[g]=v[g][0];return{length:l,path:y,allPath:v}}(t,e,r,i),o=a.length,s=a.path,u=a.allPath;return{length:o[n],path:s[n],allPath:u[n]}};!function(){function t(t){this.arr=t}t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null==r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]+r[a];return new t(i)}},t.prototype.subtract=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null==r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]-r[a];return new t(i)}},t.prototype.avg=function(e){var n=[];if(0!==e)for(var r in this.arr)n[r]=this.arr[r]/e;return new t(n)},t.prototype.negate=function(){var e=[];for(var n in this.arr)e[n]=-this.arr[n];return new t(e)},t.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return r}},t.prototype.euclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return Math.sqrt(r)}console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],n=Lf(this.arr);n.sort((function(t,e){return t-e}));var r=n[n.length-1],i=n[0];for(var a in this.arr)e[a]=(this.arr[a]-i)/(r-i);return new t(e)},t.prototype.norm2=function(){var t;if(!(null===(t=this.arr)||void 0===t?void 0:t.length))return 0;var e=0;for(var n in this.arr)e+=Math.pow(this.arr[n],2);return Math.sqrt(e)},t.prototype.dot=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=this.arr[i]*t.arr[i];return r}console.error("The two vectors are unequal in length.")},t.prototype.equal=function(t){var e,n=t.arr;if((null===(e=this.arr)||void 0===e?void 0:e.length)!==(null==n?void 0:n.length))return!1;for(var r in this.arr)if(this.arr[r]!==n[r])return!1;return!0}}(),function(t){t.EuclideanDistance="euclideanDistance"}(zf||(zf={})),function(){function t(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var r=n[e];this.parent[r]=r}}t.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},t.prototype.union=function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n<r?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)}}();var Gf=function(t,e){return t-e};!function(){function t(t){void 0===t&&(t=Gf),this.compareFn=t,this.list=[]}t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,n=t,r=this.getLeft(t),i=this.getRight(t),a=this.list.length;null!==r&&r<a&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<a&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))}}();var Wf="-1",Vf=function(t,e,n,r){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=t,this.from=e,this.to=n,this.label=r},Hf=function(){function t(t,e){void 0===t&&(t=-1),void 0===e&&(e=Wf),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}(),Yf=function(){function t(t,e,n){void 0===t&&(t=-1),void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new Hf(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,n,r){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t])){var i=new Vf(t,e,n,r);if(this.edges.push(i),this.edgeMap[t]=i,this.nodeMap[e].addEdge(i),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(i),!this.directed){var a=new Vf(t,n,e,r);this.nodeMap[n].addEdge(a),this.edgeLabelMap[r].push(a)}}},t}(),Uf=function(){function t(t,e,n,r,i){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||Wf,edgeLabel:r||"-1",nodeLabel2:i||Wf}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),qf=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,n,r,i){return this.dfsEdgeList.push(new Uf(t,e,n,r,i)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=!1);var n=new Yf(t,!0,e);return this.dfsEdgeList.forEach((function(t){var e=t.fromNode,r=t.toNode,i=t.nodeEdgeNodeLabel,a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;a!==Wf&&n.addNode(e,a),s!==Wf&&n.addNode(r,s),a!==Wf&&s!==a&&n.addEdge(void 0,e,r,o)})),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;e>=0;e--){var n=this.dfsEdgeList[e],r=n.fromNode,i=n.toNode;r<i&&(void 0===t||i===t)&&(this.rmpath.push(e),t=r)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach((function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)})),Object.keys(t).length},t}(),Xf=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}();function Kf(t){if(void 0!==t.id)return t.id;if(void 0!==t.source&&void 0!==t.target)return"".concat(t.source,"-").concat(t.target);throw new Error(jl("The datum does not have available id."))}function $f(t){return t.combo}function Zf(t,e){var n={nodes:(t.nodes||[]).map(Kf),edges:(t.edges||[]).map(Kf),combos:(t.combos||[]).map(Kf)};return e?Object.values(n).flat():n}!function(){function t(t){var e=t.graphs,n=t.minSupport,r=void 0===n?2:n,i=t.minNodeNum,a=void 0===i?1:i,o=t.maxNodeNum,s=void 0===o?4:o,u=t.top,c=void 0===u?10:u,l=t.directed,f=void 0!==l&&l,d=t.verbose,h=void 0!==d&&d;this.graphs=e,this.dfsCode=new qf,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=c,this.directed=f,this.counter=0,this.maxNodeNum=s,this.minNodeNum=a,this.verbose=h,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}t.prototype.findForwardRootEdges=function(t,e){var n=this,r=[],i=t.nodeMap;return e.edges.forEach((function(t){(n.directed||e.label<=i[t.to].label)&&r.push(t)})),r},t.prototype.findBackwardEdge=function(t,e,n,r){if(!this.directed&&e===n)return null;for(var i=t.nodeMap,a=i[n.to].edges,o=a.length,s=0;s<o;s++){var u=a[s];if(!r.hasEdge(u)&&u.to===e.from)if(this.directed){if(i[e.from].label<i[n.to].label||i[e.from].label===i[n.to].label&&e.label<=u.label)return u}else if(e.label<u.label||e.label===u.label&&i[e.to].label<=i[n.to].label)return u}return null},t.prototype.findForwardPureEdges=function(t,e,n,r){for(var i=[],a=e.to,o=t.nodeMap[a].edges,s=o.length,u=0;u<s;u++){var c=o[u],l=t.nodeMap[c.to];n<=l.label&&!r.hasNode(l)&&i.push(c)}return i},t.prototype.findForwardRmpathEdges=function(t,e,n,r){for(var i=[],a=t.nodeMap,o=a[e.to].label,s=a[e.from].edges,u=s.length,c=0;c<u;c++){var l=s[c],f=a[l.to].label;e.to===l.to||n>f||r.hasNode(a[l.to])||(e.label<l.label||e.label===l.label&&o<=f)&&i.push(l)}return i},t.prototype.getSupport=function(t){var e={};return t.forEach((function(t){e[t.graphId]||(e[t.graphId]=!0)})),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach((function(n){var r=t[n],i=r.nodeLabel1,a=r.edgeLabel,o=r.nodeLabel2;e?(i<e.nodeLabel1||i===e.nodeLabel1&&a<e.edgeLabel||i===e.nodeLabel1&&a===e.edgeLabel&&o<e.nodeLabel2)&&(e={nodeLabel1:i,edgeLabel:a,nodeLabel2:o}):e={nodeLabel1:i,edgeLabel:a,nodeLabel2:o}})),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var n=this.directed,r=e.toGraph(-1,n),i=r.nodeMap,a=new qf,o={};r.nodes.forEach((function(e){t.findForwardRootEdges(r,e).forEach((function(t){var n=i[t.to],a="".concat(e.label,"-").concat(t.label,"-").concat(n.label);o[a]||(o[a]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:n.label});var s={graphId:r.id,edge:t,preNode:null};o[a].projected.push(s)}))}));var s=this.findMinLabel(o);if(s){a.dfsEdgeList.push(new Uf(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var u="".concat(s.nodeLabel1,"-").concat(s.edgeLabel,"-").concat(s.nodeLabel2);return function o(s){for(var u=a.buildRmpath(),c=a.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l=a.dfsEdgeList[u[0]].toNode,f={},d=!1,h=0,p=n?-1:0,v=function(e){if(d)return"break";s.forEach((function(n){var i=new Xf(n),o=t.findBackwardEdge(r,i.edges[u[e]],i.edges[u[0]],i);o&&(f[o.label]||(f[o.label]={projected:[],edgeLabel:o.label}),f[o.label].projected.push({graphId:r.id,edge:f,preNode:n}),h=a.dfsEdgeList[u[e]].fromNode,d=!0)}))},g=u.length-1;g>p&&"break"!==v(g);g--);if(d){var y=t.findMinLabel(f);a.dfsEdgeList.push(new Uf(l,h,Wf,y.edgeLabel,Wf));var m=a.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[m]===a.dfsEdgeList[m]&&o(f[y.edgeLabel].projected)}var b={};d=!1;var x=0;s.forEach((function(e){var n=new Xf(e),a=t.findForwardPureEdges(r,n.edges[u[0]],c,n);a.length>0&&(d=!0,x=l,a.forEach((function(t){var n="".concat(t.label,"-").concat(i[t.to].label);b[n]||(b[n]={projected:[],edgeLabel:t.label,nodeLabel2:i[t.to].label}),b[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}));var w=u.length,k=function(e){if(d)return"break";var n=u[e];s.forEach((function(e){var o=new Xf(e),s=t.findForwardRmpathEdges(r,o.edges[n],c,o);s.length>0&&(d=!0,x=a.dfsEdgeList[n].fromNode,s.forEach((function(t){var n="".concat(t.label,"-").concat(i[t.to].label);b[n]||(b[n]={projected:[],edgeLabel:t.label,nodeLabel2:i[t.to].label}),b[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}))};for(g=0;g<w&&"break"!==k(g);g++);if(!d)return!0;var E=t.findMinLabel(b);a.dfsEdgeList.push(new Uf(x,l+1,Wf,E.edgeLabel,E.nodeLabel2));var O=a.dfsEdgeList.length-1;return e.dfsEdgeList[O]===a.dfsEdgeList[O]&&o(b["".concat(E.edgeLabel,"-").concat(E.nodeLabel2)].projected)}(o[u].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(Lf(t))}},t.prototype.subGraphMining=function(t){var e=this;if(!(this.getSupport(t)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),r=this.dfsCode.buildRmpath(),i=this.dfsCode.dfsEdgeList[r[0]].toNode,a=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,o={},s={};t.forEach((function(t){for(var u=e.graphs[t.graphId],c=u.nodeMap,l=new Xf(t),f=r.length-1;f>=0;f--){var d=e.findBackwardEdge(u,l.edges[r[f]],l.edges[r[0]],l);if(d){var h="".concat(e.dfsCode.dfsEdgeList[r[f]].fromNode,"-").concat(d.label);s[h]||(s[h]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[r[f]].fromNode,edgeLabel:d.label}),s[h].projected.push({graphId:t.graphId,edge:d,preNode:t})}}if(!(n>=e.maxNodeNum)){e.findForwardPureEdges(u,l.edges[r[0]],a,l).forEach((function(e){var n="".concat(i,"-").concat(e.label,"-").concat(c[e.to].label);o[n]||(o[n]={projected:[],fromNodeId:i,edgeLabel:e.label,nodeLabel2:c[e.to].label}),o[n].projected.push({graphId:t.graphId,edge:e,preNode:t})}));var p=function(n){e.findForwardRmpathEdges(u,l.edges[r[n]],a,l).forEach((function(i){var a="".concat(e.dfsCode.dfsEdgeList[r[n]].fromNode,"-").concat(i.label,"-").concat(c[i.to].label);o[a]||(o[a]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[r[n]].fromNode,edgeLabel:i.label,nodeLabel2:c[i.to].label}),o[a].projected.push({graphId:t.graphId,edge:i,preNode:t})}))};for(f=0;f<r.length;f++)p(f)}})),Object.keys(s).forEach((function(t){var n=s[t],r=n.toNodeId,a=n.edgeLabel;e.dfsCode.dfsEdgeList.push(new Uf(i,r,"-1",a,"-1")),e.subGraphMining(s[t].projected),e.dfsCode.dfsEdgeList.pop()})),Object.keys(o).forEach((function(t){var n=o[t],r=n.fromNodeId,a=n.edgeLabel,s=n.nodeLabel2;e.dfsCode.dfsEdgeList.push(new Uf(r,i+1,Wf,a,s)),e.subGraphMining(o[t].projected),e.dfsCode.dfsEdgeList.pop()}))}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},a={},o={},s={};return Object.keys(t).forEach((function(n){var r=t[n],u=r.nodeMap;r.nodes.forEach((function(t,r){var c=t.label,l="".concat(n,"-").concat(c);if(!o[l]){var f=i[c]||0;f++,i[c]=f}o[l]={graphKey:n,label:c},t.edges.forEach((function(t){var r=c,i=u[t.to].label;if(!e&&r>i){var o=i;i=r,r=o}var l=t.label,f="".concat(n,"-").concat(r,"-").concat(l,"-").concat(i),d="".concat(r,"-").concat(l,"-").concat(i);if(!a[d]){var h=a[d]||0;h++,a[d]=h}s[f]={graphId:n,nodeLabel1:r,edgeLabel:l,nodeLabel2:i}}))}))})),Object.keys(i).forEach((function(t){if(!(i[t]<n)){var e={nodes:[],edges:[]};e.nodes.push({id:"0",label:t}),r.push(e)}})),r},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,n=(this.directed,{});Object.keys(e).forEach((function(r){var i=e[r],a=i.nodeMap;i.nodes.forEach((function(e){t.findForwardRootEdges(i,e).forEach((function(t){var i=a[t.to],o="".concat(e.label,"-").concat(t.label,"-").concat(i.label);n[o]||(n[o]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:i.label});var s={graphId:r,edge:t,preNode:null};n[o].projected.push(s)}))}))})),Object.keys(n).forEach((function(e){var r=n[e],i=r.projected,a=r.nodeLabel1,o=r.edgeLabel,s=r.nodeLabel2;t.dfsCode.dfsEdgeList.push(new Uf(0,1,a,o,s)),t.subGraphMining(i),t.dfsCode.dfsEdgeList.pop()}))}}}(),function(){function t(t){void 0===t&&(t=10),this.linkedList=new wf,this.maxStep=t}Object.defineProperty(t.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},t.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},t.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},t.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toArray=function(){return this.linkedList.toArray().map((function(t){return t.value}))},t.prototype.clear=function(){for(;!this.isEmpty();)this.pop()}}();var Qf=function(t,e,n){var r;switch(n.type){case"degree":var i=new Map;return null===(r=t.nodes)||void 0===r||r.forEach((function(t){var r=e(Kf(t),n.direction).length;i.set(Kf(t),r)})),i;case"betweenness":return td(t,n.directed,n.weightPropertyName);case"closeness":return ed(t,n.directed,n.weightPropertyName);case"eigenvector":return rd(t,n.directed);case"pagerank":return nd(t,n.epsilon,n.linkProb);default:return Jf(t)}},Jf=function(t){var e,n=new Map;return null===(e=t.nodes)||void 0===e||e.forEach((function(t){n.set(Kf(t),0)})),n},td=function(t,e,n){var r=Jf(t),i=t.nodes,a=void 0===i?[]:i;return a.forEach((function(i){a.forEach((function(a){if(i!==a){var o=Bf(t,Kf(i),Kf(a),e,n).allPath,s=o.length;o.flat().forEach((function(t){t!==Kf(i)&&t!==Kf(a)&&r.set(t,r.get(t)+1/s)}))}}))})),r},ed=function(t,e,n){var r=new Map,i=t.nodes,a=void 0===i?[]:i;return a.forEach((function(i){var o=a.reduce((function(r,a){return i!==a&&(r+=Bf(t,Kf(i),Kf(a),e,n).length),r}),0);r.set(Kf(i),1/o)})),r},nd=function(t,e,n){var r,i=new Map,a=function(t,e,n){"number"!=typeof e&&(e=1e-6),"number"!=typeof n&&(n=.85);for(var r,i=1,a=0,o=1e3,s=t.nodes,u=void 0===s?[]:s,c=t.edges,l=void 0===c?[]:c,f=u.length,d={},h={},p=0;p<f;++p)d[g=(w=u[p]).id]=1/f,h[g]=1/f;for(var v=Ef(t);o>0&&i>e;){for(a=0,p=0;p<f;++p){var g=(w=u[p]).id;if(r=0,0===v[w.id].inDegree)d[g]=0;else{for(var y=kf(g,l,"source"),m=0;m<y.length;++m){var b=y[m],x=v[b].outDegree;x>0&&(r+=h[b]/x)}d[g]=n*r,a+=d[g]}}for(a=(1-a)/f,i=0,p=0;p<f;++p){var w;r=d[g=(w=u[p]).id]+a,i+=Math.abs(r-h[g]),h[g]=r}o-=1}return h}(t,e,n);return null===(r=t.nodes)||void 0===r||r.forEach((function(t){i.set(Kf(t),a[Kf(t)])})),i},rd=function(t,e){var n=t.nodes,r=void 0===n?[]:n,i=id(t,e),a=ad(i,r.length),o=new Map;return r.forEach((function(t,e){o.set(Kf(t),a[e])})),o},id=function(t,e){var n=t.nodes,r=void 0===n?[]:n,i=t.edges,a=void 0===i?[]:i,o=Array(r.length).fill(null).map((function(){return Array(r.length).fill(0)}));return a.forEach((function(t){var n=t.source,i=t.target,a=r.findIndex((function(t){return Kf(t)===n})),s=r.findIndex((function(t){return Kf(t)===i}));e?o[a][s]=1:(o[a][s]=1,o[s][a]=1)})),o},ad=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6,i=Array(e).fill(1),a=1/0,o=0;o<n&&a>r;o++){for(var s=Array(e).fill(0),u=0;u<e;u++)for(var c=0;c<e;c++)s[u]+=t[u][c]*i[c];for(var l=Math.sqrt(s.reduce((function(t,e){return t+e*e}),0)),f=0;f<e;f++)s[f]/=l;a=Math.sqrt(s.reduce((function(t,e,n){return t+(e-i[n])*e}),0)),i=s}return i};function od(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pl,i=new Map(t.map((function(t){return[n(t),t]}))),a=new Map(e.map((function(t){return[n(t),t]}))),o=new Set(i.keys()),s=new Set(a.keys()),u=[],c=[],l=[],f=[];return s.forEach((function(t){o.has(t)?r(i.get(t),a.get(t))?f.push(a.get(t)):c.push(a.get(t)):u.push(a.get(t))})),o.forEach((function(t){s.has(t)||l.push(i.get(t))})),{enter:u,exit:l,keep:f,update:c}}function sd(t,e,n){t.forEach((function(t){!function(t){n&&!n(t)||(t.style.visibility=e)}(t)}))}var ud=function(){return O((function t(e){k(this,t),this.extensions=[],this.extensionMap={},this.context=e}),[{key:"setExtensions",value:function(t){var e=function(t,e,n){var r={},i=function(t){return t in r||(r[t]=0),"".concat(e,"-").concat(t,"-").concat(r[t]++)};return n.map((function(e){return"string"==typeof e?{type:e,key:i(e)}:"function"==typeof e?e.call(t):e.key?e:Object.assign(Object.assign({},e),{key:i(e.type)})}))}(this.context.graph,this.category,t),n=od(this.extensions,e,(function(t){return t.key})),r=n.enter,i=n.update,a=n.exit,o=n.keep;this.createExtensions(r),this.updateExtensions([].concat(M(i),M(o))),this.destroyExtensions(a),this.extensions=e}},{key:"createExtension",value:function(t){var e=this.category,n=t.key,r=t.type,i=Cl(e,r);if(!i)return Dl.warn("The extension ".concat(r," of ").concat(e," is not registered."));var a=new i(this.context,t);this.extensionMap[n]=a}},{key:"createExtensions",value:function(t){var e=this;t.forEach((function(t){return e.createExtension(t)}))}},{key:"updateExtension",value:function(t){var e=t.key,n=this.extensionMap[e];n&&n.update(t)}},{key:"updateExtensions",value:function(t){var e=this;t.forEach((function(t){return e.updateExtension(t)}))}},{key:"destroyExtension",value:function(t){var e=this.extensionMap[t];e&&(e.destroy(),delete this.extensionMap[t])}},{key:"destroyExtensions",value:function(t){var e=this;t.forEach((function(t){var n=t.key;return e.destroyExtension(n)}))}},{key:"destroy",value:function(){Object.values(this.extensionMap).forEach((function(t){return t.destroy()})),this.context={},this.extensions=[],this.extensionMap={}}}])}(),cd=function(){return O((function t(e,n){k(this,t),this.events=[],this.destroyed=!1,this.context=e,this.options=n}),[{key:"update",value:function(t){this.options=Object.assign(this.options,t)}},{key:"destroy",value:function(){this.context={},this.options={},this.destroyed=!0}}])}(),ld=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e)}(cd),fd=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).isOverlapping=function(t,e){return e.some((function(e){return t.intersects(e)}))},r.occupiedBounds=[],r.detectLabelCollision=function(t){var e=r.context.viewport,n={show:[],hide:[]};return r.occupiedBounds=[],t.forEach((function(t){var i=t.getShape("label").getRenderBounds();e.isInViewport(i,!0)&&!r.isOverlapping(i,r.occupiedBounds)?(n.show.push(t),r.occupiedBounds.push(ff(i,r.options.padding))):n.hide.push(t)})),n},r.hideLabelIfExceedViewport=function(t,e){var n=od(t,e,(function(t){return t.id})),i=n.exit;null==i||i.forEach(r.hideLabel)},r.nodeCentralities=new Map,r.sortNodesByCentrality=function(t,e){var n=r.context.model,i=n.getData(),a=n.getRelatedEdgesData.bind(n),o=t.map((function(t){return r.nodeCentralities.has(t.id)||(r.nodeCentralities=Qf(i,a,e)),{node:t,centrality:r.nodeCentralities.get(t.id)}}));return o.sort((function(t,e){return e.centrality-t.centrality})).map((function(t){return t.node}))},r.sortLabelElementsInView=function(t){var e=r.options,n=e.sort,i=e.sortNode,a=e.sortCombo,o=e.sortEdge,s=r.context.model;if(_n(n))return t.sort((function(t,e){return n(s.getElementDataById(t.id),s.getElementDataById(e.id))}));var u=Zl(t,(function(t){return t.type})),c=u.node,l=void 0===c?[]:c,f=u.edge,d=void 0===f?[]:f,h=u.combo,p=void 0===h?[]:h,v=_n(a)?p.sort((function(t,e){return a.apply(void 0,M(s.getComboData([t.id,e.id])))})):p,g=_n(i)?l.sort((function(t,e){return i.apply(void 0,M(s.getNodeData([t.id,e.id])))})):r.sortNodesByCentrality(l,i),y=_n(o)?d.sort((function(t,e){return o.apply(void 0,M(s.getEdgeData([t.id,e.id])))})):d;return[].concat(M(v),M(g),M(y))},r.labelElementsInView=[],r.isFirstRender=!0,r.onToggleVisibility=function(t){var e;if("zIndex"!==(null===(e=t.data)||void 0===e?void 0:e.stage))if(r.validate(t)){var n=r.isFirstRender?r.getLabelElements():r.getLabelElementsInView();r.hideLabelIfExceedViewport(r.labelElementsInView,n),r.labelElementsInView=n;for(var i=r.sortLabelElementsInView(r.labelElementsInView),a=r.detectLabelCollision(i),o=a.show,s=a.hide,u=o.length-1;u>=0;u--)r.showLabel(o[u]);s.forEach(r.hideLabel)}else r.hiddenElements.size>0&&(r.hiddenElements.forEach(r.showLabel),r.hiddenElements.clear())},r.hiddenElements=new Map,r.hideLabel=function(t){var e=t.getShape("label");e&&sd(e,"hidden"),r.hiddenElements.set(t.id,t)},r.showLabel=function(t){var e=t.getShape("label");e&&sd(e,"visible"),t.toFront(),r.hiddenElements.delete(t.id)},r.onTransform=Ql(r.onToggleVisibility,r.options.throttle,{leading:!0}),r.enableToggle=!0,r.toggle=function(t){r.enableToggle&&r.onToggleVisibility(t)},r.onBeforeRender=function(){r.enableToggle=!1},r.onAfterRender=function(t){r.onToggleVisibility(t),r.enableToggle=!0},r.bindEvents(),r}return _(e,t),O(e,[{key:"update",value:function(t){this.unbindEvents(),Dn(e,"update",this,3)([t]),this.bindEvents(),this.onToggleVisibility({})}},{key:"getLabelElements",value:function(){var t=this.context.element.elementMap,e=[];for(var n in t){var r=t[n];r.isVisible()&&r.getShape("label")&&e.push(r)}return e}},{key:"getLabelElementsInView",value:function(){var t=this.context.viewport;return this.getLabelElements().filter((function(e){return t.isInViewport(e.getShape("key").getRenderBounds())}))}},{key:"bindEvents",value:function(){var t=this.context.graph;t.on(kl.BEFORE_RENDER,this.onBeforeRender),t.on(kl.AFTER_RENDER,this.onAfterRender),t.on(kl.AFTER_DRAW,this.toggle),t.on(kl.AFTER_LAYOUT,this.toggle),t.on(kl.AFTER_TRANSFORM,this.onTransform)}},{key:"unbindEvents",value:function(){var t=this.context.graph;t.off(kl.BEFORE_RENDER,this.onBeforeRender),t.off(kl.AFTER_RENDER,this.onAfterRender),t.off(kl.AFTER_DRAW,this.toggle),t.off(kl.AFTER_LAYOUT,this.toggle),t.off(kl.AFTER_TRANSFORM,this.onTransform)}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return _n(e)?e(t):!!e}},{key:"destroy",value:function(){this.unbindEvents(),Dn(e,"destroy",this,3)([])}}])}(ld);fd.defaultOptions={enable:!0,throttle:100,padding:0,sortNode:{type:"degree"}};const dd=function(t){if(!fl(t)||!Nn(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};function hd(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(null==t)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}function pd(t,e,n,r){for(var i in n=n||0,r=r||5,e)if(hd(e,i)){var a=e[i];null!==a&&dd(a)?(dd(t[i])||(t[i]={}),n<r?pd(t[i],a,n+1,r):t[i]=e[i]):fn(a)?(t[i]=[],t[i]=t[i].concat(a)):void 0!==a&&(t[i]=a)}}const vd=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)pd(t,e[r]);return t};var gd=[0,0,0];function yd(t,e){return t.map((function(t,n){return t+e[n]}))}function md(t,e){return t.map((function(t,n){return t-e[n]}))}function bd(t,e){return"number"==typeof e?t.map((function(t){return t*e})):t.map((function(t,n){return t*e[n]}))}function xd(t,e){return"number"==typeof e?t.map((function(t){return t/e})):t.map((function(t,n){return t/e[n]}))}function wd(t,e){return t.map((function(t){return t*e}))}function kd(t,e){return Math.sqrt(t.reduce((function(t,n,r){return t+Math.pow(n-e[r]||0,2)}),0))}function Ed(t,e){return t.reduce((function(t,n,r){return t+Math.abs(n-e[r])}),0)}function Od(t){var e=t.reduce((function(t,e){return t+Math.pow(e,2)}),0);return t.map((function(t){return t/Math.sqrt(e)}))}function Sd(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t[0]*e[1]-t[1]*e[0],i=Math.acos(bd(t,e).reduce((function(t,e){return t+e}),0)/(kd(t,gd)*kd(e,gd)));return n&&r<0&&(i=2*Math.PI-i),i}function Md(t){return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?[t[1],-t[0]]:[-t[1],t[0]]}function Td(t,e){return t.map((function(t){return t%e}))}function Ad(t){return[t[0],t[1]]}function Pd(t){return 2===t.length?[t[0],t[1],0]:t}function Nd(t){var e=g(t,2),n=e[0],r=e[1];return n||r?Math.atan2(r,n):0}function Cd(t,e){var n,r,i,a,o=g(t,2),s=o[0],u=o[1],c=g(e,2),l=c[0],f=c[1];return(n=md(s,u),r=md(l,f),i=Pd(n),a=Pd(r),[i[1]*a[2]-i[2]*a[1],i[2]*a[0]-i[0]*a[2],i[0]*a[1]-i[1]*a[0]]).every((function(t){return 0===t}))}function _d(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Cd(t,e)){var r=g(t,2),i=r[0],a=r[1],o=g(e,2),s=o[0],u=o[1],c=((i[0]-s[0])*(s[1]-u[1])-(i[1]-s[1])*(s[0]-u[0]))/((i[0]-a[0])*(s[1]-u[1])-(i[1]-a[1])*(s[0]-u[0])),l=u[0]-s[0]?(i[0]-s[0]+c*(a[0]-i[0]))/(u[0]-s[0]):(i[1]-s[1]+c*(a[1]-i[1]))/(u[1]-s[1]);if(n||nf(c,0,1)&&nf(l,0,1))return[i[0]+c*(a[0]-i[0]),i[1]+c*(a[1]-i[1])]}}function Ld(t){if(Array.isArray(t))return nf(t[0],0,1)&&nf(t[1],0,1)?t:[.5,.5];var e=t.split("-");return[e.includes("left")?0:e.includes("right")?1:.5,e.includes("top")?0:e.includes("bottom")?1:.5]}function Rd(t){var e=t.style||{},n=e.x,r=void 0===n?0:n,i=e.y,a=void 0===i?0:i,o=e.z;return[+r,+a,+(void 0===o?0:o)]}function jd(t){var e=t.style||{},n=e.x,r=e.y,i=e.z;return void 0!==n||void 0!==r||void 0!==i}function Dd(t){return function(t,e){var n=g(e,2),r=n[0],i=n[1],a=t.min,o=t.max;return[a[0]+r*(o[0]-a[0]),a[1]+i*(o[1]-a[1])]}(t,Ld(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center"))}function Id(t){var e;return[t.x,t.y,null!==(e=t.z)&&void 0!==e?e:0]}function Fd(t){var e;return{x:t[0],y:t[1],z:null!==(e=t[2])&&void 0!==e?e:0}}function zd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.map((function(t){return parseFloat(t.toFixed(e))}))}function Bd(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(pl(t,e))return t;var i=Od(r?md(t,e):md(e,t)),a=[i[0]*n,i[1]*n];return yd(Ad(t),a)}function Gd(t,e){return t[1]===e[1]}function Wd(t,e,n){return Cd([t,e],[e,n])}function Vd(t,e){return[2*e[0]-t[0],2*e[1]-t[1]]}function Hd(t,e,n){for(var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=0;a<n.length;a++){var o=n[a],s=n[(a+1)%n.length];r&&(o=yd(e,o),s=yd(e,s));var u=_d([e,i?Vd(t,e):t],[o,s]);if(u)return{point:u,line:[o,s]}}return{point:e,line:void 0}}function Yd(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.center,i=md(n?Vd(t,r):t,e.center),a=Math.atan2(i[1],i[0]);if(isNaN(a))return r;var o=of(e)/2,s=sf(e)/2;return[r[0]+o*Math.cos(a),r[1]+s*Math.sin(a)]}function Ud(t,e){var n=g(e[0],2),r=n[0],i=n[1],a=g(e[1],2),o=a[0],s=a[1],u=g(t,2),c=u[0],l=u[1],f=o-r,d=s-i;if(0===f&&0===d)return[r,i];var h=((c-r)*f+(l-i)*d)/(f*f+d*d);return h>1?h=1:h<0&&(h=0),[r+h*f,i+h*d]}function qd(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function(t){var e=t.reduce((function(t,e){return yd(t,e)}),[0,0]);return xd(e,t.length)}(t);return t.sort((function(t,r){var i=g(t,2),a=i[0],o=i[1],s=g(r,2),u=s[0],c=s[1],l=Math.atan2(o-n[1],a-n[0]),f=Math.atan2(c-n[1],u-n[0]);return e?f-l:l-f}))}function Xd(t,e){return[t,[t[0],e[1]],e,[e[0],t[1]]]}var Kd=function(){function t(e,n,r){if(k(this,t),this.phase=n,this.pointerByTouch=[],this.initialDistance=null,this.emitter=e,t.instance)return t.callbacks[this.phase].push(r),t.instance;this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.bindEvents(),t.instance=this,t.callbacks[this.phase].push(r)}return O(t,[{key:"bindEvents",value:function(){var t=this.emitter;t.on(bl.POINTER_DOWN,this.onPointerDown),t.on(bl.POINTER_MOVE,this.onPointerMove),t.on(bl.POINTER_UP,this.onPointerUp)}},{key:"updatePointerPosition",value:function(t,e,n){var r=this.pointerByTouch.findIndex((function(e){return e.pointerId===t}));r>=0&&(this.pointerByTouch[r]={x:e,y:n,pointerId:t})}},{key:"onPointerDown",value:function(e){var n=e.client||{},r=n.x,i=n.y;if(void 0!==r&&void 0!==i&&(this.pointerByTouch.push({x:r,y:i,pointerId:e.pointerId}),"touch"===e.pointerType&&2===this.pointerByTouch.length)){t.isPinching=!0;var a=this.pointerByTouch[0].x-this.pointerByTouch[1].x,o=this.pointerByTouch[0].y-this.pointerByTouch[1].y;this.initialDistance=Math.sqrt(a*a+o*o),t.callbacks.pinchstart.forEach((function(t){return t(e,{scale:0})}))}}},{key:"onPointerMove",value:function(e){if(2===this.pointerByTouch.length&&null!==this.initialDistance){var n=e.client||{},r=n.x,i=n.y;if(void 0!==r&&void 0!==i){this.updatePointerPosition(e.pointerId,r,i);var a=this.pointerByTouch[0].x-this.pointerByTouch[1].x,o=this.pointerByTouch[0].y-this.pointerByTouch[1].y,s=Math.sqrt(a*a+o*o)/this.initialDistance;t.callbacks.pinchmove.forEach((function(t){return t(e,{scale:5*(s-1)})}))}}}},{key:"onPointerUp",value:function(e){var n;t.callbacks.pinchend.forEach((function(t){return t(e,{scale:0})})),t.isPinching=!1,this.initialDistance=null,this.pointerByTouch=[],null===(n=t.instance)||void 0===n||n.tryDestroy()}},{key:"destroy",value:function(){this.emitter.off(bl.POINTER_DOWN,this.onPointerDown),this.emitter.off(bl.POINTER_MOVE,this.onPointerMove),this.emitter.off(bl.POINTER_UP,this.onPointerUp),t.instance=null}},{key:"off",value:function(e,n){var r=t.callbacks[e].indexOf(n);r>-1&&t.callbacks[e].splice(r,1),this.tryDestroy()}},{key:"tryDestroy",value:function(){Object.values(t.callbacks).every((function(t){return 0===t.length}))&&this.destroy()}}])}();Kd.isPinching=!1,Kd.instance=null,Kd.callbacks={pinchstart:[],pinchmove:[],pinchend:[]};var $d=function(t){return t.map((function(t){return Te(t)?t.toLocaleLowerCase():t}))},Zd=function(){return O((function t(e){var n=this;k(this,t),this.map=new Map,this.boundHandlePinch=function(){},this.recordKey=new Set,this.onKeyDown=function(t){(null==t?void 0:t.key)&&(n.recordKey.add(t.key),n.trigger(t))},this.onKeyUp=function(t){(null==t?void 0:t.key)&&n.recordKey.delete(t.key)},this.onWheel=function(t){n.triggerExtendKey(bl.WHEEL,t)},this.onDrag=function(t){n.triggerExtendKey(bl.DRAG,t)},this.handlePinch=function(t,e){n.triggerExtendKey(bl.PINCH,Object.assign(Object.assign({},t),e))},this.onFocus=function(){n.recordKey.clear()},this.emitter=e,this.bindEvents()}),[{key:"bind",value:function(t,e){0!==t.length&&(t.includes(bl.PINCH)&&!this.pinchHandler&&(this.boundHandlePinch=this.handlePinch.bind(this),this.pinchHandler=new Kd(this.emitter,"pinchmove",this.boundHandlePinch)),this.map.set(t,e))}},{key:"unbind",value:function(t,e){var n=this;this.map.forEach((function(r,i){pl(i,t)&&(e&&e!==r||n.map.delete(i))}))}},{key:"unbindAll",value:function(){this.map.clear()}},{key:"match",value:function(t){var e=$d(Array.from(this.recordKey)).sort(),n=$d(t).sort();return pl(e,n)}},{key:"bindEvents",value:function(){var t,e=this.emitter;e.on(bl.KEY_DOWN,this.onKeyDown),e.on(bl.KEY_UP,this.onKeyUp),e.on(bl.WHEEL,this.onWheel),e.on(bl.DRAG,this.onDrag),null===(t=globalThis.addEventListener)||void 0===t||t.call(globalThis,"focus",this.onFocus)}},{key:"trigger",value:function(t){var e=this;this.map.forEach((function(n,r){e.match(r)&&n(t)}))}},{key:"triggerExtendKey",value:function(t,e){var n=this;this.map.forEach((function(r,i){i.includes(t)&&pl(Array.from(n.recordKey),i.filter((function(e){return e!==t})))&&r(e)}))}},{key:"destroy",value:function(){var t,e;this.unbindAll(),this.emitter.off(bl.KEY_DOWN,this.onKeyDown),this.emitter.off(bl.KEY_UP,this.onKeyUp),this.emitter.off(bl.WHEEL,this.onWheel),this.emitter.off(bl.DRAG,this.onDrag),null===(t=this.pinchHandler)||void 0===t||t.off("pinchmove",this.boundHandlePinch),null===(e=globalThis.removeEventListener)||void 0===e||e.call(globalThis,"blur",this.onFocus)}}])}(),Qd=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,vd({},e.defaultOptions,n)])).shortcut=new Zd(t.graph),r.onPointerDown=r.onPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.onPointerUp=r.onPointerUp.bind(r),r.clearStates=r.clearStates.bind(r),r.bindEvents(),r}return _(e,t),O(e,[{key:"onPointerDown",value:function(t){if(this.validate(t)&&this.isKeydown()&&!this.startPoint){var e=this.context,n=e.canvas,r=e.graph,i=Object.assign({},this.options.style);this.options.style.lineWidth&&(i.lineWidth=+this.options.style.lineWidth/r.getZoom()),this.rectShape=new Qu({id:"g6-brush-select",style:i}),n.appendChild(this.rectShape),this.startPoint=[t.canvas.x,t.canvas.y]}}},{key:"onPointerMove",value:function(t){var e;if(this.startPoint){var n=this.options,r=n.immediately,i=n.mode;this.endPoint=Jd(t),null===(e=this.rectShape)||void 0===e||e.attr({x:Math.min(this.endPoint[0],this.startPoint[0]),y:Math.min(this.endPoint[1],this.startPoint[1]),width:Math.abs(this.endPoint[0]-this.startPoint[0]),height:Math.abs(this.endPoint[1]-this.startPoint[1])}),r&&"default"===i&&this.updateElementsStates(Xd(this.startPoint,this.endPoint))}}},{key:"onPointerUp",value:function(t){this.startPoint&&(this.endPoint?(this.endPoint=Jd(t),this.updateElementsStates(Xd(this.startPoint,this.endPoint)),this.clearBrush()):this.clearBrush())}},{key:"clearStates",value:function(){this.endPoint||this.clearElementsStates()}},{key:"clearElementsStates",value:function(){var t=this,e=this.context.graph,n=Object.values(e.getData()).reduce((function(e,n){return Object.assign({},e,n.reduce((function(e,n){var r,i=null===(r=n.states||[])||void 0===r?void 0:r.filter((function(e){return e!==t.options.state}));return e[Kf(n)]=i,e}),{}))}),{});e.setElementState(n,this.options.animation)}},{key:"updateElementsStates",value:function(t){var e=this.context.graph,n=this.options,r=n.enableElements,i=n.state,a=n.mode,o=n.onSelect,s=this.selector(e,t,r),u={};switch(a){case"union":s.forEach((function(t){u[t]=[].concat(M(e.getElementState(t)),[i])}));break;case"diff":s.forEach((function(t){var n=e.getElementState(t);u[t]=n.includes(i)?n.filter((function(t){return t!==i})):[].concat(M(n),[i])}));break;case"intersect":s.forEach((function(t){var n=e.getElementState(t);u[t]=n.includes(i)?[i]:[]}));break;default:s.forEach((function(t){u[t]=[i]}))}_n(o)&&(u=o(u)),e.setElementState(u,this.options.animation)}},{key:"selector",value:function(t,e,n){if(!n||0===n.length)return[];var r=[],i=t.getData();if(n.forEach((function(n){i["".concat(n,"s")].forEach((function(n){var i=Kf(n);"hidden"!==t.getElementVisibility(i)&&function(t,e,n,r){var i=t[0],a=t[1],o=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var s=r-n,u=0,c=s-1;u<s;c=u++){var l=e[u+n][0],f=e[u+n][1],d=e[c+n][0],h=e[c+n][1];f>a!=h>a&&i<(d-l)*(a-f)/(h-f)+l&&(o=!o)}return o}(t.getElementPosition(i),e)&&r.push(i)}))})),n.includes("edge")){var a=i.edges;null==a||a.forEach((function(t){var e=t.source,n=t.target;r.includes(e)&&r.includes(n)&&r.push(Kf(t))}))}return r}},{key:"clearBrush",value:function(){var t;null===(t=this.rectShape)||void 0===t||t.remove(),this.rectShape=void 0,this.startPoint=void 0,this.endPoint=void 0}},{key:"isKeydown",value:function(){var t=this.options.trigger,e=Array.isArray(t)?t:[t];return this.shortcut.match(e.filter((function(t){return"drag"!==t})))}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return _n(e)?e(t):!!e}},{key:"bindEvents",value:function(){var t=this.context.graph;t.on(bl.POINTER_DOWN,this.onPointerDown),t.on(bl.POINTER_MOVE,this.onPointerMove),t.on(bl.POINTER_UP,this.onPointerUp),t.on(yl.CLICK,this.clearStates)}},{key:"unbindEvents",value:function(){var t=this.context.graph;t.off(bl.POINTER_DOWN,this.onPointerDown),t.off(bl.POINTER_MOVE,this.onPointerMove),t.off(bl.POINTER_UP,this.onPointerUp),t.off(yl.CLICK,this.clearStates)}},{key:"update",value:function(t){this.unbindEvents(),this.options=vd(this.options,t),this.bindEvents()}},{key:"destroy",value:function(){this.unbindEvents(),Dn(e,"destroy",this,3)([])}}])}(ld);Qd.defaultOptions={animation:!1,enable:!0,enableElements:["node","combo","edge"],immediately:!1,mode:"default",state:"selected",trigger:["shift"],style:{width:0,height:0,lineWidth:1,fill:"#1677FF",stroke:"#1677FF",fillOpacity:.1,zIndex:2,pointerEvents:"none"}};var Jd=function(t){return[t.canvas.x,t.canvas.y]},th=.8,eh=["node","edge","combo"];function nh(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;"TB"===r&&e(t,i);var a=n(t);if(a){var o,s=nr(a);try{for(s.s();!(o=s.n()).done;)nh(o.value,e,n,r,i+1)}catch(t){s.e(t)}finally{s.f()}}"BT"===r&&e(t,i)}function rh(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"both";if("combo"===e||"node"===e)return ih(t,n,r,i);var a=t.getEdgeData(n);if(!a)return[];var o=ih(t,a.source,r-1,i),s=ih(t,a.target,r-1,i);return Array.from(new Set([].concat(M(o),M(s),[n])))}function ih(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"both",i=new Set,a=new Set,o=new Set;return function(t,e,n){for(var r=[[t,0]];r.length;){var i=g(r.shift(),2),a=i[0],o=i[1];e(a,o);var s=n(a);if(s){var u,c=nr(s);try{for(c.s();!(u=c.n()).done;){var l=u.value;r.push([l,o+1])}}catch(t){c.e(t)}finally{c.f()}}}}(e,(function(e,i){i>n||(o.add(e),t.getRelatedEdgesData(e,r).forEach((function(t){var e=Kf(t);!a.has(e)&&i<n&&(o.add(e),a.add(e))})))}),(function(e){return t.getRelatedEdgesData(e,r).map((function(t){return t.source===e?t.target:t.source})).filter((function(t){return!i.has(t)&&(i.add(t),!0)}))})),Array.from(o)}function ah(t){return t.states||[]}var oh=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},sh=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).onClickSelect=function(t){return oh(r,void 0,void 0,Jn().mark((function e(){var n,r;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validate(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.updateState(t);case 4:null===(r=(n=this.options).onClick)||void 0===r||r.call(n,t);case 5:case"end":return e.stop()}}),e,this)})))},r.onClickCanvas=function(t){return oh(r,void 0,void 0,Jn().mark((function e(){var n,r;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validate(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.clearState();case 4:null===(r=(n=this.options).onClick)||void 0===r||r.call(n,t);case 5:case"end":return e.stop()}}),e,this)})))},r.shortcut=new Zd(t.graph),r.bindEvents(),r}return _(e,t),O(e,[{key:"bindEvents",value:function(){var t=this,e=this.context.graph;this.unbindEvents(),eh.forEach((function(n){e.on("".concat(n,":").concat(bl.CLICK),t.onClickSelect)})),e.on(yl.CLICK,this.onClickCanvas)}},{key:"isMultipleSelect",get:function(){var t=this.options,e=t.multiple,n=t.trigger;return e&&this.shortcut.match(n)}},{key:"getNeighborIds",value:function(t){var e=t.target,n=t.targetType,r=this.context.graph,i=this.options.degree;return rh(r,n,e.id,"function"==typeof i?i(t):i).filter((function(t){return t!==e.id}))}},{key:"updateState",value:function(t){return oh(this,void 0,void 0,Jn().mark((function e(){var n,r,i,a,o,s,u,c,l,f,d,h,p,v,g,y;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.options,r=n.state,i=n.unselectedState,a=n.neighborState,o=n.animation,r||a||i){e.next=3;break}return e.abrupt("return");case 3:return s=t.target,u=this.context.graph,c=u.getElementData(s.id),l=ah(c).includes(r)?"unselect":"select",f={},d=this.isMultipleSelect,h=[s.id],p=this.getNeighborIds(t),d?(Object.assign(f,this.getDataStates()),"select"===l?(g=function(t,e){t.forEach((function(t){var n=new Set(u.getElementState(t));n.add(e),n.delete(i),f[t]=Array.from(n)}))},g(h,r),g(p,a),i&&Object.keys(f).forEach((function(t){var e=f[t];e.includes(r)||e.includes(a)||e.includes(i)||f[t].push(i)}))):(y=f[s.id],f[s.id]=y.filter((function(t){return t!==r&&t!==a})),y.includes(i)||f[s.id].push(i),p.forEach((function(t){f[t]=f[t].filter((function(t){return t!==a})),f[t].includes(r)||f[t].push(i)})))):"select"===l?(Object.assign(f,this.getClearStates(!!i)),v=function(t,e){t.forEach((function(t){f[t]||(f[t]=u.getElementState(t)),f[t].push(e)}))},v(h,r),v(p,a),i&&Object.keys(f).forEach((function(t){h.includes(t)||p.includes(t)||f[t].push(i)}))):Object.assign(f,this.getClearStates()),e.next=14,u.setElementState(f,o);case 14:case"end":return e.stop()}}),e,this)})))}},{key:"getDataStates",value:function(){var t=this.context.graph.getData(),e=t.nodes,n=t.edges,r=t.combos,i={};return[].concat(M(e),M(n),M(r)).forEach((function(t){i[Kf(t)]=ah(t)})),i}},{key:"getClearStates",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.context.graph,n=this.options,r=n.state,i=n.unselectedState,a=n.neighborState,o=new Set([r,i,a]),s=e.getData(),u=s.nodes,c=s.edges,l=s.combos,f={};return[].concat(M(u),M(c),M(l)).forEach((function(e){var n=ah(e),r=n.filter((function(t){return!o.has(t)}));(t||r.length!==n.length)&&(f[Kf(e)]=r)})),f}},{key:"clearState",value:function(){return oh(this,void 0,void 0,Jn().mark((function t(){var e;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.context.graph,t.next=3,e.setElementState(this.getClearStates(),this.options.animation);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return _n(e)?e(t):!!e}},{key:"unbindEvents",value:function(){var t=this,e=this.context.graph;eh.forEach((function(n){e.off("".concat(n,":").concat(bl.CLICK),t.onClickSelect)})),e.off(yl.CLICK,this.onClickCanvas)}},{key:"destroy",value:function(){this.unbindEvents(),Dn(e,"destroy",this,3)([])}}])}(ld);function uh(t){var e;return!!(null===(e=t.style)||void 0===e?void 0:e.collapsed)}sh.defaultOptions={animation:!0,enable:!0,multiple:!1,trigger:["shift"],state:"selected",neighborState:"selected",unselectedState:void 0,degree:0};const ch=function(t,e,n){for(var r=0,i=Te(e)?e.split("."):e;t&&r<i.length;)t=t[i[r++]];return void 0===t||r<i.length?n:t},lh=function(t,e,n){var r=t,i=Te(e)?e.split("."):e;return i.forEach((function(t,e){e<i.length-1?(Ln(r[t])||(r[t]=Oe(i[e+1])?[]:{}),r=r[t]):r[t]=n})),t},fh=function(t){var e=cl(t);return e.charAt(0).toLowerCase()+e.substring(1)};function dh(t,e){if(!t.startsWith(e))return!1;var n=t[e.length];return n>="A"&&n<="Z"}function hh(t,e){var n=Object.entries(t).reduce((function(t,n){var r=g(n,2),i=r[0],a=r[1];return"className"===i||"class"===i||dh(i,e)&&Object.assign(t,b({},function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return t;if(!dh(t,e))return t;var r=t.slice(e.length);return n?fh(r):r}(i,e),a)),t}),{});if("opacity"in t){var r=function(t,e){return"".concat(e).concat(ll(t))}("opacity",e),i=t.opacity;if(r in t){var a=t[r];Object.assign(n,{opacity:i*a})}else Object.assign(n,{opacity:i})}return n}function ph(t,e){var n=e.length;return Object.keys(t).reduce((function(r,i){return i.startsWith(e)&&(r[i.slice(n)]=t[i]),r}),{})}function vh(t,e){var n="string"==typeof e?[e]:e,r={};return Object.keys(t).forEach((function(e){n.find((function(t){return e.startsWith(t)}))||(r[e]=t[e])})),r}function gh(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("number"==typeof t)return[t,t,t];var e=g(t,3),n=e[0],r=e[1],i=void 0===r?n:r,a=e[2];return[n,i,void 0===a?n:a]}function yh(t,e){var n=e.datum,r=e.graph;return"function"==typeof t?t.call(r,n):Object.fromEntries(Object.entries(t).map((function(t){var e=g(t,2),i=e[0],a=e[1];return"function"==typeof a?[i,a.call(r,n)]:[i,a]})))}function mh(t,e){var n=(null==t?void 0:t.style)||{},r=(null==e?void 0:e.style)||{};for(var i in n)i in r||(r[i]=n[i]);return Object.assign({},t,e,{style:r})}function bh(t){if(t)return"string"==typeof t||"function"==typeof t||Array.isArray(t)?{type:"group",field:function(t){return t.id},color:t,invert:!1}:t}function xh(t){var e="string"==typeof t?Cl("palette",t):t;if("function"!=typeof e)return e}function wh(t,e){var n=2*t;return"string"==typeof e?n=t*Number(e.replace("%",""))/100:"number"==typeof e&&(n=e),isNaN(n)&&(n=2*t),n}function kh(t,e){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3]&&arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return wh((t.max[0]-t.min[0])*n,e)}var Eh={}.toString;var Oh=Object.prototype;var Sh=Object.prototype.hasOwnProperty;const Mh=function(t){if(Me(t))return!0;if(dl(t))return!t.length;var e=function(t){return Eh.call(t).replace(/^\[object /,"").replace(/]$/,"")}(t);if("Map"===e||"Set"===e)return!t.size;if(function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Oh)}(t))return!Object.keys(t).length;for(var n in t)if(Sh.call(t,n))return!1;return!0};var Th=function(t){function e(t){var n;return k(this,e),Ph(t.style),(n=N(this,e,[t])).shapeMap={},n.animateMap={},n.render(n.attributes,n),n.setVisibility(),n.bindEvents(),n}return _(e,t),O(e,[{key:"parsedAttributes",get:function(){return this.attributes}},{key:"upsert",value:function(t,e,n,r,i){var a,o,s,u,c,l,f,d,h=this.shapeMap[t];if(!1!==n){var p="string"==typeof e?Cl(Tl.SHAPE,e):e;if(!p)throw new Error(jl("Shape ".concat(e," not found")));if(!h||h.destroyed||!(h instanceof p)){h&&(null===(s=null==i?void 0:i.beforeDestroy)||void 0===s||s.call(i,h),null==h||h.destroy(),null===(u=null==i?void 0:i.afterDestroy)||void 0===u||u.call(i,h)),null===(c=null==i?void 0:i.beforeCreate)||void 0===c||c.call(i);var v=new p({className:t,style:n});return r.appendChild(v),this.shapeMap[t]=v,null===(l=null==i?void 0:i.afterCreate)||void 0===l||l.call(i,v),v}return null===(f=null==i?void 0:i.beforeUpdate)||void 0===f||f.call(i,h),Rg(h,n),null===(d=null==i?void 0:i.afterUpdate)||void 0===d||d.call(i,h),h}h&&(null===(a=null==i?void 0:i.beforeDestroy)||void 0===a||a.call(i,h),r.removeChild(h),delete this.shapeMap[t],null===(o=null==i?void 0:i.afterDestroy)||void 0===o||o.call(i,h))}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},this.attributes,t);Ph(e),function(t,e){var n=e.zIndex,r=e.transform,i=e.transformOrigin,a=e.visibility,o=e.cursor,s=e.clipPath,u=e.component,c=bg(e,["zIndex","transform","transformOrigin","visibility","cursor","clipPath","component"]);Object.assign(t.attributes,c),r&&t.setAttribute("transform",r),Oe(n)&&t.setAttribute("zIndex",n),i&&t.setAttribute("transformOrigin",i),a&&t.setAttribute("visibility",a),o&&t.setAttribute("cursor",o),s&&t.setAttribute("clipPath",s),u&&t.setAttribute("component",u)}(this,e),this.render(e,this),this.setVisibility()}},{key:"bindEvents",value:function(){}},{key:"getGraphicStyle",value:function(t){return function(t){return t.x,t.y,t.z,t.class,t.className,t.transform,t.transformOrigin,t.zIndex,t.visibility,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["x","y","z","class","className","transform","transformOrigin","zIndex","visibility"])}(t)}},{key:"compositeShapes",get:function(){return[["badges","badge-"],["ports","port-"]]}},{key:"animate",value:function(t,n){var r=this;if(0===t.length)return null;var i=[];if(void 0!==t[0].x||void 0!==t[0].y||void 0!==t[0].z){var a=this.attributes,o=a.x,s=void 0===o?0:o,u=a.y,c=void 0===u?0:u,l=a.z,f=void 0===l?0:l;t.forEach((function(t){var e=t.x,n=void 0===e?s:e,r=t.y,i=void 0===r?c:r,a=t.z,o=void 0===a?f:a;Object.assign(t,{transform:o?[["translate3d",n,i,o]]:[["translate",n,i]]})}))}var d=Dn(e,"animate",this,3)([t,n]);if(d&&(Ah(this,d),i.push(d)),Array.isArray(t)&&t.length>0){var h=["transform","transformOrigin","x","y","z","zIndex"];Object.keys(t[0]).some((function(t){return!h.includes(t)}))&&(Object.entries(this.shapeMap).forEach((function(e){var a=g(e,2),o=a[0],s=a[1],u="get".concat(ll(o),"Style"),c=r[u];if(_n(c)){var l=t.map((function(t){return c.call(r,Object.assign(Object.assign({},r.attributes),t))})),f=s.animate(zl(l),n);f&&(Ah(s,f),i.push(f))}})),this.compositeShapes.forEach((function(e){var a=g(e,2),o=a[0],s=a[1];!function(e,a){if(!Mh(e)){var o="get".concat(ll(a),"Style"),s=r[o];if(_n(s)){var u=t.map((function(t){return s.call(r,Object.assign(Object.assign({},r.attributes),t))}));Object.entries(u[0]).map((function(t){var r=g(t,1)[0],a=u.map((function(t){return t[r]})),o=e[r];if(o){var s=o.animate(zl(a),n);s&&(Ah(o,s),i.push(s))}}))}}}(ph(r.shapeMap,s),o)})))}return Fl(i)}},{key:"getShape",value:function(t){return this.shapeMap[t]}},{key:"setVisibility",value:function(){sd(this,this.attributes.visibility)}},{key:"destroy",value:function(){this.shapeMap={},this.animateMap={},Dn(e,"destroy",this,3)([])}}])}(Fu);function Ah(t,e){null==e||e.finished.then((function(){var n=t.activeAnimations.findIndex((function(t){return t===e}));n>-1&&t.activeAnimations.splice(n,1)}))}function Ph(t){if(!t)return{};if("x"in t||"y"in t||"z"in t){var e=t.x,n=void 0===e?0:e,r=t.y,i=Wl(n,void 0===r?0:r,t.z,t.transform);i&&(t.transform=i)}return t}var Nh=function(t){function e(t){return k(this,e),N(this,e,[mh({style:e.defaultStyleProps},t)])}return _(e,t),O(e,[{key:"isTextStyle",value:function(t){return dh(t,"label")}},{key:"isBackgroundStyle",value:function(t){return dh(t,"background")}},{key:"getTextStyle",value:function(t){var e=this.getGraphicStyle(t);return e.padding,vh(function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["padding"]),"background")}},{key:"getBackgroundStyle",value:function(t){if(!1===t.background)return!1;var e=this.getGraphicStyle(t),n=e.wordWrap,r=e.wordWrapWidth,i=e.padding,a=hh(e,"background"),o=this.shapeMap.text.getGeometryBounds(),s=g(o.min,2),u=s[0],c=s[1],l=g(o.center,2),f=l[0],d=l[1],h=g(o.halfExtents,2),p=h[0],v=h[1],y=g(rf(i),4),m=y[0],b=y[1],x=y[2],w=y[3],k=2*p+w+b,E=a.width,O=a.height;E&&O?Object.assign(a,{x:f-Number(E)/2,y:d-Number(O)/2}):Object.assign(a,{x:u-w,y:c-m,width:n?Math.min(k,r+w+b):k,height:2*v+m+x});var S=a.radius;if("string"==typeof S&&S.endsWith("%")){var M=Number(S.replace("%",""))/100;a.radius=Math.min(+a.width,+a.height)*M}return a}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.upsert("text",tc,this.getTextStyle(t),e),this.upsert("background",Qu,this.getBackgroundStyle(t),e)}},{key:"getGeometryBounds",value:function(){return(this.getShape("background")||this.getShape("text")).getGeometryBounds()}}])}(Th);Nh.defaultStyleProps={padding:0,fontSize:12,fontFamily:"system-ui, sans-serif",wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:"...",textBaseline:"middle",backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};var Ch=function(t){function e(t){return k(this,e),N(this,e,[mh({style:e.defaultStyleProps},t)])}return _(e,t),O(e,[{key:"getBadgeStyle",value:function(t){return this.getGraphicStyle(t)}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.upsert("label",Nh,this.getBadgeStyle(t),e)}},{key:"getGeometryBounds",value:function(){var t=this.getShape("label");return(t.getShape("background")||t.getShape("text")).getGeometryBounds()}}])}(Th);function _h(t){return d(t)||S(t)||p(t)||v()}Ch.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:"50%",backgroundOpacity:1};var Lh={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};var Rh=function(t){if(t.length<2)return[["M",0,0],["L",0,0]];var e=t[0],n=t[1],r=t[t.length-1],i=t[t.length-2];t.unshift(i,r),t.push(e,n);for(var a=[["M",r[0],r[1]]],o=1;o<t.length-2;o+=1){var s=g(t[o-1],2),u=s[0],c=s[1],l=g(t[o],2),f=l[0],d=l[1],h=g(t[o+1],2),p=h[0],v=h[1],y=g(o!==t.length-2?t[o+2]:[p,v],2),m=f+(p-u)/6,b=d+(v-c)/6,x=p-(y[0]-f)/6,w=v-(y[1]-d)/6;a.push(["C",m,b,x,w,p,v])}return a},jh=function(t){function e(t){return k(this,e),N(this,e,[mh({style:e.defaultStyleProps},t)])}return _(e,t),O(e,[{key:"getLabelStyle",value:function(t){if(!t.label||!t.d||0===t.d.length)return!1;var e=hh(this.getGraphicStyle(t),"label"),n=e.maxWidth,r=e.offsetX,i=e.offsetY,a=e.autoRotate,o=e.placement,s=e.closeToPath,u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["maxWidth","offsetX","offsetY","autoRotate","placement","closeToPath"]),c=this.shapeMap.key,l=null==c?void 0:c.getRenderBounds();return Object.assign(function(t,e,n,r,i,a,o){var s=g(Dd(t,e),2),u=s[0],c=s[1],l={textAlign:"left"===e?"right":"right"===e?"left":"center",textBaseline:"top"===e?"bottom":"bottom"===e?"top":"middle",transform:[["translate",u+n,c+r]]};if("center"===e||!i)return l;var f=function(t){var e=[],n="string"==typeof t?function(t){for(var e=t.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").trim().split(/\s*,|\s+/),n=[],r="",i={},a=function(){var t=e.shift();t in Lh?r=t:e.unshift(t),i={type:r},Lh[r].forEach((function(n){t=e.shift(),i[n]=t})),"M"===r?r="L":"m"===r&&(r="l");var a=_h(Object.values(i)),o=a[0],s=a.slice(1);n.push([o].concat(M(s.map(Number))))};e.length>0;)a();return n}(t):t;return n.forEach((function(t){var n=t[0];if("Z"!==n)if("A"!==n)for(var r=1;r<t.length;r+=2)e.push([t[r],t[r+1],0]);else{var i=t.length;e.push([t[i-2],t[i-1],0])}else e.push(e[0])})),e}(a);if(!f||f.length<=3)return l;var d=f.map((function(t,e){var n=t,r=f[(e+1)%f.length];return pl(n,r)?null:[n,r]})).filter(Boolean),h=function(t,e){var n=1/0,r=[[0,0],[0,0]];return e.forEach((function(e){var i=function(t,e){return kd(t,Ud(t,e))}(t,e);i<n&&(n=i,r=e)})),r}([u,c],d),p=Ud([u,c],h);if(p&&h&&(l.transform=[["translate",p[0]+n,p[1]+r]],o)){var v=Math.atan((h[0][1]-h[1][1])/(h[0][0]-h[1][0]));l.transform.push(["rotate",v/Math.PI*180]),l.textAlign="center","right"!==e&&"left"!==e||(l.textBaseline=v>0?"right"===e?"bottom":"top":"right"===e?"top":"bottom")}return l}(l,o,r,i,s,t.d,a),{wordWrapWidth:kh(l,n)},u)}},{key:"getKeyStyle",value:function(t){return this.getGraphicStyle(t)}},{key:"render",value:function(t,e){this.upsert("key",qu,this.getKeyStyle(t),e),this.upsert("label",Nh,this.getLabelStyle(t),e)}}])}(Th);jh.defaultStyleProps={label:!0,labelPlacement:"bottom",labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};var Dh=function(t){function e(t){var n;return k(this,e),(n=N(this,e,[t])).onMounted=function(){n.handleRadius()},n.onAttrModified=function(){n.handleRadius()},Fh=n,n.isMutationObserved=!0,n.addEventListener(Ys.MOUNTED,n.onMounted),n.addEventListener(Ys.ATTR_MODIFIED,n.onAttrModified),n}return _(e,t),O(e,[{key:"handleRadius",value:function(){var t=this.attributes,e=t.radius,n=t.clipPath,r=t.width,i=void 0===r?0:r,a=t.height,o=void 0===a?0:a;if(e&&i&&o){var s=g(this.getBounds().min,2),u={x:s[0],y:s[1],radius:e,width:i,height:o};if(n)Object.assign(this.parsedStyle.clipPath.style,u);else{var c=new Qu({style:u});this.style.clipPath=c}}else n&&(this.style.clipPath=null)}}])}(Vu),Ih=new WeakMap,Fh=null,zh=function(t){if(Fh&&function(t){for(var e=[],n=t.parentNode;n;)e.push(n),n=n.parentNode;return e}(Fh).includes(t)){var e=Ih.get(t);e?e.includes(Fh)||e.push(Fh):Ih.set(t,[Fh])}},Bh=function(t){var e=Ih.get(t);e&&e.forEach((function(t){return t.handleRadius()}))},Gh=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"isImage",value:function(){return!!this.attributes.src}},{key:"getIconStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.attributes,e=t.width,n=void 0===e?0:e,r=t.height,i=void 0===r?0:r,a=this.getGraphicStyle(t);return this.isImage()?Object.assign({x:-n/2,y:-i/2},a):Object.assign({textBaseline:"middle",textAlign:"center"},a)}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.attributes,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.upsert("icon",this.isImage()?Dh:tc,this.getIconStyle(t),e)}}])}(Th),Wh=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"context",get:function(){return this.config.context}},{key:"parsedAttributes",get:function(){return this.attributes}},{key:"onframe",value:function(){}},{key:"animate",value:function(t,n){var r=this,i=Dn(e,"animate",this,3)([t,n]);return i&&(i.onframe=function(){return r.onframe()},i.finished.then((function(){return r.onframe()}))),i}}])}(Th),Vh=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Hh=function(t){function e(t){var n;return k(this,e),(n=N(this,e,[mh({style:e.defaultStyleProps},t)])).type="node",n}return _(e,t),O(e,[{key:"getSize",value:function(){return gh((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.attributes).size)}},{key:"getKeyStyle",value:function(t){var e=this.getGraphicStyle(t);return Object.assign(vh(e,["label","halo","icon","badge","port"]))}},{key:"getLabelStyle",value:function(t){if(!1===t.label||!t.labelText)return!1;var e=hh(this.getGraphicStyle(t),"label"),n=e.placement,r=e.maxWidth,i=e.offsetX,a=e.offsetY,o=Vh(e,["placement","maxWidth","offsetX","offsetY"]),s=this.getShape("key").getLocalBounds();return Object.assign(Lg(s,n,i,a),{wordWrapWidth:kh(s,r)},o)}},{key:"getHaloStyle",value:function(t){if(!1===t.halo)return!1;var e=this.getKeyStyle(t),n=e.fill,r=Vh(e,["fill"]),i=hh(this.getGraphicStyle(t),"halo");return Object.assign(Object.assign(Object.assign({},r),{stroke:n}),i)}},{key:"getIconStyle",value:function(t){if(!1===t.icon||!t.iconText&&!t.iconSrc)return!1;var e=hh(this.getGraphicStyle(t),"icon");return Object.assign(function(t,e){var n=gh(t),r={};return e.text&&!e.fontSize&&(r={fontSize:.5*Math.min.apply(Math,M(n))}),!e.src||e.width&&e.height||(r={width:.5*n[0],height:.5*n[1]}),r}(t.size,e),e)}},{key:"getBadgesStyle",value:function(t){var e,n=this,r=ph(this.shapeMap,"badge-"),i={};if(Object.keys(r).forEach((function(t){i[t]=!1})),!1===t.badge||!(null===(e=t.badges)||void 0===e?void 0:e.length))return i;var a=t.badges,o=void 0===a?[]:a,s=t.badgePalette,u=t.opacity,c=void 0===u?1:u,l=Vh(t,["badges","badgePalette","opacity"]),f=xh(s),d=hh(this.getGraphicStyle(l),"badge");return o.forEach((function(t,e){i[e]=Object.assign(Object.assign({backgroundFill:f?f[e%(null==f?void 0:f.length)]:void 0,opacity:c},d),n.getBadgeStyle(t))})),i}},{key:"getBadgeStyle",value:function(t){var e=this.getShape("key"),n=t.placement,r=void 0===n?"top":n,i=t.offsetX,a=t.offsetY,o=Vh(t,["placement","offsetX","offsetY"]),s=Lg(e.getLocalBounds(),r,i,a,!0);return Object.assign(Object.assign({},s),o)}},{key:"getPortsStyle",value:function(t){var e,n=this,r=this.getPorts(),i={};if(Object.keys(r).forEach((function(t){i[t]=!1})),!1===t.port||!(null===(e=t.ports)||void 0===e?void 0:e.length))return i;var a=hh(this.getGraphicStyle(t),"port"),o=t.ports;return(void 0===o?[]:o).forEach((function(e,r){var o=e.key||r,s=Object.assign(Object.assign({},a),e);if(Tg(s))i[o]=!1;else{var u=g(n.getPortXY(t,e),2),c=u[0],l=u[1];i[o]=Object.assign({transform:[["translate",c,l]]},s)}})),i}},{key:"getPortXY",value:function(t,e){var n=e.placement,r=void 0===n?"left":n,i=this.getShape("key");return Sg(function(t,e){if(!t)return e.getLocalBounds();var n=t.canvas.getLayer(),r=e.cloneNode();sd(r,"hidden"),n.appendChild(r);var i=r.getLocalBounds();return r.destroy(),i}(this.context,i),r)}},{key:"getPorts",value:function(){return ph(this.shapeMap,"port-")}},{key:"getCenter",value:function(){return this.getShape("key").getBounds().center}},{key:"getIntersectPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Hd(t,Dd(e,"center"),[Dd(e,"left-top"),Dd(e,"right-top"),Dd(e,"right-bottom"),Dd(e,"left-bottom")],!1,n).point}(t,this.getShape("key").getBounds(),e)}},{key:"drawHaloShape",value:function(t,e){var n=this.getHaloStyle(t),r=this.getShape("key");this.upsert("halo",r.constructor,n,e)}},{key:"drawIconShape",value:function(t,e){var n=this.getIconStyle(t);this.upsert("icon",Gh,n,e),zh(this)}},{key:"drawBadgeShapes",value:function(t,e){var n=this,r=this.getBadgesStyle(t);Object.keys(r).forEach((function(t){var i=r[t];n.upsert("badge-".concat(t),Ch,i,e)}))}},{key:"drawPortShapes",value:function(t,e){var n=this,r=this.getPortsStyle(t);Object.keys(r).forEach((function(t){var i=r[t],a="port-".concat(t);n.upsert(a,Du,i,e)}))}},{key:"drawLabelShape",value:function(t,e){var n=this.getLabelStyle(t);this.upsert("label",Nh,n,e)}},{key:"_drawKeyShape",value:function(t,e){return this.drawKeyShape(t,e)}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this._drawKeyShape(t,e),this.getShape("key")&&(this.drawHaloShape(t,e),this.drawIconShape(t,e),this.drawBadgeShapes(t,e),this.drawLabelShape(t,e),this.drawPortShapes(t,e))}},{key:"update",value:function(t){Dn(e,"update",this,3)([t]),t&&("x"in t||"y"in t||"z"in t)&&Bh(this)}},{key:"onframe",value:function(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this)}}])}(Wh);Hh.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:"none",haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:"200%",labelPlacement:"bottom",labelWordWrap:!1,labelZIndex:0};var Yh=function(t){function e(t){return k(this,e),N(this,e,[mh({style:e.defaultStyleProps},t)])}return _(e,t),O(e,[{key:"drawKeyShape",value:function(t,e){return this.upsert("key",Du,this.getKeyStyle(t),e)}},{key:"getKeyStyle",value:function(t){var n=Dn(e,"getKeyStyle",this,3)([t]);return Object.assign(Object.assign({},n),{r:Math.min.apply(Math,M(this.getSize(t)))/2})}},{key:"getIconStyle",value:function(t){var n=Dn(e,"getIconStyle",this,3)([t]),r=2*this.getShape("key").attributes.r*th;return!!n&&Object.assign({width:r,height:r},n)}},{key:"getIntersectPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Yd(t,this.getShape("key").getBounds(),e)}}])}(Hh);Yh.defaultStyleProps={size:32};var Uh=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"parsedAttributes",get:function(){return this.attributes}},{key:"drawKeyShape",value:function(t,e){return this.upsert("key",Ku,this.getKeyStyle(t),e)}},{key:"getKeyStyle",value:function(t){var n=Dn(e,"getKeyStyle",this,3)([t]);return Object.assign(Object.assign({},n),{points:this.getPoints(t)})}},{key:"getIntersectPoint",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getShape("key").attributes.points;return Hd(t,[+((null===(e=this.attributes)||void 0===e?void 0:e.x)||0),+((null===(n=this.attributes)||void 0===n?void 0:n.y)||0)],i,!0,r).point}}])}(Hh),qh=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"getPoints",value:function(t){var e=g(this.getSize(t),2);return function(t,e){return[[0,-e/2],[t/2,0],[0,e/2],[-t/2,0]]}(e[0],e[1])}}])}(Uh),Xh=function(t){function e(t){return k(this,e),N(this,e,[mh({style:e.defaultStyleProps},t)])}return _(e,t),O(e,[{key:"parseOuterR",value:function(){var t=this.parsedAttributes.size;return Math.min.apply(Math,M(gh(t)))/2}},{key:"parseInnerR",value:function(){var t=this.parsedAttributes.innerR;return Te(t)?parseInt(t)/100*this.parseOuterR():t}},{key:"drawDonutShape",value:function(t,e){var n=this,r=t.donuts;if(null==r?void 0:r.length){var i=r.map((function(t){return Oe(t)?{value:t}:t})),a=hh(this.getGraphicStyle(t),"donut"),o=xh(t.donutPalette);if(o){var s=i.reduce((function(t,e){var n;return t+(null!==(n=e.value)&&void 0!==n?n:0)}),0),u=this.parseOuterR(),c=this.parseInnerR(),l=0;i.forEach((function(t,r){var f=t.value,d=void 0===f?0:f,h=t.color,p=void 0===h?o[r%o.length]:h,v=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["value","color"]),g=360*(0===s?1/i.length:d/s);n.upsert("round".concat(r),qu,Object.assign(Object.assign(Object.assign({},a),{d:$h(u,c,l,l+g),fill:p}),v),e),l+=g}))}}}},{key:"render",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;Dn(e,"render",this,3)([t,n]),this.drawDonutShape(t,n)}}])}(Yh);Xh.defaultStyleProps={innerR:"50%",donuts:[],donutPalette:"tableau"};var Kh=function(t,e,n,r){return[t+Math.sin(r)*n,e-Math.cos(r)*n]},$h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return Math.abs(n-r)%360<1e-6?function(t,e,n,r){return r<=0||n<=r?[["M",0-n,0],["A",n,n,0,1,1,0+n,0],["A",n,n,0,1,1,0-n,0],["Z"]]:[["M",0-n,0],["A",n,n,0,1,1,0+n,0],["A",n,n,0,1,1,0-n,0],["Z"],["M",0+r,0],["A",r,r,0,1,0,0-r,0],["A",r,r,0,1,0,0+r,0],["Z"]]}(0,0,t,e):function(t,e,n,r,i,a){var o=i/360*2*Math.PI,s=a/360*2*Math.PI,u=[Kh(0,0,r,o),Kh(0,0,n,o),Kh(0,0,n,s),Kh(0,0,r,s)],c=s-o>Math.PI?1:0;return[["M",u[0][0],u[0][1]],["L",u[1][0],u[1][1]],["A",n,n,0,c,1,u[2][0],u[2][1]],["L",u[3][0],u[3][1]],["A",r,r,0,c,0,u[0][0],u[0][1]],["Z"]]}(0,0,t,e,n,r)},Zh=function(t){function e(t){return k(this,e),N(this,e,[mh({style:e.defaultStyleProps},t)])}return _(e,t),O(e,[{key:"drawKeyShape",value:function(t,e){return this.upsert("key",zu,this.getKeyStyle(t),e)}},{key:"getKeyStyle",value:function(t){var n=Dn(e,"getKeyStyle",this,3)([t]),r=g(this.getSize(t),2),i=r[0],a=r[1];return Object.assign(Object.assign({},n),{rx:i/2,ry:a/2})}},{key:"getIconStyle",value:function(t){var n=Dn(e,"getIconStyle",this,3)([t]),r=this.getShape("key").attributes,i=r.rx,a=r.ry,o=2*Math.min(+i,+a)*th;return!!n&&Object.assign({width:o,height:o},n)}},{key:"getIntersectPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Yd(t,this.getShape("key").getBounds(),e)}}])}(Hh);Zh.defaultStyleProps={size:[45,35]};var Qh=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"getOuterR",value:function(t){return t.outerR||Math.min.apply(Math,M(this.getSize(t)))/2}},{key:"getPoints",value:function(t){return[[0,e=this.getOuterR(t)],[e*Math.sqrt(3)/2,e/2],[e*Math.sqrt(3)/2,-e/2],[0,-e],[-e*Math.sqrt(3)/2,-e/2],[-e*Math.sqrt(3)/2,e/2]];var e}},{key:"getIconStyle",value:function(t){var n=Dn(e,"getIconStyle",this,3)([t]),r=this.getOuterR(t)*th;return!!n&&Object.assign({width:r,height:r},n)}}])}(Uh);function Jh(t,e){var n=e.cx,r=void 0===n?0:n,i=e.cy,a=void 0===i?0:i,o=e.r;t.arc(r,a,o,0,2*Math.PI,!1)}function tp(t,e){var n=e.cx,r=void 0===n?0:n,i=e.cy,a=void 0===i?0:i,o=e.rx,s=e.ry;if(t.ellipse)t.ellipse(r,a,o,s,0,0,2*Math.PI,!1);else{var u=o>s?o:s,c=o>s?1:o/s,l=o>s?s/o:1;t.save(),t.scale(c,l),t.arc(r,a,u,0,2*Math.PI)}}function ep(t,e){var n,r,i=e.x1,a=e.y1,o=e.x2,s=e.y2,u=e.markerStart,c=e.markerEnd,l=e.markerStartOffset,f=e.markerEndOffset,d=0,h=0,p=0,v=0,g=0;u&&Nu(u)&&l&&(n=o-i,r=s-a,g=Math.atan2(r,n),d=Math.cos(g)*(l||0),h=Math.sin(g)*(l||0)),c&&Nu(c)&&f&&(n=i-o,r=a-s,g=Math.atan2(r,n),p=Math.cos(g)*(f||0),v=Math.sin(g)*(f||0)),t.moveTo(i+d,a+h),t.lineTo(o+p,s+v)}function np(t,e){var n,r,i=e.markerStart,a=e.markerEnd,o=e.markerStartOffset,s=e.markerEndOffset,u=e.d,c=u.absolutePath,l=u.segments,f=0,d=0,h=0,p=0,v=0;if(i&&Nu(i)&&o){var y=g(i.parentNode.getStartTangent(),2),m=y[0],b=y[1];n=m[0]-b[0],r=m[1]-b[1],v=Math.atan2(r,n),f=Math.cos(v)*(o||0),d=Math.sin(v)*(o||0)}if(a&&Nu(a)&&s){var x=g(a.parentNode.getEndTangent(),2),w=x[0],k=x[1];n=w[0]-k[0],r=w[1]-k[1],v=Math.atan2(r,n),h=Math.cos(v)*(s||0),p=Math.sin(v)*(s||0)}for(var E=0;E<c.length;E++){var O=c[E],S=O[0],M=c[E+1],T=0===E&&(0!==f||0!==d),A=(E===c.length-1||M&&("M"===M[0]||"Z"===M[0]))&&0!==h&&0!==p,P=g(T?[f,d]:[0,0],2),N=P[0],C=P[1],_=g(A?[h,p]:[0,0],2),L=_[0],R=_[1];switch(S){case"M":t.moveTo(O[1]+N,O[2]+C);break;case"L":t.lineTo(O[1]+L,O[2]+R);break;case"Q":t.quadraticCurveTo(O[1],O[2],O[3]+L,O[4]+R);break;case"C":t.bezierCurveTo(O[1],O[2],O[3],O[4],O[5]+L,O[6]+R);break;case"A":var j=l[E].arcParams,D=j.cx,I=j.cy,F=j.rx,z=j.ry,B=j.startAngle,G=j.endAngle,W=j.xRotation,V=j.sweepFlag;if(t.ellipse)t.ellipse(D,I,F,z,W,B,G,!!(1-V));else{var H=F>z?F:z,Y=F>z?1:F/z,U=F>z?z/F:1;t.translate(D,I),t.rotate(W),t.scale(Y,U),t.arc(0,0,H,B,G,!!(1-V)),t.scale(1/Y,1/U),t.rotate(-W),t.translate(-D,-I)}A&&t.lineTo(O[6]+h,O[7]+p);break;case"Z":t.closePath()}}}function rp(t,e){var n,r,i=e.markerStart,a=e.markerEnd,o=e.markerStartOffset,s=e.markerEndOffset,u=e.points.points,c=u.length,l=u[0][0],f=u[0][1],d=u[c-1][0],h=u[c-1][1],p=0,v=0,g=0,y=0,m=0;i&&Nu(i)&&o&&(n=u[1][0]-u[0][0],r=u[1][1]-u[0][1],m=Math.atan2(r,n),p=Math.cos(m)*(o||0),v=Math.sin(m)*(o||0)),a&&Nu(a)&&s&&(n=u[c-1][0]-u[0][0],r=u[c-1][1]-u[0][1],m=Math.atan2(r,n),g=Math.cos(m)*(s||0),y=Math.sin(m)*(s||0)),t.moveTo(l+(p||g),f+(v||y));for(var b=1;b<c-1;b++){var x=u[b];t.lineTo(x[0],x[1])}t.lineTo(d,h)}function ip(t,e){var n,r,i=e.markerStart,a=e.markerEnd,o=e.markerStartOffset,s=e.markerEndOffset,u=e.points.points,c=u.length,l=u[0][0],f=u[0][1],d=u[c-1][0],h=u[c-1][1],p=0,v=0,g=0,y=0,m=0;i&&Nu(i)&&o&&(n=u[1][0]-u[0][0],r=u[1][1]-u[0][1],m=Math.atan2(r,n),p=Math.cos(m)*(o||0),v=Math.sin(m)*(o||0)),a&&Nu(a)&&s&&(n=u[c-2][0]-u[c-1][0],r=u[c-2][1]-u[c-1][1],m=Math.atan2(r,n),g=Math.cos(m)*(s||0),y=Math.sin(m)*(s||0)),t.moveTo(l+p,f+v);for(var b=1;b<c-1;b++){var x=u[b];t.lineTo(x[0],x[1])}t.lineTo(d+g,h+y)}function ap(t,e){var n=e.x,r=void 0===n?0:n,i=e.y,a=void 0===i?0:i,o=e.radius,s=e.width,u=e.height,c=s,l=u,f=o&&o.some((function(t){return 0!==t}));if(f){var d=s>0?1:-1,h=u>0?1:-1,p=d+h===0,v=o.map((function(t){return Ae(t,0,Math.min(Math.abs(c)/2,Math.abs(l)/2))})),y=g(v,4),m=y[0],b=y[1],x=y[2],w=y[3];t.moveTo(d*m+r,a),t.lineTo(c-d*b+r,a),0!==b&&t.arc(c-d*b+r,h*b+a,b,-h*Math.PI/2,d>0?0:Math.PI,p),t.lineTo(c+r,l-h*x+a),0!==x&&t.arc(c-d*x+r,l-h*x+a,x,d>0?0:Math.PI,h>0?Math.PI/2:1.5*Math.PI,p),t.lineTo(d*w+r,l+a),0!==w&&t.arc(d*w+r,l-h*w+a,w,h>0?Math.PI/2:-Math.PI/2,d>0?Math.PI:0,p),t.lineTo(r,h*m+a),0!==m&&t.arc(d*m+r,h*m+a,m,d>0?Math.PI:0,h>0?1.5*Math.PI:Math.PI/2,p)}else t.rect(r,a,c,l)}var op=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).name="canvas-path-generator",t}return _(e,t),O(e,[{key:"init",value:function(){var t,e=(b(b(b(b(b(b(b(b(b(b(t={},or.CIRCLE,Jh),or.ELLIPSE,tp),or.RECT,ap),or.LINE,ep),or.POLYLINE,ip),or.POLYGON,rp),or.PATH,np),or.TEXT,void 0),or.GROUP,void 0),or.IMAGE,void 0),b(b(b(t,or.HTML,void 0),or.MESH,void 0),or.FRAGMENT,void 0));this.context.pathGeneratorFactory=e}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(ur),sp=D(),up=D(),cp=D(),lp=ut(),fp=function(){function t(){var e=this;k(this,t),this.isHit=function(t,n,r,i){var a=e.context.pointInPathPickerFactory[t.nodeName];if(a){var o=vt(lp,r),s=Q(up,G(cp,n[0],n[1],0),o);if(a(t,new xr(s[0],s[1]),i,e.isPointInPath,e.context,e.runtime))return!0}return!1},this.isPointInPath=function(t,n){var r=e.runtime.offscreenCanvasCreator.getOrCreateContext(e.context.config.offscreenCanvas),i=e.context.pathGeneratorFactory[t.nodeName];return i&&(r.beginPath(),i(r,t.parsedStyle),r.closePath()),r.isPointInPath(n.x,n.y)}}return O(t,[{key:"apply",value:function(e,n){var r,i=this,a=e.renderingService,o=e.renderingContext;this.context=e,this.runtime=n;var s=null===(r=o.root)||void 0===r?void 0:r.ownerDocument;a.hooks.pick.tapPromise(t.tag,function(){var t=er(Jn().mark((function t(e){return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.pick(s,e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a.hooks.pickSync.tap(t.tag,(function(t){return i.pick(s,t)}))}},{key:"pick",value:function(t,e){var n,r=e.topmost,i=e.position,a=i.x,o=i.y,s=G(sp,a,o,0),u=[],c=nr(t.elementsFromBBox(s[0],s[1],s[0],s[1]));try{for(c.s();!(n=c.n()).done;){var l=n.value,f=l.getWorldTransform();if(this.isHit(l,s,f,!1)){var d=Wo(l);if(d){var h=d.parsedStyle.clipPath;if(this.isHit(h,s,h.getWorldTransform(),!0)){if(r)return e.picked=[l],e;u.push(l)}}else{if(r)return e.picked=[l],e;u.push(l)}}}}catch(t){c.e(t)}finally{c.f()}return e.picked=u,e}}])}();function dp(t,e,n){var r=t.parsedStyle,i=r.cx,a=void 0===i?0:i,o=r.cy,s=void 0===o?0:o,u=r.r,c=r.fill,l=r.stroke,f=r.lineWidth,d=void 0===f?1:f,h=r.increasedLineWidthForHitTesting,p=void 0===h?0:h,v=r.pointerEvents,y=void 0===v?"auto":v,m=(d+p)/2,b=In(a,s,e.x,e.y),x=g(qo(y,c,l),2),w=x[0],k=x[1];return w&&k||n?b<=u+m:w?b<=u:!!k&&b>=u-m&&b<=u+m}function hp(t,e,n,r){return t/(n*n)+e/(r*r)}function pp(t,e,n){var r=t.parsedStyle,i=r.cx,a=void 0===i?0:i,o=r.cy,s=void 0===o?0:o,u=r.rx,c=r.ry,l=r.fill,f=r.stroke,d=r.lineWidth,h=void 0===d?1:d,p=r.increasedLineWidthForHitTesting,v=void 0===p?0:p,y=r.pointerEvents,m=void 0===y?"auto":y,b=e.x,x=e.y,w=g(qo(m,l,f),2),k=w[0],E=w[1],O=(h+v)/2,S=(b-a)*(b-a),M=(x-s)*(x-s);return k&&E||n?hp(S,M,u+O,c+O)<=1:k?hp(S,M,u,c)<=1:!!E&&hp(S,M,u-O,c-O)>=1&&hp(S,M,u+O,c+O)<=1}function vp(t,e,n,r,i,a){return i>=t&&i<=t+n&&a>=e&&a<=e+r}function gp(t,e,n,r,i,a,o,s){var u=(Math.atan2(s-e,o-t)+2*Math.PI)%(2*Math.PI),c={x:t+n*Math.cos(u),y:e+n*Math.sin(u)};return In(c.x,c.y,o,s)<=a/2}function yp(t,e,n,r,i,a,o){var s=Math.min(t,n),u=Math.max(t,n),c=Math.min(e,r),l=Math.max(e,r),f=i/2;return a>=s-f&&a<=u+f&&o>=c-f&&o<=l+f&&function(t,e,n,r,i,a){var o=[n-t,r-e];if(Ee(o,[0,0]))return Math.sqrt((i-t)*(i-t)+(a-e)*(a-e));var s=[-o[1],o[0]];we(s,s);var u=[i-t,a-e];return Math.abs(ke(u,s))}(t,e,n,r,a,o)<=i/2}function mp(t,e,n,r,i){var a=t.length;if(a<2)return!1;for(var o=0;o<a-1;o++)if(yp(t[o][0],t[o][1],t[o+1][0],t[o+1][1],e,n,r))return!0;if(i){var s=t[0],u=t[a-1];if(yp(s[0],s[1],u[0],u[1],e,n,r))return!0}return!1}function bp(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function xp(t,e,n){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function wp(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],s=t[(a+1)%i];if(xp(o,s,[e,n]))return!0;bp(o[1]-n)>0!=bp(s[1]-n)>0&&bp(e-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function kp(t,e,n){for(var r=!1,i=0;i<t.length&&!(r=wp(t[i],e,n));i++);return r}function Ep(t,e,n){var r=t.parsedStyle,i=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.lineWidth,c=void 0===u?1:u,l=r.increasedLineWidthForHitTesting,f=void 0===l?0:l,d=r.pointerEvents;return!(!g(qo(void 0===d?"auto":d,r.fill,r.stroke),2)[1]&&!n||!c)&&yp(i,a,o,s,c+f,e.x,e.y)}function Op(t,e,n,r,i,a){var o=t.parsedStyle,s=o.lineWidth,u=void 0===s?1:s,c=o.increasedLineWidthForHitTesting,l=void 0===c?0:c,f=o.stroke,d=o.fill,h=o.d,p=o.pointerEvents,v=void 0===p?"auto":p,y=h.segments,m=h.hasArc,b=h.polylines,x=h.polygons,w=g(qo(v,(null==x?void 0:x.length)&&d,f),2),k=w[0],E=w[1],O=_a(t),S=!1;return k||n?S=m?r(t,e):kp(x,e.x,e.y)||kp(b,e.x,e.y):((E||n)&&(S=function(t,e,n,r,i){for(var a=!1,o=e/2,s=0;s<t.length;s++){var u=t[s],c=u.currentPoint,l=u.params,f=u.prePoint,d=u.box;if(!d||vp(d.x-o,d.y-o,d.width+e,d.height+e,n,r))switch(u.command){case"L":case"Z":if(a=yp(f[0],f[1],c[0],c[1],e,n,r))return!0;break;case"Q":if(a=Qn(f[0],f[1],l[1],l[2],l[3],l[4],n,r)<=e/2)return!0;break;case"C":if(a=Xn(f[0],f[1],l[1],l[2],l[3],l[4],l[5],l[6],n,r,i)<=e/2)return!0;break;case"A":u.cubicParams||(u.cubicParams=mn(f[0],f[1],l[1],l[2],l[3],l[4],l[5],l[6],l[7],void 0));for(var h=u.cubicParams,p=f,v=0;v<h.length;v+=6){var g=Xn(p[0],p[1],h[v],h[v+1],h[v+2],h[v+3],h[v+4],h[v+5],n,r,i);if(p=[h[v+4],h[v+5]],a=g<=e/2)return!0}}}return a}(y,u+l,e.x,e.y,O)),S)}function Sp(t,e,n){var r=t.parsedStyle,i=r.stroke,a=r.fill,o=r.lineWidth,s=void 0===o?1:o,u=r.increasedLineWidthForHitTesting,c=void 0===u?0:u,l=r.points,f=r.pointerEvents,d=g(qo(void 0===f?"auto":f,a,i),2),h=d[0],p=!1;return(d[1]||n)&&(p=mp(l.points,s+c,e.x,e.y,!0)),p||!h&&!n||(p=wp(l.points,e.x,e.y)),p}function Mp(t,e,n){var r=t.parsedStyle,i=r.lineWidth,a=void 0===i?1:i,o=r.increasedLineWidthForHitTesting,s=void 0===o?0:o,u=r.points,c=r.pointerEvents;return!(!g(qo(void 0===c?"auto":c,r.fill,r.stroke),2)[1]&&!n||!a)&&mp(u.points,a+s,e.x,e.y,!1)}function Tp(t,e,n,r,i){var a=t.parsedStyle,o=a.radius,s=a.fill,u=a.stroke,c=a.lineWidth,l=void 0===c?1:c,f=a.increasedLineWidthForHitTesting,d=void 0===f?0:f,h=a.x,p=void 0===h?0:h,v=a.y,y=void 0===v?0:v,m=a.width,b=a.height,x=a.pointerEvents,w=g(qo(void 0===x?"auto":x,s,u),2),k=w[0],E=w[1],O=o&&o.some((function(t){return 0!==t})),S=l+d;if(O){var M=!1;return(E||n)&&(M=function(t,e,n,r,i,a,o,s){var u=g(i,4),c=u[0],l=u[1],f=u[2],d=u[3];return yp(t+c,e,t+n-l,e,a,o,s)||yp(t+n,e+l,t+n,e+r-f,a,o,s)||yp(t+n-f,e+r,t+d,e+r,a,o,s)||yp(t,e+r-d,t,e+c,a,o,s)||gp(t+n-l,e+l,l,Math.PI,Math.PI,a,o,s)||gp(t+n-f,e+r-f,f,0,Math.PI,a,o,s)||gp(t+d,e+r-d,d,Math.PI,Math.PI,a,o,s)||gp(t+c,e+c,c,Math.PI,Math.PI,a,o,s)}(p,y,m,b,o.map((function(t){return Ae(t,0,Math.min(Math.abs(m)/2,Math.abs(b)/2))})),S,e.x,e.y)),M||!k&&!n||(M=r(t,e)),M}var T=S/2;return k&&E||n?vp(p-T,y-T,m+T,b+T,e.x,e.y):k?vp(p,y,m,b,e.x,e.y):!!E&&function(t,e,n,r,i,a,o){var s=i/2;return vp(t-s,e-s,n,i,a,o)||vp(t+n-s,e-s,i,r,a,o)||vp(t+s,e+r-s,n,i,a,o)||vp(t-s,e+s,i,r,a,o)}(p,y,m,b,S,e.x,e.y)}function Ap(t,e,n,r,i,a){var o=t.parsedStyle,s=o.pointerEvents,u=void 0===s?"auto":s,c=o.x,l=void 0===c?0:c,f=o.y,d=void 0===f?0:f,h=o.width,p=o.height;if("non-transparent-pixel"===u){var v=i.config.offscreenCanvas,g=a.offscreenCanvasCreator.getOrCreateCanvas(v),y=a.offscreenCanvasCreator.getOrCreateContext(v,{willReadFrequently:!0});return g.width=h,g.height=p,i.defaultStyleRendererFactory[or.IMAGE].render(y,w(w({},t.parsedStyle),{},{x:0,y:0}),t,void 0,void 0,void 0),y.getImageData(e.x-l,e.y-d,1,1).data.every((function(t){return 0!==t}))}return!0}function Pp(t,e,n,r){var i=t.getGeometryBounds();return e.x>=i.min[0]&&e.y>=i.min[1]&&e.x<=i.max[0]&&e.y<=i.max[1]}fp.tag="CanvasPicker";var Np=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).name="canvas-picker",t}return _(e,t),O(e,[{key:"init",value:function(){var t,e=(b(b(b(b(b(b(b(b(b(b(t={},or.CIRCLE,dp),or.ELLIPSE,pp),or.RECT,Tp),or.LINE,Ep),or.POLYLINE,Mp),or.POLYGON,Sp),or.PATH,Op),or.TEXT,Pp),or.GROUP,null),or.IMAGE,Ap),b(b(t,or.HTML,null),or.MESH,null));this.context.pointInPathPickerFactory=e,this.addRenderingPlugin(new fp)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(ur);function Cp(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var _p=0;function Lp(t){return"__private_"+_p+++"_"+t}var Rp=function(){return O((function t(){k(this,t),this.cacheStore=new Map}),[{key:"onRefAdded",value:function(t){}},{key:"has",value:function(t){return this.cacheStore.has(t)}},{key:"put",value:function(t,e,n){return!this.cacheStore.has(t)&&(this.cacheStore.set(t,{value:e,counter:new Set([n])}),this.onRefAdded(n),!0)}},{key:"get",value:function(t,e){var n=this.cacheStore.get(t);return n?(n.counter.has(e)||(n.counter.add(e),this.onRefAdded(e)),n.value):null}},{key:"update",value:function(t,e,n){var r=this.cacheStore.get(t);return!!r&&(r.value=w(w({},r.value),e),r.counter.has(n)||(r.counter.add(n),this.onRefAdded(n)),!0)}},{key:"release",value:function(t,e){var n=this.cacheStore.get(t);return!!n&&(n.counter.delete(e),n.counter.size<=0&&this.cacheStore.delete(t),!0)}},{key:"releaseRef",value:function(t){var e=this;Array.from(this.cacheStore.keys()).forEach((function(n){e.release(n,t)}))}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),jp=[],Dp=[],Ip=function(){function t(){k(this,t)}return O(t,null,[{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.api;t.rafId&&(e.cancelAnimationFrame(t.rafId),t.rafId=null)}},{key:"executeTask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.api;jp.length<=0&&Dp.length<=0||(Dp.forEach((function(t){return t()})),Dp=jp.splice(0,t.TASK_NUM_PER_FRAME),t.rafId=e.requestAnimationFrame((function(){t.executeTask(e)})))}},{key:"sliceImage",value:function(e,n,r,i){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.api,s=e.naturalWidth||e.width,u=e.naturalHeight||e.height,c=n-a,l=r-a,f=Math.ceil(s/c),d=Math.ceil(u/l),h={tileSize:[n,r],gridSize:[d,f],tiles:Array(d).fill(null).map((function(){return Array(f).fill(null)}))},p=function(t){for(var a=function(a){jp.push((function(){var f=a*c,d=t*l,p=[Math.min(n,s-f),Math.min(r,u-d)],v=p[0],g=p[1],y=o.createCanvas();y.width=n,y.height=r,y.getContext("2d").drawImage(e,f,d,v,g,0,0,v,g),h.tiles[t][a]={x:f,y:d,tileX:a,tileY:t,data:y},i()}))},d=0;d<f;d++)a(d)},v=0;v<d;v++)p(v);return t.stop(),t.executeTask(),h}}])}();Ip.TASK_NUM_PER_FRAME=10;var Fp=new Rp;Fp.onRefAdded=function(t){var e=this;t.addEventListener(Ys.DESTROY,(function(){e.releaseRef(t)}),{once:!0})};var zp=function(){return O((function t(e,n){k(this,t),this.gradientCache={},this.patternCache={},this.context=e,this.runtime=n}),[{key:"getImageSync",value:function(t,e,n){var r=Te(t)?t:t.src;if(Fp.has(r)){var i=Fp.get(r,e);if(i.img.complete)return null==n||n(i),i}return this.getOrCreateImage(t,e).then((function(t){null==n||n(t)})).catch((function(t){console.error(t)})),null}},{key:"getOrCreateImage",value:function(t,e){var n=this,r=Te(t)?t:t.src;if(!Te(t)&&!Fp.has(r)){var i={img:t,size:[t.naturalWidth||t.width,t.naturalHeight||t.height],tileSize:Bp(t)};Fp.put(r,i,e)}if(Fp.has(r)){var a=Fp.get(r,e);return a.img.complete?Promise.resolve(a):new Promise((function(t,e){a.img.addEventListener("load",(function(){a.size=[a.img.naturalWidth||a.img.width,a.img.naturalHeight||a.img.height],a.tileSize=Bp(a.img),t(a)})),a.img.addEventListener("error",(function(t){e(t)}))}))}return new Promise((function(t,i){var a=n.context.config.createImage();if(a){var o={img:a,size:[0,0],tileSize:Bp(a)};Fp.put(r,o,e),a.onload=function(){o.size=[a.naturalWidth||a.width,a.naturalHeight||a.height],o.tileSize=Bp(o.img),t(o)},a.onerror=function(t){i(t)},a.crossOrigin="Anonymous",a.src=r}}))}},{key:"createDownSampledImage",value:(e=er(Jn().mark((function t(e,n){var r,i,a,o,s,u,c,l,f,d,h,p,v,y;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOrCreateImage(e,n);case 2:if(void 0===(r=t.sent).downSamplingRate){t.next=5;break}return t.abrupt("return",r);case 5:if(i=this.context.config.enableLargeImageOptimization,o=(a="boolean"==typeof i?{}:i).maxDownSampledImageSize,s=void 0===o?2048:o,u=a.downSamplingRateThreshold,c=void 0===u?.5:u,l=this.runtime.globalThis.createImageBitmap,f=g(r.size,2),d=f[0],h=f[1],p=r.img,v=Math.min((s+s)/(d+h),Math.max(.01,Math.min(c,.5))),y=w(w({},r),{},{downSamplingRate:v}),Fp.update(r.img.src,y,n),!l){t.next=25;break}return t.prev=14,t.next=17,l(r.img,{resizeWidth:d*v,resizeHeight:h*v});case 17:p=t.sent,t.next=23;break;case 20:t.prev=20,t.t0=t.catch(14),v=1;case 23:t.next=26;break;case 25:v=1;case 26:return y=w(w({},this.getImageSync(e,n)),{},{downSampled:p,downSamplingRate:v}),Fp.update(r.img.src,y,n),t.abrupt("return",y);case 29:case"end":return t.stop()}}),t,this,[[14,20]])}))),function(t,n){return e.apply(this,arguments)})},{key:"createImageTiles",value:(t=er(Jn().mark((function t(e,n,r,i){var a,o,s,u,c;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOrCreateImage(e,i);case 2:return a=t.sent,o=i.ownerDocument.defaultView,s=o.requestAnimationFrame,u=o.cancelAnimationFrame,Ip.api={requestAnimationFrame:s,cancelAnimationFrame:u,createCanvas:function(){return Bs.createCanvas()}},c=w(w({},a),Ip.sliceImage(a.img,a.tileSize[0],a.tileSize[0],r)),Fp.update(a.img.src,c,i),t.abrupt("return",c);case 8:case"end":return t.stop()}}),t,this)}))),function(e,n,r,i){return t.apply(this,arguments)})},{key:"releaseImage",value:function(t,e){Fp.release(Te(t)?t:t.src,e)}},{key:"releaseImageRef",value:function(t){Fp.releaseRef(t)}},{key:"getOrCreatePatternSync",value:function(t,e,n,r,i,a,o){var s=this.generatePatternKey(e);if(s&&this.patternCache[s])return this.patternCache[s];var u,c=e.image,l=e.repetition,f=e.transform,d=!1;if(Te(c)){var h=this.getImageSync(c,t,o);u=null==h?void 0:h.img}else r?(u=r,d=!0):u=c;var p,v=u&&n.createPattern(u,l);return v&&(p=f?ms(eo(f),new ju({})):ht(ut()),d&&xt(p,p,[1/i,1/i,1]),v.setTransform({a:p[0],b:p[1],c:p[4],d:p[5],e:p[12]+a[0],f:p[13]+a[1]})),s&&v&&(this.patternCache[s]=v),v}},{key:"getOrCreateGradient",value:function(t,e){var n=this.generateGradientKey(t),r=t.type,i=t.steps,a=t.min,o=t.width,s=t.height,u=t.angle,c=t.cx,l=t.cy,f=t.size;if(this.gradientCache[n])return this.gradientCache[n];var d=null;if(r===Bi.LinearGradient){var h=function(t,e,n,r){var i=Ar(r.value),a=0+e/2,o=0+n/2,s=Math.abs(e*Math.cos(i))+Math.abs(n*Math.sin(i));return{x1:t[0]+a-Math.cos(i)*s/2,y1:t[1]+o-Math.sin(i)*s/2,x2:t[0]+a+Math.cos(i)*s/2,y2:t[1]+o+Math.sin(i)*s/2}}(a,o,s,u),p=h.x1,v=h.y1,g=h.x2,y=h.y2;d=e.createLinearGradient(p,v,g,y)}else if(r===Bi.RadialGradient){var m=function(t,e,n,r,i,a){var o=r.value,s=i.value;r.unit===Ni.kPercentage&&(o=r.value/100*e),i.unit===Ni.kPercentage&&(s=i.value/100*n);var u=Math.max(Se([0,0],[o,s]),Se([0,n],[o,s]),Se([e,n],[o,s]),Se([e,0],[o,s]));return a&&(a instanceof Hi?u=a.value:a instanceof Wi&&("closest-side"===a.value?u=Math.min(o,e-o,s,n-s):"farthest-side"===a.value?u=Math.max(o,e-o,s,n-s):"closest-corner"===a.value&&(u=Math.min(Se([0,0],[o,s]),Se([0,n],[o,s]),Se([e,n],[o,s]),Se([e,0],[o,s]))))),{x:o+t[0],y:s+t[1],r:u}}(a,o,s,c,l,f),b=m.x,x=m.y,w=m.r;d=e.createRadialGradient(b,x,0,b,x,w)}return d&&(i.forEach((function(t){var e,n=t.offset,r=t.color;n.unit===Ni.kPercentage&&(null===(e=d)||void 0===e||e.addColorStop(n.value/100,r.toString()))})),this.gradientCache[n]=d),this.gradientCache[n]}},{key:"generateGradientKey",value:function(t){var e=t.type,n=t.min,r=t.width,i=t.height,a=t.steps,o=t.angle,s=t.cx,u=t.cy,c=t.size;return"gradient-".concat(e,"-").concat((null==o?void 0:o.toString())||0,"-").concat((null==s?void 0:s.toString())||0,"-").concat((null==u?void 0:u.toString())||0,"-").concat((null==c?void 0:c.toString())||0,"-").concat(n[0],"-").concat(n[1],"-").concat(r,"-").concat(i,"-").concat(a.map((function(t){var e=t.offset,n=t.color;return"".concat(e).concat(n)})).join("-"))}},{key:"generatePatternKey",value:function(t){var e=t.image,n=t.repetition;return Te(e)?"pattern-".concat(e,"-").concat(n):"rect"===e.nodeName?"pattern-".concat(e.entity,"-").concat(n):void 0}}]);var t,e}();function Bp(t){if(!t.complete)return[0,0];var e=t.naturalWidth||t.width,n=t.naturalHeight||t.height,r=256;return[256,512].forEach((function(t){Math.ceil(n/t)*Math.ceil(e/t)<1e3&&(r=t)})),[r,r]}zp.isSupportTile=!!Bs.createCanvas();var Gp=function(){function t(){k(this,t)}return O(t,[{key:"apply",value:function(e){var n=e.renderingService,r=e.renderingContext,i=e.imagePool,a=r.root.ownerDocument.defaultView,o=function(t,e,n){var r=t.parsedStyle,i=r.width,a=r.height;i&&!a?t.setAttribute("height",n/e*i):!i&&a&&t.setAttribute("width",e/n*a)},s=function(t){var e=t.target,r=e.nodeName,a=e.attributes;if(r===or.IMAGE){var s=a.src,u=a.keepAspectRatio;i.getImageSync(s,e,(function(t){var r=t.img,i=r.width,a=r.height;u&&o(e,i,a),e.renderable.dirty=!0,n.dirtify()}))}},u=function(t){var e=t.target,r=t.attrName,a=t.prevValue,s=t.newValue;e.nodeName===or.IMAGE&&"src"===r&&(a!==s&&i.releaseImage(a,e),Te(s)&&i.getOrCreateImage(s,e).then((function(t){var r=t.img,i=r.width,a=r.height;e.attributes.keepAspectRatio&&o(e,i,a),e.renderable.dirty=!0,n.dirtify()})).catch((function(){})))};n.hooks.init.tap(t.tag,(function(){a.addEventListener(Ys.MOUNTED,s),a.addEventListener(Ys.ATTR_MODIFIED,u)})),n.hooks.destroy.tap(t.tag,(function(){a.removeEventListener(Ys.MOUNTED,s),a.removeEventListener(Ys.ATTR_MODIFIED,u)}))}}])}();Gp.tag="LoadImage";var Wp=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).name="image-loader",t}return _(e,t),O(e,[{key:"init",value:function(t){this.context.imagePool=new zp(this.context,t),this.addRenderingPlugin(new Gp)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(ur),Vp=Lp("renderState"),Hp=function(){function t(e){k(this,t),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,Vp,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=ut(),this.dprMatrix=ut(),this.tmpMat4=ut(),this.vec3a=D(),this.vec3b=D(),this.vec3c=D(),this.vec3d=D(),this.canvasRendererPluginOptions=e}return O(t,[{key:"apply",value:function(e,n){var r=this;this.context=e;var i=this.context,a=i.config,o=i.camera,s=i.renderingService,u=i.renderingContext,c=i.rBushRoot,l=i.pathGeneratorFactory,f=a.renderer.getConfig().enableRenderingOptimization;a.renderer.getConfig().enableDirtyCheck=!1,a.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=c,this.pathGeneratorFactory=l;var d=e.contextService,h=u.root.ownerDocument.defaultView,p=function(t){var e=t.target.rBushNode;e.aabb&&r.removedRBushNodeAABBs.push(e.aabb)},v=function(t){var e=t.target.rBushNode;e.aabb&&r.removedRBushNodeAABBs.push(e.aabb)};s.hooks.init.tap(t.tag,(function(){h.addEventListener(Ys.UNMOUNTED,p),h.addEventListener(Ys.CULLED,v);var t=d.getDPR(),e=a.width,n=a.height,i=d.getContext();r.clearRect(i,0,0,e*t,n*t,a.background)})),s.hooks.destroy.tap(t.tag,(function(){h.removeEventListener(Ys.UNMOUNTED,p),h.removeEventListener(Ys.CULLED,v),r.renderQueue=[],r.removedRBushNodeAABBs=[],Cp(r,Vp)[Vp]={restoreStack:[],prevObject:null,currentContext:null}})),s.hooks.beginFrame.tap(t.tag,(function(){var t,e=d.getContext(),n=d.getDPR(),i=a.width,o=a.height,u=r.canvasRendererPluginOptions,c=u.dirtyObjectNumThreshold,l=u.dirtyObjectRatioThreshold,f=s.getStats(),p=f.total,v=f.rendered,g=v/p;r.clearFullScreen=r.clearFullScreenLastFrame||!(null!==(t=h.context.renderingPlugins[1])&&void 0!==t&&t.isFirstTimeRenderingFinished)||s.disableDirtyRectangleRendering()||v>c&&g>l,e&&("function"==typeof e.resetTransform?e.resetTransform():e.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(e,0,0,i*n,o*n,a.background))}));var g=function(t,e){for(var i=[t];i.length>0;){var a=i.pop();a.isVisible()&&!a.isCulled()&&(f?r.renderDisplayObjectOptimized(a,e,r.context,Cp(r,Vp)[Vp],n):r.renderDisplayObject(a,e,r.context,Cp(r,Vp)[Vp],n));for(var o=a.sortable.sorted||a.childNodes,s=o.length-1;s>=0;s--)i.push(o[s])}};s.hooks.endFrame.tap(t.tag,(function(){if(0!==u.root.childNodes.length){f=a.renderer.getConfig().enableRenderingOptimization,Cp(r,Vp)[Vp]={restoreStack:[],prevObject:null,currentContext:Cp(r,Vp)[Vp].currentContext},Cp(r,Vp)[Vp].currentContext.clear(),r.clearFullScreenLastFrame=!1;var t=d.getContext(),e=d.getDPR();if(Mt(r.dprMatrix,[e,e,1]),mt(r.vpMatrix,r.dprMatrix,o.getOrthoMatrix()),r.clearFullScreen)f?(t.save(),g(u.root,t),t.restore()):g(u.root,t),r.removedRBushNodeAABBs=[];else{var i=r.safeMergeAABB.apply(r,[r.mergeDirtyAABBs(r.renderQueue)].concat(M(r.removedRBushNodeAABBs.map((function(t){var e=t.minX,n=t.minY,r=t.maxX,i=t.maxY,a=new gr;return a.setMinMax([e,n,0],[r,i,0]),a})))));if(r.removedRBushNodeAABBs=[],gr.isEmpty(i))return void(r.renderQueue=[]);var s=r.convertAABB2Rect(i),c=s.x,l=s.y,p=s.width,v=s.height,y=Q(r.vec3a,[c,l,0],r.vpMatrix),m=Q(r.vec3b,[c+p,l,0],r.vpMatrix),b=Q(r.vec3c,[c,l+v,0],r.vpMatrix),x=Q(r.vec3d,[c+p,l+v,0],r.vpMatrix),w=Math.min(y[0],m[0],x[0],b[0]),k=Math.min(y[1],m[1],x[1],b[1]),E=Math.max(y[0],m[0],x[0],b[0]),O=Math.max(y[1],m[1],x[1],b[1]),S=Math.floor(w),T=Math.floor(k),A=Math.ceil(E-w),P=Math.ceil(O-k);t.save(),r.clearRect(t,S,T,A,P,a.background),t.beginPath(),t.rect(S,T,A,P),t.clip(),t.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]),a.renderer.getConfig().enableDirtyRectangleRenderingDebug&&h.dispatchEvent(new js(uc.DIRTY_RECTANGLE,{dirtyRect:{x:S,y:T,width:A,height:P}})),r.searchDirtyObjects(i).sort((function(t,e){return t.sortable.renderOrder-e.sortable.renderOrder})).forEach((function(e){e&&e.isVisible()&&!e.isCulled()&&r.renderDisplayObject(e,t,r.context,Cp(r,Vp)[Vp],n)})),t.restore(),r.renderQueue.forEach((function(t){r.saveDirtyAABB(t)})),r.renderQueue=[]}Cp(r,Vp)[Vp].restoreStack.forEach((function(){t.restore()})),Cp(r,Vp)[Vp].restoreStack=[]}else r.clearFullScreenLastFrame=!0})),s.hooks.render.tap(t.tag,(function(t){r.clearFullScreen||r.renderQueue.push(t)}))}},{key:"clearRect",value:function(t,e,n,r,i,a){t.clearRect(e,n,r,i),a&&(t.fillStyle=a,t.fillRect(e,n,r,i))}},{key:"renderDisplayObjectOptimized",value:function(t,e,n,r,i){var a=t.nodeName,o=!1,s=this.context.styleRendererFactory[a],u=this.pathGeneratorFactory[a],c=t.parsedStyle.clipPath;if(c){(!r.prevObject||!ee(c.getWorldTransform(),r.prevObject.getWorldTransform()))&&(this.applyWorldTransform(e,c),r.prevObject=null);var l=this.pathGeneratorFactory[c.nodeName];l&&(e.save(),o=!0,e.beginPath(),l(e,c.parsedStyle),e.closePath(),e.clip())}if(s){(!r.prevObject||!ee(t.getWorldTransform(),r.prevObject.getWorldTransform()))&&this.applyWorldTransform(e,t);var f=!r.prevObject;if(!f){var d=r.prevObject.nodeName;f=a===or.TEXT?d!==or.TEXT:a===or.IMAGE?d!==or.IMAGE:d===or.TEXT||d===or.IMAGE}s.applyStyleToContext(e,t,f,r),r.prevObject=t}u&&(e.beginPath(),u(e,t.parsedStyle),a!==or.LINE&&a!==or.PATH&&a!==or.POLYLINE&&e.closePath()),s&&s.drawToContext(e,t,Cp(this,Vp)[Vp],this,i),o&&e.restore(),t.renderable.dirty=!1}},{key:"renderDisplayObject",value:function(t,e,n,r,i){var a=t.nodeName,o=r.restoreStack[r.restoreStack.length-1];!o||t.compareDocumentPosition(o)&Fs.DOCUMENT_POSITION_CONTAINS||(e.restore(),r.restoreStack.pop());var s=this.context.styleRendererFactory[a],u=this.pathGeneratorFactory[a],c=t.parsedStyle.clipPath;if(c){this.applyWorldTransform(e,c);var l=this.pathGeneratorFactory[c.nodeName];l&&(e.save(),r.restoreStack.push(t),e.beginPath(),l(e,c.parsedStyle),e.closePath(),e.clip())}s&&(this.applyWorldTransform(e,t),e.save(),this.applyAttributesToContext(e,t)),u&&(e.beginPath(),u(e,t.parsedStyle),a!==or.LINE&&a!==or.PATH&&a!==or.POLYLINE&&e.closePath()),s&&(s.render(e,t.parsedStyle,t,n,this,i),e.restore()),t.renderable.dirty=!1}},{key:"applyAttributesToContext",value:function(t,e){var n=e.parsedStyle,r=n.stroke,i=n.fill,a=n.opacity,o=n.lineDash,s=n.lineDashOffset;o&&t.setLineDash(o),Me(s)||(t.lineDashOffset=s),Me(a)||(t.globalAlpha*=a),Me(r)||Array.isArray(r)||r.isNone||(t.strokeStyle=e.attributes.stroke),Me(i)||Array.isArray(i)||i.isNone||(t.fillStyle=e.attributes.fill)}},{key:"convertAABB2Rect",value:function(t){var e=t.getMin(),n=t.getMax(),r=Math.floor(e[0]),i=Math.floor(e[1]);return{x:r,y:i,width:Math.ceil(n[0])-r,height:Math.ceil(n[1])-i}}},{key:"mergeDirtyAABBs",value:function(t){var e=new gr;return t.forEach((function(t){var n=t.getRenderBounds();e.add(n);var r=t.renderable.dirtyRenderBounds;r&&e.add(r)})),e}},{key:"searchDirtyObjects",value:function(t){var e=g(t.getMin(),2),n=e[0],r=e[1],i=g(t.getMax(),2),a=i[0],o=i[1];return this.rBush.search({minX:n,minY:r,maxX:a,maxY:o}).map((function(t){return t.displayObject}))}},{key:"saveDirtyAABB",value:function(t){var e=t.renderable;e.dirtyRenderBounds||(e.dirtyRenderBounds=new gr);var n=t.getRenderBounds();n&&e.dirtyRenderBounds.update(n.center,n.halfExtents)}},{key:"applyWorldTransform",value:function(t,e,n){n?(lt(this.tmpMat4,e.getLocalTransform()),mt(this.tmpMat4,n,this.tmpMat4),mt(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(lt(this.tmpMat4,e.getWorldTransform()),mt(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var t=new gr,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){t.add(e)})),t}}])}();function Yp(t,e,n,r,i,a,o){var s,u;if("rect"===t.image.nodeName){var c=t.image.parsedStyle,l=c.width,f=c.height;u=r.contextService.getDPR();var d=r.config.offscreenCanvas;(s=a.offscreenCanvasCreator.getOrCreateCanvas(d)).width=l*u,s.height=f*u;var h=a.offscreenCanvasCreator.getOrCreateContext(d),p={restoreStack:[],prevObject:null,currentContext:new Map};t.image.forEach((function(t){i.renderDisplayObject(t,h,r,p,a)})),p.restoreStack.forEach((function(){h.restore()}))}return o.getOrCreatePatternSync(e,t,n,s,u,e.getGeometryBounds().min,(function(){e.renderable.dirty=!0,r.renderingService.dirtify()}))}function Up(t,e,n,r){var i;if(t.type===Bi.LinearGradient||t.type===Bi.RadialGradient){var a=e.getGeometryBounds(),o=a&&2*a.halfExtents[0]||1,s=a&&2*a.halfExtents[1]||1,u=a&&a.min||[0,0];i=r.getOrCreateGradient(w(w({type:t.type},t.value),{},{min:u,width:o,height:s}),n)}return i}Hp.tag="CanvasRenderer";var qp=["shadowBlur","shadowOffsetX","shadowOffsetY"],Xp=["lineCap","lineJoin","miterLimit"],Kp={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},$p={};function Zp(t,e,n,r){var i=r.has(e)?r.get(e):Kp[e];return i!==n&&("lineDash"===e?t.setLineDash(n):t[e]=n,r.set(e,n)),i}var Qp=function(){return O((function t(e){k(this,t),this.imagePool=e}),[{key:"applyAttributesToContext",value:function(t,e){}},{key:"render",value:function(t,e,n,r,i,a){}},{key:"applyCommonStyleToContext",value:function(t,e,n,r){var i=n?$p:r.prevObject.parsedStyle,a=e.parsedStyle;(n||a.opacity!==i.opacity)&&Zp(t,"globalAlpha",Me(a.opacity)?Kp.globalAlpha:a.opacity,r.currentContext),(n||a.blend!==i.blend)&&Zp(t,"globalCompositeOperation",Me(a.blend)?Kp.globalCompositeOperation:a.blend,r.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(t,e,n,r){var i=n?$p:r.prevObject.parsedStyle,a=e.parsedStyle,o=a.lineWidth,s=void 0===o?Kp.lineWidth:o,u=a.fill&&!a.fill.isNone;if(a.stroke&&!a.stroke.isNone&&s>0){(n||e.attributes.stroke!==r.prevObject.attributes.stroke)&&Zp(t,"strokeStyle",Me(a.stroke)||Array.isArray(a.stroke)||a.stroke.isNone?Kp.strokeStyle:e.attributes.stroke,r.currentContext),(n||a.lineWidth!==i.lineWidth)&&Zp(t,"lineWidth",Me(a.lineWidth)?Kp.lineWidth:a.lineWidth,r.currentContext),(n||a.lineDash!==i.lineDash)&&Zp(t,"lineDash",a.lineDash||Kp.lineDash,r.currentContext),(n||a.lineDashOffset!==i.lineDashOffset)&&Zp(t,"lineDashOffset",Me(a.lineDashOffset)?Kp.lineDashOffset:a.lineDashOffset,r.currentContext);for(var c=0;c<Xp.length;c++){var l=Xp[c];(n||a[l]!==i[l])&&Zp(t,l,Me(a[l])?Kp[l]:a[l],r.currentContext)}}u&&(n||e.attributes.fill!==r.prevObject.attributes.fill)&&Zp(t,"fillStyle",Me(a.fill)||Array.isArray(a.fill)||a.fill.isNone?Kp.fillStyle:e.attributes.fill,r.currentContext)}},{key:"applyStyleToContext",value:function(t,e,n,r){var i=e.nodeName;this.applyCommonStyleToContext(t,e,n,r),i===or.IMAGE||this.applyStrokeFillStyleToContext(t,e,n,r)}},{key:"applyShadowAndFilterStyleToContext",value:function(t,e,n,r){var i=e.parsedStyle;if(n){Zp(t,"shadowColor",i.shadowColor.toString(),r.currentContext);for(var a=0;a<qp.length;a++){var o=qp[a];Zp(t,o,i[o]||Kp[o],r.currentContext)}}i.filter&&i.filter.length&&Zp(t,"filter",e.attributes.filter,r.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e){Zp(t,"shadowColor",Kp.shadowColor,r.currentContext);for(var a=0;a<qp.length;a++){var o=qp[a];Zp(t,o,Kp[o],r.currentContext)}}if(n)if(e&&i){var s=t.filter;!Me(s)&&s.indexOf("drop-shadow")>-1&&Zp(t,"filter",s.replace(/drop-shadow\([^)]*\)/,"").trim()||Kp.filter,r.currentContext)}else Zp(t,"filter",Kp.filter,r.currentContext)}},{key:"fillToContext",value:function(t,e,n,r,i){var a=this,o=e.parsedStyle,s=o.fill,u=o.fillRule,c=null;if(Array.isArray(s)&&s.length>0)s.forEach((function(r){var i=Zp(t,"fillStyle",Up(r,e,t,a.imagePool),n.currentContext);c=null!=c?c:i,u?t.fill(u):t.fill()}));else{if(la(s)){var l=Yp(s,e,t,e.ownerDocument.defaultView.context,r,i,this.imagePool);l&&(t.fillStyle=l,c=!0)}u?t.fill(u):t.fill()}null!==c&&Zp(t,"fillStyle",c,n.currentContext)}},{key:"strokeToContext",value:function(t,e,n,r,i){var a=this,o=e.parsedStyle.stroke,s=null;if(Array.isArray(o)&&o.length>0)o.forEach((function(r){var i=Zp(t,"strokeStyle",Up(r,e,t,a.imagePool),n.currentContext);s=null!=s?s:i,t.stroke()}));else{if(la(o)){var u=Yp(o,e,t,e.ownerDocument.defaultView.context,r,i,this.imagePool);if(u){var c=Zp(t,"strokeStyle",u,n.currentContext);s=null!=s?s:c}}t.stroke()}null!==s&&Zp(t,"strokeStyle",s,n.currentContext)}},{key:"drawToContext",value:function(t,e,n,r,i){var a,o=e.nodeName,s=e.parsedStyle,u=s.opacity,c=void 0===u?Kp.globalAlpha:u,l=s.fillOpacity,f=void 0===l?Kp.fillOpacity:l,d=s.strokeOpacity,h=void 0===d?Kp.strokeOpacity:d,p=s.lineWidth,v=void 0===p?Kp.lineWidth:p,g=s.fill&&!s.fill.isNone,y=s.stroke&&!s.stroke.isNone&&v>0;if(g||y){var m=!Me(s.shadowColor)&&s.shadowBlur>0,b="inner"===s.shadowType,x=0===(null===(a=s.fill)||void 0===a?void 0:a.alpha),w=!(!s.filter||!s.filter.length),k=m&&y&&(o===or.PATH||o===or.LINE||o===or.POLYLINE||x||b),E=null;if(g&&(k||this.applyShadowAndFilterStyleToContext(t,e,m,n),E=Zp(t,"globalAlpha",c*f,n.currentContext),this.fillToContext(t,e,n,r,i),k||this.clearShadowAndFilterStyleForContext(t,m,w,n)),y){var O=!1,S=Zp(t,"globalAlpha",c*h,n.currentContext);if(E=g?E:S,k&&(this.applyShadowAndFilterStyleToContext(t,e,m,n),O=!0,b)){var M=t.globalCompositeOperation;t.globalCompositeOperation="source-atop",this.strokeToContext(t,e,n,r,i),t.globalCompositeOperation=M,this.clearShadowAndFilterStyleForContext(t,m,w,n,!0)}this.strokeToContext(t,e,n,r,i),O&&this.clearShadowAndFilterStyleForContext(t,m,w,n)}null!==E&&Zp(t,"globalAlpha",E,n.currentContext)}}}])}(),Jp=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"render",value:function(t,e,n,r,i,a){var o=e.fill,s=e.fillRule,u=e.opacity,c=void 0===u?1:u,l=e.fillOpacity,f=void 0===l?1:l,d=e.stroke,h=e.strokeOpacity,p=void 0===h?1:h,v=e.lineWidth,g=void 0===v?1:v,y=e.lineCap,m=e.lineJoin,b=e.shadowType,x=e.shadowColor,w=e.shadowBlur,k=e.filter,E=e.miterLimit,O=o&&!o.isNone,S=d&&!d.isNone&&g>0,M=0===(null==o?void 0:o.alpha),T=!(!k||!k.length),A=!Me(x)&&w>0,P=n.nodeName,N="inner"===b,C=S&&A&&(P===or.PATH||P===or.LINE||P===or.POLYLINE||M||N);O&&(t.globalAlpha=c*f,C||tv(n,t,A),ev(t,n,o,s,r,i,a,this.imagePool),C||this.clearShadowAndFilter(t,T,A)),S&&(t.globalAlpha=c*p,t.lineWidth=g,Me(E)||(t.miterLimit=E),Me(y)||(t.lineCap=y),Me(m)||(t.lineJoin=m),C&&(N&&(t.globalCompositeOperation="source-atop"),tv(n,t,!0),N&&(nv(t,n,d,r,i,a,this.imagePool),t.globalCompositeOperation=Kp.globalCompositeOperation,this.clearShadowAndFilter(t,T,!0))),nv(t,n,d,r,i,a,this.imagePool))}},{key:"clearShadowAndFilter",value:function(t,e,n){if(n&&(t.shadowColor="transparent",t.shadowBlur=0),e){var r=t.filter;!Me(r)&&r.indexOf("drop-shadow")>-1&&(t.filter=r.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(Qp);function tv(t,e,n){var r=t.parsedStyle,i=r.filter,a=r.shadowColor,o=r.shadowBlur,s=r.shadowOffsetX,u=r.shadowOffsetY;i&&i.length&&(e.filter=t.style.filter),n&&(e.shadowColor=a.toString(),e.shadowBlur=o||0,e.shadowOffsetX=s||0,e.shadowOffsetY=u||0)}function ev(t,e,n,r,i,a,o,s){var u=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Array.isArray(n)?n.forEach((function(n){t.fillStyle=Up(n,e,t,s),u||(r?t.fill(r):t.fill())})):(la(n)&&(t.fillStyle=Yp(n,e,t,i,a,o,s)),u||(r?t.fill(r):t.fill()))}function nv(t,e,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Array.isArray(n)?n.forEach((function(n){t.strokeStyle=Up(n,e,t,o),s||t.stroke()})):(la(n)&&(t.strokeStyle=Yp(n,e,t,r,i,a,o)),s||t.stroke())}var rv=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"renderDownSampled",value:function(t,e,n,r){var i=r.src,a=r.imageCache;a.downSampled?t.drawImage(a.downSampled,Math.floor(r.drawRect[0]),Math.floor(r.drawRect[1]),Math.ceil(r.drawRect[2]),Math.ceil(r.drawRect[3])):this.imagePool.createDownSampledImage(i,n).then((function(){n.ownerDocument&&(n.renderable.dirty=!0,n.ownerDocument.defaultView.context.renderingService.dirtify())})).catch((function(t){console.error(t)}))}},{key:"renderTile",value:function(t,e,n,r){var i=r.src,a=r.imageCache,o=r.imageRect,s=r.drawRect,u=a.size,c=t.getTransform(),l=c.a,f=c.b,d=c.c,h=c.d,p=c.e,v=c.f;if(t.resetTransform(),null!=a&&a.gridSize){for(var g=[u[0]/o[2],u[1]/o[3]],y=[a.tileSize[0]/g[0],a.tileSize[1]/g[1]],m=[Math.floor((s[0]-o[0])/y[0]),Math.ceil((s[0]+s[2]-o[0])/y[0])],b=m[0],x=m[1],w=[Math.floor((s[1]-o[1])/y[1]),Math.ceil((s[1]+s[3]-o[1])/y[1])],k=w[1],E=w[0];E<=k;E++)for(var O=b;O<=x;O++){var S=a.tiles[E][O];if(S){var M=[Math.floor(o[0]+S.tileX*y[0]),Math.floor(o[1]+S.tileY*y[1]),Math.ceil(y[0]),Math.ceil(y[1])];t.drawImage(S.data,M[0],M[1],M[2],M[3])}}t.setTransform(l,f,d,h,p,v)}else this.imagePool.createImageTiles(i,[],(function(){n.ownerDocument&&(n.renderable.dirty=!0,n.ownerDocument.defaultView.context.renderingService.dirtify())}),n).catch((function(t){console.error(t)}))}},{key:"render",value:function(t,n,r){var i=n.x,a=void 0===i?0:i,o=n.y,s=void 0===o?0:o,u=n.width,c=n.height,l=n.src,f=n.shadowColor,d=n.shadowBlur,h=this.imagePool.getImageSync(l,r),p=null==h?void 0:h.img,v=u,y=c;if(p){v||(v=p.width),y||(y=p.height),tv(r,t,!Me(f)&&d>0);try{var m=r.ownerDocument.defaultView.getContextService().getDomElement(),b=m.width,x=m.height,w=t.getTransform(),k=w.a,E=w.b,O=function(t,e){var n=Q(D(),[t[0],t[1],0],e),r=Q(D(),[t[0]+t[2],t[1],0],e),i=Q(D(),[t[0],t[1]+t[3],0],e),a=Q(D(),[t[0]+t[2],t[1]+t[3],0],e);return[Math.min(n[0],r[0],i[0],a[0]),Math.min(n[1],r[1],i[1],a[1]),Math.max(n[0],r[0],i[0],a[0])-Math.min(n[0],r[0],i[0],a[0]),Math.max(n[1],r[1],i[1],a[1])-Math.min(n[1],r[1],i[1],a[1])]}([a,s,v,y],ft(k,w.c,0,0,E,w.d,0,0,0,0,1,0,w.e,w.f,0,1)),S=function(t,e){var n=g(t,4),r=n[0],i=n[1],a=n[2],o=n[3],s=g(e,4),u=s[0],c=s[1],l=s[2],f=s[3],d=Math.max(r,u),h=Math.max(i,c),p=Math.min(r+a,u+l),v=Math.min(i+o,c+f);return p<=d||v<=h?null:[d,h,p-d,v-h]}([0,0,b,x],O);if(!S)return;if(!r.ownerDocument.defaultView.getConfig().enableLargeImageOptimization)return void e.renderFull(t,n,r,{image:p,drawRect:[a,s,v,y]});if(O[2]/h.size[0]<(h.downSamplingRate||.5))return void this.renderDownSampled(t,n,r,{src:l,imageCache:h,drawRect:[a,s,v,y]});if(!zp.isSupportTile)return void e.renderFull(t,n,r,{image:p,drawRect:[a,s,v,y]});this.renderTile(t,n,r,{src:l,imageCache:h,imageRect:O,drawRect:S})}catch(t){}}}},{key:"drawToContext",value:function(t,e,n,r,i){this.render(t,e.parsedStyle,e)}}],[{key:"renderFull",value:function(t,e,n,r){t.drawImage(r.image,Math.floor(r.drawRect[0]),Math.floor(r.drawRect[1]),Math.ceil(r.drawRect[2]),Math.ceil(r.drawRect[3]))}}])}(Jp),iv=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"render",value:function(t,e,n,r,i,a){n.getBounds();var o=e.lineWidth,s=void 0===o?1:o,u=e.textAlign,c=void 0===u?"start":u,l=e.textBaseline,f=void 0===l?"alphabetic":l,d=e.lineJoin,h=void 0===d?"miter":d,p=e.miterLimit,v=void 0===p?10:p,g=e.letterSpacing,y=void 0===g?0:g,m=e.stroke,b=e.fill,x=e.fillRule,w=e.fillOpacity,k=void 0===w?1:w,E=e.strokeOpacity,O=void 0===E?1:E,S=e.opacity,M=void 0===S?1:S,T=e.metrics,A=e.x,P=void 0===A?0:A,N=e.y,C=void 0===N?0:N,_=e.dx,L=e.dy,R=e.shadowColor,j=e.shadowBlur,D=T.font,I=T.lines,F=T.height,z=T.lineHeight,B=T.lineMetrics;t.font=D,t.lineWidth=s,t.textAlign="middle"===c?"center":c;var G=f;"alphabetic"===G&&(G="bottom"),t.lineJoin=h,Me(v)||(t.miterLimit=v);var W=C;"middle"===f?W+=-F/2-z/2:"bottom"===f||"alphabetic"===f||"ideographic"===f?W+=-F:"top"!==f&&"hanging"!==f||(W+=-z);var V=P+(_||0);W+=L||0,1===I.length&&("bottom"===G?(G="middle",W-=.5*F):"top"===G&&(G="middle",W+=.5*F)),t.textBaseline=G,tv(n,t,!Me(R)&&j>0);for(var H=0;H<I.length;H++){var Y=s/2+V;W+=z,Me(m)||m.isNone||!s||this.drawLetterSpacing(t,n,I[H],B[H],c,Y,W,y,b,x,k,m,O,M,!0,r,i,a),Me(b)||this.drawLetterSpacing(t,n,I[H],B[H],c,Y,W,y,b,x,k,m,O,M,!1,r,i,a)}}},{key:"drawLetterSpacing",value:function(t,e,n,r,i,a,o,s,u,c,l,f,d,h,p,v,g,y){if(0!==s){var m=t.textAlign;t.textAlign="left";var b=a;"center"===i||"middle"===i?b=a-r.width/2:"right"!==i&&"end"!==i||(b=a-r.width);for(var x=Array.from(n),w=t.measureText(n).width,k=0,E=0;E<x.length;++E){var O=x[E];p?this.strokeText(t,e,O,b,o,f,d,v,g,y):this.fillText(t,e,O,b,o,u,c,l,h,v,g,y),b+=w-(k=t.measureText(n.substring(E+1)).width)+s,w=k}t.textAlign=m}else p?this.strokeText(t,e,n,a,o,f,d,v,g,y):this.fillText(t,e,n,a,o,u,c,l,h,v,g,y)}},{key:"fillText",value:function(t,e,n,r,i,a,o,s,u,c,l,f){var d;ev(t,e,a,o,c,l,f,this.imagePool,!0);var h=!Me(s)&&1!==s;h&&(d=t.globalAlpha,t.globalAlpha=s*u),t.fillText(n,r,i),h&&(t.globalAlpha=d)}},{key:"strokeText",value:function(t,e,n,r,i,a,o,s,u,c){var l;nv(t,e,a,s,u,c,this.imagePool,!0);var f=!Me(o)&&1!==o;f&&(l=t.globalAlpha,t.globalAlpha=o),t.strokeText(n,r,i),f&&(t.globalAlpha=l)}},{key:"drawToContext",value:function(t,e,n,r,i){this.render(t,e.parsedStyle,e,e.ownerDocument.defaultView.context,r,i)}}])}(Jp),av=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,e),(t=N(this,e)).name="canvas-renderer",t.options=n,t}return _(e,t),O(e,[{key:"init",value:function(){var t,e=w({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),n=this.context.imagePool,r=new Jp(n),i=(b(b(b(b(b(b(b(b(b(b(t={},or.CIRCLE,r),or.ELLIPSE,r),or.RECT,r),or.IMAGE,new rv(n)),or.TEXT,new iv(n)),or.LINE,r),or.POLYLINE,r),or.POLYGON,r),or.PATH,r),or.GROUP,void 0),b(b(b(t,or.HTML,void 0),or.MESH,void 0),or.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=i,this.context.styleRendererFactory=i,this.addRenderingPlugin(new Hp(e))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(ur),ov=function(){function t(){k(this,t)}return O(t,[{key:"apply",value:function(e,n){var r=this,i=e.renderingService,a=e.renderingContext,o=e.config;this.context=e;var s=a.root.ownerDocument.defaultView,u=function(t){i.hooks.pointerMove.call(t)},c=function(t){i.hooks.pointerUp.call(t)},l=function(t){i.hooks.pointerDown.call(t)},f=function(t){i.hooks.pointerOver.call(t)},d=function(t){i.hooks.pointerOut.call(t)},h=function(t){i.hooks.pointerCancel.call(t)},p=function(t){i.hooks.pointerWheel.call(t)},v=function(t){i.hooks.click.call(t)};i.hooks.init.tap(t.tag,(function(){var t=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(t.style.msContentZooming="none",t.style.msTouchAction="none"):s.supportsPointerEvents&&(t.style.touchAction="none"),s.supportsPointerEvents?function(t){n.globalThis.document.addEventListener("pointermove",u,!0),t.addEventListener("pointerdown",l,!0),t.addEventListener("pointerleave",d,!0),t.addEventListener("pointerover",f,!0),n.globalThis.addEventListener("pointerup",c,!0),n.globalThis.addEventListener("pointercancel",h,!0)}(t):function(t){n.globalThis.document.addEventListener("mousemove",u,!0),t.addEventListener("mousedown",l,!0),t.addEventListener("mouseout",d,!0),t.addEventListener("mouseover",f,!0),n.globalThis.addEventListener("mouseup",c,!0)}(t),s.supportsTouchEvents&&function(t){t.addEventListener("touchstart",l,!0),t.addEventListener("touchend",c,!0),t.addEventListener("touchmove",u,!0),t.addEventListener("touchcancel",h,!0)}(t),o.useNativeClickEvent&&t.addEventListener("click",v,!0),t.addEventListener("wheel",p,{passive:!0,capture:!0})})),i.hooks.destroy.tap(t.tag,(function(){var t=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(t.style.msContentZooming="",t.style.msTouchAction=""):s.supportsPointerEvents&&(t.style.touchAction=""),s.supportsPointerEvents?function(t){n.globalThis.document.removeEventListener("pointermove",u,!0),t.removeEventListener("pointerdown",l,!0),t.removeEventListener("pointerleave",d,!0),t.removeEventListener("pointerover",f,!0),n.globalThis.removeEventListener("pointerup",c,!0),n.globalThis.removeEventListener("pointercancel",h,!0)}(t):function(t){n.globalThis.document.removeEventListener("mousemove",u,!0),t.removeEventListener("mousedown",l,!0),t.removeEventListener("mouseout",d,!0),t.removeEventListener("mouseover",f,!0),n.globalThis.removeEventListener("mouseup",c,!0)}(t),s.supportsTouchEvents&&function(t){t.removeEventListener("touchstart",l,!0),t.removeEventListener("touchend",c,!0),t.removeEventListener("touchmove",u,!0),t.removeEventListener("touchcancel",h,!0)}(t),o.useNativeClickEvent&&t.removeEventListener("click",v,!0),t.removeEventListener("wheel",p,!0)}))}}])}();ov.tag="DOMInteraction";var sv=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).name="dom-interaction",t}return _(e,t),O(e,[{key:"init",value:function(){this.addRenderingPlugin(new ov)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(ur),uv=function(){function t(){k(this,t),this.displayObjectHTMLElementMap=new WeakMap}return O(t,[{key:"joinTransformMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return"matrix(".concat([t[0],t[1],t[4],t[5],t[12]+e[0],t[13]+e[1]].join(","),")")}},{key:"apply",value:function(e,n){var r=this,i=e.camera,a=e.renderingContext,o=e.renderingService;this.context=e;var s=a.root.ownerDocument.defaultView,u=s.context.eventService.nativeHTMLMap,c=function(t,e){e.style.transform=r.joinTransformMatrix(t.getWorldTransform(),t.getOrigin())},l=function(t){var e=t.target;if(e.nodeName===or.HTML){r.$camera||(r.$camera=r.createCamera(i));var n=r.getOrCreateEl(e);r.$camera.appendChild(n),Object.keys(e.attributes).forEach((function(t){r.updateAttribute(t,e)})),c(e,n),u.set(n,e)}},f=function(t){var e=t.target;if(e.nodeName===or.HTML&&r.$camera){var n=r.getOrCreateEl(e);n&&(n.remove(),u.delete(n))}},d=function(t){var e=t.target;if(e.nodeName===or.HTML){var n=t.attrName;r.updateAttribute(n,e)}},h=function(t){var e=t.target;(e.nodeName===or.FRAGMENT?e.childNodes:[e]).forEach((function(t){if(t.nodeName===or.HTML){var e=r.getOrCreateEl(t);c(t,e)}}))},p=function(){if(r.$camera){var t=r.context.config,e=t.width,n=t.height;r.$camera.parentElement.style.width="".concat(e||0,"px"),r.$camera.parentElement.style.height="".concat(n||0,"px")}};o.hooks.init.tap(t.tag,(function(){s.addEventListener(uc.RESIZE,p),s.addEventListener(Ys.MOUNTED,l),s.addEventListener(Ys.UNMOUNTED,f),s.addEventListener(Ys.ATTR_MODIFIED,d),s.addEventListener(Ys.BOUNDS_CHANGED,h)})),o.hooks.endFrame.tap(t.tag,(function(){r.$camera&&a.renderReasons.has(Gs.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))})),o.hooks.destroy.tap(t.tag,(function(){r.$camera&&r.$camera.remove(),s.removeEventListener(uc.RESIZE,p),s.removeEventListener(Ys.MOUNTED,l),s.removeEventListener(Ys.UNMOUNTED,f),s.removeEventListener(Ys.ATTR_MODIFIED,d),s.removeEventListener(Ys.BOUNDS_CHANGED,h)}))}},{key:"createCamera",value:function(t){var e=this.context.config,n=e.document,r=e.width,i=e.height,a=this.context.contextService.getDomElement(),o=a.parentNode;if(o){var s="g-canvas-camera",u=o.querySelector("#".concat(s));if(!u){var c=(n||document).createElement("div");c.style.overflow="hidden",c.style.pointerEvents="none",c.style.position="absolute",c.style.left="0px",c.style.top="0px",c.style.width="".concat(r||0,"px"),c.style.height="".concat(i||0,"px");var l=(n||document).createElement("div");u=l,l.id=s,l.style.position="absolute",l.style.left="".concat(a.offsetLeft||0,"px"),l.style.top="".concat(a.offsetTop||0,"px"),l.style.transformOrigin="left top",l.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),l.style.pointerEvents="none",l.style.width="100%",l.style.height="100%",c.appendChild(l),o.appendChild(c)}return u}return null}},{key:"getOrCreateEl",value:function(t){var e=this.context.config.document,n=this.displayObjectHTMLElementMap.get(t);return n||(n=(e||document).createElement("div"),t.parsedStyle.$el=n,this.displayObjectHTMLElementMap.set(t,n),t.id&&(n.id=t.id),t.name&&n.setAttribute("name",t.name),t.className&&(n.className=t.className),n.style.position="absolute",n.style["will-change"]="transform",n.style.transform=this.joinTransformMatrix(t.getWorldTransform(),t.getOrigin())),n}},{key:"updateAttribute",value:function(t,e){var n=this.getOrCreateEl(e);switch(t){case"innerHTML":var r=e.parsedStyle.innerHTML;Te(r)?n.innerHTML=r:(n.innerHTML="",n.appendChild(r));break;case"x":n.style.left="".concat(e.parsedStyle.x,"px");break;case"y":n.style.top="".concat(e.parsedStyle.y,"px");break;case"transformOrigin":var i=e.parsedStyle.transformOrigin;n.style["transform-origin"]="".concat(i[0].buildCSSText(null,null,"")," ").concat(i[1].buildCSSText(null,null,""));break;case"width":var a=e.parsedStyle.width;n.style.width=Oe(a)?"".concat(a,"px"):a.toString();break;case"height":var o=e.parsedStyle.height;n.style.height=Oe(o)?"".concat(o,"px"):o.toString();break;case"zIndex":var s=e.parsedStyle.zIndex;n.style["z-index"]="".concat(s);break;case"visibility":var u=e.parsedStyle.visibility;n.style.visibility=u;break;case"pointerEvents":var c=e.parsedStyle.pointerEvents,l=void 0===c?"auto":c;n.style.pointerEvents=l;break;case"opacity":var f=e.parsedStyle.opacity;n.style.opacity="".concat(f);break;case"fill":var d=e.parsedStyle.fill,h="";fa(d)?h=d.isNone?"transparent":e.getAttribute("fill"):Array.isArray(d)?h=e.getAttribute("fill"):la(d),n.style.background=h;break;case"stroke":var p=e.parsedStyle.stroke,v="";fa(p)?v=p.isNone?"transparent":e.getAttribute("stroke"):Array.isArray(p)?v=e.getAttribute("stroke"):la(p),n.style["border-color"]=v,n.style["border-style"]="solid";break;case"lineWidth":var g=e.parsedStyle.lineWidth;n.style["border-width"]="".concat(g||0,"px");break;case"lineDash":n.style["border-style"]="dashed";break;case"filter":var y=e.style.filter;n.style.filter=y;break;default:Me(e.style[t])||""===e.style[t]||(n.style[t]=e.style[t])}}}])}();uv.tag="HTMLRendering";var cv=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).name="html-renderer",t}return _(e,t),O(e,[{key:"init",value:function(){this.addRenderingPlugin(new uv)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(ur),lv=function(){return O((function t(e){k(this,t),this.renderingContext=e.renderingContext,this.canvasConfig=e.config}),[{key:"init",value:function(){var t=this.canvasConfig,e=t.container,n=t.canvas;if(n)this.$canvas=n,e&&n.parentElement!==e&&e.appendChild(n),this.$container=n.parentElement,this.canvasConfig.container=this.$container;else if(e&&(this.$container=Te(e)?document.getElementById(e):e,this.$container)){var r=document.createElement("canvas");this.$container.appendChild(r),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=r}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(t,e){var n=this.canvasConfig.devicePixelRatio;this.dpr=n,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*e,function(t,e,n){zo&&t.style&&(t.style.width=e+"px",t.style.height=n+"px")}(this.$canvas,t,e)),this.renderingContext.renderReasons.add(Gs.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)}},{key:"toDataURL",value:(t=er(Jn().mark((function t(){var e,n,r,i=arguments;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=i.length>0&&void 0!==i[0]?i[0]:{}).type,r=e.encoderOptions,t.abrupt("return",this.context.canvas.toDataURL(n,r));case 3:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t}(),fv=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).name="canvas-context-register",t}return _(e,t),O(e,[{key:"init",value:function(){this.context.ContextService=lv}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(ur),dv=function(t){function e(t){var n;return k(this,e),(n=N(this,e,[t])).registerPlugin(new fv),n.registerPlugin(new Wp),n.registerPlugin(new op),n.registerPlugin(new av),n.registerPlugin(new sv),n.registerPlugin(new Np),n.registerPlugin(new cv),n}return _(e,t),O(e)}(cr);const hv=function(t,e){if(t)if(fn(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(Ln(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break};var pv=Object.prototype.hasOwnProperty;const vv=function(t,e){if(null===t||!dd(t))return{};var n={};return hv(e,(function(e){pv.call(t,e)&&(n[e]=t[e])})),n};var gv=function(t){function e(t){var n;return k(this,e),(n=N(this,e,[Object.assign(Object.assign({},t),{style:Object.assign({},e.defaultStyleProps,t.style)})])).rootPointerEvent=new Ls(null),n.forwardEvents=function(t){var e=n.context.canvas,r=e.context.renderingContext.root.ownerDocument.defaultView;n.normalizeToPointerEvent(t,r).forEach((function(i){var a=n.bootstrapEvent(n.rootPointerEvent,i,r,t);lh(e.context.eventService,"mappingTable.pointerupoutside",[]),e.context.eventService.mapEvent(a)}))},n}return _(e,t),O(e,[{key:"eventService",get:function(){return this.context.canvas.context.eventService}},{key:"events",get:function(){return[bl.CLICK,bl.POINTER_DOWN,bl.POINTER_MOVE,bl.POINTER_UP,bl.POINTER_OVER,bl.POINTER_LEAVE]}},{key:"getDomElement",value:function(){return this.getShape("key").getDomElement()}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.drawKeyShape(t,e),this.drawPortShapes(t,e)}},{key:"getKeyStyle",value:function(t){var e=vv(t,["dx","dy","innerHTML","pointerEvents","cursor"]),n=e.dx,r=void 0===n?0:n,i=e.dy,a=void 0===i?0:i,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["dx","dy"]),s=g(this.getSize(t),2),u=s[0],c=s[1];return Object.assign(Object.assign({x:r,y:a},o),{width:u,height:c})}},{key:"drawKeyShape",value:function(t,e){var n=this.getKeyStyle(t),r=n.x,i=n.y,a=n.width,o=void 0===a?0:a,s=n.height,u=void 0===s?0:s,c=this.upsert("key-container",Qu,{x:r,y:i,width:o,height:u,opacity:0},e);return this.upsert("key",Wu,n,c)}},{key:"connectedCallback",value:function(){var t=this;if(this.context.canvas.getRenderer("main")instanceof dv){var e=this.getDomElement();this.events.forEach((function(n){e.addEventListener(n,t.forwardEvents)}))}}},{key:"attributeChangedCallback",value:function(t,e,n){"zIndex"===t&&e!==n&&(this.getDomElement().style.zIndex=n)}},{key:"destroy",value:function(){var t=this,n=this.getDomElement();this.events.forEach((function(e){n.removeEventListener(e,t.forwardEvents)})),Dn(e,"destroy",this,3)([])}},{key:"normalizeToPointerEvent",value:function(t,e){var n=[];if(e.isTouchEvent(t))for(var r=0;r<t.changedTouches.length;r++){var i=t.changedTouches[r];An(i.button)&&(i.button=0),An(i.buttons)&&(i.buttons=1),An(i.isPrimary)&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),An(i.width)&&(i.width=i.radiusX||1),An(i.height)&&(i.height=i.radiusY||1),An(i.tiltX)&&(i.tiltX=0),An(i.tiltY)&&(i.tiltY=0),An(i.pointerType)&&(i.pointerType="touch"),An(i.pointerId)&&(i.pointerId=i.identifier||0),An(i.pressure)&&(i.pressure=i.force||.5),An(i.twist)&&(i.twist=0),An(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=t.type,n.push(i)}else if(e.isMouseEvent(t)){var a=t;An(a.isPrimary)&&(a.isPrimary=!0),An(a.width)&&(a.width=1),An(a.height)&&(a.height=1),An(a.tiltX)&&(a.tiltX=0),An(a.tiltY)&&(a.tiltY=0),An(a.pointerType)&&(a.pointerType="mouse"),An(a.pointerId)&&(a.pointerId=1),An(a.pressure)&&(a.pressure=.5),An(a.twist)&&(a.twist=0),An(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,n.push(a)}else n.push(t);return n}},{key:"transferMouseData",value:function(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.ctrlKey=e.ctrlKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null}},{key:"bootstrapEvent",value:function(t,e,n,r){t.view=n,t.originalEvent=null,t.nativeEvent=r,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);var i=this.getViewportXY(e),a=i.x,o=i.y;t.viewport.x=a,t.viewport.y=o;var s=g(this.context.canvas.getCanvasByViewport([a,o]),2),u=s[0],c=s[1];return t.canvas.x=u,t.canvas.y=c,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=r.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t}},{key:"getViewportXY",value:function(t){var e,n,r=t.offsetX,i=t.offsetY,a=t.clientX,o=t.clientY;if(Me(r)||Me(i)){var s=this.eventService.client2Viewport({x:a,y:o});e=s.x,n=s.y}else e=r,n=i;return{x:e,y:n}}},{key:"onframe",value:function(){Dn(e,"onframe",this,3)([]);var t=this.attributes.opacity;this.getDomElement().style.opacity="".concat(t)}}])}(Hh);gv.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:"auto"};var yv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},mv=function(t){function e(t){return k(this,e),N(this,e,[mh({style:e.defaultStyleProps},t)])}return _(e,t),O(e,[{key:"getKeyStyle",value:function(t){var n=g(this.getSize(t),2),r=n[0],i=n[1],a=Dn(e,"getKeyStyle",this,3)([t]),o=a.fillOpacity,s=a.opacity,u=void 0===s?o:s,c=yv(a,["fillOpacity","opacity"]);return Object.assign(Object.assign({opacity:u},c),{width:r,height:i,x:-r/2,y:-i/2})}},{key:"getBounds",value:function(){return this.getShape("key").getBounds()}},{key:"getHaloStyle",value:function(t){if(!1===t.halo)return!1;var e=this.getShape("key").attributes,n=(e.fill,e.stroke,yv(e,["fill","stroke"]),hh(this.getGraphicStyle(t),"halo")),r=Number(n.lineWidth),i=g(yd(this.getSize(t),[r,r]),2),a=i[0],o=i[1],s=n.lineWidth,u={fill:"transparent",lineWidth:s/2,width:a-s/2,height:o-s/2,x:-(a-s/2)/2,y:-(o-s/2)/2};return Object.assign(Object.assign({},n),u)}},{key:"getIconStyle",value:function(t){var n=Dn(e,"getIconStyle",this,3)([t]),r=g(this.getSize(t),2),i=r[0],a=r[1];return!!n&&Object.assign({width:i*th,height:a*th},n)}},{key:"drawKeyShape",value:function(t,e){var n=this.upsert("key",Dh,this.getKeyStyle(t),e);return zh(this),n}},{key:"drawHaloShape",value:function(t,e){this.upsert("halo",Qu,this.getHaloStyle(t),e)}},{key:"update",value:function(t){Dn(e,"update",this,3)([t]),t&&("x"in t||"y"in t||"z"in t)&&Bh(this)}}])}(Hh);mv.defaultStyleProps={size:32};var bv=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"getKeyStyle",value:function(t){var n=g(this.getSize(t),2),r=n[0],i=n[1];return Object.assign(Object.assign({},Dn(e,"getKeyStyle",this,3)([t])),{width:r,height:i,x:-r/2,y:-i/2})}},{key:"getIconStyle",value:function(t){var n=Dn(e,"getIconStyle",this,3)([t]),r=this.getShape("key").attributes,i=r.width,a=r.height;return!!n&&Object.assign({width:i*th,height:a*th},n)}},{key:"drawKeyShape",value:function(t,e){return this.upsert("key",Qu,this.getKeyStyle(t),e)}}])}(Hh),xv=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"getInnerR",value:function(t){return t.innerR||3*this.getOuterR(t)/8}},{key:"getOuterR",value:function(t){return Math.min.apply(Math,M(this.getSize(t)))/2}},{key:"getPoints",value:function(t){return[[0,-(e=this.getOuterR(t))],[(n=this.getInnerR(t))*Math.cos(3*Math.PI/10),-n*Math.sin(3*Math.PI/10)],[e*Math.cos(Math.PI/10),-e*Math.sin(Math.PI/10)],[n*Math.cos(Math.PI/10),n*Math.sin(Math.PI/10)],[e*Math.cos(3*Math.PI/10),e*Math.sin(3*Math.PI/10)],[0,n],[-e*Math.cos(3*Math.PI/10),e*Math.sin(3*Math.PI/10)],[-n*Math.cos(Math.PI/10),n*Math.sin(Math.PI/10)],[-e*Math.cos(Math.PI/10),-e*Math.sin(Math.PI/10)],[-n*Math.cos(3*Math.PI/10),-n*Math.sin(3*Math.PI/10)]];var e,n}},{key:"getIconStyle",value:function(t){var n=Dn(e,"getIconStyle",this,3)([t]),r=2*this.getInnerR(t)*th;return!!n&&Object.assign({width:r,height:r},n)}},{key:"getPortXY",value:function(t,e){var n=e.placement,r=void 0===n?"top":n,i=this.getShape("key").getLocalBounds(),a=function(t,e){var n={};return n.top=[0,-t],n.left=[-t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],n["left-bottom"]=[-t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],n.bottom=[0,e],n["right-bottom"]=[t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],n.right=n.default=[t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],n}(this.getOuterR(t),this.getInnerR(t));return Sg(i,r,a,!1)}}])}(Uh),wv=function(t){function e(t){return k(this,e),N(this,e,[mh({style:e.defaultStyleProps},t)])}return _(e,t),O(e,[{key:"getPoints",value:function(t){var e=t.direction,n=g(this.getSize(t),2);return function(t,e,n){var r=e/2,i=t/2,a={up:[[-i,r],[i,r],[0,-r]],left:[[-i,0],[i,r],[i,-r]],right:[[-i,r],[-i,-r],[i,0]],down:[[-i,-r],[i,-r],[0,r]]};return a[n]||a.up}(n[0],n[1],e)}},{key:"getPortXY",value:function(t,e){var n=t.direction,r=e.placement,i=void 0===r?"top":r,a=this.getShape("key").getLocalBounds(),o=g(this.getSize(t),2),s=function(t,e,n){var r=e/2,i=t/2,a={};return"down"===n?(a.bottom=a.default=[0,r],a.right=[i,-r],a.left=[-i,-r]):"left"===n?(a.top=[i,-r],a.bottom=[i,r],a.left=a.default=[-i,0]):"right"===n?(a.top=[-i,-r],a.bottom=[-i,r],a.right=a.default=[i,0]):(a.left=[-i,r],a.top=a.default=[0,-r],a.right=[i,r]),a}(o[0],o[1],n);return Sg(a,i,s,!1)}},{key:"getIconStyle",value:function(t){var e=t.icon,n=t.iconText,r=t.iconSrc,i=t.direction;if(!1===e||Mh(n||r))return!1;var a=hh(this.getGraphicStyle(t),"icon"),o=this.getShape("key").getLocalBounds(),s=function(t,e){var n=t.center,r=g(uf(t),2),i=r[0],a=r[1];return["up"===e||"down"===e?n[0]:"right"===e?n[0]-i/6:n[0]+i/6,"left"===e||"right"===e?n[1]:"down"===e?n[1]-a/6:n[1]+a/6]}(o,i),u=g(s,2),c=u[0],l=u[1],f=2*function(t,e){var n=g(uf(t),2),r=n[0],i=n[1],a=g("up"===e||"down"===e?[r,i]:[i,r],2);return r=a[0],i=a[1],(Math.pow(i,2)-Math.pow(Math.sqrt(Math.pow(r/2,2)+Math.pow(i,2))-r/2,2))/(2*i)}(o,i)*th;return Object.assign({x:c,y:l,width:f,height:f},a)}}])}(Uh);wv.defaultStyleProps={size:40,direction:"up"};var kv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Ev=function(t){function e(t){var n;return k(this,e),(n=N(this,e,[mh({style:e.defaultStyleProps},t)])).type="combo",n.updateComboPosition(n.parsedAttributes),n}return _(e,t),O(e,[{key:"getKeySize",value:function(t){var e=t.collapsed,n=t.childrenNode;return 0===(void 0===n?[]:n).length?this.getEmptyKeySize(t):e?this.getCollapsedKeySize(t):this.getExpandedKeySize(t)}},{key:"getEmptyKeySize",value:function(t){var e=t.padding,n=t.collapsedSize,r=g(rf(e),4),i=r[0],a=r[1],o=r[2],s=r[3];return yd(gh(n),[s+a,i+o,0])}},{key:"getCollapsedKeySize",value:function(t){return gh(t.collapsedSize)}},{key:"getExpandedKeySize",value:function(t){var e=this.getContentBBox(t);return[of(e),sf(e),0]}},{key:"getContentBBox",value:function(t){var e=this,n=t.childrenNode,r=void 0===n?[]:n,i=t.padding,a=r.map((function(t){return e.context.element.getElement(t)})).filter(Boolean);if(0===a.length){var o=new gr,s=t.x,u=void 0===s?0:s,c=t.y,l=void 0===c?0:c,f=g(gh(t.size),2),d=f[0],h=f[1];return o.setMinMax([u-d/2,l-h/2,0],[u+d/2,l+h/2,0]),o}var p=df(a.map((function(t){return t.getBounds()})));return i?ff(p,i):p}},{key:"drawCollapsedMarkerShape",value:function(t,e){var n=this.getCollapsedMarkerStyle(t);this.upsert("collapsed-marker",Gh,n,e),zh(this)}},{key:"getCollapsedMarkerStyle",value:function(t){if(!t.collapsed||!t.collapsedMarker)return!1;var e=hh(this.getGraphicStyle(t),"collapsedMarker"),n=e.type,r=kv(e,["type"]),i=g(Dd(this.getShape("key").getLocalBounds(),"center"),2),a=i[0],o=i[1],s=Object.assign(Object.assign({},r),{x:a,y:o});if(n){var u=this.getCollapsedMarkerText(n,t);Object.assign(s,{text:u})}return s}},{key:"getCollapsedMarkerText",value:function(t,e){var n=e.childrenData,r=void 0===n?[]:n,i=this.context.model;return"descendant-count"===t?i.getDescendantsData(this.id).length.toString():"child-count"===t?r.length.toString():"node-count"===t?i.getDescendantsData(this.id).filter((function(t){return"node"===i.getElementType(Kf(t))})).length.toString():_n(t)?t(r):""}},{key:"getComboPosition",value:function(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,a=t.collapsed,o=t.childrenData;if(0===(void 0===o?[]:o).length)return[+n,+i,0];if(a){var s=this.context.model,u=s.getDescendantsData(this.id).filter((function(t){return!s.isCombo(Kf(t))}));return u.length>0&&u.some(jd)?xd(u.reduce((function(t,e){return yd(t,Rd(e))}),[0,0,0]),u.length):[+n,+i,0]}return this.getContentBBox(t).center}},{key:"getComboStyle",value:function(t){var e=g(this.getComboPosition(t),2),n=e[0],r=e[1];return{x:n,y:r,transform:[["translate",n,r]]}}},{key:"updateComboPosition",value:function(t){var e=this.getComboStyle(t);Object.assign(this.style,e);var n=e.x,r=e.y;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:n,y:r}}),Bh(this)}},{key:"render",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;Dn(e,"render",this,3)([t,n]),this.drawCollapsedMarkerShape(t,n)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Dn(e,"update",this,3)([t]),this.updateComboPosition(this.parsedAttributes)}},{key:"onframe",value:function(){Dn(e,"onframe",this,3)([]),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this)}},{key:"animate",value:function(t,n){var r=this,i=Dn(e,"animate",this,3)([this.attributes.collapsed?t:t.map((function(t){return t.x,t.y,t.z,t.transform,kv(t,["x","y","z","transform"])})),n]);return i?new Proxy(i,{set:function(t,e,n){return"currentTime"===e&&Promise.resolve().then((function(){return r.onframe()})),Reflect.set(t,e,n)}}):i}}])}(Hh);Ev.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:"center",collapsedMarkerTextBaseline:"middle",collapsedMarkerType:"child-count"};var Ov=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"drawKeyShape",value:function(t,e){return this.upsert("key",Du,this.getKeyStyle(t),e)}},{key:"getKeyStyle",value:function(t){var n=t.collapsed,r=Dn(e,"getKeyStyle",this,3)([t]),i=g(this.getKeySize(t),1)[0];return Object.assign(Object.assign(Object.assign({},r),n&&hh(r,"collapsed")),{r:i/2})}},{key:"getCollapsedKeySize",value:function(t){var e=g(gh(t.collapsedSize),2),n=e[0],r=e[1],i=Math.max(n,r)/2;return[2*i,2*i,0]}},{key:"getExpandedKeySize",value:function(t){var e=g(uf(this.getContentBBox(t)),2),n=e[0],r=e[1],i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2))/2;return[2*i,2*i,0]}},{key:"getIntersectPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Yd(t,this.getShape("key").getBounds(),e)}}])}(Ev),Sv=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"drawKeyShape",value:function(t,e){return this.upsert("key",Qu,this.getKeyStyle(t),e)}},{key:"getKeyStyle",value:function(t){var n=Dn(e,"getKeyStyle",this,3)([t]),r=g(this.getKeySize(t),2),i=r[0],a=r[1];return Object.assign(Object.assign(Object.assign({},n),t.collapsed&&hh(n,"collapsed")),{width:i,height:a,x:-i/2,y:-a/2})}}])}(Ev);const Mv=function(t,e){if(!dl(t))return t;for(var n=[],r=0;r<t.length;r++){var i=t[r];e(i,r)&&n.push(i)}return n},Tv=function(t,e){return void 0===e&&(e=[]),Mv(t,(function(t){return!function(t,e){return!!dl(t)&&t.indexOf(e)>-1}(e,t)}))};var Av={padding:10};function Pv(t,e,n,r,i,a){for(var o,s,u=Object.assign(Av,a).padding,c=cf(n,u),l=cf(r,u),f=[t].concat(M(i),[e]),d=null,h=[],p=0,v=f.length;p<v-1;p++){var g=p+1,y=f[p],m=f[g],b=Gd(o=y,s=m)||function(t,e){return t[0]===e[0]}(o,s),x=null;if(0===p)if(g===v-1)if(c.intersects(l))x=Fv(y,m,c,l);else if(vf(y,c)||vf(m,l))b||(x=Iv(y,m,c,l));else{var w=yf(y,c),k=yf(m,l);(x=Rv(w,k,_v(w,k))).points.unshift(w),x.points.push(k)}else hf(m,c)?x=Fv(y,m,c,cf(m,u),d):b||(x=jv(y,m,c));else g===v-1?hf(y,l)?x=Fv(y,m,cf(y,u),l,d):b||(x=Dv(y,m,l,d)):b||(x=Rv(y,m,d));x?(h.push.apply(h,M(x.points)),d=x.direction):d=_v(y,m),g<v-1&&h.push(m)}return h.map(Ad)}var Nv={N:"S",S:"N",W:"E",E:"W"},Cv={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function _v(t,e){var n=g(t,2),r=n[0],i=n[1],a=g(e,2),o=a[0],s=a[1];return r===o?i>s?"N":"S":i===s?r>o?"W":"E":null}function Lv(t,e){return"N"===e||"S"===e?sf(t):of(t)}function Rv(t,e,n){var r=[t[0],e[1]],i=[e[0],t[1]],a=_v(t,r),o=_v(t,i),s=n?Nv[n]:null,u=a===n||a!==s&&o!==n?r:i;return{points:[u],direction:_v(u,e)}}function jv(t,e,n){if(vf(t,n)){var r=zv(t,e,n);return{points:[r],direction:_v(r,e)}}var i=yf(t,n),a=["left","right"].includes(gf(t,n))?[e[0],i[1]]:[i[0],e[1]];return{points:[a],direction:_v(a,e)}}function Dv(t,e,n,r){var i=vf(e,n)?e:yf(e,n),a=[[i[0],t[1]],[t[0],i[1]]],o=a.filter((function(t){return function(t,e){return!hf(t,e)}(t,n)&&!pf(t,n,!0)})),s=o.filter((function(e){return _v(e,t)!==r}));if(s.length>0){var u=s.find((function(e){return _v(t,e)===r}))||s[0];return{points:[u],direction:_v(u,e)}}var c=Bd(e,Tv(a,o)[0],Lv(n,r)/2);return{points:[zv(c,t,n),c],direction:_v(c,e)}}function Iv(t,e,n,r){var i=jv(t,e,n),a=Pd(i.points[0]);if(hf(a,r)){var o=Pd((i=jv(e,t,r)).points[0]);if(hf(o,n)){var s=Bd(t,a,Lv(n,_v(t,a))/2),u=Bd(e,o,Lv(r,_v(e,o))/2),c=[(s[0]+u[0])/2,(s[1]+u[1])/2],l=jv(t,c,n),f=Dv(c,e,r,l.direction);i.points=[l.points[0],f.points[0]],i.direction=f.direction}}return i}function Fv(t,e,n,r,i){var a,o=df([n,r]),s=kd(e,o.center)>kd(t,o.center),u=g(s?[e,t]:[t,e],2),c=u[0],l=u[1],f=sf(o)+of(o);if(i){var d=[c[0]+f*Math.cos(Cv[i]),c[1]+f*Math.sin(Cv[i])];a=Bd(yf(d,o),d,.01)}else a=Bd(yf(c,o),c,-.01);var h=zv(a,l,o),p=[zd(a,2),zd(h,2)];if(pl(zd(a),zd(h))){var v=Sd(md(a,c),[1,0,0])+Math.PI/2;p=[a,zv(a,h=zd(Bd(yf(h=[l[0]+f*Math.cos(v),l[1]+f*Math.sin(v),0],o),l,-.01),2),o),h]}return{points:s?p.reverse():p,direction:_v(s?a:h,e)}}function zv(t,e,n){var r=[t[0],e[1]];return hf(r,n)&&(r=[e[0],t[1]]),r}function Bv(t,e,n,r,i){var a="number"==typeof e?e:.5;"start"===e&&(a=0),"end"===e&&(a=.99);var o=Id(t.getPoint(a)),s=Id(t.getPoint(a+.01)),u="start"===e?"left":"end"===e?"right":"center";if(Gd(o,s)||!n){var c=g(Gv(t,a,r,i),2);return{transform:[["translate",c[0],c[1]]],textAlign:u}}var l=Math.atan2(s[1]-o[1],s[0]-o[0]);s[0]<o[0]&&(u="center"===u?u:"left"===u?"right":"left",r*=-1,l+=Math.PI);var f=g(Gv(t,a,r,i,l),2);return{textAlign:u,transform:[["translate",f[0],f[1]],["rotate",l/Math.PI*180]]}}function Gv(t,e,n,r,i){var a=g(Id(t.getPoint(e)),2),o=a[0],s=a[1],u=n,c=r;return i&&(u=n*Math.cos(i)-r*Math.sin(i),c=n*Math.sin(i)+r*Math.cos(i)),[o+u,s+c]}function Wv(t,e,n,r){if(pl(t,e))return t;var i=md(e,t),a=[t[0]+n*i[0],t[1]+n*i[1]],o=Od(Md(i,!1));return a[0]+=r*o[0],a[1]+=r*o[1],a}function Vv(t,e,n){return[["M",t[0],t[1]],["C",n[0][0],n[0][1],n[1][0],n[1][1],e[0],e[1]]]}function Hv(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.length-1,i=t[0],a=t[r],o=t.slice(1,r),s=[["M",i[0],i[1]]];return o.forEach((function(t,n){var r=o[n-1]||i,u=o[n+1]||a;if(!Wd(r,t,u)&&e){var c=function(t,e,n,r){var i=Ed(t,e),a=Ed(n,e),o=Math.min(r,Math.min(i,a)/2);return[[e[0]-o/i*(e[0]-t[0]),e[1]-o/i*(e[1]-t[1])],[e[0]-o/a*(e[0]-n[0]),e[1]-o/a*(e[1]-n[1])]]}(r,t,u,e),l=g(c,2),f=l[0],d=l[1];s.push(["L",f[0],f[1]],["Q",t[0],t[1],d[0],d[1]],["L",d[0],d[1]])}else s.push(["L",t[0],t[1]])})),s.push(["L",a[0],a[1]]),n&&s.push(["Z"]),s}function Yv(t,e,n,r,i){var a=cf(t),o=t.getCenter(),s=r&&Ag(r),u=i&&Ag(i);if(!s||!u){var c=function(t){var e=Math.PI/2,n=sf(t)/2,r=of(t)/2,i=Math.atan2(n,r)/2,a=Math.atan2(r,n)/2;return{top:[-e-a,-e+a],"top-right":[-e+a,-i],"right-top":[-e+a,-i],right:[-i,i],"bottom-right":[i,e-a],"right-bottom":[i,e-a],bottom:[e-a,e+a],"bottom-left":[e+a,Math.PI-i],"left-bottom":[e+a,Math.PI-i],left:[Math.PI-i,Math.PI+i],"top-left":[Math.PI+i,-e-a],"left-top":[Math.PI+i,-e-a]}}(a),l=c[e][0],f=c[e][1],d=g(uf(a),2),h=d[0],p=d[1],v=Math.max(h,p),y=yd(o,[v*Math.cos(l),v*Math.sin(l),0]),m=yd(o,[v*Math.cos(f),v*Math.sin(f),0]);if(s=_g(t,y),u=_g(t,m),!n){var b=[u,s];s=b[0],u=b[1]}}return[s,u]}function Uv(t,e){var n=new Set,r=new Set,i=new Set;return t.forEach((function(a){e(a).forEach((function(e){n.add(e),t.includes(e.source)&&t.includes(e.target)?r.add(e):i.add(e)}))})),{edges:Array.from(n),internal:Array.from(r),external:Array.from(i)}}function qv(t,e){for(var n=[],r=t;r;){n.push(r);var i=e(Kf(r));if(!i)break;r=i}if(n.some((function(t){var e;return null===(e=t.style)||void 0===e?void 0:e.collapsed}))){var a=n.reverse().findIndex(uh);return n[a]||n.at(-1)}return t}var Xv=function(t,e){var n=Math.max(t,e)/2;return[["M",-t/2,0],["A",n,n,0,1,0,2*n-t/2,0],["A",n,n,0,1,0,-t/2,0],["Z"]]},Kv=function(t,e){return[["M",-t/2,0],["L",t/2,-e/2],["L",t/2,e/2],["Z"]]},$v=function(t,e){return[["M",-t/2,0],["L",0,-e/2],["L",t/2,0],["L",0,e/2],["Z"]]},Zv=function(t,e){return[["M",-t/2,0],["L",t/2,-e/2],["L",4*t/5-t/2,0],["L",t/2,e/2],["Z"]]},Qv=function(t,e){return[["M",-t/2,-e/2],["L",t/2,-e/2],["L",t/2,e/2],["L",-t/2,e/2],["Z"]]},Jv=function(t,e){var n=t/2,r=t/7,i=t-r;return[["M",-n,0],["L",0,-e/2],["L",0,e/2],["Z"],["M",i-n,-e/2],["L",i+r-n,-e/2],["L",i+r-n,e/2],["L",i-n,e/2],["Z"]]},tg=function(t,e){return[["M",t/2,-e/2],["L",-t/2,0],["L",t/2,0],["L",-t/2,0],["L",t/2,e/2]]},eg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},ng=function(t){function n(t){var e;return k(this,n),(e=N(this,n,[mh({style:n.defaultStyleProps},t)])).type="edge",e}return _(n,t),O(n,[{key:"sourceNode",get:function(){var t=this.parsedAttributes.sourceNode;return this.context.element.getElement(t)}},{key:"targetNode",get:function(){var t=this.parsedAttributes.targetNode;return this.context.element.getElement(t)}},{key:"getKeyStyle",value:function(t){var e,n,r=this.getGraphicStyle(t),i=r.loop,a=eg(r,["loop"]),o=this.sourceNode,s=this.targetNode,u={d:i&&(n=s,(e=o)&&n&&e===n)?this.getLoopPath(t):this.getKeyPath(t)};return qu.PARSED_STYLE_LIST.forEach((function(t){t in a&&(u[t]=a[t])})),u}},{key:"getLoopPath",value:function(t){var e=t.sourcePort,n=t.targetPort,r=this.sourceNode,i=cf(r),a=Math.max(of(i),sf(i)),o=hh(this.getGraphicStyle(t),"loop"),s=o.placement,u=o.clockwise,c=o.dist;return function(t,e,n,r,i,a){var o=t.getPorts()[i||a],s=t.getPorts()[a||i],u=g(Yv(t,e,n,o,s),2),c=u[0],l=u[1],f=function(t,e,n,r){var i=t.getCenter();if(pl(e,n)){var a=md(e,i),o=[r*Math.sign(a[0])||r/2,r*Math.sign(a[1])||-r/2,0];return[yd(e,o),yd(n,bd(o,[1,-1,1]))]}return[Bd(i,e,kd(i,e)+r),Bd(i,n,kd(i,n)+r)]}(t,c,l,r);return o&&(c=Cg(o,f[0])),s&&(l=Cg(s,f.at(-1))),Vv(c,l,f)}(r,s,u,void 0===c?a:c,e,n)}},{key:"getEndpoints",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=t.sourcePort,i=t.targetPort,a=this.sourceNode,o=this.targetNode,s=function(t,e,n,r){return[Pg(t,e,n,r),Pg(e,t,r,n)]}(a,o,r,i),u=g(s,2),c=u[0],l=u[1];if(!e)return[c?Ag(c):a.getCenter(),l?Ag(l):o.getCenter()];var f="function"==typeof n?n():n;return[Ng(c||a,f[0]||l||o),Ng(l||o,f[f.length-1]||c||a)]}},{key:"getHaloStyle",value:function(t){if(!1===t.halo)return!1;var e=this.getKeyStyle(t),n=hh(this.getGraphicStyle(t),"halo");return Object.assign(Object.assign({},e),n)}},{key:"getLabelStyle",value:function(t){if(!1===t.label||!t.labelText)return!1;var e=hh(this.getGraphicStyle(t),"label"),n=e.placement,r=e.offsetX,i=e.offsetY,a=e.autoRotate,o=e.maxWidth,s=eg(e,["placement","offsetX","offsetY","autoRotate","maxWidth"]),u=Bv(this.shapeMap.key,n,a,r,i),c=this.shapeMap.key.getLocalBounds(),l=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return wh(kd(t[0],t[1])*n,e)}([c.min,c.max],o);return Object.assign({wordWrapWidth:l},u,s)}},{key:"getBadgeStyle",value:function(t){if(!1===t.badge||!t.badgeText)return!1;var e=hh(t,"badge"),n=e.offsetX,r=e.offsetY,i=e.placement,a=eg(e,["offsetX","offsetY","placement"]);return Object.assign(a,function(t,e,n,r,i){var a,o,s=2*(null===(a=t.badge)||void 0===a?void 0:a.getGeometryBounds().halfExtents[0])||0,u=2*(null===(o=t.label)||void 0===o?void 0:o.getGeometryBounds().halfExtents[0])||0;return Bv(t.key,n,!0,(u?(u/2+s/2)*("suffix"===e?1:-1):0)+r,i)}(this.shapeMap,i,t.labelPlacement,n,r))}},{key:"drawArrow",value:function(t,e){var n,r="start"===e,i=t["start"===e?"startArrow":"endArrow"],a=this.shapeMap.key;if(i){var o=this.getArrowStyle(t,r),s=g(r?["markerStart","markerStartOffset","startArrowOffset"]:["markerEnd","markerEndOffset","endArrowOffset"],3),u=s[0],c=s[1],l=s[2],f=a.parsedStyle[u];if(f)f.attr(o);else{var d=new(o.src?Vu:qu)({style:o});a.style[u]=d}a.style[c]=t[l]||o.width/2+ +o.lineWidth}else{var h=r?"markerStart":"markerEnd";null===(n=a.style[h])||void 0===n||n.destroy(),a.style[h]=null}}},{key:"getArrowStyle",value:function(t,n){var r=this.getShape("key").attributes,i=n?"startArrow":"endArrow",a=hh(this.getGraphicStyle(t),i),o=a.size,s=a.type,u=eg(a,["size","type"]),c=gh(function(t,e){return e||(t<4?10:4===t?12:2.5*t)}(r.lineWidth,o)),l=g(c,2),f=l[0],d=l[1],h=(_n(s)?s:e[s]||Kv)(f,d);return Object.assign(vv(r,["stroke","strokeOpacity","fillOpacity"]),{width:f,height:d},Object.assign({},h&&{d:h,fill:"simple"===s?"":r.stroke}),u)}},{key:"drawLabelShape",value:function(t,e){var n=this.getLabelStyle(t);this.upsert("label",Nh,n,e)}},{key:"drawHaloShape",value:function(t,e){var n=this.getHaloStyle(t);this.upsert("halo",qu,n,e)}},{key:"drawBadgeShape",value:function(t,e){var n=this.getBadgeStyle(t);this.upsert("badge",Ch,n,e)}},{key:"drawSourceArrow",value:function(t){this.drawArrow(t,"start")}},{key:"drawTargetArrow",value:function(t){this.drawArrow(t,"end")}},{key:"drawKeyShape",value:function(t,e){var n=this.getKeyStyle(t);return this.upsert("key",qu,n,e)}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.drawKeyShape(t,e),this.getShape("key")&&(this.drawSourceArrow(t),this.drawTargetArrow(t),this.drawLabelShape(t,e),this.drawHaloShape(t,e),this.drawBadgeShape(t,e))}},{key:"onframe",value:function(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this)}},{key:"animate",value:function(t,e){var r=this,i=Dn(n,"animate",this,3)([t,e]);return i?new Proxy(i,{set:function(t,e,n){return"currentTime"===e&&Promise.resolve().then((function(){return r.onframe()})),Reflect.set(t,e,n)}}):i}}])}(Wh);ng.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:"suffix",isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:"80%",labelOffsetX:4,labelOffsetY:0,labelPlacement:"center",labelTextBaseline:"middle",labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:"none",haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:"round",startArrowLineWidth:1,startArrowTransformOrigin:"center",startArrowType:"vee",endArrow:!1,endArrowLineDash:0,endArrowLineJoin:"round",endArrowLineWidth:1,endArrowTransformOrigin:"center",endArrowType:"vee",loopPlacement:"top",loopClockwise:!0};var rg=function(t){function e(t){return k(this,e),N(this,e,[mh({style:e.defaultStyleProps},t)])}return _(e,t),O(e,[{key:"getKeyPath",value:function(t){var e=g(this.getEndpoints(t),2),n=e[0],r=e[1],i=t.controlPoints,a=t.curvePosition,o=t.curveOffset,s=this.getControlPoints(n,r,function(t){return Oe(t)?[t,1-t]:t}(a),function(t){return Oe(t)?[t,-t]:t}(o),i);return Vv(n,r,s)}},{key:"getControlPoints",value:function(t,e,n,r,i){return 2===(null==i?void 0:i.length)?i:[Wv(t,e,n[0],r[0]),Wv(t,e,n[1],r[1])]}}])}(ng);rg.defaultStyleProps={curvePosition:.5,curveOffset:20};var ig=function(t){function e(t){return k(this,e),N(this,e,[mh({style:e.defaultStyleProps},t)])}return _(e,t),O(e,[{key:"getControlPoints",value:function(t,e,n,r){var i=e[0]-t[0];return[[t[0]+i*n[0]+r[0],t[1]],[e[0]-i*n[1]+r[1],e[1]]]}}])}(rg);ig.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};var ag=function(t){function e(t){return k(this,e),N(this,e,[mh({style:e.defaultStyleProps},t)])}return _(e,t),O(e,[{key:"ref",get:function(){return this.context.model.getRootsData()[0]}},{key:"getEndpoints",value:function(t){if(this.sourceNode.id===this.ref.id)return Dn(e,"getEndpoints",this,3)([t]);var n=Rd(this.ref);return[this.sourceNode.getIntersectPoint(n,!0),this.targetNode.getIntersectPoint(n)]}},{key:"toRadialCoordinate",value:function(t){var e=Rd(this.ref);return[kd(t,e),Nd(md(t,e))]}},{key:"getControlPoints",value:function(t,e,n,r){var i=g(this.toRadialCoordinate(t),2),a=i[0],o=i[1],s=g(this.toRadialCoordinate(e),1)[0]-a;return[[t[0]+(s*n[0]+r[0])*Math.cos(o),t[1]+(s*n[0]+r[0])*Math.sin(o)],[e[0]-(s*n[1]-r[0])*Math.cos(o),e[1]-(s*n[1]-r[0])*Math.sin(o)]]}}])}(rg);ag.defaultStyleProps={curvePosition:.5,curveOffset:20};var og=function(t){function e(t){return k(this,e),N(this,e,[mh({style:e.defaultStyleProps},t)])}return _(e,t),O(e,[{key:"getControlPoints",value:function(t,e,n,r){var i=e[1]-t[1];return[[t[0],t[1]+i*n[0]+r[0]],[e[0],e[1]-i*n[1]+r[1]]]}}])}(rg);og.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};var sg=function(t){function e(t){return k(this,e),N(this,e,[mh({style:e.defaultStyleProps},t)])}return _(e,t),O(e,[{key:"getKeyPath",value:function(t){var e=g(this.getEndpoints(t),2),n=e[0],r=e[1];return[["M",n[0],n[1]],["L",r[0],r[1]]]}}])}(ng);sg.defaultStyleProps={};var ug={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:Ed},cg=function(t){return"".concat(Math.round(t[0]),"|||").concat(Math.round(t[1]))};function lg(t,e){var n=function(t){return Math.round(t/e)};return Oe(t)?n(t):t.map(n)}function fg(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n||r?Math.atan2(r,n):0}function dg(t,e,n,r){var i,a,o,s=fg(t,e);return i=fg(n[cg(t)]||r,t),a=s,(o=Math.abs(i-a))>Math.PI?2*Math.PI-o:o}function hg(t,e,n){return Math.min.apply(Math,M(e.map((function(e){return n(t,e)}))))}var pg=function(t,e,n,r){if(!e)return[t];var i=r.directionMap,a=r.offset,o=ff(e.getRenderBounds(),a),s=Object.keys(i).reduce((function(e,r){if(n.includes(r))for(var a=i[r],s=g(uf(o),2),u=s[0],c=s[1],l=[t[0]+a.stepX*u,t[1]+a.stepY*c],f=(v=void 0,y=void 0,m=void 0,b=void 0,x=void 0,w=void 0,k=void 0,E=void 0,O=void 0,S=void 0,v=g((p=o).min,2),y=v[0],m=v[1],b=g(p.max,2),x=b[0],w=b[1],[[k=[y,w],E=[x,w]],[E,O=[x,m]],[O,S=[y,m]],[S,k]]),d=0;d<f.length;d++){var h=_d([t,l],f[d]);h&&pf(h,o)&&e.push(h)}var p,v,y,m,b,x,w,k,E,O,S;return e}),[]);return hf(t,o)||s.push(t),s.map((function(t){return lg(t,r.gridSize)}))},vg=function(t,e,n,r,i,a,o){var s=[],u=[a[0]===r[0]?r[0]:t[0]*o,a[1]===r[1]?r[1]:t[1]*o];s.unshift(u);for(var c=t,l=e[cg(c)];l;){var f=l,d=c;dg(f,d,e,n)&&(u=[f[0]===d[0]?u[0]:f[0]*o,f[1]===d[1]?u[1]:f[1]*o],s.unshift(u)),l=e[cg(f)],c=f}var h=i.map((function(t){return[t[0]*o,t[1]*o]})),p=function(t,e,n){for(var r=t[0],i=n(t[0],e),a=0;a<t.length;a++){var o=t[a],s=n(o,e);s<i&&(r=o,i=s)}return r}(h,u,Ed);return s.unshift(p),s};var gg=function(){return O((function t(){k(this,t),this.arr=[],this.map={},this.arr=[],this.map={}}),[{key:"_innerAdd",value:function(t,e){for(var n=0,r=e-1;r-n>1;){var i=Math.floor((n+r)/2);if(this.arr[i].value>t.value)r=i;else{if(!(this.arr[i].value<t.value))return this.arr.splice(i,0,t),void(this.map[t.id]=!0);n=i}}this.arr.splice(r,0,t),this.map[t.id]=!0}},{key:"add",value:function(t){delete this.map[t.id];var e=this.arr.length;if(!e||this.arr[e-1].value<t.value)return this.arr.push(t),void(this.map[t.id]=!0);this._innerAdd(t,e)}},{key:"remove",value:function(t){this.map[t]&&delete this.map[t]}},{key:"_clearAndGetMinId",value:function(){for(var t,e=this.arr.length-1;e>=0;e--)this.map[this.arr[e].id]?t=this.arr[e].id:this.arr.splice(e,1);return t}},{key:"_findFirstId",value:function(){for(;this.arr.length;){var t=this.arr.shift();if(this.map[t.id])return t.id}}},{key:"minId",value:function(t){return t?this._clearAndGetMinId():this._findFirstId()}}])}(),yg=function(t){function e(t){return k(this,e),N(this,e,[mh({style:e.defaultStyleProps},t)])}return _(e,t),O(e,[{key:"getControlPoints",value:function(t){var e=t.router,n=this.sourceNode,r=this.targetNode,i=g(this.getEndpoints(t,!1),2),a=i[0],o=i[1],s=[];return e?"shortest-path"===e.type?(s=function(t,e,n,r){var i=Ad(t.getCenter()),a=Ad(e.getCenter()),o=Object.assign(ug,r),s=o.gridSize,u=function(t,e){var n=e.offset,r=e.gridSize,i={};return t.forEach((function(t){if(t&&!t.destroyed&&t.isVisible())for(var e=ff(t.getRenderBounds(),n),a=lg(e.min[0],r);a<=lg(e.max[0],r);a+=1)for(var o=lg(e.min[1],r);o<=lg(e.max[1],r);o+=1)i["".concat(a,"|||").concat(o)]=!0})),i}(o.enableObstacleAvoidance?n:[t,e],o),c=lg(i,s),l=lg(a,s),f=pg(i,t,o.startDirections,o),d=pg(a,e,o.endDirections,o);f.forEach((function(t){return delete u[cg(t)]})),d.forEach((function(t){return delete u[cg(t)]}));for(var h={},p={},v={},y={},m={},b=new gg,x=0;x<f.length;x++){var w=f[x],k=cg(w);h[k]=w,y[k]=0,m[k]=hg(w,d,o.distFunc),b.add({id:k,value:m[k]})}for(var E,O=d.map((function(t){return cg(t)})),S=o.maximumLoops,M=1/0,T=0,A=Object.entries(h);T<A.length;T++){var P=g(A[T],2),N=P[0],C=P[1];m[N]<=M&&(M=m[N],E=C)}for(;Object.keys(h).length>0&&S>0;){var _=b.minId(!1);if(!_)break;E=h[_];var L=cg(E);if(O.includes(L))return vg(E,v,c,a,f,l,s);delete h[L],b.remove(L),p[L]=!0;for(var R=0,j=Object.values(o.directionMap);R<j.length;R++){var D=j[R],I=yd(E,[D.stepX,D.stepY]),F=cg(I);if(!p[F]){var z=dg(E,I,v,c);if(!(z>o.maxAllowedDirectionChange||u[F])){h[F]||(h[F]=I);var B=o.penalties[z],G=o.distFunc(E,I)+(isNaN(B)?s:B),W=y[L]+G,V=y[F];V&&W>=V||(v[F]=E,y[F]=W,m[F]=W+hg(I,d,o.distFunc),b.add({id:F,value:m[F]}))}}}S-=1}return[]}(n,r,this.context.element.getNodes(),e)).length||(s=Pv(a,o,n,r,t.controlPoints,{padding:e.offset})):"orth"===e.type&&(s=Pv(a,o,n,r,t.controlPoints,e)):s=t.controlPoints,s}},{key:"getPoints",value:function(t){var e=this.getControlPoints(t),n=g(this.getEndpoints(t,!0,e),2),r=n[0],i=n[1];return[r].concat(M(e),[i])}},{key:"getKeyPath",value:function(t){return Hv(this.getPoints(t),t.radius)}},{key:"getLoopPath",value:function(t){var e=t.sourcePort,n=t.targetPort,r=t.radius,i=this.sourceNode,a=cf(i),o=Math.max(of(a),sf(a))/4,s=hh(this.getGraphicStyle(t),"loop"),u=s.placement,c=s.clockwise,l=s.dist;return function(t,e,n,r,i,a,o){var s=Mg(t),u=s[a||o],c=s[o||a],l=g(Yv(t,n,r,u,c),2),f=l[0],d=l[1],h=function(t,e,n,r){var i=[],a=cf(t);if(pl(e,n))switch(gf(e,a)){case"left":i.push([e[0]-r,e[1]]),i.push([e[0]-r,e[1]+r]),i.push([e[0],e[1]+r]);break;case"right":i.push([e[0]+r,e[1]]),i.push([e[0]+r,e[1]+r]),i.push([e[0],e[1]+r]);break;case"top":i.push([e[0],e[1]-r]),i.push([e[0]+r,e[1]-r]),i.push([e[0]+r,e[1]]);break;case"bottom":i.push([e[0],e[1]+r]),i.push([e[0]+r,e[1]+r]),i.push([e[0]+r,e[1]])}else{var o=gf(e,a),s=gf(n,a);if(o===s){var u,c;switch(o){case"left":u=Math.min(e[0],n[0])-r,i.push([u,e[1]]),i.push([u,n[1]]);break;case"right":u=Math.max(e[0],n[0])+r,i.push([u,e[1]]),i.push([u,n[1]]);break;case"top":c=Math.min(e[1],n[1])-r,i.push([e[0],c]),i.push([n[0],c]);break;case"bottom":c=Math.max(e[1],n[1])+r,i.push([e[0],c]),i.push([n[0],c])}}else{var l=function(t,e){return{left:[e[0]-r,e[1]],right:[e[0]+r,e[1]],top:[e[0],e[1]-r],bottom:[e[0],e[1]+r]}[t]},f=l(o,e),d=l(s,n),h=zv(f,d,a);i.push(f,h,d)}}return i}(t,f,d,i);return u&&(f=Cg(u,h[0])),c&&(d=Cg(c,h.at(-1))),Hv([f].concat(M(h),[d]),e)}(i,r,u,c,void 0===l?o:l,e,n)}}])}(ng);yg.defaultStyleProps={radius:0,controlPoints:[],router:!1};var mg=function(t){function e(t){return k(this,e),N(this,e,[mh({style:e.defaultStyleProps},t)])}return _(e,t),O(e,[{key:"getKeyPath",value:function(t){var e=t.curvePosition,n=t.curveOffset,r=g(this.getEndpoints(t),2),i=r[0],a=r[1];return function(t,e,n){return[["M",t[0],t[1]],["Q",n[0],n[1],e[0],e[1]]]}(i,a,t.controlPoint||Wv(i,a,e,n))}}])}(ng);mg.defaultStyleProps={curvePosition:.5,curveOffset:30};var bg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function xg(t){return t instanceof Hh&&"node"===t.type}function wg(t){return t instanceof ng}function kg(t){return t instanceof Ev}function Eg(t){return xg(t)||wg(t)||kg(t)}var Og={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],"left-top":[0,0],"top-left":[0,0],"left-bottom":[0,1],"bottom-left":[0,1],"right-top":[1,0],"top-right":[1,0],"right-bottom":[1,1],"bottom-right":[1,1],default:[.5,.5]};function Sg(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Og,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=[.5,.5],a=Te(e)?ch(n,e.toLocaleLowerCase(),i):e;if(!r&&Te(e))return a;var o=g(a||i,2),s=o[0],u=o[1];return[t.min[0]+of(t)*s,t.min[1]+sf(t)*u]}function Mg(t){if(!t)return{};var e=t.getPorts();return(t.attributes.ports||[]).forEach((function(n,r){var i,a=n.key,o=n.placement;Tg(n)&&(e[i=a||r]||(e[i]=Dd(t.getShape("key").getBounds(),o)))})),e}function Tg(t){var e=t.r;return!e||0===Number(e)}function Ag(t){return ef(t)?t:t.getPosition()}function Pg(t,e,n,r){var i=Mg(t);if(n)return i[n];var a=Object.values(i);if(0!==a.length){var o,s,u,c,l=a.map((function(t){return Ag(t)})),f=function(t,e){var n=Mg(t);if(e)return[Ag(n[e])];var r=Object.values(n);return r.length>0?r.map((function(t){return Ag(t)})):[t.getCenter()]}(e,r),d=g((s=f,u=1/0,c=[(o=l)[0],s[0]],o.forEach((function(t){s.forEach((function(e){var n=kd(t,e);n<u&&(u=n,c=[t,e])}))})),c),1)[0];return a.find((function(t){return Ag(t)===d}))}}function Ng(t,e){return kg(t)||xg(t)?_g(t,e):Cg(t,e)}function Cg(t,e){return t&&e?ef(t)?t:t.attributes.linkToCenter?t.getPosition():Yd(ef(e)?e:xg(e)?e.getCenter():e.getPosition(),t.getBounds()):[0,0,0]}function _g(t,e){if(!t||!e)return[0,0,0];var n=ef(e)?e:xg(e)?e.getCenter():e.getPosition();return t.getIntersectPoint(n)||t.getCenter()}function Lg(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=e.split("-"),o=g(Dd(t,e),2),s=o[0],u=o[1],c=g(i?["bottom","top"]:["top","bottom"],2),l=c[0],f=c[1];return{transform:[["translate",s+n,u+r]],textBaseline:a.includes("top")?f:a.includes("bottom")?l:"middle",textAlign:a.includes("left")?"right":a.includes("right")?"left":"center"}}function Rg(t,e){"update"in t?t.update(e):t.attr(e)}function jg(t){return ch(t,"__to_be_destroyed__",!1)}var Dg=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).onCollapseExpand=function(t){return e=r,n=void 0,i=void 0,a=Jn().mark((function e(){var n,r,i,a,o,s,u,c,l,f,d;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validate(t)){e.next=2;break}return e.abrupt("return");case 2:if(Eg(n=t.target)){e.next=5;break}return e.abrupt("return");case 5:if(r=n.id,i=this.context,a=i.model,o=i.graph,s=a.getElementDataById(r)){e.next=10;break}return e.abrupt("return",!1);case 10:if(u=this.options,c=u.onCollapse,l=u.onExpand,f=u.animation,d=u.align,!uh(s)){e.next=17;break}return e.next=14,o.expandElement(r,{animation:f,align:d});case 14:null==l||l(r),e.next=20;break;case 17:return e.next=19,o.collapseElement(r,{animation:f,align:d});case 19:null==c||c(r);case 20:case"end":return e.stop()}}),e,this)})),new(i||(i=Promise))((function(t,r){function o(t){try{u(a.next(t))}catch(t){r(t)}}function s(t){try{u(a.throw(t))}catch(t){r(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(e.value).then(o,s)}u((a=a.apply(e,n||[])).next())}));var e,n,i,a},r.bindEvents(),r}return _(e,t),O(e,[{key:"update",value:function(t){this.unbindEvents(),Dn(e,"update",this,3)([t]),this.bindEvents()}},{key:"bindEvents",value:function(){var t=this.context.graph,e=this.options.trigger;t.on("node:".concat(e),this.onCollapseExpand),t.on("combo:".concat(e),this.onCollapseExpand)}},{key:"unbindEvents",value:function(){var t=this.context.graph,e=this.options.trigger;t.off("node:".concat(e),this.onCollapseExpand),t.off("combo:".concat(e),this.onCollapseExpand)}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return _n(e)?e(t):!!e}},{key:"destroy",value:function(){this.unbindEvents(),Dn(e,"destroy",this,3)([])}}])}(ld);Dg.defaultOptions={enable:!0,animation:!0,trigger:bl.DBLCLICK,align:!0};var Ig={},Fg=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},zg="g6-create-edge-assist-node-id",Bg=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).drop=function(t){return Fg(r,void 0,void 0,Jn().mark((function e(){var n;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.targetType,!["combo","node"].includes(n)||!this.source){e.next=6;break}return e.next=4,this.handleCreateEdge(t);case 4:e.next=8;break;case 6:return e.next=8,this.cancelEdge();case 8:case"end":return e.stop()}}),e,this)})))},r.handleCreateEdge=function(t){return Fg(r,void 0,void 0,Jn().mark((function e(){var n,r,i,a,o,s,u,c,l,f;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validate(t)){e.next=2;break}return e.abrupt("return");case 2:if(a=this.context,o=a.graph,s=a.canvas,u=a.batch,c=a.element,l=this.options.style,!this.source){e.next=9;break}return this.createEdge(t),e.next=8,this.cancelEdge();case 8:return e.abrupt("return");case 9:return u.startBatch(),s.setCursor("crosshair"),this.source=this.getSelectedNodeIDs([t.target.id])[0],f=o.getElementData(this.source),o.addNodeData([{id:zg,style:{visibility:"hidden",ports:[{key:"port-1",placement:[.5,.5]}],x:null===(n=f.style)||void 0===n?void 0:n.x,y:null===(r=f.style)||void 0===r?void 0:r.y}}]),o.addEdgeData([{id:"g6-create-edge-assist-edge-id",source:this.source,target:zg,style:Object.assign({pointerEvents:"none"},l)}]),e.next=17,null===(i=c.draw({animation:!1}))||void 0===i?void 0:i.finished;case 17:case"end":return e.stop()}}),e,this)})))},r.updateAssistEdge=function(t){return Fg(r,void 0,void 0,Jn().mark((function e(){var n,r,i,a;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.source){e.next=2;break}return e.abrupt("return");case 2:return r=this.context,i=r.model,a=r.element,i.translateNodeTo(zg,[t.canvas.x,t.canvas.y]),e.next=6,null===(n=a.draw({animation:!1,silence:!0}))||void 0===n?void 0:n.finished;case 6:case"end":return e.stop()}}),e,this)})))},r.createEdge=function(t){var e,n,i=r.context.graph,a=r.options,o=a.style,s=a.onFinish,u=a.onCreate;if(void 0!==(null===(e=t.target)||void 0===e?void 0:e.id)&&void 0!==r.source){var c=null===(n=r.getSelectedNodeIDs([t.target.id]))||void 0===n?void 0:n[0],l="".concat(r.source,"-").concat(c,"-").concat(function(t){return Ig[t=t||"g"]?Ig[t]+=1:Ig[t]=1,t+Ig[t]}()),f=u({id:l,source:r.source,target:c,style:o});i.addEdgeData([f]),s(f)}},r.cancelEdge=function(){return Fg(r,void 0,void 0,Jn().mark((function t(){var e,n,r,i,a;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.source){t.next=2;break}return t.abrupt("return");case 2:return n=this.context,r=n.graph,i=n.element,a=n.batch,r.removeNodeData([zg]),this.source=void 0,t.next=7,null===(e=i.draw({animation:!1}))||void 0===e?void 0:e.finished;case 7:a.endBatch();case 8:case"end":return t.stop()}}),t,this)})))},r.bindEvents(),r}return _(e,t),O(e,[{key:"update",value:function(t){Dn(e,"update",this,3)([t]),this.bindEvents()}},{key:"bindEvents",value:function(){var t=this.context.graph,e=this.options.trigger;this.unbindEvents(),"click"===e?(t.on(Ol.CLICK,this.handleCreateEdge),t.on(ml.CLICK,this.handleCreateEdge),t.on(yl.CLICK,this.cancelEdge),t.on(wl.CLICK,this.cancelEdge)):(t.on(Ol.DRAG_START,this.handleCreateEdge),t.on(ml.DRAG_START,this.handleCreateEdge),t.on(bl.POINTER_UP,this.drop)),t.on(bl.POINTER_MOVE,this.updateAssistEdge)}},{key:"getSelectedNodeIDs",value:function(t){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map((function(t){return t.id})).concat(t)))}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return _n(e)?e(t):!!e}},{key:"unbindEvents",value:function(){var t=this.context.graph;t.off(Ol.CLICK,this.handleCreateEdge),t.off(ml.CLICK,this.handleCreateEdge),t.off(yl.CLICK,this.cancelEdge),t.off(wl.CLICK,this.cancelEdge),t.off(Ol.DRAG_START,this.handleCreateEdge),t.off(ml.DRAG_START,this.handleCreateEdge),t.off(bl.POINTER_UP,this.drop),t.off(bl.POINTER_MOVE,this.updateAssistEdge)}},{key:"destroy",value:function(){this.unbindEvents(),Dn(e,"destroy",this,3)([])}}])}(ld);Bg.defaultOptions={animation:!0,enable:!0,style:{},trigger:"drag",onCreate:function(t){return t},onFinish:function(){}};const Gg=function(t,e,n){var r;return function(){var i=this,a=arguments,o=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||t.apply(i,a)}),e),o&&t.apply(i,a)}};var Wg=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},Vg=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).isDragging=!1,r.onDragStart=function(t){r.validate(t)&&(r.isDragging=!0,r.context.canvas.setCursor("grabbing"))},r.onDrag=function(t){var e,n,i,a;if(r.isDragging&&!Kd.isPinching){var o=null!==(n=null===(e=t.movement)||void 0===e?void 0:e.x)&&void 0!==n?n:t.dx,s=null!==(a=null===(i=t.movement)||void 0===i?void 0:i.y)&&void 0!==a?a:t.dy;0!==(o|s)&&r.translate([o,s],!1)}},r.onDragEnd=function(){var t,e;r.isDragging=!1,r.context.canvas.setCursor(r.defaultCursor),null===(e=(t=r.options).onFinish)||void 0===e||e.call(t)},r.invokeOnFinish=Gg((function(){var t,e;null===(e=(t=r.options).onFinish)||void 0===e||e.call(t)}),300),r.shortcut=new Zd(t.graph),r.bindEvents(),r.defaultCursor=r.context.canvas.getConfig().cursor||"default",r}return _(e,t),O(e,[{key:"update",value:function(t){this.unbindEvents(),Dn(e,"update",this,3)([t]),this.bindEvents()}},{key:"bindEvents",value:function(){var t=this,e=this.options.trigger;if(Ln(e)){var n=e.up,r=void 0===n?[]:n,i=e.down,a=void 0===i?[]:i,o=e.left,s=void 0===o?[]:o,u=e.right,c=void 0===u?[]:u;this.shortcut.bind(r,(function(e){return t.onTranslate([0,1],e)})),this.shortcut.bind(a,(function(e){return t.onTranslate([0,-1],e)})),this.shortcut.bind(s,(function(e){return t.onTranslate([1,0],e)})),this.shortcut.bind(c,(function(e){return t.onTranslate([-1,0],e)}))}else{var l=this.context.graph;l.on(bl.DRAG_START,this.onDragStart),l.on(bl.DRAG,this.onDrag),l.on(bl.DRAG_END,this.onDragEnd)}}},{key:"onTranslate",value:function(t,e){return Wg(this,void 0,void 0,Jn().mark((function n(){var r,i;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.validate(e)){n.next=2;break}return n.abrupt("return");case 2:return r=this.options.sensitivity,i=-1*r,n.next=6,this.translate(bd(t,i),this.options.animation);case 6:this.invokeOnFinish();case 7:case"end":return n.stop()}}),n,this)})))}},{key:"translate",value:function(t,e){return Wg(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.clampByDirection(t),t=this.clampByRange(t),n.next=4,this.context.graph.translateBy(t,e);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"clampByDirection",value:function(t){var e=g(t,2),n=e[0],r=e[1],i=this.options.direction;return"x"===i?r=0:"y"===i&&(n=0),[n,r]}},{key:"clampByRange",value:function(t){var e=g(t,2),n=e[0],r=e[1],i=this.context,a=i.viewport,o=g(i.canvas.getSize(),2),s=o[0],u=o[1],c=g(rf(this.options.range),4),l=[u*c[0],s*c[1],u*c[2],s*c[3]],f=ff(lf(a.getCanvasCenter()),l),d=md(a.getViewportCenter(),[n,r,0]);if(!hf(d,f)){var h=g(f.min,2),p=h[0],v=h[1],y=g(f.max,2),m=y[0],b=y[1];(d[0]<p&&n>0||d[0]>m&&n<0)&&(n=0),(d[1]<v&&r>0||d[1]>b&&r<0)&&(r=0)}return[n,r]}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return"function"==typeof e?e(t):!!e}},{key:"unbindEvents",value:function(){this.shortcut.unbindAll();var t=this.context.graph;t.off(bl.DRAG_START,this.onDragStart),t.off(bl.DRAG,this.onDrag),t.off(bl.DRAG_END,this.onDragEnd)}},{key:"destroy",value:function(){this.shortcut.destroy(),this.unbindEvents(),this.context.canvas.setCursor(this.defaultCursor),Dn(e,"destroy",this,3)([])}}])}(ld);Vg.defaultOptions={enable:function(t){return!("targetType"in t)||"canvas"===t.targetType},sensitivity:10,direction:"both",range:1/0};var Hg=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},Yg=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).enable=!1,r.enableElements=["node","combo"],r.target=[],r.shadowOrigin=[0,0],r.hiddenEdges=[],r.isDragging=!1,r.onDrop=function(t){return Hg(r,void 0,void 0,Jn().mark((function e(){var n,r,i,a,o;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("link"===this.options.dropEffect){e.next=2;break}return e.abrupt("return");case 2:return r=this.context,i=r.model,a=r.element,o=t.target.id,this.target.forEach((function(t){var e=i.getParentData(t,Al);e&&Kf(e)===o&&i.refreshComboData(o),i.setParent(t,o,Al)})),e.next=7,null===(n=null==a?void 0:a.draw({animation:!0}))||void 0===n?void 0:n.finished;case 7:case"end":return e.stop()}}),e,this)})))},r.setCursor=function(t){if(!r.isDragging){var e=t.type,n=r.context.canvas,i=r.options.cursor;e===bl.POINTER_ENTER?n.setCursor((null==i?void 0:i.grab)||"grab"):n.setCursor((null==i?void 0:i.default)||"default")}},r.onDragStart=r.onDragStart.bind(r),r.onDrag=r.onDrag.bind(r),r.onDragEnd=r.onDragEnd.bind(r),r.onDrop=r.onDrop.bind(r),r.bindEvents(),r}return _(e,t),O(e,[{key:"update",value:function(t){this.unbindEvents(),Dn(e,"update",this,3)([t]),this.bindEvents()}},{key:"bindEvents",value:function(){var t=this,e=this.context,n=e.graph,r=e.canvas.getLayer().getContextService().$canvas;r&&(r.addEventListener("blur",this.onDragEnd),r.addEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach((function(e){n.on("".concat(e,":").concat(bl.DRAG_START),t.onDragStart),n.on("".concat(e,":").concat(bl.DRAG),t.onDrag),n.on("".concat(e,":").concat(bl.DRAG_END),t.onDragEnd),n.on("".concat(e,":").concat(bl.POINTER_ENTER),t.setCursor),n.on("".concat(e,":").concat(bl.POINTER_LEAVE),t.setCursor)})),["link"].includes(this.options.dropEffect)&&(n.on(ml.DROP,this.onDrop),n.on(yl.DROP,this.onDrop))}},{key:"getSelectedNodeIDs",value:function(t){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map((function(t){return t.id})).concat(t)))}},{key:"getDelta",value:function(t){var e=this.context.graph.getZoom();return xd([t.dx,t.dy],e)}},{key:"onDragStart",value:function(t){var e;if(this.enable=this.validate(t),this.enable){var n=this.context,r=n.batch,i=n.canvas,a=n.graph;i.setCursor((null===(e=this.options.cursor)||void 0===e?void 0:e.grabbing)||"grabbing"),this.isDragging=!0,r.startBatch();var o=t.target.id;a.getElementState(o).includes(this.options.state)?this.target=this.getSelectedNodeIDs([o]):this.target=[o],this.hideEdge(),this.context.graph.frontElement(this.target),this.options.shadow&&this.createShadow(this.target)}}},{key:"onDrag",value:function(t){if(this.enable){var e=this.getDelta(t);this.options.shadow?this.moveShadow(e):this.moveElement(this.target,e)}}},{key:"onDragEnd",value:function(){var t,e,n;if(this.enable){if(this.enable=!1,this.options.shadow){if(!this.shadow)return;this.shadow.style.visibility="hidden";var r=this.shadow.attributes,i=r.x,a=void 0===i?0:i,o=r.y,s=g(md([+a,+(void 0===o?0:o)],this.shadowOrigin),2),u=s[0],c=s[1];this.moveElement(this.target,[u,c])}this.showEdges(),null===(e=(t=this.options).onFinish)||void 0===e||e.call(t,this.target);var l=this.context,f=l.batch,d=l.canvas;f.endBatch(),d.setCursor((null===(n=this.options.cursor)||void 0===n?void 0:n.grab)||"grab"),this.isDragging=!1,this.target=[]}}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return _n(e)?e(t):!!e}},{key:"moveElement",value:function(t,e){return Hg(this,void 0,void 0,Jn().mark((function n(){var r,i,a;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=this.context,i=r.graph,a=r.model,"move"===this.options.dropEffect&&t.forEach((function(t){return a.refreshComboData(t)})),i.translateElementBy(Object.fromEntries(t.map((function(t){return[t,e]}))),!1);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"moveShadow",value:function(t){if(this.shadow){var e=this.shadow.attributes,n=e.x,r=void 0===n?0:n,i=e.y,a=void 0===i?0:i,o=g(t,2),s=o[0],u=o[1];this.shadow.attr({x:+r+s,y:+a+u})}}},{key:"createShadow",value:function(t){var e=this,n=hh(this.options,"shadow"),r=df(t.map((function(t){return e.context.element.getElement(t).getBounds()}))),i=g(r.min,2),a=i[0],o=i[1];this.shadowOrigin=[a,o];var s=g(uf(r),2),u={width:s[0],height:s[1],x:a,y:o};this.shadow?this.shadow.attr(Object.assign(Object.assign(Object.assign({},n),u),{visibility:"visible"})):(this.shadow=new Qu({style:Object.assign(Object.assign(Object.assign({$layer:"transient"},n),u),{pointerEvents:"none"})}),this.context.canvas.appendChild(this.shadow))}},{key:"showEdges",value:function(){this.options.shadow||0===this.hiddenEdges.length||(this.context.graph.showElement(this.hiddenEdges),this.hiddenEdges=[])}},{key:"hideEdge",value:function(){var t=this.options,e=t.hideEdge,n=t.shadow;if("none"!==e&&!n){var r=this.context.graph;this.hiddenEdges="all"===e?r.getEdgeData().map(Kf):Array.from(new Set(this.target.map((function(t){return r.getRelatedEdgesData(t,e).map(Kf)})).flat())),r.hideElement(this.hiddenEdges)}}},{key:"unbindEvents",value:function(){var t=this,e=this.context,n=e.graph,r=e.canvas.getLayer().getContextService().$canvas;r&&(r.removeEventListener("blur",this.onDragEnd),r.removeEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach((function(e){n.off("".concat(e,":").concat(bl.DRAG_START),t.onDragStart),n.off("".concat(e,":").concat(bl.DRAG),t.onDrag),n.off("".concat(e,":").concat(bl.DRAG_END),t.onDragEnd),n.off("".concat(e,":").concat(bl.POINTER_ENTER),t.setCursor),n.off("".concat(e,":").concat(bl.POINTER_LEAVE),t.setCursor)})),n.off("combo:".concat(bl.DROP),this.onDrop),n.off("canvas:".concat(bl.DROP),this.onDrop)}},{key:"destroy",value:function(){var t;this.unbindEvents(),null===(t=this.shadow)||void 0===t||t.destroy(),Dn(e,"destroy",this,3)([])}}])}(ld);Yg.defaultOptions={animation:!0,enable:function(t){return["node","combo"].includes(t.targetType)},dropEffect:"move",state:"selected",hideEdge:"none",shadow:!1,shadowZIndex:100,shadowFill:"#F3F9FF",shadowFillOpacity:.5,shadowStroke:"#1890FF",shadowStrokeOpacity:.9,shadowLineDash:[5,5],cursor:{default:"default",grab:"grab",grabbing:"grabbing"}};const Ug=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[t]||[],a=this._events["*"]||[],o=function(r){for(var i=r.length,a=0;a<i;a++)if(r[a]){var o=r[a],s=o.callback;o.once&&(r.splice(a,1),0===r.length&&delete e._events[t],i--,a--),s.apply(e,n)}};o(i),o(a)},t.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();function qg(t,e,n,r){for(;t.length;){var i=t.shift();if(n(i))return!0;e.add(i.id),r(i.id).forEach((function(n){e.has(n.id)||(e.add(n.id),t.push(n))}))}return!1}function Xg(t,e,n,r){if(n(t))return!0;e.add(t.id);var i,a=nr(r(t.id));try{for(a.s();!(i=a.n()).done;){var o=i.value;if(!e.has(o.id)&&Xg(o,e,n,r))return!0}}catch(t){a.e(t)}finally{a.f()}return!1}var Kg=function(){return!0},$g=function(){return O((function t(e){var n=this;k(this,t),b(this,"graph",void 0),b(this,"nodeFilter",void 0),b(this,"edgeFilter",void 0),b(this,"cacheEnabled",void 0),b(this,"inEdgesMap",new Map),b(this,"outEdgesMap",new Map),b(this,"bothEdgesMap",new Map),b(this,"allNodesMap",new Map),b(this,"allEdgesMap",new Map),b(this,"clearCache",(function(){n.inEdgesMap.clear(),n.outEdgesMap.clear(),n.bothEdgesMap.clear(),n.allNodesMap.clear(),n.allEdgesMap.clear()})),b(this,"refreshCache",(function(){n.clearCache(),n.updateCache(n.graph.getAllNodes().map((function(t){return t.id})))})),b(this,"updateCache",(function(t){var e=new Set;t.forEach((function(t){var r=n.bothEdgesMap.get(t);if(r&&r.forEach((function(t){return e.add(t.id)})),n.hasNode(t)){var i=n.graph.getRelatedEdges(t,"in").filter(n.edgeFilter),a=n.graph.getRelatedEdges(t,"out").filter(n.edgeFilter),o=Array.from(new Set([].concat(M(i),M(a))));o.forEach((function(t){return e.add(t.id)})),n.inEdgesMap.set(t,i),n.outEdgesMap.set(t,a),n.bothEdgesMap.set(t,o),n.allNodesMap.set(t,n.graph.getNode(t))}else n.inEdgesMap.delete(t),n.outEdgesMap.delete(t),n.bothEdgesMap.delete(t),n.allNodesMap.delete(t)})),e.forEach((function(t){n.hasEdge(t)?n.allEdgesMap.set(t,n.graph.getEdge(t)):n.allEdgesMap.delete(t)}))})),b(this,"handleGraphChanged",(function(t){var e=new Set;t.changes.forEach((function(n){switch(n.type){case"NodeAdded":case"NodeRemoved":e.add(n.value.id);break;case"NodeDataUpdated":e.add(n.id);break;case"EdgeAdded":case"EdgeRemoved":e.add(n.value.source),e.add(n.value.target);break;case"EdgeUpdated":"source"!==n.propertyName&&"target"!==n.propertyName||(e.add(n.oldValue),e.add(n.newValue));break;case"EdgeDataUpdated":if(t.graph.hasEdge(n.id)){var r=t.graph.getEdge(n.id);e.add(r.source),e.add(r.target)}}})),n.updateCache(e)})),this.graph=e.graph;var r=e.nodeFilter||Kg,i=e.edgeFilter||Kg;this.nodeFilter=r,this.edgeFilter=function(t){var e=n.graph.getEdgeDetail(t.id),a=e.source,o=e.target;return!(!r(a)||!r(o))&&i(t,a,o)},"auto"===e.cache?(this.cacheEnabled=!0,this.startAutoCache()):"manual"===e.cache?this.cacheEnabled=!0:this.cacheEnabled=!1}),[{key:"startAutoCache",value:function(){this.refreshCache(),this.graph.on("changed",this.handleGraphChanged)}},{key:"stopAutoCache",value:function(){this.graph.off("changed",this.handleGraphChanged)}},{key:"checkNodeExistence",value:function(t){this.getNode(t)}},{key:"hasNode",value:function(t){if(!this.graph.hasNode(t))return!1;var e=this.graph.getNode(t);return this.nodeFilter(e)}},{key:"areNeighbors",value:function(t,e){return this.checkNodeExistence(t),this.getNeighbors(e).some((function(e){return e.id===t}))}},{key:"getNode",value:function(t){var e=this.graph.getNode(t);if(!this.nodeFilter(e))throw new Error("Node not found for id: "+t);return e}},{key:"getRelatedEdges",value:function(t,e){return this.checkNodeExistence(t),this.cacheEnabled?"in"===e?this.inEdgesMap.get(t):"out"===e?this.outEdgesMap.get(t):this.bothEdgesMap.get(t):this.graph.getRelatedEdges(t,e).filter(this.edgeFilter)}},{key:"getDegree",value:function(t,e){return this.getRelatedEdges(t,e).length}},{key:"getSuccessors",value:function(t){var e=this,n=this.getRelatedEdges(t,"out").map((function(t){return e.getNode(t.target)}));return Array.from(new Set(n))}},{key:"getPredecessors",value:function(t){var e=this,n=this.getRelatedEdges(t,"in").map((function(t){return e.getNode(t.source)}));return Array.from(new Set(n))}},{key:"getNeighbors",value:function(t){var e=this.getPredecessors(t),n=this.getSuccessors(t);return Array.from(new Set([].concat(M(e),M(n))))}},{key:"hasEdge",value:function(t){if(!this.graph.hasEdge(t))return!1;var e=this.graph.getEdge(t);return this.edgeFilter(e)}},{key:"getEdge",value:function(t){var e=this.graph.getEdge(t);if(!this.edgeFilter(e))throw new Error("Edge not found for id: "+t);return e}},{key:"getEdgeDetail",value:function(t){var e=this.getEdge(t);return{edge:e,source:this.getNode(e.source),target:this.getNode(e.target)}}},{key:"hasTreeStructure",value:function(t){return this.graph.hasTreeStructure(t)}},{key:"getRoots",value:function(t){return this.graph.getRoots(t).filter(this.nodeFilter)}},{key:"getChildren",value:function(t,e){return this.checkNodeExistence(t),this.graph.getChildren(t,e).filter(this.nodeFilter)}},{key:"getParent",value:function(t,e){this.checkNodeExistence(t);var n=this.graph.getParent(t,e);return n&&this.nodeFilter(n)?n:null}},{key:"getAllNodes",value:function(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}},{key:"getAllEdges",value:function(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}},{key:"bfs",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"out",r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];qg([this.getNode(t)],new Set,e,r)}},{key:"dfs",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"out",r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];Xg(this.getNode(t),new Set,e,r)}}])}(),Zg=function(t){function e(t){var n;return k(this,e),b(n=N(this,e),"nodeMap",new Map),b(n,"edgeMap",new Map),b(n,"inEdgesMap",new Map),b(n,"outEdgesMap",new Map),b(n,"bothEdgesMap",new Map),b(n,"treeIndices",new Map),b(n,"changes",[]),b(n,"batchCount",0),b(n,"onChanged",(function(){})),b(n,"batch",(function(t){n.batchCount+=1,t(),n.batchCount-=1,n.batchCount||n.commit()})),t?(t.nodes&&n.addNodes(t.nodes),t.edges&&n.addEdges(t.edges),t.tree&&n.addTree(t.tree),t.onChanged&&(n.onChanged=t.onChanged),n):P(n)}return _(e,t),O(e,[{key:"commit",value:function(){var t=this.changes;this.changes=[];var e={graph:this,changes:t};this.emit("changed",e),this.onChanged(e)}},{key:"reduceChanges",value:function(t){var e=[];return t.forEach((function(t){switch(t.type){case"NodeRemoved":var n=!1;e=e.filter((function(e){if("NodeAdded"===e.type){var r=e.value.id===t.value.id;return r&&(n=!0),!r}return"NodeDataUpdated"===e.type?e.id!==t.value.id:"TreeStructureChanged"!==e.type||e.nodeId!==t.value.id})),n||e.push(t);break;case"EdgeRemoved":var r=!1;e=e.filter((function(e){if("EdgeAdded"===e.type){var n=e.value.id===t.value.id;return n&&(r=!0),!n}return"EdgeDataUpdated"!==e.type&&"EdgeUpdated"!==e.type||e.id!==t.value.id})),r||e.push(t);break;case"NodeDataUpdated":case"EdgeDataUpdated":case"EdgeUpdated":var i=e.findIndex((function(e){return e.type===t.type&&e.id===t.id&&(void 0===t.propertyName||e.propertyName===t.propertyName)})),a=e[i];a?void 0!==t.propertyName?a.newValue=t.newValue:(e.splice(i,1),e.push(t)):e.push(t);break;case"TreeStructureDetached":(e=e.filter((function(e){return"TreeStructureAttached"===e.type?e.treeKey!==t.treeKey:"TreeStructureChanged"!==e.type||e.treeKey!==t.treeKey}))).push(t);break;case"TreeStructureChanged":var o=e.find((function(e){return"TreeStructureChanged"===e.type&&e.treeKey===t.treeKey&&e.nodeId===t.nodeId}));o?o.newParentId=t.newParentId:e.push(t);break;default:e.push(t)}})),e}},{key:"checkNodeExistence",value:function(t){this.getNode(t)}},{key:"hasNode",value:function(t){return this.nodeMap.has(t)}},{key:"areNeighbors",value:function(t,e){return this.getNeighbors(e).some((function(e){return e.id===t}))}},{key:"getNode",value:function(t){var e=this.nodeMap.get(t);if(!e)throw new Error("Node not found for id: "+t);return e}},{key:"getRelatedEdges",value:function(t,e){if(this.checkNodeExistence(t),"in"===e){var n=this.inEdgesMap.get(t);return Array.from(n)}if("out"===e){var r=this.outEdgesMap.get(t);return Array.from(r)}var i=this.bothEdgesMap.get(t);return Array.from(i)}},{key:"getDegree",value:function(t,e){return this.getRelatedEdges(t,e).length}},{key:"getSuccessors",value:function(t){var e=this,n=this.getRelatedEdges(t,"out").map((function(t){return e.getNode(t.target)}));return Array.from(new Set(n))}},{key:"getPredecessors",value:function(t){var e=this,n=this.getRelatedEdges(t,"in").map((function(t){return e.getNode(t.source)}));return Array.from(new Set(n))}},{key:"getNeighbors",value:function(t){var e=this.getPredecessors(t),n=this.getSuccessors(t);return Array.from(new Set([].concat(M(e),M(n))))}},{key:"doAddNode",value:function(t){if(this.hasNode(t.id))throw new Error("Node already exists: "+t.id);this.nodeMap.set(t.id,t),this.inEdgesMap.set(t.id,new Set),this.outEdgesMap.set(t.id,new Set),this.bothEdgesMap.set(t.id,new Set),this.treeIndices.forEach((function(e){e.childrenMap.set(t.id,new Set)})),this.changes.push({type:"NodeAdded",value:t})}},{key:"addNodes",value:function(t){var e=this;this.batch((function(){var n,r=nr(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.doAddNode(i)}}catch(t){r.e(t)}finally{r.f()}}))}},{key:"addNode",value:function(t){this.addNodes([t])}},{key:"doRemoveNode",value:function(t){var e=this,n=this.getNode(t),r=this.bothEdgesMap.get(t);null==r||r.forEach((function(t){return e.doRemoveEdge(t.id)})),this.nodeMap.delete(t),this.treeIndices.forEach((function(e){var r,i;null===(r=e.childrenMap.get(t))||void 0===r||r.forEach((function(t){e.parentMap.delete(t.id)}));var a=e.parentMap.get(t);a&&(null===(i=e.childrenMap.get(a.id))||void 0===i||i.delete(n)),e.parentMap.delete(t),e.childrenMap.delete(t)})),this.bothEdgesMap.delete(t),this.inEdgesMap.delete(t),this.outEdgesMap.delete(t),this.changes.push({type:"NodeRemoved",value:n})}},{key:"removeNodes",value:function(t){var e=this;this.batch((function(){t.forEach((function(t){return e.doRemoveNode(t)}))}))}},{key:"removeNode",value:function(t){this.removeNodes([t])}},{key:"updateNodeDataProperty",value:function(t,e,n){var r=this,i=this.getNode(t);this.batch((function(){var a=i.data[e],o=n;i.data[e]=o,r.changes.push({type:"NodeDataUpdated",id:t,propertyName:e,oldValue:a,newValue:o})}))}},{key:"mergeNodeData",value:function(t,e){var n=this;this.batch((function(){Object.entries(e).forEach((function(e){var r=g(e,2),i=r[0],a=r[1];n.updateNodeDataProperty(t,i,a)}))}))}},{key:"updateNodeData",value:function(){var t,e=this,n=arguments.length<=0?void 0:arguments[0],r=this.getNode(n);"string"!=typeof(arguments.length<=1?void 0:arguments[1])?("function"==typeof(arguments.length<=1?void 0:arguments[1])?t=(arguments.length<=1?void 0:arguments[1])(r.data):"object"==typeof(arguments.length<=1?void 0:arguments[1])&&(t=arguments.length<=1?void 0:arguments[1]),this.batch((function(){var i=r.data,a=t;r.data=t,e.changes.push({type:"NodeDataUpdated",id:n,oldValue:i,newValue:a})}))):this.updateNodeDataProperty(n,arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},{key:"checkEdgeExistence",value:function(t){if(!this.hasEdge(t))throw new Error("Edge not found for id: "+t)}},{key:"hasEdge",value:function(t){return this.edgeMap.has(t)}},{key:"getEdge",value:function(t){return this.checkEdgeExistence(t),this.edgeMap.get(t)}},{key:"getEdgeDetail",value:function(t){var e=this.getEdge(t);return{edge:e,source:this.getNode(e.source),target:this.getNode(e.target)}}},{key:"doAddEdge",value:function(t){if(this.hasEdge(t.id))throw new Error("Edge already exists: "+t.id);this.checkNodeExistence(t.source),this.checkNodeExistence(t.target),this.edgeMap.set(t.id,t);var e=this.inEdgesMap.get(t.target),n=this.outEdgesMap.get(t.source),r=this.bothEdgesMap.get(t.source),i=this.bothEdgesMap.get(t.target);e.add(t),n.add(t),r.add(t),i.add(t),this.changes.push({type:"EdgeAdded",value:t})}},{key:"addEdges",value:function(t){var e=this;this.batch((function(){var n,r=nr(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.doAddEdge(i)}}catch(t){r.e(t)}finally{r.f()}}))}},{key:"addEdge",value:function(t){this.addEdges([t])}},{key:"doRemoveEdge",value:function(t){var e=this.getEdge(t),n=this.outEdgesMap.get(e.source),r=this.inEdgesMap.get(e.target),i=this.bothEdgesMap.get(e.source),a=this.bothEdgesMap.get(e.target);n.delete(e),r.delete(e),i.delete(e),a.delete(e),this.edgeMap.delete(t),this.changes.push({type:"EdgeRemoved",value:e})}},{key:"removeEdges",value:function(t){var e=this;this.batch((function(){t.forEach((function(t){return e.doRemoveEdge(t)}))}))}},{key:"removeEdge",value:function(t){this.removeEdges([t])}},{key:"updateEdgeSource",value:function(t,e){var n=this,r=this.getEdge(t);this.checkNodeExistence(e);var i=r.source,a=e;this.outEdgesMap.get(i).delete(r),this.bothEdgesMap.get(i).delete(r),this.outEdgesMap.get(a).add(r),this.bothEdgesMap.get(a).add(r),r.source=e,this.batch((function(){n.changes.push({type:"EdgeUpdated",id:t,propertyName:"source",oldValue:i,newValue:a})}))}},{key:"updateEdgeTarget",value:function(t,e){var n=this,r=this.getEdge(t);this.checkNodeExistence(e);var i=r.target,a=e;this.inEdgesMap.get(i).delete(r),this.bothEdgesMap.get(i).delete(r),this.inEdgesMap.get(a).add(r),this.bothEdgesMap.get(a).add(r),r.target=e,this.batch((function(){n.changes.push({type:"EdgeUpdated",id:t,propertyName:"target",oldValue:i,newValue:a})}))}},{key:"updateEdgeDataProperty",value:function(t,e,n){var r=this,i=this.getEdge(t);this.batch((function(){var a=i.data[e],o=n;i.data[e]=o,r.changes.push({type:"EdgeDataUpdated",id:t,propertyName:e,oldValue:a,newValue:o})}))}},{key:"updateEdgeData",value:function(){var t,e=this,n=arguments.length<=0?void 0:arguments[0],r=this.getEdge(n);"string"!=typeof(arguments.length<=1?void 0:arguments[1])?("function"==typeof(arguments.length<=1?void 0:arguments[1])?t=(arguments.length<=1?void 0:arguments[1])(r.data):"object"==typeof(arguments.length<=1?void 0:arguments[1])&&(t=arguments.length<=1?void 0:arguments[1]),this.batch((function(){var i=r.data,a=t;r.data=t,e.changes.push({type:"EdgeDataUpdated",id:n,oldValue:i,newValue:a})}))):this.updateEdgeDataProperty(n,arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},{key:"mergeEdgeData",value:function(t,e){var n=this;this.batch((function(){Object.entries(e).forEach((function(e){var r=g(e,2),i=r[0],a=r[1];n.updateEdgeDataProperty(t,i,a)}))}))}},{key:"checkTreeExistence",value:function(t){if(!this.hasTreeStructure(t))throw new Error("Tree structure not found for treeKey: "+t)}},{key:"hasTreeStructure",value:function(t){return this.treeIndices.has(t)}},{key:"attachTreeStructure",value:function(t){var e=this;this.treeIndices.has(t)||(this.treeIndices.set(t,{parentMap:new Map,childrenMap:new Map}),this.batch((function(){e.changes.push({type:"TreeStructureAttached",treeKey:t})})))}},{key:"detachTreeStructure",value:function(t){var e=this;this.checkTreeExistence(t),this.treeIndices.delete(t),this.batch((function(){e.changes.push({type:"TreeStructureDetached",treeKey:t})}))}},{key:"addTree",value:function(t,e){var n=this;this.batch((function(){n.attachTreeStructure(e);for(var r=[],i=Array.isArray(t)?t:[t];i.length;){var a=i.shift();r.push(a),a.children&&i.push.apply(i,M(a.children))}n.addNodes(r),r.forEach((function(t){var r;null===(r=t.children)||void 0===r||r.forEach((function(r){n.setParent(r.id,t.id,e)}))}))}))}},{key:"getRoots",value:function(t){var e=this;return this.checkTreeExistence(t),this.getAllNodes().filter((function(n){return!e.getParent(n.id,t)}))}},{key:"getChildren",value:function(t,e){this.checkNodeExistence(t),this.checkTreeExistence(e);var n=this.treeIndices.get(e).childrenMap.get(t);return Array.from(n||[])}},{key:"getParent",value:function(t,e){return this.checkNodeExistence(t),this.checkTreeExistence(e),this.treeIndices.get(e).parentMap.get(t)||null}},{key:"getAncestors",value:function(t,e){for(var n,r=[],i=this.getNode(t);n=this.getParent(i.id,e);)r.push(n),i=n;return r}},{key:"setParent",value:function(t,e,n){var r=this;this.checkTreeExistence(n);var i=this.treeIndices.get(n);if(i){var a=this.getNode(t),o=i.parentMap.get(t);if((null==o?void 0:o.id)!==e)if(null!=e){var s,u=this.getNode(e);i.parentMap.set(t,u),o&&(null===(s=i.childrenMap.get(o.id))||void 0===s||s.delete(a));var c=i.childrenMap.get(u.id);c||(c=new Set,i.childrenMap.set(u.id,c)),c.add(a),this.batch((function(){r.changes.push({type:"TreeStructureChanged",treeKey:n,nodeId:t,oldParentId:null==o?void 0:o.id,newParentId:u.id})}))}else{var l;o&&(null===(l=i.childrenMap.get(o.id))||void 0===l||l.delete(a)),i.parentMap.delete(t)}}}},{key:"dfsTree",value:function(t,e,n){var r=this;return Xg(this.getNode(t),new Set,e,(function(t){return r.getChildren(t,n)}))}},{key:"bfsTree",value:function(t,e,n){var r=this;return qg([this.getNode(t)],new Set,e,(function(t){return r.getChildren(t,n)}))}},{key:"getAllNodes",value:function(){return Array.from(this.nodeMap.values())}},{key:"getAllEdges",value:function(){return Array.from(this.edgeMap.values())}},{key:"bfs",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"out",r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];return qg([this.getNode(t)],new Set,e,r)}},{key:"dfs",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"out",r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];return Xg(this.getNode(t),new Set,e,r)}},{key:"clone",value:function(){var t=new e({nodes:this.getAllNodes().map((function(t){return w(w({},t),{},{data:w({},t.data)})})),edges:this.getAllEdges().map((function(t){return w(w({},t),{},{data:w({},t.data)})}))});return this.treeIndices.forEach((function(e,n){var r=e.parentMap,i=e.childrenMap,a=new Map;r.forEach((function(e,n){a.set(n,t.getNode(e.id))}));var o=new Map;i.forEach((function(e,n){o.set(n,new Set(Array.from(e).map((function(e){return t.getNode(e.id)}))))})),t.treeIndices.set(n,{parentMap:a,childrenMap:o})})),t}},{key:"toJSON",value:function(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}},{key:"createView",value:function(t){return new $g(w({graph:this},t))}}])}(Ug),Qg=O((function t(e,n){k(this,t),this.context=e,this.options=n||{}}));function Jg(t){var e=t.type;return["compact-box","mindmap","dendrogram","indented"].includes(e)}function ty(t){var e=t.nodes,n=t.edges,r={nodes:[],edges:[],combos:[]};return e.forEach((function(t){var e=t.data._isCombo?r.combos:r.nodes,n=t.data,i=n.x,a=n.y,o=n.z,s=void 0===o?0:o;null==e||e.push({id:t.id,style:{x:i,y:a,z:s}})})),n.forEach((function(t){var e=t.id,n=t.source,i=t.target,a=t.data,o=a.points,s=void 0===o?[]:o,u=a.controlPoints,c=void 0===u?s.slice(1,s.length-1):u;r.edges.push({id:e,source:n,target:i,style:Object.assign({},(null==c?void 0:c.length)?{controlPoints:c.map(Id)}:{})})})),r}function ey(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e in t)return t[e].apply(t,r);if("instance"in t){var a=t.instance;if(e in a)return a[e].apply(a,r)}return null}function ny(t,e){if(e in t)return t[e];if("instance"in t){var n=t.instance;if(e in n)return n[e]}return null}var ry=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"forceLayoutInstance",get:function(){return this.context.layout.getLayoutInstance().find((function(t){return["d3-force","d3-force-3d"].includes(null==t?void 0:t.id)}))}},{key:"validate",value:function(t){return!!this.context.layout&&(this.forceLayoutInstance?Dn(e,"validate",this,3)([t]):(Dl.warn("DragElementForce only works with d3-force or d3-force-3d layout"),!1))}},{key:"moveElement",value:function(t,e){return n=this,r=void 0,i=void 0,a=Jn().mark((function n(){var r;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=this.forceLayoutInstance,this.context.graph.getNodeData(t).forEach((function(n,i){var a=n.style||{},o=a.x,s=void 0===o?0:o,u=a.y,c=void 0===u?0:u;r&&ey(r,"setFixedPosition",t[i],M(yd([+s,+c],e)))}));case 2:case"end":return n.stop()}}),n,this)})),new(i||(i=Promise))((function(t,e){function o(t){try{u(a.next(t))}catch(t){e(t)}}function s(t){try{u(a.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(e.value).then(o,s)}u((a=a.apply(n,r||[])).next())}));var n,r,i,a}},{key:"onDragStart",value:function(t){if(this.enable=this.validate(t),this.enable){this.target=this.getSelectedNodeIDs([t.target.id]),this.hideEdge(),this.context.graph.frontElement(this.target);var e=this.forceLayoutInstance;e&&ny(e,"simulation").alphaTarget(.3).restart(),this.context.graph.getNodeData(this.target).forEach((function(t){var n=t.style||{},r=n.x,i=void 0===r?0:r,a=n.y,o=void 0===a?0:a;e&&ey(e,"setFixedPosition",Kf(t),[+i,+o])}))}}},{key:"onDrag",value:function(t){if(this.enable){var e=this.getDelta(t);this.moveElement(this.target,e)}}},{key:"onDragEnd",value:function(){var t=this.forceLayoutInstance;t&&ny(t,"simulation").alphaTarget(0),this.options.fixed||this.context.graph.getNodeData(this.target).forEach((function(e){t&&ey(t,"setFixedPosition",Kf(e),[null,null,null])}))}}])}(Yg),iy=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},ay=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).isZoomEvent=function(t){return Boolean(t.data&&"scale"in t.data)},r.relatedEdgeToUpdate=new Set,r.zoom=r.context.graph.getZoom(),r.fixElementSize=function(t){return iy(r,void 0,void 0,Jn().mark((function e(){var n,r,i,a,o,s,u,c,l,f,d,h=this;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validate(t)){e.next=2;break}return e.abrupt("return");case 2:n=this.context.graph,r=this.options,i=r.state,a=r.nodeFilter,o=r.edgeFilter,s=r.comboFilter,u=(i?n.getElementDataByState("node",i):n.getNodeData()).filter(a),c=(i?n.getElementDataByState("edge",i):n.getEdgeData()).filter(o),l=(i?n.getElementDataByState("combo",i):n.getComboData()).filter(s),f=this.isZoomEvent(t)?this.zoom=Math.max(.01,Math.min(t.data.scale,10)):this.zoom,(d=[].concat(M(u),M(l))).length>0&&d.forEach((function(t){return h.fixNodeLike(t,f)})),this.updateRelatedEdges(),c.length>0&&c.forEach((function(t){return h.fixEdge(t,f)}));case 12:case"end":return e.stop()}}),e,this)})))},r.cachedStyles=new Map,r.getOriginalFieldValue=function(t,e,n){var i,a=r.cachedStyles.get(t)||[],o=(null===(i=a.find((function(t){return t.shape===e})))||void 0===i?void 0:i.style)||{};return n in o||(o[n]=e.attributes[n],r.cachedStyles.set(t,[].concat(M(a.filter((function(t){return t.shape!==e}))),[{shape:e,style:o}]))),o[n]},r.scaleEntireElement=function(t,e,n){e.setLocalScale(1/n);var i=r.cachedStyles.get(t)||[];i.push({shape:e}),r.cachedStyles.set(t,i)},r.scaleSpecificShapes=function(t,e,n){var i=function(t){var e=[],n=function(t){(null==t?void 0:t.children.length)&&t.children.forEach((function(t){e.push(t),n(t)}))};return n(t),e}(t);(Array.isArray(n)?n:[n]).forEach((function(n){var a=n.shape,o=n.fields,s="function"==typeof a?a(i):t.getShape(a);s&&(o?o.forEach((function(n){var i=r.getOriginalFieldValue(t.id,s,n);Oe(i)&&(s.style[n]=i/e)})):r.scaleEntireElement(t.id,s,e))}))},r.skipIfExceedViewport=function(t){var e=r.context.viewport;return!(null==e?void 0:e.isInViewport(t.getRenderBounds(),!1,30))},r.fixNodeLike=function(t,e){var n=Kf(t),i=r.context,a=i.element,o=i.model,s=a.getElement(n);if(s&&!r.skipIfExceedViewport(s)){o.getRelatedEdgesData(n).forEach((function(t){return r.relatedEdgeToUpdate.add(Kf(t))}));var u=r.options[s.type];u?r.scaleSpecificShapes(s,e,u):r.scaleEntireElement(n,s,e)}},r.fixEdge=function(t,e){var n=Kf(t),i=r.context.element.getElement(n);if(i&&!r.skipIfExceedViewport(i)){var a=r.options.edge;if(!a)return i.style.transformOrigin="center",void r.scaleEntireElement(n,i,e);r.scaleSpecificShapes(i,e,a)}},r.updateRelatedEdges=function(){var t=r.context.element;r.relatedEdgeToUpdate.size>0&&r.relatedEdgeToUpdate.forEach((function(e){var n=t.getElement(e);null==n||n.update({})})),r.relatedEdgeToUpdate.clear()},r.resetTransform=function(t){return iy(r,void 0,void 0,Jn().mark((function e(){var n;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(n=t.data)||void 0===n?void 0:n.firstRender)){e.next=2;break}return e.abrupt("return");case 2:this.options.reset?this.restoreCachedStyles():this.fixElementSize({data:{scale:this.zoom}});case 3:case"end":return e.stop()}}),e,this)})))},r.bindEvents(),r}return _(e,t),O(e,[{key:"restoreCachedStyles",value:function(){var t=this;if(this.cachedStyles.size>0){this.cachedStyles.forEach((function(e){e.forEach((function(e){var n=e.shape,r=e.style;if(Mh(r))n.setLocalScale(1);else{if(t.options.state)return;Object.entries(r).forEach((function(t){var e=g(t,2),r=e[0],i=e[1];return n.style[r]=i}))}}))}));var e=this.context,n=e.graph,r=e.element,i=Object.keys(Object.fromEntries(this.cachedStyles)).filter((function(t){return t&&"node"===n.getElementType(t)}));if(i.length>0){var a=new Set;i.forEach((function(t){n.getRelatedEdgesData(t).forEach((function(t){return a.add(Kf(t))}))})),a.forEach((function(t){var e=null==r?void 0:r.getElement(t);null==e||e.update({})}))}}}},{key:"bindEvents",value:function(){var t=this.context.graph;t.on(kl.AFTER_DRAW,this.resetTransform),t.on(kl.AFTER_TRANSFORM,this.fixElementSize)}},{key:"unbindEvents",value:function(){var t=this.context.graph;t.off(kl.AFTER_DRAW,this.resetTransform),t.off(kl.AFTER_TRANSFORM,this.fixElementSize)}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return _n(e)?e(t):!!e}},{key:"destroy",value:function(){this.unbindEvents(),Dn(e,"destroy",this,3)([])}}])}(ld);ay.defaultOptions={enable:function(t){return t.data.scale<1},nodeFilter:function(){return!0},edgeFilter:function(){return!0},comboFilter:function(){return!0},edge:[{shape:"key",fields:["lineWidth"]},{shape:"halo",fields:["lineWidth"]},{shape:"label"}],reset:!1};var oy=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).focus=function(t){return e=r,n=void 0,i=void 0,a=Jn().mark((function e(){var n;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validate(t)){e.next=2;break}return e.abrupt("return");case 2:return n=this.context.graph,e.next=5,n.focusElement(t.target.id,this.options.animation);case 5:case"end":return e.stop()}}),e,this)})),new(i||(i=Promise))((function(t,r){function o(t){try{u(a.next(t))}catch(t){r(t)}}function s(t){try{u(a.throw(t))}catch(t){r(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(e.value).then(o,s)}u((a=a.apply(e,n||[])).next())}));var e,n,i,a},r.bindEvents(),r}return _(e,t),O(e,[{key:"bindEvents",value:function(){var t=this,e=this.context.graph;this.unbindEvents(),eh.forEach((function(n){e.on("".concat(n,":").concat(bl.CLICK),t.focus)}))}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return _n(e)?e(t):!!e}},{key:"unbindEvents",value:function(){var t=this,e=this.context.graph;eh.forEach((function(n){e.off("".concat(n,":").concat(bl.CLICK),t.focus)}))}},{key:"destroy",value:function(){this.unbindEvents(),Dn(e,"destroy",this,3)([])}}])}(ld);oy.defaultOptions={animation:{easing:"ease-in",duration:500},enable:!0};var sy=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).isFrozen=!1,r.toggleFrozen=function(t){r.isFrozen="dragstart"===t.type},r.hoverElement=function(t){if(r.validate(t)){var e=t.type===bl.POINTER_ENTER;r.updateElementsState(t,e);var n=r.options,i=n.onHover,a=n.onHoverEnd;e?null==i||i(t):null==a||a(t)}},r.updateElementsState=function(t,e){if(r.options.state||r.options.inactiveState){var n=r.context.graph,i=r.options,a=i.state,o=i.animation,s=i.inactiveState,u=r.getActiveIds(t),c={};if(a&&Object.assign(c,r.getElementsState(u,a,e)),s){var l=Zf(n.getData(),!0).filter((function(t){return!u.includes(t)}));Object.assign(c,r.getElementsState(l,s,e))}n.setElementState(c,o)}},r.getElementsState=function(t,e,n){var i=r.context.graph,a={};return t.forEach((function(t){var r=i.getElementState(t);a[t]=n?r.includes(e)?r:[].concat(M(r),[e]):r.filter((function(t){return t!==e}))})),a},r.bindEvents(),r}return _(e,t),O(e,[{key:"bindEvents",value:function(){var t=this,e=this.context.graph;this.unbindEvents(),eh.forEach((function(n){e.on("".concat(n,":").concat(bl.POINTER_ENTER),t.hoverElement),e.on("".concat(n,":").concat(bl.POINTER_LEAVE),t.hoverElement)}));var n=this.context.canvas.document;n.addEventListener("".concat(bl.DRAG_START),this.toggleFrozen),n.addEventListener("".concat(bl.DRAG_END),this.toggleFrozen)}},{key:"getActiveIds",value:function(t){var e=this.context.graph,n=this.options,r=n.degree,i=n.direction,a=t.target.id;return r?rh(e,t.targetType,a,"function"==typeof r?r(t):r,i):[a]}},{key:"validate",value:function(t){if(this.destroyed||this.isFrozen||jg(t.target)||this.context.graph.isCollapsingExpanding)return!1;var e=this.options.enable;return _n(e)?e(t):!!e}},{key:"unbindEvents",value:function(){var t=this,e=this.context.graph;eh.forEach((function(n){e.off("".concat(n,":").concat(bl.POINTER_ENTER),t.hoverElement),e.off("".concat(n,":").concat(bl.POINTER_LEAVE),t.hoverElement)}));var n=this.context.canvas.document;n.removeEventListener("".concat(bl.DRAG_START),this.toggleFrozen),n.removeEventListener("".concat(bl.DRAG_END),this.toggleFrozen)}},{key:"destroy",value:function(){this.unbindEvents(),Dn(e,"destroy",this,3)([])}}])}(ld);sy.defaultOptions={animation:!1,enable:!0,degree:0,direction:"both",state:"active",inactiveState:void 0};var uy=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"onPointerDown",value:function(t){if(Dn(e,"validate",this,3)([t])&&Dn(e,"isKeydown",this,3)([])&&!this.points){var n=this.context.canvas;this.pathShape=new qu({id:"g6-lasso-select",style:this.options.style}),n.appendChild(this.pathShape),this.points=[Jd(t)]}}},{key:"onPointerMove",value:function(t){var n;if(this.points){var r=this.options,i=r.immediately,a=r.mode;this.points.push(Jd(t)),null===(n=this.pathShape)||void 0===n||n.setAttribute("d",function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[];return t.forEach((function(t,e){n.push([0===e?"M":"L"].concat(M(t)))})),e&&n.push(["Z"]),n}(this.points)),i&&"default"===a&&this.points.length>2&&Dn(e,"updateElementsStates",this,3)([this.points])}}},{key:"onPointerUp",value:function(){this.points&&(this.points.length<2||Dn(e,"updateElementsStates",this,3)([this.points]),this.clearLasso())}},{key:"clearLasso",value:function(){var t;null===(t=this.pathShape)||void 0===t||t.remove(),this.pathShape=void 0,this.points=void 0}}])}(Qd),cy=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).hiddenShapes=[],r.isVisible=!0,r.setElementsVisibility=function(t,e,n){t.filter(Boolean).forEach((function(t){"hidden"!==e||t.isVisible()?"visible"===e&&r.hiddenShapes.includes(t)?r.hiddenShapes.splice(r.hiddenShapes.indexOf(t),1):sd(t,e,n):r.hiddenShapes.push(t)}))},r.filterShapes=function(t,e){if(_n(e))return function(n){return!e(t,n)};var n=null==e?void 0:e[t];return function(t){return!t.className||!(null==n?void 0:n.includes(t.className))}},r.hideShapes=function(t){if(r.validate(t)&&r.isVisible){var e=r.context.element,n=r.options.shapes,i=void 0===n?{}:n;r.setElementsVisibility(e.getNodes(),"hidden",r.filterShapes("node",i)),r.setElementsVisibility(e.getEdges(),"hidden",r.filterShapes("edge",i)),r.setElementsVisibility(e.getCombos(),"hidden",r.filterShapes("combo",i)),r.isVisible=!1}},r.showShapes=Gg((function(t){if(r.validate(t)&&!r.isVisible){var e=r.context.element;r.setElementsVisibility(e.getNodes(),"visible"),r.setElementsVisibility(e.getEdges(),"visible"),r.setElementsVisibility(e.getCombos(),"visible"),r.isVisible=!0}}),r.options.debounce),r.bindEvents(),r}return _(e,t),O(e,[{key:"bindEvents",value:function(){var t=this.context.graph;t.on(kl.BEFORE_TRANSFORM,this.hideShapes),t.on(kl.AFTER_TRANSFORM,this.showShapes)}},{key:"unbindEvents",value:function(){var t=this.context.graph;t.off(kl.BEFORE_TRANSFORM,this.hideShapes),t.off(kl.AFTER_TRANSFORM,this.showShapes)}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return _n(e)?e(t):!!e}},{key:"update",value:function(t){this.unbindEvents(),Dn(e,"update",this,3)([t]),this.bindEvents()}},{key:"destroy",value:function(){this.unbindEvents(),Dn(e,"destroy",this,3)([])}}])}(ld);cy.defaultOptions={enable:!0,debounce:200,shapes:function(t){return"node"===t}};var ly=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},fy=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).onWheel=function(t){return ly(r,void 0,void 0,Jn().mark((function e(){var n,r;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.options.preventDefault&&t.preventDefault(),n=t.deltaX,r=t.deltaY,e.next=5,this.scroll([-n,-r],t);case 5:case"end":return e.stop()}}),e,this)})))},r.shortcut=new Zd(t.graph),r.bindEvents(),r}return _(e,t),O(e,[{key:"update",value:function(t){Dn(e,"update",this,3)([t]),this.bindEvents()}},{key:"bindEvents",value:function(){var t,e,n=this,r=this.options.trigger;if(this.shortcut.unbindAll(),Ln(r)){null===(t=this.graphDom)||void 0===t||t.removeEventListener(bl.WHEEL,this.onWheel);var i=r.up,a=void 0===i?[]:i,o=r.down,s=void 0===o?[]:o,u=r.left,c=void 0===u?[]:u,l=r.right,f=void 0===l?[]:l;this.shortcut.bind(a,(function(t){return n.scroll([0,-10],t)})),this.shortcut.bind(s,(function(t){return n.scroll([0,10],t)})),this.shortcut.bind(c,(function(t){return n.scroll([-10,0],t)})),this.shortcut.bind(f,(function(t){return n.scroll([10,0],t)}))}else null===(e=this.graphDom)||void 0===e||e.addEventListener(bl.WHEEL,this.onWheel,{passive:!1})}},{key:"graphDom",get:function(){return this.context.graph.getCanvas().getContextService().getDomElement()}},{key:"formatDisplacement",value:function(t){return t=bd(t,this.options.sensitivity),t=this.clampByDirection(t),this.clampByRange(t)}},{key:"clampByDirection",value:function(t){var e=g(t,2),n=e[0],r=e[1],i=this.options.direction;return"x"===i?r=0:"y"===i&&(n=0),[n,r]}},{key:"clampByRange",value:function(t){var e=g(t,2),n=e[0],r=e[1],i=this.context,a=i.viewport,o=g(i.canvas.getSize(),2),s=o[0],u=o[1],c=g(rf(this.options.range),4),l=[u*c[0],s*c[1],u*c[2],s*c[3]],f=ff(lf(a.getCanvasCenter()),l),d=md(a.getViewportCenter(),[n,r,0]);if(!hf(d,f)){var h=g(f.min,2),p=h[0],v=h[1],y=g(f.max,2),m=y[0],b=y[1];(d[0]<p&&n>0||d[0]>m&&n<0)&&(n=0),(d[1]<v&&r>0||d[1]>b&&r<0)&&(r=0)}return[n,r]}},{key:"scroll",value:function(t,e){return ly(this,void 0,void 0,Jn().mark((function n(){var r,i,a;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.validate(e)){n.next=2;break}return n.abrupt("return");case 2:return r=this.options.onFinish,i=this.context.graph,a=this.formatDisplacement(t),n.next=7,i.translateBy(a,!1);case 7:null==r||r();case 8:case"end":return n.stop()}}),n,this)})))}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return _n(e)?e(t):!!e}},{key:"destroy",value:function(){var t;this.shortcut.destroy(),null===(t=this.graphDom)||void 0===t||t.removeEventListener(bl.WHEEL,this.onWheel),Dn(e,"destroy",this,3)([])}}])}(ld);fy.defaultOptions={enable:!0,sensitivity:1,preventDefault:!0,range:1/0};var dy=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},hy=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).zoom=function(t,e,n){return dy(r,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.validate(e)){r.next=2;break}return r.abrupt("return");case 2:return i=this.context.graph,!(a=this.options.origin)&&"viewport"in e&&(a=Id(e.viewport)),o=this.options,s=o.sensitivity,u=o.onFinish,c=1+Ae(t,-50,50)*s/100,l=i.getZoom(),r.next=10,i.zoomTo(l*c,n,a);case 10:null==u||u();case 11:case"end":return r.stop()}}),r,this)})))},r.onReset=function(){return dy(r,void 0,void 0,Jn().mark((function t(){return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.context.graph.zoomTo(1,this.options.animation);case 2:case"end":return t.stop()}}),t,this)})))},r.preventDefault=function(t){r.options.preventDefault&&t.preventDefault()},r.shortcut=new Zd(t.graph),r.bindEvents(),r}return _(e,t),O(e,[{key:"update",value:function(t){Dn(e,"update",this,3)([t]),this.bindEvents()}},{key:"bindEvents",value:function(){var t=this,e=this.options.trigger;if(this.shortcut.unbindAll(),Array.isArray(e))if(e.includes(bl.PINCH))this.shortcut.bind([bl.PINCH],(function(e){t.zoom(e.scale,e,!1)}));else{var n=this.context.canvas.getContainer();null==n||n.addEventListener(bl.WHEEL,this.preventDefault),this.shortcut.bind([].concat(M(e),[bl.WHEEL]),(function(e){var n=e.deltaX,r=e.deltaY;t.zoom(-(null!=r?r:n),e,!1)}))}if("object"==typeof e){var r=e.zoomIn,i=void 0===r?[]:r,a=e.zoomOut,o=void 0===a?[]:a,s=e.reset,u=void 0===s?[]:s;this.shortcut.bind(i,(function(e){return t.zoom(10,e,t.options.animation)})),this.shortcut.bind(o,(function(e){return t.zoom(-10,e,t.options.animation)})),this.shortcut.bind(u,this.onReset)}}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return _n(e)?e(t):!!e}},{key:"destroy",value:function(){var t;this.shortcut.destroy(),null===(t=this.context.canvas.getContainer())||void 0===t||t.removeEventListener(bl.WHEEL,this.preventDefault),Dn(e,"destroy",this,3)([])}}])}(ld);hy.defaultOptions={animation:{duration:200},enable:!0,sensitivity:1,trigger:[],preventDefault:!0};var py=s(8971),vy=function(t,e){if("next"!==t&&"prev"!==t)return e},gy=function(t){t.prev.next=t.next,t.next.prev=t.prev,delete t.next,delete t.prev},yy=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e)}(function(){return O((function t(){k(this,t);var e={};e.prev=e,e.next=e.prev,this.shortcut=e}),[{key:"dequeue",value:function(){var t=this.shortcut,e=t.prev;if(e&&e!==t)return gy(e),e}},{key:"enqueue",value:function(t){var e=this.shortcut;t.prev&&t.next&&gy(t),t.next=e.next,e.next.prev=t,e.next=t,t.prev=e}},{key:"toString",value:function(){for(var t=[],e=this.shortcut,n=e.prev;n!==e;)t.push(JSON.stringify(n,vy)),n=null==n?void 0:n.prev;return"[".concat(t.join(", "),"]")}}])}()),my=function(){return 1},by=function(t,e,n,r,i){var a,o,s=[];return t.hasNode(r.v)&&(null===(a=t.getRelatedEdges(r.v,"in"))||void 0===a||a.forEach((function(r){var a=r.data.weight,o=t.getNode(r.source);i&&s.push({v:r.source,w:r.target,in:0,out:0}),void 0===o.data.out&&(o.data.out=0),o.data.out-=a,xy(e,n,Object.assign({v:o.id},o.data))})),null===(o=t.getRelatedEdges(r.v,"out"))||void 0===o||o.forEach((function(r){var i=r.data.weight,a=r.target,o=t.getNode(a);void 0===o.data.in&&(o.data.in=0),o.data.in-=i,xy(e,n,Object.assign({v:o.id},o.data))})),t.removeNode(r.v)),i?s:void 0},xy=function(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)},wy=function(t,e){var n="greedy"===e?function(t){var e;if(t.getAllNodes().length<=1)return[];var n=function(t,e){var n=new Zg,r=0,i=0;t.getAllNodes().forEach((function(t){n.addNode({id:t.id,data:{v:t.id,in:0,out:0}})})),t.getAllEdges().forEach((function(t){var a=n.getRelatedEdges(t.source,"out").find((function(e){return e.target===t.target})),o=(null==e?void 0:e(t))||1;a?n.updateEdgeData(null==a?void 0:a.id,Object.assign(Object.assign({},a.data),{weight:a.data.weight+o})):n.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:o}}),i=Math.max(i,n.getNode(t.source).data.out+=o),r=Math.max(r,n.getNode(t.target).data.in+=o)}));for(var a=[],o=i+r+3,s=0;s<o;s++)a.push(new yy);var u=r+1;return n.getAllNodes().forEach((function(t){xy(a,u,Object.assign({v:t.id},n.getNode(t.id).data))})),{buckets:a,zeroIdx:u,graph:n}}(t,function(t){return t.data.weight||1}||my);return null===(e=function(t,e,n){for(var r,i=[],a=e[e.length-1],o=e[0];t.getAllNodes().length;){for(;r=o.dequeue();)by(t,e,n,r);for(;r=a.dequeue();)by(t,e,n,r);if(t.getAllNodes().length)for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){i=i.concat(by(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx).map((function(e){return t.getRelatedEdges(e.v,"out").filter((function(t){return t.target===e.w}))})))||void 0===e?void 0:e.flat()}(t):ky(t);null==n||n.forEach((function(e){var n=e.data;t.removeEdge(e.id),n.forwardName=e.data.name,n.reversed=!0,t.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign({},n)})}))},ky=function(t){var e=[],n={},r={},i=function(a){r[a]||(r[a]=!0,n[a]=!0,t.getRelatedEdges(a,"out").forEach((function(t){n[t.target]?e.push(t):i(t.target)})),delete n[a])};return t.getAllNodes().forEach((function(t){return i(t.id)})),e},Ey=function(t,e,n,r){var i;do{i="".concat(r).concat(Math.random())}while(t.hasNode(i));return n.dummy=e,t.addNode({id:i,data:n}),i},Oy=function(t){var e=new Zg;return t.getAllNodes().forEach((function(n){t.getChildren(n.id).length||e.addNode(Object.assign({},n))})),t.getAllEdges().forEach((function(t){e.addEdge(t)})),e},Sy=function(t,e){var n,r,i=Number(t.x),a=Number(t.y),o=Number(e.x)-i,s=Number(e.y)-a,u=Number(t.width)/2,c=Number(t.height)/2;return o||s?(Math.abs(s)*u>Math.abs(o)*c?(s<0&&(c=-c),n=c*o/s,r=c):(o<0&&(u=-u),n=u,r=u*s/o),{x:i+n,y:a+r}):{x:0,y:0}},My=function(t){for(var e=[],n=Ay(t)+1,r=0;r<n;r++)e.push([]);t.getAllNodes().forEach((function(t){var n=t.data.rank;void 0!==n&&e[n]&&e[n].push(t.id)}));for(var i=0;i<n;i++)e[i]=e[i].sort((function(e,n){return r=t.getNode(e).data.order,i=t.getNode(n).data.order,Number(r)-Number(i);var r,i}));return e},Ty=function(t,e,n,r){var i={width:0,height:0};return Oe(n)&&Oe(r)&&(i.rank=n,i.order=r),Ey(t,"border",i,e)},Ay=function(t){var e;return t.getAllNodes().forEach((function(t){var n=t.data.rank;void 0!==n&&(void 0===e||n>e)&&(e=n)})),e||(e=0),e},Py=function(t,e){return t.reduce((function(t,n){return e(t)>e(n)?n:t}))},Ny=function(t,e,n,r,i,a){r.includes(e.id)||(r.push(e.id),n||a.push(e.id),i(e.id).forEach((function(e){return Ny(t,e,n,r,i,a)})),n&&a.push(e.id))},Cy=function(t,e,n,r){var i=Array.isArray(e)?e:[e],a=function(e){return r?t.getSuccessors(e):t.getNeighbors(e)},o=[],s=[];return i.forEach((function(e){if(!t.hasNode(e.id))throw new Error("Graph does not have node: ".concat(e));Ny(t,e,"post"===n,s,a,o)})),o},_y=function(t,e,n,r,i,a){var o={rank:a,borderType:e,width:0,height:0},s=i.data[e][a-1],u=Ey(t,"border",o,n);i.data[e][a]=u,t.setParent(u,r),s&&t.addEdge({id:"e".concat(Math.random()),source:s,target:u,data:{weight:1}})},Ly=function(t){t.getAllNodes().forEach((function(t){Ry(t)})),t.getAllEdges().forEach((function(t){Ry(t)}))},Ry=function(t){var e=t.data.width;t.data.width=t.data.height,t.data.height=e},jy=function(t){(null==t?void 0:t.y)&&(t.y=-t.y)},Dy=function(t){var e=t.x;t.x=t.y,t.y=e},Iy=function(t,e,n,r,i,a,o){var s=t.getChildren(o);if(null==s?void 0:s.length){var u=Ty(t,"_bt"),c=Ty(t,"_bb"),l=t.getNode(o);t.setParent(u,o),l.data.borderTop=u,t.setParent(c,o),l.data.borderBottom=c,null==s||s.forEach((function(s){Iy(t,e,n,r,i,a,s.id);var l=s.data.borderTop?s.data.borderTop:s.id,f=s.data.borderBottom?s.data.borderBottom:s.id,d=s.data.borderTop?r:2*r,h=l!==f?1:i-a[o]+1;t.addEdge({id:"e".concat(Math.random()),source:u,target:l,data:{minlen:h,weight:d,nestingEdge:!0}}),t.addEdge({id:"e".concat(Math.random()),source:f,target:c,data:{minlen:h,weight:d,nestingEdge:!0}})})),t.getParent(o)||t.addEdge({id:"e".concat(Math.random()),source:e,target:u,data:{weight:0,minlen:i+a[o]}})}else o!==e&&t.addEdge({id:"e".concat(Math.random()),source:e,target:o,data:{weight:0,minlen:n}})},Fy="edge-label",zy=function(t,e,n){for(var r=function(t,e){return null==t?void 0:t.reduce((function(t,n,r){return t[n]=e[r],t}),{})}(n,n.map((function(t,e){return e}))),i=e.map((function(e){var n=t.getRelatedEdges(e,"out").map((function(t){return{pos:r[t.target]||0,weight:t.data.weight}}));return null==n?void 0:n.sort((function(t,e){return t.pos-e.pos}))})),a=i.flat().filter((function(t){return void 0!==t})),o=1;o<n.length;)o<<=1;var s=2*o-1;o-=1;var u=Array(s).fill(0,0,s),c=0;return null==a||a.forEach((function(t){if(t){var e=t.pos+o;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),u[e=e-1>>1]+=t.weight;c+=t.weight*n}})),c},By=function(t,e){for(var n=0,r=1;r<(null==e?void 0:e.length);r+=1)n+=zy(t,e[r-1],e[r]);return n},Gy=function(t){for(var e={},n=t.getAllNodes(),r=n.map((function(t){var e;return null!==(e=t.data.rank)&&void 0!==e?e:-1/0})),i=Math.max.apply(Math,M(r)),a=[],o=0;o<i+1;o++)a.push([]);var s=n.sort((function(e,n){return t.getNode(e.id).data.rank-t.getNode(n.id).data.rank})),u=s.filter((function(e){return void 0!==t.getNode(e.id).data.fixorder})),c=u.sort((function(e,n){return t.getNode(e.id).data.fixorder-t.getNode(n.id).data.fixorder}));return null==c||c.forEach((function(n){isNaN(t.getNode(n.id).data.rank)||a[t.getNode(n.id).data.rank].push(n.id),e[n.id]=!0})),null==s||s.forEach((function(n){return t.dfsTree(n.id,(function(t){if(e.hasOwnProperty(t.id))return!0;e[t.id]=!0,isNaN(t.data.rank)||a[t.data.rank].push(t.id)}))})),a},Wy=function(t,e){var n,r=0,i=0;t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.vs=null===(n=e.vs)||void 0===n?void 0:n.concat(t.vs),t.barycenter=r/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0};const Vy=function(t,e){var n,r,i,a={};return null==t||t.forEach((function(t,e){a[t.v]={i:e,indegree:0,in:[],out:[],vs:[t.v]};var n=a[t.v];void 0!==t.barycenter&&(n.barycenter=t.barycenter,n.weight=t.weight)})),null===(n=e.getAllEdges())||void 0===n||n.forEach((function(t){var e=a[t.source],n=a[t.target];void 0!==e&&void 0!==n&&(n.indegree++,e.out.push(a[t.target]))})),function(t){for(var e,n,r=[],i=function(){var i=t.pop();r.push(i),null===(e=i.in.reverse())||void 0===e||e.forEach((function(t){return(e=i,function(t){t.merged||(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&Wy(e,t)})(t);var e})),null===(n=i.out)||void 0===n||n.forEach((function(e){return(n=i,function(e){e.in.push(n),0===--e.indegree&&t.push(e)})(e);var n}))};null==t?void 0:t.length;)i();var a=r.filter((function(t){return!t.merged})),o=["vs","i","barycenter","weight"];return a.map((function(t){var e={};return null==o||o.forEach((function(n){void 0!==t[n]&&(e[n]=t[n])})),e}))}(null===(i=(r=Object.values(a)).filter)||void 0===i?void 0:i.call(r,(function(t){return!t.indegree})))};var Hy=function(t,e,n){for(var r,i=n;e.length&&(r=e[e.length-1]).i<=i;)e.pop(),null==t||t.push(r.vs),i++;return i},Yy=function(t,e,n,r,i,a){var o,s,u,c,l=t.getChildren(e).map((function(t){return t.id})),f=t.getNode(e),d=f?f.data.borderLeft:void 0,h=f?f.data.borderRight:void 0,p={};d&&(l=null==l?void 0:l.filter((function(t){return t!==d&&t!==h})));var v=function(t,e){return e.map((function(e){var n=t.getRelatedEdges(e,"in");if(!(null==n?void 0:n.length))return{v:e};var r={sum:0,weight:0};return null==n||n.forEach((function(e){var n=t.getNode(e.source);r.sum+=e.data.weight*n.data.order,r.weight+=e.data.weight})),{v:e,barycenter:r.sum/r.weight,weight:r.weight}}))}(t,l||[]);null==v||v.forEach((function(e){var i;if(null===(i=t.getChildren(e.v))||void 0===i?void 0:i.length){var o=Yy(t,e.v,n,r,a);p[e.v]=o,o.hasOwnProperty("barycenter")&&qy(e,o)}}));var g=Vy(v,n);Uy(g,p),null===(o=g.filter((function(t){return t.vs.length>0})))||void 0===o||o.forEach((function(e){var n=t.getNode(e.vs[0]);n&&(e.fixorder=n.data.fixorder,e.order=n.data.order)}));var y=function(t,e,n,r){var i=function(t){var e={lhs:[],rhs:[]};return null==t||t.forEach((function(t){var n,i;i=(n=t).hasOwnProperty("fixorder")&&!isNaN(n.fixorder),(r?!i&&n.hasOwnProperty("barycenter"):i||n.hasOwnProperty("barycenter"))?e.lhs.push(t):e.rhs.push(t)})),e}(t),a=i.lhs,o=i.rhs.sort((function(t,e){return-t.i- -e.i})),s=[],u=0,c=0,l=0;null==a||a.sort(function(t,e){return function(n,r){if(void 0!==n.fixorder&&void 0!==r.fixorder)return n.fixorder-r.fixorder;if(n.barycenter<r.barycenter)return-1;if(n.barycenter>r.barycenter)return 1;if(e&&void 0!==n.order&&void 0!==r.order){if(n.order<r.order)return-1;if(n.order>r.order)return 1}return t?r.i-n.i:n.i-r.i}}(!!e,!!n)),l=Hy(s,o,l),null==a||a.forEach((function(t){var e;l+=null===(e=t.vs)||void 0===e?void 0:e.length,s.push(t.vs),u+=t.barycenter*t.weight,c+=t.weight,l=Hy(s,o,l)}));var f={vs:s.flat()};return c&&(f.barycenter=u/c,f.weight=c),f}(g,r,i,a);if(d&&(y.vs=[d,y.vs,h].flat(),null===(s=t.getPredecessors(d))||void 0===s?void 0:s.length)){var m=t.getNode((null===(u=t.getPredecessors(d))||void 0===u?void 0:u[0].id)||""),b=t.getNode((null===(c=t.getPredecessors(h))||void 0===c?void 0:c[0].id)||"");y.hasOwnProperty("barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+m.data.order+b.data.order)/(y.weight+2),y.weight+=2}return y},Uy=function(t,e){null==t||t.forEach((function(t){var n,r=null===(n=t.vs)||void 0===n?void 0:n.map((function(t){return e[t]?e[t].vs:t}));t.vs=r.flat()}))},qy=function(t,e){void 0!==t.barycenter?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)},Xy=function(t,e,n){return e.map((function(e){return function(t,e,n){var r=function(t){for(var e;t.hasNode(e="_root".concat(Math.random())););return e}(t),i=new Zg({tree:[{id:r,children:[],data:{}}]});return t.getAllNodes().forEach((function(a){var o=t.getParent(a.id);(a.data.rank===e||a.data.minRank<=e&&e<=a.data.maxRank)&&(i.hasNode(a.id)||i.addNode(Object.assign({},a)),(null==o?void 0:o.id)&&!i.hasNode(null==o?void 0:o.id)&&i.addNode(Object.assign({},o)),i.setParent(a.id,(null==o?void 0:o.id)||r),t.getRelatedEdges(a.id,n).forEach((function(e){var n=e.source===a.id?e.target:e.source;i.hasNode(n)||i.addNode(Object.assign({},t.getNode(n)));var r=i.getRelatedEdges(n,"out").find((function(t){return t.target===a.id})),o=void 0!==r?r.data.weight:0;r?i.updateEdgeData(r.id,Object.assign(Object.assign({},r.data),{weight:e.data.weight+o})):i.addEdge({id:e.id,source:n,target:a.id,data:{weight:e.data.weight+o}})})),a.data.hasOwnProperty("minRank")&&i.updateNodeData(a.id,Object.assign(Object.assign({},a.data),{borderLeft:a.data.borderLeft[e],borderRight:a.data.borderRight[e]})))})),i}(t,e,n)}))},Ky=function(t,e,n,r){var i=new Zg;null==t||t.forEach((function(t){for(var a,o=t.getRoots()[0].id,s=Yy(t,o,i,e,n,r),u=0;u<(null===(a=s.vs)||void 0===a?void 0:a.length);u++){var c=t.getNode(s.vs[u]);c&&(c.data.order=u)}!function(t,e,n){var r,i={};null==n||n.forEach((function(n){for(var a,o,s=t.getParent(n);s;){if((a=t.getParent(s.id))?(o=i[a.id],i[a.id]=s.id):(o=r,r=s.id),o&&o!==s.id)return e.hasNode(o)||e.addNode({id:o,data:{}}),e.hasNode(s.id)||e.addNode({id:s.id,data:{}}),void(e.hasEdge("e".concat(o,"-").concat(s.id))||e.addEdge({id:"e".concat(o,"-").concat(s.id),source:o,target:s.id,data:{}}));s=a}}))}(t,i,s.vs)}))},$y=function(t,e){null==e||e.forEach((function(e){null==e||e.forEach((function(e,n){t.getNode(e).data.order=n}))}))},Zy=function(t,e){var n={};function r(e,r,i,a,o){for(var s,u,c,l=r;l<i;l++)c=e[l],(null===(s=t.getNode(c))||void 0===s?void 0:s.data.dummy)&&(null===(u=t.getPredecessors(c))||void 0===u||u.forEach((function(e){var r=t.getNode(e.id);r.data.dummy&&(r.data.order<a||r.data.order>o)&&Jy(n,e.id,c)})))}function i(t,e){var n=function(t){return JSON.stringify(t.slice(1))}(t);e.get(n)||(r.apply(void 0,M(t)),e.set(n,!0))}return(null==e?void 0:e.length)&&e.reduce((function(e,n){var r,a=-1,o=0,s=new Map;return null==n||n.forEach((function(u,c){var l;if("border"===(null===(l=t.getNode(u))||void 0===l?void 0:l.data.dummy)){var f=t.getPredecessors(u)||[];f.length&&(r=t.getNode(f[0].id).data.order,i([n,o,c,a,r],s),o=c,a=r)}i([n,o,n.length,r,e.length],s)})),n})),n},Qy=function(t,e){var n,r;if(null===(n=t.getNode(e))||void 0===n?void 0:n.data.dummy)return null===(r=t.getPredecessors(e))||void 0===r?void 0:r.find((function(e){return t.getNode(e.id).data.dummy}))},Jy=function(t,e,n){var r=e,i=n;if(r>i){var a=r;r=i,i=a}var o=t[r];o||(t[r]=o={}),o[i]=!0},tm=function(t,e,n){var r=e;return r>n&&(r=n),!!t[r]},em=function(t,e,n,r,i,a){var o=new Zg,s=nm(r,i,a);return null==e||e.forEach((function(e){var r;null==e||e.forEach((function(e){var i=n[e];if(o.hasNode(i)||o.addNode({id:i,data:{}}),r){var a=n[r],u=o.getRelatedEdges(a,"out").find((function(t){return t.target===i}));u?o.updateEdgeData(u.id,Object.assign(Object.assign({},u.data),{weight:Math.max(s(t,e,r),u.data.weight||0)})):o.addEdge({id:"e".concat(Math.random()),source:a,target:i,data:{weight:Math.max(s(t,e,r),0)}})}r=e}))})),o};var nm=function(t,e,n){return function(r,i,a){var o=r.getNode(i),s=r.getNode(a),u=0,c=0;if(u+=o.data.width/2,o.data.hasOwnProperty("labelpos"))switch((o.data.labelpos||"").toLowerCase()){case"l":c=-o.data.width/2;break;case"r":c=o.data.width/2}if(c&&(u+=n?c:-c),c=0,u+=(o.data.dummy?e:t)/2,u+=(s.data.dummy?e:t)/2,u+=s.data.width/2,s.data.labelpos)switch((s.data.labelpos||"").toLowerCase()){case"l":c=s.data.width/2;break;case"r":c=-s.data.width/2}return c&&(u+=n?c:-c),c=0,u}},rm=function(t,e){return t.getNode(e).data.width||0},im=function(t,e){var n,r=Oy(t);!function(t,e){var n=(e||{}).ranksep,r=void 0===n?0:n,i=My(t),a=0;null==i||i.forEach((function(e){var n=e.map((function(e){return t.getNode(e).data.height})),i=Math.max.apply(Math,M(n).concat([0]));null==e||e.forEach((function(e){t.getNode(e).data.y=a+i/2})),a+=i+r}))}(r,e);var i=function(t,e){var n=e||{},r=n.align,i=n.nodesep,a=void 0===i?0:i,o=n.edgesep,s=void 0===o?0:o,u=My(t),c=Object.assign(function(t,e){var n={};return(null==e?void 0:e.length)&&e.reduce((function(e,r){var i=0,a=0,o=e.length,s=null==r?void 0:r[(null==r?void 0:r.length)-1];return null==r||r.forEach((function(e,u){var c,l=Qy(t,e),f=l?t.getNode(l.id).data.order:o;(l||e===s)&&(null===(c=r.slice(a,u+1))||void 0===c||c.forEach((function(e){var r;null===(r=t.getPredecessors(e))||void 0===r||r.forEach((function(r){var a,o=t.getNode(r.id),s=o.data.order;!(s<i||f<s)||o.data.dummy&&(null===(a=t.getNode(e))||void 0===a?void 0:a.data.dummy)||Jy(n,r.id,e)}))})),a=u+1,i=f)})),r})),n}(t,u),Zy(t,u)),l={},f=[];["u","d"].forEach((function(e){f="u"===e?u:Object.values(u).reverse(),["l","r"].forEach((function(n){"r"===n&&(f=f.map((function(t){return Object.values(t).reverse()})));var r=("u"===e?t.getPredecessors:t.getSuccessors).bind(t),i=function(t,e,n,r){var i={},a={},o={};return null==e||e.forEach((function(t){null==t||t.forEach((function(t,e){i[t]=t,a[t]=t,o[t]=e}))})),null==e||e.forEach((function(t){var e=-1;null==t||t.forEach((function(t){var s=r(t).map((function(t){return t.id}));if(s.length)for(var u=((s=s.sort((function(t,e){return o[t]-o[e]}))).length-1)/2,c=Math.floor(u),l=Math.ceil(u);c<=l;++c){var f=s[c];a[t]===t&&e<o[f]&&!tm(n,t,f)&&(a[f]=t,a[t]=i[t]=i[f],e=o[f])}}))})),{root:i,align:a}}(0,f,c,r),o=function(t,e,n,r,i,a,o){var s,u={},c=em(t,e,n,i,a,o),l=o?"borderLeft":"borderRight",f=function(t,e){for(var n=c.getAllNodes(),r=n.pop(),i={};r;)i[r.id]?t(r.id):(i[r.id]=!0,n.push(r),n=n.concat(e(r.id))),r=n.pop()};return f((function(t){u[t]=(c.getRelatedEdges(t,"in")||[]).reduce((function(t,e){return Math.max(t,(u[e.source]||0)+e.data.weight)}),0)}),c.getPredecessors.bind(c)),f((function(e){var n=(c.getRelatedEdges(e,"out")||[]).reduce((function(t,e){return Math.min(t,(u[e.target]||0)-e.data.weight)}),Number.POSITIVE_INFINITY),r=t.getNode(e);n!==Number.POSITIVE_INFINITY&&r.data.borderType!==l&&(u[e]=Math.max(u[e],n))}),c.getSuccessors.bind(c)),null===(s=Object.values(r))||void 0===s||s.forEach((function(t){u[t]=u[n[t]]})),u}(t,f,i.root,i.align,a,s,"r"===n);"r"===n&&Object.keys(o).forEach((function(t){return o[t]=-o[t]})),l[e+n]=o}))}));var d=function(t,e){return Py(Object.values(e),(function(e){var n,r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return null===(n=Object.keys(e))||void 0===n||n.forEach((function(n){var a=e[n],o=rm(t,n)/2;r=Math.max(a+o,r),i=Math.min(a-o,i)})),r-i}))}(t,l);return d&&function(t,e){var n=Object.values(e),r=Math.min.apply(Math,n),i=Math.max.apply(Math,n);["u","d"].forEach((function(n){["l","r"].forEach((function(a){var o,s=n+a,u=t[s];if(u!==e){var c=Object.values(u);(o="l"===a?r-Math.min.apply(Math,c):i-Math.max.apply(Math,c))&&(t[s]={},Object.keys(u).forEach((function(e){t[s][e]=u[e]+o})))}}))}))}(l,d),function(t,e){var n={};return Object.keys(t.ul).forEach((function(r){if(e)n[r]=t[e.toLowerCase()][r];else{var i=Object.values(t).map((function(t){return t[r]}));n[r]=(i[0]+i[1])/2}})),n}(l,r)}(r,e);null===(n=Object.keys(i))||void 0===n||n.forEach((function(t){r.getNode(t).data.x=i[t]}))},am=function(t){var e={},n=function(r){var i,a,o=t.getNode(r);return o?e[r]?o.data.rank:(e[r]=!0,null===(i=t.getRelatedEdges(r,"out"))||void 0===i||i.forEach((function(t){var e=n(t.target)-t.data.minlen;e&&(void 0===a||e<a)&&(a=e)})),a||(a=0),o.data.rank=a,a):0};t.getAllNodes().filter((function(e){return 0===t.getRelatedEdges(e.id,"in").length})).forEach((function(t){return n(t.id)}))},om=function(t,e){return t.getNode(e.target).data.rank-t.getNode(e.source).data.rank-e.data.minlen},sm=function(t,e){var n=function(r){e.getRelatedEdges(r,"both").forEach((function(i){var a=i.source,o=r===a?i.target:a;t.hasNode(o)||om(e,i)||(t.addNode({id:o,data:{}}),t.addEdge({id:i.id,source:r,target:o,data:{}}),n(o))}))};return t.getAllNodes().forEach((function(t){return n(t.id)})),t.getAllNodes().length},um=function(t,e){var n=function(r){var i;null===(i=e.getRelatedEdges(r,"both"))||void 0===i||i.forEach((function(i){var a=i.source,o=r===a?i.target:a;t.hasNode(o)||void 0===e.getNode(o).data.layer&&om(e,i)||(t.addNode({id:o,data:{}}),t.addEdge({id:i.id,source:r,target:o,data:{}}),n(o))}))};return t.getAllNodes().forEach((function(t){return n(t.id)})),t.getAllNodes().length},cm=function(t,e){return Py(e.getAllEdges(),(function(n){return t.hasNode(n.source)!==t.hasNode(n.target)?om(e,n):1/0}))},lm=function(t,e,n){t.getAllNodes().forEach((function(t){var r=e.getNode(t.id);r.data.rank||(r.data.rank=0),r.data.rank+=n}))},fm=function(t,e){var n=Cy(t,t.getAllNodes(),"post",!1);(n=n.slice(0,(null==n?void 0:n.length)-1)).forEach((function(n){dm(t,e,n)}))},dm=function(t,e,n){var r=t.getNode(n).data.parent;t.getRelatedEdges(n,"both").find((function(t){return t.target===r||t.source===r})).data.cutvalue=hm(t,e,n)},hm=function(t,e,n){var r=t.getNode(n).data.parent,i=!0,a=e.getRelatedEdges(n,"out").find((function(t){return t.target===r})),o=0;return a||(i=!1,a=e.getRelatedEdges(r,"out").find((function(t){return t.target===n}))),o=a.data.weight,e.getRelatedEdges(n,"both").forEach((function(e){var a=e.source===n,s=a?e.target:e.source;if(s!==r){var u=a===i,c=e.data.weight;if(o+=u?c:-c,xm(t,n,s)){var l=t.getRelatedEdges(n,"both").find((function(t){return t.source===s||t.target===s})).data.cutvalue;o+=u?-l:l}}})),o},pm=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getAllNodes()[0].id;vm(t,{},1,e)},vm=function(t,e,n,r,i){var a,o=n,s=n,u=t.getNode(r);return e[r]=!0,null===(a=t.getNeighbors(r))||void 0===a||a.forEach((function(n){e[n.id]||(s=vm(t,e,s,n.id,r))})),u.data.low=o,u.data.lim=s++,i?u.data.parent=i:delete u.data.parent,s},gm=function(t){return t.getAllEdges().find((function(t){return t.data.cutvalue<0}))},ym=function(t,e,n){var r=n.source,i=n.target;e.getRelatedEdges(r,"out").find((function(t){return t.target===i}))||(r=n.target,i=n.source);var a=t.getNode(r),o=t.getNode(i),s=a,u=!1;a.data.lim>o.data.lim&&(s=o,u=!0);var c=e.getAllEdges().filter((function(e){return u===wm(t.getNode(e.source),s)&&u!==wm(t.getNode(e.target),s)}));return Py(c,(function(t){return om(e,t)}))},mm=function(t,e,n,r){var i=t.getRelatedEdges(n.source,"both").find((function(t){return t.source===n.target||t.target===n.target}));i&&t.removeEdge(i.id),t.addEdge({id:"e".concat(Math.random()),source:r.source,target:r.target,data:{}}),pm(t),fm(t,e),bm(t,e)},bm=function(t,e){var n=t.getAllNodes().find((function(t){return!t.data.parent})),r=Cy(t,n,"pre",!1);(r=r.slice(1)).forEach((function(n){var r=t.getNode(n).data.parent,i=e.getRelatedEdges(n,"out").find((function(t){return t.target===r})),a=!1;!i&&e.hasNode(r)&&(i=e.getRelatedEdges(r,"out").find((function(t){return t.target===n})),a=!0),e.getNode(n).data.rank=(e.hasNode(r)&&e.getNode(r).data.rank||0)+(a?null==i?void 0:i.data.minlen:-(null==i?void 0:i.data.minlen))}))},xm=function(t,e,n){return t.getRelatedEdges(e,"both").find((function(t){return t.source===n||t.target===n}))},wm=function(t,e){return e.data.low<=t.data.lim&&t.data.lim<=e.data.lim},km=am,Em=function(t){!function(t){var e=function(t){var e=new Zg;return t.getAllNodes().forEach((function(t){e.addNode(Object.assign({},t))})),t.getAllEdges().forEach((function(t){var n=e.getRelatedEdges(t.source,"out").find((function(e){return e.target===t.target}));n?e.updateEdgeData(null==n?void 0:n.id,Object.assign(Object.assign({},n.data),{weight:n.data.weight+t.data.weight||0,minlen:Math.max(n.data.minlen,t.data.minlen||1)})):e.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:t.data.weight||0,minlen:t.data.minlen||1}})})),e}(t);am(e);var n,r,i=function(t){var e,n,r=new Zg({tree:[]}),i=t.getAllNodes()[0],a=t.getAllNodes().length;for(r.addNode(i);sm(r,t)<a;)e=cm(r,t),n=r.hasNode(e.source)?om(t,e):-om(t,e),lm(r,t,n);return r}(e);for(pm(i),fm(i,e);n=gm(i);)r=ym(i,e,n),mm(i,e,n,r)}(t)},Om=function(t,e){var n=e.edgeLabelSpace,r=e.keepNodeOrder,i=e.prevGraph,a=e.rankdir,o=e.ranksep;!r&&i&&Mm(t,i);var s,u=Lm(t);n&&(e.ranksep=Rm(u,{rankdir:a,ranksep:o}));try{s=Sm(u,e)}catch(t){if("Not possible to find intersection inside of the rectangle"===t.message)return void console.error("The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\n",t);throw t}return Tm(t,u),s},Sm=function(t,e){var n=e.acyclicer,r=e.ranker,i=e.rankdir,a=void 0===i?"tb":i,o=e.nodeOrder,s=e.keepNodeOrder,u=e.align,c=e.nodesep,l=void 0===c?50:c,f=e.edgesep,d=void 0===f?20:f,h=e.ranksep,p=void 0===h?50:h;Vm(t),wy(t,n);var v=function(t){var e=Ey(t,"root",{},"_root"),n=function(t){var e={},n=function(r,i){var a=t.getChildren(r);null==a||a.forEach((function(t){return n(t.id,i+1)})),e[r]=i};return t.getRoots().forEach((function(t){return n(t.id,1)})),e}(t),r=Math.max.apply(Math,M(Object.values(n)));Math.abs(r)===1/0&&(r=1);var i=r-1,a=2*i+1;t.getAllEdges().forEach((function(t){t.data.minlen*=a}));var o=function(t){var e=0;return t.getAllEdges().forEach((function(t){e+=t.data.weight})),e}(t)+1;return t.getRoots().forEach((function(r){Iy(t,e,a,o,i,n,r.id)})),{nestingRoot:e,nodeRankFactor:a}}(t),g=v.nestingRoot,y=v.nodeRankFactor;!function(t,e){switch(e){case"network-simplex":Em(t);break;case"tight-tree":default:!function(t){!function(t){var e,n={},r=function(i){var a,o,s=t.getNode(i);return s?n[i]?s.data.rank:(n[i]=!0,null===(a=t.getRelatedEdges(i,"out"))||void 0===a||a.forEach((function(t){var e=r(t.target)-t.data.minlen;e&&(void 0===o||e<o)&&(o=e)})),o||(o=0),(void 0===e||o<e)&&(e=o),s.data.rank=o,o):0};t.getAllNodes().filter((function(e){return 0===t.getRelatedEdges(e.id,"in").length})).forEach((function(t){t&&r(t.id)})),void 0===e&&(e=0);var i={},a=function(e,n){var r,o=t.getNode(e),s=isNaN(o.data.layer)?n:o.data.layer;(void 0===o.data.rank||o.data.rank<s)&&(o.data.rank=s),i[e]||(i[e]=!0,null===(r=t.getRelatedEdges(e,"out"))||void 0===r||r.forEach((function(t){a(t.target,s+t.data.minlen)})))};t.getAllNodes().forEach((function(t){var n=t.data;n&&(isNaN(n.layer)?n.rank-=e:a(t.id,n.layer))}))}(t),function(t){var e,n,r=new Zg({tree:[]}),i=t.getAllNodes()[0],a=t.getAllNodes().length;for(r.addNode(i);um(r,t)<a;)e=cm(r,t),n=r.hasNode(e.source)?om(t,e):-om(t,e),lm(r,t,n)}(t)}(t);break;case"longest-path":km(t)}}(Oy(t),r),jm(t),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.getAllNodes(),r=n.filter((function(t){return void 0!==t.data.rank})).map((function(t){return t.data.rank})),i=Math.min.apply(Math,M(r)),a=[];n.forEach((function(t){var e=(t.data.rank||0)-i;a[e]||(a[e]=[]),a[e].push(t.id)}));for(var o=0,s=0;s<a.length;s++){var u=a[s];void 0===u?s%e!==0&&(o-=1):o&&(null==u||u.forEach((function(e){var n=t.getNode(e);n&&(n.data.rank=n.data.rank||0,n.data.rank+=o)})))}}(t,y),function(t,e){e&&t.removeNode(e),t.getAllEdges().forEach((function(e){e.data.nestingEdge&&t.removeEdge(e.id)}))}(t,g),function(t){var e=t.getAllNodes().filter((function(t){return void 0!==t.data.rank})).map((function(t){return t.data.rank})),n=Math.min.apply(Math,M(e));t.getAllNodes().forEach((function(t){t.data.hasOwnProperty("rank")&&n!==1/0&&(t.data.rank-=n)}))}(t),Dm(t),Im(t);var m=[];!function(t,e){t.getAllEdges().forEach((function(n){return function(t,e,n){var r=e.source,i=t.getNode(r).data.rank,a=e.target,o=t.getNode(a).data.rank,s=e.data.labelRank;if(o!==i+1){var u,c,l;for(t.removeEdge(e.id),l=0,++i;i<o;++l,++i)e.data.points=[],u=Ey(t,"edge",c={originalEdge:e,width:0,height:0,rank:i},"_d"),i===s&&(c.width=e.data.width,c.height=e.data.height,c.dummy=Fy,c.labelpos=e.data.labelpos),t.addEdge({id:"e".concat(Math.random()),source:r,target:u,data:{weight:e.data.weight}}),0===l&&n.push(u),r=u;t.addEdge({id:"e".concat(Math.random()),source:r,target:a,data:{weight:e.data.weight}})}}(t,n,e)}))}(t,m),function(t,e){var n=function(t){var e={},n=0,r=function(i){var a=n;t.getChildren(i).forEach((function(t){return r(t.id)})),e[i]={low:a,lim:n++}};return t.getRoots().forEach((function(t){return r(t.id)})),e}(t);e.forEach((function(e){var r,i,a=e,o=t.getNode(a),s=o.data.originalEdge;if(s)for(var u=function(t,e,n,r){var i,a,o,s,u=[],c=[],l=Math.min(e[n].low,e[r].low),f=Math.max(e[n].lim,e[r].lim);o=n;do{o=null===(i=t.getParent(o))||void 0===i?void 0:i.id,u.push(o)}while(o&&(e[o].low>l||f>e[o].lim));for(s=o,o=r;o&&o!==s;)c.push(o),o=null===(a=t.getParent(o))||void 0===a?void 0:a.id;return{lca:s,path:u.concat(c.reverse())}}(t,n,s.source,s.target),c=u.path,l=u.lca,f=0,d=c[f],h=!0;a!==s.target;){if(o=t.getNode(a),h){for(;d!==l&&(null===(r=t.getNode(d))||void 0===r?void 0:r.data.maxRank)<o.data.rank;)d=c[++f];d===l&&(h=!1)}if(!h){for(;f<c.length-1&&(null===(i=t.getNode(c[f+1]))||void 0===i?void 0:i.data.minRank)<=o.data.rank;)f++;d=c[f]}t.hasNode(d)&&t.setParent(a,d),a=t.getSuccessors(a)[0].id}}))}(t,m),function(t){var e=function(n){var r=t.getChildren(n),i=t.getNode(n);if((null==r?void 0:r.length)&&r.forEach((function(t){return e(t.id)})),i.data.hasOwnProperty("minRank")){i.data.borderLeft=[],i.data.borderRight=[];for(var a=i.data.minRank,o=i.data.maxRank+1;a<o;a+=1)_y(t,"borderLeft","_bl",n,i,a),_y(t,"borderRight","_br",n,i,a)}};t.getRoots().forEach((function(t){return e(t.id)}))}(t),s&&function(t,e){for(var n=t.getAllNodes().filter((function(e){var n;return!(null===(n=t.getChildren(e.id))||void 0===n?void 0:n.length)})),r=n.map((function(t){return t.data.rank})),i=Math.max.apply(Math,M(r)),a=[],o=0;o<i+1;o++)a[o]=[];null==e||e.forEach((function(e){var n=t.getNode(e);n&&!n.data.dummy&&(isNaN(n.data.rank)||(n.data.fixorder=a[n.data.rank].length,a[n.data.rank].push(e)))}))}(t,o),function(t,e){for(var n=Ay(t),r=[],i=[],a=1;a<n+1;a++)r.push(a);for(var o=n-1;o>-1;o--)i.push(o);var s=Xy(t,r,"in"),u=Xy(t,i,"out"),c=Gy(t);$y(t,c);for(var l,f=Number.POSITIVE_INFINITY,d=0,h=0;h<4;++d,++h){Ky(d%2?s:u,d%4>=2,!1,e),c=My(t);var p=By(t,c);p<f&&(h=0,l=tf(c),f=p)}c=Gy(t),$y(t,c);for(var v=0,g=0;g<4;++v,++g){Ky(v%2?s:u,v%4>=2,!0,e),c=My(t);var y=By(t,c);y<f&&(g=0,l=tf(c),f=y)}$y(t,l)}(t,s),Hm(t),function(t,e){var n=e.toLowerCase();"lr"!==n&&"rl"!==n||Ly(t)}(t,a),im(t,{align:u,nodesep:l,edgesep:d,ranksep:p}),Ym(t),Wm(t),function(t,e){e.forEach((function(e){var n,r=t.getNode(e),i=r.data.originalEdge;i&&t.addEdge(i);for(var a=e;r.data.dummy;)n=t.getSuccessors(a)[0],t.removeNode(a),i.data.points.push({x:r.data.x,y:r.data.y}),r.data.dummy===Fy&&(i.data.x=r.data.x,i.data.y=r.data.y,i.data.width=r.data.width,i.data.height=r.data.height),a=n.id,r=t.getNode(a)}))}(t,m),Bm(t),function(t,e){var n=e.toLowerCase();"bt"!==n&&"rl"!==n||function(t){t.getAllNodes().forEach((function(t){jy(t.data)})),t.getAllEdges().forEach((function(t){var e;null===(e=t.data.points)||void 0===e||e.forEach((function(t){return jy(t)})),t.data.hasOwnProperty("y")&&jy(t.data)}))}(t),"lr"!==n&&"rl"!==n||(function(t){t.getAllNodes().forEach((function(t){Dy(t.data)})),t.getAllEdges().forEach((function(t){var e;null===(e=t.data.points)||void 0===e||e.forEach((function(t){return Dy(t)})),t.data.hasOwnProperty("x")&&Dy(t.data)}))}(t),Ly(t))}(t,a);var b=Fm(t),x=b.width,w=b.height;return zm(t),Gm(t),function(t){t.getAllEdges().forEach((function(e){var n=e.data;if(n.reversed){t.removeEdge(e.id);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign(Object.assign({},n),{forwardName:r})})}}))}(t),{width:x,height:w}},Mm=function(t,e){t.getAllNodes().forEach((function(n){var r=t.getNode(n.id);if(e.hasNode(n.id)){var i=e.getNode(n.id);r.data.fixorder=i.data._order,delete i.data._order}else delete r.data.fixorder}))},Tm=function(t,e){t.getAllNodes().forEach((function(n){var r,i=t.getNode(n.id);if(i){var a=e.getNode(n.id);i.data.x=a.data.x,i.data.y=a.data.y,i.data._order=a.data.order,i.data._rank=a.data.rank,(null===(r=e.getChildren(n.id))||void 0===r?void 0:r.length)&&(i.data.width=a.data.width,i.data.height=a.data.height)}})),t.getAllEdges().forEach((function(n){var r=t.getEdge(n.id),i=e.getEdge(n.id);r.data.points=i?i.data.points:[],i&&i.data.hasOwnProperty("x")&&(r.data.x=i.data.x,r.data.y=i.data.y)}))},Am=["width","height","layer","fixorder"],Pm={width:0,height:0},Nm=["minlen","weight","width","height","labeloffset"],Cm={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},_m=["labelpos"],Lm=function(t){var e=new Zg({tree:[]});return t.getAllNodes().forEach((function(n){var r=qm(t.getNode(n.id).data),i=Object.assign(Object.assign({},Pm),r),a=Um(i,Am);e.hasNode(n.id)||e.addNode({id:n.id,data:Object.assign({},a)});var o=t.hasTreeStructure("combo")?t.getParent(n.id,"combo"):t.getParent(n.id);Me(o)||(e.hasNode(o.id)||e.addNode(Object.assign({},o)),e.setParent(n.id,o.id))})),t.getAllEdges().forEach((function(n){var r=qm(t.getEdge(n.id).data),i={};null==_m||_m.forEach((function(t){void 0!==r[t]&&(i[t]=r[t])})),e.addEdge({id:n.id,source:n.source,target:n.target,data:Object.assign({},Cm,Um(r,Nm),i)})})),e},Rm=function(t,e){var n=e.ranksep,r=void 0===n?0:n,i=e.rankdir;return t.getAllNodes().forEach((function(t){isNaN(t.data.layer)||t.data.layer||(t.data.layer=0)})),t.getAllEdges().forEach((function(t){var e;t.data.minlen*=2,"c"!==(null===(e=t.data.labelpos)||void 0===e?void 0:e.toLowerCase())&&("TB"===i||"BT"===i?t.data.width+=t.data.labeloffset:t.data.height+=t.data.labeloffset)})),r/2},jm=function(t){t.getAllEdges().forEach((function(e){if(e.data.width&&e.data.height){var n=t.getNode(e.source),r={e,rank:(t.getNode(e.target).data.rank-n.data.rank)/2+n.data.rank};Ey(t,"edge-proxy",r,"_ep")}}))},Dm=function(t){var e=0;return t.getAllNodes().forEach((function(n){var r,i;n.data.borderTop&&(n.data.minRank=null===(r=t.getNode(n.data.borderTop))||void 0===r?void 0:r.data.rank,n.data.maxRank=null===(i=t.getNode(n.data.borderBottom))||void 0===i?void 0:i.data.rank,e=Math.max(e,n.data.maxRank||-1/0))})),e},Im=function(t){t.getAllNodes().forEach((function(e){"edge-proxy"===e.data.dummy&&(t.getEdge(e.data.e.id).data.labelRank=e.data.rank,t.removeNode(e.id))}))},Fm=function(t,e){var n,r,i=0,a=0,o=e||{},s=o.marginx,u=void 0===s?0:s,c=o.marginy,l=void 0===c?0:c,f=function(t){if(t.data){var e=t.data.x,o=t.data.y,s=t.data.width,u=t.data.height;isNaN(e)||isNaN(s)||(void 0===n&&(n=e-s/2),n=Math.min(n,e-s/2),i=Math.max(i,e+s/2)),isNaN(o)||isNaN(u)||(void 0===r&&(r=o-u/2),r=Math.min(r,o-u/2),a=Math.max(a,o+u/2))}};return t.getAllNodes().forEach((function(t){f(t)})),t.getAllEdges().forEach((function(t){(null==t?void 0:t.data.hasOwnProperty("x"))&&f(t)})),n-=u,r-=l,t.getAllNodes().forEach((function(t){t.data.x-=n,t.data.y-=r})),t.getAllEdges().forEach((function(t){var e;null===(e=t.data.points)||void 0===e||e.forEach((function(t){t.x-=n,t.y-=r})),t.data.hasOwnProperty("x")&&(t.data.x-=n),t.data.hasOwnProperty("y")&&(t.data.y-=r)})),{width:i-n+u,height:a-r+l}},zm=function(t){t.getAllEdges().forEach((function(e){var n,r,i=t.getNode(e.source),a=t.getNode(e.target);e.data.points?(n=e.data.points[0],r=e.data.points[e.data.points.length-1]):(e.data.points=[],n={x:a.data.x,y:a.data.y},r={x:i.data.x,y:i.data.y}),e.data.points.unshift(Sy(i.data,n)),e.data.points.push(Sy(a.data,r))}))},Bm=function(t){t.getAllEdges().forEach((function(t){if(t.data.hasOwnProperty("x"))switch("l"!==t.data.labelpos&&"r"!==t.data.labelpos||(t.data.width-=t.data.labeloffset),t.data.labelpos){case"l":t.data.x-=t.data.width/2+t.data.labeloffset;break;case"r":t.data.x+=t.data.width/2+t.data.labeloffset}}))},Gm=function(t){t.getAllEdges().forEach((function(t){var e;t.data.reversed&&(null===(e=t.data.points)||void 0===e||e.reverse())}))},Wm=function(t){t.getAllNodes().forEach((function(e){var n,r,i;if(null===(n=t.getChildren(e.id))||void 0===n?void 0:n.length){var a=t.getNode(e.id),o=t.getNode(a.data.borderTop),s=t.getNode(a.data.borderBottom),u=t.getNode(a.data.borderLeft[(null===(r=a.data.borderLeft)||void 0===r?void 0:r.length)-1]),c=t.getNode(a.data.borderRight[(null===(i=a.data.borderRight)||void 0===i?void 0:i.length)-1]);a.data.width=Math.abs((null==c?void 0:c.data.x)-(null==u?void 0:u.data.x))||10,a.data.height=Math.abs((null==s?void 0:s.data.y)-(null==o?void 0:o.data.y))||10,a.data.x=((null==u?void 0:u.data.x)||0)+a.data.width/2,a.data.y=((null==o?void 0:o.data.y)||0)+a.data.height/2}})),t.getAllNodes().forEach((function(e){"border"===e.data.dummy&&t.removeNode(e.id)}))},Vm=function(t){t.getAllEdges().forEach((function(e){if(e.source===e.target){var n=t.getNode(e.source);n.data.selfEdges||(n.data.selfEdges=[]),n.data.selfEdges.push(e),t.removeEdge(e.id)}}))},Hm=function(t){var e=My(t);null==e||e.forEach((function(e){var n=0;null==e||e.forEach((function(e,r){var i,a=t.getNode(e);a.data.order=r+n,null===(i=a.data.selfEdges)||void 0===i||i.forEach((function(e){Ey(t,"selfedge",{width:e.data.width,height:e.data.height,rank:a.data.rank,order:r+ ++n,e},"_se")})),delete a.data.selfEdges}))}))},Ym=function(t){t.getAllNodes().forEach((function(e){var n=t.getNode(e.id);if("selfedge"===n.data.dummy){var r=t.getNode(n.data.e.source),i=r.data.x+r.data.width/2,a=r.data.y,o=n.data.x-i,s=r.data.height/2;t.hasEdge(n.data.e.id)?t.updateEdgeData(n.data.e.id,n.data.e.data):t.addEdge({id:n.data.e.id,source:n.data.e.source,target:n.data.e.target,data:n.data.e.data}),t.removeNode(e.id),n.data.e.data.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{y:a,x:i+o},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],n.data.e.data.x=n.data.x,n.data.e.data.y=n.data.y}}))},Um=function(t,e){var n={};return null==e||e.forEach((function(e){void 0!==t[e]&&(n[e]=+t[e])})),n},qm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return Object.keys(t).forEach((function(n){e[n.toLowerCase()]=t[n]})),e};function Xm(t){if(!t)return[0,0,0];if(Oe(t))return[t,t,t];if(0===t.length)return[0,0,0];var e=g(t,3),n=e[0],r=e[1],i=void 0===r?n:r,a=e[2];return[n,i,void 0===a?n:a]}function Km(t,e){return _n(e)?e:Oe(e)?function(){return e}:function(){return t}}function $m(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e||0===e?_n(e)?e:Oe(e)?function(){return e}:Array.isArray(e)?function(){return n?Math.max.apply(Math,M(e))||t:e}:Ln(e)&&e.width&&e.height?function(){return n?Math.max(e.width,e.height)||t:[e.width,e.height]}:function(){return t}:function(e){var r=(e.data||{}).size;return r?Array.isArray(r)?n?Math.max.apply(Math,M(r))||t:r:Ln(r)&&r.width&&r.height?n?Math.max(r.width,r.height)||t:[r.width,r.height]:r:t}}var Zm=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i="function"==typeof e?e:function(){return e||0};return n=t?Array.isArray(t)?function(e){return t}:_n(t)?t:function(e){return t}:function(t){var e,n,i;if(null===(e=t.data)||void 0===e?void 0:e.bboxSize)return null===(n=t.data)||void 0===n?void 0:n.bboxSize;if(null===(i=t.data)||void 0===i?void 0:i.size){var a=t.data.size;return Array.isArray(a)?a:Ln(a)?[a.width,a.height]:a}return r},function(t){var e=n(t),r=i(t);return Math.max.apply(Math,M(Xm(e)))+r}},Qm=function(t){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){var e=[];return t.forEach((function(t){e.push(t)})),e.map((function(t){return Qm(t)}))}if("object"==typeof t){var n={};return Object.keys(t).forEach((function(e){n[e]=Qm(t[e])})),n}return t},Jm=function(t,e){var n=Qm(t);return n.data=n.data||{},e&&(Oe(n.data.x)||(n.data.x=Math.random()*e[0]),Oe(n.data.y)||(n.data.y=Math.random()*e[1])),n},tb={rankdir:"TB",nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:"tight-tree",controlPoints:!1,radial:!1,focusNode:null},eb=function(){return O((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),this.options=e,this.id="antv-dagre",this.options=Object.assign(Object.assign({},tb),e)}),[{key:"execute",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericDagreLayout(!1,t,e));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericDagreLayout(!0,t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericDagreLayout",value:function(t,e,n){return Le(this,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h,p,v,g,y,m,b,x,w,k,E,O,S,M,T,A,P,N,C,_,L,R,j,D,I,F,z,B,G;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=Object.assign(Object.assign({},this.options),n),a=i.nodeSize,o=i.align,s=i.rankdir,u=void 0===s?"TB":s,c=i.ranksep,l=i.nodesep,f=i.ranksepFunc,d=i.nodesepFunc,h=i.edgeLabelSpace,p=i.ranker,v=i.nodeOrder,g=i.begin,y=i.controlPoints,m=i.radial,b=i.sortByCombo,x=i.preset,w=new Zg({tree:[]}),k=Km(c||50,f),E=Km(l||50,d),O=E,S=k,"LR"!==u&&"RL"!==u||(O=k,S=E),M=$m(10,a,!1),T=e.getAllNodes(),A=e.getAllEdges(),T.forEach((function(t){var e=Xm(M(t)),n=S(t),r=O(t),i=e[0]+2*r,a=e[1]+2*n,o=t.data.layer;Oe(o)?w.addNode({id:t.id,data:{width:i,height:a,layer:o}}):w.addNode({id:t.id,data:{width:i,height:a}})})),b&&(w.attachTreeStructure("combo"),T.forEach((function(t){var e=t.data.parentId;void 0!==e&&w.hasNode(e)&&w.setParent(t.id,e,"combo")}))),A.forEach((function(t){w.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:t.data.weight||1}})})),P=void 0,(null==x?void 0:x.length)&&(P=new Zg({nodes:x})),Om(w,{prevGraph:P,edgeLabelSpace:h,keepNodeOrder:!!v,nodeOrder:v||[],acyclicer:"greedy",ranker:p,rankdir:u,nodesep:l,align:o}),N=[0,0],g&&(C=1/0,_=1/0,w.getAllNodes().forEach((function(t){C>t.data.x&&(C=t.data.x),_>t.data.y&&(_=t.data.y)})),w.getAllEdges().forEach((function(t){var e;null===(e=t.data.points)||void 0===e||e.forEach((function(t){C>t.x&&(C=t.x),_>t.y&&(_=t.y)}))})),N[0]=g[0]-C,N[1]=g[1]-_),L="LR"===u||"RL"===u,m||(R=new Set,j="BT"===u||"RL"===u?function(t,e){return e-t}:function(t,e){return t-e},w.getAllNodes().forEach((function(t){t.data.x=t.data.x+N[0],t.data.y=t.data.y+N[1],R.add(L?t.data.x:t.data.y)})),D=Array.from(R).sort(j),I=L?function(t,e){return t.x!==e.x}:function(t,e){return t.y!==e.y},F=L?function(t,e,n){var r=Math.max(e.y,n.y),i=Math.min(e.y,n.y);return t.filter((function(t){return t.y<=r&&t.y>=i}))}:function(t,e,n){var r=Math.max(e.x,n.x),i=Math.min(e.x,n.x);return t.filter((function(t){return t.x<=r&&t.x>=i}))},w.getAllEdges().forEach((function(t,e){var n;h&&y&&"loop"!==t.data.type&&(t.data.controlPoints=nb(null===(n=t.data.points)||void 0===n?void 0:n.map((function(t){var e=t.x,n=t.y;return{x:e+N[0],y:n+N[1]}})),w.getNode(t.source),w.getNode(t.target),D,L,I,F))}))),z=[],z=w.getAllNodes().map((function(t){return Jm(t)})),B=w.getAllEdges(),t&&(z.forEach((function(t){e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})})),B.forEach((function(t){e.mergeEdgeData(t.id,{controlPoints:t.data.controlPoints})}))),G={nodes:z,edges:B},r.abrupt("return",G);case 27:case"end":return r.stop()}}),r,this)})))}}])}(),nb=function(t,e,n,r,i,a,o){var s=(null==t?void 0:t.slice(1,t.length-1))||[];if(e&&n){var u=e.data,c=u.x,l=u.y,f=n.data,d=f.x,h=f.y;if(i&&(c=e.data.y,l=e.data.x,d=n.data.y,h=n.data.x),h!==l&&c!==d){var p=r.indexOf(l),v=r[p+1];if(v){var g=s[0],y=i?{x:(l+v)/2,y:(null==g?void 0:g.y)||d}:{x:(null==g?void 0:g.x)||d,y:(l+v)/2};g&&!a(g,y)||s.unshift(y)}var m=r.indexOf(h),b=Math.abs(m-p);if(1===b)(s=o(s,e.data,n.data)).length||s.push(i?{x:(l+h)/2,y:c}:{x:c,y:(l+h)/2});else if(b>1){var x=r[m-1];if(x){var w=s[s.length-1],k=i?{x:(h+x)/2,y:(null==w?void 0:w.y)||d}:{x:(null==w?void 0:w.x)||c,y:(h+x)/2};w&&!a(w,k)||s.push(k)}}}}return s},rb=function(t,e,n){var r=t.getAllNodes(),i=t.getAllEdges();return(null==r?void 0:r.length)?1===r.length?(e&&t.mergeNodeData(r[0].id,{x:n[0],y:n[1]}),{nodes:[Object.assign(Object.assign({},r[0]),{data:Object.assign(Object.assign({},r[0].data),{x:n[0],y:n[1]})})],edges:i}):void 0:{nodes:[],edges:i}},ib={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1},ab=function(){return O((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),this.options=e,this.id="circular",this.options=Object.assign(Object.assign({},ib),e)}),[{key:"execute",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericCircularLayout(!1,t,e));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericCircularLayout(!0,t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericCircularLayout",value:function(t,e,n){return Le(this,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h,p,v,y,m,b,x,w,k,E,O,S,M,T,A,P,N,C,_,L,R,j,D,I,F,z,B,G;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=Object.assign(Object.assign({},this.options),n),a=i.width,o=i.height,s=i.center,u=i.divisions,c=i.startAngle,l=void 0===c?0:c,f=i.endAngle,d=void 0===f?2*Math.PI:f,h=i.angleRatio,p=i.ordering,v=i.clockwise,y=i.nodeSpacing,m=i.nodeSize,b=e.getAllNodes(),x=e.getAllEdges(),w=ub(a,o,s),k=g(w,3),E=k[0],O=k[1],S=k[2],(M=null==b?void 0:b.length)&&1!==M){r.next=8;break}return r.abrupt("return",rb(e,t,S));case 8:for(T=(d-l)/M,A=i.radius,P=i.startRadius,N=i.endRadius,y?(C=Km(10,y),_=$m(10,m),L=-1/0,b.forEach((function(t){var e=_(t);L<e&&(L=e)})),R=0,b.forEach((function(t,e){R+=0===e?L||10:(C(t)||0)+(L||10)})),A=R/(2*Math.PI)):A||P||N?!P&&N?P=N:P&&!N&&(N=P):A=Math.min(O,E)/2,j=T*h,D=[],D="topology"===p?ob(e,b):"topology-directed"===p?ob(e,b,!0):"degree"===p?sb(e,b):b.map((function(t){return Jm(t)})),I=Math.ceil(M/u),F=0;F<M;++F)(z=A)||null===P||null===N||(z=P+F*(N-P)/(M-1)),z||(z=10+100*F/(M-1)),B=l+F%I*j+2*Math.PI/u*Math.floor(F/I),v||(B=d-F%I*j-2*Math.PI/u*Math.floor(F/I)),D[F].data.x=S[0]+Math.cos(B)*z,D[F].data.y=S[1]+Math.sin(B)*z;return t&&D.forEach((function(t){e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})})),G={nodes:D,edges:x},r.abrupt("return",G);case 19:case"end":return r.stop()}}),r,this)})))}}])}(),ob=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[Jm(e[0])],i={},a=e.length;i[e[0].id]=!0;var o=0;return e.forEach((function(s,u){if(0!==u)if(u!==a-1&&t.getDegree(s.id,"both")===t.getDegree(e[u+1].id,"both")&&!t.areNeighbors(r[o].id,s.id)||i[s.id]){for(var c=n?t.getSuccessors(r[o].id):t.getNeighbors(r[o].id),l=!1,f=0;f<c.length;f++){var d=c[f];if(t.getDegree(d.id)===t.getDegree(s.id)&&!i[d.id]){r.push(Jm(d)),i[d.id]=!0,l=!0;break}}for(var h=0;!l&&(i[e[h].id]||(r.push(Jm(e[h])),i[e[h].id]=!0,l=!0),++h!==a););}else r.push(Jm(s)),i[s.id]=!0,o++})),r};function sb(t,e){var n=[];return e.forEach((function(t,e){n.push(Jm(t))})),n.sort((function(e,n){return t.getDegree(e.id,"both")-t.getDegree(n.id,"both")})),n}var ub=function(t,e,n){var r=t,i=e,a=n;return r||"undefined"==typeof window||(r=window.innerWidth),i||"undefined"==typeof window||(i=window.innerHeight),a||(a=[r/2,i/2]),[r,i,a]},cb=Array.isArray,lb={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"},fb=function(){return O((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),this.options=e,this.id="concentric",this.options=Object.assign(Object.assign({},lb),e)}),[{key:"execute",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericConcentricLayout(!1,t,e));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericConcentricLayout(!0,t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericConcentricLayout",value:function(t,e,n){return Le(this,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h,p,v,g,y,m,b,x,w,k,E,O,S,T,A,P,N,C,_,L,R,j,D,I,F,z,B,G,W,V;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=Object.assign(Object.assign({},this.options),n),a=i.center,o=i.width,s=i.height,u=i.sortBy,c=i.maxLevelDiff,l=i.sweep,f=i.clockwise,d=i.equidistant,h=i.preventOverlap,p=i.startAngle,v=void 0===p?1.5*Math.PI:p,g=i.nodeSize,y=i.nodeSpacing,m=e.getAllNodes(),b=e.getAllEdges(),x=o||"undefined"==typeof window?o:window.innerWidth,w=s||"undefined"==typeof window?s:window.innerHeight,k=a||[x/2,w/2],(null==m?void 0:m.length)&&1!==m.length){r.next=9;break}return r.abrupt("return",rb(e,t,k));case 9:if(E=[],S=0,cb(g)?O=Math.max(g[0],g[1]):_n(g)?(O=-1/0,m.forEach((function(t){var e=Math.max.apply(Math,M(Xm(g(t))));e>O&&(O=e)}))):O=g,cb(y)?S=Math.max(y[0],y[1]):Oe(y)&&(S=y),m.forEach((function(t){var e=Jm(t);E.push(e);var n=O,r=e.data;cb(r.size)?n=Math.max(r.size[0],r.size[1]):Oe(r.size)?n=r.size:Ln(r.size)&&(n=Math.max(r.size.width,r.size.height)),O=Math.max(O,n),_n(y)&&(S=Math.max(y(t),S))})),T={},E.forEach((function(t,e){T[t.id]=e})),Te(A=u)&&void 0!==E[0].data[A]||(A="degree"),"degree"===A?E.sort((function(t,n){return e.getDegree(n.id,"both")-e.getDegree(t.id,"both")})):E.sort((function(t,e){return e.data[A]-t.data[A]})),P=E[0],N=(c||("degree"===A?e.getDegree(P.id,"both"):P.data[A]))/4,_=(C=[{nodes:[]}])[0],E.forEach((function(t){if(_.nodes.length>0){var n="degree"===A?Math.abs(e.getDegree(_.nodes[0].id,"both")-e.getDegree(t.id,"both")):Math.abs(_.nodes[0].data[A]-t.data[A]);N&&n>=N&&(_={nodes:[]},C.push(_))}_.nodes.push(t)})),L=O+S,h||(R=C.length>0&&C[0].nodes.length>1,j=Math.min(x,w)/2-L,D=j/(C.length+(R?1:0)),L=Math.min(L,D)),I=0,C.forEach((function(t){var e=void 0===l?2*Math.PI-2*Math.PI/t.nodes.length:l;if(t.dTheta=e/Math.max(1,t.nodes.length-1),t.nodes.length>1&&h){var n=Math.cos(t.dTheta)-Math.cos(0),r=Math.sin(t.dTheta)-Math.sin(0),i=Math.sqrt(L*L/(n*n+r*r));I=Math.max(i,I)}t.r=I,I+=L})),d){for(F=0,z=0,B=0;B<C.length;B++)G=C[B],W=(G.r||0)-z,F=Math.max(F,W);z=0,C.forEach((function(t,e){0===e&&(z=t.r||0),t.r=z,z+=F}))}return C.forEach((function(t){var e=t.dTheta||0,n=t.r||0;t.nodes.forEach((function(t,r){var i=v+(f?1:-1)*e*r;t.data.x=k[0]+n*Math.cos(i),t.data.y=k[1]+n*Math.sin(i)}))})),t&&E.forEach((function(t){return e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})})),V={nodes:E,edges:b},r.abrupt("return",V);case 33:case"end":return r.stop()}}),r,this)})))}}])}();function db(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,u,c,l,f,d,h=t._root,p={data:r},v=t._x0,g=t._y0,y=t._x1,m=t._y1;if(!h)return t._root=p,t;for(;h.length;)if((c=e>=(a=(v+y)/2))?v=a:y=a,(l=n>=(o=(g+m)/2))?g=o:m=o,i=h,!(h=h[f=l<<1|c]))return i[f]=p,t;if(s=+t._x.call(null,h.data),u=+t._y.call(null,h.data),e===s&&n===u)return p.next=h,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(a=(v+y)/2))?v=a:y=a,(l=n>=(o=(g+m)/2))?g=o:m=o}while((f=l<<1|c)==(d=(u>=o)<<1|s>=a));return i[d]=h,i[f]=p,t}function hb(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function pb(t){return t[0]}function vb(t){return t[1]}function gb(t,e,n){var r=new yb(null==e?pb:e,null==n?vb:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function yb(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function mb(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var bb=gb.prototype=yb.prototype;function xb(t,e,n,r,i){if(isNaN(e)||isNaN(n)||isNaN(r))return t;var a,o,s,u,c,l,f,d,h,p,v,g,y=t._root,m={data:i},b=t._x0,x=t._y0,w=t._z0,k=t._x1,E=t._y1,O=t._z1;if(!y)return t._root=m,t;for(;y.length;)if((d=e>=(o=(b+k)/2))?b=o:k=o,(h=n>=(s=(x+E)/2))?x=s:E=s,(p=r>=(u=(w+O)/2))?w=u:O=u,a=y,!(y=y[v=p<<2|h<<1|d]))return a[v]=m,t;if(c=+t._x.call(null,y.data),l=+t._y.call(null,y.data),f=+t._z.call(null,y.data),e===c&&n===l&&r===f)return m.next=y,a?a[v]=m:t._root=m,t;do{a=a?a[v]=new Array(8):t._root=new Array(8),(d=e>=(o=(b+k)/2))?b=o:k=o,(h=n>=(s=(x+E)/2))?x=s:E=s,(p=r>=(u=(w+O)/2))?w=u:O=u}while((v=p<<2|h<<1|d)==(g=(f>=u)<<2|(l>=s)<<1|c>=o));return a[g]=y,a[v]=m,t}function wb(t,e,n,r,i,a,o){this.node=t,this.x0=e,this.y0=n,this.z0=r,this.x1=i,this.y1=a,this.z1=o}bb.copy=function(){var t,e,n=new yb(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=mb(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=mb(e));return n},bb.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return db(this.cover(e,n),e,n,t)},bb.addAll=function(t){var e,n,r,i,a=t.length,o=new Array(a),s=new Array(a),u=1/0,c=1/0,l=-1/0,f=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,s[n]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>f&&(f=i));if(u>l||c>f)return this;for(this.cover(u,c).cover(l,f),n=0;n<a;++n)db(this,o[n],s[n],t[n]);return this},bb.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,s,u=i-n||1,c=this._root;n>t||t>=i||r>e||e>=a;)switch(s=(e<r)<<1|t<n,(o=new Array(4))[s]=c,c=o,u*=2,s){case 0:i=n+u,a=r+u;break;case 1:n=i-u,a=r+u;break;case 2:i=n+u,r=a-u;break;case 3:n=i-u,r=a-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},bb.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},bb.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},bb.find=function(t,e,n){var r,i,a,o,s,u,c,l=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],v=this._root;for(v&&p.push(new hb(v,l,f,d,h)),null==n?n=1/0:(l=t-n,f=e-n,d=t+n,h=e+n,n*=n);u=p.pop();)if(!(!(v=u.node)||(i=u.x0)>d||(a=u.y0)>h||(o=u.x1)<l||(s=u.y1)<f))if(v.length){var g=(i+o)/2,y=(a+s)/2;p.push(new hb(v[3],g,y,o,s),new hb(v[2],i,y,g,s),new hb(v[1],g,a,o,y),new hb(v[0],i,a,g,y)),(c=(e>=y)<<1|t>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var m=t-+this._x.call(null,v.data),b=e-+this._y.call(null,v.data),x=m*m+b*b;if(x<n){var w=Math.sqrt(n=x);l=t-w,f=e-w,d=t+w,h=e+w,r=v.data}}return r},bb.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,u,c,l,f,d,h=this._root,p=this._x0,v=this._y0,g=this._x1,y=this._y1;if(!h)return this;if(h.length)for(;;){if((c=a>=(s=(p+g)/2))?p=s:g=s,(l=o>=(u=(v+y)/2))?v=u:y=u,e=h,!(h=h[f=l<<1|c]))return this;if(!h.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,d=f)}for(;h.data!==t;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},bb.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},bb.root=function(){return this._root},bb.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},bb.visit=function(t){var e,n,r,i,a,o,s=[],u=this._root;for(u&&s.push(new hb(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&u.length){var c=(r+a)/2,l=(i+o)/2;(n=u[3])&&s.push(new hb(n,c,l,a,o)),(n=u[2])&&s.push(new hb(n,r,l,c,o)),(n=u[1])&&s.push(new hb(n,c,i,a,l)),(n=u[0])&&s.push(new hb(n,r,i,c,l))}return this},bb.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new hb(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,u=e.x1,c=e.y1,l=(o+u)/2,f=(s+c)/2;(a=i[0])&&n.push(new hb(a,o,s,l,f)),(a=i[1])&&n.push(new hb(a,l,s,u,f)),(a=i[2])&&n.push(new hb(a,o,f,l,c)),(a=i[3])&&n.push(new hb(a,l,f,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},bb.x=function(t){return arguments.length?(this._x=t,this):this._x},bb.y=function(t){return arguments.length?(this._y=t,this):this._y};var kb=function(t,e,n,r,i,a){return Math.sqrt(Math.pow(t-r,2)+Math.pow(e-i,2)+Math.pow(n-a,2))};function Eb(t){return t[0]}function Ob(t){return t[1]}function Sb(t){return t[2]}function Mb(t,e,n,r){var i=new Tb(null==e?Eb:e,null==n?Ob:n,null==r?Sb:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function Tb(t,e,n,r,i,a,o,s,u){this._x=t,this._y=e,this._z=n,this._x0=r,this._y0=i,this._z0=a,this._x1=o,this._y1=s,this._z1=u,this._root=void 0}function Ab(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Pb=Mb.prototype=Tb.prototype;function Nb(t){var e=0,n=0,r=0,i=0,a=0,o=t.length;if(o){for(var s=0;s<o;s++){var u=t[s];u&&u.weight&&(e+=u.weight,n+=u.x*u.weight,r+=u.y*u.weight,i+=u.z*u.weight,a+=u.size*u.weight)}t.x=n/e,t.y=r/e,t.z=i/e,t.size=a/e,t.weight=e}else{var c=t;t.x=c.data.x,t.y=c.data.y,t.z=c.data.z,t.size=c.data.size,t.weight=c.data.weight}}Pb.copy=function(){var t,e,n=new Tb(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root;if(!r)return n;if(!r.length)return n._root=Ab(r),n;for(t=[{source:r,target:n._root=new Array(8)}];r=t.pop();)for(var i=0;i<8;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(8)}):r.target[i]=Ab(e));return n},Pb.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t),r=+this._z.call(null,t);return xb(this.cover(e,n,r),e,n,r,t)},Pb.addAll=function(t){Array.isArray(t)||(t=Array.from(t));for(var e,n,r,i,a=t.length,o=new Float64Array(a),s=new Float64Array(a),u=new Float64Array(a),c=1/0,l=1/0,f=1/0,d=-1/0,h=-1/0,p=-1/0,v=0;v<a;++v)isNaN(n=+this._x.call(null,e=t[v]))||isNaN(r=+this._y.call(null,e))||isNaN(i=+this._z.call(null,e))||(o[v]=n,s[v]=r,u[v]=i,n<c&&(c=n),n>d&&(d=n),r<l&&(l=r),r>h&&(h=r),i<f&&(f=i),i>p&&(p=i));if(c>d||l>h||f>p)return this;this.cover(c,l,f).cover(d,h,p);for(var g=0;g<a;++g)xb(this,o[g],s[g],u[g],t[g]);return this},Pb.cover=function(t,e,n){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,a=this._z0,o=this._x1,s=this._y1,u=this._z1;if(isNaN(r))o=(r=Math.floor(t))+1,s=(i=Math.floor(e))+1,u=(a=Math.floor(n))+1;else{for(var c,l,f=o-r||1,d=this._root;r>t||t>=o||i>e||e>=s||a>n||n>=u;)switch(l=(n<a)<<2|(e<i)<<1|t<r,(c=new Array(8))[l]=d,d=c,f*=2,l){case 0:o=r+f,s=i+f,u=a+f;break;case 1:r=o-f,s=i+f,u=a+f;break;case 2:o=r+f,i=s-f,u=a+f;break;case 3:r=o-f,i=s-f,u=a+f;break;case 4:o=r+f,s=i+f,a=u-f;break;case 5:r=o-f,s=i+f,a=u-f;break;case 6:o=r+f,i=s-f,a=u-f;break;case 7:r=o-f,i=s-f,a=u-f}this._root&&this._root.length&&(this._root=d)}return this._x0=r,this._y0=i,this._z0=a,this._x1=o,this._y1=s,this._z1=u,this},Pb.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Pb.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},Pb.find=function(t,e,n,r){var i,a,o,s,u,c,l,f,d,h=this._x0,p=this._y0,v=this._z0,g=this._x1,y=this._y1,m=this._z1,b=[],x=this._root;for(x&&b.push(new wb(x,h,p,v,g,y,m)),null==r?r=1/0:(h=t-r,p=e-r,v=n-r,g=t+r,y=e+r,m=n+r,r*=r);f=b.pop();)if(!(!(x=f.node)||(a=f.x0)>g||(o=f.y0)>y||(s=f.z0)>m||(u=f.x1)<h||(c=f.y1)<p||(l=f.z1)<v))if(x.length){var w=(a+u)/2,k=(o+c)/2,E=(s+l)/2;b.push(new wb(x[7],w,k,E,u,c,l),new wb(x[6],a,k,E,w,c,l),new wb(x[5],w,o,E,u,k,l),new wb(x[4],a,o,E,w,k,l),new wb(x[3],w,k,s,u,c,E),new wb(x[2],a,k,s,w,c,E),new wb(x[1],w,o,s,u,k,E),new wb(x[0],a,o,s,w,k,E)),(d=(n>=E)<<2|(e>=k)<<1|t>=w)&&(f=b[b.length-1],b[b.length-1]=b[b.length-1-d],b[b.length-1-d]=f)}else{var O=t-+this._x.call(null,x.data),S=e-+this._y.call(null,x.data),M=n-+this._z.call(null,x.data),T=O*O+S*S+M*M;if(T<r){var A=Math.sqrt(r=T);h=t-A,p=e-A,v=n-A,g=t+A,y=e+A,m=n+A,i=x.data}}return i},Pb.findAllWithinRadius=function(t,e,n,r){var i=this,a=[],o=t-r,s=e-r,u=n-r,c=t+r,l=e+r,f=n+r;return this.visit((function(d,h,p,v,g,y,m){if(!d.length)do{var b=d.data;kb(t,e,n,i._x(b),i._y(b),i._z(b))<=r&&a.push(b)}while(d=d.next);return h>c||p>l||v>f||g<o||y<s||m<u})),a},Pb.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t))||isNaN(s=+this._z.call(null,t)))return this;var e,n,r,i,a,o,s,u,c,l,f,d,h,p,v,g=this._root,y=this._x0,m=this._y0,b=this._z0,x=this._x1,w=this._y1,k=this._z1;if(!g)return this;if(g.length)for(;;){if((f=a>=(u=(y+x)/2))?y=u:x=u,(d=o>=(c=(m+w)/2))?m=c:w=c,(h=s>=(l=(b+k)/2))?b=l:k=l,e=g,!(g=g[p=h<<2|d<<1|f]))return this;if(!g.length)break;(e[p+1&7]||e[p+2&7]||e[p+3&7]||e[p+4&7]||e[p+5&7]||e[p+6&7]||e[p+7&7])&&(n=e,v=p)}for(;g.data!==t;)if(r=g,!(g=g.next))return this;return(i=g.next)&&delete g.next,r?(i?r.next=i:delete r.next,this):e?(i?e[p]=i:delete e[p],(g=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&g===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!g.length&&(n?n[v]=g:this._root=g),this):(this._root=i,this)},Pb.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Pb.root=function(){return this._root},Pb.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Pb.visit=function(t){var e,n,r,i,a,o,s,u,c=[],l=this._root;for(l&&c.push(new wb(l,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=c.pop();)if(!t(l=e.node,r=e.x0,i=e.y0,a=e.z0,o=e.x1,s=e.y1,u=e.z1)&&l.length){var f=(r+o)/2,d=(i+s)/2,h=(a+u)/2;(n=l[7])&&c.push(new wb(n,f,d,h,o,s,u)),(n=l[6])&&c.push(new wb(n,r,d,h,f,s,u)),(n=l[5])&&c.push(new wb(n,f,i,h,o,d,u)),(n=l[4])&&c.push(new wb(n,r,i,h,f,d,u)),(n=l[3])&&c.push(new wb(n,f,d,a,o,s,h)),(n=l[2])&&c.push(new wb(n,r,d,a,f,s,h)),(n=l[1])&&c.push(new wb(n,f,i,a,o,d,h)),(n=l[0])&&c.push(new wb(n,r,i,a,f,d,h))}return this},Pb.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new wb(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,u=e.z0,c=e.x1,l=e.y1,f=e.z1,d=(o+c)/2,h=(s+l)/2,p=(u+f)/2;(a=i[0])&&n.push(new wb(a,o,s,u,d,h,p)),(a=i[1])&&n.push(new wb(a,d,s,u,c,h,p)),(a=i[2])&&n.push(new wb(a,o,h,u,d,l,p)),(a=i[3])&&n.push(new wb(a,d,h,u,c,l,p)),(a=i[4])&&n.push(new wb(a,o,s,p,d,h,f)),(a=i[5])&&n.push(new wb(a,d,s,p,c,h,f)),(a=i[6])&&n.push(new wb(a,o,h,p,d,l,f)),(a=i[7])&&n.push(new wb(a,d,h,p,c,l,f))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.z0,e.x1,e.y1,e.z1);return this},Pb.x=function(t){return arguments.length?(this._x=t,this):this._x},Pb.y=function(t){return arguments.length?(this._y=t,this):this._y},Pb.z=function(t){return arguments.length?(this._z=t,this):this._z};var Cb=function(t,e,n,r,i,a,o){var s;if((null===(s=t.data)||void 0===s?void 0:s.id)!==a.id){for(var u=[n,r,i][o-1],c=a.x-t.x||.1,l=a.y-t.y||.1,f=a.z-t.z||.1,d=[c,l,f],h=u-e,p=0,v=0;v<o;v++)p+=d[v]*d[v];var g=Math.sqrt(p)*p;if(h*h*.81<p){var y=t.weight/g;return a.vx+=c*y,a.vy+=l*y,a.vz+=f*y,!0}if(t.length)return!1;if(t.data!==a){var m=t.data.weight/g;a.vx+=c*m,a.vy+=l*m,a.vz+=f*m}}},_b={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:"mean"},Lb=function(){return O((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),this.options=e,this.id="force",this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},_b),e)}),[{key:"execute",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericForceLayout(!1,t,e));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericForceLayout(!0,t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"stop",value:function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval),this.running=!1}},{key:"tick",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.maxIteration||1;if(this.lastResult)return this.lastResult;for(var n=0;(this.judgingDistance>this.lastOptions.minMovement||n<1)&&n<e;n++)this.runOneStep(this.lastCalcGraph,this.lastGraph,n,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);var r={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&r.nodes.forEach((function(e){return t.lastGraph.mergeNodeData(e.id,{x:e.data.x,y:e.data.y,z:3===t.options.dimensions?e.data.z:void 0})})),r}},{key:"genericForceLayout",value:function(t,e,n){return Le(this,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h,p,v,g,y,m,b,x,w,k,E,O=this;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=Object.assign(Object.assign({},this.options),n),a=e.getAllNodes(),o=e.getAllEdges(),s=this.formatOptions(i,e),u=s.dimensions,c=s.width,l=s.height,f=s.nodeSize,d=s.getMass,h=s.nodeStrength,p=s.edgeStrength,v=s.linkDistance,g=a.map((function(t,e){return Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{x:Oe(t.data.x)?t.data.x:Math.random()*c,y:Oe(t.data.y)?t.data.y:Math.random()*l,z:Oe(t.data.z)?t.data.z:Math.random()*Math.sqrt(c*l),size:f(t)||30,mass:d(t),nodeStrength:h(t)})})})),y=o.map((function(t){return Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{edgeStrength:p(t),linkDistance:v(t,e.getNode(t.source),e.getNode(t.target))})})})),null==a?void 0:a.length){r.next=10;break}return this.lastResult={nodes:[],edges:o},r.abrupt("return",{nodes:[],edges:o});case 10:if(m={},a.forEach((function(t,e){m[t.id]={x:0,y:0,z:0}})),b=new Zg({nodes:g,edges:y}),this.formatCentripetal(s,b),x=s.maxIteration,w=s.minMovement,k=s.onTick,this.lastLayoutNodes=g,this.lastLayoutEdges=y,this.lastAssign=t,this.lastGraph=e,this.lastCalcGraph=b,this.lastOptions=s,this.lastVelMap=m,"undefined"!=typeof window){r.next=24;break}return r.abrupt("return");case 24:return E=0,r.abrupt("return",new Promise((function(n){O.timeInterval=window.setInterval((function(){a&&O.running||n({nodes:Fb(e,g),edges:o}),O.runOneStep(b,e,E,m,s),O.updatePosition(e,b,m,s),t&&g.forEach((function(t){return e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y,z:3===u?t.data.z:void 0})})),null==k||k({nodes:Fb(e,g),edges:o}),(++E>=x||O.judgingDistance<w)&&(window.clearInterval(O.timeInterval),n({nodes:Fb(e,g),edges:o}))}),0),O.running=!0})));case 26:case"end":return r.stop()}}),r,this)})))}},{key:"formatOptions",value:function(t,e){var n=Object.assign({},t),r=t.width,i=t.height,a=t.getMass;n.width=r||"undefined"==typeof window?r:window.innerWidth,n.height=i||"undefined"==typeof window?i:window.innerHeight,t.center||(n.center=[n.width/2,n.height/2]),a||(n.getMass=function(t){var n=1;Oe(null==t?void 0:t.data.mass)&&(n=null==t?void 0:t.data.mass);var r=e.getDegree(t.id,"both");return!r||r<5?n:5*r*n}),n.nodeSize=Zm(t.nodeSize,t.nodeSpacing);var o=t.linkDistance?Km(1,t.linkDistance):function(t){return 1+n.nodeSize(e.getNode(t.source))+n.nodeSize(e.getNode(t.target))};return n.linkDistance=o,n.nodeStrength=Km(1,t.nodeStrength),n.edgeStrength=Km(1,t.edgeStrength),n}},{key:"formatCentripetal",value:function(t,e){var n,r,i=t.dimensions,a=t.centripetalOptions,o=t.center,s=t.clusterNodeStrength,u=t.leafCluster,c=t.clustering,l=t.nodeClusterBy,f=e.getAllNodes(),d=a||{leaf:2,single:2,others:1,center:function(t){return{x:o[0],y:o[1],z:3===i?o[2]:void 0}}};if("function"!=typeof s&&(t.clusterNodeStrength=function(t){return s}),u&&l&&(n=Rb(e,l),r=Array.from(new Set(null==f?void 0:f.map((function(t){return t.data[l]}))))||[],t.centripetalOptions=Object.assign(d,{single:100,leaf:function(e){var i=n[e.id]||{},a=i.siblingLeaves,o=i.sameTypeLeaves;return(null==o?void 0:o.length)===(null==a?void 0:a.length)||1===(null==r?void 0:r.length)?1:t.clusterNodeStrength(e)},others:1,center:function(t){var r,i=e.getDegree(t.id,"both");if(!i)return{x:100,y:100,z:0};if(1===i){var a=(n[t.id]||{}).sameTypeLeaves,o=void 0===a?[]:a;1===o.length?r=void 0:o.length>1&&(r=Ib(o))}else r=void 0;return{x:null==r?void 0:r.x,y:null==r?void 0:r.y,z:null==r?void 0:r.z}}})),c&&l){n||(n=Rb(e,l)),r||(r=Array.from(new Set(f.map((function(t){return t.data[l]}))))),r=r.filter((function(t){return void 0!==t}));var h={};r.forEach((function(t){var n=f.filter((function(e){return e.data[l]===t})).map((function(t){return e.getNode(t.id)}));h[t]=Ib(n)})),t.centripetalOptions=Object.assign(d,{single:function(e){return t.clusterNodeStrength(e)},leaf:function(e){return t.clusterNodeStrength(e)},others:function(e){return t.clusterNodeStrength(e)},center:function(t){var e=h[t.data[l]];return{x:null==e?void 0:e.x,y:null==e?void 0:e.y,z:null==e?void 0:e.z}}})}var p=t.centripetalOptions||{},v=p.leaf,g=p.single,y=p.others;v&&"function"!=typeof v&&(t.centripetalOptions.leaf=function(){return v}),g&&"function"!=typeof g&&(t.centripetalOptions.single=function(){return g}),y&&"function"!=typeof y&&(t.centripetalOptions.others=function(){return y})}},{key:"runOneStep",value:function(t,e,n,r,i){var a={},o=t.getAllNodes(),s=t.getAllEdges();if(null==o?void 0:o.length){var u=i.monitor;this.calRepulsive(t,a,i),s&&this.calAttractive(t,a,i),this.calGravity(t,e,a,i),this.updateVelocity(t,a,r,i),u&&u({energy:this.calTotalEnergy(a,o),nodes:e.getAllNodes(),edges:e.getAllEdges(),iterations:n})}}},{key:"calTotalEnergy",value:function(t,e){var n=this;if(!(null==e?void 0:e.length))return 0;var r=0;return e.forEach((function(e,i){var a=t[e.id].x,o=t[e.id].y,s=3===n.options.dimensions?t[e.id].z:0,u=a*a+o*o+s*s,c=e.data.mass;r+=(void 0===c?1:c)*u*.5})),r}},{key:"calRepulsive",value:function(t,e,n){var r=n.dimensions,i=n.factor,a=n.coulombDisScale;!function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,a=e/n,o=t.getAllNodes(),s=o.map((function(t,e){var n=t.data,r=n.nodeStrength;return{x:n.x,y:n.y,z:n.z,size:n.size,index:e,id:t.id,vx:0,vy:0,vz:0,weight:a*r}})),u=(2===i?gb(s,(function(t){return t.x}),(function(t){return t.y})):Mb(s,(function(t){return t.x}),(function(t){return t.y}),(function(t){return t.z}))).visitAfter(Nb),c=new Map;s.forEach((function(t){c.set(t.id,t),function(t,e,n){e.visit((function(e,r,i,a,o){return Cb(e,r,i,a,o,t,n)}))}(t,u,i)})),s.map((function(t,e){var n=o[e],i=n.id,a=n.data.mass,s=void 0===a?1:a;r[i]={x:t.vx/s,y:t.vy/s,z:t.vz/s}}))}(t,i,a*a,e,r)}},{key:"calAttractive",value:function(t,e,n){var r=n.dimensions,i=n.nodeSize;t.getAllEdges().forEach((function(n,a){var o=n.source,s=n.target,u=t.getNode(o),c=t.getNode(s);if(u&&c){var l=c.data.x-u.data.x,f=c.data.y-u.data.y,d=3===r?c.data.z-u.data.z:0;l||f||(l=.01*Math.random(),f=.01*Math.random(),3!==r||d||(d=.01*Math.random()));var h=Math.sqrt(l*l+f*f+d*d);if(!(h<i(u)+i(c))){var p=l/h,v=f/h,g=d/h,y=n.data||{},m=y.linkDistance,b=void 0===m?200:m,x=y.edgeStrength,w=(b-h)*(void 0===x?200:x),k=1/(u.data.mass||1),E=1/(c.data.mass||1),O=p*w,S=v*w,M=g*w;e[o].x-=O*k,e[o].y-=S*k,e[o].z-=M*k,e[s].x+=O*E,e[s].y+=S*E,e[s].z+=M*E}}}))}},{key:"calGravity",value:function(t,e,n,r){var i=r.getCenter,a=t.getAllNodes(),o=e.getAllNodes(),s=e.getAllEdges(),u=r.width,c=r.height,l=r.center,f=r.gravity,d=r.centripetalOptions;a&&a.forEach((function(r){var a=r.id,h=r.data,p=h.mass,v=h.x,y=h.y,m=h.z,b=e.getNode(a),x=0,w=0,k=0,E=f,O=t.getDegree(a,"in"),S=t.getDegree(a,"out"),M=t.getDegree(a,"both"),T=null==i?void 0:i(b,M);if(T){var A=g(T,3);x=v-A[0],w=y-A[1],E=A[2]}else x=v-l[0],w=y-l[1],k=m-l[2];if(E&&(n[a].x-=E*x/p,n[a].y-=E*w/p,n[a].z-=E*k/p),d){var P=d.leaf,N=d.single,C=d.others,_=d.center,L=(null==_?void 0:_(b,o,s,u,c))||{x:0,y:0,z:0,centerStrength:0},R=L.x,j=L.y,D=L.z,I=L.centerStrength;if(!Oe(R)||!Oe(j))return;var F=(v-R)/p,z=(y-j)/p,B=(m-D)/p;if(I&&(n[a].x-=I*F,n[a].y-=I*z,n[a].z-=I*B),0===M){var G=N(b);if(!G)return;return n[a].x-=G*F,n[a].y-=G*z,void(n[a].z-=G*B)}if(0===O||0===S){var W=P(b,o,s);if(!W)return;return n[a].x-=W*F,n[a].y-=W*z,void(n[a].z-=W*B)}var V=C(b);if(!V)return;n[a].x-=V*F,n[a].y-=V*z,n[a].z-=V*B}}))}},{key:"updateVelocity",value:function(t,e,n,r){var i=r.damping,a=r.maxSpeed,o=r.interval,s=r.dimensions,u=t.getAllNodes();(null==u?void 0:u.length)&&u.forEach((function(t){var r=t.id,u=(n[r].x+e[r].x*o)*i||.01,c=(n[r].y+e[r].y*o)*i||.01,l=3===s?(n[r].z+e[r].z*o)*i||.01:0,f=Math.sqrt(u*u+c*c+l*l);if(f>a){var d=a/f;u*=d,c*=d,l*=d}n[r]={x:u,y:c,z:l}}))}},{key:"updatePosition",value:function(t,e,n,r){var i=this,a=r.distanceThresholdMode,o=r.interval,s=r.dimensions,u=e.getAllNodes();if(null==u?void 0:u.length){var c=0;"max"===a?this.judgingDistance=-1/0:"min"===a&&(this.judgingDistance=1/0),u.forEach((function(r){var u=r.id,l=t.getNode(u);if(Oe(l.data.fx)&&Oe(l.data.fy))e.mergeNodeData(u,{x:l.data.fx,y:l.data.fy,z:3===s?l.data.fz:void 0});else{var f=n[u].x*o,d=n[u].y*o,h=3===s?n[u].z*o:0;e.mergeNodeData(u,{x:r.data.x+f,y:r.data.y+d,z:r.data.z+h});var p=Math.sqrt(f*f+d*d+h*h);switch(a){case"max":i.judgingDistance<p&&(i.judgingDistance=p);break;case"min":i.judgingDistance>p&&(i.judgingDistance=p);break;default:c+=p}}})),a&&"mean"!==a||(this.judgingDistance=c/u.length)}else this.judgingDistance=0}}])}(),Rb=function(t,e){var n=t.getAllNodes();if(!(null==n?void 0:n.length))return{};var r={};return n.forEach((function(n,i){1===t.getDegree(n.id,"both")&&(r[n.id]=jb(t,"leaf",n,e))})),r},jb=function(t,e,n,r){var i=t.getDegree(n.id,"in"),a=t.getDegree(n.id,"out"),o=n,s=[];return 0===i?(o=t.getSuccessors(n.id)[0],s=t.getNeighbors(o.id)):0===a&&(o=t.getPredecessors(n.id)[0],s=t.getNeighbors(o.id)),s=s.filter((function(e){return 0===t.getDegree(e.id,"in")||0===t.getDegree(e.id,"out")})),{coreNode:o,siblingLeaves:s,sameTypeLeaves:Db(t,e,r,n,s)}},Db=function(t,e,n,r,i){var a=r.data[n]||"",o=(null==i?void 0:i.filter((function(t){return t.data[n]===a})))||[];return"leaf"===e&&(o=o.filter((function(e){return 0===t.getDegree(e.id,"in")||0===t.getDegree(e.id,"out")}))),o},Ib=function(t){var e={x:0,y:0};t.forEach((function(t){var n=t.data,r=n.x,i=n.y;e.x+=r||0,e.y+=i||0}));var n=t.length||1;return{x:e.x/n,y:e.y/n}},Fb=function(t,e){return e.map((function(e){var n=e.id,r=e.data,i=t.getNode(n);return Object.assign(Object.assign({},i),{data:Object.assign(Object.assign({},i.data),{x:r.x,y:r.y,z:r.z})})}))},zb=s(6727),Bb=(zb.y3,zb.jy,zb.oN,zb.Hc,zb.cg,zb.hj,zb.LU,zb.Tb,zb.uq),Gb=(zb.Zm,zb.Dq,zb.__,zb.q0,zb.lh,zb.pI,zb.zC,zb.zg,zb.g6,zb.OL,zb.ks,zb.QR,zb.jp,zb.mk,zb.W2);zb.l,zb.KY,zb.dv,zb.BR,zb.Wu,zb.uq,zb.uq,zb.a4,zb.DI,zb.Jo,zb.Zi,zb.kH,zb.LV;var Wb=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var i=0;i<n;i+=1)r===i?e[r][i]=0:0!==t[r][i]&&t[r][i]?e[r][i]=t[r][i]:e[r][i]=1/0}for(var a=0;a<n;a+=1)for(var o=0;o<n;o+=1)for(var s=0;s<n;s+=1)e[o][s]>e[o][a]+e[a][s]&&(e[o][s]=e[o][a]+e[a][s]);return e},Vb=function(t,e){var n=t.nodes,r=t.edges,i=[],a={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){a[t.id]=e,i.push([])})),null==r||r.forEach((function(t){var n=t.source,r=t.target,o=a[n],s=a[r];void 0!==o&&void 0!==s&&(i[o][s]=1,e||(i[s][o]=1))})),i},Hb=function(t,e){var n=[];return t.forEach((function(t){var r=[];t.forEach((function(t){r.push(t*e)})),n.push(r)})),n},Yb=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;return t.forEach((function(t){var a=t.data.size;cb(a)?1===a.length&&(a=[a[0],a[0]]):Oe(a)?a=[a,a]:(void 0===a||isNaN(a))&&(a=[30,30]);var o=[a[0]/2,a[1]/2],s=t.data.x-o[0],u=t.data.x+o[0],c=t.data.y-o[1],l=t.data.y+o[1];e>s&&(e=s),n>c&&(n=c),r<u&&(r=u),i<l&&(i=l)})),{minX:e,minY:n,maxX:r,maxY:i}},Ub=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},qb=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"TB",i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(null==e?void 0:e.length)for(var o=a.stopBranchFn,s=a.stopAllFn,u=0;u<e.length;u++){var c=e[u];if(t.hasNode(c.id)&&!(null==o?void 0:o(c))){if(null==s?void 0:s(c))return;"TB"===r&&n(c),qb(t,t.getChildren(c.id,i),n,r,i,a),"TB"!==r&&n(c)}}},Xb={center:[0,0],linkDistance:50},Kb=function(){return O((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),this.options=e,this.id="mds",this.options=Object.assign(Object.assign({},Xb),e)}),[{key:"execute",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericMDSLayout(!1,t,e));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericMDSLayout(!0,t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericMDSLayout",value:function(t,e,n){return Le(this,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h,p,v,g;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=Object.assign(Object.assign({},this.options),n),a=i.center,o=void 0===a?[0,0]:a,s=i.linkDistance,u=void 0===s?50:s,c=e.getAllNodes(),l=e.getAllEdges(),(null==c?void 0:c.length)&&1!==c.length){r.next=6;break}return r.abrupt("return",rb(e,t,o));case 6:return f=Vb({nodes:c,edges:l},!1),d=Wb(f),$b(d),h=Hb(d,u),p=Zb(h),v=[],p.forEach((function(t,e){var n=Jm(c[e]);n.data.x=t[0]+o[0],n.data.y=t[1]+o[1],v.push(n)})),t&&v.forEach((function(t){return e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})})),g={nodes:v,edges:l},r.abrupt("return",g);case 16:case"end":return r.stop()}}),r,this)})))}}])}(),$b=function(t){var e=-999999;t.forEach((function(t){t.forEach((function(t){t!==1/0&&e<t&&(e=t)}))})),t.forEach((function(n,r){n.forEach((function(n,i){n===1/0&&(t[r][i]=e)}))}))},Zb=function(t){var e=Bb.mul(Bb.pow(t,2),-.5),n=e.mean("row"),r=e.mean("column"),i=e.mean();e.add(i).subRowVector(n).subColumnVector(r);var a=new Gb(e),o=Bb.sqrt(a.diagonalMatrix).diagonal();return a.leftSingularVectors.toJSON().map((function(t){return Bb.mul([t],[o]).toJSON()[0].splice(0,2)}))};function Qb(t){return!!t.tick&&!!t.stop}var Jb={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},tx={center:[0,0],comboPadding:10,treeKey:"combo"},ex=function(){return O((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),this.options=e,this.id="comboCombined",this.options=Object.assign(Object.assign({},tx),e)}),[{key:"execute",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericComboCombinedLayout(!1,t,e));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericComboCombinedLayout(!0,t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericComboCombinedLayout",value:function(t,e,n){return Le(this,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h,p,v,g,y,m,b,x,w,k,E,O,S,T,A;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=this.initVals(Object.assign(Object.assign({},this.options),n)),a=i.center,o=i.treeKey,s=i.outerLayout,u=e.getAllNodes().filter((function(t){return!t.data._isCombo})),c=e.getAllNodes().filter((function(t){return t.data._isCombo})),l=e.getAllEdges(),(f=null==u?void 0:u.length)&&1!==f){r.next=8;break}return r.abrupt("return",rb(e,t,a));case 8:return d=[],h=new Map,u.forEach((function(t){h.set(t.id,t)})),p=new Map,c.forEach((function(t){p.set(t.id,t)})),v=new Map,g=this.getInnerGraphs(e,o,h,p,l,i,v),r.next=17,Promise.all(g);case 17:if(y=new Map,m=[],b=new Map,x=!0,e.getRoots(o).forEach((function(t){var n=v.get(t.id),r=p.get(t.id)||h.get(t.id),i={id:t.id,data:Object.assign(Object.assign({},t.data),{x:n.data.x||r.data.x,y:n.data.y||r.data.y,fx:n.data.fx||r.data.fx,fy:n.data.fy||r.data.fy,mass:n.data.mass||r.data.mass,size:n.data.size})};m.push(i),y.set(t.id,!0),isNaN(i.data.x)||0===i.data.x||isNaN(i.data.y)||0===i.data.y?(i.data.x=100*Math.random(),i.data.y=100*Math.random()):x=!1,qb(e,[t],(function(e){e.id!==t.id&&b.set(e.id,t.id)}),"TB",o)})),w=[],l.forEach((function(t){var e=b.get(t.source)||t.source,n=b.get(t.target)||t.target;e!==n&&y.has(e)&&y.has(n)&&w.push({id:t.id,source:e,target:n,data:{}})})),!(null==m?void 0:m.length)){r.next=42;break}if(1!==m.length){r.next=30;break}m[0].data.x=a[0],m[0].data.y=a[1],r.next=40;break;case 30:if(E=new Zg({nodes:m,edges:w}),O=s||new Lb,!x||!Jb[O.id]){r.next=36;break}return S=m.length<100?new Kb:new fb,r.next=36,S.assign(E);case 36:return T=Object.assign({center:a,kg:5,preventOverlap:!0,animate:!1},"force"===O.id?{gravity:1,factor:4,linkDistance:function(t,e,n){return(Math.max.apply(Math,M(e.data.size))||32)/2+(Math.max.apply(Math,M(n.data.size))||32)/2+200}}:{}),r.next=39,nx(O,E,T);case 39:k=r.sent;case 40:v.forEach((function(t){var e,n=k.nodes.find((function(e){return e.id===t.id}));if(n){var r=n.data,i=r.x,a=r.y;t.data.visited=!0,t.data.x=i,t.data.y=a,d.push({id:t.id,data:{x:i,y:a}})}var o=t.data,s=o.x,u=o.y;null===(e=t.data.nodes)||void 0===e||e.forEach((function(t){d.push({id:t.id,data:{x:t.data.x+s,y:t.data.y+u}})}))})),v.forEach((function(t){var e=t.data,n=e.x,r=e.y,i=e.visited,a=e.nodes;null==a||a.forEach((function(t){if(!i){var e=d.find((function(e){return e.id===t.id}));e.data.x+=n||0,e.data.y+=r||0}}))}));case 42:return t&&d.forEach((function(t){e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})})),A={nodes:d,edges:l},r.abrupt("return",A);case 45:case"end":return r.stop()}}),r,this)})))}},{key:"initVals",value:function(t){var e,n,r,i=Object.assign({},t),a=t.nodeSize,o=t.spacing,s=t.comboPadding;if(n=Oe(o)?function(){return o}:_n(o)?o:function(){return 0},i.spacing=n,a)if(_n(a))e=function(t){var e=a(t),r=n(t);return cb(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+r)/2:((e||32)+r)/2};else if(cb(a)){var u=(a[0]>a[1]?a[0]:a[1])/2;e=function(t){return u+n(t)/2}}else{var c=a/2;e=function(t){return c+n(t)/2}}else e=function(t){var e=n(t);return t.size?cb(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+e)/2:Ln(t.size)?((t.size.width>t.size.height?t.size.width:t.size.height)+e)/2:(t.size+e)/2:32+e/2};return i.nodeSize=e,r=Oe(s)?function(){return s}:cb(s)?function(){return Math.max.apply(null,s)}:_n(s)?s:function(){return 0},i.comboPadding=r,i}},{key:"getInnerGraphs",value:function(t,e,n,r,i,a,o){var s=this,u=a.nodeSize,c=a.comboPadding,l=a.spacing,f=a.innerLayout||new fb({}),d={center:[0,0],preventOverlap:!0,nodeSpacing:l},h=[],p=function(t){var e=(null==c?void 0:c(t))||10;return cb(e)&&(e=Math.max.apply(Math,M(e))),{size:e?[2*e,2*e]:[30,30],padding:e}};return t.getRoots(e).forEach((function(a){o.set(a.id,{id:a.id,data:{nodes:[],size:p(a).size}});var c=Promise.resolve();qb(t,[a],(function(a){var l;if(a.data._isCombo){var h=p(a),v=h.size,y=h.padding;if(null===(l=t.getChildren(a.id,e))||void 0===l?void 0:l.length){var m=o.get(a.id);o.set(a.id,{id:a.id,data:Object.assign({nodes:[]},null==m?void 0:m.data)});var b=new Map,x=t.getChildren(a.id,e).map((function(t){if(t.data._isCombo)return o.has(t.id)||o.set(t.id,{id:t.id,data:Object.assign({},t.data)}),b.set(t.id,!0),o.get(t.id);var e=n.get(t.id)||r.get(t.id);return b.set(t.id,!0),{id:t.id,data:Object.assign(Object.assign({},e.data),t.data)}})),w={nodes:x,edges:i.filter((function(t){return b.has(t.source)&&b.has(t.target)}))},k=1/0;x.forEach((function(t){var e,n=t.data.size;n||(n=(null===(e=o.get(t.id))||void 0===e?void 0:e.data.size)||(null==u?void 0:u(t))||[30,30]),Oe(n)&&(n=[n,n]);var r=g(n,2),i=r[0],a=r[1];k>i&&(k=i),k>a&&(k=a),t.data.size=n})),c=c.then((function(){return Le(s,void 0,void 0,Jn().mark((function t(){var e,n,r,i,s,u,c,l;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Zg(w),t.next=3,nx(f,e,d,!0);case 3:n=Yb(x),r=n.minX,i=n.minY,s=n.maxX,u=n.maxY,c={x:(s+r)/2,y:(u+i)/2},w.nodes.forEach((function(t){t.data.x-=c.x,t.data.y-=c.y})),l=[Math.max(s-r,k)+2*y,Math.max(u-i,k)+2*y],o.get(a.id).data.size=l,o.get(a.id).data.nodes=x;case 9:case"end":return t.stop()}}),t)})))}))}else o.set(a.id,{id:a.id,data:Object.assign(Object.assign({},a.data),{size:v})});return!0}}),"BT",e),h.push(c)})),h}}])}();function nx(t,e,n,r){var i;return Le(this,void 0,void 0,Jn().mark((function a(){return Jn().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!Qb(t)){a.next=4;break}return t.execute(e,n),t.stop(),a.abrupt("return",t.tick(null!==(i=n.iterations)&&void 0!==i?i:300));case 4:if(!r){a.next=8;break}return a.next=7,t.assign(e,n);case 7:case 10:return a.abrupt("return",a.sent);case 8:return a.next=10,t.execute(e,n);case 11:case"end":return a.stop()}}),a)})))}function rx(t){return function(){return t}}function ix(t){return 1e-6*(t()-.5)}function ax(t){return t.index}function ox(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function sx(t){var e,n,r,i,a,o,s=ax,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},c=rx(30),l=1;function f(r){for(var i=0,s=t.length;i<l;++i)for(var u,c,f,d,h,p,v,g=0;g<s;++g)c=(u=t[g]).source,d=(f=u.target).x+f.vx-c.x-c.vx||ix(o),h=f.y+f.vy-c.y-c.vy||ix(o),d*=p=((p=Math.sqrt(d*d+h*h))-n[g])/p*r*e[g],h*=p,f.vx-=d*(v=a[g]),f.vy-=h*v,c.vx+=d*(v=1-v),c.vy+=h*v}function d(){if(r){var o,u,c=r.length,l=t.length,f=new Map(r.map((function(t,e){return[s(t,e,r),t]})));for(o=0,i=new Array(c);o<l;++o)(u=t[o]).index=o,"object"!=typeof u.source&&(u.source=ox(f,u.source)),"object"!=typeof u.target&&(u.target=ox(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(o=0,a=new Array(l);o<l;++o)u=t[o],a[o]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(l),h(),n=new Array(l),p()}}function h(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t,e){r=t,o=e,d()},f.links=function(e){return arguments.length?(t=e,d(),f):t},f.id=function(t){return arguments.length?(s=t,f):s},f.iterations=function(t){return arguments.length?(l=+t,f):l},f.strength=function(t){return arguments.length?(u="function"==typeof t?t:rx(+t),h(),f):u},f.distance=function(t){return arguments.length?(c="function"==typeof t?t:rx(+t),p(),f):c},f}var ux={value:function(){}};function cx(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new lx(r)}function lx(t){this._=t}function fx(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function dx(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ux,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}lx.prototype=cx.prototype={constructor:lx,on:function(t,e){var n,r,i=this._,a=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=a[o]).type)i[n]=dx(i[n],t.name,e);else if(null==e)for(n in i)i[n]=dx(i[n],t.name,null);return this}for(;++o<s;)if((n=(t=a[o]).type)&&(n=fx(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new lx(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};const hx=cx;var px,vx,gx=0,yx=0,mx=0,bx=0,xx=0,wx=0,kx="object"==typeof performance&&performance.now?performance:Date,Ex="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ox(){return xx||(Ex(Sx),xx=kx.now()+wx)}function Sx(){xx=0}function Mx(){this._call=this._time=this._next=null}function Tx(t,e,n){var r=new Mx;return r.restart(t,e,n),r}function Ax(){xx=(bx=kx.now())+wx,gx=yx=0;try{!function(){Ox(),++gx;for(var t,e=px;e;)(t=xx-e._time)>=0&&e._call.call(void 0,t),e=e._next;--gx}()}finally{gx=0,function(){for(var t,e,n=px,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:px=e);vx=t,Nx(r)}(),xx=0}}function Px(){var t=kx.now(),e=t-bx;e>1e3&&(wx-=e,bx=t)}function Nx(t){gx||(yx&&(yx=clearTimeout(yx)),t-xx>24?(t<1/0&&(yx=setTimeout(Ax,t-kx.now()-wx)),mx&&(mx=clearInterval(mx))):(mx||(bx=kx.now(),mx=setInterval(Px,1e3)),gx=1,Ex(Ax)))}Mx.prototype=Tx.prototype={constructor:Mx,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Ox():+n)+(null==e?0:+e),this._next||vx===this||(vx?vx._next=this:px=this,vx=this),this._call=t,this._time=n,Nx()},stop:function(){this._call&&(this._call=null,this._time=1/0,Nx())}};var Cx=4294967296;function _x(t){return t.x}function Lx(t){return t.y}var Rx=Math.PI*(3-Math.sqrt(5));function jx(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,u=Tx(f),c=hx("tick","end"),l=function(){var t=1;return function(){return(t=(1664525*t+1013904223)%Cx)/Cx}}();function f(){d(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function d(r){var u,c,l=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(a-n)*i,s.forEach((function(t){t(n)})),u=0;u<l;++u)null==(c=t[u]).fx?c.x+=c.vx*=o:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=o:(c.y=c.fy,c.vy=0);return e}function h(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),a=n*Rx;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,l),e}return null==t&&(t=[]),h(),e={tick:d,restart:function(){return u.restart(f),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,h(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},randomSource:function(t){return arguments.length?(l=t,s.forEach(p),e):l},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,a,o,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(o=(i=e-(s=t[c]).x)*i+(a=n-s.y)*a)<r&&(u=s,r=o);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}function Dx(){var t,e,n,r,i,a=rx(-30),o=1,s=1/0,u=.81;function c(n){var i,a=t.length,o=gb(t,_x,Lx).visitAfter(f);for(r=n,i=0;i<a;++i)e=t[i],o.visit(d)}function l(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+a(n,e,t)}}function f(t){var e,n,r,a,o,s=0,u=0;if(t.length){for(r=a=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,r+=n*e.x,a+=n*e.y);t.x=r/u,t.y=a/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function d(t,a,c,l){if(!t.value)return!0;var f=t.x-e.x,d=t.y-e.y,h=l-a,p=f*f+d*d;if(h*h/u<p)return p<s&&(0===f&&(p+=(f=ix(n))*f),0===d&&(p+=(d=ix(n))*d),p<o&&(p=Math.sqrt(o*p)),e.vx+=f*t.value*r/p,e.vy+=d*t.value*r/p),!0;if(!(t.length||p>=s)){(t.data!==e||t.next)&&(0===f&&(p+=(f=ix(n))*f),0===d&&(p+=(d=ix(n))*d),p<o&&(p=Math.sqrt(o*p)));do{t.data!==e&&(h=i[t.data.index]*r/p,e.vx+=f*h,e.vy+=d*h)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,l()},c.strength=function(t){return arguments.length?(a="function"==typeof t?t:rx(+t),l(),c):a},c.distanceMin=function(t){return arguments.length?(o=t*t,c):Math.sqrt(o)},c.distanceMax=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.theta=function(t){return arguments.length?(u=t*t,c):Math.sqrt(u)},c}function Ix(t,e){var n,r=1;function i(){var i,a,o=n.length,s=0,u=0;for(i=0;i<o;++i)s+=(a=n[i]).x,u+=a.y;for(s=(s/o-t)*r,u=(u/o-e)*r,i=0;i<o;++i)(a=n[i]).x-=s,a.y-=u}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}function Fx(t){return t.x+t.vx}function zx(t){return t.y+t.vy}function Bx(t){var e,n,r,i=1,a=1;function o(){for(var t,o,u,c,l,f,d,h=e.length,p=0;p<a;++p)for(o=gb(e,Fx,zx).visitAfter(s),t=0;t<h;++t)u=e[t],f=n[u.index],d=f*f,c=u.x+u.vx,l=u.y+u.vy,o.visit(v);function v(t,e,n,a,o){var s=t.data,h=t.r,p=f+h;if(!s)return e>c+p||a<c-p||n>l+p||o<l-p;if(s.index>u.index){var v=c-s.x-s.vx,g=l-s.y-s.vy,y=v*v+g*g;y<p*p&&(0===v&&(y+=(v=ix(r))*v),0===g&&(y+=(g=ix(r))*g),y=(p-(y=Math.sqrt(y)))/y*i,u.vx+=(v*=y)*(p=(h*=h)/(d+h)),u.vy+=(g*=y)*p,s.vx-=v*(p=1-p),s.vy-=g*p)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(e){var r,i,a=e.length;for(n=new Array(a),r=0;r<a;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=rx(null==t?1:+t)),o.initialize=function(t,n){e=t,r=n,u()},o.iterations=function(t){return arguments.length?(a=+t,o):a},o.strength=function(t){return arguments.length?(i=+t,o):i},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:rx(+e),u(),o):t},o}function Gx(t,e,n){var r,i,a,o=rx(.1);function s(t){for(var o=0,s=r.length;o<s;++o){var u=r[o],c=u.x-e||1e-6,l=u.y-n||1e-6,f=Math.sqrt(c*c+l*l),d=(a[o]-f)*i[o]*t/f;u.vx+=c*d,u.vy+=l*d}}function u(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(r[e],e,r),i[e]=isNaN(a[e])?0:+o(r[e],e,r)}}return"function"!=typeof t&&(t=rx(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,u()},s.strength=function(t){return arguments.length?(o="function"==typeof t?t:rx(+t),u(),s):o},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:rx(+e),u(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s}function Wx(t){var e,n,r,i=rx(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vx+=(r[a]-i.x)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=rx(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:rx(+t),o(),a):i},a.x=function(e){return arguments.length?(t="function"==typeof e?e:rx(+e),o(),a):t},a}function Vx(t){var e,n,r,i=rx(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vy+=(r[a]-i.y)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=rx(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:rx(+t),o(),a):i},a.y=function(e){return arguments.length?(t="function"==typeof e?e:rx(+e),o(),a):t},a}var Hx=function(){return O((function t(e){k(this,t),this.id="d3-force",this.config={inputNodeAttrs:["x","y","vx","vy","fx","fy"],outputNodeAttrs:["x","y","vx","vy"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource"]},this.forceMap={link:sx,manyBody:Dx,center:Ix,collide:Bx,radial:Gx,x:Wx,y:Vx},this.options={link:{id:function(t){return t.id}},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},vd(this.options,e),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)}),[{key:"execute",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericLayout(!1,t,e));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericLayout(!0,t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"stop",value:function(){this.simulation.stop()}},{key:"tick",value:function(t){return this.simulation.tick(t),this.getResult()}},{key:"restart",value:function(){this.simulation.restart()}},{key:"setFixedPosition",value:function(t,e){var n=this.context.nodes.find((function(e){return e.id===t}));n&&e.forEach((function(t,e){"number"!=typeof t&&null!==t||(n[["fx","fy","fz"][e]]=t)}))}},{key:"getOptions",value:function(t){var e,n,r=vd({},this.options,t);return r.collide&&void 0===(null===(e=r.collide)||void 0===e?void 0:e.radius)&&(r.collide=r.collide||{},r.collide.radius=null!==(n=r.nodeSize)&&void 0!==n?n:10),void 0===r.iterations&&(r.link&&void 0===r.link.iterations&&(r.iterations=r.link.iterations),r.collide&&void 0===r.collide.iterations&&(r.iterations=r.collide.iterations)),this.context.options=r,r}},{key:"genericLayout",value:function(t,e,n){var r;return Le(this,void 0,void 0,Jn().mark((function i(){var a,o,s,u,c,l=this;return Jn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=this.getOptions(n),o=e.getAllNodes().map((function(t){var e=t.id,n=t.data;return Object.assign(Object.assign({id:e},n),vv(n.data,l.config.inputNodeAttrs))})),s=e.getAllEdges().map((function(t){return Object.assign({},t)})),Object.assign(this.context,{assign:t,nodes:o,edges:s,graph:e}),u=new Promise((function(t){l.resolver=t})),(c=this.setSimulation(a)).nodes(o),null===(r=c.force("link"))||void 0===r||r.links(s),i.abrupt("return",u);case 9:case"end":return i.stop()}}),i,this)})))}},{key:"getResult",value:function(){var t=this,e=this.context,n=e.assign,r=e.nodes,i=e.edges,a=e.graph,o=r.map((function(e){return{id:e.id,data:Object.assign(Object.assign({},e.data),vv(e,t.config.outputNodeAttrs))}})),s=i.map((function(t){var e=t.id,n=t.source,r=t.target,i=t.data;return{id:e,source:"object"==typeof n?n.id:n,target:"object"==typeof r?r.id:r,data:i}}));return n&&o.forEach((function(t){return a.mergeNodeData(t.id,t.data)})),{nodes:o,edges:s}}},{key:"initSimulation",value:function(){return jx()}},{key:"setSimulation",value:function(t){var e=this,n=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||(this.simulation=n.on("tick",(function(){var n;return null===(n=t.onTick)||void 0===n?void 0:n.call(t,e.getResult())})).on("end",(function(){var t;return null===(t=e.resolver)||void 0===t?void 0:t.call(e,e.getResult())}))),Yx(n,this.config.simulationAttrs.map((function(e){return[e,t[e]]}))),Object.entries(this.forceMap).forEach((function(e){var r=g(e,2),i=r[0],a=r[1],o=i;if(t[i]){var s=n.force(o);s||(s=a(),n.force(o,s)),Yx(s,Object.entries(t[o]))}else n.force(o,null)})),n}}])}(),Yx=function(t,e){return e.reduce((function(e,n){var r=g(n,2),i=r[0],a=r[1];return e[i]&&void 0!==a?e[i].call(t,a):e}),t)},Ux=s(3637),qx=s.n(Ux),Xx=function(){return O((function t(e){k(this,t),this.id="dagre",this.options={},Object.assign(this.options,t.defaultOptions,e)}),[{key:"execute",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericDagreLayout(!1,t,Object.assign(Object.assign({},this.options),e)));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericDagreLayout(!0,t,Object.assign(Object.assign({},this.options),e));case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericDagreLayout",value:function(t,e,n){return Le(this,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=n.nodeSize,(a=new Ux.graphlib.Graph).setGraph(n),a.setDefaultEdgeLabel((function(){return{}})),o=e.getAllNodes(),s=e.getAllEdges(),[].concat(M(o),M(s)).some((function(t){return Oe(t.id)}))&&console.error("Dagre layout only support string id, it will convert number to string."),e.getAllNodes().forEach((function(t){var e=t.id,n=Object.assign({},t.data);if(void 0!==i){var r=g(Xm(_n(i)?i(t):i),2),o=r[0],s=r[1];Object.assign(n,{width:o,height:s})}a.setNode(e.toString(),n)})),e.getAllEdges().forEach((function(t){var e=t.id,n=t.source,r=t.target;a.setEdge(n.toString(),r.toString(),{id:e})})),qx().layout(a),u={nodes:[],edges:[]},a.nodes().forEach((function(n){var r=a.node(n);u.nodes.push({id:n,data:r}),t&&e.mergeNodeData(n,r)})),a.edges().forEach((function(n){var r=a.edge(n),i=r.id,o=_e(r,["id"]),s=n.v,c=n.w;u.edges.push({id:i,source:s,target:c,data:o}),t&&e.mergeEdgeData(i,o)})),r.abrupt("return",u);case 14:case"end":return r.stop()}}),r)})))}}])}();Xx.defaultOptions={};var Kx=function(){function t(e){k(this,t),this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}return O(t,[{key:"distanceTo",value:function(t){var e=this.rx-t.rx,n=this.ry-t.ry;return Math.hypot(e,n)}},{key:"setPos",value:function(t,e){this.rx=t,this.ry=e}},{key:"resetForce",value:function(){this.fx=0,this.fy=0}},{key:"addForce",value:function(t){var e=t.rx-this.rx,n=t.ry-this.ry,r=Math.hypot(e,n);r=r<1e-4?1e-4:r;var i=this.g*(this.degree+1)*(t.degree+1)/r;this.fx+=i*e/r,this.fy+=i*n/r}},{key:"in",value:function(t){return t.contains(this.rx,this.ry)}},{key:"add",value:function(e){var n=this.mass+e.mass;return new t({rx:(this.rx*this.mass+e.rx*e.mass)/n,ry:(this.ry*this.mass+e.ry*e.mass)/n,mass:n,degree:this.degree+e.degree})}}])}(),$x=function(){function t(e){k(this,t),this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}return O(t,[{key:"getLength",value:function(){return this.length}},{key:"contains",value:function(t,e){var n=this.length/2;return t<=this.xmid+n&&t>=this.xmid-n&&e<=this.ymid+n&&e>=this.ymid-n}},{key:"NW",value:function(){return new t({xmid:this.xmid-this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})}},{key:"NE",value:function(){return new t({xmid:this.xmid+this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})}},{key:"SW",value:function(){return new t({xmid:this.xmid-this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})}},{key:"SE",value:function(){return new t({xmid:this.xmid+this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})}}])}(),Zx=function(){function t(e){k(this,t),this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=e&&(this.quad=e)}return O(t,[{key:"insert",value:function(e){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new t(this.quad.NW()),this.NE=new t(this.quad.NE()),this.SW=new t(this.quad.SW()),this.SE=new t(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e)):this.body=e}},{key:"_putBody",value:function(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))}},{key:"_isExternal",value:function(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE}},{key:"updateForce",value:function(t){null!=this.body&&t!==this.body&&(this._isExternal()||(this.quad?this.quad.getLength():0)/this.body.distanceTo(t)<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t)))}}])}(),Qx={center:[0,0],width:300,height:300,kr:5,kg:1,mode:"normal",preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1},Jx=function(){return O((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),this.options=e,this.id="forceAtlas2",this.options=Object.assign(Object.assign({},Qx),e)}),[{key:"execute",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericForceAtlas2Layout(!1,t,e));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericForceAtlas2Layout(!0,t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericForceAtlas2Layout",value:function(t,e,n){return Le(this,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h,p,v,g,y,m,b,x,w,k,E,O,S;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.getAllEdges(),a=e.getAllNodes(),o=this.formatOptions(n,a.length),s=o.width,u=o.height,c=o.prune,l=o.maxIteration,f=o.nodeSize,d=o.center,(null==a?void 0:a.length)&&1!==a.length){r.next=6;break}return r.abrupt("return",rb(e,t,d));case 6:if(h=a.map((function(t){return Jm(t,[s,u])})),p=i.filter((function(t){return t.source!==t.target})),v=new Zg({nodes:h,edges:p}),g=this.getSizes(v,f),this.run(v,e,l,g,t,o),c){for(y=0;y<p.length;y+=1)m=p[y],b=m.source,x=m.target,w=v.getDegree(b),k=v.getDegree(b),w<=1?(E=v.getNode(x),v.mergeNodeData(b,{x:E.data.x,y:E.data.y})):k<=1&&(O=v.getNode(b),v.mergeNodeData(x,{x:O.data.x,y:O.data.y}));S=Object.assign(Object.assign({},o),{prune:!1,barnesHut:!1}),this.run(v,e,100,g,t,S)}return r.abrupt("return",{nodes:h,edges:i});case 13:case"end":return r.stop()}}),r,this)})))}},{key:"getSizes",value:function(t,e){for(var n=t.getAllNodes(),r={},i=0;i<n.length;i+=1){var a=n[i];r[a.id]=Zm(e,void 0)(a)}return r}},{key:"formatOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=Object.assign(Object.assign({},this.options),t),r=n.center,i=n.width,a=n.height,o=n.barnesHut,s=n.prune,u=n.maxIteration,c=n.kr,l=n.kg;return n.width=i||"undefined"==typeof window?i:window.innerWidth,n.height=a||"undefined"==typeof window?a:window.innerHeight,n.center=r||[n.width/2,n.height/2],void 0===o&&e>250&&(n.barnesHut=!0),void 0===s&&e>100&&(n.prune=!0),0!==u||s?0===u&&s&&(n.maxIteration=100,e<=200&&e>100?n.maxIteration=500:e>200&&(n.maxIteration=950)):(n.maxIteration=250,e<=200&&e>100?n.maxIteration=1e3:e>200&&(n.maxIteration=1200)),c||(n.kr=50,e>100&&e<=500?n.kr=20:e>500&&(n.kr=1)),l||(n.kg=20,e>100&&e<=500?n.kg=10:e>500&&(n.kg=1)),n}},{key:"run",value:function(t,e,n,r,i,a){for(var o=a.kr,s=a.barnesHut,u=a.onTick,c=t.getAllNodes(),l=0,f=n,d={},h={},p={},v=0;v<c.length;v+=1){var g=c[v],y=g.data,m=g.id;if(d[m]=[0,0],s){var b={id:v,rx:y.x,ry:y.y,mass:1,g:o,degree:t.getDegree(m)};p[m]=new Kx(b)}}for(;f>0;)l=this.oneStep(t,{iter:f,preventOverlapIters:50,krPrime:100,sg:l,forces:d,preForces:h,bodies:p,sizes:r},a),f--,null==u||u({nodes:c,edges:e.getAllEdges()});return t}},{key:"oneStep",value:function(t,e,n){for(var r=e.iter,i=e.preventOverlapIters,a=e.krPrime,o=e.sg,s=e.preForces,u=e.bodies,c=e.sizes,l=e.forces,f=n.preventOverlap,d=n.barnesHut,h=t.getAllNodes(),p=0;p<h.length;p+=1){var v=h[p].id;s[v]=M(l[v]),l[v]=[0,0]}return l=this.getAttrForces(t,r,i,c,l,n),l=d&&(f&&r>i||!f)?this.getOptRepGraForces(t,l,u,n):this.getRepGraForces(t,r,i,l,a,c,n),this.updatePos(t,l,s,o,n)}},{key:"getAttrForces",value:function(t,e,n,r,i,a){for(var o=a.preventOverlap,s=a.dissuadeHubs,u=a.mode,c=a.prune,l=t.getAllEdges(),f=0;f<l.length;f+=1){var d=l[f],h=d.source,p=d.target,v=t.getNode(h),g=t.getNode(p),y=t.getDegree(h),m=t.getDegree(p);if(!c||!(y<=1||m<=1)){var b=[g.data.x-v.data.x,g.data.y-v.data.y],x=Math.hypot(b[0],b[1]);x=x<1e-4?1e-4:x,b[0]=b[0]/x,b[1]=b[1]/x,o&&e<n&&(x=x-r[h]-r[p]);var w=x,k=w;"linlog"===u&&(k=w=Math.log(1+x)),s&&(w=x/y,k=x/m),o&&e<n&&x<=0?(w=0,k=0):o&&e<n&&x>0&&(w=x,k=x),i[h][0]+=w*b[0],i[p][0]-=k*b[0],i[h][1]+=w*b[1],i[p][1]-=k*b[1]}}return i}},{key:"getOptRepGraForces",value:function(t,e,n,r){for(var i=r.kg,a=r.center,o=r.prune,s=t.getAllNodes(),u=s.length,c=9e10,l=-9e10,f=9e10,d=-9e10,h=0;h<u;h+=1){var p=s[h],v=p.id,g=p.data;o&&t.getDegree(v)<=1||(n[v].setPos(g.x,g.y),g.x>=l&&(l=g.x),g.x<=c&&(c=g.x),g.y>=d&&(d=g.y),g.y<=f&&(f=g.y))}for(var y=Math.max(l-c,d-f),m=new $x({xmid:(l+c)/2,ymid:(d+f)/2,length:y,massCenter:a,mass:u}),b=new Zx(m),x=0;x<u;x+=1){var w=s[x].id;o&&t.getDegree(w)<=1||n[w].in(m)&&b.insert(n[w])}for(var k=0;k<u;k+=1){var E=s[k],O=E.id,S=E.data,M=t.getDegree(O);if(!(o&&M<=1)){n[O].resetForce(),b.updateForce(n[O]),e[O][0]-=n[O].fx,e[O][1]-=n[O].fy;var T=[S.x-a[0],S.y-a[1]],A=Math.hypot(T[0],T[1]);A=A<1e-4?1e-4:A,T[0]=T[0]/A,T[1]=T[1]/A;var P=i*(M+1);e[O][0]-=P*T[0],e[O][1]-=P*T[1]}}return e}},{key:"getRepGraForces",value:function(t,e,n,r,i,a,o){for(var s=o.preventOverlap,u=o.kr,c=o.kg,l=o.center,f=o.prune,d=t.getAllNodes(),h=d.length,p=0;p<h;p+=1){for(var v=d[p],g=t.getDegree(v.id),y=p+1;y<h;y+=1){var m=d[y],b=t.getDegree(m.id);if(!f||!(g<=1||b<=1)){var x=[m.data.x-v.data.x,m.data.y-v.data.y],w=Math.hypot(x[0],x[1]);w=w<1e-4?1e-4:w,x[0]=x[0]/w,x[1]=x[1]/w,s&&e<n&&(w=w-a[v.id]-a[m.id]);var k=u*(g+1)*(b+1)/w;s&&e<n&&w<0?k=i*(g+1)*(b+1):s&&e<n&&0===w?k=0:s&&e<n&&w>0&&(k=u*(g+1)*(b+1)/w),r[v.id][0]-=k*x[0],r[m.id][0]+=k*x[0],r[v.id][1]-=k*x[1],r[m.id][1]+=k*x[1]}}var E=[v.data.x-l[0],v.data.y-l[1]],O=Math.hypot(E[0],E[1]);E[0]=E[0]/O,E[1]=E[1]/O;var S=c*(g+1);r[v.id][0]-=S*E[0],r[v.id][1]-=S*E[1]}return r}},{key:"updatePos",value:function(t,e,n,r,i){for(var a=i.ks,o=i.tao,s=i.prune,u=i.ksmax,c=t.getAllNodes(),l=c.length,f=[],d=[],h=0,p=0,v=r,g=0;g<l;g+=1){var y=c[g].id,m=t.getDegree(y);if(!(s&&m<=1)){var b=[e[y][0]-n[y][0],e[y][1]-n[y][1]],x=Math.hypot(b[0],b[1]),w=[e[y][0]+n[y][0],e[y][1]+n[y][1]],k=Math.hypot(w[0],w[1]);f[g]=x,d[g]=k/2,h+=(m+1)*f[g],p+=(m+1)*d[g]}}var E=v;v=o*p/h,0!==E&&(v=v>1.5*E?1.5*E:v);for(var O=0;O<l;O+=1){var S=c[O],M=S.id,T=S.data,A=t.getDegree(M);if(!(s&&A<=1||Oe(T.fx)&&Oe(T.fy))){var P=a*v/(1+v*Math.sqrt(f[O])),N=Math.hypot(e[M][0],e[M][1]),C=u/(N=N<1e-4?1e-4:N),_=(P=P>C?C:P)*e[M][0],L=P*e[M][1];t.mergeNodeData(M,{x:T.x+_,y:T.y+L})}}return v}}])}(),tw={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:"cluster"},ew=function(){return O((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),this.options=e,this.id="fruchterman",this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},tw),e)}),[{key:"execute",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericFruchtermanLayout(!1,t,e));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericFruchtermanLayout(!0,t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"stop",value:function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval),this.running=!1}},{key:"tick",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.maxIteration||1;if(this.lastResult)return this.lastResult;for(var n=0;n<e;n++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);var r={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&r.nodes.forEach((function(e){return t.lastGraph.mergeNodeData(e.id,{x:e.data.x,y:e.data.y,z:3===t.options.dimensions?e.data.z:void 0})})),r}},{key:"genericFruchtermanLayout",value:function(t,e,n){return Le(this,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h,p,v,g,y,m,b,x,w=this;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.running){r.next=2;break}return r.abrupt("return");case 2:if(i=this.formatOptions(n),a=i.dimensions,o=i.width,s=i.height,u=i.center,c=i.clustering,l=i.nodeClusterBy,f=i.maxIteration,d=i.onTick,h=e.getAllNodes(),p=e.getAllEdges(),null==h?void 0:h.length){r.next=10;break}return v={nodes:[],edges:p},this.lastResult=v,r.abrupt("return",v);case 10:if(1!==h.length){r.next=15;break}return t&&e.mergeNodeData(h[0].id,{x:u[0],y:u[1],z:3===a?u[2]:void 0}),g={nodes:[Object.assign(Object.assign({},h[0]),{data:Object.assign(Object.assign({},h[0].data),{x:u[0],y:u[1],z:3===a?u[2]:void 0})})],edges:p},this.lastResult=g,r.abrupt("return",g);case 15:if(y=h.map((function(t){return Jm(t,[o,s])})),m=new Zg({nodes:y,edges:p}),b={},c&&y.forEach((function(t){var e=t.data[l];b[e]||(b[e]={name:e,cx:0,cy:0,count:0})})),this.lastLayoutNodes=y,this.lastLayoutEdges=p,this.lastAssign=t,this.lastGraph=m,this.lastOptions=i,this.lastClusterMap=b,"undefined"!=typeof window){r.next=27;break}return r.abrupt("return");case 27:return x=0,r.abrupt("return",new Promise((function(n){w.timeInterval=window.setInterval((function(){w.running?(w.runOneStep(m,b,i),t&&y.forEach((function(t){var n=t.id,r=t.data;return e.mergeNodeData(n,{x:r.x,y:r.y,z:3===a?r.z:void 0})})),null==d||d({nodes:y,edges:p}),++x>=f&&(window.clearInterval(w.timeInterval),n({nodes:y,edges:p}))):n({nodes:y,edges:p})}),0),w.running=!0})));case 29:case"end":return r.stop()}}),r,this)})))}},{key:"formatOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign(Object.assign({},this.options),t),n=e.clustering,r=e.nodeClusterBy,i=e.center,a=e.width,o=e.height;return e.width=a||"undefined"==typeof window?a:window.innerWidth,e.height=o||"undefined"==typeof window?o:window.innerHeight,e.center=i||[e.width/2,e.height/2],e.clustering=n&&!!r,e}},{key:"runOneStep",value:function(t,e,n){var r=n.dimensions,i=n.height,a=n.width,o=n.gravity,s=n.center,u=n.speed,c=n.clustering,l=n.nodeClusterBy,f=n.clusterGravity,d=i*a,h=Math.sqrt(d)/10,p=t.getAllNodes(),v=d/(p.length+1),g=Math.sqrt(v),y={};if(this.applyCalculate(t,y,g,v),c){for(var m in e)e[m].cx=0,e[m].cy=0,e[m].count=0;for(var b in p.forEach((function(t){var n=t.data,r=e[n[l]];Oe(n.x)&&(r.cx+=n.x),Oe(n.y)&&(r.cy+=n.y),r.count++})),e)e[b].cx/=e[b].count,e[b].cy/=e[b].count;var x=f||o;p.forEach((function(t,n){var r=t.id,i=t.data;if(Oe(i.x)&&Oe(i.y)){var a=e[i[l]],o=Math.sqrt((i.x-a.cx)*(i.x-a.cx)+(i.y-a.cy)*(i.y-a.cy)),s=g*x;y[r].x-=s*(i.x-a.cx)/o,y[r].y-=s*(i.y-a.cy)/o}}))}p.forEach((function(t,e){var n=t.id,i=t.data;if(Oe(i.x)&&Oe(i.y)){var a=.01*g*o;y[n].x-=a*(i.x-s[0]),y[n].y-=a*(i.y-s[1]),3===r&&(y[n].z-=a*(i.z-s[2]))}})),p.forEach((function(e,n){var i=e.id,a=e.data;if(Oe(a.fx)&&Oe(a.fy))return a.x=a.fx,a.y=a.fy,void(3===r&&(a.z=a.fz));if(Oe(a.x)&&Oe(a.y)){var o=Math.sqrt(y[i].x*y[i].x+y[i].y*y[i].y+(3===r?y[i].z*y[i].z:0));if(o>0){var s=Math.min(h*(u/800),o);t.mergeNodeData(i,{x:a.x+y[i].x/o*s,y:a.y+y[i].y/o*s,z:3===r?a.z+y[i].z/o*s:void 0})}}}))}},{key:"applyCalculate",value:function(t,e,n,r){this.calRepulsive(t,e,r),this.calAttractive(t,e,n)}},{key:"calRepulsive",value:function(t,e,n){var r=this,i=t.getAllNodes();i.forEach((function(t,a){var o=t.data,s=t.id;e[s]={x:0,y:0,z:0},i.forEach((function(t,i){var u=t.data,c=t.id;if(!(a<=i)&&Oe(o.x)&&Oe(u.x)&&Oe(o.y)&&Oe(u.y)){var l=o.x-u.x,f=o.y-u.y,d=3===r.options.dimensions?o.z-u.z:0,h=l*l+f*f+d*d;0===h&&(h=1,l=.01,f=.01,d=.01);var p=n/h,v=l*p,g=f*p,y=d*p;e[s].x+=v,e[s].y+=g,e[c].x-=v,e[c].y-=g,3===r.options.dimensions&&(e[s].z+=y,e[c].z-=y)}}))}))}},{key:"calAttractive",value:function(t,e,n){var r=this;t.getAllEdges().forEach((function(i){var a=i.source,o=i.target;if(a&&o&&a!==o){var s=t.getNode(a).data,u=t.getNode(o).data;if(Oe(u.x)&&Oe(s.x)&&Oe(u.y)&&Oe(s.y)){var c=u.x-s.x,l=u.y-s.y,f=3===r.options.dimensions?u.z-s.z:0,d=Math.sqrt(c*c+l*l+f*f)/n,h=c*d,p=l*d,v=f*d;e[a].x+=h,e[a].y+=p,e[o].x-=h,e[o].y-=p,3===r.options.dimensions&&(e[a].z+=v,e[o].z-=v)}}}))}}])}(),nw={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30,width:300,height:300},rw=function(){return O((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),this.options=e,this.id="grid",this.options=Object.assign(Object.assign({},nw),e)}),[{key:"execute",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericGridLayout(!1,t,e));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericGridLayout(!0,t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericGridLayout",value:function(t,e,n){return Le(this,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h,p,v,y,m,b,x,w,k,E,O,S,M,T,A,P,N,C,_,L,R,j,D,I,F,z,B,G,W,V;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=Object.assign(Object.assign({},this.options),n),a=i.begin,o=void 0===a?[0,0]:a,s=i.condense,u=i.preventOverlapPadding,c=i.preventOverlap,l=i.rows,f=i.cols,d=i.nodeSpacing,h=i.nodeSize,p=i.width,v=i.height,y=i.position,m=i.sortBy,b=e.getAllNodes(),x=e.getAllEdges(),(w=null==b?void 0:b.length)&&1!==w){r.next=8;break}return r.abrupt("return",rb(e,t,o));case 8:if(k=b.map((function(t){return Jm(t)})),"id"===m||Te(m)&&void 0!==k[0].data[m]||(m="degree"),"degree"===m?k.sort((function(t,n){return e.getDegree(n.id,"both")-e.getDegree(t.id,"both")})):"id"===m?k.sort((function(t,e){return Oe(e.id)&&Oe(t.id)?e.id-t.id:"".concat(t.id).localeCompare("".concat(e.id))})):k.sort((function(t,e){return e.data[m]-t.data[m]})),E=p||"undefined"==typeof window?p:window.innerWidth,O=v||"undefined"==typeof window?v:window.innerHeight,S=w,M={rows:l,cols:f},null!=l&&null!=f?(M.rows=l,M.cols=f):null!=l&&null==f?(M.rows=l,M.cols=Math.ceil(S/M.rows)):null==l&&null!=f?(M.cols=f,M.rows=Math.ceil(S/M.cols)):(T=Math.sqrt(S*O/E),M.rows=Math.round(T),M.cols=Math.round(E/O*T)),M.rows=Math.max(M.rows,1),M.cols=Math.max(M.cols,1),M.cols*M.rows>S)A=iw(M),P=aw(M),(A-1)*P>=S?iw(M,A-1):(P-1)*A>=S&&aw(M,P-1);else for(;M.cols*M.rows<S;)N=iw(M),((C=aw(M))+1)*N>=S?aw(M,C+1):iw(M,N+1);for(_=s?0:E/M.cols,L=s?0:O/M.rows,(c||d)&&(R=Km(10,d),j=$m(30,h,!1),k.forEach((function(t){t.data.x&&t.data.y||(t.data.x=0,t.data.y=0);var n=e.getNode(t.id),r=g(Xm(j(n)||30),2),i=r[0],a=r[1],o=void 0!==R?R(t):u,s=i+o,c=a+o;_=Math.max(_,s),L=Math.max(L,c)}))),D={},I={row:0,col:0},F={},z=0;z<k.length;z++){if(B=k[z],G=void 0,y&&(G=y(e.getNode(B.id))),G&&(void 0!==G.row||void 0!==G.col)){if(void 0===(W={row:G.row,col:G.col}).col)for(W.col=0;ow(D,W);)W.col++;else if(void 0===W.row)for(W.row=0;ow(D,W);)W.row++;F[B.id]=W,sw(D,W)}cw(B,o,_,L,F,M,I,D)}return V={nodes:k,edges:x},t&&k.forEach((function(t){e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})})),r.abrupt("return",V);case 29:case"end":return r.stop()}}),r,this)})))}}])}(),iw=function(t,e){var n,r=t.rows||5,i=t.cols||5;return null==e?n=Math.min(r,i):Math.min(r,i)===t.rows?t.rows=e:t.cols=e,n},aw=function(t,e){var n,r=t.rows||5,i=t.cols||5;return null==e?n=Math.max(r,i):Math.max(r,i)===t.rows?t.rows=e:t.cols=e,n},ow=function(t,e){return t["c-".concat(e.row,"-").concat(e.col)]||!1},sw=function(t,e){return t["c-".concat(e.row,"-").concat(e.col)]=!0},uw=function(t,e){var n=t.cols||5;e.col++,e.col>=n&&(e.col=0,e.row++)},cw=function(t,e,n,r,i,a,o,s){var u,c,l=i[t.id];if(l)u=l.col*n+n/2+e[0],c=l.row*r+r/2+e[1];else{for(;ow(s,o);)uw(a,o);u=o.col*n+n/2+e[0],c=o.row*r+r/2+e[1],sw(s,o),uw(a,o)}t.data.x=u,t.data.y=c},lw=function(t,e,n){try{var r=Bb.mul(Bb.pow(e,2),-.5),i=r.mean("row"),a=r.mean("column"),o=r.mean();r.add(o).subRowVector(i).subColumnVector(a);var s=new Gb(r),u=Bb.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map((function(e){return Bb.mul([e],[u]).toJSON()[0].splice(0,t)}))}catch(t){for(var c=[],l=0;l<e.length;l++){var f=Math.random()*n,d=Math.random()*n;c.push([f,d])}return c}},fw={iterations:10,height:10,width:10,speed:100,gravity:10,k:5},dw=function(t,e){for(var n=Object.assign(Object.assign({},fw),e),r=n.positions,i=n.iterations,a=n.width,o=n.k,s=n.speed,u=void 0===s?100:s,c=n.strictRadial,l=n.focusIdx,f=n.radii,d=void 0===f?[]:f,h=n.nodeSizeFunc,p=t.getAllNodes(),v=[],g=a/10,y=0;y<i;y++)r.forEach((function(t,e){v[e]={x:0,y:0}})),hw(p,r,v,o,d,h),pw(r,v,u,c,l,g,a,d);return r},hw=function(t,e,n,r,i,a){e.forEach((function(o,s){n[s]={x:0,y:0},e.forEach((function(e,u){if(s!==u&&i[s]===i[u]){var c=o.x-e.x,l=o.y-e.y,f=Math.sqrt(c*c+l*l);if(0===f){f=1;var d=s>u?1:-1;c=.01*d,l=.01*d}if(f<a(t[s])/2+a(t[u])/2){var h=r*r/f;n[s].x+=c/f*h,n[s].y+=l/f*h}}}))}))},pw=function(t,e,n,r,i,a,o,s){var u=a||o/10;return r&&e.forEach((function(e,n){var r=t[n].x-t[i].x,a=t[n].y-t[i].y,o=Math.sqrt(r*r+a*a),s=a/o,u=-r/o,c=Math.sqrt(e.x*e.x+e.y*e.y),l=Math.acos((s*e.x+u*e.y)/c);l>Math.PI/2&&(l-=Math.PI/2,s*=-1,u*=-1);var f=Math.cos(l)*c;e.x=s*f,e.y=u*f})),t.forEach((function(a,o){if(o!==i){var c=Math.sqrt(e[o].x*e[o].x+e[o].y*e[o].y);if(c>0&&o!==i){var l=Math.min(u*(n/800),c);if(a.x+=e[o].x/c*l,a.y+=e[o].y/c*l,r){var f=a.x-t[i].x,d=a.y-t[i].y,h=Math.sqrt(f*f+d*d);f=f/h*s[o],d=d/h*s[o],a.x=t[i].x+f,a.y=t[i].y+d}}}})),t},vw={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10},gw=function(){return O((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),this.options=e,this.id="radial",this.options=Object.assign(Object.assign({},vw),e)}),[{key:"execute",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericRadialLayout(!1,t,e));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericRadialLayout(!0,t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericRadialLayout",value:function(t,e,n){return Le(this,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h,p,v,y,m,b,x,w,k,E,O,S,T,A,P,N,C,_,L,R,j,D,I,F,z,B,G,W,V,H,Y,U,q,X,K;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=Object.assign(Object.assign({},this.options),n),a=i.width,o=i.height,s=i.center,u=i.focusNode,c=i.unitRadius,l=i.nodeSize,f=i.nodeSpacing,d=i.strictRadial,h=i.preventOverlap,p=i.maxPreventOverlapIteration,v=i.sortBy,y=i.linkDistance,m=void 0===y?50:y,b=i.sortStrength,x=void 0===b?10:b,w=i.maxIteration,k=void 0===w?1e3:w,E=e.getAllNodes(),O=e.getAllEdges(),S=a||"undefined"==typeof window?a:window.innerWidth,T=o||"undefined"==typeof window?o:window.innerHeight,A=s||[S/2,T/2],(null==E?void 0:E.length)&&1!==E.length){r.next=9;break}return r.abrupt("return",rb(e,t,A));case 9:if(P=E[0],!Te(u)){r.next=21;break}N=0;case 12:if(!(N<E.length)){r.next=19;break}if(E[N].id!==u){r.next=16;break}return P=E[N],r.abrupt("break",19);case 16:N++,r.next=12;break;case 19:r.next=22;break;case 21:P=u||E[0];case 22:return C=bw(E,P.id),_=Vb({nodes:E,edges:O},!1),L=Wb(_),R=ww(L,C),xw(L,C,R+1),j=L[C],D=S-A[0]>A[0]?A[0]:S-A[0],I=T-A[1]>A[1]?A[1]:T-A[1],0===D&&(D=S/2),0===I&&(I=T/2),F=Math.min(D,I),z=Math.max.apply(Math,M(j)),B=[],G=c||F/z,j.forEach((function(t,e){B[e]=t*G})),W=yw(E,L,m,B,G,v,x),V=mw(W),H=lw(m,W,m),Y=H.map((function(t){var e=g(t,2),n=e[0],r=e[1];return{x:(isNaN(n)?Math.random()*m:n)-H[C][0],y:(isNaN(r)?Math.random()*m:r)-H[C][1]}})),this.run(k,Y,V,W,B,C),h&&(U=Zm(l,f),q={nodes:E,nodeSizeFunc:U,positions:Y,radii:B,height:T,width:S,strictRadial:Boolean(d),focusIdx:C,iterations:p||200,k:Y.length/4.5},Y=dw(e,q)),X=[],Y.forEach((function(t,e){var n=Jm(E[e]);n.data.x=t.x+A[0],n.data.y=t.y+A[1],X.push(n)})),t&&X.forEach((function(t){return e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})})),K={nodes:X,edges:O},r.abrupt("return",K);case 48:case"end":return r.stop()}}),r,this)})))}},{key:"run",value:function(t,e,n,r,i,a){for(var o=0;o<=t;o++){var s=o/t;this.oneIteration(s,e,i,r,n,a)}}},{key:"oneIteration",value:function(t,e,n,r,i,a){var o=1-t;e.forEach((function(s,u){var c=Ub(s,{x:0,y:0}),l=0===c?0:1/c;if(u!==a){var f=0,d=0,h=0;e.forEach((function(t,e){if(u!==e){var n=Ub(s,t),a=0===n?0:1/n,o=r[e][u];h+=i[u][e],f+=i[u][e]*(t.x+o*(s.x-t.x)*a),d+=i[u][e]*(t.y+o*(s.y-t.y)*a)}}));var p=0===n[u]?0:1/n[u];h*=o,h+=t*p*p,f*=o,f+=t*p*s.x*l,s.x=f/h,d*=o,d+=t*p*s.y*l,s.y=d/h}}))}}])}(),yw=function(t,e,n,r,i,a,o){if(!t)return[];var s=[];if(e){var u={};e.forEach((function(e,c){var l=[];e.forEach((function(e,s){var f,d;if(c===s)l.push(0);else if(r[c]===r[s])if("data"===a)l.push(e*(Math.abs(c-s)*o)/(r[c]/i));else if(a){var h,p;if(u[t[c].id])h=u[t[c].id];else{var v=("id"===a?t[c].id:null===(f=t[c].data)||void 0===f?void 0:f[a])||0;h=Te(v)?v.charCodeAt(0):v,u[t[c].id]=h}if(u[t[s].id])p=u[t[s].id];else{var g=("id"===a?t[s].id:null===(d=t[s].data)||void 0===d?void 0:d[a])||0;p=Te(g)?g.charCodeAt(0):g,u[t[s].id]=p}l.push(e*(Math.abs(h-p)*o)/(r[c]/i))}else l.push(e*n/(r[c]/i));else{var y=(n+i)/2;l.push(e*y)}})),s.push(l)}))}return s},mw=function(t){for(var e=t.length,n=t[0].length,r=[],i=0;i<e;i++){for(var a=[],o=0;o<n;o++)0!==t[i][o]?a.push(1/(t[i][o]*t[i][o])):a.push(0);r.push(a)}return r},bw=function(t,e){var n=-1;return t.forEach((function(t,r){t.id===e&&(n=r)})),Math.max(n,0)},xw=function(t,e,n){for(var r=t.length,i=0;i<r;i++)if(t[e][i]===1/0){t[e][i]=n,t[i][e]=n;for(var a=0;a<r;a++)t[i][a]!==1/0&&t[e][a]===1/0&&(t[e][a]=n+t[i][a],t[a][e]=n+t[i][a])}for(var o=0;o<r;o++)if(o!==e)for(var s=0;s<r;s++)if(t[o][s]===1/0){var u=Math.abs(t[e][o]-t[e][s]);u=0===u?1:u,t[o][s]=u}},ww=function(t,e){for(var n=0,r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n},kw={center:[0,0],width:300,height:300},Ew=function(){return O((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),this.options=e,this.id="random",this.options=Object.assign(Object.assign({},kw),e)}),[{key:"execute",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.genericRandomLayout(!1,t,e));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"assign",value:function(t,e){return Le(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genericRandomLayout(!0,t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"genericRandomLayout",value:function(t,e,n){return Le(this,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=Object.assign(Object.assign({},this.options),n),a=i.center,o=i.width,s=i.height,u=e.getAllNodes(),c=o||"undefined"==typeof window?o:window.innerWidth,l=s||"undefined"==typeof window?s:window.innerHeight,f=a||[c/2,l/2],d=[],u&&u.forEach((function(t){d.push({id:t.id,data:{x:.9*(Math.random()-.5)*c+f[0],y:.9*(Math.random()-.5)*l+f[1]}})})),t&&d.forEach((function(t){return e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})})),h={nodes:d,edges:e.getAllEdges()},r.abrupt("return",h);case 12:case"end":return r.stop()}}),r,this)})))}}])}(),Ow=new Map;function Sw(t,e,n){return void 0===n&&(n=128),function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=e?e.apply(this,r):r[0];Ow.has(t)||Ow.set(t,function(t){var e,n,r,i=t||1;function a(t,a){++e>i&&(r=n,o(1),++e),n[t]=a}function o(t){e=0,n=Object.create(null),t||(r=Object.create(null))}return o(),{clear:o,has:function(t){return void 0!==n[t]||void 0!==r[t]},get:function(t){var e=n[t];return void 0!==e?e:void 0!==(e=r[t])?(a(t,e),e):void 0},set:function(t,e){void 0!==n[t]?n[t]=e:a(t,e)}}}(n));var o=Ow.get(t);if(o.has(a))return o.get(a);var s=t.apply(this,r);return o.set(a,s),s}}var Mw=function(t){function e(){var t;return k(this,e),(t=N(this,e,arguments)).id="fishbone",t}return _(e,t),O(e,[{key:"getRoot",value:function(){var t=this.context.model.getRootsData();if(!(Mh(t)||t.length>2))return t[0]}},{key:"formatSize",value:function(t){var e="function"==typeof t?t:function(){return t};return function(t){return gh(e(t))}}},{key:"doLayout",value:function(t,e){var n=e.hGap,r=e.getRibSep,i=e.vGap,a=e.nodeSize,o=e.height,s=this.context.model,u=this.formatSize(a),c=u(t)[0]+r(t),l=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r+=n*((t.children||[]).length+1),null===(e=t.children)||void 0===e||e.forEach((function(t){var e;null===(e=s.getNodeLikeDatum(t).children)||void 0===e||e.forEach((function(t){var e=s.getNodeLikeDatum(t);r=l(e,r)}))})),r},f=function(t){if(1===t.depth)return c;var e=s.getParentData(t.id,"tree");if(Pw(t)){var r=s.getParentData(e.id,"tree"),a=p(t)-p(r);return f(e)+a*n/i}var o=(e.children||[]).indexOf(t.id),h=s.getNodeData((e.children||[]).slice(o));return d(e)-h.reduce((function(t,e){return t+l(e)}),0)-u(e)[0]/2},d=Sw((function(t){if(Aw(t))return u(t)[0]/2;var e=s.getParentData(t.id,"tree");if(Pw(t))return f(t)+l(t)+u(t)[0]/2;var r=p(t)-p(e),a=n/i;return f(t)+r*a}),(function(t){return t.id})),h=function(t){return p(s.getParentData(t,"tree"))},p=Sw((function(t){if(Aw(t))return o/2;if(Pw(t)){var e=s.getParentData(t.id,"tree"),n=e.children.indexOf(t.id);if(0===n)return h(e.id)+i;var r=s.getNodeLikeDatum(e.children[n-1]);if(Mh(r.children))return p(r)+i;var a=s.getDescendantsData(r.id);return Math.max.apply(Math,M(a.map((function(t){return Pw(t)?h(t.id):p(t)}))))+i}if(Mh(t.children))return h(t.id)+i;var u=s.getNodeLikeDatum(t.children.slice(-1)[0]);if(Mh(u.children))return p(u)+i;var c=s.getDescendantsData(t.id).slice(-1)[0];return(Pw(c)?h(c.id):p(c))+i}),(function(t){return t.id})),v=0,g={nodes:[],edges:[]},y=function(t){var e;null===(e=t.children)||void 0===e||e.forEach((function(t){return y(s.getNodeLikeDatum(t))}));var n=p(t),i=d(t);if(g.nodes.push({id:t.id,x:i,y:n}),!Aw(t)){var a=s.getRelatedEdgesData(t.id,"in")[0],o=[f(t),Pw(t)?n:h(t.id)];g.edges.push({id:Kf(a),controlPoints:[o],relatedNodeId:t.id}),v=Math.max(v,i+r(t)),1===t.depth&&(c=v)}};return y(t),g}},{key:"placeAlterative",value:function(t,e){var n=(e.children||[]).filter((function(t,e){return e%2!=0}));if(0===n.length)return t;var r=this.context.model,i=t.nodes.find((function(t){return t.id===e.id})).y,a=function(t){var e=r.getAncestorsData(t,"tree");if(Mh(e))return!1;var i=1===e.length?t:e[e.length-2].id;return n.includes(i)};t.nodes.forEach((function(t){a(t.id)&&(t.y=2*i-t.y)})),t.edges.forEach((function(t){a(t.relatedNodeId)&&(t.controlPoints=t.controlPoints.map((function(t){return[t[0],2*i-t[1]]})))}))}},{key:"rightToLeft",value:function(t,e){return t.nodes.forEach((function(t){return t.x=e.width-t.x})),t.edges.forEach((function(t){t.controlPoints=t.controlPoints.map((function(t){return[e.width-t[0],t[1]]}))})),t}},{key:"execute",value:function(t,n){return r=this,i=void 0,a=void 0,o=Jn().mark((function r(){var i,a,o,s,u,c,l,f,d;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=Object.assign(Object.assign(Object.assign({},e.defaultOptions),this.options),n),a=i.direction,o=i.nodeSize,s=this.getRoot()){r.next=5;break}return r.abrupt("return",t);case 5:return u=this.formatSize(o),i.vGap||(i.vGap=Math.max.apply(Math,M((t.nodes||[]).map((function(t){return u(t)[1]}))))),i.hGap||(i.hGap=Math.max.apply(Math,M((t.nodes||[]).map((function(t){return u(t)[0]}))))),c=this.doLayout(s,i),this.placeAlterative(c,s),"RL"===a&&(c=this.rightToLeft(c,i)),l=this.context.model,f=[],d=[],c.nodes.forEach((function(t){var e=t.id,n=t.x,r=t.y,i=l.getNodeLikeDatum(e);f.push(Tw(i,{x:n,y:r}))})),c.edges.forEach((function(t){var e=t.id,n=t.controlPoints,r=l.getEdgeDatum(e);d.push(Tw(r,{controlPoints:n}))})),r.abrupt("return",{nodes:f,edges:d});case 17:case"end":return r.stop()}}),r,this)})),new(a||(a=Promise))((function(t,e){function n(t){try{u(o.next(t))}catch(t){e(t)}}function s(t){try{u(o.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof a?t:new a((function(e){e(t)}))}(e.value).then(n,s)}u((o=o.apply(r,i||[])).next())}));var r,i,a,o}}])}(Qg);Mw.defaultOptions={direction:"RL",getRibSep:function(){return 60}};var Tw=function(t,e){return Object.assign(Object.assign({},t),{style:Object.assign(Object.assign({},t.style||{}),e)})},Aw=function(t){return 0===t.depth},Pw=function(t){return(t.depth||(t.depth=0))%2==0},Nw=function(t){function e(){var t;return k(this,e),(t=N(this,e,arguments)).id="snake",t}return _(e,t),O(e,[{key:"formatSize",value:function(t,e){var n="function"==typeof e?e:function(){return e};return t.reduce((function(t,e){var r=g(gh(n(e))||[0,0],2),i=r[0],a=r[1];return[Math.max(t[0],i),Math.max(t[1],a)]}),[0,0])}},{key:"validate",value:function(t){var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,a={},o={},s={};n.forEach((function(t){a[t.id]=0,o[t.id]=0,s[t.id]=[]})),i.forEach((function(t){a[t.target]++,o[t.source]++,s[t.source].push(t.target)}));var u=new Set,c=function(t){u.has(t)||(u.add(t),s[t].forEach(c))};if(c(n[0].id),u.size!==n.length)return!1;var l=n.filter((function(t){return 0===a[t.id]})),f=n.filter((function(t){return 0===o[t.id]}));if(1!==l.length||1!==f.length)return!1;var d=n.filter((function(t){return 1===a[t.id]&&1===o[t.id]}));return d.length===n.length-2}},{key:"execute",value:function(t,n){return r=this,i=void 0,a=void 0,o=Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h,p,v,y,m,b,x,w,k,E,O,S,M,T;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.validate(t)){r.next=2;break}return r.abrupt("return",t);case 2:return a=Object.assign({},e.defaultOptions,this.options,n),o=a.nodeSize,s=a.padding,u=a.sortBy,c=a.cols,l=a.colGap,f=a.rowGap,d=a.clockwise,h=a.width,p=a.height,v=rf(s),y=g(v,4),m=y[0],b=y[1],x=y[2],w=y[3],k=this.formatSize(t.nodes||[],o),E=Math.ceil((t.nodes||[]).length/c),O=l||(h-w-b-c*k[0])/(c-1),((S=f||(p-m-x-E*k[1])/(E-1))===1/0||S<0)&&(S=0),(O===1/0||O<0)&&(O=0),M=u?null===(i=t.nodes)||void 0===i?void 0:i.sort(u):Cw(t),T=(M||[]).map((function(t,e){var n=Math.floor(e/c),r=e%c,i=w+(d?n%2==0?r:c-1-r:n%2==0?c-1-r:r)*(k[0]+O)+k[0]/2,a=m+n*(k[1]+S)+k[1]/2;return{id:t.id,style:{x:i,y:a}}})),r.abrupt("return",{nodes:T});case 13:case"end":return r.stop()}}),r,this)})),new(a||(a=Promise))((function(t,e){function n(t){try{u(o.next(t))}catch(t){e(t)}}function s(t){try{u(o.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof a?t:new a((function(e){e(t)}))}(e.value).then(n,s)}u((o=o.apply(r,i||[])).next())}));var r,i,a,o}}])}(Qg);function Cw(t){var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,a={},o={};n.forEach((function(t){a[t.id]=0,o[t.id]=[]})),i.forEach((function(t){a[t.target]++,o[t.source].push(t.target)}));var s=[],u=[];n.forEach((function(t){0===a[t.id]&&s.push(t.id)}));for(var c=function(){var t=s.shift(),e=n.find((function(e){return e.id===t}));u.push(e),o[t].forEach((function(t){a[t]--,0===a[t]&&s.push(t)}))};s.length>0;)c();return u}Nw.defaultOptions={padding:0,cols:5,clockwise:!0};const _w=function(t,e,n){if(!fn(t)&&!dd(t))return t;var r=n;return hv(t,(function(t,n){r=e(r,t,n)})),r},Lw=function(t,e){return _w(t,(function(t,n,r){return e.includes(r)||(t[r]=n),t}),{})};var Rw=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e)}(cd);function jw(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=document.createElement("div");return r.setAttribute("class","g6-".concat(t)),Object.assign(r.style,{position:"absolute",display:"block"}),e&&Object.assign(r.style,{position:"unset",gridArea:"1 / 1 / 2 / 2",inset:"0px",height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none"}),n&&Object.assign(r.style,n),r}function Dw(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:document.body,a=document.getElementById(t);a&&a.remove();var o=document.createElement(e);return o.innerHTML=r,o.id=t,Object.assign(o.style,n),i.appendChild(o),o}var Iw=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).$element=jw("background"),r.context.canvas.getContainer().prepend(r.$element),r.update(n),r}return _(e,t),O(e,[{key:"update",value:function(t){var n,r,i,a,o=this,s=Object.create(null,{update:{get:function(){return Dn(e,"update",o,1)}}});return n=this,r=void 0,i=void 0,a=Jn().mark((function e(){return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.update.call(this,t),Object.assign(this.$element.style,Lw(this.options,["key","type"]));case 2:case"end":return e.stop()}}),e,this)})),new(i||(i=Promise))((function(t,e){function o(t){try{u(a.next(t))}catch(t){e(t)}}function s(t){try{u(a.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(e.value).then(o,s)}u((a=a.apply(n,r||[])).next())}))}},{key:"destroy",value:function(){Dn(e,"destroy",this,3)([]),this.$element.remove()}}])}(Rw);function Fw(t,e,n,r,i,a){var o,s=n-t,u=r-e,c=i-t,l=a-e,f=c*s+l*u;o=f<=0||(f=(c=s-c)*s+(l=u-l)*u)<=0?0:f*f/(s*s+u*u);var d=c*c+l*l-o;return d<0?0:d}function zw(t,e,n,r){return(t-n)*(t-n)+(e-r)*(e-r)}function Bw(t,e,n,r,i){return zw(t,e,n,r)<i*i}function Gw(t){var e=Math.min(t.x1,t.x2),n=Math.max(t.x1,t.x2),r=Math.min(t.y1,t.y2),i=Math.max(t.y1,t.y2);return{x:e,y:r,x2:n,y2:i,width:n-e,height:i-r}}Iw.defaultOptions={transition:"background 0.5s",backgroundSize:"cover",zIndex:"-1"};var Ww,Vw=function(){function t(e,n,r,i){k(this,t),this.x1=e,this.y1=n,this.x2=r,this.y2=i}return O(t,[{key:"equals",value:function(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2}},{key:"draw",value:function(t){t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2)}},{key:"toString",value:function(){return"Line(from=(".concat(this.x1,",").concat(this.y1,"),to=(").concat(this.x2,",").concat(this.y2,"))")}},{key:"cuts",value:function(t,e){return!(this.y1===this.y2||e<this.y1&&e<=this.y2||e>this.y1&&e>=this.y2||t>this.x1&&t>=this.x2||!(t<this.x1&&t<=this.x2||t<=this.x1+(e-this.y1)*(this.x2-this.x1)/(this.y2-this.y1)))}},{key:"distSquare",value:function(t,e){return Fw(this.x1,this.y1,this.x2,this.y2,t,e)}},{key:"ptClose",value:function(t,e,n){if(this.x1<this.x2){if(t<this.x1-n||t>this.x2+n)return!1}else if(t<this.x2-n||t>this.x1+n)return!1;if(this.y1<this.y2){if(e<this.y1-n||e>this.y2+n)return!1}else if(e<this.y2-n||e>this.y1+n)return!1;return!0}}],[{key:"from",value:function(e){return new t(e.x1,e.y1,e.x2,e.y2)}}])}();!function(t){t[t.POINT=1]="POINT",t[t.PARALLEL=2]="PARALLEL",t[t.COINCIDENT=3]="COINCIDENT",t[t.NONE=4]="NONE"}(Ww||(Ww={}));var Hw,Yw=O((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;k(this,t),this.state=e,this.x=n,this.y=r}));function Uw(t,e){var n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),i=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(i){var a=n/i,o=r/i;return 0<=a&&a<=1&&0<=o&&o<=1?new Yw(Ww.POINT,t.x1+a*(t.x2-t.x1),t.y1+a*(t.y2-t.y1)):new Yw(Ww.NONE)}return new Yw(0===n||0===r?Ww.COINCIDENT:Ww.PARALLEL)}function qw(t,e){var n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),i=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(i){var a=n/i,o=r/i;if(0<=a&&a<=1&&0<=o&&o<=1)return a}return Number.POSITIVE_INFINITY}function Xw(t,e,n){var r=new Set;return t.width<=0?(r.add(Hw.LEFT),r.add(Hw.RIGHT)):e<t.x?r.add(Hw.LEFT):e>t.x+t.width&&r.add(Hw.RIGHT),t.height<=0?(r.add(Hw.TOP),r.add(Hw.BOTTOM)):n<t.y?r.add(Hw.TOP):n>t.y+t.height&&r.add(Hw.BOTTOM),r}function Kw(t,e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2,o=Array.from(Xw(t,i,a));if(0===o.length)return!0;for(var s=Xw(t,n,r);0!==s.size;){var u,c=nr(o);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(s.has(l))return!1}}catch(t){c.e(t)}finally{c.f()}if(s.has(Hw.RIGHT)||s.has(Hw.LEFT)){var f=t.x;s.has(Hw.RIGHT)&&(f+=t.width),r+=(f-n)*(a-r)/(i-n),n=f}else{var d=t.y;s.has(Hw.BOTTOM)&&(d+=t.height),n+=(d-r)*(i-n)/(a-r),r=d}s=Xw(t,n,r)}return!0}function $w(t,e){var n=Number.POSITIVE_INFINITY,r=0;function i(t,i,a,o){var s=qw(e,new Vw(t,i,a,o));(s=Math.abs(s-.5))>=0&&s<=1&&(r++,s<n&&(n=s))}return i(t.x,t.y,t.x2,t.y),i(t.x,t.y,t.x,t.y2),r>1?n:(i(t.x,t.y2,t.x2,t.y2),r>1?n:(i(t.x2,t.y,t.x2,t.y2),0===r?-1:n))}function Zw(t,e){var n=0,r=Uw(t,new Vw(e.x,e.y,e.x2,e.y));n+=r.state===Ww.POINT?1:0;var i=Uw(t,new Vw(e.x,e.y,e.x,e.y2));n+=i.state===Ww.POINT?1:0;var a=Uw(t,new Vw(e.x,e.y2,e.x2,e.y2));n+=a.state===Ww.POINT?1:0;var o=Uw(t,new Vw(e.x2,e.y,e.x2,e.y2));return{top:r,left:i,bottom:a,right:o,count:n+=o.state===Ww.POINT?1:0}}!function(t){t[t.LEFT=0]="LEFT",t[t.TOP=1]="TOP",t[t.RIGHT=2]="RIGHT",t[t.BOTTOM=3]="BOTTOM"}(Hw||(Hw={}));var Qw=function(){function t(e,n,r,i){k(this,t),this.x=e,this.y=n,this.width=r,this.height=i}return O(t,[{key:"x2",get:function(){return this.x+this.width}},{key:"y2",get:function(){return this.y+this.height}},{key:"cx",get:function(){return this.x+this.width/2}},{key:"cy",get:function(){return this.y+this.height/2}},{key:"radius",get:function(){return Math.max(this.width,this.height)/2}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}},{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"add",value:function(t){var e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x2,t.x+t.width),i=Math.max(this.y2,t.y+t.height);this.x=e,this.y=n,this.width=r-e,this.height=i-n}},{key:"addPoint",value:function(t){var e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x2,t.x),i=Math.max(this.y2,t.y);this.x=e,this.y=n,this.width=r-e,this.height=i-n}},{key:"toString",value:function(){return"Rectangle[x=".concat(this.x,", y=").concat(this.y,", w=").concat(this.width,", h=").concat(this.height,"]")}},{key:"draw",value:function(t){t.rect(this.x,this.y,this.width,this.height)}},{key:"containsPt",value:function(t,e){return t>=this.x&&t<=this.x2&&e>=this.y&&e<=this.y2}},{key:"area",get:function(){return this.width*this.height}},{key:"intersects",value:function(t){return!(this.area<=0||t.width<=0||t.height<=0)&&t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x2&&t.y<this.y2}},{key:"distSquare",value:function(t,e){if(this.containsPt(t,e))return 0;var n=Xw(this,t,e);return n.has(Hw.TOP)?n.has(Hw.LEFT)?zw(t,e,this.x,this.y):n.has(Hw.RIGHT)?zw(t,e,this.x2,this.y):(this.y-e)*(this.y-e):n.has(Hw.BOTTOM)?n.has(Hw.LEFT)?zw(t,e,this.x,this.y2):n.has(Hw.RIGHT)?zw(t,e,this.x2,this.y2):(e-this.y2)*(e-this.y2):n.has(Hw.LEFT)?(this.x-t)*(this.x-t):n.has(Hw.RIGHT)?(t-this.x2)*(t-this.x2):0}}],[{key:"from",value:function(e){return new t(e.x,e.y,e.width,e.height)}}])}(),Jw=function(){function t(e,n,r){k(this,t),this.cx=e,this.cy=n,this.radius=r}return O(t,[{key:"x",get:function(){return this.cx-this.radius}},{key:"x2",get:function(){return this.cx+this.radius}},{key:"width",get:function(){return 2*this.radius}},{key:"y",get:function(){return this.cy-this.radius}},{key:"y2",get:function(){return this.cy+this.radius}},{key:"height",get:function(){return 2*this.radius}},{key:"containsPt",value:function(t,e){return zw(this.cx,this.cy,t,e)<this.radius*this.radius}},{key:"distSquare",value:function(t,e){var n=zw(this.cx,this.cy,t,e);if(n<this.radius*this.radius)return 0;var r=Math.sqrt(n)-this.radius;return r*r}},{key:"draw",value:function(t){t.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,2*Math.PI)}}],[{key:"from",value:function(e){return new t(e.cx,e.cy,e.radius)}}])}(),tk=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:10,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:10,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:new Float32Array(Math.max(0,o*s)).fill(0);k(this,t),this.pixelGroup=e,this.i=n,this.j=r,this.pixelX=i,this.pixelY=a,this.width=o,this.height=s,this.area=u}return O(t,[{key:"createSub",value:function(e,n){return new t(this.pixelGroup,e.x,e.y,n.x,n.y,e.width,e.height)}},{key:"copy",value:function(e,n){return new t(this.pixelGroup,this.scaleX(n.x),this.scaleY(n.y),n.x,n.y,e.width,e.height,e.area)}},{key:"boundX",value:function(t){return t<this.i?this.i:t>=this.width?this.width-1:t}},{key:"boundY",value:function(t){return t<this.j?this.j:t>=this.height?this.height-1:t}},{key:"scaleX",value:function(t){return this.boundX(Math.floor((t-this.pixelX)/this.pixelGroup))}},{key:"scaleY",value:function(t){return this.boundY(Math.floor((t-this.pixelY)/this.pixelGroup))}},{key:"scale",value:function(t){var e=this.scaleX(t.x),n=this.scaleY(t.y),r=this.boundX(Math.ceil((t.x+t.width-this.pixelX)/this.pixelGroup)),i=this.boundY(Math.ceil((t.y+t.height-this.pixelY)/this.pixelGroup));return new Qw(e,n,r-e,i-n)}},{key:"invertScaleX",value:function(t){return Math.round(t*this.pixelGroup+this.pixelX)}},{key:"invertScaleY",value:function(t){return Math.round(t*this.pixelGroup+this.pixelY)}},{key:"addPadding",value:function(t,e){var n=Math.ceil(e/this.pixelGroup),r=this.boundX(t.x-n),i=this.boundY(t.y-n),a=this.boundX(t.x2+n),o=this.boundY(t.y2+n);return new Qw(r,i,a-r,o-i)}},{key:"get",value:function(t,e){return t<0||e<0||t>=this.width||e>=this.height?Number.NaN:this.area[t+e*this.width]}},{key:"inc",value:function(t,e,n){t<0||e<0||t>=this.width||e>=this.height||(this.area[t+e*this.width]+=n)}},{key:"set",value:function(t,e,n){t<0||e<0||t>=this.width||e>=this.height||(this.area[t+e*this.width]=n)}},{key:"incArea",value:function(t,e){if(!(t.width<=0||t.height<=0||0===e)){var n=this.width,r=t.width,i=Math.max(0,t.i),a=Math.max(0,t.j),o=Math.min(t.i+t.width,n),s=Math.min(t.j+t.height,this.height);if(!(s<=0||o<=0||i>=n||s>=this.height))for(var u=a;u<s;u++)for(var c=(u-t.j)*r,l=u*n,f=i;f<o;f++){var d=t.area[f-t.i+c];0!==d&&(this.area[f+l]+=e*d)}}}},{key:"fill",value:function(t){this.area.fill(t)}},{key:"fillArea",value:function(t,e){for(var n=t.x+t.y*this.width,r=0;r<t.height;r++){var i=n+r*this.width;this.area.fill(e,i,i+t.width)}}},{key:"fillHorizontalLine",value:function(t,e,n,r){var i=t+e*this.width;this.area.fill(r,i,i+n)}},{key:"fillVerticalLine",value:function(t,e,n,r){for(var i=t+e*this.width,a=0;a<n;a++)this.area[i+a*this.width]=r}},{key:"clear",value:function(){this.area.fill(0)}},{key:"toString",value:function(){for(var t="",e=0;e<this.height;e++){for(var n=e*this.width,r=0;r<this.width;r++)t+=this.area[n+r].toFixed(1).padStart(6),t+=" ";t+="\n"}return t}},{key:"draw",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(this.width<=0||this.height<=0)){t.save(),e&&t.translate(this.pixelX,this.pixelY);var n=this.area.reduce((function(t,e){return Math.min(t,e)}),Number.POSITIVE_INFINITY),r=this.area.reduce((function(t,e){return Math.max(t,e)}),Number.NEGATIVE_INFINITY),i=function(t){return(t-n)/(r-n)};t.scale(this.pixelGroup,this.pixelGroup);for(var a=0;a<this.width;a++)for(var o=0;o<this.height;o++){var s=this.area[a+o*this.width];t.fillStyle="rgba(0, 0, 0, ".concat(i(s),")"),t.fillRect(a,o,1,1)}t.restore()}}},{key:"drawThreshold",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!(this.width<=0||this.height<=0)){t.save(),n&&t.translate(this.pixelX,this.pixelY),t.scale(this.pixelGroup,this.pixelGroup);for(var r=0;r<this.width;r++)for(var i=0;i<this.height;i++){var a=this.area[r+i*this.width];t.fillStyle=a>e?"black":"white",t.fillRect(r,i,1,1)}t.restore()}}}],[{key:"fromPixelRegion",value:function(e,n){return new t(n,0,0,e.x,e.y,Math.ceil(e.width/n),Math.ceil(e.height/n))}}])}();function ek(t,e){var n=function(t){return{x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e}};return Array.isArray(t)?t.map(n):n(t)}function nk(t,e,n){return rk(Object.assign(Gw(t),{distSquare:function(e,n){return Fw(t.x1,t.y1,t.x2,t.y2,e,n)}}),e,n)}function rk(t,e,n){var r=ek(t,n),i=e.scale(r),a=e.createSub(i,r);return function(t,e,n,r){for(var i=n*n,a=0;a<t.height;a++)for(var o=0;o<t.width;o++){var s=r(e.invertScaleX(t.i+o),e.invertScaleY(t.j+a));if(0!==s){if(s<i){var u=n-Math.sqrt(s);t.set(o,a,u*u)}}else t.set(o,a,i)}}(a,e,n,(function(e,n){return t.distSquare(e,n)})),a}function ik(t,e){return{x:t,y:e}}function ak(t,e){return e.some((function(e){return e.containsPt(t.x,t.y)}))}function ok(t,e){return e.some((function(e){return!!Bw(e.x1,e.y1,t.x,t.y,.001)||!!Bw(e.x2,e.y2,t.x,t.y,.001)}))}function sk(t,e){var n,r=Number.POSITIVE_INFINITY,i=null,a=nr(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(Kw(o,e)){var s=$w(o,e);s>=0&&s<r&&(i=o,r=s)}}}catch(t){a.e(t)}finally{a.f()}return i}function uk(t,e,n,r){var i=n.top,a=n.left,o=n.bottom,s=n.right;if(r){if(a.state===Ww.POINT){if(i.state===Ww.POINT)return ik(t.x-e,t.y-e);if(o.state===Ww.POINT)return ik(t.x-e,t.y2+e);var u=t.width*t.height;return t.width*(.5*(a.y-t.y+(s.y-t.y)))<.5*u?a.y>s.y?ik(t.x-e,t.y-e):ik(t.x2+e,t.y-e):a.y<s.y?ik(t.x-e,t.y2+e):ik(t.x2+e,t.y2+e)}if(s.state===Ww.POINT){if(i.state===Ww.POINT)return ik(t.x2+e,t.y-e);if(o.state===Ww.POINT)return ik(t.x2+e,t.y2+e)}var c=t.height*t.width;return t.height*(.5*(i.x-t.x+(s.x-t.x)))<.5*c?i.x>o.x?ik(t.x-e,t.y-e):ik(t.x-e,t.y2+e):i.x<o.x?ik(t.x2+e,t.y-e):ik(t.x2+e,t.y2+e)}if(a.state===Ww.POINT){if(i.state===Ww.POINT)return ik(t.x2+e,t.y2+e);if(o.state===Ww.POINT)return ik(t.x2+e,t.y-e);var l=t.height*t.width;return t.width*(.5*(a.y-t.y+(s.y-t.y)))<.5*l?a.y>s.y?ik(t.x2+e,t.y2+e):ik(t.x-e,t.y2+e):a.y<s.y?ik(t.x2+e,t.y-e):ik(t.x-e,t.y-e)}if(s.state===Ww.POINT){if(i.state===Ww.POINT)return ik(t.x-e,t.y2+e);if(o.state===Ww.POINT)return ik(t.x-e,t.y-e)}var f=t.height*t.width;return t.height*(.5*(i.x-t.x+(s.x-t.x)))<.5*f?i.x>o.x?ik(t.x2+e,t.y2+e):ik(t.x2+e,t.y-e):i.x<o.x?ik(t.x-e,t.y2+e):ik(t.x-e,t.y-e)}function ck(t,e,n,r){if(!(t.closed?n<t.length:n<t.length-1))return!1;for(var i=t.get(e),a=t.get(n+1),o=e+1;o<=n;o++){var s=t.get(o);if(Fw(i.x,i.y,a.x,a.y,s.x,s.y)>r)return!1}return!0}function lk(t,e){switch(t){case-2:return(((3-e)*e-3)*e+1)/6;case-1:return((3*e-6)*e*e+4)/6;case 0:return(((-3*e+3)*e+3)*e+1)/6;case 1:return e*e*e/6;default:throw new Error("unknown error")}}var fk=function(){return O((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];k(this,t),this.points=e,this.closed=n}),[{key:"get",value:function(t){var e=t,n=this.points.length;return t<0?this.closed?this.get(t+n):this.points[0]:t>=n?this.closed?this.get(t-n):this.points[n-1]:this.points[e]}},{key:"length",get:function(){return this.points.length}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,e=this.points;if(0===e.length)return"";var n,r="function"==typeof t?t:function(t){if(!Number.isFinite(t))return function(t){return t};if(0===t)return Math.round;var e=Math.pow(10,t);return function(t){return Math.round(t*e)/e}}(t),i="M",a=nr(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;i+="".concat(r(o.x),",").concat(r(o.y)," L")}}catch(t){a.e(t)}finally{a.f()}return i=i.slice(0,-1),this.closed&&(i+=" Z"),i}},{key:"draw",value:function(t){var e=this.points;if(0!==e.length){t.beginPath(),t.moveTo(e[0].x,e[0].y);var n,r=nr(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.lineTo(i.x,i.y)}}catch(t){r.e(t)}finally{r.f()}this.closed&&t.closePath()}}},{key:"sample",value:function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return function(e){var n=t,r=e.length;if(n>1)for(r=Math.floor(e.length/n);r<3&&n>1;)n-=1,r=Math.floor(e.length/n);for(var i=[],a=0,o=0;o<r;o++,a+=n)i.push(e.get(a));return new fk(i)}}(t)(this)}},{key:"simplify",value:function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(e){if(t<0||e.length<3)return e;for(var n=[],r=0,i=t*t;r<e.length;){for(var a=r+1;ck(e,r,a,i);)a++;n.push(e.get(r)),r=a}return new fk(n)}}(t)(this)}},{key:"bSplines",value:function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;function e(t,e,n){for(var r=0,i=0,a=-2;a<=1;a++){var o=t.get(e+a),s=lk(a,n);r+=s*o.x,i+=s*o.y}return{x:r,y:i}}return function(n){if(n.length<3)return n;var r=[],i=n.closed,a=n.length+3-1+(i?0:2);r.push(e(n,2-(i?0:2),0));for(var o=2-(i?0:2);o<a;o++)for(var s=1;s<=t;s++)r.push(e(n,o,s/t));return new fk(r)}}(t)(this)}},{key:"apply",value:function(t){return t(this)}},{key:"containsElements",value:function(t){var e=this,n=function(t){if(0===t.length)return null;var e,n=t[0],r=new Qw(n.x,n.y,0,0),i=nr(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;r.addPoint(a)}}catch(t){i.e(t)}finally{i.f()}return r}(this.points);return!!n&&t.every((function(t){return n.containsPt(t.cx,t.cy)&&e.withinArea(t.cx,t.cy)}))}},{key:"withinArea",value:function(t,e){if(0===this.length)return!1;for(var n=0,r=this.points[0],i=new Vw(r.x,r.y,r.x,r.y),a=1;a<this.points.length;a++){var o=this.points[a];i.x1=i.x2,i.y1=i.y2,i.x2=o.x,i.y2=o.y,i.cuts(t,e)&&n++}return i.x1=i.x2,i.y1=i.y2,i.x2=r.x,i.y2=r.y,i.cuts(t,e)&&n++,n%2==1}}])}(),dk=function(){return O((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;k(this,t),this.count=0,this.arr=[],this.set=new Set,this.arr.length=e}),[{key:"add",value:function(t){this.set.add("".concat(t.x,"x").concat(t.y)),this.arr[this.count++]=t}},{key:"contains",value:function(t){return this.set.has("".concat(t.x,"x").concat(t.y))}},{key:"isFirst",value:function(t){if(0===this.count)return!1;var e=this.arr[0];return null!=e&&e.x===t.x&&e.y===t.y}},{key:"path",value:function(){return new fk(this.arr.slice(0,this.count))}},{key:"clear",value:function(){this.set.clear(),this.count=0}},{key:"get",value:function(t){return this.arr[t]}},{key:"length",get:function(){return this.count}}])}();function hk(t,e){var n=2*(Math.floor(t.width)+Math.floor(t.height)),r=new dk(n);function i(n,r,i,a){var o=t.get(n,r);return Number.isNaN(o)?Number.NaN:o>e?i+a:i}function a(t,e){var n=0;return n=i(t,e,n,1),n=i(t+1,e,n,2),n=i(t,e+1,n,4),n=i(t+1,e+1,n,8),Number.isNaN(n)?-1:n}var o=1;function s(e,n){for(var i=e,s=n,u=t.invertScaleX(i),c=t.invertScaleY(s),l=0;l<t.width*t.height;l++){var f={x:u,y:c};if(r.contains(f)){if(r.isFirst(f))return!0}else r.add(f);var d=a(i,s);switch(d){case-1:return!0;case 0:case 3:case 2:case 7:o=2;break;case 12:case 14:case 4:o=3;break;case 6:o=0===o?3:2;break;case 1:case 13:case 5:o=0;break;case 9:o=2===o?0:1;break;case 10:case 8:case 11:o=1;break;default:return console.warn("Marching squares invalid state: "+d),!0}switch(o){case 0:s--,c-=t.pixelGroup;break;case 1:s++,c+=t.pixelGroup;break;case 3:i--,u-=t.pixelGroup;break;case 2:i++,u+=t.pixelGroup;break;default:return console.warn("Marching squares invalid state: "+d),!0}}return!0}for(var u=0;u<t.width;u++)for(var c=0;c<t.height;c++)if(!(t.get(u,c)<=e)){var l=a(u,c);if(!(l<0||15===l)&&s(u,c))return r.path()}return null}var pk,vk={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function gk(t){return null!=t&&"number"==typeof t.radius}function yk(t,e){if(gk(t)!==gk(e))return!1;if(gk(t)){var n=e;return t.cx===n.cx&&t.cy===n.cy&&t.radius===n.radius}var r=e;return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height}!function(t){t[t.MEMBERS=0]="MEMBERS",t[t.NON_MEMBERS=1]="NON_MEMBERS",t[t.EDGES=2]="EDGES"}(pk||(pk={}));var mk=function(){return O((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new Qw(0,0,0,0),this.potentialArea=new tk(1,0,0,0,0,0,0),this.o=Object.assign({},vk,e)}),[{key:"pushMember",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0!==e.length){this.dirty.add(pk.MEMBERS);for(var r=0,i=e;r<i.length;r++){var a=i[r];this.members.push({raw:a,obj:gk(a)?Jw.from(a):Qw.from(a),area:null})}}}},{key:"removeMember",value:function(t){var e=this.members.findIndex((function(e){return yk(e.raw,t)}));return!(e<0||(this.members.splice(e,1),this.dirty.add(pk.MEMBERS),0))}},{key:"removeNonMember",value:function(t){var e=this.nonMembers.findIndex((function(e){return yk(e.raw,t)}));return!(e<0||(this.nonMembers.splice(e,1),this.dirty.add(pk.NON_MEMBERS),0))}},{key:"removeEdge",value:function(t){var e=this.edges.findIndex((function(e){return e.obj.equals(t)}));return!(e<0||(this.edges.splice(e,1),this.dirty.add(pk.NON_MEMBERS),0))}},{key:"pushNonMember",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0!==e.length){this.dirty.add(pk.NON_MEMBERS);for(var r=0,i=e;r<i.length;r++){var a=i[r];this.nonMembers.push({raw:a,obj:gk(a)?Jw.from(a):Qw.from(a),area:null})}}}},{key:"pushEdge",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0!==e.length){this.dirty.add(pk.EDGES);for(var r=0,i=e;r<i.length;r++){var a=i[r];this.edges.push({raw:a,obj:Vw.from(a),area:null})}}}},{key:"update",value:function(){var t=this,e=this.dirty.has(pk.MEMBERS),n=this.dirty.has(pk.NON_MEMBERS),r=this.dirty.has(pk.EDGES);this.dirty.clear();var i=this.members.map((function(t){return t.obj}));if(this.o.virtualEdges&&(e||n)){var a=this.nonMembers.map((function(t){return t.obj})),o=function(t,e,n,r){if(0===t.length)return[];var i=function(t){if(t.length<2)return t;var e=0,n=0;return t.forEach((function(t){e+=t.cx,n+=t.cy})),e/=t.length,n/=t.length,t.map((function(t){var r=e-t.cx,i=n-t.cy;return[t,r*r+i*i]})).sort((function(t,e){return t[1]-e[1]})).map((function(t){return t[0]}))}(t);return i.map((function(t,a){var o=i.slice(0,a);return function(t,e,n,r,i){var a=ik(e.cx,e.cy),o=function(t,e,n){var r=Number.POSITIVE_INFINITY;return e.reduce((function(e,i){var a=zw(t.x,t.y,i.cx,i.cy);if(a>r)return e;var o=new Vw(t.x,t.y,i.cx,i.cy),s=function(t,e){return t.reduce((function(t,n){return Kw(n,e)&&function(t,e){function n(t,n,r,i){var a=qw(e,new Vw(t,n,r,i));return(a=Math.abs(a-.5))>=0&&a<=1?1:0}var r=n(t.x,t.y,t.x2,t.y);return(r+=n(t.x,t.y,t.x,t.y2))>1||(r+=n(t.x,t.y2,t.x2,t.y2))>1||(r+=n(t.x2,t.y,t.x2,t.y2))>0}(n,e)?t+1:t}),0)}(n,o);return a*(s+1)*(s+1)<r&&(e=i,r=a*(s+1)*(s+1)),e}),null)}(a,n,t);if(null==o)return[];var s=function(t,e,n,r){var i=[],a=[];a.push(t);for(var o=!0,s=0;s<n&&o;s++)for(o=!1;!o&&a.length>0;){var u=a.pop(),c=sk(e,u),l=c?Zw(u,c):null;if(c&&l&&2===l.count){for(var f=r,d=uk(c,f,l,!0),h=ok(d,a)||ok(d,i),p=ak(d,e);!h&&p&&f>=1;)h=ok(d=uk(c,f/=1.5,l,!0),a)||ok(d,i),p=ak(d,e);if(!d||h||p||(a.push(new Vw(u.x1,u.y1,d.x,d.y)),a.push(new Vw(d.x,d.y,u.x2,u.y2)),o=!0),!o){var v=ok(d=uk(c,f=r,l,!1),a)||ok(d,i);for(p=ak(d,e);!v&&p&&f>=1;)v=ok(d=uk(c,f/=1.5,l,!1),a)||ok(d,i),p=ak(d,e);d&&!v&&(a.push(new Vw(u.x1,u.y1,d.x,d.y)),a.push(new Vw(d.x,d.y,u.x2,u.y2)),o=!0),o||i.push(u)}}else o||i.push(u)}for(;a.length>0;)i.push(a.pop());return i}(new Vw(a.x,a.y,o.cx,o.cy),t,r,i);return function(t,e){for(var n=[];t.length>0;){var r=t.pop();if(0===t.length){n.push(r);break}var i=t.pop(),a=new Vw(r.x1,r.y1,i.x2,i.y2);sk(e,a)?(n.push(r),t.push(i)):t.push(a)}return n}(s,t)}(e,t,o,n,r)})).flat()}(i,a,this.o.maxRoutingIterations,this.o.morphBuffer),s=new Map(this.virtualEdges.map((function(t){return[t.obj.toString(),t.area]})));this.virtualEdges=o.map((function(t){var e;return{raw:t,obj:t,area:null!==(e=s.get(t.toString()))&&void 0!==e?e:null}})),r=!0}var u=!1;if(e||r){var c=function(t,e){if(0===t.length)return new Qw(0,0,0,0);var n,r=Qw.from(t[0]),i=nr(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;r.add(a)}}catch(t){i.e(t)}finally{i.f()}var o,s=nr(e);try{for(s.s();!(o=s.n()).done;){var u=o.value;r.add(Gw(u))}}catch(t){s.e(t)}finally{s.f()}return r}(i,this.virtualEdges.concat(this.edges).map((function(t){return t.obj}))),l=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,f=Qw.from(ek(c,l));f.equals(this.activeRegion)||(u=!0,this.activeRegion=f)}if(u){var d=Math.ceil(this.activeRegion.width/this.o.pixelGroup),h=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=tk.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach((function(t){return t.area=null})),this.nonMembers.forEach((function(t){return t.area=null})),this.edges.forEach((function(t){return t.area=null})),this.virtualEdges.forEach((function(t){return t.area=null}))):d===this.potentialArea.width&&h===this.potentialArea.height||(this.potentialArea=tk.fromPixelRegion(this.activeRegion,this.o.pixelGroup))}var p=new Map,v=function(t){if(t.area){var e="".concat(t.obj.width,"x").concat(t.obj.height,"x").concat(t.obj instanceof Qw?"R":"C");p.set(e,t.area)}},g=function(e){if(!e.area){var n="".concat(e.obj.width,"x").concat(e.obj.height,"x").concat(e.obj instanceof Qw?"R":"C");if(p.has(n)){var r=p.get(n);e.area=t.potentialArea.copy(r,{x:e.obj.x-t.o.nodeR1,y:e.obj.y-t.o.nodeR1})}else{var i=e.obj instanceof Qw?function(t,e,n){var r=e.scale(t),i=e.addPadding(r,n),a=e.createSub(i,{x:t.x-n,y:t.y-n}),o=r.x-i.x,s=r.y-i.y,u=i.x2-r.x2,c=i.y2-r.y2,l=i.width-o-u,f=i.height-s-c,d=n*n;a.fillArea({x:o,y:s,width:l+1,height:f+1},d);for(var h=[0],p=Math.max(s,o,u,c),v=e.invertScaleX(r.x+r.width/2),g=1;g<p;g++){var y=e.invertScaleY(r.y-g),m=t.distSquare(v,y);if(!(m<d))break;var b=n-Math.sqrt(m);h.push(b*b)}for(var x=[],w=Math.max(o,u),k=Math.max(s,u),E=1;E<w;E++){for(var O=e.invertScaleX(r.x-E),S=[],M=1;M<k;M++){var T=e.invertScaleY(r.y-M),A=t.distSquare(O,T);if(A<d){var P=n-Math.sqrt(A);S.push(P*P)}else S.push(0)}x.push(S)}for(var N=1;N<Math.min(s,h.length);N++){var C=h[N];a.fillHorizontalLine(o,s-N,l+1,C)}for(var _=1;_<Math.min(c,h.length);_++){var L=h[_];a.fillHorizontalLine(o,s+f+_,l+1,L)}for(var R=1;R<Math.min(o,h.length);R++){var j=h[R];a.fillVerticalLine(o-R,s,f+1,j)}for(var D=1;D<Math.min(c,h.length);D++){var I=h[D];a.fillVerticalLine(o+l+D,s,f+1,I)}for(var F=1;F<o;F++){for(var z=x[F-1],B=o-F,G=1;G<s;G++)a.set(B,s-G,z[G-1]);for(var W=1;W<c;W++)a.set(B,s+f+W,z[W-1])}for(var V=1;V<u;V++){for(var H=x[V-1],Y=o+l+V,U=1;U<s;U++)a.set(Y,s-U,H[U-1]);for(var q=1;q<c;q++)a.set(Y,s+f+q,H[q-1])}return a}(e.obj,t.potentialArea,t.o.nodeR1):rk(e.obj,t.potentialArea,t.o.nodeR1);e.area=i,p.set(n,i)}}};this.members.forEach(v),this.nonMembers.forEach(v),this.members.forEach(g),this.nonMembers.forEach((function(e){t.activeRegion.intersects(e.obj)?g(e):e.area=null})),this.edges.forEach((function(e){e.area||(e.area=nk(e.obj,t.potentialArea,t.o.edgeR1))})),this.virtualEdges.forEach((function(e){e.area||(e.area=nk(e.obj,t.potentialArea,t.o.edgeR1))}))}},{key:"drawMembers",value:function(t){var e,n=nr(this.members);try{for(n.s();!(e=n.n()).done;)e.value.obj.draw(t)}catch(t){n.e(t)}finally{n.f()}}},{key:"drawNonMembers",value:function(t){var e,n=nr(this.nonMembers);try{for(n.s();!(e=n.n()).done;)e.value.obj.draw(t)}catch(t){n.e(t)}finally{n.f()}}},{key:"drawEdges",value:function(t){var e,n=nr(this.edges);try{for(n.s();!(e=n.n()).done;)e.value.obj.draw(t)}catch(t){n.e(t)}finally{n.f()}}},{key:"drawPotentialArea",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.potentialArea.draw(t,e)}},{key:"compute",value:function(){if(0===this.members.length)return new fk([]);this.dirty.size>0&&this.update();var t=this.o,e=this.potentialArea,n=this.members.map((function(t){return t.area})),r=this.virtualEdges.concat(this.edges).map((function(t){return t.area})),i=this.nonMembers.filter((function(t){return null!=t.area})).map((function(t){return t.area})),a=this.members.map((function(t){return t.obj}));return function(t,e,n,r,i){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=Object.assign({},vk,a),s=o.threshold,u=o.memberInfluenceFactor,c=o.edgeInfluenceFactor,l=o.nonMemberInfluenceFactor,f=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),d=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1),h=0;h<o.maxMarchingIterations;h++){if(t.clear(),0!==u){var p,v=u/f,g=nr(e);try{for(g.s();!(p=g.n()).done;){var y=p.value;t.incArea(y,v)}}catch(t){g.e(t)}finally{g.f()}}if(0!==c){var m,b=c/d,x=nr(n);try{for(x.s();!(m=x.n()).done;){var w=m.value;t.incArea(w,b)}}catch(t){x.e(t)}finally{x.f()}}if(0!==l){var k,E=l/f,O=nr(r);try{for(O.s();!(k=O.n()).done;){var S=k.value;t.incArea(S,E)}}catch(t){O.e(t)}finally{O.f()}}var M=hk(t,s);if(M&&i(M))return M;if(s*=.95,h<=.5*o.maxMarchingIterations)u*=1.2,c*=1.2;else{if(!(0!==l&&r.length>0))break;l*=.8}}return new fk([])}(e,n,r,i,(function(t){return t.containsElements(a)}),t)}}])}(),bk=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,vd({},e.defaultOptions,n)])).members=new Map,r.avoidMembers=new Map,r.bubbleSetOptions={},r.drawBubbleSets=function(){var t=r.parseOptions(),e=t.style,n=t.bubbleSetOptions;pl(r.bubbleSetOptions,n)||r.init(),r.bubbleSetOptions=Object.assign({},n);var i=Object.assign(Object.assign({},e),{d:r.getPath()});r.shape?r.shape.update(i):(r.shape=new jh({style:i}),r.context.canvas.appendChild(r.shape))},r.updateBubbleSetsPath=function(t){if(r.shape){var e=Kf(t.data);[].concat(M(r.options.members),M(r.options.avoidMembers)).includes(e)&&r.shape.update(Object.assign(Object.assign({},r.parseOptions().style),{d:r.getPath(e)}))}},r.getPath=function(t){var e=r.context.graph,n=r.options.members,i=M(r.members.keys()),a=r.options.avoidMembers,o=M(r.avoidMembers.keys());if(!t&&pl(n,i)&&pl(a,o))return r.path;var s=od(i,n,(function(t){return t})),u=s.enter,c=void 0===u?[]:u,l=s.exit,f=void 0===l?[]:l,d=od(o,a,(function(t){return t})),h=d.enter,p=void 0===h?[]:h,v=d.exit,y=void 0===v?[]:v;t&&(f.push(t),c.push(t));var m=function(t,n,i){t.forEach((function(t){var a=i?r.members:r.avoidMembers,o=i?"pushMember":"pushNonMember",s=i?"removeMember":"removeNonMember";if(n){var u;"edge"===e.getElementType(t)?(u=g(wk(e,t),1)[0],r.bubbleSets.pushEdge(u)):(u=g(xk(e,t),1)[0],r.bubbleSets[o](u)),a.set(t,u)}else{var c=a.get(t);c&&("edge"===e.getElementType(t)?r.bubbleSets.removeEdge(c):r.bubbleSets[s](c),a.delete(t))}}))};m(f,!1,!0),m(c,!0,!0),m(y,!1,!1),m(p,!0,!1);var b=r.bubbleSets.compute().sample(8).simplify(0).bSplines().simplify(0);return r.path=Rh(b.points.map(Id)),r.path},r.bindEvents(),r.bubbleSets=new mk(r.options),r}return _(e,t),O(e,[{key:"bindEvents",value:function(){this.context.graph.on(kl.AFTER_RENDER,this.drawBubbleSets),this.context.graph.on(kl.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath)}},{key:"init",value:function(){this.bubbleSets=new mk(this.options),this.members=new Map,this.avoidMembers=new Map}},{key:"parseOptions",value:function(){var t=this.options,e=t.type,n=t.key,r=t.members,i=t.avoidMembers,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["type","key","members","avoidMembers"]),o=Object.keys(a).reduce((function(t,e){return e in vk?t.bubbleSetOptions[e]=a[e]:t.style[e]=a[e],t}),{style:{},bubbleSetOptions:{}});return Object.assign({type:e,key:n,members:r,avoidMembers:i},o)}},{key:"addMember",value:function(t){var e=this,n=Array.isArray(t)?t:[t];n.some((function(t){return e.options.avoidMembers.includes(t)}))&&(this.options.avoidMembers=this.options.avoidMembers.filter((function(t){return!n.includes(t)}))),this.options.members=M(new Set([].concat(M(this.options.members),M(n)))),this.drawBubbleSets()}},{key:"removeMember",value:function(t){var e=Array.isArray(t)?t:[t];this.options.members=this.options.members.filter((function(t){return!e.includes(t)})),this.drawBubbleSets()}},{key:"updateMember",value:function(t){this.options.members=_n(t)?t(this.options.members):t,this.drawBubbleSets()}},{key:"getMember",value:function(){return this.options.members}},{key:"addAvoidMember",value:function(t){var e=this,n=Array.isArray(t)?t:[t];n.some((function(t){return e.options.members.includes(t)}))&&(this.options.members=this.options.members.filter((function(t){return!n.includes(t)}))),this.options.avoidMembers=M(new Set([].concat(M(this.options.avoidMembers),M(n)))),this.drawBubbleSets()}},{key:"removeAvoidMember",value:function(t){var e=Array.isArray(t)?t:[t];this.options.avoidMembers.some((function(t){return e.includes(t)}))&&(this.options.avoidMembers=this.options.avoidMembers.filter((function(t){return!e.includes(t)})),this.drawBubbleSets())}},{key:"updateAvoidMember",value:function(t){this.options.avoidMembers=Array.isArray(t)?t:[t],this.drawBubbleSets()}},{key:"getAvoidMember",value:function(){return this.options.avoidMembers}},{key:"destroy",value:function(){this.context.graph.off(kl.AFTER_RENDER,this.drawBubbleSets),this.context.graph.off(kl.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath),this.shape.destroy(),Dn(e,"destroy",this,3)([])}}])}(Rw);bk.defaultOptions=Object.assign({members:[],avoidMembers:[],fill:"lightblue",fillOpacity:.2,stroke:"blue",strokeOpacity:.2},vk);var xk=function(t,e){return(Array.isArray(e)?e:[e]).map((function(e){var n=t.getElementRenderBounds(e);return new Qw(n.min[0],n.min[1],of(n),sf(n))}))},wk=function(t,e){return(Array.isArray(e)?e:[e]).map((function(e){var n=t.getEdgeData(e),r=t.getElementPosition(n.source),i=t.getElementPosition(n.target);return Vw.from({x1:r[0],y1:r[1],x2:i[0],y2:i[1]})}))},kk=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,n])).setOptions=function(t){Object.entries({cameraType:"setType",near:"setNear",far:"setFar",fov:"setFov",aspect:"setAspect",projectionMode:"setProjectionMode",distance:"setDistance",minDistance:"setMinDistance",maxDistance:"setMaxDistance",roll:"setRoll",elevation:"setElevation",azimuth:"setAzimuth"}).forEach((function(e){var n=g(e,2),i=n[0],a=n[1],o=t[i];if(void 0!==o){var s=function(t,e){switch(t){case"projectionMode":return"perspective"===e?1:0;case"cameraType":return{orbiting:0,exploring:1,tracking:2}[e];case"aspect":return"number"==typeof e?e:r.getCanvasAspect();default:return e}}(i,o);r.context.canvas.getCamera()[a](s)}}))},r.bindEvents(),r}return _(e,t),O(e,[{key:"update",value:function(t){this.setOptions(t),Dn(e,"update",this,3)([t])}},{key:"bindEvents",value:function(){var t=this;this.context.graph.once(kl.BEFORE_DRAW,(function(){return t.setOptions(t.options)}))}},{key:"getCanvasAspect",value:function(){var t=g(this.context.viewport.getCanvasSize(),2);return t[0]/t[1]}}])}(Rw);function Ek(t){return'\n    <ul class="g6-contextmenu-ul">\n      '.concat(t.map((function(t){return'<li  class="g6-contextmenu-li" value="'.concat(t.value,'">').concat(t.name,"</li>")})).join(""),"\n    </ul>\n  ")}var Ok=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},Sk=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).targetElement=null,r.onTriggerEvent=function(t){var e;null===(e=t.preventDefault)||void 0===e||e.call(t),r.show(t)},r.onMenuItemClick=function(t){var e=r.options,n=e.onClick,i=e.trigger;if(t.target instanceof HTMLElement&&t.target.className.includes("g6-contextmenu-li")){var a=t.target.getAttribute("value");null==n||n(a,t.target,r.targetElement),r.hide()}"click"!==i&&r.hide()},r.initElement(),r.update(n),r}return _(e,t),O(e,[{key:"initElement",value:function(){this.$element=jw("contextmenu",!1,{zIndex:"99"});var t=this.options.className;t&&this.$element.classList.add(t),this.context.canvas.getContainer().appendChild(this.$element),Dw("g6-contextmenu-css","style",{},"\n  .g6-contextmenu {\n    font-size: 12px;\n    background-color: rgba(255, 255, 255, 0.96);\n    border-radius: 4px;\n    overflow: hidden;\n    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;\n    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;\n  }\n\n  .g6-contextmenu-ul {\n    max-width: 256px;\n    min-width: 96px;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n\n  .g6-contextmenu-li {\n    padding: 8px 12px;\n    cursor: pointer;\n    user-select: none;\n  }\n\n  .g6-contextmenu-li:hover {\n    background-color: #f5f5f5;\n    cursor: pointer;\n  }\n",document.head)}},{key:"show",value:function(t){return Ok(this,void 0,void 0,Jn().mark((function e(){var n,r,i,a,o;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.options,r=n.enable,i=n.offset,("function"!=typeof r||r(t))&&r){e.next=4;break}return this.hide(),e.abrupt("return");case 4:return e.next=6,this.getDOMContent(t);case 6:(a=e.sent)instanceof HTMLElement?(this.$element.innerHTML="",this.$element.appendChild(a)):this.$element.innerHTML=a,o=this.context.graph.getCanvas().getContainer().getBoundingClientRect(),this.$element.style.left="".concat(t.client.x-o.left+i[0],"px"),this.$element.style.top="".concat(t.client.y-o.top+i[1],"px"),this.$element.style.display="block",this.targetElement=t.target;case 13:case"end":return e.stop()}}),e,this)})))}},{key:"hide",value:function(){this.$element.style.display="none",this.targetElement=null}},{key:"update",value:function(t){this.unbindEvents(),Dn(e,"update",this,3)([t]),this.bindEvents()}},{key:"destroy",value:function(){this.unbindEvents(),Dn(e,"destroy",this,3)([]),this.$element.remove()}},{key:"getDOMContent",value:function(t){return Ok(this,void 0,void 0,Jn().mark((function e(){var n,r,i;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.options,r=n.getContent,!(i=n.getItems)){e.next=7;break}return e.t0=Ek,e.next=5,i(t);case 5:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 7:return e.next=9,r(t);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})))}},{key:"bindEvents",value:function(){var t=this.context.graph,e=this.options.trigger;t.on("canvas:".concat(e),this.onTriggerEvent),t.on("node:".concat(e),this.onTriggerEvent),t.on("edge:".concat(e),this.onTriggerEvent),t.on("combo:".concat(e),this.onTriggerEvent),document.addEventListener("click",this.onMenuItemClick)}},{key:"unbindEvents",value:function(){var t=this.context.graph,e=this.options.trigger;t.off("canvas:".concat(e),this.onTriggerEvent),t.off("node:".concat(e),this.onTriggerEvent),t.off("edge:".concat(e),this.onTriggerEvent),t.off("combo:".concat(e),this.onTriggerEvent),document.removeEventListener("click",this.onMenuItemClick)}}])}(Rw);Sk.defaultOptions={trigger:"contextmenu",offset:[4,4],loadingContent:'<div class="g6-contextmenu-loading">Loading...</div>',getContent:function(){return"It is a empty context menu."},enable:function(){return!0}};var Mk=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).edgeBundles={},r.edgePoints={},r.onBundle=function(){var t=r.context,e=t.model,n=t.element,i=e.getEdgeData();r.divideEdges(r.options.divisions);for(var a=r.options,o=a.cycles,s=a.iterRate,u=a.divRate,c=r.options,l=c.lambda,f=c.divisions,d=c.iterations,h=0;h<o;h++){for(var p=function(){var t={};i.forEach((function(e){var n;if(e.source!==e.target){var i=Kf(e);t[i]=r.getEdgeForces(e,f,l);for(var a=0;a<f+1;a++)(n=r.edgePoints)[i]||(n[i]=[]),r.edgePoints[i][a]=yd(r.edgePoints[i][a],t[i][a])}}))},v=0;v<d;v++)p();l/=2,f*=u,d*=s,r.divideEdges(f)}i.forEach((function(t){var e=Kf(t),i=n.getElement(e);null==i||i.update({d:Hv(r.edgePoints[e])})}))},r.bindEvents(),r}return _(e,t),O(e,[{key:"nodeMap",get:function(){var t=this.context.model.getNodeData();return Object.fromEntries(t.map((function(t){return[Kf(t),Ad(Rd(t))]})))}},{key:"divideEdges",value:function(t){var e=this;this.context.model.getEdgeData().forEach((function(n){var r,i=Kf(n);(r=e.edgePoints)[i]||(r[i]=[]);var a=e.nodeMap[n.source],o=e.nodeMap[n.target];if(1===t)e.edgePoints[i].push(a),e.edgePoints[i].push(xd(yd(a,o),2)),e.edgePoints[i].push(o);else{for(var s=(0===e.edgePoints[i].length?kd(a,o):Lk(e.edgePoints[i]))/(t+1),u=s,c=[a],l=1;l<e.edgePoints[i].length;l++){for(var f=e.edgePoints[i][l-1],d=e.edgePoints[i][l],h=kd(d,f);h>u;){var p=u/h,v=yd(f,bd(md(d,f),p));c.push(v),h-=u,u=s}u-=h}c.push(o),e.edgePoints[i]=c}}))}},{key:"getVectorPosition",value:function(t){var e=this.nodeMap[t.source],n=this.nodeMap[t.target],r=g(md(n,e),2);return{source:e,target:n,vx:r[0],vy:r[1],length:kd(e,n)}}},{key:"measureEdgeCompatibility",value:function(t,e){var n=this.getVectorPosition(t),r=this.getVectorPosition(e);return Tk(n,r)*Ak(n,r)*Pk(n,r)*_k(n,r)}},{key:"getEdgeBundles",value:function(){var t=this,e={},n=this.options.bundleThreshold,r=this.context.model.getEdgeData();return r.forEach((function(i,a){r.forEach((function(r,o){var s,u;o<=a||t.measureEdgeCompatibility(i,r)>=n&&(e[s=Kf(i)]||(e[s]=[]),e[Kf(i)].push(r),e[u=Kf(r)]||(e[u]=[]),e[Kf(r)].push(i))}))})),e}},{key:"getSpringForce",value:function(t,e){var n=t.pre,r=t.cur;return bd(md(yd(n,t.next),bd(r,2)),e)}},{key:"getElectrostaticForce",value:function(t,e){var n=this;Mh(this.edgeBundles)&&(this.edgeBundles=this.getEdgeBundles());var r=this.edgeBundles[Kf(e)],i=[0,0];return null==r||r.forEach((function(r){var a=n.edgePoints[Kf(r)][t],o=n.edgePoints[Kf(e)][t],s=md(a,o),u=kd(a,o);i=yd(i,bd(s,1/u))})),i}},{key:"getEdgeForces",value:function(t,e,n){for(var r=this.nodeMap[t.source],i=this.nodeMap[t.target],a=this.options.K/(kd(r,i)*(e+1)),o=[[0,0]],s=Kf(t),u=1;u<e;u++){var c=this.getSpringForce({pre:this.edgePoints[s][u-1],cur:this.edgePoints[s][u],next:this.edgePoints[s][u+1]||[0,0]},a),l=this.getElectrostaticForce(u,t);o.push(bd(yd(c,l),n))}return o.push([0,0]),o}},{key:"bindEvents",value:function(){this.context.graph.on(kl.AFTER_RENDER,this.onBundle)}},{key:"unbindEvents",value:function(){this.context.graph.off(kl.AFTER_RENDER,this.onBundle)}},{key:"destroy",value:function(){this.unbindEvents(),Dn(e,"destroy",this,3)([])}}])}(Rw);Mk.defaultOptions={K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:2/3,bundleThreshold:.6};var Tk=function(t,e){return Math.abs((n=[t.vx,t.vy],r=[e.vx,e.vy],n.reduce((function(t,e,n){return t+e*r[n]}),0)/(t.length*e.length)));var n,r},Ak=function(t,e){var n=(t.length+e.length)/2;return 2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n)},Pk=function(t,e){var n=(t.length+e.length)/2;return n/(n+kd(xd(yd(t.source,t.target),2),xd(yd(e.source,e.target),2)))},Nk=function(t,e){if(e.source[0]===e.target[0])return[e.source[0],t[1]];if(e.source[1]===e.target[1])return[t[0],e.source[1]];var n=(e.source[1]-e.target[1])/(e.source[0]-e.target[0]),r=(n*n*e.source[0]+n*(t[1]-e.source[1])+t[0])/(n*n+1);return[r,n*(r-e.source[0])+e.source[1]]},Ck=function(t,e){var n=Nk(e.source,t),r=Nk(e.target,t),i=xd(yd(n,r),2),a=xd(yd(t.source,t.target),2);return 0===kd(n,r)?0:Math.max(0,1-2*kd(a,i)/kd(n,r))},_k=function(t,e){return Math.min(Ck(t,e),Ck(e,t))},Lk=function(t){for(var e=0,n=1;n<t.length;n++)e+=kd(t[n],t[n-1]);return e},Rk={fill:"#fff",fillOpacity:1,lineWidth:1,stroke:"#000",strokeOpacity:.8,zIndex:-1/0},jk=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).shapes=new Map,r.r=r.options.r,r.onEdgeFilter=function(t){if("drag"!==r.options.trigger||!r.isLensOn){var e=Id(t.canvas);r.renderLens(e),r.renderFocusElements()}},r.renderLens=function(t){var e=Object.assign({},Rk,r.options.style);r.isLensOn||(r.lens=new Yh({style:e}),r.canvas.appendChild(r.lens)),Object.assign(e,Fd(t),{size:2*r.r}),r.lens.update(e)},r.getFilterData=function(){var t=r.options.filter,e=r.context.model.getData();if(!t)return e;var n=e.nodes,i=e.edges,a=e.combos;return{nodes:n.filter((function(e){return t(Kf(e),"node")})),edges:i.filter((function(e){return t(Kf(e),"edge")})),combos:a.filter((function(e){return t(Kf(e),"combo")}))}},r.getFocusElements=function(t){var e=r.getFilterData(),n=e.nodes,i=e.edges,a=n.filter((function(e){return kd(Rd(e),t)<r.r})),o=a.map((function(t){return Kf(t)}));return{nodes:a,edges:i.filter((function(t){var e=t.source,n=t.target,i=o.includes(e),a=o.includes(n);switch(r.options.nodeType){case"both":return i&&a;case"either":return i!==a;case"source":return i&&!a;case"target":return!i&&a;default:return!1}}))}},r.renderFocusElements=function(){var t=r.context,e=t.element,n=t.graph;if(r.isLensOn){var i=r.lens.getCenter(),a=r.getFocusElements(i),o=a.nodes,s=a.edges,u=new Set,c=function(t){var i=Kf(t);u.add(i);var a=e.getElement(i);if(a){var o=r.shapes.get(i)||a.cloneNode();o.setPosition(a.getPosition()),o.id=a.id,r.shapes.has(i)?Object.entries(a.attributes).forEach((function(t){var e=g(t,2),n=e[0],r=e[1];o.style[n]!==r&&(o.style[n]=r)})):(r.canvas.appendChild(o),r.shapes.set(i,o));var s=n.getElementType(i),c=r.getElementStyle(s,t);o.update(c)}};o.forEach(c),s.forEach(c),r.shapes.forEach((function(t,e){u.has(e)||(t.destroy(),r.shapes.delete(e))}))}},r.scaleRByWheel=function(t){var e;r.options.preventDefault&&t.preventDefault();var n=t.clientX,i=t.clientY,a=t.deltaX,o=t.deltaY,s=r.context,u=s.graph,c=s.canvas,l=u.getCanvasByClient([n,i]),f=null===(e=r.lens)||void 0===e?void 0:e.getCenter();if(r.isLensOn&&!(kd(l,f)>r.r)){var d=r.options,h=d.maxR,p=d.minR,v=a+o>0?1/.95:.95,g=Math.min.apply(Math,M(c.getSize()))/2;r.r=Math.max(p||0,Math.min(h||g,r.r*v)),r.renderLens(f),r.renderFocusElements()}},r.isLensDragging=!1,r.onDragStart=function(t){var e,n=Id(t.canvas),i=null===(e=r.lens)||void 0===e?void 0:e.getCenter();!r.isLensOn||kd(n,i)>r.r||(r.isLensDragging=!0)},r.onDrag=function(t){if(r.isLensDragging){var e=Id(t.canvas);r.renderLens(e),r.renderFocusElements()}},r.onDragEnd=function(){r.isLensDragging=!1},r.bindEvents(),r}return _(e,t),O(e,[{key:"canvas",get:function(){return this.context.canvas.getLayer("transient")}},{key:"isLensOn",get:function(){return this.lens&&!this.lens.destroyed}},{key:"getElementStyle",value:function(t,e){var n="node"===t?this.options.nodeStyle:this.options.edgeStyle;return"function"==typeof n?n(e):n}},{key:"graphDom",get:function(){return this.context.graph.getCanvas().getContextService().getDomElement()}},{key:"bindEvents",value:function(){var t,e=this.context.graph,n=this.options,r=n.trigger,i=n.scaleRBy,a=e.getCanvas().getLayer();["click","drag"].includes(r)&&a.addEventListener(bl.CLICK,this.onEdgeFilter),"pointermove"===r?a.addEventListener(bl.POINTER_MOVE,this.onEdgeFilter):"drag"===r&&(a.addEventListener(bl.DRAG_START,this.onDragStart),a.addEventListener(bl.DRAG,this.onDrag),a.addEventListener(bl.DRAG_END,this.onDragEnd)),"wheel"===i&&(null===(t=this.graphDom)||void 0===t||t.addEventListener(bl.WHEEL,this.scaleRByWheel,{passive:!1}))}},{key:"unbindEvents",value:function(){var t,e=this.context.graph,n=this.options,r=n.trigger,i=n.scaleRBy,a=e.getCanvas().getLayer();["click","drag"].includes(r)&&a.removeEventListener(bl.CLICK,this.onEdgeFilter),"pointermove"===r?a.removeEventListener(bl.POINTER_MOVE,this.onEdgeFilter):"drag"===r&&(a.removeEventListener(bl.DRAG_START,this.onDragStart),a.removeEventListener(bl.DRAG,this.onDrag),a.removeEventListener(bl.DRAG_END,this.onDragEnd)),"wheel"===i&&(null===(t=this.graphDom)||void 0===t||t.removeEventListener(bl.WHEEL,this.scaleRByWheel))}},{key:"update",value:function(t){var n;this.unbindEvents(),Dn(e,"update",this,3)([t]),this.r=null!==(n=t.r)&&void 0!==n?n:this.r,this.bindEvents()}},{key:"destroy",value:function(){var t=this;this.unbindEvents(),this.isLensOn&&this.lens.destroy(),this.shapes.forEach((function(e,n){e.destroy(),t.shapes.delete(n)})),Dn(e,"destroy",this,3)([])}}])}(Rw);jk.defaultOptions={trigger:"pointermove",r:60,nodeType:"both",filter:function(){return!0},style:{lineWidth:2},nodeStyle:{label:!1},edgeStyle:{label:!0},scaleRBy:"wheel",preventDefault:!0};var Dk={fill:"#ccc",fillOpacity:.1,lineWidth:2,stroke:"#000",strokeOpacity:.8,labelFontSize:12},Ik=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).r=r.options.r,r.d=r.options.d,r.onCreateFisheye=function(t){if("drag"!==r.options.trigger||!r.isLensOn){var e=Id(t.canvas);r.onMagnify(e)}},r.onMagnify=function(t){t.some(isNaN)||(r.renderLens(t),r.renderFocusElements())},r.renderLens=function(t){var e=Object.assign({},Dk,r.options.style);r.isLensOn||(r.lens=new Yh({style:e}),r.canvas.appendChild(r.lens)),Object.assign(e,Fd(t),{size:2*r.r,label:r.options.showDPercent,labelText:r.getDPercent()}),r.lens.update(e)},r.getDPercent=function(){var t=r.options,e=t.minD,n=t.maxD,i=Math.round((r.d-e)/(n-e)*100);return"".concat(i,"%")},r.prevMagnifiedStyleMap=new Map,r.prevOriginStyleMap=new Map,r.renderFocusElements=function(){if(r.isLensOn){var t=r.context.graph,e=r.lens.getCenter(),n=(r.d+1)*r.r,i=new Map,a=new Map;t.getNodeData().forEach((function(o){var s=Rd(o),u=kd(s,e);if(!(u>r.r)){var c=n*u/(r.d*u+r.r),l=g(s,2),f=l[0],d=l[1],h=g(e,2),p=h[0],v=h[1],y=[p+c*((f-p)/u),v+c*((d-v)/u)],m=Kf(o),b=r.getNodeStyle(o),x=vv(t.getElementRenderStyle(m),Object.keys(b));i.set(m,Object.assign(Object.assign({},Fd(y)),b)),a.set(m,Object.assign(Object.assign({},Fd(s)),x))}})),r.updateStyle(i,a)}},r.getNodeStyle=function(t){var e=r.options.nodeStyle;return"function"==typeof e?e(t):e},r.updateStyle=function(t,e){var n=r.context,i=n.graph,a=n.element,o=od(Array.from(r.prevMagnifiedStyleMap.keys()),Array.from(t.keys()),(function(t){return t})),s=o.enter,u=o.exit,c=o.keep,l=new Set,f=function(t,e){var n=a.getElement(t);null==n||n.update(e),i.getRelatedEdgesData(t).forEach((function(t){l.add(Kf(t))}))};[].concat(M(s),M(c)).forEach((function(e){f(e,t.get(e))})),u.forEach((function(t){f(t,r.prevOriginStyleMap.get(t)),r.prevOriginStyleMap.delete(t)})),l.forEach((function(t){var e=a.getElement(t);null==e||e.update({})})),r.prevMagnifiedStyleMap=t,e.forEach((function(t,e){r.prevOriginStyleMap.has(e)||r.prevOriginStyleMap.set(e,t)}))},r.isWheelValid=function(t){if(r.options.preventDefault&&t.preventDefault(),!r.isLensOn)return!1;var e=t.clientX,n=t.clientY;return!(kd(r.context.graph.getCanvasByClient([e,n]),r.lens.getCenter())>r.r)},r.scaleR=function(t){var e=r.options,n=e.maxR,i=e.minR,a=t?1/.95:.95,o=Math.min.apply(Math,M(r.context.canvas.getSize()))/2;r.r=Math.max(i||0,Math.min(n||o,r.r*a))},r.scaleD=function(t){var e=r.options,n=e.maxD,i=e.minD,a=t?r.d+.1:r.d-.1;r.d=Math.max(i,Math.min(n,a))},r.scaleRByWheel=function(t){if(r.isWheelValid(t)){var e=t.deltaX,n=t.deltaY;r.scaleR(e+n>0);var i=r.lens.getCenter();r.onMagnify(i)}},r.scaleDByWheel=function(t){if(r.isWheelValid(t)){var e=t.deltaX,n=t.deltaY;r.scaleD(e+n>0);var i=r.lens.getCenter();r.onMagnify(i)}},r.isDragValid=function(t){return r.options.preventDefault&&t.preventDefault(),!(!r.isLensOn||kd(Id(t.canvas),r.lens.getCenter())>r.r)},r.isLensDragging=!1,r.onDragStart=function(t){r.isDragValid(t)&&(r.isLensDragging=!0)},r.onDrag=function(t){if(r.isLensDragging){var e=Id(t.canvas);r.onMagnify(e)}},r.onDragEnd=function(){r.isLensDragging=!1},r.scaleRByDrag=function(t){if(r.isLensDragging){var e=t.dx,n=t.dy;r.scaleR(e-n>0);var i=r.lens.getCenter();r.onMagnify(i)}},r.scaleDByDrag=function(t){if(r.isLensDragging){var e=t.dx,n=t.dy;r.scaleD(e-n>0);var i=r.lens.getCenter();r.onMagnify(i)}},r.bindEvents(),r}return _(e,t),O(e,[{key:"canvas",get:function(){return this.context.canvas.getLayer("transient")}},{key:"isLensOn",get:function(){return this.lens&&!this.lens.destroyed}},{key:"graphDom",get:function(){return this.context.graph.getCanvas().getContextService().getDomElement()}},{key:"bindEvents",value:function(){var t,e=this.context.graph,n=this.options,r=n.trigger,i=n.scaleRBy,a=n.scaleDBy,o=e.getCanvas().getLayer();if(["click","drag"].includes(r)&&o.addEventListener(bl.CLICK,this.onCreateFisheye),"pointermove"===r&&o.addEventListener(bl.POINTER_MOVE,this.onCreateFisheye),"drag"===r||"drag"===i||"drag"===a){o.addEventListener(bl.DRAG_START,this.onDragStart),o.addEventListener(bl.DRAG_END,this.onDragEnd);var s="drag"===r?this.onDrag:"drag"===i?this.scaleRByDrag:this.scaleDByDrag;o.addEventListener(bl.DRAG,s)}if("wheel"===i||"wheel"===a){var u="wheel"===i?this.scaleRByWheel:this.scaleDByWheel;null===(t=this.graphDom)||void 0===t||t.addEventListener(bl.WHEEL,u,{passive:!1})}}},{key:"unbindEvents",value:function(){var t,e=this.context.graph,n=this.options,r=n.trigger,i=n.scaleRBy,a=n.scaleDBy,o=e.getCanvas().getLayer();if(["click","drag"].includes(r)&&o.removeEventListener(bl.CLICK,this.onCreateFisheye),"pointermove"===r&&o.removeEventListener(bl.POINTER_MOVE,this.onCreateFisheye),"drag"===r||"drag"===i||"drag"===a){o.removeEventListener(bl.DRAG_START,this.onDragStart),o.removeEventListener(bl.DRAG_END,this.onDragEnd);var s="drag"===r?this.onDrag:"drag"===i?this.scaleRByDrag:this.scaleDByDrag;o.removeEventListener(bl.DRAG,s)}if("wheel"===i||"wheel"===a){var u="wheel"===i?this.scaleRByWheel:this.scaleDByWheel;null===(t=this.graphDom)||void 0===t||t.removeEventListener(bl.WHEEL,u)}}},{key:"update",value:function(t){var n,r;this.unbindEvents(),Dn(e,"update",this,3)([t]),this.r=null!==(n=t.r)&&void 0!==n?n:this.r,this.d=null!==(r=t.d)&&void 0!==r?r:this.d,this.bindEvents()}},{key:"destroy",value:function(){var t;this.unbindEvents(),this.isLensOn&&(null===(t=this.lens)||void 0===t||t.destroy()),this.prevMagnifiedStyleMap.clear(),this.prevOriginStyleMap.clear(),Dn(e,"destroy",this,3)([])}}])}(Rw);Ik.defaultOptions={trigger:"pointermove",r:120,d:1.5,maxD:5,minD:0,showDPercent:!0,style:{},nodeStyle:{label:!0},preventDefault:!0};var Fk=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).$el=r.context.canvas.getContainer(),r.graphSize=[0,0],r.onFullscreenChange=function(){var t,e,n,i,a=!!document.fullscreenElement;r.options.autoFit&&r.setGraphSize(a),a?null===(e=(t=r.options).onEnter)||void 0===e||e.call(t):null===(i=(n=r.options).onExit)||void 0===i||i.call(n)},r.shortcut=new Zd(t.graph),r.bindEvents(),r.style=document.createElement("style"),document.head.appendChild(r.style),r.style.innerHTML="\n      :not(:root):fullscreen::backdrop {\n        background: transparent;\n      }\n    ",r}return _(e,t),O(e,[{key:"bindEvents",value:function(){var t=this;this.unbindEvents(),this.shortcut.unbindAll();var e=this.options.trigger,n=e.request,r=void 0===n?[]:n,i=e.exit,a=void 0===i?[]:i;this.shortcut.bind(r,this.request),this.shortcut.bind(a,this.exit),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach((function(e){document.addEventListener(e,t.onFullscreenChange,!1)}))}},{key:"unbindEvents",value:function(){var t=this;this.shortcut.unbindAll(),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach((function(e){document.removeEventListener(e,t.onFullscreenChange,!1)}))}},{key:"setGraphSize",value:function(){var t,e,n,r;if(arguments.length>0&&void 0!==arguments[0]&&!arguments[0]){var i=g(this.graphSize,2);n=i[0],r=i[1]}else n=(null===(t=globalThis.screen)||void 0===t?void 0:t.width)||0,r=(null===(e=globalThis.screen)||void 0===e?void 0:e.height)||0,this.graphSize=this.context.graph.getSize();this.context.graph.setSize(n,r),this.context.graph.render()}},{key:"request",value:function(){!document.fullscreenElement&&(document.fullscreenEnabled||Reflect.get(document,"webkitFullscreenEnabled")||Reflect.get(document,"mozFullscreenEnabled")||Reflect.get(document,"msFullscreenEnabled"))&&this.$el.requestFullscreen().catch((function(t){Dl.warn("Error attempting to enable full-screen: ".concat(t.message," (").concat(t.name,")"))}))}},{key:"exit",value:function(){document.fullscreenElement&&document.exitFullscreen()}},{key:"update",value:function(t){this.unbindEvents(),Dn(e,"update",this,3)([t]),this.bindEvents()}},{key:"destroy",value:function(){this.exit(),this.style.remove(),Dn(e,"destroy",this,3)([])}}])}(Rw);Fk.defaultOptions={trigger:{},autoFit:!0};var zk=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).$element=jw("grid-line",!0),r.offset=[0,0],r.currentScale=1,r.followZoom=function(t){var e=t.data,n=e.scale,i=e.origin;if(n){var a=r.currentScale;r.currentScale=n;var o=n/a,s=bd(i||r.context.graph.getCanvasCenter(),1-o),u=r.baseSize*n,c=yd(Td(bd(r.offset,o),u),s);r.$element.style.backgroundSize="".concat(u,"px ").concat(u,"px"),r.$element.style.backgroundPosition="".concat(c[0],"px ").concat(c[1],"px"),r.offset=Td(c,u)}},r.followTranslate=function(t){if(r.options.follow){var e=t.data.translate;e&&r.updateOffset(e)}},r.onTransform=function(t){var e=r.parseFollow(r.options.follow);e.zoom&&r.followZoom(t),e.translate&&r.followTranslate(t)},r.context.canvas.getContainer().prepend(r.$element),r.baseSize=r.options.size,r.updateStyle(),r.bindEvents(),r}return _(e,t),O(e,[{key:"update",value:function(t){Dn(e,"update",this,3)([t]),void 0!==t.size&&(this.baseSize=t.size),this.updateStyle()}},{key:"bindEvents",value:function(){this.context.graph.on(kl.AFTER_TRANSFORM,this.onTransform)}},{key:"updateStyle",value:function(){var t=this.options,e=t.stroke,n=t.lineWidth,r=t.border,i=t.borderLineWidth,a=t.borderStroke,o=t.borderStyle,s=this.baseSize*this.currentScale;Object.assign(this.$element.style,{border:r?"".concat(i,"px ").concat(o," ").concat(a):"none",backgroundImage:"linear-gradient(".concat(e," ").concat(n,"px, transparent ").concat(n,"px), linear-gradient(90deg, ").concat(e," ").concat(n,"px, transparent ").concat(n,"px)"),backgroundSize:"".concat(s,"px ").concat(s,"px"),backgroundRepeat:"repeat"})}},{key:"updateOffset",value:function(t){var e=this.baseSize*this.currentScale;this.offset=Td(yd(this.offset,t),e),this.$element.style.backgroundPosition="".concat(this.offset[0],"px ").concat(this.offset[1],"px")}},{key:"parseFollow",value:function(t){var e,n;return Cn(t)?{translate:t,zoom:t}:{translate:null!==(e=null==t?void 0:t.translate)&&void 0!==e&&e,zoom:null!==(n=null==t?void 0:t.zoom)&&void 0!==n&&n}}},{key:"destroy",value:function(){this.context.graph.off(kl.AFTER_TRANSFORM,this.onTransform),this.$element.remove(),Dn(e,"destroy",this,3)([])}}])}(Rw);function Bk(t){var e={Added:new Map,Updated:new Map,Removed:new Map};return t.forEach((function(t){var n=t.type,r=t.value,i=Kf(r);if("NodeAdded"===n||"EdgeAdded"===n||"ComboAdded"===n)e.Added.set(i,t);else if("NodeUpdated"===n||"EdgeUpdated"===n||"ComboUpdated"===n)if(e.Added.has(i))e.Added.set(i,{type:n.replace("Updated","Added"),value:r});else if(e.Updated.has(i)){var a=e.Updated.get(i).original;e.Updated.set(i,{type:n,value:r,original:a})}else e.Removed.has(i)||e.Updated.set(i,t);else"NodeRemoved"!==n&&"EdgeRemoved"!==n&&"ComboRemoved"!==n||(e.Added.has(i)?e.Added.delete(i):e.Updated.has(i)?(e.Updated.delete(i),e.Removed.set(i,t)):e.Removed.set(i,t))})),[].concat(M(Array.from(e.Added.values())),M(Array.from(e.Updated.values())),M(Array.from(e.Removed.values())))}function Gk(t){var e=Zl(t,(function(t){return t.type})),n=e.NodeAdded,r=void 0===n?[]:n,i=e.NodeUpdated,a=void 0===i?[]:i,o=e.NodeRemoved,s=void 0===o?[]:o,u=e.EdgeAdded,c=void 0===u?[]:u,l=e.EdgeUpdated,f=void 0===l?[]:l,d=e.EdgeRemoved,h=void 0===d?[]:d,p=e.ComboAdded,v=void 0===p?[]:p,g=e.ComboUpdated,y=void 0===g?[]:g,m=e.ComboRemoved;return{add:{nodes:r,edges:c,combos:v},update:{nodes:a,edges:f,combos:y},remove:{nodes:s,edges:h,combos:void 0===m?[]:m}}}function Wk(t,e){for(var n in t)Ln(t[n])&&!Array.isArray(t[n])&&null!==t[n]?(e[n]||(e[n]={}),Wk(t[n],e[n])):void 0===e[n]&&(e[n]=Bl(n))}function Vk(t){var e=arguments.length>2?arguments[2]:void 0,n={animation:arguments.length>1&&void 0!==arguments[1]&&arguments[1],current:{add:{},update:{},remove:{}},original:{add:{},update:{},remove:{}}},r=Gk(Bk(t)),i=r.add,a=r.update,o=r.remove;return["nodes","edges","combos"].forEach((function(t){a[t]&&a[t].forEach((function(r){var i,a,o=Object.assign({},r.value),s=Object.assign({},r.original);if(e){var u=e.graph.getElementType(Kf(r.original)),c="edge"===u?"stroke":"fill",l=e.element.getElementComputedStyle(u,r.original);s=Object.assign(Object.assign({},r.original),{style:Object.assign(b({},c,l[c]),r.original.style)})}Wk(o,s),(i=n.current.update)[t]||(i[t]=[]),n.current.update[t].push(o),(a=n.original.update)[t]||(a[t]=[]),n.original.update[t].push(s)})),i[t]&&i[t].forEach((function(e){var r,i,a=Object.assign({},e.value);(r=n.current.add)[t]||(r[t]=[]),n.current.add[t].push(a),(i=n.original.remove)[t]||(i[t]=[]),n.original.remove[t].push(a)})),o[t]&&o[t].forEach((function(e){var r,i,a=Object.assign({},e.value);(r=n.current.remove)[t]||(r[t]=[]),n.current.remove[t].push(a),(i=n.original.add)[t]||(i[t]=[]),n.original.add[t].push(a)}))})),n}zk.defaultOptions={border:!0,borderLineWidth:1,borderStroke:"#eee",borderStyle:"solid",lineWidth:1,size:20,stroke:"#eee"};var Hk=function(t){function e(t,n){var r;k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).batchChanges=null,r.batchAnimation=!1,r.undoStack=[],r.redoStack=[],r.freezed=!1,r.executeCommand=function(t){var e,n,i,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.freezed=!0,null===(n=(e=r.options).executeCommand)||void 0===n||n.call(e,t);var o=a?t.original:t.current;r.context.graph.addData(o.add),r.context.graph.updateData(o.update),r.context.graph.removeData(Zf(o.remove,!1)),null===(i=r.context.element)||void 0===i||i.draw({silence:!0,animation:t.animation}),r.freezed=!1},r.addCommand=function(t){var e;if(!r.freezed){if(t.type===kl.AFTER_DRAW){var n=t.data,i=n.dataChanges,a=void 0===i?[]:i,o=n.animation,s=void 0===o||o;if(null===(e=r.context.batch)||void 0===e?void 0:e.isBatching){if(!r.batchChanges)return;return r.batchChanges.push(a),void(r.batchAnimation&&(r.batchAnimation=s))}r.batchChanges=[a],r.batchAnimation=s}r.undoStackPush(Vk(r.batchChanges.flat(),r.batchAnimation,r.context)),r.notify(El.ADD,r.undoStack[r.undoStack.length-1])}},r.initBatchCommand=function(t){var e=t.data.initiate;r.batchAnimation=!1,e?r.batchChanges=[]:r.undoStack.pop()||(r.batchChanges=null)},r.emitter=new Ug;var i=r.context.graph;return i.on(kl.AFTER_DRAW,r.addCommand),i.on(kl.BATCH_START,r.initBatchCommand),i.on(kl.BATCH_END,r.addCommand),r}return _(e,t),O(e,[{key:"canUndo",value:function(){return this.undoStack.length>0}},{key:"canRedo",value:function(){return this.redoStack.length>0}},{key:"undo",value:function(){var t,e,n,r,i=this.undoStack.pop();if(i){if(this.executeCommand(i),!1===(null===(e=(t=this.options).beforeAddCommand)||void 0===e?void 0:e.call(t,i,!1)))return;this.redoStack.push(i),null===(r=(n=this.options).afterAddCommand)||void 0===r||r.call(n,i,!1),this.notify(El.UNDO,i)}return this}},{key:"redo",value:function(){var t=this.redoStack.pop();return t&&(this.executeCommand(t,!1),this.undoStackPush(t),this.notify(El.REDO,t)),this}},{key:"undoAndCancel",value:function(){var t=this.undoStack.pop();return t&&(this.executeCommand(t,!1),this.redoStack=[],this.notify(El.CANCEL,t)),this}},{key:"undoStackPush",value:function(t){var e,n,r,i,a=this.options.stackSize;0!==a&&this.undoStack.length>=a&&this.undoStack.shift(),!1!==(null===(n=(e=this.options).beforeAddCommand)||void 0===n?void 0:n.call(e,t,!0))&&(this.undoStack.push(t),null===(i=(r=this.options).afterAddCommand)||void 0===i||i.call(r,t,!0))}},{key:"clear",value:function(){this.undoStack=[],this.redoStack=[],this.batchChanges=null,this.batchAnimation=!1,this.notify(El.CLEAR,null)}},{key:"notify",value:function(t,e){this.emitter.emit(t,{cmd:e}),this.emitter.emit(El.CHANGE,{cmd:e})}},{key:"on",value:function(t,e){this.emitter.on(t,e)}},{key:"destroy",value:function(){var t=this.context.graph;t.off(kl.AFTER_DRAW,this.addCommand),t.off(kl.BATCH_START,this.initBatchCommand),t.off(kl.BATCH_END,this.addCommand),this.emitter.off(),Dn(e,"destroy",this,3)([]),this.undoStack=[],this.redoStack=[]}}])}(Rw);Hk.defaultOptions={stackSize:0};var Yk=function(t,e){if(!e)return M(t);var n=e[0].slice(1),r=e[1].slice(1);return t.map((function(t){var e=g(t,2),i=e[0],a=e[1];return b(b({},n,i),r,a)}))},Uk=function(){return O((function t(e,n){k(this,t),this._cells=[],this._cellSize=n,this._reverseCellSize=1/n;var r,i=nr(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=this.coordToCellNum(a[0]),s=this.coordToCellNum(a[1]);this._cells[o]||(this._cells[o]=[]),this._cells[o][s]||(this._cells[o][s]=[]),this._cells[o][s].push(a)}}catch(t){i.e(t)}finally{i.f()}}),[{key:"cellPoints",value:function(t,e){var n;return(null===(n=this._cells[t])||void 0===n?void 0:n[e])||[]}},{key:"rangePoints",value:function(t){for(var e=this.coordToCellNum(t[0]),n=this.coordToCellNum(t[1]),r=this.coordToCellNum(t[2]),i=this.coordToCellNum(t[3]),a=[],o=e;o<=r;o++)for(var s=n;s<=i;s++){var u,c=nr(this.cellPoints(o,s));try{for(c.s();!(u=c.n()).done;){var l=u.value;a.push(l)}}catch(t){c.e(t)}finally{c.f()}}return a}},{key:"removePoint",value:function(t){var e=this.coordToCellNum(t[0]),n=this.coordToCellNum(t[1]),r=this._cells[e][n],i=r.findIndex((function(e){var n=g(e,2),r=n[0],i=n[1];return r===t[0]&&i===t[1]}));return i>-1&&r.splice(i,1),r}},{key:"trunc",value:function(t){return Math.trunc(t)}},{key:"coordToCellNum",value:function(t){return this.trunc(t*this._reverseCellSize)}},{key:"extendBbox",value:function(t,e){return[t[0]-e*this._cellSize,t[1]-e*this._cellSize,t[2]+e*this._cellSize,t[3]+e*this._cellSize]}}])}(),qk=+(Math.pow(2,27)+1);function Xk(t,e,n){var r=t*e,i=qk*t,a=i-(i-t),o=t-a,s=qk*e,u=s-(s-e),c=e-u,l=o*c-(r-a*u-o*u-a*c);return n?(n[0]=l,n[1]=r,n):[l,r]}function Kk(t,e,n){var r=t+e,i=r-t,a=e-i,o=t-(r-i);return n?(n[0]=o+a,n[1]=r,n):[o+a,r]}function $k(t,e){var n=t.length;if(1===n){var r=Xk(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),a=[.1,.1],o=[.1,.1],s=0;Xk(t[0],e,a),a[0]&&(i[s++]=a[0]);for(var u=1;u<n;++u){Xk(t[u],e,o),Kk(a[1],o[0],a),a[0]&&(i[s++]=a[0]);var c=o[1],l=a[1],f=c+l,d=l-(f-c);a[1]=f,d&&(i[s++]=d)}return a[1]&&(i[s++]=a[1]),0===s&&(i[s++]=0),i.length=s,i}function Zk(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,a,o=new Array(n+r),s=0,u=0,c=0,l=Math.abs,f=t[u],d=l(f),h=-e[c],p=l(h);d<p?(a=f,(u+=1)<n&&(d=l(f=t[u]))):(a=h,(c+=1)<r&&(p=l(h=-e[c]))),u<n&&d<p||c>=r?(i=f,(u+=1)<n&&(d=l(f=t[u]))):(i=h,(c+=1)<r&&(p=l(h=-e[c])));for(var v,g,y=i+a,m=y-i,b=a-m,x=b,w=y;u<n&&c<r;)d<p?(i=f,(u+=1)<n&&(d=l(f=t[u]))):(i=h,(c+=1)<r&&(p=l(h=-e[c]))),(b=(a=x)-(m=(y=i+a)-i))&&(o[s++]=b),x=w-((v=w+y)-(g=v-w))+(y-g),w=v;for(;u<n;)(b=(a=x)-(m=(y=(i=f)+a)-i))&&(o[s++]=b),x=w-((v=w+y)-(g=v-w))+(y-g),w=v,(u+=1)<n&&(f=t[u]);for(;c<r;)(b=(a=x)-(m=(y=(i=h)+a)-i))&&(o[s++]=b),x=w-((v=w+y)-(g=v-w))+(y-g),w=v,(c+=1)<r&&(h=-e[c]);return x&&(o[s++]=x),w&&(o[s++]=w),s||(o[s++]=0),o.length=s,o}function Qk(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,a,o=new Array(n+r),s=0,u=0,c=0,l=Math.abs,f=t[u],d=l(f),h=e[c],p=l(h);d<p?(a=f,(u+=1)<n&&(d=l(f=t[u]))):(a=h,(c+=1)<r&&(p=l(h=e[c]))),u<n&&d<p||c>=r?(i=f,(u+=1)<n&&(d=l(f=t[u]))):(i=h,(c+=1)<r&&(p=l(h=e[c])));for(var v,g,y=i+a,m=y-i,b=a-m,x=b,w=y;u<n&&c<r;)d<p?(i=f,(u+=1)<n&&(d=l(f=t[u]))):(i=h,(c+=1)<r&&(p=l(h=e[c]))),(b=(a=x)-(m=(y=i+a)-i))&&(o[s++]=b),x=w-((v=w+y)-(g=v-w))+(y-g),w=v;for(;u<n;)(b=(a=x)-(m=(y=(i=f)+a)-i))&&(o[s++]=b),x=w-((v=w+y)-(g=v-w))+(y-g),w=v,(u+=1)<n&&(f=t[u]);for(;c<r;)(b=(a=x)-(m=(y=(i=h)+a)-i))&&(o[s++]=b),x=w-((v=w+y)-(g=v-w))+(y-g),w=v,(c+=1)<r&&(h=e[c]);return x&&(o[s++]=x),w&&(o[s++]=w),s||(o[s++]=0),o.length=s,o}function Jk(t,e,n,r){return function(n,i,a){var o=t(t(e(i[1],a[0]),e(-a[1],i[0])),t(e(n[1],i[0]),e(-i[1],n[0]))),s=t(e(n[1],a[0]),e(-a[1],n[0])),u=r(o,s);return u[u.length-1]}}function tE(t,e,n,r){return function(i,a,o,s){var u=t(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),s[2])))),c=t(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),t(n(t(e(a[1],o[0]),e(-o[1],a[0])),i[2]),t(n(t(e(i[1],o[0]),e(-o[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),o[2])))),l=r(u,c);return l[l.length-1]}}function eE(t,e,n,r){return function(i,a,o,s,u){var c=t(t(t(n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),o[2]),t(n(t(e(o[1],u[0]),e(-u[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),u[2]))),a[3]),t(n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),u[2]))),-o[3]),n(t(n(t(e(o[1],u[0]),e(-u[1],o[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),u[2]))),s[3]))),t(n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),-u[3]),t(n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),u[2]))),i[3]),n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-s[2]),n(t(e(i[1],s[0]),e(-s[1],i[0])),u[2]))),-a[3])))),t(t(n(t(n(t(e(a[1],u[0]),e(-u[1],a[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),u[2]))),s[3]),t(n(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),s[2]))),-u[3]),n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),i[3]))),t(n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),-a[3]),t(n(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),s[2]))),o[3]),n(t(n(t(e(a[1],o[0]),e(-o[1],a[0])),i[2]),t(n(t(e(i[1],o[0]),e(-o[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),o[2]))),-s[3]))))),l=t(t(t(n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),o[2]),t(n(t(e(o[1],u[0]),e(-u[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),u[2]))),i[3]),n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-s[2]),n(t(e(i[1],s[0]),e(-s[1],i[0])),u[2]))),-o[3])),t(n(t(n(t(e(o[1],u[0]),e(-u[1],o[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),u[2]))),s[3]),n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),-u[3]))),t(t(n(t(n(t(e(o[1],u[0]),e(-u[1],o[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),u[2]))),i[3]),n(t(n(t(e(o[1],u[0]),e(-u[1],o[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),u[2]))),-a[3])),t(n(t(n(t(e(a[1],u[0]),e(-u[1],a[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),u[2]))),o[3]),n(t(n(t(e(a[1],o[0]),e(-o[1],a[0])),i[2]),t(n(t(e(i[1],o[0]),e(-o[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),o[2]))),-u[3])))),f=r(c,l);return f[f.length-1]}}function nE(t){return(3===t?Jk:4===t?tE:eE)(Qk,Xk,$k,Zk)}var rE=nE(3),iE=nE(4),aE=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),a=(t[0]-n[0])*(e[1]-n[1]),o=i-a;if(i>0){if(a<=0)return o;r=i+a}else{if(!(i<0))return o;if(a>=0)return o;r=-(i+a)}var s=33306690738754716e-32*r;return o>=s||o<=-s?o:rE(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],a=e[0]-r[0],o=n[0]-r[0],s=t[1]-r[1],u=e[1]-r[1],c=n[1]-r[1],l=t[2]-r[2],f=e[2]-r[2],d=n[2]-r[2],h=a*c,p=o*u,v=o*s,g=i*c,y=i*u,m=a*s,b=l*(h-p)+f*(v-g)+d*(y-m),x=7771561172376103e-31*((Math.abs(h)+Math.abs(p))*Math.abs(l)+(Math.abs(v)+Math.abs(g))*Math.abs(f)+(Math.abs(y)+Math.abs(m))*Math.abs(d));return b>x||-b>x?b:iE(t,e,n,r)}];function oE(t){var e,n=aE[t.length];return n||(n=aE[t.length]=nE(t.length)),(e=n).apply.apply(e,[void 0].concat(M(t)))}function sE(t,e,n,r,i,a,o){return function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];switch(n.length){case 0:case 1:return 0;case 2:return r(n[0],n[1]);case 3:return i(n[0],n[1],n[2]);case 4:return a(n[0],n[1],n[2],n[3]);case 5:return o(n[0],n[1],n[2],n[3],n[4])}return t(n)}}const uE=function(){for(;aE.length<=5;)aE.push(nE(aE.length));for(var t=sE.apply(void 0,[void 0,oE].concat(aE)),e=0;e<=5;++e)t[e]=aE[e];return t}();var cE=uE[3];function lE(t,e,n,r){var i=uE(t,n,r),a=uE(e,n,r);if(i>0&&a>0||i<0&&a<0)return!1;var o=uE(n,t,e),s=uE(r,t,e);return!(o>0&&s>0||o<0&&s<0)&&(0!==i||0!==a||0!==o||0!==s||function(t,e,n,r){for(var i=0;i<2;++i){var a=t[i],o=e[i],s=[Math.min(a,o),Math.max(a,o)],u=s[0],c=s[1],l=n[i],f=r[i],d=[Math.min(l,f),Math.max(l,f)];if(d[1]<u||c<d[0])return!1}return!0}(t,e,n,r))}function fE(t,e){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function dE(t,e,n){var r=[e[0]-t[0],e[1]-t[1]],i=[n[0]-t[0],n[1]-t[1]],a=fE(t,e),o=fE(t,n);return(r[0]*i[0]+r[1]*i[1])/Math.sqrt(a*o)}function hE(t,e){for(var n=0;n<e.length-1;n++){var r=[e[n],e[n+1]];if(!(t[0][0]===r[0][0]&&t[0][1]===r[0][1]||t[0][0]===r[1][0]&&t[0][1]===r[1][1])&&lE(t[0],t[1],r[0],r[1]))return!0}return!1}function pE(t){return[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1]),Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]}function vE(t,e,n){for(var r,i,a=null,o=mE,s=mE,u=0;u<e.length;u++)r=dE(t[0],t[1],e[u]),i=dE(t[1],t[0],e[u]),r>o&&i>s&&!hE([t[0],e[u]],n)&&!hE([t[1],e[u]],n)&&(o=r,s=i,a=e[u]);return a}function gE(t,e,n,r,i){for(var a=!1,o=0;o<t.length-1;o++){var s=[t[o],t[o+1]],u=s[0][0]+","+s[0][1]+","+s[1][0]+","+s[1][1];if(!(fE(s[0],s[1])<e||i.has(u))){var c=0,l=pE(s),f=void 0,d=void 0,h=void 0;do{f=(l=r.extendBbox(l,c))[2]-l[0],d=l[3]-l[1],h=vE(s,r.rangePoints(l),t),c++}while(null===h&&(n[0]>f||n[1]>d));f>=n[0]&&d>=n[1]&&i.add(u),null!==h&&(t.splice(o+1,0,h),r.removePoint(h),a=!0)}}return a?gE(t,e,n,r,i):t}function yE(t,e,n){var r=e||20,i=function(t){for(var e=[t[0]],n=t[0],r=1;r<t.length;r++){var i=t[r];n[0]===i[0]&&n[1]===i[1]||e.push(i),n=i}return e}(function(t){return t.sort((function(t,e){return t[0]-e[0]||t[1]-e[1]}))}(function(t,e){if(!e)return M(t);var n=e[0].slice(1),r=e[1].slice(1);return t.map((function(t){return[t[n],t[r]]}))}(t,n)));if(i.length<4){var a=i.concat([i[0]]);return n?Yk(a,n):a}var o=function(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,a=t.length-1;a>=0;a--)t[a][0]<e&&(e=t[a][0]),t[a][1]<n&&(n=t[a][1]),t[a][0]>r&&(r=t[a][0]),t[a][1]>i&&(i=t[a][1]);return[r-e,i-n]}(i),s=[o[0]*bE,o[1]*bE],u=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}for(var i=new Array(e),a=0;a<e;++a)i[a]=a;i.sort((function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]}));for(var o=[i[0],i[1]],s=[i[0],i[1]],u=2;u<e;++u){for(var c=i[u],l=t[c],f=o.length;f>1&&cE(t[o[f-2]],t[o[f-1]],l)<=0;)f-=1,o.pop();for(o.push(c),f=s.length;f>1&&cE(t[s[f-2]],t[s[f-1]],l)>=0;)f-=1,s.pop();s.push(c)}for(var d=new Array(s.length+o.length-2),h=0,p=0,v=o.length;p<v;++p)d[h++]=o[p];for(var g=s.length-2;g>0;--g)d[h++]=s[g];return d}(i).reverse().map((function(t){return i[t]}));u.push(u[0]);var c=i.filter((function(t){return u.indexOf(t)<0})),l=Math.ceil(1/(i.length/(o[0]*o[1]))),f=gE(u,Math.pow(r,2),s,function(t,e){return new Uk(t,e)}(c,l),new Set);return n?Yk(f,n):f}var mE=Math.cos(90/(180/Math.PI)),bE=.6,xE=function(t,e,n){var r=[e,e,0,0,0],i="sharp"===n?yd(t[0],wd(Od(md(t[0],t[1])),e)):t[0],a="sharp"===n?yd(t[1],wd(Od(md(t[1],t[0])),e)):t[1],o=wd(Od(Md(md(i,a),!1)),e),s=wd(o,-1),u=yd(i,o),c=yd(a,o),l=yd(a,s),f=yd(i,s);return"sharp"===n?[["M",u[0],u[1]],["L",c[0],c[1]],["L",l[0],l[1]],["L",f[0],f[1]],["Z"]]:[["M",u[0],u[1]],["L",c[0],c[1]],["A"].concat(r,[l[0],l[1]]),["L",f[0],f[1]],["A"].concat(r,[u[0],u[1]])]},wE=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).hullMemberIds=[],r.drawHull=function(){if(r.shape){var t=!pl(r.optionsCache,r.options);r.shape.update(r.getHullStyle(t))}else r.shape=new jh({style:r.getHullStyle()}),r.context.canvas.appendChild(r.shape);r.optionsCache=Object.assign({},r.options)},r.updateHullPath=function(t){r.shape&&r.options.members.includes(Kf(t.data))&&r.shape.update({d:r.getHullPath(!0)})},r.getHullPath=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=r.context.graph,n=r.getMember();if(0===n.length)return"";var i=n.map((function(t){return e.getNodeData(t)})),a=yE(i.map(Rd),r.options.concavity).slice(1).reverse(),o=a.flatMap((function(t){return i.filter((function(e){return pl(Rd(e),t)})).map(Kf)}));return pl(o,r.hullMemberIds)&&!t||(r.hullMemberIds=o,r.path=function(t,e,n){if(1===t.length)return function(t,e,n){if("sharp"===n)return[["M",t[0]-e,t[1]-e],["L",t[0]+e,t[1]-e],["L",t[0]+e,t[1]+e],["L",t[0]-e,t[1]+e],["Z"]];var r=[e,e,0,0,0];return[["M",t[0],t[1]-e],["A"].concat(r,[t[0],t[1]+e]),["A"].concat(r,[t[0],t[1]-e])]}(t[0],e,n);if(2===t.length)return xE(t,e,n);if(3===t.length){var r=g(qd(t),3),i=r[0],a=r[1],o=r[2];if(Wd(i,a,o))return xE([i,o],e,n)}switch(n){case"smooth":return function(t,e){var n=qd(t).map((function(e,n){return{p:e,v:Od(md(t[(n+1)%t.length],e))}}));return n.forEach((function(r,i){var a=i>0?i-1:t.length-1,o=n[a].v,s=Od(yd(o,wd(r.v,Sd(o,r.v,!0)<Math.PI?1:-1)));r.p=yd(r.p,wd(s,e))})),Rh(n.map((function(t){return t.p})))}(t,e);case"sharp":return function(t,e){var n=t.map((function(n,r){var i=t[0===r?t.length-1:r-1],a=Pd(wd(Od(Md(md(i,n),!1)),e));return[yd(i,a),yd(n,a)]})),r=n.flat();return r.map((function(t,e){return e%2==0?null:_d([r[(e-1)%r.length],r[e%r.length]],[r[(e+1)%r.length],r[(e+2)%r.length]],!0)})).filter(Boolean).map((function(t,e){return[0===e?"M":"L",t[0],t[1]]})).concat([["Z"]])}(t,e);default:return function(t,e){var n=qd(t).map((function(n,r){var i=(r-2+t.length)%t.length,a=(r-1+t.length)%t.length,o=(r+1)%t.length,s=t[i],u=t[a],c=t[o],l=md(s,u),f=md(u,n),d=md(n,c),h=function(t,e){return Sd(t,e,!0)<Math.PI},p=h(l,f),v=h(f,d),g=function(t){return wd(Od(Md(t,!1)),e)},y=g(f);return[{p:Ad(yd(u,p?g(l):y)),concave:p&&u},{p:Ad(yd(n,v?g(d):y)),concave:v&&n}]})),r=[e,e,0,0,0],i=n.findIndex((function(t,e){return!(n[(e-1+n.length)%n.length][0].concave||n[(e-1+n.length)%n.length][1].concave||t[0].concave||t[0].concave||t[1].concave)})),a=n.slice(i).concat(n.slice(0,i)),o=[];return a.flatMap((function(t,e){var i=[],s=a[n.length-1];return 0===e&&i.push(["M"].concat(M(s[1].p))),t[0].concave?o.push(t[0].p,t[1].p):i.push(["A"].concat(r,M(t[0].p))),t[1].concave?o.unshift(t[1].p):i.push(["L"].concat(M(t[1].p))),3===o.length&&(i.pop(),i.push(["C"].concat(M(o.flat()))),o=[]),i}))}(t,e)}}(a,r.getPadding(),r.options.corner)),r.path},r.bindEvents(),r}return _(e,t),O(e,[{key:"bindEvents",value:function(){this.context.graph.on(kl.AFTER_RENDER,this.drawHull),this.context.graph.on(kl.AFTER_ELEMENT_UPDATE,this.updateHullPath)}},{key:"getHullStyle",value:function(t){var e=this.options,n=(e.members,e.padding,e.corner,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["members","padding","corner"]));return Object.assign(Object.assign({},n),{d:this.getHullPath(t)})}},{key:"getPadding",value:function(){var t=this.context.graph,e=this.hullMemberIds.reduce((function(e,n){var r=t.getElementRenderBounds(n).halfExtents,i=Math.max(r[0],r[1]);return Math.max(e,i)}),0);return e+this.options.padding}},{key:"addMember",value:function(t){var e=Array.isArray(t)?t:[t];this.options.members=M(new Set([].concat(M(this.options.members),M(e)))),this.shape.update({d:this.getHullPath()})}},{key:"removeMember",value:function(t){var e=this,n=Array.isArray(t)?t:[t];this.options.members=this.options.members.filter((function(t){return!n.includes(t)})),n.some((function(t){return e.hullMemberIds.includes(t)}))&&this.shape.update({d:this.getHullPath()})}},{key:"updateMember",value:function(t){this.options.members=_n(t)?t(this.options.members):t,this.shape.update(this.getHullStyle(!0))}},{key:"getMember",value:function(){return this.options.members}},{key:"destroy",value:function(){this.context.graph.off(kl.AFTER_DRAW,this.drawHull),this.shape.destroy(),this.hullMemberIds=[],Dn(e,"destroy",this,3)([])}}])}(Rw);function kE(t,e){e(t),t.children&&t.children.forEach((function(t){t&&kE(t,e)}))}function EE(t){SE(t,!0)}function OE(t){SE(t,!1)}function SE(t,e){var n=e?"visible":"hidden";kE(t,(function(t){t.attr("visibility",n)}))}wE.defaultOptions={members:[],padding:10,corner:"rounded",concavity:1/0,fill:"lightblue",fillOpacity:.2,labelOpacity:1,stroke:"blue",strokeOpacity:.2};var ME=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=5),Object.entries(e).forEach((function(i){var a=je(i,2),o=a[0],s=a[1],u=t;Object.prototype.hasOwnProperty.call(e,o)&&(s?dd(s)?(dd(t[o])||(u[o]={}),n<r?ME(t[o],s,n+1,r):u[o]=e[o]):fn(s)?(u[o]=[],u[o]=u[o].concat(s)):u[o]=s:u[o]=s)}))},TE=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)ME(t,e[r]);return t},AE=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(this,De([],je(e),!1))||this;return r.isMutationObserved=!0,r.addEventListener(Ys.INSERTED,(function(){OE(r)})),r}return Ne(e,t),e}(Bu);function PE(t){var e=t.appendChild(new AE({class:"offscreen"}));return OE(e),e}function NE(){SE(this,"hidden"!==this.attributes.visibility)}var CE=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this,TE({},{style:n},e))||this;return r.initialized=!1,r._defaultOptions=n,r}return Ne(e,t),Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=PE(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},e.prototype.disconnectedCallback=function(){var t;null===(t=this._offscreen)||void 0===t||t.destroy()},e.prototype.attributeChangedCallback=function(t){"visibility"===t&&NE.call(this)},e.prototype.update=function(t,e){var n;return this.attr(TE({},this.attributes,t||{})),null===(n=this.render)||void 0===n?void 0:n.call(this,this.attributes,this,e)},e.prototype.clear=function(){this.removeChildren()},e.prototype.bindEvents=function(t,e){},e.prototype.getSubShapeStyle=function(t){return t.x,t.y,t.transform,t.transformOrigin,t.class,t.className,t.zIndex,_e(t,["x","y","transform","transformOrigin","class","className","zIndex"])},e}(Fu);function _E(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function LE(t,e,n){var r;void 0===n&&(n=!0);var i=e||(null===(r=t.match(/^([a-z][a-z0-9]+)/))||void 0===r?void 0:r[0])||"",a=t.replace(new RegExp("^(".concat(i,")")),"");return n?function(t){return t.toString().charAt(0).toLowerCase()+t.toString().slice(1)}(a):a}var RE=function(t,e){if(!(null==t?void 0:t.startsWith(e)))return!1;var n=t[e.length];return n>="A"&&n<="Z"};function jE(t,e,n){void 0===n&&(n=!1);var r={};return Object.entries(t).forEach((function(t){var i,a=je(t,2),o=a[0],s=a[1];if("className"===o||"class"===o);else if(RE(o,"show")&&RE(LE(o,"show"),e)!==n)o===(i=e,"".concat("show").concat(_E(i)))?r[o]=s:r[o.replace(new RegExp(_E(e)),"")]=s;else if(!RE(o,"show")&&RE(o,e)!==n){var u=LE(o,e);"filter"===u&&"function"==typeof s||(r[u]=s)}})),r}function DE(t,e){return Object.entries(t).reduce((function(t,n){var r=je(n,2),i=r[0],a=r[1];return i.startsWith("show")?t["show".concat(e).concat(i.slice(4))]=a:t["".concat(e).concat(_E(i))]=a,t}),{})}function IE(t,e){void 0===e&&(e=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(t).forEach((function(t){var a=je(t,2),o=a[0],s=a[1];e.includes(o)||(-1!==n.indexOf(o)?i[o]=s:r[o]=s)})),[r,i]}var FE=function(t){function e(e){void 0===e&&(e={});var n=e.style,r=_e(e,["style"]);return t.call(this,Ce({style:Ce({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},n)},r))||this}return Ne(e,t),Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=PE(this)),this._offscreen},enumerable:!1,configurable:!0}),e.prototype.disconnectedCallback=function(){var t;null===(t=this._offscreen)||void 0===t||t.destroy()},e}(tc),zE=function(){function t(t,n,r,i,a,o,s){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=null),void 0===a&&(a=[null,null,null,null,null]),void 0===o&&(o=[]),void 0===s&&(s=[]),e.add(this),this._elements=Array.from(t),this._data=n,this._parent=r,this._document=i,this._enter=a[0],this._update=a[1],this._exit=a[2],this._merge=a[3],this._split=a[4],this._transitions=o,this._facetElements=s}var e,n,r;return t.prototype.selectAll=function(t){var e="string"==typeof t?this._parent.querySelectorAll(t):t;return new n(e,null,this._elements[0],this._document)},t.prototype.selectFacetAll=function(t){var e="string"==typeof t?this._parent.querySelectorAll(t):t;return new n(this._elements,null,this._parent,this._document,void 0,void 0,e)},t.prototype.select=function(t){var e="string"==typeof t?this._parent.querySelectorAll(t)[0]||null:t;return new n([e],null,e,this._document)},t.prototype.append=function(t){var e=this,r="function"==typeof t?t:function(){return e.createElement(t)},i=[];if(null!==this._data){for(var a=0;a<this._data.length;a++){var o=this._data[a],s=je(Array.isArray(o)?o:[o,null],2),u=s[0],c=s[1];(f=r(u,a)).__data__=u,null!==c&&(f.__fromElements__=c),this._parent.appendChild(f),i.push(f)}return new n(i,null,this._parent,this._document)}for(a=0;a<this._elements.length;a++){var l=this._elements[a],f=r(u=l.__data__,a);l.appendChild(f),i.push(f)}return new n(i,null,i[0],this._document)},t.prototype.maybeAppend=function(t,n){var i=Ie(this,e,"m",r).call(this,"#"===t[0]?t:"#".concat(t),n);return i.attr("id",t),i},t.prototype.maybeAppendByClassName=function(t,n){var i=t.toString(),a=Ie(this,e,"m",r).call(this,"."===i[0]?i:".".concat(i),n);return a.attr("className",i),a},t.prototype.maybeAppendByName=function(t,n){var i=Ie(this,e,"m",r).call(this,'[name="'.concat(t,'"]'),n);return i.attr("name",t),i},t.prototype.data=function(t,e,r){var i,a;void 0===e&&(e=function(t){return t}),void 0===r&&(r=function(){return null});for(var o=[],s=[],u=new Set(this._elements),c=[],l=new Set,f=new Map(this._elements.map((function(t,n){return[e(t.__data__,n),t]}))),d=new Map(this._facetElements.map((function(t,n){return[e(t.__data__,n),t]}))),h=function(t){var e=new Map;return t.forEach((function(t){var n=function(t){return r(t.__data__)}(t);e.has(n)||e.set(n,[]),e.get(n).push(t)})),e}(this._elements),p=0;p<t.length;p++){var v=t[p],g=e(v,p),y=r(v,p);if(f.has(g))(w=f.get(g)).__data__=v,w.__facet__=!1,s.push(w),u.delete(w),f.delete(g);else if(d.has(g))(w=d.get(g)).__data__=v,w.__facet__=!0,s.push(w),d.delete(g);else if(h.has(g)){var m=h.get(g);c.push([v,m]);try{for(var b=(i=void 0,Re(m)),x=b.next();!x.done;x=b.next()){var w=x.value;u.delete(w)}}catch(t){i={error:t}}finally{try{x&&!x.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}h.delete(g)}else f.has(y)?((w=f.get(y)).__toData__?w.__toData__.push(v):w.__toData__=[v],l.add(w),u.delete(w)):o.push(v)}var k=[new n([],o,this._parent,this._document),new n(s,null,this._parent,this._document),new n(u,null,this._parent,this._document),new n([],c,this._parent,this._document),new n(l,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,k)},t.prototype.merge=function(t){var e=De(De([],je(this._elements),!1),je(t._elements),!1),r=De(De([],je(this._transitions),!1),je(t._transitions),!1);return new n(e,null,this._parent,this._document,void 0,r)},t.prototype.createElement=function(t){if(this._document)return this._document.createElement(t,{});var e=n.registry[t];return e?new e:function(t){throw new Error(t)}("Unknown node type: ".concat(t))},t.prototype.join=function(t,e,n,r,i){void 0===t&&(t=function(t){return t}),void 0===e&&(e=function(t){return t}),void 0===n&&(n=function(t){return t.remove()}),void 0===r&&(r=function(t){return t}),void 0===i&&(i=function(t){return t.remove()});var a=t(this._enter),o=e(this._update),s=n(this._exit),u=r(this._merge),c=i(this._split);return o.merge(a).merge(s).merge(u).merge(c)},t.prototype.remove=function(){for(var t=function(t){var n=e._elements[t],r=e._transitions[t];r?r.then((function(){return n.remove()})):n.remove()},e=this,r=0;r<this._elements.length;r++)t(r);return new n([],null,this._parent,this._document,void 0,this._transitions)},t.prototype.each=function(t){for(var e=0;e<this._elements.length;e++){var n=this._elements[e],r=n.__data__;t.call(n,r,e)}return this},t.prototype.attr=function(t,e){var n="function"!=typeof e?function(){return e}:e;return this.each((function(r,i){void 0!==e&&(this[t]=n.call(this,r,i))}))},t.prototype.style=function(t,e,n){void 0===n&&(n=!0);var r="function"==typeof e&&n?e:function(){return e};return this.each((function(n,i){void 0!==e&&(this.style[t]=r.call(this,n,i))}))},t.prototype.styles=function(t,e){return void 0===t&&(t={}),void 0===e&&(e=!0),this.each((function(n,r){var i=this;Object.entries(t).forEach((function(t){var a=je(t,2),o=a[0],s=a[1],u="function"==typeof s&&e?s:function(){return s};void 0!==s&&i.attr(o,u.call(i,n,r))}))}))},t.prototype.update=function(t,e){void 0===e&&(e=!0);var n="function"==typeof t&&e?t:function(){return t};return this.each((function(e,r){t&&this.update&&this.update(n.call(this,e,r))}))},t.prototype.maybeUpdate=function(t,e){void 0===e&&(e=!0);var n="function"==typeof t&&e?t:function(){return t};return this.each((function(e,r){t&&this.update&&this.update(n.call(this,e,r))}))},t.prototype.transition=function(t){var e=this._transitions;return this.each((function(n,r){e[r]=t.call(this,n,r)}))},t.prototype.on=function(t,e){return this.each((function(){this.addEventListener(t,e)})),this},t.prototype.call=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.call.apply(t,De([this._parent,this],je(e),!1)),this},t.prototype.node=function(){return this._elements[0]},t.prototype.nodes=function(){return this._elements},t.prototype.transitions=function(){return this._transitions.filter((function(t){return!!t}))},t.prototype.parent=function(){return this._parent},n=t,e=new WeakSet,r=function(t,e){var r=this._elements[0],i=r.querySelector(t);if(i)return new n([i],null,this._parent,this._document);var a="string"==typeof e?this.createElement(e):e();return r.appendChild(a),new n([a],null,this._parent,this._document)},t.registry={g:Bu,rect:Qu,circle:Du,path:qu,text:FE,ellipse:zu,image:Vu,line:Yu,polygon:Ku,polyline:Zu,html:Wu},t}();function BE(t){return new zE([t],null,t,t.ownerDocument)}var GE=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=e,this.width=n,this.height=r}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},t.prototype.isPointIn=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},t}(),WE=function(t,e){var n=function(t){return"".concat(e,"-").concat(t)},r=Object.fromEntries(Object.entries(t).map((function(t){var e=je(t,2),r=e[0],i=e[1],a=n(i);return[r,{name:a,class:".".concat(a),id:"#".concat(a),toString:function(){return a}}]})));return Object.assign(r,{prefix:n}),r};function VE(t){if(Oe(t))return[t,t,t,t];if(fn(t)){var e=t.length;if(1===e)return[t[0],t[0],t[0],t[0]];if(2===e)return[t[0],t[1],t[0],t[1]];if(3===e)return[t[0],t[1],t[2],t[1]];if(4===e)return t}return[0,0,0,0]}function HE(t,e,n,r,i){return void 0===r&&(r=!0),void 0===i&&(i=function(t){t.node().removeChildren()}),t?n(e):(r&&i(e),null)}var YE=WE({text:"text"},"title");function UE(t){return/\S+-\S+/g.test(t)?t.split("-").map((function(t){return t[0]})):t.length>2?[t[0]]:t.split("")}function qE(t,e){var n=Object.entries(e).reduce((function(e,n){var r=je(n,2),i=r[0],a=r[1];return t.node().attr(i)||(e[i]=a),e}),{});t.styles(n)}var XE=function(t){function e(e){return t.call(this,e,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return Ne(e,t),e.prototype.getAvailableSpace=function(){var t=this.attributes,e=t.width,n=t.height,r=t.position,i=t.spacing,a=t.inset,o=this.querySelector(YE.text.class);if(!o)return new GE(0,0,+e,+n);var s=o.getBBox(),u=s.width,c=s.height,l=je(VE(i),4),f=l[0],d=l[1],h=l[2],p=l[3],v=je([0,0,+e,+n],4),g=v[0],y=v[1],m=v[2],b=v[3],x=UE(r);if(x.includes("i"))return new GE(g,y,m,b);x.forEach((function(t,r){var i,a,o,s;"t"===t&&(i=je(0===r?[c+h,+n-c-h]:[0,+n],2),y=i[0],b=i[1]),"r"===t&&(a=je([+e-u-p],1),m=a[0]),"b"===t&&(o=je([+n-c-f],1),b=o[0]),"l"===t&&(s=je(0===r?[u+d,+e-u-d]:[0,+e],2),g=s[0],m=s[1])}));var w=je(VE(a),4),k=w[0],E=w[1],O=w[2],S=w[3],M=je([S+E,k+O],2),T=M[0],A=M[1];return new GE(g+S,y+k,m-T,b-A)},e.prototype.getBBox=function(){return this.title?this.title.getBBox():new GE(0,0,0,0)},e.prototype.render=function(t,e){var n=this,r=(t.width,t.height,t.position,t.spacing,_e(t,["width","height","position","spacing"])),i=je(IE(r),1)[0],a=function(t){var e,n,r,i,a=t,o=a.width,s=a.height,u=a.position,c=je([+o/2,+s/2],2),l=je([+c[0],+c[1],"center","middle"],4),f=l[0],d=l[1],h=l[2],p=l[3],v=UE(u);return v.includes("l")&&(f=(e=je([0,"start"],2))[0],h=e[1]),v.includes("r")&&(f=(n=je([+o,"end"],2))[0],h=n[1]),v.includes("t")&&(d=(r=je([0,"top"],2))[0],p=r[1]),v.includes("b")&&(d=(i=je([+s,"bottom"],2))[0],p=i[1]),{x:f,y:d,textAlign:h,textBaseline:p}}(t),o=a.x,s=a.y,u=a.textAlign,c=a.textBaseline;HE(!!r.text,BE(e),(function(t){n.title=t.maybeAppendByClassName(YE.text,"text").styles(i).call(qE,{x:o,y:s,textAlign:u,textBaseline:c}).node()}))},e}(CE);const KE=function(){};function $E(t,e){return _n(t)?t.apply(void 0,De([],je(e),!1)):t}function ZE(t){if(!t)return{enter:!1,update:!1,exit:!1};var e=["enter","update","exit"],n=Object.fromEntries(Object.entries(t).filter((function(t){var n=je(t,1)[0];return!e.includes(n)})));return Object.fromEntries(e.map((function(e){return function(t){return"boolean"!=typeof t&&"enter"in t&&"update"in t&&"exit"in t}(t)?!1===t[e]?[e,!1]:[e,Ce(Ce({},t[e]),n)]:[e,n]})))}function QE(t,e){t?t.finished.then(e):e()}function JE(t,e){"update"in t?t.update(e):t.attr(e)}function tO(t,e,n){return 0===e.length?null:n?t.animate(e,n):(JE(t,{style:e.slice(-1)[0]}),null)}function eO(t,e,n){var r={},i={};return Object.entries(e).forEach((function(e){var n=je(e,2),a=n[0],o=n[1];if(!Me(o)){var s=t.style[a]||t.parsedStyle[a]||0;s!==o&&(r[a]=s,i[a]=o)}})),n?tO(t,[r,i],Ce({fill:"both"},n)):(JE(t,i),null)}function nO(t,e,n){void 0===n&&(n=!1);var r=t.getBBox(),i=r.width,a=r.height,o=e/Math.max(i,a);return n&&(t.style.transform="scale(".concat(o,")")),o}var rO=function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]},iO=rO,aO=function(t,e,n){return[["M",t,e+n],["L",t,e-n]]},oO=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},sO=oO,uO=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e],["L",t-n,e+n],["Z"]]},cO=WE({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),lO=function(t){function e(e){var n=t.call(this,e,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:uO(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(t,e){return"".concat(t,"/").concat(e)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return n.playState="idle",n.contentGroup=n.appendChild(new Bu({class:cO.contentGroup.name})),n.playWindow=n.contentGroup.appendChild(new Bu({class:cO.playWindow.name})),n.innerCurrPage=n.defaultPage,n}return Ne(e,t),Object.defineProperty(e.prototype,"defaultPage",{get:function(){var t=this.attributes.defaultPage;return Ae(t,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageShape",{get:function(){var t=je(function(t){var e;return(null===(e=t[0])||void 0===e?void 0:e.map((function(e,n){return t.map((function(t){return t[n]}))})))||[]}(this.pageViews.map((function(t){var e=t.getBBox();return[e.width,e.height]}))).map((function(t){return Math.max.apply(Math,De([],je(t),!1))})),2),e=t[0],n=t[1],r=this.attributes,i=r.pageWidth,a=void 0===i?e:i,o=r.pageHeight;return{pageWidth:a,pageHeight:void 0===o?n:o}},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(e.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var e=t.prototype.getBBox.call(this),n=e.x,r=e.y,i=this.controllerShape,a=this.pageShape,o=a.pageWidth,s=a.pageHeight;return new GE(n,r,o+i.width,s)},e.prototype.goTo=function(t){var e=this,n=this.attributes.animate,r=this,i=r.currPage,a=r.playState,o=r.playWindow,s=r.pageViews;if("idle"!==a||t<0||s.length<=0||t>=s.length)return null;s[i].setLocalPosition(0,0),this.prepareFollowingPage(t);var u=je(this.getFollowingPageDiff(t),2),c=u[0],l=u[1];this.playState="running";var f=tO(o,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-c,", ").concat(-l,")")}],n);return QE(f,(function(){e.innerCurrPage=t,e.playState="idle",e.setVisiblePages([t]),e.updatePageInfo()})),f},e.prototype.prev=function(){var t=this.attributes.loop,e=this.pageViews.length,n=this.currPage;if(!t&&n<=0)return null;var r=t?(n-1+e)%e:Ae(n-1,0,e);return this.goTo(r)},e.prototype.next=function(){var t=this.attributes.loop,e=this.pageViews.length,n=this.currPage;if(!t&&n>=e-1)return null;var r=t?(n+1)%e:Ae(n+1,0,e);return this.goTo(r)},e.prototype.renderClipPath=function(t){var e=this.pageShape,n=e.pageWidth,r=e.pageHeight;n&&r?(this.clipPath=t.maybeAppendByClassName(cO.clipPath,"rect").styles({width:n,height:r}),this.contentGroup.attr("clipPath",this.clipPath.node())):this.contentGroup.style.clipPath=void 0},e.prototype.setVisiblePages=function(t){this.playWindow.children.forEach((function(e,n){t.includes(n)?EE(e):OE(e)}))},e.prototype.adjustControllerLayout=function(){var t=this,e=t.prevBtnGroup,n=t.nextBtnGroup,r=t.pageInfoGroup,i=this.attributes,a=i.orientation,o=i.controllerPadding,s=r.getBBox(),u=s.width,c=(s.height,je("horizontal"===a?[-180,0]:[-90,90],2)),l=c[0],f=c[1];e.setLocalEulerAngles(l),n.setLocalEulerAngles(f);var d=e.getBBox(),h=d.width,p=d.height,v=n.getBBox(),g=v.width,y=v.height,m=Math.max(h,u,g),b="horizontal"===a?{offset:[[0,0],[h/2+o,0],[h+u+2*o,0]],textAlign:"start"}:{offset:[[m/2,-p-o],[m/2,0],[m/2,y+o]],textAlign:"center"},x=je(b.offset,3),w=je(x[0],2),k=w[0],E=w[1],O=je(x[1],2),S=O[0],M=O[1],T=je(x[2],2),A=T[0],P=T[1],N=b.textAlign,C=r.querySelector("text");C&&(C.style.textAlign=N),e.setLocalPosition(k,E),r.setLocalPosition(S,M),n.setLocalPosition(A,P)},e.prototype.updatePageInfo=function(){var t,e=this,n=e.currPage,r=e.pageViews,i=e.attributes.formatter;r.length<2||(null===(t=this.pageInfoGroup.querySelector(cO.pageInfo.class))||void 0===t||t.attr("text",i(n+1,r.length)),this.adjustControllerLayout())},e.prototype.getFollowingPageDiff=function(t){var e=this.currPage;if(e===t)return[0,0];var n=this.attributes.orientation,r=this.pageShape,i=r.pageWidth,a=r.pageHeight,o=t<e?-1:1;return"horizontal"===n?[o*i,0]:[0,o*a]},e.prototype.prepareFollowingPage=function(t){var e=this.currPage,n=this.pageViews;if(this.setVisiblePages([t,e]),t!==e){var r=je(this.getFollowingPageDiff(t),2),i=r[0],a=r[1];n[t].setLocalPosition(i,a)}},e.prototype.renderController=function(t){var e=this,n=this.attributes.controllerSpacing,r=this.pageShape,i=r.pageWidth,a=r.pageHeight,o=this.pageViews.length>=2,s=t.maybeAppendByClassName(cO.controller,"g");if(SE(s.node(),o),o){var u=jE(this.attributes,"button"),c=jE(this.attributes,"pageNum"),l=je(IE(u),2),f=l[0],d=l[1],h=f.size,p=_e(f,["size"]),v=!s.select(cO.prevBtnGroup.class).node(),g=s.maybeAppendByClassName(cO.prevBtnGroup,"g").styles(d);this.prevBtnGroup=g.node();var y=g.maybeAppendByClassName(cO.prevBtn,"path"),m=s.maybeAppendByClassName(cO.nextBtnGroup,"g").styles(d);this.nextBtnGroup=m.node(),[y,m.maybeAppendByClassName(cO.nextBtn,"path")].forEach((function(t){t.styles(Ce(Ce({},p),{transformOrigin:"center"})),nO(t.node(),h,!0)}));var b=s.maybeAppendByClassName(cO.pageInfoGroup,"g");this.pageInfoGroup=b.node(),b.maybeAppendByClassName(cO.pageInfo,"text").styles(c),this.updatePageInfo(),s.node().setLocalPosition(i+n,a/2),v&&(this.prevBtnGroup.addEventListener("click",(function(){e.prev()})),this.nextBtnGroup.addEventListener("click",(function(){e.next()})))}},e.prototype.render=function(t,e){var n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i;this.attr("transform","translate(".concat(r,", ").concat(a,")"));var o=BE(e);this.renderClipPath(o),this.renderController(o),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},e.prototype.bindEvents=function(){var t=this,e=Gg((function(){return t.render(t.attributes,t)}),50);this.playWindow.addEventListener(Ys.INSERTED,e),this.playWindow.addEventListener(Ys.REMOVED,e)},e}(CE);var fO,dO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ne(e,t),e.prototype.render=function(t,n){var r=t.x,i=void 0===r?0:r,a=t.y,o=void 0===a?0:a,s=this.getSubShapeStyle(t),u=s.symbol,c=s.size,l=void 0===c?16:c,f=_e(s,["symbol","size"]),d=function(t){var e=function(t){var e="default";if(Ln(t)&&t instanceof Image)e="image";else if(_n(t))e="symbol";else if(Te(t)){var n=new RegExp("data:(image|text)");e=t.match(n)?"base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?"url":"symbol"}return e}(t);return["base64","url","image"].includes(e)?"image":t&&"symbol"===e?"path":null}(u);HE(!!d,BE(n),(function(t){t.maybeAppendByClassName("marker",d).attr("className","marker ".concat(d,"-marker")).call((function(t){if("image"===d){var n=2*l;t.styles({img:u,width:n,height:n,x:i-l,y:o-l})}else{n=l/2;var r=_n(u)?u:e.getSymbol(u);t.styles(Ce({d:null==r?void 0:r(i,o,n)},f))}}))}))},e.MARKER_SYMBOL_MAP=new Map,e.registerSymbol=function(t,n){e.MARKER_SYMBOL_MAP.set(t,n)},e.getSymbol=function(t){return e.MARKER_SYMBOL_MAP.get(t)},e.getSymbols=function(){return Array.from(e.MARKER_SYMBOL_MAP.keys())},e}(CE);function hO(t,e,n){return void 0===t&&(t="horizontal"),"horizontal"===t?e:n}function pO(t){var e=t.getLocalBounds(),n=je([e.min,e.max],2),r=je(n[0],2),i=r[0],a=r[1],o=je(n[1],2),s=o[0],u=o[1];return{x:i,y:a,width:s-i,height:u-a,left:i,bottom:u,top:a,right:s}}function vO(t,e){var n=je(t,2),r=n[0],i=n[1],a=je(e,2),o=a[0],s=a[1];return r!==o&&i===s}function gO(t){return"function"==typeof t?t():Te(t)||Oe(t)?new FE({style:{text:String(t)}}):t}dO.registerSymbol("cross",(function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]})),dO.registerSymbol("hyphen",(function(t,e,n){return[["M",t-n,e],["L",t+n,e]]})),dO.registerSymbol("line",aO),dO.registerSymbol("plus",(function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]})),dO.registerSymbol("tick",(function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]})),dO.registerSymbol("circle",rO),dO.registerSymbol("point",iO),dO.registerSymbol("bowtie",(function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]})),dO.registerSymbol("hexagon",(function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]})),dO.registerSymbol("square",(function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]})),dO.registerSymbol("diamond",(function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]})),dO.registerSymbol("triangle",(function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]})),dO.registerSymbol("triangle-down",(function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]})),dO.registerSymbol("line",aO),dO.registerSymbol("dot",oO),dO.registerSymbol("dash",sO),dO.registerSymbol("smooth",(function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]})),dO.registerSymbol("hv",(function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]})),dO.registerSymbol("vh",(function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]})),dO.registerSymbol("hvh",(function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]})),dO.registerSymbol("vhv",(function(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]})),dO.registerSymbol("hiddenHandle",(function(t,e,n){var r=1.4*n;return[["M",t-n,e-r],["L",t+n,e-r],["L",t+n,e+r],["L",t-n,e+r],["Z"]]})),dO.registerSymbol("verticalHandle",(function(t,e,n){var r=1.4*n,i=n/2,a=n/6,o=t+.4*r;return[["M",t,e],["L",o,e+i],["L",t+r,e+i],["L",t+r,e-i],["L",o,e-i],["Z"],["M",o,e+a],["L",t+r-2,e+a],["M",o,e-a],["L",t+r-2,e-a]]})),dO.registerSymbol("horizontalHandle",(function(t,e,n){var r=1.4*n,i=n/2,a=n/6,o=e+.4*r;return[["M",t,e],["L",t-i,o],["L",t-i,e+r],["L",t+i,e+r],["L",t+i,o],["Z"],["M",t-a,o],["L",t-a,e+r-2],["M",t+a,o],["L",t+a,e+r-2]]}));var yO=Sw((function(t,e){var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,a=e.fontStyle,o=e.fontVariant;return fO||(fO=ku.offscreenCanvasCreator.getOrCreateContext(void 0)),fO.font=[a,o,i,"".concat(n,"px"),r].join(" "),fO.measureText(t).width}),(function(t,e){return[t,Object.values(e||mO(t)).join()].join("")}),4096),mO=function(t){var e=t.style.fontFamily||"sans-serif",n=t.style.fontWeight||"normal",r=t.style.fontStyle||"normal",i=t.style.fontVariant,a=t.style.fontSize;return{fontSize:a="object"==typeof a?a.value:a,fontFamily:e,fontWeight:n,fontStyle:r,fontVariant:i}};function bO(t){return"text"===t.nodeName?t:"g"===t.nodeName&&1===t.children.length&&"text"===t.children[0].nodeName?t.children[0]:null}function xO(t,e){var n=bO(t);n&&n.attr(e)}function wO(t,e,n){void 0===n&&(n="..."),xO(t,{wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:n})}var kO=WE({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item"),EO=function(t){function e(e){return t.call(this,e,{span:[1,1],marker:function(){return new Du({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Ne(e,t),Object.defineProperty(e.prototype,"showValue",{get:function(){var t=this.attributes.valueText;return!!t&&("string"==typeof t||"number"==typeof t?""!==t:"function"==typeof t||""!==t.attr("text"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualSpace",{get:function(){var t=this.labelGroup,e=this.valueGroup,n=this.attributes.markerSize,r=t.node().getBBox(),i=r.width,a=r.height,o=e.node().getBBox(),s=o.width,u=o.height;return{markerWidth:n,labelWidth:i,valueWidth:s,height:Math.max(n,a,u)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){var t=this.attributes.span;if(!t)return[1,1];var e=je(VE(t),2),n=e[0],r=e[1],i=this.showValue?r:0,a=n+i;return[n/a,i/a]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var t,e=this.attributes,n=e.markerSize,r=e.width,i=this.actualSpace,a=i.markerWidth,o=i.height,s=this.actualSpace,u=s.labelWidth,c=s.valueWidth,l=je(this.spacing,2),f=l[0],d=l[1];if(r){var h=r-n-f-d,p=je(this.span,2);u=(t=je([p[0]*h,p[1]*h],2))[0],c=t[1]}return{width:a+u+c+f+d,height:o,markerWidth:a,labelWidth:u,valueWidth:c}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){var t=this.attributes.spacing;if(!t)return[0,0];var e=je(VE(t),2),n=e[0],r=e[1];return this.showValue?[n,r]:[n,0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){var t=this.shape,e=t.markerWidth,n=t.labelWidth,r=t.valueWidth,i=t.width,a=t.height,o=je(this.spacing,2),s=o[0];return{height:a,width:i,markerWidth:e,labelWidth:n,valueWidth:r,position:[e/2,e+s,e+n+s+o[1]]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleSize",{get:function(){var t,e,n=(t=this.markerGroup.node(),(e=t.querySelector(kO.marker.class))?e.style:{}),r=this.attributes,i=r.markerSize,a=r.markerStrokeWidth,o=void 0===a?n.strokeWidth:a,s=r.markerLineWidth,u=void 0===s?n.lineWidth:s,c=r.markerStroke,l=void 0===c?n.stroke:c,f=+(o||u||(l?1:0))*Math.sqrt(2),d=this.markerGroup.node().getBBox(),h=d.width,p=d.height;return(1-f/Math.max(h,p))*i},enumerable:!1,configurable:!0}),e.prototype.renderMarker=function(t){var e=this,n=this.attributes.marker,r=jE(this.attributes,"marker");this.markerGroup=t.maybeAppendByClassName(kO.markerGroup,"g").style("zIndex",0),HE(!!n,this.markerGroup,(function(){var t,i=e.markerGroup.node(),a=null===(t=i.childNodes)||void 0===t?void 0:t[0],o="string"==typeof n?new dO({style:{symbol:n},className:kO.marker.name}):n();a?o.nodeName===a.nodeName?a instanceof dO?a.update(Ce(Ce({},r),{symbol:n})):(function(t,e){var n,r,i=e.attributes;try{for(var a=Re(Object.entries(i)),o=a.next();!o.done;o=a.next()){var s=je(o.value,2),u=s[0],c=s[1];"id"!==u&&"className"!==u&&t.attr(u,c)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}(a,o),BE(a).styles(r)):(a.remove(),BE(o).attr("className",kO.marker.name).styles(r),i.appendChild(o)):(o instanceof dO||BE(o).attr("className",kO.marker.name).styles(r),i.appendChild(o)),e.markerGroup.node().scale(1/e.markerGroup.node().getScale()[0]);var s=nO(e.markerGroup.node(),e.scaleSize,!0);e.markerGroup.node().style._transform="scale(".concat(s,")")}))},e.prototype.renderLabel=function(t){var e=jE(this.attributes,"label"),n=e.text,r=_e(e,["text"]);this.labelGroup=t.maybeAppendByClassName(kO.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(kO.label,(function(){return gO(n)})).styles(r)},e.prototype.renderValue=function(t){var e=this,n=jE(this.attributes,"value"),r=n.text,i=_e(n,["text"]);this.valueGroup=t.maybeAppendByClassName(kO.valueGroup,"g").style("zIndex",0),HE(this.showValue,this.valueGroup,(function(){e.valueGroup.maybeAppendByClassName(kO.value,(function(){return gO(r)})).styles(i)}))},e.prototype.renderBackground=function(t){var e=this.shape,n=e.width,r=e.height,i=jE(this.attributes,"background");this.background=t.maybeAppendByClassName(kO.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(kO.background,"rect").styles(Ce({width:n,height:r},i))},e.prototype.adjustLayout=function(){var t=this.layout,e=t.labelWidth,n=t.valueWidth,r=t.height,i=je(t.position,3),a=i[0],o=i[1],s=i[2],u=r/2;this.markerGroup.styles({transform:"translate(".concat(a,", ").concat(u,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(o,", ").concat(u,")")}),wO(this.labelGroup.select(kO.label.class).node(),Math.ceil(e)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(s,", ").concat(u,")")}),wO(this.valueGroup.select(kO.value.class).node(),Math.ceil(n)))},e.prototype.render=function(t,e){var n=BE(e),r=t.x,i=void 0===r?0:r,a=t.y,o=void 0===a?0:a;n.styles({transform:"translate(".concat(i,", ").concat(o,")")}),this.renderMarker(n),this.renderLabel(n),this.renderValue(n),this.renderBackground(n),this.adjustLayout()},e}(CE),OO=WE({page:"item-page",navigator:"navigator",item:"item"},"items"),SO=function(t,e,n){return void 0===n&&(n=!0),t?e(t):n},MO=function(t){function e(e){var n=t.call(this,e,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:KE,mouseenter:KE,mouseleave:KE})||this;return n.navigatorShape=[0,0],n}return Ne(e,t),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){var t=this.attributes,e=t.gridRow,n=t.gridCol,r=t.data;if(!e&&!n)throw new Error("gridRow and gridCol can not be set null at the same time");return e&&n?[e,n]:e?[e,r.length]:[r.length,n]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderData",{get:function(){var t=this.attributes,e=t.data,n=t.layout,r=jE(this.attributes,"item"),i=e.map((function(t,i){var a=t.id,o=void 0===a?i:a,s=t.label,u=t.value;return{id:"".concat(o),index:i,style:Ce({layout:n,labelText:s,valueText:u},Object.fromEntries(Object.entries(r).map((function(n){var r=je(n,2);return[r[0],$E(r[1],[t,i,e])]}))))}}));return i},enumerable:!1,configurable:!0}),e.prototype.getGridLayout=function(){var t=this,e=this.attributes,n=e.orientation,r=e.width,i=e.rowPadding,a=e.colPadding,o=je(this.navigatorShape,1)[0],s=je(this.grid,2),u=s[0],c=s[1],l=c*u,f=0;return this.pageViews.children.map((function(e,s){var d,h,p=Math.floor(s/l),v=s%l,g=t.ifHorizontal(c,u),y=[Math.floor(v/g),v%g];"vertical"===n&&y.reverse();var m=je(y,2),b=m[0],x=m[1],w=(r-o-(c-1)*a)/c,k=e.getBBox().height,E=je([0,0],2),O=E[0],S=E[1];return"horizontal"===n?(O=(d=je([f,b*(k+i)],2))[0],S=d[1],f=x===c-1?0:f+w+a):(O=(h=je([x*(w+a),f],2))[0],S=h[1],f=b===u-1?0:f+k+i),{page:p,index:s,row:b,col:x,pageIndex:v,width:w,height:k,x:O,y:S}}))},e.prototype.getFlexLayout=function(){var t=this.attributes,e=t.width,n=t.height,r=t.rowPadding,i=t.colPadding,a=je(this.navigatorShape,1)[0],o=je(this.grid,2),s=o[0],u=o[1],c=je([e-a,n],2),l=c[0],f=c[1],d=je([0,0,0,0,0,0,0,0],8),h=d[0],p=d[1],v=d[2],g=d[3],y=d[4],m=d[5],b=d[6],x=d[7];return this.pageViews.children.map((function(t,e){var n,a,o,c,d=t.getBBox(),w=d.width,k=d.height,E=0===b?0:i,O=b+E+w;return O<=l&&SO(y,(function(t){return t<u}))?(n=je([b+E,x,O],3),h=n[0],p=n[1],b=n[2],{width:w,height:k,x:h,y:p,page:v,index:e,pageIndex:g++,row:m,col:y++}):(a=je([m+1,0,0,x+k+r],4),m=a[0],y=a[1],b=a[2],(x=a[3])+k<=f&&SO(m,(function(t){return t<s}))?(o=je([b,x,w],3),h=o[0],p=o[1],b=o[2],{width:w,height:k,x:h,y:p,page:v,index:e,pageIndex:g++,row:m,col:y++}):(c=je([0,0,w,0,v+1,0,0,0],8),h=c[0],p=c[1],b=c[2],x=c[3],v=c[4],g=c[5],m=c[6],y=c[7],{width:w,height:k,x:h,y:p,page:v,index:e,pageIndex:g++,row:m,col:y++}))}))},Object.defineProperty(e.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var t="grid"===this.attributes.layout?this.getGridLayout:this.getFlexLayout,e=t.call(this);return e.slice(-1)[0].page>0?(this.navigatorShape=[55,0],t.call(this)):e},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(t,e){return hO(this.attributes.orientation,t,e)},e.prototype.flattenPage=function(t){t.querySelectorAll(OO.item.class).forEach((function(e){t.appendChild(e)})),t.querySelectorAll(OO.page.class).forEach((function(e){t.removeChild(e).destroy()}))},e.prototype.renderItems=function(t){var e=this.attributes,n=e.click,r=e.mouseenter,i=e.mouseleave;this.flattenPage(t);var a=this.dispatchCustomEvent.bind(this);BE(t).selectAll(OO.item.class).data(this.renderData,(function(t){return t.id})).join((function(t){return t.append((function(t){var e=t.style;return new EO({style:e})})).attr("className",OO.item.name).on("click",(function(){null==n||n(this),a("itemClick",{item:this})})).on("pointerenter",(function(){null==r||r(this),a("itemMouseenter",{item:this})})).on("pointerleave",(function(){null==i||i(this),a("itemMouseleave",{item:this})}))}),(function(t){return t.each((function(t){var e=t.style;this.update(e)}))}),(function(t){return t.remove()}))},e.prototype.relayoutNavigator=function(){var t,e=this.attributes,n=e.layout,r=e.width,i=(null===(t=this.pageViews.children[0])||void 0===t?void 0:t.getBBox().height)||0,a=je(this.navigatorShape,2),o=a[0],s=a[1];this.navigator.update("grid"===n?{pageWidth:r-o,pageHeight:i-s}:{})},e.prototype.adjustLayout=function(){var t,e,n=this,r=Object.entries((t=this.itemsLayout,e="page",t.reduce((function(t,n){return(t[n[e]]=t[n[e]]||[]).push(n),t}),{}))).map((function(t){var e=je(t,2);return{page:e[0],layouts:e[1]}})),i=De([],je(this.navigator.getContainer().children),!1);r.forEach((function(t){var e=t.layouts,r=n.pageViews.appendChild(new Bu({className:OO.page.name}));e.forEach((function(t){var e=t.x,n=t.y,a=t.index,o=t.width,s=t.height,u=i[a];r.appendChild(u),lh(u,"__layout__",t),u.update({x:e,y:n,width:o,height:s})}))})),this.relayoutNavigator()},e.prototype.renderNavigator=function(t){var e=this.attributes.orientation,n=jE(this.attributes,"nav"),r=TE({orientation:e},n),i=this;return t.selectAll(OO.navigator.class).data(["nav"]).join((function(t){return t.append((function(){return new lO({style:r})})).attr("className",OO.navigator.name).each((function(){i.navigator=this}))}),(function(t){return t.each((function(){this.update(r)}))}),(function(t){return t.remove()})),this.navigator},e.prototype.getBBox=function(){return this.navigator.getBBox()},e.prototype.render=function(t,e){var n=this.attributes.data;if(n&&0!==n.length){var r=this.renderNavigator(BE(e));this.renderItems(r.getContainer()),this.adjustLayout()}},e.prototype.dispatchCustomEvent=function(t,e){var n=new js(t,{detail:e});this.dispatchEvent(n)},e}(CE),TO=WE({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),AO={showLabel:!0,formatter:function(t){return t.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},PO=function(t){function e(e){return t.call(this,e,AO)||this}return Ne(e,t),e.prototype.render=function(t,e){var n=BE(e).maybeAppendByClassName(TO.markerGroup,"g");this.renderMarker(n);var r=BE(e).maybeAppendByClassName(TO.labelGroup,"g");this.renderLabel(r)},e.prototype.renderMarker=function(t){var e=this,n=this.attributes,r=n.orientation,i=n.markerSymbol,a=void 0===i?hO(r,"horizontalHandle","verticalHandle"):i;HE(!!a,t,(function(t){var n=jE(e.attributes,"marker"),r=Ce({symbol:a},n);e.marker=t.maybeAppendByClassName(TO.marker,(function(){return new dO({style:r})})).update(r)}))},e.prototype.renderLabel=function(t){var e=this,n=this.attributes,r=n.showLabel,i=n.orientation,a=n.spacing,o=void 0===a?0:a,s=n.formatter;HE(r,t,(function(t){var n,r=jE(e.attributes,"label"),a=r.text,u=_e(r,["text"]),c=(null===(n=t.select(TO.marker.class))||void 0===n?void 0:n.node().getBBox())||{},l=c.width,f=void 0===l?0:l,d=c.height,h=je(hO(i,[0,(void 0===d?0:d)+o,"center","top"],[f+o,0,"start","middle"]),4),p=h[0],v=h[1],g=h[2],y=h[3];t.maybeAppendByClassName(TO.label,"text").styles(Ce(Ce({},u),{x:p,y:v,text:s(a).toString(),textAlign:g,textBaseline:y}))}))},e}(CE),NO={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},CO=TE({},NO,{}),_O=TE({},NO,DE(AO,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),LO=WE({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),RO=function(t){function e(e){return t.call(this,e,CO)||this}return Ne(e,t),e.prototype.renderTitle=function(t,e,n){var r=this.attributes,i=r.showTitle,a=r.titleText,o=je(IE(jE(this.attributes,"title")),2),s=o[0],u=o[1];this.titleGroup=t.maybeAppendByClassName(LO.titleGroup,"g").styles(u);var c=Ce(Ce({width:e,height:n},s),{text:i?a:""});this.title=this.titleGroup.maybeAppendByClassName(LO.title,(function(){return new XE({style:c})})).update(c)},e.prototype.renderItems=function(t,e){var n=e.x,r=e.y,i=e.width,a=e.height,o=je(IE(jE(this.attributes,"title",!0)),2),s=o[0],u=o[1],c=Ce(Ce({},s),{width:i,height:a,x:0,y:0});this.itemsGroup=t.maybeAppendByClassName(LO.itemsGroup,"g").styles(Ce(Ce({},u),{transform:"translate(".concat(n,", ").concat(r,")")}));var l=this;this.itemsGroup.selectAll(LO.items.class).data(["items"]).join((function(t){return t.append((function(){return new MO({style:c})})).attr("className",LO.items.name).each((function(){l.items=BE(this)}))}),(function(t){return t.update(c)}),(function(t){return t.remove()}))},e.prototype.adjustLayout=function(){if(this.attributes.showTitle){var t=this.title.node().getAvailableSpace(),e=t.x,n=t.y;this.itemsGroup.node().style.transform="translate(".concat(e,", ").concat(n,")")}},Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,e=t.showTitle,n=t.width,r=t.height;return e?this.title.node().getAvailableSpace():new GE(0,0,n,r)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var e,n,r=null===(e=this.title)||void 0===e?void 0:e.node(),i=null===(n=this.items)||void 0===n?void 0:n.node();return r&&i?function(t,e){var n=t.attributes,r=n.position,i=n.spacing,a=n.inset,o=n.text,s=t.getBBox(),u=e.getBBox(),c=UE(r),l=je(VE(o?i:0),4),f=l[0],d=l[1],h=l[2],p=l[3],v=je(VE(a),4),g=v[0],y=v[1],m=v[2],b=v[3],x=je([p+d,f+h],2),w=x[0],k=x[1],E=je([b+y,g+m],2),O=E[0],S=E[1];if("l"===c[0])return new GE(s.x,s.y,u.width+s.width+w+O,Math.max(u.height+S,s.height));if("t"===c[0])return new GE(s.x,s.y,Math.max(u.width+O,s.width),u.height+s.height+k+S);var M=je([e.attributes.width||u.width,e.attributes.height||u.height],2),T=M[0],A=M[1];return new GE(u.x,u.y,T+s.width+w+O,A+s.height+k+S)}(r,i):t.prototype.getBBox.call(this)},e.prototype.render=function(t,e){var n=this.attributes,r=n.width,i=n.height,a=n.x,o=void 0===a?0:a,s=n.y,u=void 0===s?0:s,c=BE(e);e.style.transform="translate(".concat(o,", ").concat(u,")"),this.renderTitle(c,r,i),this.renderItems(c,this.availableSpace),this.adjustLayout()},e}(CE);function jO(t){var e=t.width,n=t.height,r=t.renderer,i=function(t){var e,n=t.container,r=t.className,i=t.graphCanvas;if(n)return"string"==typeof n?document.getElementById(n):n;var a=jw(r,!1),o=t.width,s=t.height,u=t.containerStyle,c=function(t){var e=t.width,n=t.height,r=t.placement,i=g(t.graphCanvas.getSize(),2),a=i[0],o=i[1],s=g(Ld(r),2);return[s[0]*(a-e),s[1]*(o-n)]}(t),l=g(c,2),f=l[0],d=l[1];return Object.assign(a.style,Object.assign({position:"absolute",left:f+"px",top:d+"px",width:o+"px",height:s+"px"},u)),null===(e=i.getContainer())||void 0===e||e.appendChild(a),a}(t);return[i,new pc({width:e,height:n,container:i,renderer:r||new dv})]}var DO=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).typePrefix="__data__",r.draw=!1,r.fieldMap={node:new Map,edge:new Map,combo:new Map},r.selectedItems=[],r.bindEvents=function(){r.context.graph.on(kl.AFTER_DRAW,r.createElement)},r.changeState=function(t,e){var n=r.context.graph,i=r.typePrefix,a=ch(t,[i,"id"]),o=ch(t,[i,"style","labelText"]),s=g(a.split("__"),1)[0],u=r.fieldMap[s].get(o)||[];n.setElementState(Object.fromEntries(null==u?void 0:u.map((function(t){return[t,e]}))))},r.click=function(t){if("hover"!==r.options.trigger){var e=ch(t,[r.typePrefix,"id"]);r.selectedItems.includes(e)?(r.selectedItems=r.selectedItems.filter((function(t){return t!==e})),r.changeState(t,[])):(r.selectedItems.push(e),r.changeState(t,"selected"))}},r.mouseleave=function(t){"click"!==r.options.trigger&&(r.selectedItems=[],r.changeState(t,[]))},r.mouseenter=function(t){if("click"!==r.options.trigger){var e=ch(t,[r.typePrefix,"id"]);r.selectedItems.includes(e)?r.selectedItems=r.selectedItems.filter((function(t){return t!==e})):(r.selectedItems.push(e),r.changeState(t,"active"))}},r.setFieldMap=function(t,e,n){if(t){var i=r.fieldMap[n];if(i)if(i.has(t)){var a=i.get(t);a&&(a.push(e),i.set(t,a))}else i.set(t,[e])}},r.getEvents=function(){return{mouseenter:r.mouseenter,mouseleave:r.mouseleave,click:r.click}},r.getMarkerData=function(t,e){if(!t)return[];var n=r.context,i=n.model,a=n.element,o=i.getData(),s=o.nodes,u=o.edges,c=o.combos,l={},f=function(e){return _n(t)?t(e):t},d={node:"circle",edge:"line",combo:"rect"},h={circle:"circle",ellipse:"circle",image:"bowtie",rect:"square",star:"cross",triangle:"triangle",diamond:"diamond",cubic:"dot",line:"hyphen",polyline:"hyphen",quadratic:"hv","cubic-horizontal":"hyphen","cubic-vertical":"line"},p=function(t,e){t.forEach((function(t){var n=t.id,i=ch(t,["data",f(t)]),o=(null==a?void 0:a.getElementType(e,t))||"circle",s=function(t,e){return null==a?void 0:a.getElementComputedStyle(t,e)}(e,t),u=("edge"===e?null==s?void 0:s.stroke:null==s?void 0:s.fill)||"#1783ff";n&&i&&i.replace(/\s+/g,"")&&(r.setFieldMap(i,n,e),l[i]||(l[i]={id:"".concat(e,"__").concat(n),label:i,marker:h[o]||d[e],elementType:e,lineWidth:1,stroke:u,fill:u}))}))};switch(e){case"node":p(s,"node");break;case"edge":p(u,"edge");break;case"combo":p(c,"combo");break;default:return[]}return Object.values(l)},r.createElement=function(){if(r.draw)r.updateElement();else{var t=r.options,e=t.width,n=t.height,i=t.nodeField,a=t.edgeField,o=t.comboField,s=(t.trigger,t.position,t.container,t.containerStyle,t.className,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["width","height","nodeField","edgeField","comboField","trigger","position","container","containerStyle","className"])),u=r.getMarkerData(i,"node"),c=r.getMarkerData(a,"edge"),l=r.getMarkerData(o,"combo"),f=[].concat(M(u),M(l),M(c)),d=Object.assign({width:e,height:n,data:f,itemMarkerLineWidth:function(t){return t.lineWidth},itemMarker:function(t){return t.marker},itemMarkerStroke:function(t){return t.stroke},itemMarkerFill:function(t){return t.fill},gridCol:u.length},s,r.getEvents()),h=new RO({className:"legend",style:d});r.category=h,r.upsertCanvas().appendChild(h),r.draw=!0}},r.bindEvents(),r}return _(e,t),O(e,[{key:"update",value:function(t){Dn(e,"update",this,3)([t]),this.clear(),this.createElement()}},{key:"clear",value:function(){var t,e;null===(t=this.canvas)||void 0===t||t.destroy(),null===(e=this.container)||void 0===e||e.remove(),this.canvas=void 0,this.container=void 0,this.draw=!1}},{key:"updateElement",value:function(){var t=this;this.category&&this.category.update({itemMarkerOpacity:function(e){var n=e.id;return!t.selectedItems.length||t.selectedItems.includes(n)?1:.5},itemLabelOpacity:function(e){var n=e.id;return!t.selectedItems.length||t.selectedItems.includes(n)?1:.5}})}},{key:"upsertCanvas",value:function(){if(this.canvas)return this.canvas;var t=this.context.canvas,e=g(t.getSize(),2),n=e[0],r=e[1],i=this.options,a=i.width,o=void 0===a?n:a,s=i.height,u=void 0===s?r:s,c=i.position,l=i.container,f=i.containerStyle,d=i.className,h=g(jO({width:o,height:u,graphCanvas:t,container:l,containerStyle:f,placement:c,className:"legend"}),2),p=h[0],v=h[1];return this.container=p,d&&p.classList.add(d),this.canvas=v,this.canvas}},{key:"destroy",value:function(){this.clear(),this.context.graph.off(kl.AFTER_DRAW,this.createElement),Dn(e,"destroy",this,3)([])}}])}(Rw);DO.defaultOptions={position:"bottom",trigger:"hover",orientation:"horizontal",layout:"flex",itemSpacing:4,rowPadding:10,colPadding:10,itemMarkerSize:16,itemLabelFontSize:16,width:240,height:160};var IO=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).onDraw=function(t){var e;(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.render)||r.onRender()},r.shapes=new Map,r.landmarkMap=new Map,r.mask=null,r.isMaskDragging=!1,r.onMaskDragStart=function(t){r.mask&&(r.isMaskDragging=!0,r.mask.setPointerCapture(t.pointerId),r.mask.addEventListener("pointermove",r.onMaskDrag),r.mask.addEventListener("pointerup",r.onMaskDragEnd),r.mask.addEventListener("pointercancel",r.onMaskDragEnd))},r.onMaskDrag=function(t){if(r.mask&&r.isMaskDragging){var e=g(r.options.size,2),n=e[0],i=e[1],a=t.movementX,o=t.movementY,s=r.mask.style,u=s.left,c=s.top,l=s.width,f=s.height,d=g(r.maskBBox,4),h=d[2],p=d[3],v=parseInt(u)+a,y=parseInt(c)+o,m=parseInt(l),b=parseInt(f);v<0&&(v=0),y<0&&(y=0),v+m>n&&(v=zO(n-m,0)),y+b>i&&(y=zO(i-b,0)),m<h&&(a>0?(v=zO(v-a,0),m=FO(m+a,n)):a<0&&(m=FO(m-a,n))),b<p&&(o>0?(y=zO(y-o,0),b=FO(b+o,i)):o<0&&(b=FO(b-o,i))),Object.assign(r.mask.style,{left:v+"px",top:y+"px",width:m+"px",height:b+"px"});var x=parseInt(u)-v,w=parseInt(c)-y;if(0!==x||0!==w){var k=r.context.canvas.getCamera().getZoom()/r.canvas.getCamera().getZoom();r.context.graph.translateBy([x*k,w*k],!1)}}},r.onMaskDragEnd=function(t){r.mask&&(r.isMaskDragging=!1,r.mask.releasePointerCapture(t.pointerId),r.mask.removeEventListener("pointermove",r.onMaskDrag),r.mask.removeEventListener("pointerup",r.onMaskDragEnd),r.mask.removeEventListener("pointercancel",r.onMaskDragEnd))},r.onTransform=Ql((function(){r.isMaskDragging||(r.updateMask(),r.setCamera())}),32,{leading:!0}),r.setOnRender(),r.bindEvents(),r}return _(e,t),O(e,[{key:"update",value:function(t){this.unbindEvents(),Dn(e,"update",this,3)([t]),"delay"in t&&this.setOnRender(),this.bindEvents()}},{key:"setOnRender",value:function(){var t=this;this.onRender=Gg((function(){t.renderMinimap(),t.renderMask()}),this.options.delay)}},{key:"bindEvents",value:function(){var t=this.context.graph;t.on(kl.AFTER_DRAW,this.onDraw),t.on(kl.AFTER_RENDER,this.onRender),t.on(kl.AFTER_TRANSFORM,this.onTransform)}},{key:"unbindEvents",value:function(){var t=this.context.graph;t.off(kl.AFTER_DRAW,this.onDraw),t.off(kl.AFTER_RENDER,this.onRender),t.off(kl.AFTER_TRANSFORM,this.onTransform)}},{key:"renderMinimap",value:function(){var t=this.getElements(),e=this.initCanvas();this.setShapes(e,t)}},{key:"getElements",value:function(){var t=this.options.filter,e=this.context.model.getData();if(!t)return e;var n=e.nodes,r=e.edges,i=e.combos;return{nodes:n.filter((function(e){return t(Kf(e),"node")})),edges:r.filter((function(e){return t(Kf(e),"edge")})),combos:i.filter((function(e){return t(Kf(e),"combo")}))}}},{key:"setShapes",value:function(t,e){var n=this,r=e.nodes,i=e.edges,a=e.combos,o=this.options.shape,s=this.context.element;if("key"===o){var u=new Set,c=function(e){var r=Kf(e);u.add(r);var i=s.getElement(r);if(i){var a=i.getShape("key"),o=n.shapes.get(r)||a.cloneNode();o.setPosition(a.getPosition()),i.style.zIndex&&(o.style.zIndex=i.style.zIndex),o.id=i.id,n.shapes.has(r)?Object.entries(a.attributes).forEach((function(t){var e=g(t,2),n=e[0],r=e[1];o.style[n]!==r&&(o.style[n]=r)})):(t.appendChild(o),n.shapes.set(r,o))}};return i.forEach(c),a.forEach(c),r.forEach(c),void this.shapes.forEach((function(e,r){u.has(r)||(t.removeChild(e),n.shapes.delete(r))}))}var l=function(t,e){var n=s.getElement(t).getPosition();return e.setPosition(n),e};t.removeChildren(),i.forEach((function(e){return t.appendChild(o(Kf(e),"edge"))})),a.forEach((function(e){t.appendChild(l(Kf(e),o(Kf(e),"combo")))})),r.forEach((function(e){t.appendChild(l(Kf(e),o(Kf(e),"node")))}))}},{key:"initCanvas",value:function(){var t=this.options,e=t.renderer,n=g(t.size,2),r=n[0],i=n[1];if(this.canvas){var a=this.canvas.getConfig(),o=a.width,s=a.height;r===o&&i===s||this.canvas.resize(r,i),e&&this.canvas.setRenderer(e)}else{var u=this.options,c=u.className,l=g(jO({renderer:e,width:r,height:i,placement:u.position,className:"minimap",container:u.container,containerStyle:u.containerStyle,graphCanvas:this.context.canvas}),2),f=l[0],d=l[1];c&&f.classList.add(c),this.container=f,this.canvas=d}return this.setCamera(),this.canvas}},{key:"createLandmark",value:function(t,e,n){var r="".concat(t.join(","),"-").concat(e.join(","),"-").concat(n);if(this.landmarkMap.has(r))return this.landmarkMap.get(r);var i=this.canvas.getCamera().createLandmark(r,{position:t,focalPoint:e,zoom:n});return this.landmarkMap.set(r,i),i}},{key:"setCamera",value:function(){var t,e=this.context.canvas,n=null===(t=this.canvas)||void 0===t?void 0:t.getCamera();if(n){var r=this.options,i=g(r.size,2),a=i[0],o=i[1],s=g(rf(r.padding),4),u=s[0],c=s[1],l=s[2],f=s[3],d=e.getBounds("elements"),h=d.min,p=d.max,v=d.center,y=(a-f-c)/(p[0]-h[0]),m=(o-u-l)/(p[1]-h[1]),b=Math.min(y,m),x=this.createLandmark(v,v,b);n.gotoLandmark(x,0)}}},{key:"maskBBox",get:function(){var t=this.context.canvas,e=t.getSize(),n=t.getCanvasByViewport([0,0]),r=t.getCanvasByViewport(e),i=this.canvas.canvas2Viewport(Fd(n)),a=this.canvas.canvas2Viewport(Fd(r)),o=a.x-i.x,s=a.y-i.y;return[i.x,i.y,o,s]}},{key:"calculateMaskBBox",value:function(){var t=g(this.options.size,2),e=t[0],n=t[1],r=g(this.maskBBox,4),i=r[0],a=r[1],o=r[2],s=r[3];return i<0&&(o=FO(o+i,e),i=0),a<0&&(s=FO(s+a,n),a=0),i+o>e&&(o=zO(e-i,0)),a+s>n&&(s=zO(n-a,0)),[FO(i,e),FO(a,n),zO(o,0),zO(s,0)]}},{key:"renderMask",value:function(){var t=this.options.maskStyle;this.mask||(this.mask=document.createElement("div"),this.mask.addEventListener("pointerdown",this.onMaskDragStart),this.mask.draggable=!0,this.mask.addEventListener("dragstart",(function(t){return t.preventDefault&&t.preventDefault()}))),this.container.appendChild(this.mask),Object.assign(this.mask.style,Object.assign(Object.assign({},t),{cursor:"move",position:"absolute",pointerEvents:"auto"})),this.updateMask()}},{key:"updateMask",value:function(){if(this.mask){var t=g(this.calculateMaskBBox(),4),e=t[0],n=t[1],r=t[2],i=t[3];Object.assign(this.mask.style,{top:n+"px",left:e+"px",width:r+"px",height:i+"px"})}}},{key:"destroy",value:function(){var t;this.unbindEvents(),this.canvas.destroy(),null===(t=this.mask)||void 0===t||t.remove(),Dn(e,"destroy",this,3)([])}}])}(Rw);IO.defaultOptions={size:[240,160],shape:"key",padding:10,position:"right-bottom",maskStyle:{border:"1px solid #ddd",background:"rgba(0, 0, 0, 0.1)"},containerStyle:{border:"1px solid #ddd",background:"#fff"},delay:128};var FO=function(t,e){return Math.min(t,e)},zO=function(t,e){return Math.max(t,e)},BO=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},GO={x1:0,y1:0,x2:0,y2:0,visibility:"hidden"},WO=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).initSnapline=function(){var t=r.context.canvas.getLayer("transient");r.horizontalLine||(r.horizontalLine=t.appendChild(new Yu({style:Object.assign(Object.assign({},GO),r.options.horizontalLineStyle)}))),r.verticalLine||(r.verticalLine=t.appendChild(new Yu({style:Object.assign(Object.assign({},GO),r.options.verticalLineStyle)})))},r.isHorizontalSticking=!1,r.isVerticalSticking=!1,r.enableStick=!0,r.autoSnapToLine=function(t,e,n){return BO(r,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h,p,v,y,m;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=n.verticalX,a=n.horizontalY,o=this.options.tolerance,s=g(e.min,2),u=s[0],c=s[1],l=g(e.max,2),f=l[0],d=l[1],h=g(e.center,2),p=h[0],v=h[1],y=0,m=0,null!==i&&(VO(f,i)<o&&(y=i-f),VO(u,i)<o&&(y=i-u),VO(p,i)<o&&(y=i-p),0!==y&&(this.isVerticalSticking=!0)),null!==a&&(VO(d,a)<o&&(m=a-d),VO(c,a)<o&&(m=a-c),VO(v,a)<o&&(m=a-v),0!==m&&(this.isHorizontalSticking=!0)),0===y&&0===m){r.next=10;break}return r.next=10,this.context.graph.translateElementBy(b({},t,[y,m]),!1);case 10:case"end":return r.stop()}}),r,this)})))},r.enableSnap=function(t){var e=t.target,n=.5;if(r.isHorizontalSticking||r.isVerticalSticking){var i=g(r.getDelta(t),2),a=i[0],o=i[1];if(r.isHorizontalSticking&&r.isVerticalSticking&&Math.abs(a)<=n&&Math.abs(o)<=n)return r.context.graph.translateElementBy(b({},e.id,[-a,-o]),!1),!1;if(r.isHorizontalSticking&&Math.abs(o)<=n)return r.context.graph.translateElementBy(b({},e.id,[0,-o]),!1),!1;if(r.isVerticalSticking&&Math.abs(a)<=n)return r.context.graph.translateElementBy(b({},e.id,[-a,0]),!1),!1;r.isHorizontalSticking=!1,r.isVerticalSticking=!1,r.enableStick=!1,setTimeout((function(){r.enableStick=!0}),200)}return r.enableStick},r.calcSnaplineMetadata=function(t,e){var n=r.options,i=n.tolerance,a=n.shape,o=g(e.min,2),s=o[0],u=o[1],c=g(e.max,2),l=c[0],f=c[1],d=g(e.center,2),h=d[0],p=d[1],v=null,y=null,m=null,b=null,x=null,w=null;return r.getNodes().some((function(e){if(pl(t.id,e.id))return!1;var n=HO(e,a).getRenderBounds(),r=g(n.min,2),o=r[0],c=r[1],d=g(n.max,2),k=d[0],E=d[1],O=g(n.center,2),S=O[0],M=O[1];return null===v&&(VO(S,h)<i?v=S:VO(o,s)<i||VO(o,l)<i?v=o:(VO(k,l)<i||VO(k,s)<i)&&(v=k),null!==v&&(y=Math.min(c,u),m=Math.max(E,f))),null===b&&(VO(M,p)<i?b=M:VO(c,u)<i||VO(c,f)<i?b=c:(VO(E,f)<i||VO(E,u)<i)&&(b=E),null!==b&&(x=Math.min(o,s),w=Math.max(k,l))),null!==v&&null!==b})),{verticalX:v,verticalMinY:y,verticalMaxY:m,horizontalY:b,horizontalMinX:x,horizontalMaxX:w}},r.onDragStart=function(){r.initSnapline()},r.onDrag=function(t){return BO(r,void 0,void 0,Jn().mark((function e(){var n,r,i;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target,!this.options.autoSnap){e.next=5;break}if(this.enableSnap(t)){e.next=5;break}return e.abrupt("return");case 5:if(r=HO(n,this.options.shape).getRenderBounds(),i=this.calcSnaplineMetadata(n,r),this.hideSnapline(),null===i.verticalX&&null===i.horizontalY||this.updateSnapline(i),!this.options.autoSnap){e.next=12;break}return e.next=12,this.autoSnapToLine(n.id,r,i);case 12:case"end":return e.stop()}}),e,this)})))},r.onDragEnd=function(){r.hideSnapline()},r.bindEvents(),r}return _(e,t),O(e,[{key:"getNodes",value:function(){var t,e=this,n=this.options.filter,r=((null===(t=this.context.element)||void 0===t?void 0:t.getNodes())||[]).filter((function(t){var n;return"hidden"!==ch(t,["style","visibility"])&&(null===(n=e.context.viewport)||void 0===n?void 0:n.isInViewport(t.getRenderBounds()))}));return n?r.filter((function(t){return n(t)})):r}},{key:"hideSnapline",value:function(){this.horizontalLine.style.visibility="hidden",this.verticalLine.style.visibility="hidden"}},{key:"getLineWidth",value:function(t){return+(this.options["".concat(t,"LineStyle")].lineWidth||GO.lineWidth||1)/this.context.graph.getZoom()}},{key:"updateSnapline",value:function(t){var e=t.verticalX,n=t.verticalMinY,r=t.verticalMaxY,i=t.horizontalY,a=t.horizontalMinX,o=t.horizontalMaxX,s=g(this.context.canvas.getSize(),2),u=s[0],c=s[1],l=this.options.offset;null!==i?Object.assign(this.horizontalLine.style,{x1:l===1/0?0:a-l,y1:i,x2:l===1/0?u:o+l,y2:i,visibility:"visible",lineWidth:this.getLineWidth("horizontal")}):this.horizontalLine.style.visibility="hidden",null!==e?Object.assign(this.verticalLine.style,{x1:e,y1:l===1/0?0:n-l,x2:e,y2:l===1/0?c:r+l,visibility:"visible",lineWidth:this.getLineWidth("vertical")}):this.verticalLine.style.visibility="hidden"}},{key:"getDelta",value:function(t){var e=this.context.graph.getZoom();return xd([t.dx,t.dy],e)}},{key:"bindEvents",value:function(){return BO(this,void 0,void 0,Jn().mark((function t(){var e;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(e=this.context.graph).on(Ol.DRAG_START,this.onDragStart),e.on(Ol.DRAG,this.onDrag),e.on(Ol.DRAG_END,this.onDragEnd);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"unbindEvents",value:function(){var t=this.context.graph;t.off(Ol.DRAG_START,this.onDragStart),t.off(Ol.DRAG,this.onDrag),t.off(Ol.DRAG_END,this.onDragEnd)}},{key:"destroyElements",value:function(){var t,e;null===(t=this.horizontalLine)||void 0===t||t.destroy(),null===(e=this.verticalLine)||void 0===e||e.destroy()}},{key:"destroy",value:function(){this.destroyElements(),this.unbindEvents(),Dn(e,"destroy",this,3)([])}}])}(Rw);WO.defaultOptions={tolerance:5,offset:20,autoSnap:!0,shape:"key",verticalLineStyle:{stroke:"#1783FF"},horizontalLineStyle:{stroke:"#1783FF"},filter:function(){return!0}};var VO=function(t,e){return Math.abs(t-e)},HO=function(t,e){return"function"==typeof e?e(t):t.getShape(e)};function YO(t,e){var n={YYYY:t.getFullYear(),MM:t.getMonth()+1,DD:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()},r=e;return Object.keys(n).forEach((function(t){var e=n[t];r=r.replace(t,"YYYY"===t?"".concat(e):"".concat(e).padStart(2,"0"))})),r}var UO={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new qu({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},qO=(vd({},UO,{style:{type:"arc"}}),vd({},UO,{style:{}}),WE({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"));function XO(t,e){return[t[0]*e,t[1]*e]}function KO(t,e){return[t[0]+e[0],t[1]+e[1]]}function $O(t,e){return[t[0]-e[0],t[1]-e[1]]}function ZO(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]}function QO(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1])]}function JO(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function tS(t){if(0===t[0]&&0===t[1])return[0,0];var e=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));return[t[0]/e,t[1]/e]}function eS(t){return t*Math.PI/180}function nS(t){return Number((180*t/Math.PI).toPrecision(5))}function rS(t,e){return t.style.opacity||(t.style.opacity=1),eO(t,{opacity:0},e)}var iS=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function aS(t){return iS.includes(t)}function oS(t){var e={};for(var n in t)aS(n)&&(e[n]=t[n]);return e}var sS=WE({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function uS(t){return t.reduce((function(t,e,n){return t.push(De([0===n?"M":"L"],je(e),!1)),t}),[])}function cS(t,e,n){return"surround"===e.type?function(t,e,n){var r=e.connect,i=void 0===r?"line":r,a=e.center;if("line"===i)return uS(t);if(!a)return[];var o=JO(t[0],a),s=n?0:1;return t.reduce((function(t,e,n){return 0===n?t.push(De(["M"],je(e),!1)):t.push(De(["A",o,o,0,0,s],je(e),!1)),t}),[])}(t,e,n):uS(t)}function lS(t,e,n){var r=n.type,i=n.connect,a=n.center,o=n.closed?[["Z"]]:[],s=je([cS(t,n),cS(e.slice().reverse(),n,!0)],2),u=s[0],c=s[1],l=je([t[0],e.slice(-1)[0]],2),f=l[0],d=l[1],h=function(t,e){return[u,t,c,e,o].flat()};if("line"===i||"surround"===r)return h([De(["L"],je(d),!1)],[De(["L"],je(f),!1)]);if(!a)throw new Error("Arc grid need to specified center");var p=je([JO(d,a),JO(f,a)],2),v=p[0],g=p[1];return h([De(["A",v,v,0,0,1],je(d),!1),De(["L"],je(d),!1)],[De(["A",g,g,0,0,0],je(f),!1),De(["L"],je(f),!1)])}var fS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ne(e,t),e.prototype.render=function(t,e){t.type,t.center,t.areaFill,t.closed;var n=_e(t,["type","center","areaFill","closed"]),r=function(t){var e=t.data,n=void 0===e?[]:e;return t.closed?n.map((function(t){var e=t.points,n=je(e,1)[0];return Ce(Ce({},t),{points:De(De([],je(e),!1),[n],!1)})})):n}(t),i=BE(e).maybeAppendByClassName(sS.lineGroup,"g"),a=BE(e).maybeAppendByClassName(sS.regionGroup,"g"),o=function(t,e,n,r){var i=n.animate,a=n.isBillboard,o=e.map((function(t,e){return{id:t.id||"grid-line-".concat(e),d:cS(t.points,n)}}));return t.selectAll(sS.line.class).data(o,(function(t){return t.id})).join((function(t){return t.append("path").each((function(t,e){var n=$E(oS(Ce({d:t.d},r)),[t,e,o]);this.attr(Ce({class:sS.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:a},n))}))}),(function(t){return t.transition((function(t,e){return eO(this,$E(oS(Ce({d:t.d},r)),[t,e,o]),i.update)}))}),(function(t){return t.transition((function(){var t=this,e=rS(this,i.exit);return QE(e,(function(){return t.remove()})),e}))})).transitions()}(i,r,t,n),s=function(t,e,n){var r=n.animate,i=n.connect,a=n.areaFill;if(e.length<2||!a||!i)return[];for(var o=Array.isArray(a)?a:[a,"transparent"],s=function(t){return o[t%o.length]},u=[],c=0;c<e.length-1;c++){var l=je([e[c].points,e[c+1].points],2),f=lS(l[0],l[1],n);u.push({d:f,fill:s(c)})}return t.selectAll(sS.region.class).data(u,(function(t,e){return e})).join((function(t){return t.append("path").each((function(t,e){var n=$E(t,[t,e,u]);this.attr(n)})).attr("className",sS.region.name)}),(function(t){return t.transition((function(t,e){return eO(this,$E(t,[t,e,u]),r.update)}))}),(function(t){return t.transition((function(){var t=this,e=rS(this,r.exit);return QE(e,(function(){return t.remove()})),e}))})).transitions()}(a,r,t);return De(De([],je(o),!1),je(s),!1)},e}(CE);function dS(t,e){return"number"==typeof t&&"number"==typeof e?function(t,e){return function(n){return t*(1-n)+e*n}}(t,e):Array.isArray(t)&&Array.isArray(e)?function(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0;return function(i){var a=new Array(r),o=new Array(n),s=0;for(s=0;s<r;++s)a[s]=dS(t[s],e[s]);for(;s<n;++s)o[s]=e[s];for(s=0;s<r;++s)o[s]=a[s](i);return o}}(t,e):"object"==typeof t&&"object"==typeof e?function(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n={},r={};return Object.entries(e).forEach((function(e){var i=je(e,2),a=i[0],o=i[1];a in t?n[a]=dS(t[a],o):r[a]=o})),function(t){return Object.entries(n).forEach((function(e){var n=je(e,2),i=n[0],a=n[1];return r[i]=a(t)})),r}}(t,e):function(e){return t}}function hS(t,e){var n={},r=Array.isArray(e)?e:[e];for(var i in t)r.includes(i)||(n[i]=t[i]);return n}function pS(t,e){return Object.fromEntries(Object.entries(t).map((function(t){var n=je(t,2);return[n[0],$E(n[1],e)]})))}function vS(t,e){return e&&_n(e)?t.filter(e):t}function gS(t,e){var n=e.startAngle;return(e.endAngle-n)*t+n}function yS(t,e){if("linear"===e.type){var n=je(e.startPos,2),r=n[0],i=n[1],a=je(e.endPos,2),o=je([a[0]-r,a[1]-i],2);return tS([o[0],o[1]])}var s=eS(gS(t,e));return[-Math.sin(s),Math.cos(s)]}function mS(t,e,n){return function(t,e){return e?[t[1],-t[0]]:[-t[1],t[0]]}(yS(t,n),"positive"!==e)}function bS(t,e){return mS(t,e.labelDirection,e)}function xS(t,e){return"linear"===e.type?function(t,e){var n=je(e.startPos,2),r=n[0],i=n[1],a=je(e.endPos,2),o=je([a[0]-r,a[1]-i],2);return[r+o[0]*t,i+o[1]*t]}(t,e):function(t,e){var n=e.radius,r=je(e.center,2),i=r[0],a=r[1],o=eS(gS(t,e));return[i+n*Math.cos(o),a+n*Math.sin(o)]}(t,e)}function wS(t){return 0===yS(0,t)[1]}function kS(t){return 0===yS(0,t)[0]}function ES(t,e){return e-t===360}function OS(t,e,n,r,i){var a=e-t,o=je([i,i],2),s=o[0],u=o[1],c=je([eS(t),eS(e)],2),l=c[0],f=c[1],d=function(t){return[n+i*Math.cos(t),r+i*Math.sin(t)]},h=je(d(l),2),p=h[0],v=h[1],g=je(d(f),2),y=g[0],m=g[1];if(ES(t,e)){var b=je(d((f+l)/2),2);return[["M",p,v],["A",s,u,0,1,0,b[0],b[1]],["A",s,u,0,1,0,y,m]]}var x=a>180?1:0,w=t>e?0:1;return"M".concat(p,",").concat(v,",A").concat(s,",").concat(u,",0,").concat(x,",").concat(w,",").concat(y,",").concat(m)}function SS(t,e,n,r){var i=e.startAngle,a=e.endAngle,o=e.center,s=e.radius;return t.selectAll(qO.line.class).data([{d:OS.apply(void 0,De(De([i,a],je(o),!1),[s],!1))}],(function(t,e){return e})).join((function(t){return t.append("path").attr("className",qO.line.name).styles(e).styles({d:function(t){return t.d}})}),(function(t){return t.transition((function(){var t=this,e=function(t,e,n,r){if(!r)return t.attr("__keyframe_data__",n),null;var i=r.duration,a=void 0===i?0:i,o=dS(e,n),s=Math.ceil(+a/16),u=new Array(s).fill(0).map((function(t,e,n){return{__keyframe_data__:o(e/(n.length-1))}}));return t.animate(u,Ce({fill:"both"},r))}(this,function(t){var e=t.attributes,n=e.startAngle,r=e.endAngle,i=e.center,a=e.radius;return De(De([n,r],je(i),!1),[a],!1)}(this),De(De([i,a],je(o),!1),[s],!1),r.update);if(e){var n=function(){var e=ch(t.attributes,"__keyframe_data__");t.style.d=OS.apply(void 0,De([],je(e),!1))};e.onframe=n,e.onfinish=n}return e})).styles(e)}),(function(t){return t.remove()})).styles(n).transitions()}function MS(t){var e=je(t,2),n=je(e[0],2),r=n[0],i=n[1],a=je(e[1],2);return{x1:r,y1:i,x2:a[0],y2:a[1]}}function TS(t,e,n){var r,i=e.type,a=jE(e,"line");return r="linear"===i?function(t,e,n,r){var i=e.showTrunc,a=e.startPos,o=e.endPos,s=e.truncRange,u=e.lineExtension,c=je([a,o],2),l=je(c[0],2),f=l[0],d=l[1],h=je(c[1],2),p=h[0],v=h[1],g=je(u?function(t,e,n){void 0===n&&(n=[0,0]);var r=je([t,e,n],3),i=je(r[0],2),a=i[0],o=i[1],s=je(r[1],2),u=s[0],c=s[1],l=je(r[2],2),f=l[0],d=l[1],h=je([u-a,c-o],2),p=h[0],v=h[1],g=Math.sqrt(Math.pow(p,2)+Math.pow(v,2)),y=je([-f/g,d/g],2),m=y[0],b=y[1];return[m*p,m*v,b*p,b*v]}(a,o,u):new Array(4).fill(0),4),y=g[0],m=g[1],b=g[2],x=g[3],w=function(e){return t.selectAll(qO.line.class).data(e,(function(t,e){return e})).join((function(t){return t.append("line").attr("className",(function(t){return"".concat(qO.line.name," ").concat(t.className)})).styles(n).transition((function(t){return eO(this,MS(t.line),!1)}))}),(function(t){return t.styles(n).transition((function(t){return eO(this,MS(t.line),r.update)}))}),(function(t){return t.remove()})).transitions()};if(!i||!s)return w([{line:[[f+y,d+m],[p+b,v+x]],className:qO.line.name}]);var k=je(s,2),E=k[0],O=k[1],S=p-f,M=v-d,T=je([f+S*E,d+M*E],2),A=T[0],P=T[1],N=je([f+S*O,d+M*O],2),C=N[0],_=N[1],L=w([{line:[[f+y,d+m],[A,P]],className:qO.lineFirst.name},{line:[[C,_],[p+b,v+x]],className:qO.lineSecond.name}]);return function(t,e){e.truncRange,e.truncShape,e.lineExtension}(0,e),L}(t,e,hS(a,"arrow"),n):SS(t,e,hS(a,"arrow"),n),function(t,e,n,r){var i,a=n.showArrow,o=n.showTrunc,s=n.lineArrow,u=n.lineArrowOffset,c=n.lineArrowSize;if(i="arc"===e?t.select(qO.line.class):o?t.select(qO.lineSecond.class):t.select(qO.line.class),!a||!s||"arc"===n.type&&ES(n.startAngle,n.endAngle)){var l=i.node();l&&(l.style.markerEnd=void 0)}else{var f=gO(s);f.attr(r),nO(f,c,!0),i.style("markerEnd",f).style("markerEndOffset",-u)}}(t,i,e,a),r}function AS(t){var e=t.type,n=t.gridCenter;return"linear"===e?n:n||t.center}function PS(t,e,n,r){var i=jE(n,"grid"),a=i.type,o=i.areaFill,s=AS(n),u=vS(e,n.gridFilter),c="segment"===a?function(t,e){var n=e.gridLength;return t.map((function(t,r){var i=t.value,a=je(xS(i,e),2),o=a[0],s=a[1],u=je(XO(function(t,e){return mS(t,e.gridDirection,e)}(i,e),n),2);return{id:r,points:[[o,s],[o+u[0],s+u[1]]]}}))}(u,n):function(t,e){var n=e.gridControlAngles,r=AS(e);if(!r)throw new Error("grid center is not provide");if(t.length<2)throw new Error("Invalid grid data");if(!n||0===n.length)throw new Error("Invalid gridControlAngles");var i=je(r,2),a=i[0],o=i[1];return t.map((function(t,r){var i=je(xS(t.value,e),2),s=i[0],u=i[1],c=je([s-a,u-o],2),l=c[0],f=c[1],d=[];return n.forEach((function(t){var e=eS(t),n=je([Math.cos(e),Math.sin(e)],2),r=n[0],i=n[1],s=l*r-f*i+a,u=l*i+f*r+o;d.push([s,u])})),{points:d,id:r}}))}(u,n),l=Ce(Ce({},i),{center:s,areaFill:_n(o)?u.map((function(t,e){return $E(o,[t,e,u])})):o,animate:r,data:c});return t.selectAll(qO.grid.class).data([1]).join((function(t){return t.append((function(){return new fS({style:l})})).attr("className",qO.grid.name)}),(function(t){return t.transition((function(){return this.update(l)}))}),(function(t){return t.remove()})).transitions()}function NS(t,e,n,r,i){return void 0===r&&(r=!0),void 0===i&&(i=!1),!!(r&&t===e||i&&t===n)||t>e&&t<n}function CS(t,e){if(e)try{var n=e.replace(/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,(function(e,n,r){return"translate(".concat(function(t,e,n){var r=t.getBBox(),i=r.width,a=r.height,o=je([e,n].map((function(t,e){var n;return t.includes("%")?parseFloat((null===(n=t.match(/[+-]?([0-9]*[.])?[0-9]+/))||void 0===n?void 0:n[0])||"0")/100*(0===e?i:a):t})),2);return[o[0],o[1]]}(t,n,r),")")}));t.attr("transform",n)}catch(t){}}var _S=function(t){return void 0!==t&&null!=t&&!Number.isNaN(t)},LS=function(){function t(t,e,n,r){this.set(t,e,n,r)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),t.prototype.rotatedPoints=function(t,e,n){var r=this,i=r.x1,a=r.y1,o=r.x2,s=r.y2,u=Math.cos(t),c=Math.sin(t),l=e-e*u+n*c,f=n-e*c-n*u;return[[u*i-c*s+l,c*i+u*s+f],[u*o-c*s+l,c*o+u*s+f],[u*i-c*a+l,c*i+u*a+f],[u*o-c*a+l,c*o+u*a+f]]},t.prototype.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},t.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE},t}();function RS(t,e){var n=t.getEulerAngles()||0;t.setEulerAngles(0);var r=t.getBounds(),i=je(r.min,2),a=i[0],o=i[1],s=je(r.max,2),u=s[0],c=s[1],l=t.getBBox(),f=l.width,d=l.height,h=0,p=0,v=a,g=o,y=bO(t);if(y){d-=1.5;var m=y.style.textAlign,b=y.style.textBaseline;"center"===m?v=(a+u)/2:"right"!==m&&"end"!==m||(v=u),"middle"===b?g=(o+c)/2:"bottom"===b&&(g=c)}var x=je(VE(e),4),w=x[0],k=void 0===w?0:w,E=x[1],O=void 0===E?0:E,S=x[2],M=void 0===S?k:S,T=x[3],A=new LS((h+=a)-(void 0===T?O:T),(p+=o)-k,h+f+O,p+d+M);return t.setEulerAngles(n),A.rotatedPoints(eS(n),v,g)}function jS(t,e){return e[0]<=Math.max(t[0][0],t[1][0])&&e[0]<=Math.min(t[0][0],t[1][0])&&e[1]<=Math.max(t[0][1],t[1][1])&&e[1]<=Math.min(t[0][1],t[1][1])}function DS(t,e,n){var r=(e[1]-t[1])*(n[0]-e[0])-(e[0]-t[0])*(n[1]-e[1]);return 0===r?0:r<0?2:1}function IS(t,e){return[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]].some((function(t){return function(t,e){var n=je(t,4),r=n[0],i=n[1],a=n[2],o=n[3],s=je(e,4),u=s[0],c=s[1],l=a-r,f=o-i,d=s[2]-u,h=s[3]-c,p=l*h-d*f;if(0===p)return!1;var v=p>0,g=r-u,y=i-c,m=l*y-f*g;if(m<0===v)return!1;var b=d*y-h*g;return b<0!==v&&m>p!==v&&b>p!==v}(e,t)}))}function FS(t,e,n){var r,i,a,o,s=e.crossPadding,u=new Set,c=null,l=function(t,e){var n=t.type,r=t.labelDirection,i=t.crossSize;if(!i)return!1;if("arc"===n){var a=t.center,o=t.radius,s=je(a,2),u=s[0],c=s[1],l="negative"===r?0:i,f=-o-l,d=o+l,h=je(VE(e),4),p=h[0],v=h[1],g=h[2],y=h[3];return new LS(u+f-y,c+f-p,u+d+v,c+d+g)}var m=je(t.startPos,2),b=m[0],x=m[1],w=je(t.endPos,2),k=w[0],E=w[1],O=je(kS(t)?[-e,0,e,0]:[0,e,0,-e],4),S=O[0],M=O[1],T=O[2],A=O[3],P=XO(bS(0,t),i),N=new LS(b,x,k,E);return N.x1+=A,N.y1+=S,N.x2+=M+P[0],N.y2+=T+P[1],N}(e,s),f=function(t){return!l||function(t,e){var n,r=t.x1,i=t.x2,a=t.y1,o=t.y2;return n=[[r,a],[i,a],[i,o],[r,o]],RS(e,void 0).every((function(t){return function(t,e){var n=t.length;if(n<3)return!1;var r,i,a,o,s,u,c=[e,[9999,e[1]]],l=0,f=0;do{var d=[t[f],t[(f+1)%n]];if(a=DS((r=d)[0],r[1],(i=c)[0]),o=DS(r[0],r[1],i[1]),s=DS(i[0],i[1],r[0]),u=DS(i[0],i[1],r[1]),a!==o&&s!==u||0===a&&jS(r,i[0])||0===o&&jS(r,i[1])||0===s&&jS(i,r[0])||0===u&&jS(i,r[1])){if(0===DS(d[0],e,d[1]))return jS(d,e);l++}f=(f+1)%n}while(0!==f);return!!(1&l)}(n,t)}))}(l,t)};try{for(var d=Re(t),h=d.next();!h.done;h=d.next()){var p=h.value;f(p)?c&&(o=p,(a=c)&&a.firstChild&&function(t,e,n){var r,i,a=RS(t,n).flat(1),o=RS(e,n).flat(1),s=[[a[0],a[1],a[2],a[3]],[a[0],a[1],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[2],a[3],a[6],a[7]]];try{for(var u=Re(s),c=u.next();!c.done;c=u.next())if(IS(o,c.value))return!0}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return!1}(a.firstChild,o.firstChild,VE(n)))?(u.add(c),u.add(p)):c=p:u.add(p)}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return Array.from(u)}function zS(t,e){return void 0===e&&(e={}),Me(t)?0:"number"==typeof t?t:Math.floor(yO(t,e))}var BS=function(t,e){var n=e.seq,r=void 0===n?2:n;return t.filter((function(t,e){return!(e%r&&(OE(t),1))}))},GS=new Map([["hide",function(t,e,n,r){var i=t.length,a=e.keepHeader,o=e.keepTail;if(!(i<=1||2===i&&a&&o)){var s,u,c,l=BS,f=function(t){return t.forEach(r.show),t},d=2,h=t.slice(),p=t.slice(),v=Math.min.apply(Math,De([1],je(t.map((function(t){return t.getBBox().width}))),!1));if("linear"===n.type&&(wS(n)||kS(n))){var g=pO(t[0]).left,y=pO(t[i-1]).right,m=Math.abs(y-g)||1;d=Math.max(Math.floor(i*v/m),d)}for(a&&(s=h.splice(0,1)[0]),o&&(u=h.splice(-1,1)[0],h.reverse()),f(h);d<t.length&&FS((c=u?De(De([u],je(p),!1),[s],!1):De([s],je(p),!1),c.filter(_S)),n,null==e?void 0:e.margin).length;)(u&&!s&&d%2==0||u&&s)&&h.splice(0,1).forEach(r.hide),p=l(f(h),{seq:d}),d++}}],["rotate",function(t,e,n,r){var i,a,o=e.optionalAngles,s=void 0===o?[0,45,90]:o,u=e.margin,c=e.recoverWhenFailed,l=void 0===c||c,f=t.map((function(t){return t.getLocalEulerAngles()})),d=function(e){return t.forEach((function(t,n){var i=Array.isArray(e)?e[n]:e;r.rotate(t,+i)}))};try{for(var h=Re(s),p=h.next();!p.done;p=h.next())if(d(p.value),FS(t,n,u).length<1)return}catch(t){i={error:t}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}l&&d(f)}],["ellipsis",function(t,e,n,r){if(!(t.length<=1)){var i=e.suffix,a=void 0===i?"...":i,o=e.minLength,s=e.maxLength,u=void 0===s?1/0:s,c=e.step,l=void 0===c?" ":c,f=e.margin,d=void 0===f?[0,0,0,0]:f,h=mO(r.getTextShape(t[0])),p=zS(l,h),v=o?zS(o,h):p,g=zS(u,h);(Me(g)||g===1/0)&&(g=Math.max.apply(null,t.map((function(t){return t.getBBox().width}))));for(var y=t.slice(),m=je(d,4),b=(m[0],m[1],m[2],m[3],function(e){if(y.forEach((function(t){r.ellipsis(r.getTextShape(t),e,a)})),(y=FS(t,n,d)).length<1)return{value:void 0}}),x=g;x>v+p;x-=p){var w=b(x);if("object"==typeof w)return w.value}}}],["wrap",function(t,e,n,r){var i=e.wordWrapWidth,a=void 0===i?50:i,o=e.maxLines,s=void 0===o?3:o,u=e.recoverWhenFailed,c=void 0===u||u,l=e.margin,f=void 0===l?[0,0,0,0]:l,d=t.map((function(t){return t.attr("maxLines")||1})),h=Math.min.apply(Math,De([],je(d),!1)),p=function(t){var e=t.type,n=t.labelDirection;return"linear"===e&&wS(t)?"negative"===n?"bottom":"top":"middle"}(n),v=function(e){return t.forEach((function(t,n){var i=Array.isArray(e)?e[n]:e;r.wrap(t,a,i,p)}))};if(!(h>s)){for(var g=h;g<=s;g++)if(v(g),FS(t,n,f).length<1)return;c&&v(d)}}]]);function WS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce((function(t,e){return t*("positive"===e?-1:1)}),1)}function VS(t){for(var e=t;e<0;)e+=360;return Math.round(e%360)}function HS(t,e){var n=je(t,2),r=n[0],i=n[1],a=je(e,2),o=a[0],s=a[1],u=je([r*o+i*s,r*s-i*o],2),c=u[0],l=u[1];return Math.atan2(l,c)}function YS(t,e,n){var r=n.type,i=n.labelAlign,a=bS(t,n),o=VS(e),s=VS(nS(HS([1,0],a))),u="center",c="middle";return"linear"===r?[90,270].includes(s)&&0===o?(u="center",c=1===a[1]?"top":"bottom"):s%180||![90,270].includes(o)?0===s?(NS(o,0,90,!1,!0)||NS(o,0,90)||NS(o,270,360))&&(u="start"):90===s?NS(o,0,90,!1,!0)?u="start":(NS(o,90,180)||NS(o,270,360))&&(u="end"):270===s?NS(o,0,90,!1,!0)?u="end":(NS(o,90,180)||NS(o,270,360))&&(u="start"):180===s&&(90===o?u="start":(NS(o,0,90)||NS(o,270,360))&&(u="end")):u="center":"parallel"===i?c=NS(s,0,180,!0)?"top":"bottom":"horizontal"===i?NS(s,90,270,!1)?u="end":(NS(s,270,360,!1)||NS(s,0,90))&&(u="start"):"perpendicular"===i&&(u=NS(s,90,270)?"end":"start"),{textAlign:u,textBaseline:c}}function US(t,e,n){var r=n.showTick,i=n.tickLength,a=n.tickDirection,o=n.labelDirection,s=n.labelSpacing,u=e.indexOf(t),c=$E(s,[t,u,e]),l=je([bS(t.value,n),WS(o,a)],2),f=je(KO(XO(l[0],c+(1===l[1]?$E(r?i:0,[t,u,e]):0)),xS(t.value,n)),2);return{x:f[0],y:f[1]}}function qS(t,e){"text"===t.nodeName&&t.attr(e)}function XS(t){!function(t,e,n){var r=e.labelOverlap,i=void 0===r?[]:r;i.length&&i.forEach((function(r){var i=r.type,a=GS.get(i);(function(t,e,n){return!(e.labelOverlap.length<1)&&("hide"===n?!function(t){for(var e=t;e;){if("offscreen"===e.className)return!0;e=e.parent}return!1}(t[0]):"rotate"===n?!t.some((function(t){var e;return!!(null===(e=t.attr("transform"))||void 0===e?void 0:e.includes("rotate"))})):"ellipsis"!==n&&"wrap"!==n||t.filter((function(t){return t.querySelector("text")})).length>1)})(t,e,i)&&(null==a||a(t,r,e,n))}))}(this.node().childNodes,t,{hide:OE,show:EE,rotate:function(e,n){!function(t,e,n){e.setLocalEulerAngles(t);var r=YS(e.__data__.value,t,n),i=e.querySelector(qO.labelItem.class);i&&qS(i,r)}(+n,e,t)},ellipsis:function(t,e,n){t&&wO(t,e||1/0,n)},wrap:function(t,e,n){t&&function(t,e,n,r){void 0===n&&(n=2),void 0===r&&(r="top"),xO(t,{wordWrap:!0,wordWrapWidth:e,maxLines:n,textBaseline:r})}(t,e,n)},getTextShape:function(t){return t.querySelector("text")}})}function KS(t,e,n,r,i){var a=n.indexOf(e),o=BE(t).append(function(t,e,n,r){var i=r.labelFormatter;return _n(i)?function(){return gO($E(i,[t,e,n,bS(t.value,r)]))}:function(){return gO(t.label||"")}}(e,a,n,i)).attr("className",qO.labelItem.name).node(),s=je(IE(pS(r,[e,a,n])),2),u=s[0],c=s[1],l=c.transform,f=_e(c,["transform"]);CS(o,l);var d=function(t,e,n){var r,i=n.labelAlign;if(null===(r=e.style.transform)||void 0===r?void 0:r.includes("rotate"))return e.getLocalEulerAngles();var a=bS(t.value,n),o=yS(t.value,n);return"horizontal"===i?0:function(t){var e=(t+360)%180;return NS(e,-90,90)||(e+=180),e}(nS("perpendicular"===i?HS([1,0],a):HS([o[0]<0?-1:1,0],o)))}(e,o,i);return o.getLocalEulerAngles()||o.setLocalEulerAngles(d),qS(o,Ce(Ce({},YS(e.value,d,i)),u)),t.attr(f),o}function $S(t,e){return mS(t,e.tickDirection,e)}function ZS(t,e,n,r,i,a){var o=function(t,e,n,r,i){var a=i.tickFormatter,o=$S(e.value,i),s="line";return _n(a)&&(s=function(){return $E(a,[e,n,r,o])}),t.append(s).attr("className",qO.tickItem.name)}(BE(this),t,e,n,r);!function(t,e,n,r,i,a,o){var s=$S(t.value,a),u=function(t,e,n,r,i){var a=je(function(t,e){var n=je(t,2);return[[0,0],[n[0]*e,n[1]*e]]}(r,$E(i.tickLength,[t,e,n])),2),o=je(a[0],2),s=o[0],u=o[1],c=je(a[1],2);return{x1:s,x2:c[0],y1:u,y2:c[1]}}(t,e,n,s,a),c=u.x1,l=u.x2,f=u.y1,d=u.y2,h=je(IE(pS(o,[t,e,n,s])),2),p=h[0],v=h[1];"line"===r.node().nodeName&&r.styles(Ce({x1:c,x2:l,y1:f,y2:d},p)),i.attr(v),r.styles(p)}(t,e,n,o,this,r,i);var s=je(xS(t.value,r),2),u=s[0],c=s[1];return eO(this,{transform:"translate(".concat(u,", ").concat(c,")")},a)}function QS(t,e,n,r,i){var a=je(IE(jE(r,"title")),2),o=a[0],s=a[1],u=s.transform,c=s.transformOrigin,l=_e(s,["transform","transformOrigin"]);e.styles(l);var f=u||function(t,e,n){var r=2*t.getGeometryBounds().halfExtents[1];if("vertical"===e){if("left"===n)return"rotate(-90) translate(0, ".concat(r/2,")");if("right"===n)return"rotate(-90) translate(0, -".concat(r/2,")")}return""}(t.node(),o.direction,o.position);t.styles(Ce(Ce({},o),{transformOrigin:c})),CS(t.node(),f);var d=function(t,e,n){var r=n.titlePosition,i=void 0===r?"lb":r,a=n.titleSpacing,o=UE(i),s=t.node().getLocalBounds(),u=je(s.min,2),c=u[0],l=u[1],f=je(s.halfExtents,2),d=f[0],h=f[1],p=je(e.node().getLocalBounds().halfExtents,2),v=p[0],g=p[1],y=je([c+d,l+h],2),m=y[0],b=y[1],x=je(VE(a),4),w=x[0],k=x[1],E=x[2],O=x[3];if(["start","end"].includes(i)&&"linear"===n.type){var S=n.startPos,M=n.endPos,T=je("start"===i?[S,M]:[M,S],2),A=T[0],P=T[1],N=je(XO(tS([-P[0]+A[0],-P[1]+A[1]]),w),2),C=N[0],_=N[1];return{x:A[0]+C,y:A[1]+_}}return o.includes("t")&&(b-=h+g+w),o.includes("r")&&(m+=d+v+k),o.includes("l")&&(m-=d+v+O),o.includes("b")&&(b+=h+g+E),{x:m,y:b}}(BE(n._offscreen||n.querySelector(qO.mainGroup.class)),e,r),h=d.x,p=d.y;return eO(e.node(),{transform:"translate(".concat(h,", ").concat(p,")")},i)}function JS(t,e,n,r){var i=t.showLine,a=t.showTick,o=t.showLabel,s=HE(i,e.maybeAppendByClassName(qO.lineGroup,"g"),(function(e){return TS(e,t,r)}))||[],u=HE(a,e.maybeAppendByClassName(qO.tickGroup,"g"),(function(e){return function(t,e,n,r){var i=vS(e,n.tickFilter),a=jE(n,"tick");return t.selectAll(qO.tick.class).data(i,(function(t){return t.id||t.label})).join((function(t){return t.append("g").attr("className",qO.tick.name).transition((function(t,e){return ZS.call(this,t,e,i,n,a,!1)}))}),(function(t){return t.transition((function(t,e){return this.removeChildren(),ZS.call(this,t,e,i,n,a,r.update)}))}),(function(t){return t.transition((function(){var t=this,e=rS(this.childNodes[0],r.exit);return QE(e,(function(){return t.remove()})),e}))})).transitions()}(e,n,t,r)}))||[],c=HE(o,e.maybeAppendByClassName(qO.labelGroup,"g"),(function(e){return function(t,e,n,r){var i=vS(e,n.labelFilter),a=jE(n,"label");return t.selectAll(qO.label.class).data(i,(function(t,e){return e})).join((function(r){return r.append("g").attr("className",qO.label.name).transition((function(t){KS(this,t,e,a,n);var r=US(t,e,n),i=r.x,o=r.y;return this.style.transform="translate(".concat(i,", ").concat(o,")"),null})).call((function(){XS.call(t,n)}))}),(function(i){return i.transition((function(t){var i=function(t,e,n,r){if(void 0===r&&(r="destroy"),function(t,e){return"text"===t.nodeName&&"text"===e.nodeName&&t.attributes.text===e.attributes.text}(t,e))return t.remove(),[null];var i=function(){"destroy"===r?t.destroy():"hide"===r&&OE(t),e.isVisible()&&EE(e)};if(!n)return i(),[null];var a=n.duration,o=void 0===a?0:a,s=n.delay,u=void 0===s?0:s,c=Math.ceil(+o/2),l=+o/4,f=je(t.getGeometryBounds().center,2),d=f[0],h=f[1],p=je(e.getGeometryBounds().center,2),v=je([(d+p[0])/2-d,(h+p[1])/2-h],2),g=v[0],y=v[1],m=t.style.opacity,b=void 0===m?1:m,x=e.style.opacity,w=void 0===x?1:x,k=t.style.transform||"",E=e.style.transform||"",O=t.animate([{opacity:b,transform:"translate(0, 0) ".concat(k)},{opacity:0,transform:"translate(".concat(g,", ").concat(y,") ").concat(k)}],Ce(Ce({fill:"both"},n),{duration:u+c+l})),S=e.animate([{opacity:0,transform:"translate(".concat(-g,", ").concat(-y,") ").concat(E),offset:.01},{opacity:w,transform:"translate(0, 0) ".concat(E)}],Ce(Ce({fill:"both"},n),{duration:c+l,delay:u+c-l}));return QE(S,i),[O,S]}(this.querySelector(qO.labelItem.class),KS(this,t,e,a,n),r.update),o=US(t,e,n),s=o.x,u=o.y,c=eO(this,{transform:"translate(".concat(s,", ").concat(u,")")},r.update);return De(De([],je(i),!1),[c],!1)})).call((function(e){var r,i;i=function(){XS.call(t,n)},0===(r=ch(e,"_transitions").flat().filter(_S)).length?i():Promise.all(r.map((function(t){return null==t?void 0:t.finished}))).then(i)}))}),(function(t){return t.transition((function(){var t=this,e=rS(this.childNodes[0],r.exit);return QE(e,(function(){return BE(t).remove()})),e}))})).transitions()}(e,n,t,r)}))||[];return De(De(De([],je(s),!1),je(u),!1),je(c),!1).filter((function(t){return!!t}))}var tM=function(t){function e(e){return t.call(this,e,UO)||this}return Ne(e,t),e.prototype.render=function(t,e,n){var r=this,i=t.titleText,a=t.data,o=t.animate,s=t.showTitle,u=t.showGrid,c=t.dataThreshold,l=t.truncRange,f=function(t,e){if(t.length<=e)return t;for(var n=Math.floor(t.length/e),r=[],i=0;i<t.length;i+=n)r.push(t[i]);return r}(a,c).filter((function(t){var e=t.value;return!(l&&e>l[0]&&e<l[1])})),d=ZE(void 0===n?o:n),h=HE(u,BE(e).maybeAppendByClassName(qO.gridGroup,"g"),(function(e){return PS(e,f,t,d)}))||[],p=BE(e).maybeAppendByClassName(qO.mainGroup,"g");i&&(!this.initialized&&d.enter||this.initialized&&d.update)&&JS(t,BE(this.offscreenGroup),f,ZE(!1));var v=JS(t,BE(p.node()),f,d),g=HE(s,BE(e).maybeAppendByClassName(qO.titleGroup,"g"),(function(e){return function(t,e,n,r){var i=n.titleText;return t.selectAll(qO.title.class).data([{title:i}].filter((function(t){return!!t.title})),(function(t,e){return t.title})).join((function(a){return a.append((function(){return gO(i)})).attr("className",qO.title.name).transition((function(){return QS(BE(this),t,e,n,r.enter)}))}),(function(i){return i.transition((function(){return QS(BE(this),t,e,n,r.update)}))}),(function(t){return t.remove()})).transitions()}(e,r,t,d)}))||[];return De(De(De([],je(h),!1),je(v),!1),je(g),!1).flat().filter((function(t){return!!t}))},e}(CE);function eM(t){var e=t.canvas,n=t.touches,r=t.offsetX,i=t.offsetY;if(e)return[e.x,e.y];if(n){var a=n[0];return[a.clientX,a.clientY]}return r&&i?[r,i]:[0,0]}function nM(t,e){return+t.toPrecision(e)}const rM=function(t){return t};var iM=function(){return O((function t(e){k(this,t),this.options=vd({},this.getDefaultOptions()),this.update(e)}),[{key:"getOptions",value:function(){return this.options}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=vd({},this.options,t),this.rescale(t)}},{key:"rescale",value:function(t){}}])}();function aM(t,e){return e-t?function(n){return(n-t)/(e-t)}:function(t){return.5}}function oM(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(t,e){return function(n){return t(e(n))}}),t)}function sM(t,e,n,r,i){for(var a=n||0,o=r||t.length,s=i||function(t){return t};a<o;){var u=Math.floor((a+o)/2);s(t[u])>e?o=u:a=u+1}return a}var uM=s(5385),cM=s.n(uM);function lM(t,e,n){var r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function fM(t){var e=cM().get(t);if(!e)return null;var n=e.model,r=e.value;return"rgb"===n?r:"hsl"===n?function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100,i=t[3];if(0===n)return[255*r,255*r,255*r,i];var a=r<.5?r*(1+n):r+n-r*n,o=2*r-a;return[255*lM(o,a,e+1/3),255*lM(o,a,e),255*lM(o,a,e-1/3),i]}(r):null}var dM=function(t,e){return function(n){return t*(1-n)+e*n}},hM=function(t,e){return"number"==typeof t&&"number"==typeof e?dM(t,e):"string"==typeof t&&"string"==typeof e?function(t,e){var n=fM(t),r=fM(e);return null===n||null===r?n?function(){return t}:function(){return e}:function(t){for(var e=new Array(4),i=0;i<4;i+=1){var a=n[i],o=r[i];e[i]=a*(1-t)+o*t}var s=e[0],u=e[1],c=e[2],l=e[3];return"rgba(".concat(Math.round(s),", ").concat(Math.round(u),", ").concat(Math.round(c),", ").concat(l,")")}}(t,e):function(){return t}},pM=function(t,e){var n=dM(t,e);return function(t){return Math.round(n(t))}};function vM(t){return!An(t)&&!function(t){return null===t}(t)&&!Number.isNaN(t)}var gM=Math.sqrt(50),yM=Math.sqrt(10),mM=Math.sqrt(2);function bM(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=gM?10:a>=yM?5:a>=mM?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=gM?10:a>=yM?5:a>=mM?2:1)}function xM(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=gM?i*=10:a>=yM?i*=5:a>=mM&&(i*=2),e<t?-i:i}var wM=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=[t,e],a=0,o=i.length-1,s=i[a],u=i[o];if(u<s){var c=[u,s];s=c[0],u=c[1];var l=[o,a];a=l[0],o=l[1]}return(n=bM(s,u,r))>0?n=bM(s=Math.floor(s/n)*n,u=Math.ceil(u/n)*n,r):n<0&&(n=bM(s=Math.ceil(s*n)/n,u=Math.floor(u*n)/n,r)),n>0?(i[a]=Math.floor(s/n)*n,i[o]=Math.ceil(u/n)*n):n<0&&(i[a]=Math.ceil(s*n)/n,i[o]=Math.floor(u*n)/n),i},kM=function(t,e,n){var r,i,a=g(t,2),o=a[0],s=a[1],u=g(e,2),c=u[0],l=u[1];return o<s?(r=aM(o,s),i=n(c,l)):(r=aM(s,o),i=n(l,c)),oM(i,r)},EM=function(t,e,n){for(var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=t[0]>t[r],s=o?M(t).reverse():t,u=o?M(e).reverse():e,c=0;c<r;c+=1)i[c]=aM(s[c],s[c+1]),a[c]=n(u[c],u[c+1]);return function(e){var n=sM(t,e,1,r)-1,o=i[n];return oM(a[n],o)(e)}},OM=function(t,e,n,r){return(Math.min(t.length,e.length)>2?EM:kM)(t,e,r?pM:n)},SM=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:dM,tickCount:5}}},{key:"map",value:function(t){return vM(t)?this.output(t):this.options.unknown}},{key:"invert",value:function(t){return vM(t)?this.input(t):this.options.unknown}},{key:"nice",value:function(){if(this.options.nice){var t=_h(this.getTickMethodOptions()),e=t[0],n=t[1],r=t[2],i=t.slice(3);this.options.domain=this.chooseNice().apply(void 0,[e,n,r].concat(M(i)))}}},{key:"getTicks",value:function(){var t=this.options.tickMethod,e=_h(this.getTickMethodOptions()),n=e[0],r=e[1],i=e[2],a=e.slice(3);return t.apply(void 0,[n,r,i].concat(M(a)))}},{key:"getTickMethodOptions",value:function(){var t=this.options,e=t.domain,n=t.tickCount;return[e[0],e[e.length-1],n]}},{key:"chooseNice",value:function(){return wM}},{key:"rescale",value:function(){this.nice();var t=g(this.chooseTransforms(),2),e=t[0],n=t[1];this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,n,this.chooseClamp(n))}},{key:"chooseClamp",value:function(t){var e,n,r,i,a=this.options,o=a.clamp,s=a.range,u=this.options.domain.map(t),c=Math.min(u.length,s.length);return o?(e=u[0],n=u[c-1],r=n<e?n:e,i=e>n?e:n,function(t){return Math.min(Math.max(r,t),i)}):rM}},{key:"composeOutput",value:function(t,e){var n=this.options,r=n.domain,i=n.range,a=n.round,o=n.interpolate,s=OM(r.map(t),i,o,a);this.output=oM(s,e,t)}},{key:"composeInput",value:function(t,e,n){var r=this.options,i=r.domain,a=r.range,o=OM(a,i.map(t),dM);this.input=oM(e,n,o)}}])}(iM),MM=function(t,e,n){var r,i,a=t,o=e;if(a===o&&n>0)return[a];var s=bM(a,o,n);if(0===s||!Number.isFinite(s))return[];if(s>0){a=Math.ceil(a/s),o=Math.floor(o/s),i=new Array(r=Math.ceil(o-a+1));for(var u=0;u<r;u+=1)i[u]=(a+u)*s}else{s=-s,a=Math.ceil(a*s),o=Math.floor(o*s),i=new Array(r=Math.ceil(o-a+1));for(var c=0;c<r;c+=1)i[c]=(a+c)/s}return i},TM=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:hM,tickMethod:MM,tickCount:5}}},{key:"chooseTransforms",value:function(){return[rM,rM]}},{key:"clone",value:function(){return new e(this.options)}}])}(SM);function AM(t,e,n){if(A())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&C(i,n.prototype),i}function PM(t){var e="function"==typeof Map?new Map:void 0;return PM=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return AM(t,arguments,T(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),C(n,t)},PM(t)}function NM(t,e){var n=t.map,r=(0,t.initKey)(e);return n.has(r)?n.get(r):e}function CM(t,e){var n=t.map,r=(0,t.initKey)(e);return n.has(r)?n.get(r):(n.set(r,e),e)}function _M(t,e){var n=t.map,r=(0,t.initKey)(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}function LM(t){return"object"==typeof t?t.valueOf():t}var RM=function(t){function e(t){var n;if(k(this,e),(n=N(this,e)).map=new Map,n.initKey=LM,null!==t){var r,i=nr(t);try{for(i.s();!(r=i.n()).done;){var a=g(r.value,2),o=a[0],s=a[1];n.set(o,s)}}catch(t){i.e(t)}finally{i.f()}}return n}return _(e,t),O(e,[{key:"get",value:function(t){return Dn(e,"get",this,3)([NM({map:this.map,initKey:this.initKey},t)])}},{key:"has",value:function(t){return Dn(e,"has",this,3)([NM({map:this.map,initKey:this.initKey},t)])}},{key:"set",value:function(t,n){return Dn(e,"set",this,3)([CM({map:this.map,initKey:this.initKey},t),n])}},{key:"delete",value:function(t){return Dn(e,"delete",this,3)([_M({map:this.map,initKey:this.initKey},t)])}}])}(PM(Map)),jM=Symbol("defaultUnknown");function DM(t,e,n){for(var r=0;r<e.length;r+=1)t.has(e[r])||t.set(n(e[r]),r)}function IM(t){var e=t.value,n=t.from,r=t.to,i=t.mapper,a=t.notFoundReturn,o=i.get(e);if(void 0===o){if(a!==jM)return a;o=n.push(e)-1,i.set(e,o)}return r[o%r.length]}function FM(t){return t instanceof Date?function(t){return"".concat(t)}:"object"==typeof t?function(t){return JSON.stringify(t)}:function(t){return t}}var zM=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"getDefaultOptions",value:function(){return{domain:[],range:[],unknown:jM}}},{key:"map",value:function(t){return 0===this.domainIndexMap.size&&DM(this.domainIndexMap,this.getDomain(),this.domainKey),IM({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}},{key:"invert",value:function(t){return 0===this.rangeIndexMap.size&&DM(this.rangeIndexMap,this.getRange(),this.rangeKey),IM({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}},{key:"rescale",value:function(t){var e=g(this.options.domain,1)[0],n=g(this.options.range,1)[0];if(this.domainKey=FM(e),this.rangeKey=FM(n),!this.rangeIndexMap)return this.rangeIndexMap=new Map,void(this.domainIndexMap=new Map);t&&!t.range||this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}},{key:"clone",value:function(){return new e(this.options)}},{key:"getRange",value:function(){return this.options.range}},{key:"getDomain",value:function(){if(this.sortedDomain)return this.sortedDomain;var t=this.options,e=t.domain,n=t.compare;return this.sortedDomain=n?M(e).sort(n):e,this.sortedDomain}}])}(iM);function BM(t){return Math.round(1e12*t)/1e12}var GM=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"getDefaultOptions",value:function(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:jM,flex:[]}}},{key:"clone",value:function(){return new e(this.options)}},{key:"getStep",value:function(t){return void 0===this.valueStep?1:"number"==typeof this.valueStep?this.valueStep:void 0===t?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}},{key:"getBandWidth",value:function(t){return void 0===this.valueBandWidth?1:"number"==typeof this.valueBandWidth?this.valueBandWidth:void 0===t?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}},{key:"getRange",value:function(){return this.adjustedRange}},{key:"getPaddingInner",value:function(){var t=this.options,e=t.padding,n=t.paddingInner;return e>0?e:n}},{key:"getPaddingOuter",value:function(){var t=this.options,e=t.padding,n=t.paddingOuter;return e>0?e:n}},{key:"rescale",value:function(){Dn(e,"rescale",this,3)([]);var t=this.options,n=t.align,r=t.domain,i=function(t){var e,n=t.domain.length;if(0===n)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(null===(e=t.flex)||void 0===e?void 0:e.length)return function(t){for(var e=t.domain,n=t.range,r=t.paddingOuter,i=t.paddingInner,a=t.flex,o=t.round,s=t.align,u=e.length,c=function(t,e){var n=e-t.length;return n>0?[].concat(M(t),M(new Array(n).fill(1))):n<0?t.slice(0,e):t}(a,u),l=g(n,2),f=l[0],d=l[1]-f,h=d/(2/u*r+1-1/u*i),p=h*i/u,v=h-u*p,y=function(t){var e=Math.min.apply(Math,M(t));return t.map((function(t){return t/e}))}(c),m=y.reduce((function(t,e){return t+e})),b=v/m,x=new RM(e.map((function(t,e){var n=y[e]*b;return[t,o?Math.floor(n):n]}))),w=new RM(e.map((function(t,e){var n=y[e]*b+p;return[t,o?Math.floor(n):n]}))),k=Array.from(w.values()).reduce((function(t,e){return t+e})),E=f+(d-(k-k/u*i))*s,O=o?Math.round(E):E,S=new Array(u),T=0;T<u;T+=1){S[T]=BM(O);var A=e[T];O+=w.get(A)}return{valueBandWidth:x,valueStep:w,adjustedRange:S}}(t);var r,i,a=t.range,o=t.paddingOuter,s=t.paddingInner,u=t.round,c=t.align,l=a[0],f=a[1]-l,d=2*o,h=n-s;r=f/Math.max(1,d+h),u&&(r=Math.floor(r)),l+=(f-r*(n-s))*c,i=r*(1-s),u&&(l=Math.round(l),i=Math.round(i));var p=new Array(n).fill(0).map((function(t,e){return l+e*r}));return{valueStep:r,valueBandWidth:i,adjustedRange:p}}({align:n,range:t.range,round:t.round,flex:t.flex,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:r}),a=i.adjustedRange,o=i.valueBandWidth,s=i.valueStep;this.valueStep=s,this.valueBandWidth=o,this.adjustedRange=a}}])}(zM),WM=function(t){function e(e){var n=this,r=e.style,i=_e(e,["style"]);return(n=t.call(this,vd({},{type:"column"},Ce({style:r},i)))||this).columnsGroup=new Bu({name:"columns"}),n.appendChild(n.columnsGroup),n.render(),n}return Ne(e,t),e.prototype.render=function(){var t=this.attributes,e=t.columns,n=t.x,r=t.y;this.columnsGroup.style.transform="translate(".concat(n,", ").concat(r,")"),BE(this.columnsGroup).selectAll(".column").data(e.flat()).join((function(t){return t.append("rect").attr("className","column").each((function(t){this.attr(t)}))}),(function(t){return t.each((function(t){this.attr(t)}))}),(function(t){return t.remove()}))},e.prototype.update=function(t){this.attr(TE({},this.attributes,t)),this.render()},e.prototype.clear=function(){this.removeChildren()},e}(ju),VM=function(t){function e(e){var n=this,r=e.style,i=_e(e,["style"]);return(n=t.call(this,vd({},{type:"lines"},Ce({style:r},i)))||this).linesGroup=n.appendChild(new Bu),n.areasGroup=n.appendChild(new Bu),n.render(),n}return Ne(e,t),e.prototype.render=function(){var t=this.attributes,e=t.lines,n=t.areas,r=t.x,i=t.y;this.style.transform="translate(".concat(r,", ").concat(i,")"),e&&this.renderLines(e),n&&this.renderAreas(n)},e.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},e.prototype.update=function(t){this.attr(TE({},this.attributes,t)),this.render()},e.prototype.renderLines=function(t){BE(this.linesGroup).selectAll(".line").data(t).join((function(t){return t.append("path").attr("className","line").each((function(t){this.attr(t)}))}),(function(t){return t.each((function(t){this.attr(t)}))}),(function(t){return t.remove()}))},e.prototype.renderAreas=function(t){BE(this.linesGroup).selectAll(".area").data(t).join((function(t){return t.append("path").attr("className","area").each((function(t){this.attr(t)}))}),(function(t){return t.each((function(t){this.style(t)}))}),(function(t){return t.remove()}))},e}(ju);function HM(t,e){void 0===e&&(e=!1);var n=e?t.length-1:0,r=t.map((function(t,e){return De([e===n?"M":"L"],je(t),!1)}));return e?r.reverse():r}function YM(t,e){if(void 0===e&&(e=!1),t.length<=2)return HM(t);for(var n=[],r=t.length,i=0;i<r;i+=1){var a=e?t[r-i-1]:t[i];pl(a,n.slice(-2))||n.push.apply(n,De([],je(a),!1))}var o=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var r=!!e,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);var s,u,c,l=function(t,e,n,r){var i,a,o,s,u,c,l=[],f=!!r,d=[1/0,1/0],h=[-1/0,-1/0];if(f){d=(i=je(r,2))[0],h=i[1];for(var p=0,v=t.length;p<v;p+=1)d=ZO(d,y=t[p]),h=QO(h,y)}p=0;for(var g=t.length;p<g;p+=1){var y=t[p];if(0!==p||n)if(p!==g-1||n){a=t[[p?p-1:g-1,p-1][n?0:1]];var m=[0,0];m=XO(m=$O(o=t[n?(p+1)%g:p+1],a),.4);var b=JO(y,a),x=JO(y,o),w=b+x;0!==w&&(b/=w,x/=w);var k=XO(m,-b),E=XO(m,x);u=KO(y,k),s=ZO(s=KO(y,E),QO(o,y)),s=QO(s,ZO(o,y)),u=ZO(u=KO(y,k=XO(k=$O(s,y),-b/x)),QO(a,y)),s=KO(y,E=XO(E=$O(y,u=QO(u,ZO(a,y))),x/b)),f&&(u=ZO(u=QO(u,d),h),s=ZO(s=QO(s,d),h)),l.push(c),l.push(u),c=s}else u=y,l.push(c),l.push(u);else c=y}return n&&l.push(l.shift()),l}(i,0,r,n),f=i.length,d=[];for(a=0;a<f-1;a+=1)s=l[2*a],u=l[2*a+1],c=i[a+1],d.push(["C",s[0],s[1],u[0],u[1],c[0],c[1]]);return r&&(s=l[f],u=l[f+1],c=je(i,1)[0],d.push(["C",s[0],s[1],u[0],u[1],c[0],c[1]])),d}(n,!1);return e?o.unshift(De(["M"],je(t[r-1]),!1)):o.unshift(De(["M"],je(t[0]),!1)),o}function UM(t,e,n){var r=tf(t);return r.push(["L",e,n],["L",0,n],["Z"]),r}const qM=function(t,e){if(fn(t)){for(var n,r=1/0,i=0;i<t.length;i++){var a=t[i],o=_n(e)?e(a):a[e];o<r&&(n=a,r=o)}return n}},XM=function(t,e){if(fn(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var a=t[i],o=_n(e)?e(a):a[e];o>r&&(n=a,r=o)}return n}};function KM(t){return 0===t.length?[0,0]:[dn(qM(t,(function(t){return dn(t)||0}))),hn(XM(t,(function(t){return hn(t)||0})))]}function $M(t){for(var e=tf(t),n=e[0].length,r=je([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],a=r[1],o=0;o<e.length;o+=1)for(var s=e[o],u=0;u<n;u+=1)s[u]>=0?(s[u]+=i[u],i[u]=s[u]):(s[u]+=a[u],a[u]=s[u]);return e}var ZM=function(t){function e(e){return t.call(this,e,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Ne(e,t),Object.defineProperty(e.prototype,"rawData",{get:function(){var t=this.attributes.data;if(!t||0===(null==t?void 0:t.length))return[[]];var e=tf(t);return Oe(e[0])?[e]:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.isStack?$M(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){var t=this.scales.y,e=je(t.getOptions().domain||[0,0],2),n=e[0],r=e[1];return r<0?t.map(r):t.map(n<0?0:n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerShape",{get:function(){var t=this.attributes;return{width:t.width,height:t.height}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesStyle",{get:function(){var t=this,e=this.attributes,n=e.type,r=e.isStack,i=e.smooth;if("line"!==n)throw new Error("linesStyle can only be used in line type");var a=jE(this.attributes,"area"),o=jE(this.attributes,"line"),s=this.containerShape.width,u=this.data;if(0===u[0].length)return{lines:[],areas:[]};var c=this.scales,l=function(t,e){var n,r=e.x,i=e.y,a=je(i.getOptions().range||[0,0],2),o=a[0],s=a[1];return s>o&&(n=je([o,s],2),s=n[0],o=n[1]),t.map((function(t){return t.map((function(t,e){return[r.map(e),Ae(i.map(t),s,o)]}))}))}(u,{type:"line",x:c.x,y:c.y}),f=[];if(a){var d=this.baseline;f=r?i?function(t,e,n){for(var r=[],i=t.length-1;i>=0;i-=1){var a=t[i],o=YM(a),s=void 0;if(0===i)s=UM(o,e,n);else{var u=YM(t[i-1],!0),c=a[0];u[0][0]="L",s=De(De(De([],je(o),!1),je(u),!1),[De(["M"],je(c),!1),["Z"]],!1)}r.push(s)}return r}(l,s,d):function(t,e,n){for(var r=[],i=t.length-1;i>=0;i-=1){var a=HM(t[i]),o=void 0;if(0===i)o=UM(a,e,n);else{var s=HM(t[i-1],!0);s[0][0]="L",o=De(De(De([],je(a),!1),je(s),!1),[["Z"]],!1)}r.push(o)}return r}(l,s,d):function(t,e,n,r){return t.map((function(t){return UM(e?YM(t):HM(t),n,r)}))}(l,i,s,d)}return{lines:l.map((function(e,n){return Ce({stroke:t.getColor(n),d:i?YM(e):HM(e)},o)})),areas:f.map((function(e,n){return Ce({d:e,fill:t.getColor(n)},a)}))}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsStyle",{get:function(){var t=this,e=jE(this.attributes,"column"),n=this.attributes,r=n.isStack,i=n.type,a=n.scale;if("column"!==i)throw new Error("columnsStyle can only be used in column type");var o=this.containerShape.height,s=this.rawData;if(!s)return{columns:[]};r&&(s=$M(s));var u=this.createScales(s),c=u.x,l=u.y,f=je(KM(s),2),d=f[0],h=f[1],p=new TM({domain:[0,h-(d>0?0:d)],range:[0,o*a]}),v=c.getBandWidth(),g=this.rawData;return{columns:s.map((function(n,i){return n.map((function(n,a){var o=v/s.length;return Ce(Ce({fill:t.getColor(i)},e),r?{x:c.map(a),y:l.map(n),width:v,height:p.map(g[i][a])}:{x:c.map(a)+o*i,y:n>=0?l.map(n):l.map(0),width:o,height:p.map(Math.abs(n))})}))}))}},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){var n,r;(n=e,r=".container",n.querySelector(r)?BE(n).select(r):BE(n).append("rect")).attr("className","container").node();var i=t.type,a=t.x,o=t.y,s="spark".concat(i),u=Ce({x:a,y:o},"line"===i?this.linesStyle:this.columnsStyle);BE(e).selectAll(".spark").data([i]).join((function(t){return t.append((function(t){return"line"===t?new VM({className:s,style:u}):new WM({className:s,style:u})})).attr("className","spark ".concat(s))}),(function(t){return t.update(u)}),(function(t){return t.remove()}))},e.prototype.getColor=function(t){var e=this.attributes.color;return fn(e)?e[t%e.length]:_n(e)?e.call(null,t):e},e.prototype.createScales=function(t){var e,n,r=this.attributes,i=r.type,a=r.scale,o=r.range,s=void 0===o?[]:o,u=r.spacing,c=this.containerShape,l=c.width,f=c.height,d=je(KM(t),2),h=d[0],p=d[1],v=new TM({domain:[null!==(e=s[0])&&void 0!==e?e:h,null!==(n=s[1])&&void 0!==n?n:p],range:[f,f*(1-a)]});return"line"===i?{type:i,x:new TM({domain:[0,t[0].length-1],range:[0,l]}),y:v}:{type:i,x:new GM({domain:t[0].map((function(t,e){return e})),range:[0,l],paddingInner:u,paddingOuter:u/2,align:.5}),y:v}},e.tag="sparkline",e}(CE),QM={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},JM={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},tT={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},eT=WE({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),nT=WE({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),rT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ne(e,t),e.prototype.render=function(t,e){var n=t.x,r=t.y,i=t.size,a=void 0===i?10:i,o=t.radius,s=void 0===o?a/4:o,u=t.orientation,c=_e(t,["x","y","size","radius","orientation"]),l=a,f=2.4*l,d=BE(e).maybeAppendByClassName(nT.iconRect,"rect").styles(Ce(Ce({},c),{width:l,height:f,radius:s,x:n-l/2,y:r-f/2,transformOrigin:"center"})),h=n+1/3*l-l/2,p=n+2/3*l-l/2,v=r+1/4*f-f/2,g=r+3/4*f-f/2;d.maybeAppendByClassName("".concat(nT.iconLine,"-1"),"line").styles(Ce({x1:h,x2:h,y1:v,y2:g},c)),d.maybeAppendByClassName("".concat(nT.iconLine,"-2"),"line").styles(Ce({x1:p,x2:p,y1:v,y2:g},c)),"vertical"===u&&(d.node().style.transform="rotate(90)")},e}(CE),iT=function(t){function e(e){return t.call(this,e,tT)||this}return Ne(e,t),e.prototype.renderLabel=function(t){var e=this,n=this.attributes,r=n.x,i=n.y,a=n.showLabel,o=jE(this.attributes,"label"),s=o.x,u=void 0===s?0:s,c=o.y,l=void 0===c?0:c,f=o.transform,d=o.transformOrigin,h=je(IE(_e(o,["x","y","transform","transformOrigin"]),[]),2),p=h[0],v=h[1],g=BE(t).maybeAppendByClassName(nT.labelGroup,"g").styles(v),y=Ce(Ce({},JM),p),m=y.text,b=_e(y,["text"]);HE(!!a,g,(function(t){e.label=t.maybeAppendByClassName(nT.label,"text").styles(Ce(Ce({},b),{x:r+u,y:i+l,transform:f,transformOrigin:d,text:"".concat(m)})),e.label.on("mousedown",(function(t){t.stopPropagation()})),e.label.on("touchstart",(function(t){t.stopPropagation()}))}))},e.prototype.renderIcon=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.orientation,a=e.type,o=Ce(Ce({x:n,y:r,orientation:i},QM),jE(this.attributes,"icon")),s=this.attributes.iconShape,u=void 0===s?function(){return new rT({style:o})}:s;BE(t).maybeAppendByClassName(nT.iconGroup,"g").selectAll(nT.icon.class).data([u]).join((function(t){return t.append("string"==typeof u?u:function(){return u(a)}).attr("className",nT.icon.name)}),(function(t){return t.update(o)}),(function(t){return t.remove()}))},e.prototype.render=function(t,e){this.renderIcon(e),this.renderLabel(e)},e}(CE),aT=function(t){function e(e){var n=t.call(this,e,Ce(Ce(Ce({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(t){return t.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},DE(tT,"handle")),DE(QM,"handleIcon")),DE(JM,"handleLabel")))||this;return n.range=[0,1],n.onDragStart=function(t){return function(e){e.stopPropagation(),n.target=t,n.prevPos=n.getOrientVal(eM(e));var r=n.availableSpace,i=r.x,a=r.y,o=n.getBBox(),s=o.x,u=o.y;n.selectionStartPos=n.getRatio(n.prevPos-n.getOrientVal([i,a])-n.getOrientVal([+s,+u])),n.selectionWidth=0,document.addEventListener("pointermove",n.onDragging),document.addEventListener("pointerup",n.onDragEnd)}},n.onDragging=function(t){var e=n.attributes,r=e.slidable,i=e.brushable,a=e.type;t.stopPropagation();var o=n.getOrientVal(eM(t)),s=o-n.prevPos;if(s){var u=n.getRatio(s);switch(n.target){case"start":r&&n.setValuesOffset(u);break;case"end":r&&n.setValuesOffset(0,u);break;case"selection":r&&n.setValuesOffset(u,u);break;case"track":if(!i)return;n.selectionWidth+=u,"range"===a?n.innerSetValues([n.selectionStartPos,n.selectionStartPos+n.selectionWidth].sort(),!0):n.innerSetValues([0,n.selectionStartPos+n.selectionWidth],!0)}n.prevPos=o}},n.onDragEnd=function(){document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointerup",n.onDragEnd),n.target="",n.updateHandlesPosition(!1)},n.onValueChange=function(t){var e=n.attributes,r=e.onChange,i=e.type,a="range"===i?t:t[1],o="range"===i?n.getValues():n.getValues()[1],s=new js("valuechange",{detail:{oldValue:a,value:o}});n.dispatchEvent(s),null==r||r(o)},n.selectionStartPos=0,n.selectionWidth=0,n.prevPos=0,n.target="",n}return Ne(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this.attributes.values},set:function(t){this.attributes.values=this.clampValues(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineStyle",{get:function(){if("horizontal"!==this.attributes.orientation)return null;var t=jE(this.attributes,"sparkline");return Ce(Ce({zIndex:0},this.availableSpace),t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var t=this.attributes,e=t.trackLength,n=t.trackSize,r=je(this.getOrientVal([[e,n],[n,e]]),2);return{width:r[0],height:r[1]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,e=(t.x,t.y,je(VE(t.padding),4)),n=e[0],r=e[1],i=e[2],a=e[3],o=this.shape;return{x:a,y:n,width:o.width-(a+r),height:o.height-(n+i)}},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.values},e.prototype.setValues=function(t,e){void 0===t&&(t=[0,0]),void 0===e&&(e=!1),this.attributes.values=t;var n=!1!==e&&this.attributes.animate;this.updateSelectionArea(n),this.updateHandlesPosition(n)},e.prototype.updateSelectionArea=function(t){var e=this.calcSelectionArea();this.foregroundGroup.selectAll(eT.selection.class).each((function(n,r){eO(this,e[r],t)}))},e.prototype.updateHandlesPosition=function(t){this.attributes.showHandle&&(this.startHandle&&eO(this.startHandle,this.getHandleStyle("start"),t),this.endHandle&&eO(this.endHandle,this.getHandleStyle("end"),t))},e.prototype.innerSetValues=function(t,e){void 0===t&&(t=[0,0]),void 0===e&&(e=!1);var n=this.values,r=this.clampValues(t);this.attributes.values=r,this.setValues(r),e&&this.onValueChange(n)},e.prototype.renderTrack=function(t){var e=this.attributes,n=e.x,r=e.y,i=jE(this.attributes,"track");this.trackShape=BE(t).maybeAppendByClassName(eT.track,"rect").styles(Ce(Ce({x:n,y:r},this.shape),i))},e.prototype.renderBrushArea=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.brushable;this.brushArea=BE(t).maybeAppendByClassName(eT.brushArea,"rect").styles(Ce({x:n,y:r,fill:"transparent",cursor:i?"crosshair":"default"},this.shape))},e.prototype.renderSparkline=function(t){var e=this,n=this.attributes,r=n.x,i=n.y;HE("horizontal"===n.orientation,BE(t).maybeAppendByClassName(eT.sparklineGroup,"g"),(function(t){var n=Ce(Ce({},e.sparklineStyle),{x:r,y:i});t.maybeAppendByClassName(eT.sparkline,(function(){return new ZM({style:n})})).update(n)}))},e.prototype.renderHandles=function(){var t,e=this,n=this.attributes,r=n.showHandle,i=n.type,a=r?"range"===i?["start","end"]:["end"]:[],o=this;null===(t=this.foregroundGroup)||void 0===t||t.selectAll(eT.handle.class).data(a.map((function(t){return{type:t}})),(function(t){return t.type})).join((function(t){return t.append((function(t){var n=t.type;return new iT({style:e.getHandleStyle(n)})})).each((function(t){var e=t.type;this.attr("class","".concat(eT.handle.name," ").concat(e,"-handle"));var n="".concat(e,"Handle");o[n]=this,this.addEventListener("pointerdown",o.onDragStart(e))}))}),(function(t){return t.each((function(t){var e=t.type;this.update(o.getHandleStyle(e))}))}),(function(t){return t.each((function(t){var e=t.type,n="".concat(e,"Handle");o[n]=void 0})).remove()}))},e.prototype.renderSelection=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.type,a=e.selectionType;this.foregroundGroup=BE(t).maybeAppendByClassName(eT.foreground,"g");var o=jE(this.attributes,"selection"),s=function(t){return t.style("visibility",(function(t){return t.show?"visible":"hidden"})).style("cursor",(function(t){return"select"===a?"grab":"invert"===a?"crosshair":"default"})).styles(Ce(Ce({},o),{transform:"translate(".concat(n,", ").concat(r,")")}))},u=this;this.foregroundGroup.selectAll(eT.selection.class).data("value"===i?[]:this.calcSelectionArea().map((function(t,e){return{style:Ce({},t),index:e,show:"select"===a?1===e:1!==e}})),(function(t){return t.index})).join((function(t){return t.append("rect").attr("className",eT.selection.name).call(s).each((function(t,e){var n=this;1===e?(u.selectionShape=BE(this),this.on("pointerdown",(function(t){n.attr("cursor","grabbing"),u.onDragStart("selection")(t)})),u.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),u.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),u.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",(function(){n.attr("cursor","grabbing")})),this.addEventListener("pointerup",(function(){n.attr("cursor","pointer")})),this.addEventListener("pointerover",(function(){n.attr("cursor","pointer")}))):this.on("pointerdown",u.onDragStart("track"))}))}),(function(t){return t.call(s)}),(function(t){return t.remove()})),this.updateSelectionArea(!1),this.renderHandles()},e.prototype.render=function(t,e){this.renderTrack(e),this.renderSparkline(e),this.renderBrushArea(e),this.renderSelection(e)},e.prototype.clampValues=function(t,e){var n;void 0===e&&(e=4);var r=je(this.range,2),i=r[0],a=r[1],o=je(this.getValues().map((function(t){return nM(t,e)})),2),s=o[0],u=o[1],c=je(((Array.isArray(t)?t:[s,null!=t?t:u])||[s,u]).map((function(t){return nM(t,e)})),2),l=c[0],f=c[1];if("value"===this.attributes.type)return[0,Ae(f,i,a)];l>f&&(l=(n=je([f,l],2))[0],f=n[1]);var d=f-l;return d>a-i?[i,a]:l<i?s===i&&u===f?[i,f]:[i,d+i]:f>a?u===a&&s===l?[l,a]:[a-d,a]:[l,f]},e.prototype.calcSelectionArea=function(t){var e=je(this.clampValues(t),2),n=e[0],r=e[1],i=this.availableSpace,a=i.x,o=i.y,s=i.width,u=i.height;return this.getOrientVal([[{y:o,height:u,x:a,width:n*s},{y:o,height:u,x:n*s+a,width:(r-n)*s},{y:o,height:u,x:r*s,width:(1-r)*s}],[{x:a,width:s,y:o,height:n*u},{x:a,width:s,y:n*u+o,height:(r-n)*u},{x:a,width:s,y:r*u,height:(1-r)*u}]])},e.prototype.calcHandlePosition=function(t){var e=this.attributes.handleIconOffset,n=this.availableSpace,r=n.x,i=n.y,a=n.width,o=n.height,s=je(this.clampValues(),2),u=s[0],c=s[1],l="start"===t?-e:e,f=("start"===t?u:c)*this.getOrientVal([a,o])+l;return{x:r+this.getOrientVal([f,a/2]),y:i+this.getOrientVal([o/2,f])}},e.prototype.inferTextStyle=function(t){return"horizontal"===this.attributes.orientation?{}:"start"===t?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:"end"===t?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},e.prototype.calcHandleText=function(t){var e,n=this.attributes,r=n.type,i=n.orientation,a=n.formatter,o=n.autoFitLabel,s=jE(this.attributes,"handle"),u=jE(s,"label"),c=s.spacing,l=this.getHandleSize(),f=this.clampValues(),d=a("start"===t?f[0]:f[1]),h=new FE({style:Ce(Ce(Ce({},u),this.inferTextStyle(t)),{text:d})}),p=h.getBBox(),v=p.width,g=p.height;if(h.destroy(),!o){if("value"===r)return{text:d,x:0,y:-g-c};var y=c+l+("horizontal"===i?v/2:0);return(e={text:d})["horizontal"===i?"x":"y"]="start"===t?-y:y,e}var m=0,b=0,x=this.availableSpace,w=x.width,k=x.height,E=this.calcSelectionArea()[1],O=E.x,S=E.y,M=E.width,T=E.height,A=c+l;if("horizontal"===i){var P=A+v/2;m="start"===t?O-A-v>0?-P:P:w-O-M-A>v?P:-P}else{var N=g+A;b="start"===t?S-l>g?-N:A:k-(S+T)-l>g?N:-A}return{x:m,y:b,text:d}},e.prototype.getHandleLabelStyle=function(t){var e=jE(this.attributes,"handleLabel");return Ce(Ce(Ce({},e),this.calcHandleText(t)),this.inferTextStyle(t))},e.prototype.getHandleIconStyle=function(){var t=this.attributes.handleIconShape,e=jE(this.attributes,"handleIcon"),n=this.getOrientVal(["ew-resize","ns-resize"]),r=this.getHandleSize();return Ce({cursor:n,shape:t,size:r},e)},e.prototype.getHandleStyle=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.showLabel,a=e.showLabelOnInteraction,o=e.orientation,s=this.calcHandlePosition(t),u=s.x,c=s.y,l=this.calcHandleText(t),f=i;return!i&&a&&(f=!!this.target),Ce(Ce(Ce({},DE(this.getHandleIconStyle(),"icon")),DE(Ce(Ce({},this.getHandleLabelStyle(t)),l),"label")),{transform:"translate(".concat(u+n,", ").concat(c+r,")"),orientation:o,showLabel:f,type:t,zIndex:3})},e.prototype.getHandleSize=function(){var t=this.attributes,e=t.handleIconSize,n=t.width,r=t.height;return e||Math.floor((this.getOrientVal([+r,+n])+4)/2.4)},e.prototype.getOrientVal=function(t){var e=je(t,2),n=e[0],r=e[1];return"horizontal"===this.attributes.orientation?n:r},e.prototype.setValuesOffset=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1);var r=this.attributes.type,i=je(this.getValues(),2),a=[i[0]+("range"===r?t:0),i[1]+e].sort();n?this.setValues(a):this.innerSetValues(a,!0)},e.prototype.getRatio=function(t){var e=this.availableSpace,n=e.width,r=e.height;return t/this.getOrientVal([n,r])},e.prototype.dispatchCustomEvent=function(t,e,n){var r=this;t.on(e,(function(t){t.stopPropagation(),r.dispatchEvent(new js(n,{detail:t}))}))},e.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var t=this.brushArea;this.dispatchCustomEvent(t,"click","trackClick"),this.dispatchCustomEvent(t,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(t,"pointerleave","trackMouseleave"),t.on("pointerdown",this.onDragStart("track"))},e.prototype.onScroll=function(t){if(this.attributes.scrollable){var e=t.deltaX,n=t.deltaY||e,r=this.getRatio(n);this.setValuesOffset(r,r,!0)}},e.tag="slider",e}(CE),oT={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(t){return t.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},sT=WE({background:"background",labelGroup:"label-group",label:"label"},"indicator"),uT=function(t){function e(e){var n=t.call(this,e,oT)||this;return n.point=[0,0],n.group=n.appendChild(new Bu({})),n.isMutationObserved=!0,n}return Ne(e,t),e.prototype.renderBackground=function(){if(this.label){var t=this.attributes,e=t.position,n=je(VE(t.padding),4),r=n[0],i=n[1],a=n[2],o=n[3],s=this.label.node().getLocalBounds(),u=s.min,c=s.max,l=new GE(u[0]-o,u[1]-r,c[0]+i-u[0]+o,c[1]+a-u[1]+r),f=this.getPath(e,l),d=jE(this.attributes,"background");this.background=BE(this.group).maybeAppendByClassName(sT.background,"path").styles(Ce(Ce({},d),{d:f})),this.group.appendChild(this.label.node())}},e.prototype.renderLabel=function(){var t=this.attributes,e=t.formatter,n=t.labelText,r=je(IE(jE(this.attributes,"label")),2),i=r[0],a=r[1],o=(i.text,_e(i,["text"]));this.label=BE(this.group).maybeAppendByClassName(sT.labelGroup,"g").styles(a),n&&this.label.maybeAppendByClassName(sT.label,(function(){return gO(e(n))})).style("text",e(n).toString()).selectAll("text").styles(o)},e.prototype.adjustLayout=function(){var t=je(this.point,2),e=t[0],n=t[1],r=this.attributes,i=r.x,a=r.y;this.group.attr("transform","translate(".concat(i-e,", ").concat(a-n,")"))},e.prototype.getPath=function(t,e){var n=this.attributes.radius,r=e.x,i=e.y,a=e.width,o=e.height,s=[["M",r+n,i],["L",r+a-n,i],["A",n,n,0,0,1,r+a,i+n],["L",r+a,i+o-n],["A",n,n,0,0,1,r+a-n,i+o],["L",r+n,i+o],["A",n,n,0,0,1,r,i+o-n],["L",r,i+n],["A",n,n,0,0,1,r+n,i],["Z"]],u={top:4,right:6,bottom:0,left:2}[t],c=this.createCorner([s[u].slice(-2),s[u+1].slice(-2)]);return s.splice.apply(s,De([u+1,1],je(c),!1)),s[0][0]="M",s},e.prototype.createCorner=function(t,e){void 0===e&&(e=10);var n=vO.apply(void 0,De([],je(t),!1)),r=je(t,2),i=je(r[0],2),a=i[0],o=i[1],s=je(r[1],2),u=s[0],c=s[1],l=je(n?[u-a,[a,u]]:[c-o,[o,c]],2),f=l[0],d=je(l[1],2),h=d[0],p=d[1],v=f/2,g=e*(f/Math.abs(f)),y=g/2,m=g*Math.sqrt(3)/2*.8,b=je([h,h+v-y,h+v,h+v+y,p],5),x=b[0],w=b[1],k=b[2],E=b[3],O=b[4];return n?(this.point=[k,o-m],[["L",x,o],["L",w,o],["L",k,o-m],["L",E,o],["L",O,o]]):(this.point=[a+m,k],[["L",a,x],["L",a,w],["L",a+m,k],["L",a,E],["L",a,O]])},e.prototype.applyVisibility=function(){"hidden"===this.attributes.visibility?OE(this):EE(this)},e.prototype.bindEvents=function(){this.label.on(Ys.BOUNDS_CHANGED,this.renderBackground)},e.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},e}(CE),cT=function(t){function e(n){var r=t.call(this,TE({},e.defaultOptions,n))||this;return r.hoverColor="#f5f5f5",r.selectedColor="#e6f7ff",r.background=r.appendChild(new Qu({})),r.label=r.background.appendChild(new Bu({})),r}return Ne(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return VE(this.style.padding)},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(){var t=this.style,e=t.label,n=t.value,r=jE(this.attributes,"label");BE(this.label).maybeAppend(".label",(function(){return gO(e)})).attr("className","label").styles(r),this.label.attr("__data__",n)},e.prototype.renderBackground=function(){var t=this.label.getBBox(),e=je(this.padding,4),n=e[0],r=e[1],i=e[2],a=e[3],o=t.width,s=t.height,u=o+a+r,c=s+n+i,l=jE(this.attributes,"background"),f=this.style,d=f.width,h=void 0===d?0:d,p=f.height,v=void 0===p?0:p,g=f.selected;this.background.attr(Ce(Ce({},l),{width:Math.max(u,h),height:Math.max(c,v),fill:g?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(a,", ").concat((c-s)/2,")")})},e.prototype.render=function(){this.renderLabel(),this.renderBackground()},e.prototype.bindEvents=function(){var t=this;this.addEventListener("pointerenter",(function(){t.style.selected||t.background.attr("fill",t.hoverColor)})),this.addEventListener("pointerleave",(function(){t.style.selected||t.background.attr("fill",t.style.backgroundFill)}));var e=this;this.addEventListener("click",(function(){var n=t.style,r=n.label,i=n.value,a=n.onClick;null==a||a(i,{label:r,value:i},e)}))},e.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},e}(CE),lT=function(t){function e(n){var r,i,a=t.call(this,TE({},e.defaultOptions,n))||this;a.currentValue=null===(r=e.defaultOptions.style)||void 0===r?void 0:r.defaultValue,a.isPointerInSelect=!1,a.select=a.appendChild(new Qu({className:"select",style:{cursor:"pointer",width:0,height:0}})),a.dropdown=a.appendChild(new Qu({className:"dropdown"}));var o=a.style.defaultValue;return o&&(null===(i=a.style.options)||void 0===i?void 0:i.some((function(t){return t.value===o})))&&(a.currentValue=o),a}return Ne(e,t),e.prototype.setValue=function(t){this.currentValue=t,this.render()},e.prototype.getValue=function(){return this.currentValue},Object.defineProperty(e.prototype,"dropdownPadding",{get:function(){return VE(this.style.dropdownPadding)},enumerable:!1,configurable:!0}),e.prototype.renderSelect=function(){var t,e=this,n=this.style,r=n.x,i=n.y,a=n.width,o=n.height,s=n.bordered,u=n.showDropdownIcon,c=jE(this.attributes,"select"),l=jE(this.attributes,"placeholder");this.select.attr(Ce(Ce({x:r,y:i,width:a,height:o},c),{fill:"#fff",strokeWidth:s?1:0}));var f=this.dropdownPadding;u&&BE(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(r+a-10-f[1]-f[3],", ").concat(i+o/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var d=null===(t=this.style.options)||void 0===t?void 0:t.find((function(t){return t.value===e.currentValue})),h=Ce({x:r+f[3]},l);BE(this.select).selectAll(".placeholder").data(d?[]:[1]).join((function(t){return t.append("text").attr("className","placeholder").styles(h).style("y",(function(){var t=this.getBBox();return i+(o-t.height)/2}))}),(function(t){return t.styles(h)}),(function(t){return t.remove()}));var p=jE(this.attributes,"optionLabel"),v=Ce({x:r+f[3]},p);BE(this.select).selectAll(".value").data(d?[d]:[]).join((function(t){return t.append((function(t){return gO(t.label)})).attr("className","value").styles(v).style("y",(function(){var t=this.getBBox();return i+(o-t.height)/2}))}),(function(t){return t.styles(v)}),(function(t){return t.remove()}))},e.prototype.renderDropdown=function(){var t,e,n=this,r=this.style,i=r.x,a=r.y,o=r.width,s=r.height,u=r.options,c=r.onSelect,l=r.open,f=jE(this.attributes,"dropdown"),d=jE(this.attributes,"option"),h=this.dropdownPadding;BE(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(u,(function(t){return t.value})).join((function(t){return t.append((function(t){return new cT({className:"dropdown-item",style:Ce(Ce(Ce({},t),d),{width:o-h[1]-h[3],selected:t.value===n.currentValue,onClick:function(t,e,r){n.setValue(t),null==c||c(t,e,r),n.dispatchEvent(new js("change",{detail:{value:t,option:e,item:r}})),OE(n.dropdown)}})})})).each((function(t,e){var n,r=(null===(n=this.parentNode)||void 0===n?void 0:n.children).reduce((function(t,n,r){return r<e&&(t+=n.getBBox().height),t}),0);this.attr("transform","translate(".concat(h[3],", ").concat(h[0]+r,")"))}))}),(function(t){return t.update((function(t){return{selected:t.value===n.currentValue}}))}),(function(t){return t.remove()}));var p=null===(e=null===(t=this.dropdown.getElementsByClassName("dropdown-container"))||void 0===t?void 0:t[0])||void 0===e?void 0:e.getBBox(),v=f.spacing;this.dropdown.attr(Ce({transform:"translate(".concat(i,", ").concat(a+s+v,")"),width:p.width+h[1]+h[3],height:p.height+h[0]+h[2]},f)),!l&&OE(this.dropdown)},e.prototype.render=function(){this.renderSelect(),this.renderDropdown()},e.prototype.bindEvents=function(){var t=this;this.addEventListener("click",(function(t){t.stopPropagation()})),this.select.addEventListener("click",(function(){"visible"===t.dropdown.style.visibility?OE(t.dropdown):EE(t.dropdown)})),this.addEventListener("pointerenter",(function(){t.isPointerInSelect=!0})),this.addEventListener("pointerleave",(function(){t.isPointerInSelect=!1})),null===document||void 0===document||document.addEventListener("click",(function(){t.isPointerInSelect||OE(t.dropdown)}))},e.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"请选择",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},e}(CE),fT=function(t){function e(n){var r=t.call(this,TE({},{style:{backgroundOpacity:e.backgroundOpacities.default}},e.defaultOptions,n))||this;return r.showBackground=!0,r.background=r.appendChild(new Qu({})),r.icon=r.appendChild(new Bu({})),r}return Ne(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"BaseIcon"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return VE(this.attributes.size/5)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconSize",{get:function(){var t=this.attributes.size,e=je(this.padding,4),n=e[0],r=e[1],i=e[2],a=e[3];return Math.max(t-Math.max(a+r,n+i),2*this.lineWidth+1)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.attributes,e=t.x,n=t.y,r=t.size,i=r/2,a=jE(this.attributes,"background");this.background.attr(Ce({x:e-i,y:n-i,width:r,height:r},a))},e.prototype.showIndicator=function(){if(this.label){var t=this.attributes.size,e=this.background.getBBox(),n=e.x,r=e.y;this.indicator.update({x:n+t/2,y:r-5,labelText:this.label,visibility:"visible"})}},e.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"})},e.prototype.connectedCallback=function(){var e;t.prototype.connectedCallback.call(this);var n=this.attributes.size,r=this.background.getBBox(),i=r.x,a=r.y,o=null===(e=this.ownerDocument)||void 0===e?void 0:e.defaultView;o&&(this.indicator=o.appendChild(new uT({style:{x:i+n/2,y:a-n/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})))},e.prototype.disconnectedCallback=function(){this.indicator.destroy()},e.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground()},e.prototype.bindEvents=function(){var t=this,n=this.attributes.onClick;if(this.addEventListener("click",(function(){null==n||n(t)})),this.showBackground){var r=function(){return t.background.attr({opacity:e.backgroundOpacities.default})};this.addEventListener("pointerenter",(function(){t.background.attr({opacity:e.backgroundOpacities.hover}),t.showIndicator()})),this.addEventListener("pointerleave",(function(){r(),t.hideIndicator()})),this.addEventListener("pointerdown",(function(){t.background.attr({opacity:e.backgroundOpacities.active})})),this.addEventListener("pointerup",(function(){r()}))}},e.tag="IconBase",e.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},e.backgroundOpacities={default:0,hover:.8,active:1},e}(CE),dT=function(t,e){return void 0===e&&(e="#565758"),new qu({style:{fill:e,d:"M ".concat(t,",").concat(t," L -").concat(t,",0 L ").concat(t,",-").concat(t," Z"),transformOrigin:"center"}})},hT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ne(e,t),e.prototype.arcPath=function(t,e,n){var r=je([n,n],2),i=r[0],a=r[1],o=function(r){return[t+n*Math.cos(r),e+n*Math.sin(r)]},s=je(o(-5/4*Math.PI),2),u=s[0],c=s[1],l=je(o(1/4*Math.PI),2),f=l[0],d=l[1];return"M".concat(u,",").concat(c,",A").concat(i,",").concat(a,",0,1,1,").concat(f,",").concat(d)},Object.defineProperty(e.prototype,"label",{get:function(){return"重置"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,a=this.lineWidth,o=a+.5;BE(this.icon).maybeAppend(".reset","path").styles({stroke:r,lineWidth:a,d:this.arcPath(e,n,i/2-a),markerStart:dT(o,r)})},e}(fT),pT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ne(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"快退"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,a=i/2,o=i/2/Math.pow(3,.5),s=[[e,n],[e,n-o],[e-a,n],[e,n+o],[e,n],[e+a,n-o],[e+a,n+o],[e,n]];BE(this.icon).maybeAppend(".backward","polygon").styles({points:s,fill:r})},e}(fT),vT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ne(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"快进"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,a=i/2,o=i/2/Math.pow(3,.5),s=[[e,n],[e,n-o],[e+a,n],[e,n+o],[e,n],[e-a,n-o],[e-a,n+o],[e,n]];BE(this.icon).maybeAppend(".forward","polygon").styles({points:s,fill:r})},e}(fT),gT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ne(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"播放"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,a=i/3*Math.pow(3,.5)*.8,o=[[e+a,n],[e-a/2,n-i/2*.8],[e-a/2,n+i/2*.8],[e+a,n]];BE(this.icon).maybeAppend(".play","polygon").styles({points:o,fill:r})},e}(fT),yT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ne(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"暂停"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,a=i/3,o=[[e-a,n-i/2],[e-a,n+i/2],[e-a/2,n+i/2],[e-a/2,n-i/2],[e-a,n-i/2],[e+a/2,n-i/2],[e+a/2,n+i/2],[e+a,n+i/2],[e+a,n-i/2]];BE(this.icon).maybeAppend(".pause","polygon").styles({points:o,fill:r})},e}(fT),mT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ne(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"范围时间"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,a=this.lineWidth,o=a;BE(this.icon).maybeAppend(".left-line","line").styles({x1:e-i/2,y1:n-i/2,x2:e-i/2,y2:n+i/2,stroke:r,lineWidth:a}),BE(this.icon).maybeAppend(".right-line","line").styles({x1:e+i/2,y1:n-i/2,x2:e+i/2,y2:n+i/2,stroke:r,lineWidth:a}),BE(this.icon).maybeAppend(".left-arrow","line").styles({x1:e,y1:n,x2:e-i/2+2*o,y2:n,stroke:r,lineWidth:a,markerEnd:dT(2*a,r)}),BE(this.icon).maybeAppend(".right-arrow","line").styles({x1:e,y1:n,x2:e+i/2-2*o,y2:n,stroke:r,lineWidth:a,markerEnd:dT(2*a,r)})},e}(fT),bT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ne(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"单一时间"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,a=this.lineWidth;BE(this.icon).maybeAppend(".line","line").styles({x1:e,y1:n-i/2,x2:e,y2:n+i/2,stroke:r,lineWidth:a});var o=a;BE(this.icon).maybeAppend(".left-arrow","line").styles({x1:e-i/2-2*o,y1:n,x2:e-2*o,y2:n,stroke:r,lineWidth:a,markerEnd:dT(2*a,r)}),BE(this.icon).maybeAppend(".right-arrow","line").styles({x1:e+i/2+2*o,y1:n,x2:e+2*o,y2:n,stroke:r,lineWidth:a,markerEnd:dT(2*a,r)})},e}(fT),xT=function(t){return[[-t/2,-t/2],[-t/2,t/2],[t/2,t/2]]},wT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ne(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"折线图"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,a=this.lineWidth,o=(i-2*a-a)/4,s=(i-2*a-a)/2,u=je([e-i/2+a,n+i/2-2*a],2),c=u[0],l=u[1];BE(this.icon).maybeAppend(".coordinate","polyline").styles({points:xT(i).map((function(t){var r=je(t,2),i=r[0],a=r[1];return[i+e,a+n]})),stroke:r,lineWidth:a}),BE(this.icon).maybeAppend(".line","polyline").styles({points:[[c,l],[c+o,l-s],[c+2*o,l],[c+4*o,l-2*s]],stroke:r,lineWidth:a})},e}(fT),kT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ne(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"条形图"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return[1,4,2,4,3]},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.data,e=this.attributes,n=e.x,r=e.y,i=e.color,a=this.iconSize,o=this.lineWidth,s=o,u=(a-s)/t.length,c=(a-2*s)/4,l=je([n-a/2+2*s,r+a/2-s],2),f=l[0],d=l[1];BE(this.icon).maybeAppend(".coordinate","polyline").styles({points:xT(a).map((function(t){var e=je(t,2),i=e[0],a=e[1];return[i+n,a+r]})),stroke:i,lineWidth:o}),BE(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map((function(t,e){return{value:t,index:e}}))).join((function(t){return t.append("line").attr("className","column").style("x1",(function(t){var e=t.index;return f+u*e})).style("y1",d).style("x2",(function(t){var e=t.index;return f+u*e})).style("y2",(function(t){var e=t.value;return d-c*e})).styles({y1:d,stroke:i,lineWidth:o})}))},e}(fT),ET=function(t){function e(e){var n=t.call(this,TE({},{style:{color:"#d8d9d9"}},e))||this;return n.showBackground=!1,n}return Ne(e,t),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,a=this.lineWidth;BE(this.icon).maybeAppend(".split","line").styles({x1:e,y1:n-i/2,x2:e,y2:n+i/2,stroke:r,lineWidth:a})},e}(fT),OT=function(t){function e(){var e=t.apply(this,De([],je(arguments),!1))||this;return e.showBackground=!1,e}return Ne(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return VE(0)},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.iconSize,e=this.attributes,n=e.x,r=e.y,i=e.speed,a=void 0===i?1:i,o=Lw(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),s=Ae(t,20,1/0),u=Ce(Ce({},o),{x:n-s/2,y:r-10,width:s,height:20,defaultValue:a,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:t/5,placeholderFontSize:t/2,optionPadding:0,optionLabelFontSize:t/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});BE(this.icon).maybeAppend(".speed",(function(){return new lT({style:u})})).attr("className","speed").each((function(){this.update(u)}))},e.tag="SpeedSelect",e}(fT),ST=function(t){function e(e){var n=t.call(this,e)||this;return n.icon=n.appendChild(new Bu({})),n.currentType=n.attributes.type,n}return Ne(e,t),e.prototype.getType=function(){return this.currentType},e.prototype.render=function(){var t=this,e=this.attributes,n=(e.onChange,_e(e,["onChange"]));BE(this.icon).selectAll(".icon").data([this.currentType]).join((function(e){return e.append((function(e){var n,r=null===(n=t.toggles.find((function(t){return je(t,1)[0]===e})))||void 0===n?void 0:n[1];if(!r)throw new Error("Invalid type: ".concat(e));return new r({})})).attr("className","icon").styles(n,!1).update({})}),(function(t){return t.styles({restStyles:n}).update({})}),(function(t){return t.remove()}))},e.prototype.bindEvents=function(){var t=this,e=this.attributes.onChange;this.addEventListener("click",(function(n){n.preventDefault(),n.stopPropagation();var r=(t.toggles.findIndex((function(e){return je(e,1)[0]===t.currentType}))+1)%t.toggles.length,i=t.toggles[r][0];null==e||e(t.currentType),t.currentType=i,t.render()}))},e.tag="ToggleIcon",e}(CE),MT=function(t){function e(e){var n=t.call(this,TE({},{style:{type:"play"}},e))||this;return n.toggles=[["play",gT],["pause",yT]],n}return Ne(e,t),e}(ST),TT=function(t){function e(e){var n=t.call(this,TE({},{style:{type:"range"}},e))||this;return n.toggles=[["range",mT],["value",bT]],n}return Ne(e,t),e}(ST),AT=function(t){function e(e){var n=t.call(this,TE({},{style:{type:"column"}},e))||this;return n.toggles=[["line",wT],["column",kT]],n}return Ne(e,t),e}(ST),PT={reset:hT,speed:OT,backward:pT,playPause:MT,forward:vT,selectionType:TT,chartType:AT,split:ET},NT=function(t){function e(n){var r=t.call(this,TE({},e.defaultOptions,n))||this;return r.background=r.appendChild(new Qu({})),r.functions=r.appendChild(new Bu({})),r}return Ne(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return VE(this.attributes.padding)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.style,e=t.x,n=t.y,r=t.width,i=t.height,a=jE(this.attributes,"background");this.background.attr(Ce({x:e,y:n,width:r,height:i},a))},e.prototype.renderFunctions=function(){var t,e=this,n=this.attributes,r=n.functions,i=n.iconSize,a=n.iconSpacing,o=n.x,s=n.y,u=n.width,c=n.height,l=n.align,f=je(this.padding,4),d=f[1],h=f[3],p=r.reduce((function(t,e){return t.length&&e.length?t.concat.apply(t,De(["split"],je(e),!1)):t.concat.apply(t,De([],je(e),!1))}),[]),v=p.length*(i+a)-a,g={left:h+i/2,center:(u-v)/2+i/2,right:u-v-h-d+i/2}[l]||0;null===(t=this.speedSelect)||void 0===t||t.destroy(),this.functions.removeChildren(),p.forEach((function(t,n){var r,u=PT[t],l={x:o+n*(i+a)+g,y:s+c/2,size:i};if(u===OT?(l.speed=e.attributes.speed,l.onSelect=function(n){return e.handleFunctionChange(t,{value:n})}):[MT,TT,AT].includes(u)?(l.onChange=function(n){return e.handleFunctionChange(t,{value:n})},u===MT&&(l.type="play"===e.attributes.state?"pause":"play"),u===TT&&(l.type="range"===e.attributes.selectionType?"value":"range"),u===AT&&(l.type="line"===e.attributes.chartType?"column":"line")):l.onClick=function(){return e.handleFunctionChange(t,{value:t})},u===OT){var f=null===(r=e.ownerDocument)||void 0===r?void 0:r.defaultView;f&&(e.speedSelect=new u({style:Ce(Ce({},l),{zIndex:100})}),f.appendChild(e.speedSelect))}else e.functions.appendChild(new u({style:l}))}))},e.prototype.disconnectedCallback=function(){var e;t.prototype.disconnectedCallback.call(this),null===(e=this.speedSelect)||void 0===e||e.destroy()},e.prototype.render=function(){this.renderBackground(),this.renderFunctions()},e.prototype.handleFunctionChange=function(t,e){var n=this.attributes.onChange;null==n||n(t,e)},e.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},e}(CE),CT=function(t){function e(n){var r=t.call(this,TE({},e.defaultOptions,n))||this;return r.bindEvents(),r}return Ne(e,t),e.prototype.bindEvents=function(){var t=this;this.addEventListener("mouseenter",(function(){t.attr("lineWidth",Math.ceil(+(t.style.r||0)/2))})),this.addEventListener("mouseleave",(function(){t.attr("lineWidth",0)}))},e.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},e}(Du),_T=function(t){function e(n){return t.call(this,TE({},e.defaultOptions,n))||this}return Ne(e,t),e.prototype.renderBackground=function(){var t=this.attributes,e=t.x,n=t.y,r=t.width,i=t.height,a=jE(this.attributes,"background");BE(this).maybeAppend("background","rect").attr("className","background").styles(Ce({x:e-r/2,y:n-i/2,width:r,height:i},a))},e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.iconSize,i=jE(this.attributes,"icon"),a=r/2;BE(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles(Ce({x1:e-1,y1:n-a,x2:e-1,y2:n+a},i)),BE(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles(Ce({x1:e+1,y1:n-a,x2:e+1,y2:n+a},i))},e.prototype.renderBorder=function(){var t=this.attributes,e=t.x,n=t.y,r=t.width,i=t.height,a=t.type,o=jE(this.attributes,"border"),s="start"===a?+r/2:-r/2;BE(this).maybeAppend("border","line").attr("className","border").styles(Ce({x1:s+e,y1:n-i/2,x2:s+e,y2:n+i/2},o))},e.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder()},e.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},e}(CE);function LT(t){var e=String(Math.floor(t/3600)).padStart(2,"0"),n=String(Math.floor(t%3600/60)).padStart(2,"0"),r=String(Math.floor(t%60)).padStart(2,"0");return t<3600?"".concat(n,":").concat(r):"".concat(e,":").concat(n,":").concat(r)}var RT=function(t){function e(n){var r=t.call(this,TE({},e.defaultOptions,n))||this;r.axis=r.appendChild(new tM({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),r.timeline=r.appendChild(new aT({style:{onChange:function(t){r.handleSliderChange(t)}}})),r.controller=r.appendChild(new NT({})),r.states={},r.handleSliderChange=function(t){var e,n=(e=r.states.values,Array.isArray(e)?De([],je(e),!1):e);r.setBySliderValues(t),r.dispatchOnChange(n)};var i=r.attributes,a=i.selectionType,o=i.chartType,s=i.speed,u=i.state,c=i.playMode,l=i.values;return r.states={chartType:o,playMode:c,selectionType:a,speed:s,state:u},r.setByTimebarValues(l),r}return Ne(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.data.sort((function(t,e){return t.time<e.time?-1:t.time>e.time?1:0}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"space",{get:function(){var t=this.attributes,e=t.x,n=t.y,r=t.width,i=t.height,a=t.type,o=t.controllerHeight,s=Ae(+i-o,0,+i),u=new GE(e,n+ +i-o,+r,o),c=0,l="time"===a?10:s;return{axisBBox:"chart"===a?new GE(e,n+s-(c=35),+r,c):new GE,controllerBBox:u,timelineBBox:new GE(e,n+("time"===a?s:s-l),+r,l-c)}},enumerable:!1,configurable:!0}),e.prototype.setBySliderValues=function(t){var e,n,r=this.data,i=je(Array.isArray(t)?t:[0,t],2),a=i[0],o=i[1],s=r.length,u=r[Math.floor(a*s)],c=r[Math.ceil(o*s)-(Array.isArray(t)?0:1)];this.states.values=[null!==(e=null==u?void 0:u.time)&&void 0!==e?e:r[0].time,null!==(n=null==c?void 0:c.time)&&void 0!==n?n:1/0]},e.prototype.setByTimebarValues=function(t){var e,n,r,i=this.data,a=je(Array.isArray(t)?t:[void 0,t],2),o=a[0],s=a[1],u=i.find((function(t){return t.time===o})),c=i.find((function(t){return t.time===s}));this.states.values=[null!==(e=null==u?void 0:u.time)&&void 0!==e?e:null===(n=i[0])||void 0===n?void 0:n.time,null!==(r=null==c?void 0:c.time)&&void 0!==r?r:1/0]},e.prototype.setByIndex=function(t){var e,n,r,i,a=this.data,o=je(t,2),s=o[0],u=o[1];this.states.values=[null!==(n=null===(e=a[s])||void 0===e?void 0:e.time)&&void 0!==n?n:a[0].time,null!==(i=null===(r=this.data[u])||void 0===r?void 0:r.time)&&void 0!==i?i:1/0]},Object.defineProperty(e.prototype,"sliderValues",{get:function(){var t,e=this.states,n=e.values,r=e.selectionType,i=je(Array.isArray(n)?n:[void 0,n],2),a=i[0],o=i[1],s=this.data,u=s.length,c="value"===r;return[(t=s.findIndex((function(t){return t.time===a})),c?0:t>-1?t/u:0),function(){if(o===1/0)return 1;var t=s.findIndex((function(t){return t.time===o}));return t>-1?t/u:c?.5:1}()]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var t=this.states,e=t.values,n=t.selectionType,r=je(Array.isArray(e)?e:[this.data[0].time,e],2),i=r[0],a=r[1];return"value"===n?a:[i,a]},enumerable:!1,configurable:!0}),e.prototype.getDatumByRatio=function(t){var e=this.data,n=e.length;return e[Math.floor(t*(n-1))]},Object.defineProperty(e.prototype,"chartHandleIconShape",{get:function(){var t=this.states.selectionType,e=this.space.timelineBBox.height;return"range"===t?function(t){return new _T({style:{type:t,height:e,iconSize:e/6}})}:function(){return new Yu({style:{x1:0,y1:-e/2,x2:0,y2:e/2,lineWidth:2,stroke:"#c8c8c8"}})}},enumerable:!1,configurable:!0}),e.prototype.getChartStyle=function(t){var e=this,n=t.x,r=t.y,i=t.width,a=t.height,o=this.states,s=o.selectionType,u=o.chartType,c=this.data,l=this.attributes,f=l.type,d=l.labelFormatter,h=jE(this.attributes,"chart"),p=(h.type,_e(h,["type"])),v="range"===s;if("time"===f)return Ce({handleIconShape:function(){return new CT({})},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:v?-15:0,autoFitLabel:v,handleSpacing:v?-15:0,trackFill:"#edeeef",trackLength:i,trackOpacity:.5,trackRadius:a/2,trackSize:a/2,type:s,values:this.sliderValues,formatter:function(t){if(d)return d(t);var n=e.getDatumByRatio(t).time;return"number"==typeof n?LT(n):YO(n,"YYYY-MM-DD HH:mm:ss")},transform:"translate(".concat(n,", ").concat(r,")"),zIndex:1},p);var g="range"===s?5:0,y=c.map((function(t){return t.value}));return Ce({handleIconOffset:g,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:y,sparklineType:u,sparklineScale:.8,trackLength:i,trackSize:a,type:s,values:this.sliderValues,transform:"translate(".concat(n,", ").concat(r,")"),zIndex:1},p)},e.prototype.renderChart=function(t){void 0===t&&(t=this.space.timelineBBox),this.timeline.update(this.getChartStyle(t))},e.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues)},e.prototype.getAxisStyle=function(t){var e=this.data,n=this.attributes,r=n.interval,i=n.labelFormatter,a=jE(this.attributes,"axis"),o=t.x,s=t.y,u=t.width,c=De(De([],je(e),!1),[{time:0}],!1).map((function(t,e,n){var r=t.time;return{label:"".concat(r),value:e/(n.length-1),time:r}})),l=Ce({startPos:[o,s],endPos:[o+u,s],data:c,labelFilter:function(t,e){return e<c.length-1},labelFormatter:function(t){var e=t.time;return i?i(e):function(t,e){return"number"==typeof t?LT(t):function(t,e){var n=new Date(t);switch(e){case"half-hour":case"hour":case"four-hour":return[0,6,12,18].includes(n.getHours())&&0===n.getMinutes()?YO(n,"HH:mm\nYYYY-MM-DD"):YO(n,"HH:mm");case"half-day":return n.getHours()<12?"AM\n".concat(YO(n,"YYYY-MM-DD")):"PM";case"day":return[1,10,20].includes(n.getDate())?YO(n,"DD\nYYYY-MM"):YO(n,"DD");case"week":return n.getDate()<=7?YO(n,"DD\nYYYY-MM"):YO(n,"DD");case"month":return[0,6].includes(n.getMonth())?YO(n,"MM月\nYYYY"):YO(n,"MM月");case"season":return[0].includes(n.getMonth())?YO(n,"MM月\nYYYY"):YO(n,"MM月");case"year":return YO(n,"YYYY");default:return YO(n,"YYYY-MM-DD HH:mm")}}(t,e)}(e,r)}},a);return l},e.prototype.renderAxis=function(t){void 0===t&&(t=this.space.axisBBox),"chart"===this.attributes.type&&this.axis.update(this.getAxisStyle(t))},e.prototype.renderController=function(t){void 0===t&&(t=this.space.controllerBBox);var e=this.attributes.type,n=this.states,r=n.state,i=n.speed,a=n.selectionType,o=n.chartType,s=jE(this.attributes,"controller"),u=this,c=Ce(Ce(Ce({},t),{iconSize:20,speed:i,state:r,selectionType:a,chartType:o,onChange:function(t,e){var n=e.value;switch(t){case"reset":u.internalReset();break;case"speed":u.handleSpeedChange(n);break;case"backward":u.internalBackward();break;case"playPause":"play"===n?u.internalPlay():u.internalPause();break;case"forward":u.internalForward();break;case"selectionType":u.handleSelectionTypeChange(n);break;case"chartType":u.handleChartTypeChange(n)}}}),s);"time"===e&&(c.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(c)},e.prototype.dispatchOnChange=function(t){var e=this.data,n=this.attributes.onChange,r=this.states,i=r.values,a=r.selectionType,o=je(i,2),s=o[0],u=o[1],c=u===1/0?e.at(-1).time:u;t&&function(t,e){if(Array.isArray(t)){if(!Array.isArray(e))return!1;if(t[0]===e[0]){if(t[1]===e[1])return!0;if(t[1]===1/0||e[1]===1/0)return!0}return!1}return!Array.isArray(e)&&t===e}(t,"range"===a?[s,c]:c)||null==n||n("range"===a?[s,c]:c)},e.prototype.internalReset=function(t){var e,n,r=this.states.selectionType;this.internalPause(),this.setBySliderValues("range"===r?[0,1]:[0,0]),this.renderController(),this.updateSelection(),t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onReset)||void 0===n||n.call(e),this.dispatchOnChange())},e.prototype.reset=function(){this.internalReset()},e.prototype.moveSelection=function(t,e){var n=this.data,r=n.length,i=this.states,a=i.values,o=i.selectionType,s=i.playMode,u=je(a,2),c=u[0],l=u[1],f=n.findIndex((function(t){return t.time===c})),d=n.findIndex((function(t){return t.time===l}));-1===d&&(d=r);var h,p="backward"===t?-1:1;"range"===o?"acc"===s?(h=[f,d+p],-1===p&&f===d&&(h=[f,r])):h=[f+p,d+p]:h=[f,d+p];var v=function(t){var e=je(t.sort((function(t,e){return t-e})),2),n=e[0],i=e[1],a=function(t){return Ae(t,0,r)};return i>r?"value"===o?[0,0]:"acc"===s?[a(n),a(n)]:[0,a(i-n)]:n<0?"acc"===s?[0,a(i)]:[a(n+r-i),r]:[a(n),a(i)]}(h);return this.setByIndex(v),this.updateSelection(),v},e.prototype.internalBackward=function(t){var e,n,r=this.moveSelection("backward",t);return t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onBackward)||void 0===n||n.call(e),this.dispatchOnChange()),r},e.prototype.backward=function(){this.internalBackward()},e.prototype.internalPlay=function(t){var e,n,r=this,i=this.data,a=this.attributes.loop,o=this.states.speed,s=void 0===o?1:o;this.playInterval=window.setInterval((function(){r.internalForward()[1]!==i.length||a||(r.internalPause(),r.renderController())}),1e3/s),this.states.state="play",!t&&(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onPlay)||void 0===n||n.call(e))},e.prototype.play=function(){this.internalPlay()},e.prototype.internalPause=function(t){var e,n;clearInterval(this.playInterval),this.states.state="pause",!t&&(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onPause)||void 0===n||n.call(e))},e.prototype.pause=function(){this.internalPause()},e.prototype.internalForward=function(t){var e,n,r=this.moveSelection("forward",t);return t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onForward)||void 0===n||n.call(e),this.dispatchOnChange()),r},e.prototype.forward=function(){this.internalForward()},e.prototype.handleSpeedChange=function(t){var e,n;this.states.speed=t,"play"===this.states.state&&(this.internalPause(!0),this.internalPlay(!0)),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onSpeedChange)||void 0===n||n.call(e,t)},e.prototype.handleSelectionTypeChange=function(t){var e,n;this.states.selectionType=t,this.renderChart(),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onSelectionTypeChange)||void 0===n||n.call(e,t)},e.prototype.handleChartTypeChange=function(t){var e,n;this.states.chartType=t,this.renderChart(),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onChartTypeChange)||void 0===n||n.call(e,t)},e.prototype.render=function(){var t=this.space,e=t.axisBBox,n=t.controllerBBox,r=t.timelineBBox;this.renderController(n),this.renderAxis(e),this.renderChart(r),"play"===this.states.state&&this.internalPlay()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.internalPause(!0)},e.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},e}(CE),jT=["timestamp","time","date","datetime"],DT=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).backup(),r.upsertTimebar(),r}return _(e,t),O(e,[{key:"padding",get:function(){return rf(this.options.padding)}},{key:"play",value:function(){var t;null===(t=this.timebar)||void 0===t||t.play()}},{key:"pause",value:function(){var t;null===(t=this.timebar)||void 0===t||t.pause()}},{key:"forward",value:function(){var t;null===(t=this.timebar)||void 0===t||t.forward()}},{key:"backward",value:function(){var t;null===(t=this.timebar)||void 0===t||t.backward()}},{key:"reset",value:function(){var t;null===(t=this.timebar)||void 0===t||t.reset()}},{key:"update",value:function(t){Dn(e,"update",this,3)([t]),this.backup(),this.upsertTimebar()}},{key:"backup",value:function(){this.originalData=IT(this.context.graph.getData())}},{key:"upsertTimebar",value:function(){var t=this,e=this.context.canvas,n=this.options,r=n.onChange,i=n.timebarType,a=n.data,o=(n.x,n.y,n.width),s=n.height,u=(n.mode,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(n,["onChange","timebarType","data","x","y","width","height","mode"])),c=e.getSize(),l=g(this.padding,1)[0];this.upsertCanvas().ready.then((function(){var e,n=Object.assign(Object.assign({x:c[0]/2-o/2,y:l,onChange:function(e){var n=(fn(e)?e:[e,e]).map((function(t){return function(t){return t instanceof Date}(t)?t.getTime():t}));"modify"===t.options.mode?t.filterElements(n):t.hiddenElements(n),null==r||r(n)}},u),{data:a.map((function(t){return Oe(t)?{time:t,value:0}:t})),width:o,height:s,type:i});t.timebar?t.timebar.update(n):(t.timebar=new RT({style:n}),null===(e=t.canvas)||void 0===e||e.appendChild(t.timebar))}))}},{key:"upsertCanvas",value:function(){if(this.canvas)return this.canvas;var t=this.options,e=t.className,n=t.height,r=t.position,i=this.context.canvas,a=g(i.getSize(),1)[0],o=g(this.padding,3),s=g(jO({width:a,height:n+o[0]+o[2],graphCanvas:i,className:"timebar",placement:r}),2),u=s[0],c=s[1];return this.container=u,e&&u.classList.add(e),this.canvas=c,this.canvas}},{key:"filterElements",value:function(t){return e=this,n=void 0,r=void 0,i=Jn().mark((function e(){var n,r,i,a,o,s,u,c,l,f=this;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.originalData){e.next=2;break}return e.abrupt("return");case 2:return r=this.options,i=r.elementTypes,a=r.getTime,o=this.context,s=o.graph,u=o.element,c=IT(this.originalData),i.forEach((function(e){var n="".concat(e,"s");c[n]=(f.originalData[n]||[]).filter((function(e){var n=a(e);return!!FT(n,t)}))})),l=[].concat(M(c.nodes),M(c.combos)).map((function(t){return Kf(t)})),c.edges=c.edges.filter((function(t){var e=t.source,n=t.target;return l.includes(e)&&l.includes(n)})),s.setData(c),e.next=11,null===(n=u.draw({animation:!1,silence:!0}))||void 0===n?void 0:n.finished;case 11:case"end":return e.stop()}}),e,this)})),new(r||(r=Promise))((function(t,a){function o(t){try{u(i.next(t))}catch(t){a(t)}}function s(t){try{u(i.throw(t))}catch(t){a(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(e.value).then(o,s)}u((i=i.apply(e,n||[])).next())}));var e,n,r,i}},{key:"hiddenElements",value:function(t){var e=this,n=this.context.graph,r=this.options,i=r.elementTypes,a=r.getTime,o=[],s=[];i.forEach((function(n){var r,i="".concat(n,"s");((null===(r=e.originalData)||void 0===r?void 0:r[i])||[]).forEach((function(e){var n=Kf(e),r=a(e);FT(r,t)?s.push(n):o.push(n)}))})),n.hideElement(o,!1),n.showElement(s,!1)}},{key:"destroy",value:function(){var t,n,r,i=this.context.graph;this.originalData&&i.setData(Object.assign({},this.originalData)),null===(t=this.timebar)||void 0===t||t.destroy(),null===(n=this.canvas)||void 0===n||n.destroy(),null===(r=this.container)||void 0===r||r.remove(),this.originalData=void 0,this.container=void 0,this.timebar=void 0,this.canvas=void 0,Dn(e,"destroy",this,3)([])}}])}(Rw);DT.defaultOptions={position:"bottom",enable:!0,timebarType:"time",className:"g6-timebar",width:450,height:60,zIndex:3,elementTypes:["node"],padding:10,mode:"modify",getTime:function(t){return zT(t,jT,void 0)},loop:!1};var IT=function(t){var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,a=t.combos,o=void 0===a?[]:a;return{nodes:M(n),edges:M(i),combos:M(o)}},FT=function(t,e){if(Oe(e))return t===e;var n=g(e,2),r=n[0],i=n[1];return t>=r&&t<=i},zT=function(t,e,n){for(var r,i=0;i<e.length;i++){var a=e[i],o=null===(r=t.data)||void 0===r?void 0:r[a];if(o)return o}return n};function BT(t){var e={top:"unset",right:"unset",bottom:"unset",left:"unset"};return t.split("-").forEach((function(t){e[t]="8px"})),e.flexDirection=t.startsWith("top")||t.startsWith("bottom")?"row":"column",e}var GT=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},WT=function(t){function e(t,n){var r;k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).$element=jw("toolbar",!1),r.onToolbarItemClick=function(t){var e=r.options.onClick;if(t.target instanceof Element&&t.target.className.includes("g6-toolbar-item")){var n=t.target.getAttribute("value");null==e||e(n,t.target)}};var i=r.context.canvas.getContainer();return r.$element.style.display="flex",i.appendChild(r.$element),Dw("g6-toolbar-css","style",{},"\n  .g6-toolbar {\n    position: absolute;\n    z-index: 100;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    border-radius: 4px;\n    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);\n    opacity: 0.65;\n  }\n  .g6-toolbar .g6-toolbar-item {\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    padding: 4px;\n    cursor: pointer;\n    box-sizing: content-box;\n  }\n\n  .g6-toolbar .g6-toolbar-item:hover {\n    background-color: #f0f0f0;\n  }\n\n  .g6-toolbar .g6-toolbar-item svg {\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n  }\n",document.head),Dw("g6-toolbar-svgicon","div",{display:"none"},'\n  <svg>\n    <symbol id="zoom-in" viewBox="64 64 896 896">\n      <path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>\n    </symbol>\n    <symbol id="zoom-out" viewBox="64 64 896 896">\n      <path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>\n    </symbol>\n    <symbol id="edit" viewBox="64 64 896 896">\n      <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path>\n    </symbol>\n    <symbol id="delete" viewBox="64 64 896 896">\n      <path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path>\n    </symbol>\n    <symbol id="redo" viewBox="64 64 896 896">\n      <path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"></path>\n    </symbol>\n    <symbol id="undo" viewBox="64 64 896 896">\n      <path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"></path>\n    </symbol>\n    <symbol id="export" viewBox="64 64 896 896">\n      <path d="M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"></path>\n    </symbol>\n    <symbol id="auto-fit" viewBox="64 64 896 896">\n      <path d="M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"></path>\n      <path d="M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"></path>\n    </symbol>\n    <symbol id="reset" viewBox="64 64 896 896">\n      <path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"></path>\n    </symbol>\n    <symbol id="exit-fullscreen" viewBox="0 0 1024 1024">\n      <path d="M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z"  ></path></symbol>\n    <symbol id="request-fullscreen" viewBox="0 0 1024 1024">\n      <path d="M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z"  ></path></symbol>\n  </svg>\n'),r.$element.addEventListener("click",r.onToolbarItemClick),r.update(n),r}return _(e,t),O(e,[{key:"update",value:function(t){var n=this,r=Object.create(null,{update:{get:function(){return Dn(e,"update",n,1)}}});return GT(this,void 0,void 0,Jn().mark((function e(){var n,i,a,o;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.update.call(this,t),n=this.options,i=n.className,a=n.position,o=n.style,this.$element.className="g6-toolbar ".concat(i||""),Object.assign(this.$element.style,o,BT(a)),e.next=6,this.getDOMContent();case 6:this.$element.innerHTML=e.sent;case 7:case"end":return e.stop()}}),e,this)})))}},{key:"destroy",value:function(){this.$element.removeEventListener("click",this.onToolbarItemClick),this.$element.remove(),Dn(e,"destroy",this,3)([])}},{key:"getDOMContent",value:function(){return GT(this,void 0,void 0,Jn().mark((function t(){var e;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.options.getItems();case 2:return e=t.sent,t.abrupt("return",e.map((function(t){var e;return'\n          <div class="g6-toolbar-item" value="'.concat(t.value,'" title="').concat(null!==(e=t.title)&&void 0!==e?e:"",'">\n            <svg aria-hidden="true" focusable="false">\n              <use xlink:href="#').concat(t.id,'"></use>\n            </svg>\n          </div>')})).join(""));case 4:case"end":return t.stop()}}),t,this)})))}}])}(Rw);function VT(t){var e=document.createElement("div");e.innerHTML=t;var n=e.childNodes[0];return n&&e.contains(n)&&e.removeChild(n),n}WT.defaultOptions={position:"top-left"};var HT=function(t,e){null!=e?t.replaceChildren?Array.isArray(e)?t.replaceChildren.apply(t,De([],je(e),!1)):t.replaceChildren(e):(t.innerHTML="",Array.isArray(e)?e.forEach((function(e){return t.appendChild(e)})):t.appendChild(e)):t.innerHTML=""};function YT(t){return void 0===t&&(t=""),{CONTAINER:"".concat(t,"tooltip"),TITLE:"".concat(t,"tooltip-title"),LIST:"".concat(t,"tooltip-list"),LIST_ITEM:"".concat(t,"tooltip-list-item"),NAME:"".concat(t,"tooltip-list-item-name"),MARKER:"".concat(t,"tooltip-list-item-marker"),NAME_LABEL:"".concat(t,"tooltip-list-item-name-label"),VALUE:"".concat(t,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(t,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(t,"tooltip-crosshair-y")}}var UT={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function qT(t){var e;void 0===t&&(t="");var n=YT(t);return(e={})[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},e[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},e[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},e[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},e[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},e[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},e[".".concat(n.NAME_LABEL)]=Ce({flex:1},UT),e[".".concat(n.VALUE)]=Ce({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},UT),e[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e}var XT=function(t){function e(e){var n,r,i=this,a=null===(r=null===(n=e.style)||void 0===n?void 0:n.template)||void 0===r?void 0:r.prefixCls,o=YT(a);return(i=t.call(this,e,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(o.CONTAINER,'"></div>'),title:'<div class="'.concat(o.TITLE,'"></div>'),item:'<li class="'.concat(o.LIST_ITEM,'" data-index={index}>\n        <span class="').concat(o.NAME,'">\n          <span class="').concat(o.MARKER,'" style="background:{color}"></span>\n          <span class="').concat(o.NAME_LABEL,'" title="{name}">{name}</span>\n        </span>\n        <span class="').concat(o.VALUE,'" title="{value}">{value}</span>\n      </li>')},style:qT(a)})||this).timestamp=-1,i.prevCustomContentKey=i.attributes.contentKey,i.initShape(),i.render(i.attributes,i),i}return Ne(e,t),Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.element},Object.defineProperty(e.prototype,"elementSize",{get:function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var t=this.attributes,e=t.data,n=t.template;return e.map((function(t,e){var r,i,a=t.name,o=void 0===a?"":a,s=t.color,u=void 0===s?"black":s,c=t.index,l=_e(t,["name","color","index"]),f=Ce({name:o,color:u,index:null!=c?c:e},l);return VT((r=n.item,i=f,r&&i?r.replace(/\\?\{([^{}]+)\}/g,(function(t,e){return"\\"===t.charAt(0)?t.slice(1):void 0===i[e]?"":i[e]})):r))}))},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){this.renderHTMLTooltipElement(),this.updatePosition()},e.prototype.destroy=function(){var e;null===(e=this.element)||void 0===e||e.remove(),t.prototype.destroy.call(this)},e.prototype.show=function(t,e){var n=this;if(void 0!==t&&void 0!==e){var r=function(){n.attributes.x=null!=t?t:n.attributes.x,n.attributes.y=null!=e?e:n.attributes.y,n.updatePosition()};"hidden"===this.element.style.visibility?this.closeTransition(r):r()}this.element.style.visibility="visible"},e.prototype.hide=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.attributes.enterable&&this.isCursorEntered(t,e)||(this.element.style.visibility="hidden")},e.prototype.initShape=function(){var t=this.attributes.template;this.element=VT(t.container),this.id&&this.element.setAttribute("id",this.id)},e.prototype.renderCustomContent=function(){if(void 0===this.prevCustomContentKey||this.prevCustomContentKey!==this.attributes.contentKey){this.prevCustomContentKey=this.attributes.contentKey;var t=this.attributes.content;t&&("string"==typeof t?this.element.innerHTML=t:HT(this.element,t))}},e.prototype.renderHTMLTooltipElement=function(){var t,e,n=this.attributes,r=n.template,i=n.title,a=n.enterable,o=n.style,s=n.content,u=YT(r.prefixCls),c=this.element;if(this.element.style.pointerEvents=a?"auto":"none",s)this.renderCustomContent();else{i?(c.innerHTML=r.title,c.getElementsByClassName(u.TITLE)[0].innerHTML=i):null===(e=null===(t=c.getElementsByClassName(u.TITLE))||void 0===t?void 0:t[0])||void 0===e||e.remove();var l=this.HTMLTooltipItemsElements,f=document.createElement("ul");f.className=u.LIST,HT(f,l);var d=this.element.querySelector(".".concat(u.LIST));d?d.replaceWith(f):c.appendChild(f)}!function(t,e){Object.entries(e).forEach((function(e){var n=je(e,2),r=n[0],i=n[1];De([t],je(t.querySelectorAll(r)),!1).filter((function(t){return t.matches(r)})).forEach((function(t){t&&(t.style.cssText+=Object.entries(i).reduce((function(t,e){return"".concat(t).concat(e.join(":"),";")}),""))}))}))}(c,o)},e.prototype.getRelativeOffsetFromCursor=function(t){var e=this.attributes,n=e.position,r=e.offset,i=(t||n).split("-"),a={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},o=this.elementSize,s=o.width,u=o.height,c=[-s/2,-u/2];return i.forEach((function(t){var e=je(c,2),n=e[0],i=e[1],o=je(a[t],2),l=o[0],f=o[1];c=[n+(s/2+r[0])*l,i+(u/2+r[1])*f]})),c},e.prototype.setOffsetPosition=function(t){var e=je(t,2),n=e[0],r=e[1],i=this.attributes,a=i.x,o=void 0===a?0:a,s=i.y,u=void 0===s?0:s,c=i.container,l=c.x,f=c.y;this.element.style.left="".concat(+o+l+n,"px"),this.element.style.top="".concat(+u+f+r,"px")},e.prototype.updatePosition=function(){var t=this.attributes.showDelay,e=void 0===t?60:t,n=Date.now();this.timestamp>0&&n-this.timestamp<e||(this.timestamp=n,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},e.prototype.autoPosition=function(t){var e=je(t,2),n=e[0],r=e[1],i=this.attributes,a=i.x,o=i.y,s=i.bounding,u=i.position;if(!s)return[n,r];var c=this.element,l=c.offsetWidth,f=c.offsetHeight,d=je([+a+n,+o+r],2),h=d[0],p=d[1],v={left:"right",right:"left",top:"bottom",bottom:"top"},g=s.x,y=s.y,m={left:h<g,right:h+l>g+s.width,top:p<y,bottom:p+f>y+s.height},b=[];u.split("-").forEach((function(t){m[t]?b.push(v[t]):b.push(t)}));var x=b.join("-");return this.getRelativeOffsetFromCursor(x)},e.prototype.isCursorEntered=function(t,e){if(this.element){var n=this.element.getBoundingClientRect(),r=n.x,i=n.y,a=n.width,o=n.height;return new GE(r,i,a,o).isPointIn(t,e)}return!1},e.prototype.closeTransition=function(t){var e=this,n=this.element.style.transition;this.element.style.transition="none",t(),setTimeout((function(){e.element.style.transition=n}),10)},e.tag="tooltip",e}(CE),KT=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},$T=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).currentTarget=null,r.tooltipElement=null,r.container=null,r.isEnable=function(t,e){var n=r.options.enable;return"function"==typeof n?n(t,e):n},r.onClick=function(t){var e=t.target.id;r.currentTarget===e?r.hide(t):r.show(t)},r.onPointerMove=function(t){var e=t.target;r.currentTarget&&e.id!==r.currentTarget&&r.show(t)},r.onPointerLeave=function(t){r.hide(t)},r.onCanvasMove=function(t){r.hide(t)},r.onPointerEnter=function(t){r.show(t)},r.showById=function(t){return KT(r,void 0,void 0,Jn().mark((function e(){var n;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={target:{id:t}},e.next=3,this.show(n);case 3:case"end":return e.stop()}}),e,this)})))},r.getElementData=function(t,e){var n=r.context.model;switch(e){case"node":return n.getNodeData([t]);case"edge":return n.getEdgeData([t]);case"combo":return n.getComboData([t]);default:return[]}},r.show=function(t){return KT(r,void 0,void 0,Jn().mark((function e(){var n,r,i,a,o,s,u,c,l,f,d,h,p,v,g;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.client,a=t.target.id,!jg(t.target)){e.next=3;break}return e.abrupt("return");case 3:if(o=this.context.graph.getElementType(a),s=this.options,u=s.getContent,c=s.title,l=this.getElementData(a,o),this.tooltipElement&&this.isEnable(t,l)){e.next=8;break}return e.abrupt("return");case 8:if(f={},!u){e.next=17;break}return e.next=12,u(t,l);case 12:if(f.content=e.sent,f.content){e.next=15;break}return e.abrupt("return");case 15:e.next=20;break;case 17:d=this.context.graph.getElementRenderStyle(a),h="node"===o?d.fill:d.stroke,f={title:c||o,data:l.map((function(t){return{name:"ID",value:t.id||"".concat(t.source," -> ").concat(t.target),color:h}}))};case 20:this.currentTarget=a,i?(p=i.x,v=i.y):(g=ch(l,"0.style",{x:0,y:0}),p=g.x,v=g.y),null===(r=(n=this.options).onOpenChange)||void 0===r||r.call(n,!0),this.tooltipElement.update(Object.assign(Object.assign(Object.assign({},this.tooltipStyleProps),{x:p,y:v,style:{".tooltip":{visibility:"visible"}}}),f));case 24:case"end":return e.stop()}}),e,this)})))},r.hide=function(t){var e,n,i,a,o;if(!t)return null===(n=(e=r.options).onOpenChange)||void 0===n||n.call(e,!1),null===(i=r.tooltipElement)||void 0===i||i.hide(),void(r.currentTarget=null);if(r.tooltipElement&&r.currentTarget){var s=t.client,u=s.x,c=s.y;null===(o=(a=r.options).onOpenChange)||void 0===o||o.call(a,!1),r.tooltipElement.hide(u,c),r.currentTarget=null}},r.initTooltip=function(){var t,e=new XT({className:"tooltip",style:r.tooltipStyleProps});return null===(t=r.container)||void 0===t||t.appendChild(e.HTMLTooltipElement),e},r.render(),r.bindEvents(),r}return _(e,t),O(e,[{key:"getEvents",value:function(){return"click"===this.options.trigger?{"node:click":this.onClick,"edge:click":this.onClick,"combo:click":this.onClick,"canvas:click":this.onPointerLeave,contextmenu:this.onPointerLeave,drag:this.onPointerLeave}:{"node:pointerenter":this.onPointerEnter,"node:pointermove":this.onPointerMove,"canvas:pointermove":this.onCanvasMove,"edge:pointerenter":this.onPointerEnter,"edge:pointermove":this.onPointerMove,"combo:pointerenter":this.onPointerEnter,"combo:pointermove":this.onPointerMove,contextmenu:this.onPointerLeave,"node:drag":this.onPointerLeave}}},{key:"update",value:function(t){var n;this.unbindEvents(),Dn(e,"update",this,3)([t]),this.tooltipElement&&(null===(n=this.container)||void 0===n||n.removeChild(this.tooltipElement.HTMLTooltipElement)),this.tooltipElement=this.initTooltip(),this.bindEvents()}},{key:"render",value:function(){var t=this.context.canvas.getContainer();t&&(this.container=t,this.tooltipElement=this.initTooltip())}},{key:"unbindEvents",value:function(){var t=this.context.graph,e=this.getEvents();Object.keys(e).forEach((function(n){t.off(n,e[n])}))}},{key:"bindEvents",value:function(){var t=this.context.graph,e=this.getEvents();Object.keys(e).forEach((function(n){t.on(n,e[n])}))}},{key:"tooltipStyleProps",get:function(){var t=this.context.canvas,e=t.getBounds().center,n=t.getContainer().getBoundingClientRect(),r=n.top,i=n.left,a=this.options,o=a.style,s=a.position,u=a.enterable,c=a.container,l=void 0===c?{x:-i,y:-r}:c,f=a.title,d=a.offset,h=g(e,2),p=h[0],v=h[1],y=g(t.getSize(),2);return{x:p,y:v,container:l,title:f,bounding:{x:0,y:0,width:y[0],height:y[1]},position:s,enterable:u,offset:d,style:o}}},{key:"destroy",value:function(){var t;this.unbindEvents(),this.tooltipElement&&(null===(t=this.container)||void 0===t||t.removeChild(this.tooltipElement.HTMLTooltipElement)),Dn(e,"destroy",this,3)([])}}])}(Rw);$T.defaultOptions={trigger:"hover",position:"top-right",enterable:!1,enable:!0,offset:[10,10],style:{".tooltip":{visibility:"hidden"}}};var ZT,QT=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))};function JT(t,e){return ZT||(ZT=document.createElement("canvas")),ZT.width=t,ZT.height=e,ZT.getContext("2d").clearRect(0,0,t,e),ZT}function tA(t,e,n,r){return QT(this,void 0,void 0,Jn().mark((function i(){var a,o,s,u,c,l,f,d,h,p,v;return Jn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=JT(t,e),o=a.getContext("2d"),s=r.rotate,u=r.opacity,c=r.textFill,l=r.textFontSize,f=r.textFontFamily,d=r.textFontVariant,h=r.textFontWeight,p=r.textAlign,v=r.textBaseline,o.textAlign=p,o.textBaseline=v,o.translate(t/2,e/2),o.font="".concat(l,"px ").concat(f," ").concat(d," ").concat(h),s&&o.rotate(s),u&&(o.globalAlpha=u),c&&(o.fillStyle=c,o.fillText("".concat(n),0,0)),i.abrupt("return",a.toDataURL());case 11:case"end":return i.stop()}}),i)})))}function eA(t,e,n,r){return QT(this,void 0,void 0,Jn().mark((function i(){var a,o,s,u,c;return Jn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=JT(t,e),o=a.getContext("2d"),s=r.rotate,u=r.opacity,s&&o.rotate(s),u&&(o.globalAlpha=u),(c=new Image).crossOrigin="anonymous",c.src=n,i.abrupt("return",new Promise((function(n){c.onload=function(){var r=t>c.width?(t-c.width)/2:0,i=e>c.height?(e-c.height)/2:0;o.drawImage(c,0,0,c.width,c.height,r,i,t-2*r,e-2*i),n(a.toDataURL())}})));case 9:case"end":return i.stop()}}),i)})))}var nA=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},rA=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).$element=jw("watermark"),r.context.canvas.getContainer().appendChild(r.$element),r.update(n),r}return _(e,t),O(e,[{key:"update",value:function(t){var n,r,i,a,o=this,s=Object.create(null,{update:{get:function(){return Dn(e,"update",o,1)}}});return n=this,r=void 0,i=void 0,a=Jn().mark((function e(){var n,r,i,a,o,u,c,l=this;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.update.call(this,t),n=this.options,r=n.width,i=n.height,a=n.text,o=n.imageURL,u=nA(n,["width","height","text","imageURL"]),Object.keys(u).forEach((function(e){e.startsWith("background")&&(l.$element.style[e]=t[e])})),!o){e.next=9;break}return e.next=6,eA(r,i,o,u);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,tA(r,i,a,u);case 11:e.t0=e.sent;case 12:c=e.t0,this.$element.style.backgroundImage="url(".concat(c,")");case 14:case"end":return e.stop()}}),e,this)})),new(i||(i=Promise))((function(t,e){function o(t){try{u(a.next(t))}catch(t){e(t)}}function s(t){try{u(a.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(e.value).then(o,s)}u((a=a.apply(n,r||[])).next())}))}},{key:"destroy",value:function(){Dn(e,"destroy",this,3)([]),this.$element.remove()}}])}(Rw);rA.defaultOptions={width:200,height:100,opacity:.2,rotate:Math.PI/12,text:"",textFill:"#000",textFontSize:16,textAlign:"center",textBaseline:"middle",backgroundRepeat:"repeat"};var iA=["#7E92B5","#F4664A","#FFBE3A"],aA={type:"group",color:["#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]},oA={type:"group",color:["#99ADD1","#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};function sA(t){var e=t.bgColor,n=t.textColor,r=t.nodeColor,i=t.nodeColorDisabled,a=t.nodeStroke,o=t.nodeHaloStrokeOpacityActive,s=void 0===o?.15:o,u=t.nodeHaloStrokeOpacitySelected,c=void 0===u?.25:u,l=t.nodeOpacityDisabled,f=void 0===l?.06:l,d=t.nodeIconOpacityInactive,h=void 0===d?.85:d,p=t.nodeOpacityInactive,v=void 0===p?.25:p,g=t.nodeBadgePalette,y=void 0===g?iA:g,m=t.nodePaletteOptions,b=void 0===m?aA:m,x=t.edgeColor,w=t.edgeColorDisabled,k=t.edgePaletteOptions,E=void 0===k?oA:k,O=t.comboColor,S=t.comboColorDisabled,M=t.comboStroke,T=t.comboStrokeDisabled;return{background:e,node:{palette:b,style:{donutOpacity:1,badgeBackgroundOpacity:1,badgeFill:"#fff",badgeFontSize:8,badgePadding:[0,4],badgePalette:y,fill:r,fillOpacity:1,halo:!1,iconFill:"#fff",iconOpacity:1,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelFill:n,labelFillOpacity:.85,labelLineHeight:16,labelPadding:[0,2],labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelOffsetY:2,lineWidth:0,portFill:r,portLineWidth:1,portStroke:a,portStrokeOpacity:.65,size:32,stroke:a,strokeOpacity:1,zIndex:2},state:{selected:{halo:!0,haloLineWidth:24,haloStrokeOpacity:c,labelFontSize:12,labelFontWeight:"bold",lineWidth:4,stroke:a},active:{halo:!0,haloLineWidth:12,haloStrokeOpacity:s},highlight:{labelFontWeight:"bold",lineWidth:4,stroke:a,strokeOpacity:.85},inactive:{badgeBackgroundOpacity:v,donutOpacity:v,fillOpacity:v,iconOpacity:h,labelFill:n,labelFillOpacity:v,strokeOpacity:v},disabled:{badgeBackgroundOpacity:.25,donutOpacity:f,fill:i,fillOpacity:f,iconFill:i,iconOpacity:.25,labelFill:n,labelFillOpacity:.25,strokeOpacity:f}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"node-expand",collapse:"node-collapse",update:[{fields:["x","y","fill","stroke"]}],translate:[{fields:["x","y"]}]}},edge:{palette:E,style:{badgeBackgroundFill:x,badgeFill:"#fff",badgeFontSize:8,badgeOffsetX:10,fillOpacity:1,halo:!1,haloLineWidth:12,haloStrokeOpacity:1,increasedLineWidthForHitTesting:2,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[4,4,4,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelPlacement:"center",labelTextBaseline:"middle",lineWidth:1,stroke:x,strokeOpacity:1,zIndex:1},state:{selected:{halo:!0,haloStrokeOpacity:.25,labelFontSize:14,labelFontWeight:"bold",lineWidth:3},active:{halo:!0,haloStrokeOpacity:.15},highlight:{labelFontWeight:"bold",lineWidth:3},inactive:{stroke:t.edgeColorInactive,fillOpacity:.08,labelOpacity:.25,strokeOpacity:.08,badgeBackgroundOpacity:.25},disabled:{stroke:w,fillOpacity:.45,strokeOpacity:.45,labelOpacity:.25,badgeBackgroundOpacity:.45}},animation:{enter:"fade",exit:"fade",expand:"path-in",collapse:"path-out",show:"fade",hide:"fade",update:[{fields:["sourceNode","targetNode"]},{fields:["stroke"],shape:"key"}],translate:[{fields:["sourceNode","targetNode"]}]}},combo:{style:{collapsedMarkerFill:e,collapsedMarkerFontSize:12,collapsedMarkerFillOpacity:1,collapsedSize:32,collapsedFillOpacity:1,fill:O,halo:!1,haloLineWidth:12,haloStroke:M,haloStrokeOpacity:.25,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[2,4,2,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,lineDash:0,lineWidth:1,fillOpacity:.04,strokeOpacity:1,padding:10,stroke:M},state:{selected:{halo:!0,labelFontSize:14,labelFontWeight:700,lineWidth:4},active:{halo:!0},highlight:{labelFontWeight:700,lineWidth:4},inactive:{fillOpacity:.65,labelOpacity:.25,strokeOpacity:.65},disabled:{fill:S,fillOpacity:.25,labelOpacity:.25,stroke:T,strokeOpacity:.25}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"combo-expand",collapse:"combo-collapse",update:[{fields:["x","y"]},{fields:["fill","stroke","lineWidth"],shape:"key"}],translate:[{fields:["x","y"]}]}}}}var uA=sA({bgColor:"#000000",comboColor:"#fdfdfd",comboColorDisabled:"#d0e4ff",comboStroke:"#99add1",comboStrokeDisabled:"#969696",edgeColor:"#637088",edgeColorDisabled:"#637088",edgeColorInactive:"#D0E4FF",edgePaletteOptions:{type:"group",color:["#637088","#0F55A6","#008383","#9C5D38","#8B53A6","#4E40A6","#8F6608","#3E801D","#A65383","#175E75","#0F8248"]},nodeColor:"#1783ff",nodeColorDisabled:"#D0E4FF",nodeHaloStrokeOpacityActive:.25,nodeHaloStrokeOpacitySelected:.45,nodeIconOpacityInactive:.45,nodeOpacityDisabled:.25,nodeOpacityInactive:.45,nodeStroke:"#d0e4ff",textColor:"#ffffff"}),cA=sA({bgColor:"#ffffff",comboColor:"#99ADD1",comboColorDisabled:"#f0f0f0",comboStroke:"#99add1",comboStrokeDisabled:"#d9d9d9",edgeColor:"#99add1",edgeColorDisabled:"#d9d9d9",edgeColorInactive:"#1B324F",nodeColor:"#1783ff",nodeColorDisabled:"#1B324F",nodeHaloStrokeOpacityActive:.15,nodeHaloStrokeOpacitySelected:.25,nodeIconOpacityInactive:.85,nodeOpacityDisabled:.06,nodeOpacityInactive:.25,nodeStroke:"#000000",textColor:"#000000"}),lA=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"beforeDraw",value:function(t,e){return t}},{key:"afterLayout",value:function(t,e){}}])}(cd),fA=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"beforeDraw",value:function(t){var e=this.context.model,n=t.add.combos,r=function(t){var n=[];return t.forEach((function(t,r){var i=e.getAncestorsData(r,"combo").map((function(t){return Kf(t)})).reverse();n.push([r,t,i.length])})),new Map(n.sort((function(t,e){var n=g(t,3)[2];return g(e,3)[2]-n})).map((function(t){var e=g(t,2);return[e[0],e[1]]})))};return t.add.combos=r(n),t.update.combos=r(t.update.combos),t}}])}(lA);function dA(t,e,n,r,i){var a=Kf(r),o="".concat(n,"s"),s=i?r:t.add[o].get(a)||t.update[o].get(a)||t.remove[o].get(a)||r;Object.entries(t).forEach((function(t){var n=g(t,2),r=n[0],i=n[1];e===r?i[o].set(a,s):i[o].delete(a)}))}function hA(t,e){return Object.keys(t).every((function(n){return t[n]===e[n]}))}var pA=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"beforeDraw",value:function(t,e){var n=this;if("visibility"===e.stage)return t;if(!this.context.model.model.hasTreeStructure(Al))return t;for(var r=this.context.model,i=t.add,a=t.update,o=[].concat(M(t.update.combos.entries()),M(t.add.combos.entries()));o.length;){var s=g(o.pop(),2),u=s[0];if(uh(s[1])){var c=r.getDescendantsData(u),l=Uv(c.map(Kf),(function(t){return r.getRelatedEdgesData(t)})),f=l.internal,d=l.external;c.forEach((function(e){var n=Kf(e),i=o.findIndex((function(t){return g(t,1)[0]===n}));-1!==i&&o.splice(i,1);var a=r.getElementType(n);dA(t,"remove",a,e)})),f.forEach((function(e){return dA(t,"remove","edge",e)})),d.forEach((function(t){var e,r=Kf(t);(null===(e=n.context.element)||void 0===e?void 0:e.getElement(r))?a.edges.set(r,t):i.edges.set(r,t)}))}else{var h=r.getChildrenData(u),p=Uv(h.map(Kf),(function(t){return r.getRelatedEdgesData(t)})),v=p.edges;[].concat(M(h),M(v)).forEach((function(e){var i,a=Kf(e),s=r.getElementType(a),u=null===(i=n.context.element)||void 0===i?void 0:i.getElement(a);dA(t,u?"update":"add",s,e),"combo"===s&&o.push([a,e])}))}}return t}}])}(lA),vA=function(t,e,n,r){var i="".concat(n,"s"),a=Kf(r);t.add[i].has(a)||t.update[i].has(a)||t[e][i].set(Kf(r),r)},gA=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"getElement",value:function(t){return this.context.element.getElement(t)}},{key:"handleExpand",value:function(t,e){var n=this;if(vA(e,"add","node",t),!uh(t)){var r=Kf(t);vA(e,"add","node",t),this.context.model.getRelatedEdgesData(r,"out").forEach((function(t){dA(e,"add","edge",t)})),this.context.model.getChildrenData(r).forEach((function(t){n.handleExpand(t,e)}))}}},{key:"beforeDraw",value:function(t){var e=this,n=this.context,r=n.graph,i=n.model;if(!i.model.hasTreeStructure(Pl))return t;var a=t.add,o=a.nodes,s=a.edges,u=t.update.nodes,c=new Map,l=new Map;o.forEach((function(t,e){uh(t)&&c.set(e,t)})),s.forEach((function(t){if("node"===r.getElementType(t.source)){var e=r.getNodeData(t.source);uh(e)&&c.set(t.source,e)}})),u.forEach((function(t,n){var r=e.getElement(n);if(r){var i=r.attributes.collapsed;uh(t)?i||c.set(n,t):i&&l.set(n,t)}}));var f=new Set;return c.forEach((function(e,n){i.getDescendantsData(n).forEach((function(e){var n=Kf(e);f.has(n)||(dA(t,"remove","node",e),i.getRelatedEdgesData(n).forEach((function(e){dA(t,"remove","edge",e)})),f.add(n))}))})),l.forEach((function(n,r){i.getAncestorsData(r,Pl).some(uh)?dA(t,"remove","node",n):e.handleExpand(n,t)})),t}}])}(lA),yA=new WeakMap;function mA(t,e,n){yA.has(t)||yA.set(t,{});var r=yA.get(t);if(!r[e])return r[e]=n,!0;var i=r[e];return!bA(i,n)&&(r[e]=n,!0)}var bA=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if("object"!=typeof t||"object"!=typeof e)return t===e;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var a=0,o=r;a<o.length;a++){var s=o[a],u=t[s],c=e[s];if(n>1&&"object"==typeof u&&"object"==typeof c){if(!bA(u,c,n-1))return!1}else if(u!==c)return!1}return!0};function xA(t,e,n){Nl[t][e]&&Dl.warn("The extension ".concat(e," of ").concat(t," has been registered before, and will be overridden.")),Object.assign(Nl[t],b({},e,n))}var wA=function(){function t(e){k(this,t),this.dragndropPluginOptions=e}return O(t,[{key:"apply",value:function(e){var n=this,r=e.renderingService,i=e.renderingContext.root.ownerDocument,a=i.defaultView,o=function(t){var e=t.target,r=e===i,o=r&&n.dragndropPluginOptions.isDocumentDraggable?i:e.closest&&e.closest("[draggable=true]");if(o){var s=!1,u=t.timeStamp,c=[t.clientX,t.clientY],l=null,f=[t.clientX,t.clientY],d=function(){var t=er(Jn().mark((function t(a){var d,h,p,v,g,y;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=8;break}if(d=a.timeStamp-u,h=Se([a.clientX,a.clientY],c),!(d<=n.dragndropPluginOptions.dragstartTimeThreshold||h<=n.dragndropPluginOptions.dragstartDistanceThreshold)){t.next=5;break}return t.abrupt("return");case 5:a.type="dragstart",o.dispatchEvent(a),s=!0;case 8:if(a.type="drag",a.dx=a.clientX-f[0],a.dy=a.clientY-f[1],o.dispatchEvent(a),f=[a.clientX,a.clientY],r){t.next=21;break}return p="pointer"===n.dragndropPluginOptions.overlap?[a.canvasX,a.canvasY]:e.getBounds().center,t.next=17,i.elementsFromPoint(p[0],p[1]);case 17:v=t.sent,g=v[v.indexOf(e)+1],y=(null==g?void 0:g.closest("[droppable=true]"))||(n.dragndropPluginOptions.isDocumentDroppable?i:null),l!==y&&(l&&(a.type="dragleave",a.target=l,l.dispatchEvent(a)),y&&(a.type="dragenter",a.target=y,y.dispatchEvent(a)),(l=y)&&(a.type="dragover",a.target=l,l.dispatchEvent(a)));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();a.addEventListener("pointermove",d);var h=function(t){if(s){t.detail={preventClick:!0};var e=t.clone();l&&(e.type="drop",e.target=l,l.dispatchEvent(e)),e.type="dragend",o.dispatchEvent(e),s=!1}a.removeEventListener("pointermove",d)};e.addEventListener("pointerup",h,{once:!0}),e.addEventListener("pointerupoutside",h,{once:!0})}};r.hooks.init.tap(t.tag,(function(){a.addEventListener("pointerdown",o)})),r.hooks.destroy.tap(t.tag,(function(){a.removeEventListener("pointerdown",o)}))}}])}();wA.tag="Dragndrop";var kA=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,e),(t=N(this,e)).name="dragndrop",t.options=n,t}return _(e,t),O(e,[{key:"init",value:function(){this.addRenderingPlugin(new wA(w({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(t){Object.assign(this.plugins[0].dragndropPluginOptions,t)}}])}(ur),EA=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},OA=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},SA=["main"],MA=["background","main","label","transient"],TA=function(){return O((function t(e){k(this,t),this.config={enableMultiLayer:!0},Object.assign(this.config,e);var n=this.config,r=n.renderer,i=n.background,a=(n.cursor,n.enableMultiLayer),o=OA(n,["renderer","background","cursor","enableMultiLayer"]),s=a?MA:SA,u=AA(r,s),c=Object.fromEntries(s.map((function(t){return[t,new pc(Object.assign(Object.assign({},o),{supportsMutipleCanvasesInOneContainer:a,renderer:u[t],background:a?"background"===t?i:void 0:i}))]})));PA(c),this.extends={config:this.config,renderer:r,renderers:u,layers:c}}),[{key:"getConfig",value:function(){return this.config}},{key:"getLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.extends.layers[t]||this.getLayers().main}},{key:"getLayers",value:function(){return this.extends.layers}},{key:"getRenderer",value:function(t){return this.extends.renderers[t]}},{key:"getCamera",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.getLayer(t).getCamera()}},{key:"getRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.getLayer(t).getRoot()}},{key:"getContextService",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.getLayer(t).getContextService()}},{key:"setCursor",value:function(t){this.config.cursor=t,this.getLayer().setCursor(t)}},{key:"document",get:function(){return this.getLayer().document}},{key:"context",get:function(){return this.getLayer().context}},{key:"ready",get:function(){return Promise.all(Object.entries(this.getLayers()).map((function(t){return g(t,2)[1].ready})))}},{key:"resize",value:function(t,e){Object.assign(this.extends.config,{width:t,height:e}),Object.values(this.getLayers()).forEach((function(n){var r=n.getCamera(),i=r.getPosition(),a=r.getFocalPoint();n.resize(t,e),r.setPosition(i),r.setFocalPoint(a)}))}},{key:"getBounds",value:function(t){return df(Object.values(this.getLayers()).map((function(e){var n=t?e.getRoot().childNodes.find((function(e){return e.classList.includes(t)})):e.getRoot();return n})).filter((function(t){return(null==t?void 0:t.childNodes.length)>0})).map((function(t){return t.getBounds()})))}},{key:"getContainer",value:function(){var t=this.extends.config.container;return"string"==typeof t?document.getElementById(t):t}},{key:"getSize",value:function(){return[this.extends.config.width||0,this.extends.config.height||0]}},{key:"appendChild",value:function(t,e){var n,r=(null===(n=t.style)||void 0===n?void 0:n.$layer)||"main";return this.getLayer(r).appendChild(t,e)}},{key:"setRenderer",value:function(t){var e=this;if(t!==this.extends.renderer){var n=AA(t,this.config.enableMultiLayer?MA:SA);this.extends.renderers=n,Object.entries(n).forEach((function(t){var n=g(t,2),r=n[0],i=n[1];return e.getLayer(r).setRenderer(i)})),PA(this.getLayers())}}},{key:"getCanvasByViewport",value:function(t){return Id(this.getLayer().viewport2Canvas(Fd(t)))}},{key:"getViewportByCanvas",value:function(t){return Id(this.getLayer().canvas2Viewport(Fd(t)))}},{key:"getViewportByClient",value:function(t){return Id(this.getLayer().client2Viewport(Fd(t)))}},{key:"getClientByViewport",value:function(t){return Id(this.getLayer().viewport2Client(Fd(t)))}},{key:"getClientByCanvas",value:function(t){return this.getClientByViewport(this.getViewportByCanvas(t))}},{key:"getCanvasByClient",value:function(t){var e=this.getLayer(),n=e.client2Viewport(Fd(t));return Id(e.viewport2Canvas(n))}},{key:"toDataURL",value:function(){return EA(this,arguments,void 0,(function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Jn().mark((function n(){var r,i,a,o,s,u,c,l,f,d,h,p,v,y,m,b,x,w,k,E,O,S,M,T,A,P,N,C,_,L,R,j;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=globalThis.devicePixelRatio||1,i=e.mode,a=void 0===i?"viewport":i,o=OA(e,["mode"]),s=0,u=0,c=0,l=0,"viewport"===a?(f=t.getSize(),d=g(f,2),c=d[0],l=d[1]):"overall"===a&&(h=t.getBounds(),p=uf(h),v=g(h.min,2),s=v[0],u=v[1],y=g(p,2),c=y[0],l=y[1]),m=VT('<div id="virtual-image"></div>'),b=new pc({width:c,height:l,renderer:new dv,devicePixelRatio:r,container:m,background:t.extends.config.background}),n.next=8,b.ready;case 8:return b.appendChild(t.getLayer("background").getRoot().cloneNode(!0)),b.appendChild(t.getRoot().cloneNode(!0)),x=t.getLayer("label").getRoot().cloneNode(!0),w=b.viewport2Canvas({x:0,y:0}),k=t.getCanvasByViewport([0,0]),x.translate([k[0]-w.x,k[1]-w.y]),x.scale(1/t.getCamera().getZoom()),b.appendChild(x),b.appendChild(t.getLayer("transient").getRoot().cloneNode(!0)),E=t.getCamera(),O=b.getCamera(),"viewport"===a?(O.setZoom(E.getZoom()),O.setPosition(E.getPosition()),O.setFocalPoint(E.getFocalPoint())):"overall"===a&&(S=O.getPosition(),M=g(S,3),T=M[0],A=M[1],P=M[2],N=O.getFocalPoint(),C=g(N,3),_=C[0],L=C[1],R=C[2],O.setPosition([T+s,A+u,P]),O.setFocalPoint([_+s,L+u,R])),j=b.getContextService(),n.abrupt("return",new Promise((function(e){b.addEventListener(uc.RERENDER,(function(){return EA(t,void 0,void 0,Jn().mark((function t(){var n;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){return setTimeout(t,300)}));case 2:return t.next=4,j.toDataURL(o);case 4:n=t.sent,e(n);case 6:case"end":return t.stop()}}),t)})))}))})));case 22:case"end":return n.stop()}}),n)}))()}))}},{key:"destroy",value:function(){Object.values(this.getLayers()).forEach((function(t){t.getCamera().cancelLandmarkAnimation(),t.destroy()}))}}])}();function AA(t,e){return Object.fromEntries(e.map((function(e){var n=(null==t?void 0:t(e))||new dv;return n instanceof dv&&n.setConfig({enableDirtyRectangleRendering:!1}),"main"===e?n.registerPlugin(new kA({isDocumentDraggable:!0,isDocumentDroppable:!0,dragstartDistanceThreshold:10,dragstartTimeThreshold:100})):n.unregisterPlugin(n.getPlugin("dom-interaction")),[e,n]})))}function PA(t){Object.entries(t).forEach((function(t){var e=g(t,2),n=e[0],r=e[1].getContextService().getDomElement();(null==r?void 0:r.style)&&(r.style.gridArea="1 / 1 / 2 / 2",r.style.outline="none",r.tabIndex=1,"main"!==n&&(r.style.pointerEvents="none")),(null==r?void 0:r.parentElement)&&(r.parentElement.style.display="grid")}))}var NA=function(t){return t?parseInt(t):0};function CA(t){if(!t)return[0,0];var e=640,n=480,r=function(t){var e=getComputedStyle(t),n=t.clientWidth||NA(e.width),r=t.clientHeight||NA(e.height);return[n-(NA(e.paddingLeft)+NA(e.paddingRight)),r-(NA(e.paddingTop)+NA(e.paddingBottom))]}(t),i=g(r,2);return e=i[0]||e,n=i[1]||n,[Math.max(Oe(e)?e:1,1),Math.max(Oe(n)?n:1,1)]}var _A=O((function t(e){k(this,t),this.type=e})),LA=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t])).data=n,r}return _(e,t),O(e)}(_A),RA=function(t){function e(t,n,r,i){var a;return k(this,e),(a=N(this,e,[t])).animationType=n,a.animation=r,a.data=i,a}return _(e,t),O(e)}(_A),jA=function(t){function e(t,n,r){var i;return k(this,e),(i=N(this,e,[t])).elementType=n,i.data=r,i}return _(e,t),O(e)}(_A),DA=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t])).data=n,r}return _(e,t),O(e)}(_A);function IA(t,e){t.emit(e.type,e)}function FA(t){var e;return(null===(e=null==t?void 0:t.style)||void 0===e?void 0:e.zIndex)||0}var zA="cachedStyle",BA=function(t){return"__".concat(t,"__")};function GA(t,e){return ch(t,[zA,BA(e)])}var WA=function(){return O((function t(e){k(this,t),this.tasks=[],this.animations=new Set,this.context=e}),[{key:"getTasks",value:function(){var t=M(this.tasks);return this.tasks=[],t}},{key:"add",value:function(t,e){this.tasks.push([t,e])}},{key:"animate",value:function(t,e,n){var r,i,a,o=this;null===(r=null==e?void 0:e.before)||void 0===r||r.call(e);var s=this.getTasks().map((function(e){var r,i,a,s=g(e,2),u=s[0],c=s[1],l=u.element,f=u.elementType,d=u.stage,h=function(t,e,n,r){var i,a,o=t.animation;if(!1===o||!1===r)return[];var s=null===(i=null==t?void 0:t[e])||void 0===i?void 0:i.animation;if(!1===s)return[];var u=null==s?void 0:s[n];if(!1===u)return[];var c=null===(a=Il(t)[e])||void 0===a?void 0:a.animation,l=function(){return function(t){return"string"==typeof t?Cl(Tl.ANIMATION,t)||(Dl.warn("The animation of ".concat(t," is not registered.")),[]):t}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return Object.assign(Object.assign(Object.assign(Object.assign({},Ml),Ln(o)&&o),t),Ln(r)&&r)}))};if(u)return l(u);if(!c)return[];var f=c[n];return!1===f?[]:l(f)}(o.context.options,f,d,t);null===(r=null==c?void 0:c.before)||void 0===r||r.call(c);var p=h.length?Vl(l,o.inferStyle(u,n),h):null;return p?(null===(i=null==c?void 0:c.beforeAnimate)||void 0===i||i.call(c,p),p.finished.then((function(){var t,e;null===(t=null==c?void 0:c.afterAnimate)||void 0===t||t.call(c,p),null===(e=null==c?void 0:c.after)||void 0===e||e.call(c),o.animations.delete(p)}))):null===(a=null==c?void 0:c.after)||void 0===a||a.call(c),p})).filter(Boolean);s.forEach((function(t){return o.animations.add(t)}));var u=Fl(s);return u?(null===(i=null==e?void 0:e.beforeAnimate)||void 0===i||i.call(e,u),u.finished.then((function(){var t,n;null===(t=null==e?void 0:e.afterAnimate)||void 0===t||t.call(e,u),null===(n=null==e?void 0:e.after)||void 0===n||n.call(e),o.release()}))):null===(a=null==e?void 0:e.after)||void 0===a||a.call(e),u}},{key:"inferStyle",value:function(t,e){var n,r,i=t.element,a=t.elementType,o=t.stage,s=t.originalStyle,u=t.updatedStyle,c=void 0===u?{}:u;t.modifiedStyle||(t.modifiedStyle=Object.assign(Object.assign({},s),c));var l=t.modifiedStyle,f={},d={};if("enter"===o)Object.assign(f,{opacity:0});else if("exit"===o)Object.assign(d,{opacity:0});else if("show"===o)Object.assign(f,{opacity:0}),Object.assign(d,{opacity:null!==(n=GA(i,"opacity"))&&void 0!==n?n:Bl("opacity")});else if("hide"===o)Object.assign(f,{opacity:null!==(r=GA(i,"opacity"))&&void 0!==r?r:Bl("opacity")}),Object.assign(d,{opacity:0});else if("collapse"===o){var h=(e||{}).collapse,p=h.target,v=h.descendants,y=h.position;if("node"===a){if(v.includes(i.id)){var m=g(y,3),b=m[0],x=m[1],w=m[2];Object.assign(d,{x:b,y:x,z:w})}}else if("combo"===a){if(i.id===p||v.includes(i.id)){var k=g(y,2),E=k[0],O=k[1];Object.assign(d,{x:E,y:O,childrenNode:s.childrenNode})}}else"edge"===a&&Object.assign(d,{sourceNode:l.sourceNode,targetNode:l.targetNode})}else if("expand"===o){var S=(e||{}).expand,M=S.target,T=S.descendants,A=S.position;if("node"===a){if(i.id===M||T.includes(i.id)){var P=g(A,3),N=P[0],C=P[1],_=P[2];Object.assign(f,{x:N,y:C,z:_})}}else if("combo"===a){if(i.id===M||T.includes(i.id)){var L=g(A,3),R=L[0],j=L[1],D=L[2];Object.assign(f,{x:R,y:j,z:D,childrenNode:l.childrenNode})}}else"edge"===a&&Object.assign(f,{sourceNode:l.sourceNode,targetNode:l.targetNode})}return[Object.keys(f).length>0?Object.assign({},s,f):s,Object.keys(d).length>0?Object.assign({},l,d):l]}},{key:"stop",value:function(){this.animations.forEach((function(t){return t.cancel()}))}},{key:"clear",value:function(){this.tasks=[]}},{key:"release",value:function(){var t,e,n=this.context.canvas,r=null===(e=null===(t=n.document)||void 0===t?void 0:t.timeline)||void 0===e?void 0:e.animationsWithPromises;r&&(n.document.timeline.animationsWithPromises=r.filter((function(t){return"finished"!==t.playState})))}},{key:"destroy",value:function(){this.stop(),this.animations.clear(),this.tasks=[]}}])}(),VA=function(){return O((function t(e){k(this,t),this.batchCount=0,this.context=e}),[{key:"emit",value:function(t){this.context.graph.emit(t.type,t)}},{key:"startBatch",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.batchCount++,1===this.batchCount&&this.emit(new LA(kl.BATCH_START,{initiate:t}))}},{key:"endBatch",value:function(){this.batchCount--,0===this.batchCount&&this.emit(new LA(kl.BATCH_END))}},{key:"isBatching",get:function(){return this.batchCount>0}},{key:"destroy",value:function(){this.context=null}}])}(),HA=function(t){function e(t){var n;return k(this,e),(n=N(this,e,[t])).currentTarget=null,n.currentTargetType=null,n.category="behavior",n.forwardCanvasEvents=function(t){var e=t.target,r=function(t){if(!t)return null;if(t instanceof nc)return{type:"canvas",element:t};for(var e=t;e;){if(xg(e))return{type:"node",element:e};if(wg(e))return{type:"edge",element:e};if(kg(e))return{type:"combo",element:e};e=e.parentElement}return null}(e);if(r){var i=n.context,a=i.graph,o=i.canvas,s=r.type,u=r.element;if(!("destroyed"in u)||!jg(u)&&!u.destroyed){var c=t.type,l=t.detail,f=t.button,d=Object.assign(Object.assign({},t),{target:u,targetType:s,originalTarget:e});c===bl.POINTER_MOVE&&(n.currentTarget!==u&&(n.currentTarget&&a.emit("".concat(n.currentTargetType,":").concat(bl.POINTER_LEAVE),Object.assign(Object.assign({},d),{type:bl.POINTER_LEAVE,target:n.currentTarget,targetType:n.currentTargetType})),u&&(Object.assign(d,{type:bl.POINTER_ENTER}),a.emit("".concat(s,":").concat(bl.POINTER_ENTER),d))),n.currentTarget=u,n.currentTargetType=s),c===bl.CLICK&&2===f||(a.emit("".concat(s,":").concat(c),d),a.emit(c,d)),c===bl.CLICK&&2===l&&(Object.assign(d,{type:bl.DBLCLICK}),a.emit("".concat(s,":").concat(bl.DBLCLICK),d),a.emit(bl.DBLCLICK,d)),c===bl.POINTER_DOWN&&2===f&&(Object.assign(d,{type:bl.CONTEXT_MENU,preventDefault:function(){var t;null===(t=o.getContainer())||void 0===t||t.addEventListener(bl.CONTEXT_MENU,(function(t){return t.preventDefault()}),{once:!0})}}),a.emit("".concat(s,":").concat(bl.CONTEXT_MENU),d),a.emit(bl.CONTEXT_MENU,d))}}},n.forwardContainerEvents=function(t){n.context.graph.emit(t.type,t)},n.forwardEvents(),n.setBehaviors(n.context.options.behaviors||[]),n}return _(e,t),O(e,[{key:"setBehaviors",value:function(t){this.setExtensions(t)}},{key:"forwardEvents",value:function(){var t=this,e=this.context.canvas.getContainer();e&&[xl.KEY_DOWN,xl.KEY_UP].forEach((function(n){e.addEventListener(n,t.forwardContainerEvents)}));var n=this.context.canvas.document;n&&[bl.CLICK,bl.DBLCLICK,bl.POINTER_OVER,bl.POINTER_LEAVE,bl.POINTER_ENTER,bl.POINTER_MOVE,bl.POINTER_OUT,bl.POINTER_DOWN,bl.POINTER_UP,bl.CONTEXT_MENU,bl.DRAG_START,bl.DRAG,bl.DRAG_END,bl.DRAG_ENTER,bl.DRAG_OVER,bl.DRAG_LEAVE,bl.DROP,bl.WHEEL].forEach((function(e){n.addEventListener(e,t.forwardCanvasEvents)}))}},{key:"destroy",value:function(){var t=this,n=this.context.canvas.getContainer();n&&[xl.KEY_DOWN,xl.KEY_UP].forEach((function(e){n.removeEventListener(e,t.forwardContainerEvents)})),this.context.canvas.document.removeAllEventListeners(),Dn(e,"destroy",this,3)([])}}])}(ud),YA=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function UA(t,e){var n=t.data,r=t.style,i=YA(t,["data","style"]),a=e.data,o=e.style,s=YA(e,["data","style"]),u=Object.assign(Object.assign({},i),s);return(n||a)&&Object.assign(u,{data:Object.assign(Object.assign({},n),a)}),(r||o)&&Object.assign(u,{style:Object.assign(Object.assign({},r),o)}),u}function qA(t){var e=t.data,n=t.style,r=YA(t,["data","style"]);return e&&(r.data=Object.assign({},e)),n&&(r.style=Object.assign({},n)),r}function XA(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.states,r=void 0===n?[]:n,i=t.data,a=void 0===i?{}:i,o=t.style,s=void 0===o?{}:o,u=t.children,c=void 0===u?[]:u,l=YA(t,["states","data","style","children"]),f=e.states,d=void 0===f?[]:f,h=e.data,p=void 0===h?{}:h,v=e.style,g=void 0===v?{}:v,y=e.children,m=void 0===y?[]:y,b=function(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))},x=function(t,e){var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every((function(n){return t[n]===e[n]}))};return!!(x(l,YA(e,["states","data","style","children"]))&&b(c,m)&&b(r,d)&&x(a,p)&&x(s,g))}function KA(t){var e=t.id,n=void 0===e?Kf(t):e,r=t.style,i=t.data,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["id","style","data"]),o=Object.assign(Object.assign({},t),{style:Object.assign({},r),data:Object.assign({},i)});return function(t){return"source"in t&&"target"in t}(t)?Object.assign({id:n,data:o},a):{id:n,data:o}}function $A(t){return t.data}function ZA(t){if(!t.hasTreeStructure(Pl)){t.attachTreeStructure(Pl);var e,n=nr(t.getAllEdges());try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.source,a=r.target;t.setParent(a,i,Pl)}}catch(t){n.e(t)}finally{n.f()}}}var QA=function(){return O((function t(){k(this,t),this.latestRemovedComboIds=new Set,this.comboIds=new Set,this.changes=[],this.batchCount=0,this.isTraceless=!1,this.enableUpdateNodeLikeHierarchy=!0,this.model=new Zg}),[{key:"pushChange",value:function(t){if(!this.isTraceless){var e=t.type;if(e===vl.NodeUpdated||e===vl.EdgeUpdated||e===vl.ComboUpdated){var n=t.value,r=t.original;this.changes.push({value:qA(n),original:qA(r),type:e})}else this.changes.push({value:qA(t.value),type:e})}}},{key:"getChanges",value:function(){return this.changes}},{key:"clearChanges",value:function(){this.changes=[]}},{key:"batch",value:function(t){this.batchCount++,this.model.batch(t),this.batchCount--}},{key:"isBatching",value:function(){return this.batchCount>0}},{key:"silence",value:function(t){this.isTraceless=!0,t(),this.isTraceless=!1}},{key:"isCombo",value:function(t){return this.comboIds.has(t)||this.latestRemovedComboIds.has(t)}},{key:"getData",value:function(){return{nodes:this.getNodeData(),edges:this.getEdgeData(),combos:this.getComboData()}}},{key:"getNodeData",value:function(t){var e=this;return this.model.getAllNodes().reduce((function(n,r){var i=$A(r);return e.isCombo(Kf(i))||(void 0===t||t.includes(Kf(i)))&&n.push(i),n}),[])}},{key:"getEdgeDatum",value:function(t){return $A(this.model.getEdge(t))}},{key:"getEdgeData",value:function(t){return this.model.getAllEdges().reduce((function(e,n){var r=$A(n);return(void 0===t||t.includes(Kf(r)))&&e.push(r),e}),[])}},{key:"getComboData",value:function(t){var e=this;return this.model.getAllNodes().reduce((function(n,r){var i=$A(r);return e.isCombo(Kf(i))?((void 0===t||t.includes(Kf(i)))&&n.push(i),n):n}),[])}},{key:"getRootsData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pl;return this.model.getRoots(t).map($A)}},{key:"getAncestorsData",value:function(t,e){var n=this.model;return n.hasNode(t)&&n.hasTreeStructure(e)?n.getAncestors(t,e).map($A):[]}},{key:"getDescendantsData",value:function(t){var e=this,n=this.getElementDataById(t),r=[];return nh(n,(function(t){t!==n&&r.push(t)}),(function(t){return e.getChildrenData(Kf(t))}),"TB"),r}},{key:"getParentData",value:function(t,e){var n=this.model;if(e){if(n.hasNode(t)&&n.hasTreeStructure(e)){var r=n.getParent(t,e);return r?$A(r):void 0}}else Dl.warn("The hierarchy structure key is not specified")}},{key:"getChildrenData",value:function(t){var e="node"===this.getElementType(t)?Pl:Al,n=this.model;return n.hasNode(t)&&n.hasTreeStructure(e)?n.getChildren(t,e).map($A):[]}},{key:"getElementsDataByType",value:function(t){return"node"===t?this.getNodeData():"edge"===t?this.getEdgeData():"combo"===t?this.getComboData():[]}},{key:"getElementDataById",value:function(t){return"edge"===this.getElementType(t)?this.getEdgeDatum(t):this.getNodeLikeDatum(t)}},{key:"getNodeLikeDatum",value:function(t){return $A(this.model.getNode(t))}},{key:"getNodeLikeData",value:function(t){return this.model.getAllNodes().reduce((function(e,n){var r=$A(n);return t?t.includes(Kf(r))&&e.push(r):e.push(r),e}),[])}},{key:"getElementDataByState",value:function(t,e){return this.getElementsDataByType(t).filter((function(t){var n;return null===(n=t.states)||void 0===n?void 0:n.includes(e)}))}},{key:"getElementState",value:function(t){var e;return(null===(e=this.getElementDataById(t))||void 0===e?void 0:e.states)||[]}},{key:"hasNode",value:function(t){return this.model.hasNode(t)&&!this.isCombo(t)}},{key:"hasEdge",value:function(t){return this.model.hasEdge(t)}},{key:"hasCombo",value:function(t){return this.model.hasNode(t)&&this.isCombo(t)}},{key:"getRelatedEdgesData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both";return this.model.getRelatedEdges(t,e).map($A)}},{key:"getNeighborNodesData",value:function(t){return this.model.getNeighbors(t).map($A)}},{key:"setData",value:function(t){var e=this,n=t.nodes,r=void 0===n?[]:n,i=t.edges,a=void 0===i?[]:i,o=t.combos,s=void 0===o?[]:o,u=this.getData(),c=u.nodes,l=u.edges,f=u.combos,d=od(c,r,(function(t){return Kf(t)}),XA),h=od(l,a,(function(t){return Kf(t)}),XA),p=od(f,s,(function(t){return Kf(t)}),XA);this.batch((function(){var t={nodes:d.enter,edges:h.enter,combos:p.enter};e.addData(t),e.computeZIndex(t,"add",!0);var n={nodes:d.update,edges:h.update,combos:p.update};e.updateData(n),e.computeZIndex(n,"update",!0);var r={nodes:d.exit.map(Kf),edges:h.exit.map(Kf),combos:p.exit.map(Kf)};e.removeData(r)}))}},{key:"addData",value:function(t){var e=this,n=t.nodes,r=t.edges,i=t.combos;this.batch((function(){e.addComboData(i),e.addNodeData(n),e.addEdgeData(r)})),this.computeZIndex(t,"add")}},{key:"addNodeData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length&&(this.model.addNodes(e.map((function(e){return t.pushChange({value:e,type:vl.NodeAdded}),KA(e)}))),this.updateNodeLikeHierarchy(e),this.computeZIndex({nodes:e},"add"))}},{key:"addEdgeData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length&&(this.model.addEdges(e.map((function(e){return t.pushChange({value:e,type:vl.EdgeAdded}),KA(e)}))),this.computeZIndex({edges:e},"add"))}},{key:"addComboData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var n=this.model;n.hasTreeStructure(Al)||n.attachTreeStructure(Al),n.addNodes(e.map((function(e){return t.comboIds.add(Kf(e)),t.pushChange({value:e,type:vl.ComboAdded}),KA(e)}))),this.updateNodeLikeHierarchy(e),this.computeZIndex({combos:e},"add")}}},{key:"addChildrenData",value:function(t,e){var n=this.getNodeLikeDatum(t),r=e.map(Kf);this.addNodeData(e),this.updateNodeData([{id:t,children:[].concat(M(n.children||[]),M(r))}]),this.addEdgeData(r.map((function(e){return{source:t,target:e}})))}},{key:"computeZIndex",value:function(t,e){var n=this;!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&this.isBatching()||this.batch((function(){var r=t.nodes,i=void 0===r?[]:r,a=t.edges,o=void 0===a?[]:a,s=t.combos;(void 0===s?[]:s).forEach((function(t){var r,i,a,o=Kf(t);if(!("add"===e&&Oe(null===(r=t.style)||void 0===r?void 0:r.zIndex)||"update"===e&&!("combo"in t))){var s=n.getParentData(o,Al),u=s?(null!==(a=null===(i=s.style)||void 0===i?void 0:i.zIndex)&&void 0!==a?a:0)+1:0;n.preventUpdateNodeLikeHierarchy((function(){n.updateComboData([{id:o,style:{zIndex:u}}])}))}})),i.forEach((function(t){var r,i,a,o=Kf(t);if(("add"!==e||!Oe(null===(r=t.style)||void 0===r?void 0:r.zIndex))&&("update"!==e||"combo"in t||"children"in t)){var s=0,u=n.getParentData(o,Al);if(u)s=((null===(i=u.style)||void 0===i?void 0:i.zIndex)||0)+1;else{var c=n.getParentData(o,Pl);c&&(s=(null===(a=null==c?void 0:c.style)||void 0===a?void 0:a.zIndex)||0)}n.preventUpdateNodeLikeHierarchy((function(){n.updateNodeData([{id:o,style:{zIndex:s}}])}))}})),o.forEach((function(t){var e,r,i,a,o;if(!Oe(null===(e=t.style)||void 0===e?void 0:e.zIndex)){var s=t.id,u=t.source,c=t.target;if(s){var l=n.getEdgeDatum(s);u=l.source,c=l.target}else s=Kf(t);if(u&&c){var f=(null===(i=null===(r=n.getNodeLikeDatum(u))||void 0===r?void 0:r.style)||void 0===i?void 0:i.zIndex)||0,d=(null===(o=null===(a=n.getNodeLikeDatum(c))||void 0===a?void 0:a.style)||void 0===o?void 0:o.zIndex)||0;n.updateEdgeData([{id:Kf(t),style:{zIndex:Math.max(f,d)-1}}])}}}))}))}},{key:"getFrontZIndex",value:function(t){var e,n=this.getElementType(t),r=this.getElementDataById(t),i=this.getData();if(Object.assign(i,b({},"".concat(n,"s"),i["".concat(n,"s")].filter((function(e){return Kf(e)!==t})))),"combo"===n&&!uh(r)){var a=new Set(this.getAncestorsData(t,Al).map(Kf));i.nodes=i.nodes.filter((function(t){return!a.has(Kf(t))})),i.combos=i.combos.filter((function(t){return!a.has(Kf(t))})),i.edges=i.edges.filter((function(t){var e=t.source,n=t.target;return!a.has(e)&&!a.has(n)}))}return Math.max.apply(Math,[(null===(e=r.style)||void 0===e?void 0:e.zIndex)||0,0].concat(M(Object.values(i).flat().map((function(t){var e;return((null===(e=null==t?void 0:t.style)||void 0===e?void 0:e.zIndex)||0)+1})))))}},{key:"updateNodeLikeHierarchy",value:function(t){var e=this;if(this.enableUpdateNodeLikeHierarchy){var n=this.model;t.forEach((function(t){var r=Kf(t),i=$f(t);void 0!==i&&(n.hasTreeStructure(Al)||n.attachTreeStructure(Al),null===i&&e.refreshComboData(r),e.setParent(r,$f(t),Al));var a=t.children||[];if(a.length){n.hasTreeStructure(Pl)||n.attachTreeStructure(Pl);var o=a.filter((function(t){return n.hasNode(t)}));o.forEach((function(t){return e.setParent(t,r,Pl)})),o.length!==a.length&&e.updateNodeData([{id:r,children:o}])}}))}}},{key:"preventUpdateNodeLikeHierarchy",value:function(t){this.enableUpdateNodeLikeHierarchy=!1,t(),this.enableUpdateNodeLikeHierarchy=!0}},{key:"updateData",value:function(t){var e=this,n=t.nodes,r=t.edges,i=t.combos;this.batch((function(){e.updateNodeData(n),e.updateComboData(i),e.updateEdgeData(r)})),this.computeZIndex(t,"update")}},{key:"updateNodeData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var n=this.model;this.batch((function(){var r=[];e.forEach((function(e){var i=Kf(e),a=$A(n.getNode(i));if(!XA(a,e)){var o=UA(a,e);t.pushChange({value:o,original:a,type:vl.NodeUpdated}),n.mergeNodeData(i,o),r.push(o)}})),t.updateNodeLikeHierarchy(r)})),this.computeZIndex({nodes:e},"update")}}},{key:"refreshData",value:function(){var t=this,e=this.getData(),n=e.nodes,r=e.edges,i=e.combos;n.forEach((function(e){t.pushChange({value:e,original:e,type:vl.NodeUpdated})})),r.forEach((function(e){t.pushChange({value:e,original:e,type:vl.EdgeUpdated})})),i.forEach((function(e){t.pushChange({value:e,original:e,type:vl.ComboUpdated})}))}},{key:"syncNodeLikeDatum",value:function(t){var e=this.model,n=Kf(t);if(e.hasNode(n)){var r=UA($A(e.getNode(n)),t);e.mergeNodeData(n,r)}}},{key:"syncEdgeDatum",value:function(t){var e=this.model,n=Kf(t);if(e.hasEdge(n)){var r=UA($A(e.getEdge(n)),t);e.mergeEdgeData(n,r)}}},{key:"updateEdgeData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var n=this.model;this.batch((function(){e.forEach((function(e){var r=Kf(e),i=$A(n.getEdge(r));if(!XA(i,e)){e.source&&i.source!==e.source&&n.updateEdgeSource(r,e.source),e.target&&i.target!==e.target&&n.updateEdgeTarget(r,e.target);var a=UA(i,e);t.pushChange({value:a,original:i,type:vl.EdgeUpdated}),n.mergeEdgeData(r,a)}}))})),this.computeZIndex({edges:e},"update")}}},{key:"updateComboData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var n=this.model;n.batch((function(){var r=[];e.forEach((function(e){var i=Kf(e),a=$A(n.getNode(i));if(!XA(a,e)){var o=UA(a,e);t.pushChange({value:o,original:a,type:vl.ComboUpdated}),n.mergeNodeData(i,o),r.push(o)}})),t.updateNodeLikeHierarchy(r)})),this.computeZIndex({combos:e},"update")}}},{key:"setParent",value:function(t,e,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t!==e){var a=$f(this.getNodeLikeDatum(t));if(a!==e&&n===Al){var o={id:t,combo:e};this.isCombo(t),this.syncNodeLikeDatum(o)}this.model.setParent(t,e,n),i&&n===Al&&function(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var a=t[r];e.has(a)||(n.push(a),e.set(a,!0))}return n}([a,e]).forEach((function(t){void 0!==t&&r.refreshComboData(t)}))}}},{key:"refreshComboData",value:function(t){var e=this,n=this.getComboData([t])[0],r=this.getAncestorsData(t,Al);n&&this.pushChange({value:n,original:n,type:vl.ComboUpdated}),r.forEach((function(t){e.pushChange({value:t,original:t,type:vl.ComboUpdated})}))}},{key:"getElementPosition",value:function(t){return Rd(this.getElementDataById(t))}},{key:"translateNodeLikeBy",value:function(t,e){this.isCombo(t)?this.translateComboBy(t,e):this.translateNodeBy(t,e)}},{key:"translateNodeLikeTo",value:function(t,e){this.isCombo(t)?this.translateComboTo(t,e):this.translateNodeTo(t,e)}},{key:"translateNodeBy",value:function(t,e){var n=yd(this.getElementPosition(t),[].concat(M(e),[0]).slice(0,3));this.translateNodeTo(t,n)}},{key:"translateNodeTo",value:function(t,e){var n=this,r=g(e,3),i=r[0],a=void 0===i?0:i,o=r[1],s=void 0===o?0:o,u=r[2],c=void 0===u?0:u;this.preventUpdateNodeLikeHierarchy((function(){n.updateNodeData([{id:t,style:{x:a,y:s,z:c}}])}))}},{key:"translateComboBy",value:function(t,e){var n=this,r=g(e,3),i=r[0],a=void 0===i?0:i,o=r[1],s=void 0===o?0:o,u=r[2],c=void 0===u?0:u;if(![a,s,c].some(isNaN)&&![a,s,c].every((function(t){return 0===t}))){var l=this.getComboData([t])[0];if(l){var f=new Set;nh(l,(function(t){var e=Kf(t);if(!f.has(e)){f.add(e);var r=g(Rd(t),3),i=r[0],o=r[1],u=r[2],l=UA(t,{style:{x:i+a,y:o+s,z:u+c}});n.pushChange({value:l,original:t,type:n.isCombo(e)?vl.ComboUpdated:vl.NodeUpdated}),n.model.mergeNodeData(e,l)}}),(function(t){return n.getChildrenData(Kf(t))}),"BT")}}}},{key:"translateComboTo",value:function(t,e){var n,r=this;if(!e.some(isNaN)){var i=g(e,3),a=i[0],o=void 0===a?0:a,s=i[1],u=void 0===s?0:s,c=i[2],l=void 0===c?0:c,f=null===(n=this.getComboData([t]))||void 0===n?void 0:n[0];if(f){var d=g(Rd(f),3),h=d[0],p=d[1],v=d[2],y=o-h,m=u-p,b=l-v;nh(f,(function(t){var e=Kf(t),n=g(Rd(t),3),i=n[0],a=n[1],o=n[2],s=UA(t,{style:{x:i+y,y:a+m,z:o+b}});r.pushChange({value:s,original:t,type:r.isCombo(e)?vl.ComboUpdated:vl.NodeUpdated}),r.model.mergeNodeData(e,s)}),(function(t){return r.getChildrenData(Kf(t))}),"BT")}}}},{key:"removeData",value:function(t){var e=this,n=t.nodes,r=t.edges,i=t.combos;this.batch((function(){e.removeEdgeData(r),e.removeNodeData(n),e.removeComboData(i),e.latestRemovedComboIds=new Set(i)}))}},{key:"removeNodeData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length&&this.batch((function(){e.forEach((function(e){t.removeEdgeData(t.getRelatedEdgesData(e).map(Kf)),t.pushChange({value:t.getNodeData([e])[0],type:vl.NodeRemoved}),t.removeNodeLikeHierarchy(e)})),t.model.removeNodes(e)}))}},{key:"removeEdgeData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length&&(e.forEach((function(e){return t.pushChange({value:t.getEdgeData([e])[0],type:vl.EdgeRemoved})})),this.model.removeEdges(e))}},{key:"removeComboData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length&&this.batch((function(){e.forEach((function(e){t.pushChange({value:t.getComboData([e])[0],type:vl.ComboRemoved}),t.removeNodeLikeHierarchy(e),t.comboIds.delete(e)})),t.model.removeNodes(e)}))}},{key:"removeNodeLikeHierarchy",value:function(t){var e=this;if(this.model.hasTreeStructure(Al)){var n=$f(this.getNodeLikeDatum(t));this.setParent(t,void 0,Al,!1),this.model.getChildren(t,Al).forEach((function(t){var r=$A(t),i=Kf(r);e.setParent(Kf(r),n,Al,!1);var a=UA(r,{id:Kf(r),combo:n});e.pushChange({value:a,original:r,type:e.isCombo(i)?vl.ComboUpdated:vl.NodeUpdated}),e.model.mergeNodeData(Kf(r),a)})),Me(n)||this.refreshComboData(n)}}},{key:"getElementType",value:function(t){if(this.model.hasNode(t))return this.isCombo(t)?"combo":"node";if(this.model.hasEdge(t))return"edge";throw new Error(jl("Unknown element type of id: ".concat(t)))}},{key:"destroy",value:function(){var t=this.model,e=t.getAllNodes(),n=t.getAllEdges();t.removeEdges(n.map((function(t){return t.id}))),t.removeNodes(e.map((function(t){return t.id}))),this.context={}}}])}(),JA=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},tP=function(){return O((function t(e){k(this,t),this.elementMap={},this.shapeTypeMap={},this.paletteStyle={},this.defaultStyle={},this.stateStyle={},this.visibilityCache=new WeakMap,this.context=e}),[{key:"init",value:function(){this.initContainer()}},{key:"initContainer",value:function(){if(!this.container||this.container.destroyed){var t=this.context.canvas;this.container=t.appendChild(new Bu({className:"elements"}))}}},{key:"emit",value:function(t,e){e.silence||IA(this.context.graph,t)}},{key:"forEachElementData",value:function(t){var e=this;eh.forEach((function(n){var r=e.context.model.getElementsDataByType(n);t(n,r)}))}},{key:"getElementType",value:function(t,e){var n,r=this.context,i=r.options,a=r.graph,o=(null===(n=i[t])||void 0===n?void 0:n.type)||e.type;return o?"string"==typeof o?o:o.call(a,e):"edge"===t?"line":"circle"}},{key:"getTheme",value:function(t){return Il(this.context.options)[t]||{}}},{key:"getThemeStyle",value:function(t){return this.getTheme(t).style||{}}},{key:"getThemeStateStyle",value:function(t,e){var n=this.getTheme(t).state,r=void 0===n?{}:n;return Object.assign.apply(Object,[{}].concat(M(e.map((function(t){return r[t]||{}})))))}},{key:"computePaletteStyle",value:function(){var t=this,e=this.context.options;this.paletteStyle={},this.forEachElementData((function(n,r){var i,a,o=Object.assign({},bh(null===(i=t.getTheme(n))||void 0===i?void 0:i.palette),bh(null===(a=e[n])||void 0===a?void 0:a.palette));(null==o?void 0:o.field)&&Object.assign(t.paletteStyle,function(t,e){if(!e)return{};var n=e.type,r=e.color,i=e.field,a=e.invert,o=function(t){var e="string"==typeof r?Cl("palette",r):r;if("function"==typeof e){var n={};return t.forEach((function(t){var r=g(t,2),i=r[0],o=r[1];n[i]=e(a?1-o:o)})),n}if(Array.isArray(e)){var i=a?M(e).reverse():e,o={};return t.forEach((function(t){var n=g(t,2),r=n[0],a=n[1];o[r]=i[a%e.length]})),o}return{}},s=function(t,e){var n;return"string"==typeof t?null===(n=e.data)||void 0===n?void 0:n[t]:null==t?void 0:t(e)};if("group"===n){var u=Zl(t,(function(t){if(!i)return"default";var e=s(i,t);return e?String(e):"default"})),c=o(Object.keys(u).map((function(t,e){return[t,e]}))),l={};return Object.entries(u).forEach((function(t){var e=g(t,2),n=e[0];e[1].forEach((function(t){l[Kf(t)]=c[n]}))})),l}if("value"===n){var f=t.reduce((function(t,e){var n=g(t,2),r=n[0],a=n[1],o=s(i,e);if("number"!=typeof o)throw new Error(jl("Palette field ".concat(i," is not a number")));return[Math.min(r,o),Math.max(a,o)]}),[1/0,-1/0]),d=g(f,2),h=d[0],p=d[1]-h;return o(t.map((function(t){return[t.id,(s(i,t)-h)/p]})))}}(r,o))}))}},{key:"getPaletteStyle",value:function(t,e){var n=this.paletteStyle[e];return n?"edge"===t?{stroke:n}:{fill:n}:{}}},{key:"computeElementDefaultStyle",value:function(t,e){var n,r=(null===(n=this.context.options[t])||void 0===n?void 0:n.style)||{};"transform"in r&&Array.isArray(r.transform)&&(r.transform=M(r.transform)),this.defaultStyle[Kf(e.datum)]=yh(r,e)}},{key:"computeElementsDefaultStyle",value:function(t){var e=this,n=this.context.graph;this.forEachElementData((function(r,i){for(var a=i.length,o=0;o<a;o++){var s=i[o];(void 0===t||t.includes(Kf(s)))&&e.computeElementDefaultStyle(r,{datum:s,graph:n})}}))}},{key:"getDefaultStyle",value:function(t){return this.defaultStyle[t]||{}}},{key:"getElementState",value:function(t){try{return this.context.model.getElementState(t)}catch(t){return[]}}},{key:"getElementStateStyle",value:function(t,e,n){var r,i;return yh((null===(i=null===(r=this.context.options[t])||void 0===r?void 0:r.state)||void 0===i?void 0:i[e])||{},n)}},{key:"computeElementStatesStyle",value:function(t,e,n){var r=this;this.stateStyle[Kf(n.datum)]=Object.assign.apply(Object,[{}].concat(M(e.map((function(e){return r.getElementStateStyle(t,e,n)})))))}},{key:"computeElementsStatesStyle",value:function(t){var e=this,n=this.context.graph;this.forEachElementData((function(r,i){for(var a=i.length,o=0;o<a;o++){var s=i[o];if(void 0===t||t.includes(Kf(s))){var u=e.getElementState(Kf(s));e.computeElementStatesStyle(r,u,{datum:s,graph:n})}}}))}},{key:"getStateStyle",value:function(t){return this.stateStyle[t]||{}}},{key:"computeStyle",value:function(t,e){t&&["translate","zIndex"].includes(t)||(this.computePaletteStyle(),this.computeElementsDefaultStyle(e),this.computeElementsStatesStyle(e))}},{key:"getElement",value:function(t){return this.elementMap[t]}},{key:"getNodes",value:function(){var t=this;return this.context.model.getNodeData().map((function(e){var n=e.id;return t.elementMap[n]}))}},{key:"getEdges",value:function(){var t=this;return this.context.model.getEdgeData().map((function(e){return t.elementMap[Kf(e)]}))}},{key:"getCombos",value:function(){var t=this;return this.context.model.getComboData().map((function(e){var n=e.id;return t.elementMap[n]}))}},{key:"getElementComputedStyle",value:function(t,e){var n=this,r=Kf(e),i=this.getThemeStyle(t),a=this.getPaletteStyle(t,r),o=e.style||{},s=this.getDefaultStyle(r),u=this.getThemeStateStyle(t,this.getElementState(r)),c=this.getStateStyle(r),l=Object.assign({},i,a,o,s,u,c);if("combo"===t){var f=this.context.model.getChildrenData(r),d=l.collapsed?[]:f.map(Kf).filter((function(t){return n.getElement(t)}));Object.assign(l,{childrenNode:d,childrenData:f})}return l}},{key:"getDrawData",value:function(t){this.init();var e=this.computeChangesAndDrawData(t);if(!e)return null;var n=t.type,r=void 0===n?"draw":n,i=t.stage,a=void 0===i?r:i;return this.markDestroyElement(e.drawData),this.computeStyle(a),{type:r,stage:a,data:e}}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{animation:!0},e=this.getDrawData(t);if(e){var n=e.data.drawData,r=n.add,i=n.update,a=n.remove;return this.destroyElements(a,t),this.createElements(r,t),this.updateElements(i,t),this.setAnimationTask(t,e)}}},{key:"preLayoutDraw",value:function(){return JA(this,arguments,void 0,(function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{animation:!0};return Jn().mark((function n(){var r,i,a,o,s,u,c;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.getDrawData(e)){n.next=3;break}return n.abrupt("return");case 3:return o=a.data.drawData,n.next=6,null===(i=null===(r=t.context.layout)||void 0===r?void 0:r.preLayout)||void 0===i?void 0:i.call(r,o);case 6:return s=o.add,u=o.update,c=o.remove,t.destroyElements(c,e),t.createElements(s,e),t.updateElements(u,e),n.abrupt("return",t.setAnimationTask(e,a));case 11:case"end":return n.stop()}}),n)}))()}))}},{key:"setAnimationTask",value:function(t,e){var n=this,r=t.animation,i=t.silence,a=e.data,o=a.dataChanges,s=a.drawData,u=e.stage,c=e.type;return this.context.animation.animate(r,i?{}:{before:function(){return n.emit(new LA(kl.BEFORE_DRAW,{dataChanges:o,animation:r,stage:u,render:"render"===c}),t)},beforeAnimate:function(e){return n.emit(new RA(kl.BEFORE_ANIMATE,gl.DRAW,e,s),t)},afterAnimate:function(e){return n.emit(new RA(kl.AFTER_ANIMATE,gl.DRAW,e,s),t)},after:function(){return n.emit(new LA(kl.AFTER_DRAW,{dataChanges:o,animation:r,stage:u,render:"render"===c,firstRender:!1===n.context.graph.rendered}),t)}})}},{key:"computeChangesAndDrawData",value:function(t){var e=this.context.model,n=e.getChanges(),r=Bk(n);if(0===r.length)return null;var i=Zl(r,(function(t){return t.type})),a=i.NodeAdded,o=void 0===a?[]:a,s=i.NodeUpdated,u=void 0===s?[]:s,c=i.NodeRemoved,l=void 0===c?[]:c,f=i.EdgeAdded,d=void 0===f?[]:f,h=i.EdgeUpdated,p=void 0===h?[]:h,v=i.EdgeRemoved,g=void 0===v?[]:v,y=i.ComboAdded,m=void 0===y?[]:y,b=i.ComboUpdated,x=void 0===b?[]:b,w=i.ComboRemoved,k=void 0===w?[]:w,E=function(t){return new Map(t.map((function(t){var e=t.value;return[Kf(e),e]})))},O={add:{nodes:E(o),edges:E(d),combos:E(m)},update:{nodes:E(u),edges:E(p),combos:E(x)},remove:{nodes:E(l),edges:E(g),combos:E(k)}},S=this.transformData(O,t);return e.clearChanges(),{dataChanges:n,drawData:S}}},{key:"transformData",value:function(t,e){var n=this.context.transform.getTransformInstance();return Object.values(n).reduce((function(t,n){return n.beforeDraw(t,e)}),t)}},{key:"createElement",value:function(t,e,n){var r,i=this,a=Kf(e);if(!this.getElement(a)){var o=this.getElementType(t,e),s=this.getElementComputedStyle(t,e),u=Cl(t,o);if(!u)return Dl.warn("The element ".concat(o," of ").concat(t," is not registered."));this.emit(new jA(kl.BEFORE_ELEMENT_CREATE,t,e),n);var c=this.container.appendChild(new u({id:a,context:this.context,style:s}));this.shapeTypeMap[a]=o,this.elementMap[a]=c;var l=n.stage,f=void 0===l?"enter":l;null===(r=this.context.animation)||void 0===r||r.add({element:c,elementType:t,stage:f,originalStyle:Object.assign({},c.attributes),updatedStyle:s},{after:function(){var r;i.emit(new jA(kl.AFTER_ELEMENT_CREATE,t,e),n),null===(r=c.onCreate)||void 0===r||r.call(c)}})}}},{key:"createElements",value:function(t,e){var n=this,r=t.nodes,i=t.edges;[["node",r],["combo",t.combos],["edge",i]].forEach((function(t){var r=g(t,2),i=r[0];r[1].forEach((function(t){return n.createElement(i,t,e)}))}))}},{key:"getUpdateStageStyle",value:function(t,e,n){var r=n.stage;if("translate"===(void 0===r?"update":r)){if("node"===t||"combo"===t){var i=e.style,a=void 0===i?{}:i,o=a.x,s=void 0===o?0:o,u=a.y,c=void 0===u?0:u,l=a.z;return{x:s,y:c,z:void 0===l?0:l}}return{}}return this.getElementComputedStyle(t,e)}},{key:"updateElement",value:function(t,e,n){var r,i=this,a=Kf(e),o=n.stage,s=void 0===o?"update":o,u=this.getElement(a);if(!u)return function(){return null};this.emit(new jA(kl.BEFORE_ELEMENT_UPDATE,t,e),n);var c=this.getElementType(t,e),l=this.getUpdateStageStyle(t,e,n);this.shapeTypeMap[a]!==c&&(u.destroy(),delete this.shapeTypeMap[a],delete this.elementMap[a],this.createElement(t,e,{animation:!1,silence:!0}));var f="visibility"!==s?s:"hidden"===l.visibility?"hide":"show";"hide"===f&&delete l.visibility,null===(r=this.context.animation)||void 0===r||r.add({element:u,elementType:t,stage:f,originalStyle:Object.assign({},u.attributes),updatedStyle:l},{before:function(){var t=i.elementMap[a];"collapse"!==s&&Rg(t,l),"visibility"===s&&(function(t){return BA("opacity")in(ch(t,zA)||{})}(t)||function(t,e){var n=Array.isArray(e)?e:[e];ch(t,zA)||lh(t,zA,{}),n.forEach((function(e){lh(ch(t,zA),BA(e),t.attributes[e])}))}(t,"opacity"),i.visibilityCache.set(t,"show"===f?"visible":"hidden"),"show"===f&&sd(t,"visible"))},after:function(){var r,o=i.elementMap[a];"collapse"===s&&Rg(o,l),"hide"===f&&sd(o,i.visibilityCache.get(o)),i.emit(new jA(kl.AFTER_ELEMENT_UPDATE,t,e),n),null===(r=o.onUpdate)||void 0===r||r.call(o)}})}},{key:"updateElements",value:function(t,e){var n=this,r=t.nodes,i=t.edges;[["node",r],["combo",t.combos],["edge",i]].forEach((function(t){var r=g(t,2),i=r[0];r[1].forEach((function(t){return n.updateElement(i,t,e)}))}))}},{key:"markDestroyElement",value:function(t){var e=this;Object.values(t.remove).forEach((function(t){t.forEach((function(t){var n=Kf(t),r=e.getElement(n);r&&function(t){lh(t,"__to_be_destroyed__",!0)}(r)}))}))}},{key:"destroyElement",value:function(t,e,n){var r,i=this,a=n.stage,o=void 0===a?"exit":a,s=Kf(e),u=this.elementMap[s];if(!u)return function(){return null};this.emit(new jA(kl.BEFORE_ELEMENT_DESTROY,t,e),n),null===(r=this.context.animation)||void 0===r||r.add({element:u,elementType:t,stage:o,originalStyle:Object.assign({},u.attributes),updatedStyle:{}},{after:function(){var r;i.clearElement(s),u.destroy(),null===(r=u.onDestroy)||void 0===r||r.call(u),i.emit(new jA(kl.AFTER_ELEMENT_DESTROY,t,e),n)}})}},{key:"destroyElements",value:function(t,e){var n=this,r=t.nodes,i=t.edges;[["combo",t.combos],["edge",i],["node",r]].forEach((function(t){var r=g(t,2),i=r[0];r[1].forEach((function(t){return n.destroyElement(i,t,e)}))}))}},{key:"clearElement",value:function(t){delete this.paletteStyle[t],delete this.defaultStyle[t],delete this.stateStyle[t],delete this.elementMap[t],delete this.shapeTypeMap[t]}},{key:"alignLayoutResultToElement",value:function(t,e){var n,r,i=null===(n=t.nodes)||void 0===n?void 0:n.find((function(t){return Kf(t)===e}));if(i){var a=md(Rd(this.context.model.getNodeLikeDatum(e)),Rd(i));null===(r=t.nodes)||void 0===r||r.forEach((function(t){var e,n,r;(null===(e=t.style)||void 0===e?void 0:e.x)&&(t.style.x+=a[0]),(null===(n=t.style)||void 0===n?void 0:n.y)&&(t.style.y+=a[1]),(null===(r=t.style)||void 0===r?void 0:r.z)&&(t.style.z+=a[2]||0)}))}}},{key:"collapseNode",value:function(t,e){return JA(this,void 0,void 0,Jn().mark((function n(){var r,i,a,o,s,u,c,l,f,d,h,p,v,y,m=this;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.animation,a=e.align,o=this.context,s=o.model,u=o.layout,c=this.computeChangesAndDrawData({stage:"collapse",animation:i})){n.next=5;break}return n.abrupt("return");case 5:return this.markDestroyElement(c.drawData),n.next=8,u.simulate();case 8:if(l=n.sent,a&&this.alignLayoutResultToElement(l,t),s.updateData(l),f=this.computeChangesAndDrawData({stage:"collapse",animation:i})){n.next=14;break}return n.abrupt("return");case 14:return d=f.drawData,h=d.add,p=d.remove,v=d.update,this.markDestroyElement(d),y={animation:i,stage:"collapse",data:d},this.destroyElements(p,y),this.createElements(h,y),this.updateElements(v,y),n.next=23,null===(r=this.context.animation.animate(i,{beforeAnimate:function(t){return m.emit(new RA(kl.BEFORE_ANIMATE,gl.COLLAPSE,t,d),y)},afterAnimate:function(t){return m.emit(new RA(kl.AFTER_ANIMATE,gl.COLLAPSE,t,d),y)}},{collapse:{target:t,descendants:Array.from(p.nodes).map((function(t){return Kf(g(t,2)[1])})),position:Rd(v.nodes.get(t))}}))||void 0===r?void 0:r.finished;case 23:case"end":return n.stop()}}),n,this)})))}},{key:"expandNode",value:function(t,e){return JA(this,void 0,void 0,Jn().mark((function n(){var r,i,a,o,s,u,c,l,f,d,h,p,v,y,m=this;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this.context,a=i.model,o=i.layout,s=e.animation,u=e.align,c=Rd(a.getNodeData([t])[0]),l=this.computeChangesAndDrawData({stage:"expand",animation:s})){n.next=6;break}return n.abrupt("return");case 6:return f=l.drawData.add,this.createElements(f,{animation:!1,stage:"expand",target:t}),this.context.animation.clear(),n.next=11,o.simulate();case 11:if(d=n.sent,u&&this.alignLayoutResultToElement(d,t),a.updateData(d),this.computeStyle("expand"),h=this.computeChangesAndDrawData({stage:"collapse",animation:s})){n.next=18;break}return n.abrupt("return");case 18:return p=h.drawData,v=p.update,y={animation:s,stage:"expand",data:p},f.edges.forEach((function(t){return v.edges.set(Kf(t),t)})),f.nodes.forEach((function(t){return v.nodes.set(Kf(t),t)})),this.updateElements(v,y),n.next=26,null===(r=this.context.animation.animate(s,{beforeAnimate:function(t){return m.emit(new RA(kl.BEFORE_ANIMATE,gl.EXPAND,t,p),y)},afterAnimate:function(t){return m.emit(new RA(kl.AFTER_ANIMATE,gl.EXPAND,t,p),y)}},{expand:{target:t,descendants:Array.from(f.nodes).map((function(t){return Kf(g(t,2)[1])})),position:c}}))||void 0===r?void 0:r.finished;case 26:case"end":return n.stop()}}),n,this)})))}},{key:"collapseCombo",value:function(t,e){return JA(this,void 0,void 0,Jn().mark((function n(){var r,i,a,o,s,u,c,l,f,d,h,p,v,y=this;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this.context,a=i.model,o=i.element,!a.getAncestorsData(t,Al).some((function(t){return uh(t)}))){n.next=3;break}return n.abrupt("return");case 3:if(s=o.getElement(t),u=s.getComboPosition(Object.assign(Object.assign({},s.attributes),{collapsed:!0})),c=this.computeChangesAndDrawData({stage:"collapse",animation:e})){n.next=8;break}return n.abrupt("return");case 8:return l=c.dataChanges,f=c.drawData,this.markDestroyElement(f),d=f.update,h=f.remove,p={animation:e,stage:"collapse",data:f},this.destroyElements(h,p),this.updateElements(d,p),v=function(t){return Array.from(t).map((function(t){return Kf(g(t,2)[1])}))},n.next=17,null===(r=this.context.animation.animate(e,{before:function(){return y.emit(new LA(kl.BEFORE_DRAW,{dataChanges:l,animation:e}),p)},beforeAnimate:function(t){return y.emit(new RA(kl.BEFORE_ANIMATE,gl.COLLAPSE,t,f),p)},afterAnimate:function(t){return y.emit(new RA(kl.AFTER_ANIMATE,gl.COLLAPSE,t,f),p)},after:function(){return y.emit(new LA(kl.AFTER_DRAW,{dataChanges:l,animation:e}),p)}},{collapse:{target:t,descendants:[].concat(M(v(h.nodes)),M(v(h.combos))),position:u}}))||void 0===r?void 0:r.finished;case 17:case"end":return n.stop()}}),n,this)})))}},{key:"expandCombo",value:function(t,e){return JA(this,void 0,void 0,Jn().mark((function n(){var r,i,a,o,s,u,c,l,f,d,h=this;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this.context.model,a=Rd(i.getComboData([t])[0]),this.computeStyle("expand"),o=this.computeChangesAndDrawData({stage:"expand",animation:e})){n.next=6;break}return n.abrupt("return");case 6:return s=o.dataChanges,u=o.drawData,c=u.add,l=u.update,f={animation:e,stage:"expand",data:u,target:t},this.createElements(c,f),this.updateElements(l,f),d=function(t){return Array.from(t).map((function(t){return Kf(g(t,2)[1])}))},n.next=14,null===(r=this.context.animation.animate(e,{before:function(){return h.emit(new LA(kl.BEFORE_DRAW,{dataChanges:s,animation:e}),f)},beforeAnimate:function(t){return h.emit(new RA(kl.BEFORE_ANIMATE,gl.EXPAND,t,u),f)},afterAnimate:function(t){return h.emit(new RA(kl.AFTER_ANIMATE,gl.EXPAND,t,u),f)},after:function(){return h.emit(new LA(kl.AFTER_DRAW,{dataChanges:s,animation:e}),f)}},{expand:{target:t,descendants:[].concat(M(d(c.nodes)),M(d(c.combos))),position:a}}))||void 0===r?void 0:r.finished;case 14:case"end":return n.stop()}}),n,this)})))}},{key:"clear",value:function(){this.container.destroy(),this.initContainer(),this.elementMap={},this.shapeTypeMap={},this.defaultStyle={},this.stateStyle={},this.paletteStyle={}}},{key:"destroy",value:function(){this.clear(),this.container.destroy(),this.context={}}}])}(),eP=Symbol("Comlink.proxy"),nP=Symbol("Comlink.endpoint"),rP=Symbol("Comlink.releaseProxy"),iP=Symbol("Comlink.finalizer"),aP=Symbol("Comlink.thrown"),oP=function(t){return"object"==typeof t&&null!==t||"function"==typeof t},sP={canHandle:function(t){return oP(t)&&aP in t},serialize:function(t){var e=t.value;return[e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]]},deserialize:function(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}},uP=new Map([["proxy",{canHandle:function(t){return oP(t)&&t[eP]},serialize:function(t){var e=new MessageChannel,n=e.port1,r=e.port2;return cP(t,n),[r,[r]]},deserialize:function(t){return t.start(),fP(t)}}],["throw",sP]]);function cP(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["*"];e.addEventListener("message",(function r(i){if(i&&i.data)if(function(t,e){var n,r=nr(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e===i||"*"===i)return!0;if(i instanceof RegExp&&i.test(e))return!0}}catch(t){r.e(t)}finally{r.f()}return!1}(n,i.origin)){var a,o=Object.assign({path:[]},i.data),s=o.id,u=o.type,c=o.path,l=(i.data.argumentList||[]).map(xP);try{var f=c.slice(0,-1).reduce((function(t,e){return t[e]}),t),d=c.reduce((function(t,e){return t[e]}),t);switch(u){case"GET":a=d;break;case"SET":f[c.slice(-1)[0]]=xP(i.data.value),a=!0;break;case"APPLY":a=d.apply(f,l);break;case"CONSTRUCT":var h;a=function(t){return Object.assign(t,b({},eP,!0))}(AM(d,M(l)));break;case"ENDPOINT":var p=new MessageChannel,v=p.port1,y=p.port2;cP(t,y),a=function(t,e){return mP.set(t,e),t}(v,[v]);break;case"RELEASE":a=void 0;break;default:return}}catch(h){a=b({value:h},aP,0)}Promise.resolve(a).catch((function(t){return b({value:t},aP,0)})).then((function(n){var i=g(bP(n),2),a=i[0],o=i[1];e.postMessage(Object.assign(Object.assign({},a),{id:s}),o),"RELEASE"===u&&(e.removeEventListener("message",r),lP(e),iP in t&&"function"==typeof t[iP]&&t[iP]())})).catch((function(t){var n=g(bP(b({value:new TypeError("Unserializable return value")},aP,0)),2),r=n[0],i=n[1];e.postMessage(Object.assign(Object.assign({},r),{id:s}),i)}))}else console.warn("Invalid origin '".concat(i.origin,"' for comlink proxy"))})),e.start&&e.start()}function lP(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function fP(t,e){var n=new Map;return t.addEventListener("message",(function(t){var e=t.data;if(e&&e.id){var r=n.get(e.id);if(r)try{r(e)}finally{n.delete(e.id)}}})),gP(t,n,[],e)}function dP(t){if(t)throw new Error("Proxy has been released and is not useable")}function hP(t){return wP(t,new Map,{type:"RELEASE"}).then((function(){lP(t)}))}var pP=new WeakMap,vP="FinalizationRegistry"in globalThis&&new FinalizationRegistry((function(t){var e=(pP.get(t)||0)-1;pP.set(t,e),0===e&&hP(t)}));function gP(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=!1,i=new Proxy(arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},{get:function(a,o){if(dP(r),o===rP)return function(){!function(t){vP&&vP.unregister(t)}(i),hP(t),e.clear(),r=!0};if("then"===o){if(0===n.length)return{then:function(){return i}};var s=wP(t,e,{type:"GET",path:n.map((function(t){return t.toString()}))}).then(xP);return s.then.bind(s)}return gP(t,e,[].concat(M(n),[o]))},set:function(i,a,o){dP(r);var s=g(bP(o),2),u=s[0],c=s[1];return wP(t,e,{type:"SET",path:[].concat(M(n),[a]).map((function(t){return t.toString()})),value:u},c).then(xP)},apply:function(i,a,o){dP(r);var s=n[n.length-1];if(s===nP)return wP(t,e,{type:"ENDPOINT"}).then(xP);if("bind"===s)return gP(t,e,n.slice(0,-1));var u=g(yP(o),2),c=u[0],l=u[1];return wP(t,e,{type:"APPLY",path:n.map((function(t){return t.toString()})),argumentList:c},l).then(xP)},construct:function(i,a){dP(r);var o=g(yP(a),2),s=o[0],u=o[1];return wP(t,e,{type:"CONSTRUCT",path:n.map((function(t){return t.toString()})),argumentList:s},u).then(xP)}});return function(t,e){var n=(pP.get(e)||0)+1;pP.set(e,n),vP&&vP.register(t,e,t)}(i,t),i}function yP(t){var e,n=t.map(bP);return[n.map((function(t){return t[0]})),(e=n.map((function(t){return t[1]})),Array.prototype.concat.apply([],e))]}var mP=new WeakMap;function bP(t){var e,n=nr(uP);try{for(n.s();!(e=n.n()).done;){var r=g(e.value,2),i=r[0],a=r[1];if(a.canHandle(t)){var o=g(a.serialize(t),2);return[{type:"HANDLER",name:i,value:o[0]},o[1]]}}}catch(t){n.e(t)}finally{n.f()}return[{type:"RAW",value:t},mP.get(t)||[]]}function xP(t){switch(t.type){case"HANDLER":return uP.get(t.name).deserialize(t.value);case"RAW":return t.value}}function wP(t,e,n,r){return new Promise((function(i){var a=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.set(a,i),t.start&&t.start(),t.postMessage(Object.assign({id:a},n),r)}))}var kP=function(t){function e(t,n,r){var i;return k(this,e),(i=N(this,e)).graph=t,i.layout=n,i.options=r,i.spawnWorker(),i}return _(e,t),O(e,[{key:"spawnWorker",value:function(){this.proxy=fP(new Worker(new URL(s.p+s.u(598),s.b),{type:void 0})),this.running&&(this.running=!1,this.execute())}},{key:"execute",value:function(){var t;return Le(this,void 0,void 0,Jn().mark((function e(){var n,r,i,a,o,s,u,c;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.running){e.next=2;break}return e.abrupt("return",this);case 2:return this.running=!0,(n=this.layout.options).onTick,r=_e(n,["onTick"]),i={},Object.keys(r).forEach((function(t){_n(r[t])||(i[t]=r[t])})),a={layout:{id:this.layout.id,options:i,iterations:null===(t=this.options)||void 0===t?void 0:t.iterations},nodes:this.graph.getAllNodes(),edges:this.graph.getAllEdges()},o=new Float32Array([0]),e.next=10,this.proxy.calculateLayout(a,[o]);case 10:return s=e.sent,u=g(s,1),c=u[0],e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)})))}},{key:"stop",value:function(){return this.running=!1,this.proxy.stopLayout(),this}},{key:"kill",value:function(){this.proxy[rP]()}},{key:"isRunning",value:function(){return this.running}}])}(Ug),EP=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},OP=function(){return O((function t(e){k(this,t),this.instances=[],this.context=e}),[{key:"presetOptions",get:function(){return{animation:!!Gl(this.context.options,!0)}}},{key:"options",get:function(){return this.context.options.layout}},{key:"getLayoutInstance",value:function(){return this.instances}},{key:"preLayout",value:function(t){return EP(this,void 0,void 0,Jn().mark((function e(){var n,r,i,a,o,s,u,c,l;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.context,s=o.graph,u=o.model,c=t.add,IA(s,new LA(kl.BEFORE_LAYOUT,{type:"pre"})),e.next=5,null===(n=this.context.layout)||void 0===n?void 0:n.simulate();case 5:l=e.sent,null===(r=null==l?void 0:l.nodes)||void 0===r||r.forEach((function(t){var e=Kf(t),n=c.nodes.get(e);u.syncNodeLikeDatum(t),n&&Object.assign(n.style,t.style)})),null===(i=null==l?void 0:l.edges)||void 0===i||i.forEach((function(t){var e=Kf(t),n=c.edges.get(e);u.syncEdgeDatum(t),n&&Object.assign(n.style,t.style)})),null===(a=null==l?void 0:l.combos)||void 0===a||a.forEach((function(t){var e=Kf(t),n=c.combos.get(e);u.syncNodeLikeDatum(t),n&&Object.assign(n.style,t.style)})),IA(s,new LA(kl.AFTER_LAYOUT,{type:"pre"})),this.transformDataAfterLayout("pre",t);case 11:case"end":return e.stop()}}),e,this)})))}},{key:"postLayout",value:function(){return EP(this,arguments,void 0,(function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options;return Jn().mark((function n(){var r,i,a,o,s,u,c;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:r=Array.isArray(e)?e:[e],IA(i=t.context.graph,new LA(kl.BEFORE_LAYOUT,{type:"post"})),a=0;case 6:if(!(a<r.length)){n.next=19;break}return o=r[a],s=t.getLayoutData(o),u=Object.assign(Object.assign({},t.presetOptions),o),IA(i,new LA(kl.BEFORE_STAGE_LAYOUT,{options:u,index:a})),n.next=13,t.stepLayout(s,u,a);case 13:c=n.sent,IA(i,new LA(kl.AFTER_STAGE_LAYOUT,{options:u,index:a})),o.animation||t.updateElementPosition(c,!1);case 16:a++,n.next=6;break;case 19:IA(i,new LA(kl.AFTER_LAYOUT,{type:"post"})),t.transformDataAfterLayout("post");case 21:case"end":return n.stop()}}),n)}))()}))}},{key:"transformDataAfterLayout",value:function(t,e){var n=this.context.transform.getTransformInstance();Object.values(n).forEach((function(n){return n.afterLayout(t,e)}))}},{key:"simulate",value:function(){return EP(this,void 0,void 0,Jn().mark((function t(){var e,n,r,i,a,o;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.options){t.next=2;break}return t.abrupt("return",{});case 2:e=Array.isArray(this.options)?this.options:[this.options],n={},r=0;case 5:if(!(r<e.length)){t.next=15;break}return i=e[r],a=this.getLayoutData(i),t.next=10,this.stepLayout(a,Object.assign(Object.assign(Object.assign({},this.presetOptions),i),{animation:!1}),r);case 10:o=t.sent,n=o;case 12:r++,t.next=5;break;case 15:return t.abrupt("return",n);case 16:case"end":return t.stop()}}),t,this)})))}},{key:"stepLayout",value:function(t,e,n){return EP(this,void 0,void 0,Jn().mark((function r(){return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!Jg(e)){r.next=4;break}return r.next=3,this.treeLayout(t,e,n);case 3:case 6:return r.abrupt("return",r.sent);case 4:return r.next=6,this.graphLayout(t,e,n);case 7:case"end":return r.stop()}}),r,this)})))}},{key:"graphLayout",value:function(t,e,n){return EP(this,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l,f,d=this;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.animation,a=e.enableWorker,o=e.iterations,s=void 0===o?300:o,u=this.initGraphLayout(e)){r.next=4;break}return r.abrupt("return",{});case 4:if(this.instances[n]=u,this.instance=u,!a){r.next=14;break}return c=u,this.supervisor=new kP(c.graphData2LayoutModel(t),c.instance,{iterations:s}),r.t0=ty,r.next=12,this.supervisor.execute();case 12:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 14:if(!Qb(u)){r.next=22;break}if(!i){r.next=19;break}return r.next=18,u.execute(t,{onTick:function(t){d.updateElementPosition(t,!1)}});case 18:return r.abrupt("return",r.sent);case 19:return u.execute(t),u.stop(),r.abrupt("return",u.tick(s));case 22:return r.next=24,u.execute(t);case 24:if(l=r.sent,!i){r.next=29;break}return f=this.updateElementPosition(l,i),r.next=29,null==f?void 0:f.finished;case 29:return r.abrupt("return",l);case 30:case"end":return r.stop()}}),r,this)})))}},{key:"treeLayout",value:function(t,e,n){return EP(this,void 0,void 0,Jn().mark((function n(){var r,i,a,o,s,u,c,l,f,d,h,p;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.type,i=e.animation,a=Cl("layout",r)){n.next=4;break}return n.abrupt("return",{});case 4:if(o=t.nodes,s=void 0===o?[]:o,u=t.edges,c=void 0===u?[]:u,l=new Zg({nodes:s.map((function(t){return{id:Kf(t),data:t.data||{}}})),edges:c.map((function(t){return{id:Kf(t),source:t.source,target:t.target,data:t.data||{}}}))}),ZA(l),f={nodes:[],edges:[]},d={nodes:[],edges:[]},l.getRoots(Pl).forEach((function(t){nh(t,(function(t){t.children=l.getSuccessors(t.id)}),(function(t){return l.getSuccessors(t.id)}),"TB");var n=a(t,e),r=n.x,i=n.y,o=n.z,s=void 0===o?0:o;nh(n,(function(t){var e=t.id,n=t.x,a=t.y,o=t.z,u=void 0===o?0:o;f.nodes.push({id:e,style:{x:r,y:i,z:s}}),d.nodes.push({id:e,style:{x:n,y:a,z:u}})}),(function(t){return t.children}),"TB")})),h=this.inferTreeLayoutOffset(d),SP(d,h),!i){n.next=19;break}return SP(f,h),this.updateElementPosition(f,!1),p=this.updateElementPosition(d,i),n.next=19,null==p?void 0:p.finished;case 19:return n.abrupt("return",d);case 20:case"end":return n.stop()}}),n,this)})))}},{key:"inferTreeLayoutOffset",value:function(t){var e,n=1/0,r=-1/0,i=1/0,a=-1/0;null===(e=t.nodes)||void 0===e||e.forEach((function(t){var e=t.style||{},o=e.x,s=void 0===o?0:o,u=e.y,c=void 0===u?0:u;n=Math.min(n,s),r=Math.max(r,s),i=Math.min(i,c),a=Math.max(a,c)}));var o=this.context.canvas,s=o.getSize(),u=g(o.getCanvasByViewport([0,0]),2),c=u[0],l=u[1],f=g(o.getCanvasByViewport(s),2),d=f[0],h=f[1];return n>=c&&r<=d&&i>=l&&a<=h?[0,0]:[(c+d)/2-(n+r)/2,(l+h)/2-(i+a)/2]}},{key:"stopLayout",value:function(){this.instance&&Qb(this.instance)&&(this.instance.stop(),this.instance=void 0),this.supervisor&&(this.supervisor.stop(),this.supervisor=void 0),this.animationResult&&(this.animationResult.finish(),this.animationResult=void 0)}},{key:"getLayoutData",value:function(t){var e=t.nodeFilter,n=void 0===e?function(){return!0}:e,r=t.preLayout,i=void 0!==r&&r,a=t.isLayoutInvisibleNodes,o=void 0!==a&&a,s=this.context.model.getData(),u=s.nodes,c=s.edges,l=s.combos,f=this.context,d=f.element,h=f.model,p=function(t){return d.getElement(t)},v=i?function(t){var e;if(!o){if("hidden"===(null===(e=t.style)||void 0===e?void 0:e.visibility))return!1;if(h.getAncestorsData(t.id,Pl).some(uh))return!1;if(h.getAncestorsData(t.id,Al).some(uh))return!1}return n(t)}:function(t){var e=Kf(t),r=p(e);return!!r&&!jg(r)&&n(t)},g=u.filter(v),y=new Map(g.map((function(t){return[Kf(t),t]})));return l.forEach((function(t){return y.set(Kf(t),t)})),{nodes:g,edges:c.filter((function(t){var e=t.source,n=t.target;return y.has(e)&&y.has(n)})),combos:l}}},{key:"initGraphLayout",value:function(t){var e,n=this.context,r=n.element,i=n.viewport,a=t.type,o=(t.enableWorker,t.animation,t.iterations,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["type","enableWorker","animation","iterations"])),s=g(i.getCanvasSize(),2),u=s[0],c=s[1],l=[u/2,c/2],f=null!==(e=null==t?void 0:t.nodeSize)&&void 0!==e?e:function(t){var e=null==r?void 0:r.getElement(t.id);return e?e.attributes.size:null==r?void 0:r.getElementComputedStyle("node",t).size},d=Cl("layout",a);if(!d)return Dl.warn("The layout of ".concat(a," is not registered."));var h=Object.getPrototypeOf(d.prototype)===Qg.prototype?d:function(t,e){var n=function(n){function r(e,n){var i;if(k(this,r),(i=N(this,r,[e,n])).instance=new t({}),i.id=i.instance.id,"stop"in i.instance&&"tick"in i.instance){var a=i.instance;i.stop=a.stop.bind(a),i.tick=function(t){return ty(a.tick(t))}}return i}return _(r,n),O(r,[{key:"execute",value:function(t,e){return n=this,r=void 0,i=void 0,a=Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ty,n.next=3,this.instance.execute(this.graphData2LayoutModel(t),this.transformOptions(vd({},this.options,e)));case 3:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 5:case"end":return n.stop()}}),n,this)})),new(i||(i=Promise))((function(t,e){function o(t){try{u(a.next(t))}catch(t){e(t)}}function s(t){try{u(a.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(e.value).then(o,s)}u((a=a.apply(n,r||[])).next())}));var n,r,i,a}},{key:"transformOptions",value:function(t){var e=t.onTick;return e?(t.onTick=function(t){return e(ty(t))},t):t}},{key:"graphData2LayoutModel",value:function(t){var n=t.nodes,r=void 0===n?[]:n,i=t.edges,a=void 0===i?[]:i,o=t.combos,s=void 0===o?[]:o,u=r.map((function(t){var e=Kf(t),n=t.data,r=t.style,i=t.combo,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["data","style","combo"]),o={id:e,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),{data:n}),i?{parentId:i}:{}),{style:r}),a)};return(null==r?void 0:r.x)&&Object.assign(o.data,{x:r.x}),(null==r?void 0:r.y)&&Object.assign(o.data,{y:r.y}),(null==r?void 0:r.z)&&Object.assign(o.data,{z:r.z}),o})),c=new Map(u.map((function(t){return[t.id,t]}))),l=a.filter((function(t){var e=t.source,n=t.target;return c.has(e)&&c.has(n)})).map((function(t){var e=t.source,n=t.target,r=t.data,i=t.style;return{id:Kf(t),source:e,target:n,data:Object.assign({},r),style:Object.assign({},i)}})),f=s.map((function(t){return{id:Kf(t),data:Object.assign({_isCombo:!0},t.data),style:Object.assign({},t.style)}})),d=new Zg({nodes:[].concat(M(u),M(f)),edges:l});return e.model.model.hasTreeStructure(Al)&&(d.attachTreeStructure(Al),u.forEach((function(t){var n=e.model.model.getParent(t.id,Al);n&&d.hasNode(n.id)&&d.setParent(t.id,n.id,Al)}))),d}}])}(Qg);return n}(d,this.context),p=new h(this.context),v={nodeSize:f,width:u,height:c,center:l};switch(p.id){case"d3-force":case"d3-force-3d":Object.assign(v,{center:{x:u/2,y:c/2,z:0}})}return vd(p.options,v,o),p}},{key:"updateElementPosition",value:function(t,e){var n=this.context,r=n.model,i=n.element;return i?(r.updateData(t),i.draw({animation:e,silence:!0})):null}},{key:"destroy",value:function(){var t;this.stopLayout(),this.context={},null===(t=this.supervisor)||void 0===t||t.kill(),this.supervisor=void 0,this.instance=void 0,this.instances=[],this.animationResult=void 0}}])}(),SP=function(t,e){var n,r=g(e,2),i=r[0],a=r[1];null===(n=t.nodes)||void 0===n||n.forEach((function(t){if(t.style){var e=t.style,n=e.x,r=void 0===n?0:n,o=e.y,s=void 0===o?0:o;t.style.x=r+i,t.style.y=s+a}else t.style={x:i,y:a}}))};function MP(t){return t.layout?(Array.isArray(t.layout)||"preLayout"in t.layout||["antv-dagre","combo-combined","compact-box","circular","concentric","dagre","fishbone","grid","indented","mds","radial","random","snake","dendrogram","mindmap"].includes(t.layout.type)&&(t.layout.preLayout=!0),t):t}var TP=function(t){function e(t){var n;return k(this,e),(n=N(this,e,[t])).category="plugin",n.setPlugins(n.context.options.plugins||[]),n}return _(e,t),O(e,[{key:"setPlugins",value:function(t){this.setExtensions(t)}},{key:"getPluginInstance",value:function(t){var e=this.extensionMap[t];if(e)return e;Dl.warn("Cannot find the plugin ".concat(t,", will try to find it by type."));var n=this.extensions.find((function(e){return e.type===t}));return n?this.extensionMap[n.key]:void 0}}])}(ud),AP=["update-related-edges","collapse-expand-node","collapse-expand-combo","get-edge-actual-ends","arrange-draw-order"],PP=function(t){function e(t){var n;return k(this,e),(n=N(this,e,[t])).category="transform",n.setTransforms(n.context.options.transforms||[]),n}return _(e,t),O(e,[{key:"getTransforms",value:function(){}},{key:"setTransforms",value:function(t){this.setExtensions([].concat(M(AP.slice(0,AP.length-1)),M(t),[AP[AP.length-1]]))}},{key:"getTransformInstance",value:function(t){return t?this.extensionMap[t]:this.extensionMap}}])}(ud),NP=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},CP=function(){return O((function t(e){k(this,t),this.landmarkCounter=0,this.context=e;var n=g(this.paddingOffset,2),r=n[0],i=n[1],a=e.options,o=a.zoom,s=a.rotation,u=a.x,c=void 0===u?r:u,l=a.y,f=void 0===l?i:l;this.transform({mode:"absolute",scale:o,translate:[c,f],rotate:s},!1)}),[{key:"padding",get:function(){return rf(this.context.options.padding)}},{key:"paddingOffset",get:function(){var t=g(this.padding,4),e=t[0],n=t[1],r=t[2];return[(t[3]-n)/2,(e-r)/2,0]}},{key:"camera",get:function(){var t=this.context.canvas;return new Proxy(t.getCamera(),{get:function(e,n){var r=Object.entries(t.getLayers()).filter((function(t){var e=g(t,1)[0];return!["main"].includes(e)})),i=r.map((function(t){return g(t,2)[1].getCamera()})),a=e[n];if("function"==typeof a)return function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var s=a.apply(e,r);return i.forEach((function(t){t[n].apply(t,r)})),s}}})}},{key:"createLandmark",value:function(t){return this.camera.createLandmark("landmark-".concat(this.landmarkCounter++),t)}},{key:"getAnimation",value:function(t){var e=Gl(this.context.options,t);return!!e&&vv(Object.assign({},e),["easing","duration"])}},{key:"getCanvasSize",value:function(){var t=this.context.canvas.getConfig(),e=t.width,n=void 0===e?0:e,r=t.height;return[n,void 0===r?0:r]}},{key:"getCanvasCenter",value:function(){var t=this.context.canvas.getConfig(),e=t.width,n=void 0===e?0:e,r=t.height;return[n/2,(void 0===r?0:r)/2,0]}},{key:"getViewportCenter",value:function(){var t=g(this.camera.getPosition(),2);return[t[0],t[1],0]}},{key:"getGraphCenter",value:function(){return this.context.graph.getViewportByCanvas(this.getCanvasCenter())}},{key:"getZoom",value:function(){return this.camera.getZoom()}},{key:"getRotation",value:function(){return this.camera.getRoll()}},{key:"getTranslateOptions",value:function(t){var e=this.camera,n=t.mode,r=t.translate,i=void 0===r?[]:r,a=this.getZoom(),o=e.getPosition(),s=e.getFocalPoint(),u=g(this.getCanvasCenter(),2),c=u[0],l=u[1],f=g(i,3),d=f[0],h=void 0===d?0:d,p=f[1],v=void 0===p?0:p,y=f[2],m=xd([-h,-v,-(void 0===y?0:y)],a);return"relative"===n?{position:yd(o,m),focalPoint:yd(s,m)}:{position:yd([c,l,o[2]],m),focalPoint:yd([c,l,s[2]],m)}}},{key:"getRotateOptions",value:function(t){var e=t.mode,n=t.rotate,r=void 0===n?0:n;return{roll:"relative"===e?this.camera.getRoll()+r:r}}},{key:"getZoomOptions",value:function(t){var e=this.context.options.zoomRange,n=this.camera.getZoom(),r=t.mode,i=t.scale,a=void 0===i?1:i;return Ae.apply(void 0,["relative"===r?n*a:a].concat(M(e)))}},{key:"transform",value:function(t,e){return NP(this,void 0,void 0,Jn().mark((function n(){var r,i,a,o,s,u,c,l=this;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.context.graph,i=t.translate,a=t.rotate,o=t.scale,s=t.origin,this.cancelAnimation(),u=this.getAnimation(e),IA(r,new DA(kl.BEFORE_TRANSFORM,t)),a||!o||i||!s||u){n.next=9;break}return this.camera.setZoomByViewportPoint(this.getZoomOptions(t),s),IA(r,new DA(kl.AFTER_TRANSFORM,t)),n.abrupt("return");case 9:if(c={},i&&Object.assign(c,this.getTranslateOptions(t)),Oe(a)&&Object.assign(c,this.getRotateOptions(t)),Oe(o)&&Object.assign(c,{zoom:this.getZoomOptions(t)}),!u){n.next=18;break}return IA(r,new RA(kl.BEFORE_ANIMATE,gl.TRANSFORM,null,t)),n.abrupt("return",new Promise((function(e){l.transformResolver=e,l.camera.gotoLandmark(l.createLandmark(c),Object.assign(Object.assign({},u),{onfinish:function(){IA(r,new RA(kl.AFTER_ANIMATE,gl.TRANSFORM,null,t)),IA(r,new DA(kl.AFTER_TRANSFORM,t)),l.transformResolver=void 0,e()}}))})));case 18:this.camera.gotoLandmark(this.createLandmark(c),{duration:0}),IA(r,new DA(kl.AFTER_TRANSFORM,t));case 20:case"end":return n.stop()}}),n,this)})))}},{key:"fitView",value:function(t,e){return NP(this,void 0,void 0,Jn().mark((function n(){var r,i,a,o,s,u,c,l,f,d,h,p,v,y,m,b,x,w,k,E,O,S,M,T,A,P,N;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=g(this.padding,4),i=r[0],a=r[1],o=r[2],s=r[3],c=(u=t||{}).when,l=void 0===c?"always":c,f=u.direction,d=void 0===f?"both":f,h=this.context.canvas.getSize(),p=g(h,2),v=p[0],y=p[1],m=v-s-a,b=y-i-o,x=this.context.canvas.getBounds(),w=this.getBBoxInViewport(x),k=uf(w),E=g(k,2),O=E[0],S=E[1],M="x"===d&&O>=m||"y"===d&&S>=b||"both"===d&&O>=m&&S>=b,"overflow"!==l||M){n.next=13;break}return n.next=12,this.fitCenter({animation:e});case 12:return n.abrupt("return",n.sent);case 13:return T=m/O,A=b/S,P="x"===d?T:"y"===d?A:Math.min(T,A),N=this.getAnimation(e),n.next=19,this.transform({mode:"relative",scale:P,translate:yd(md(this.getCanvasCenter(),this.getBBoxInViewport(x).center),xd(this.paddingOffset,P))},N);case 19:case"end":return n.stop()}}),n,this)})))}},{key:"fitCenter",value:function(t){return NP(this,void 0,void 0,Jn().mark((function e(){var n;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.context.canvas.getBounds(),e.next=3,this.focus(n,t);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"focusElements",value:function(t){return NP(this,arguments,void 0,(function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Jn().mark((function r(){var i,a,o;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.context.element){r.next=3;break}return r.abrupt("return");case 3:return a=function(t){return n.shapes?t.getShape(n.shapes).getRenderBounds():t.getRenderBounds()},o=df(t.map((function(t){return a(i.getElement(t))}))),r.next=7,e.focus(o,n);case 7:case"end":return r.stop()}}),r)}))()}))}},{key:"focus",value:function(t,e){return NP(this,void 0,void 0,Jn().mark((function n(){var r,i,a;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.context.graph.getViewportByCanvas(t.center),i=e.position||this.getCanvasCenter(),a=md(i,r),n.next=5,this.transform({mode:"relative",translate:yd(a,this.paddingOffset)},e.animation);case 5:case"end":return n.stop()}}),n,this)})))}},{key:"getBBoxInViewport",value:function(t){var e=t.min,n=t.max,r=this.context.graph,i=g(r.getViewportByCanvas(e),2),a=i[0],o=i[1],s=g(r.getViewportByCanvas(n),2),u=s[0],c=s[1],l=new gr;return l.setMinMax([a,o,0],[u,c,0]),l}},{key:"isInViewport",value:function(t){var e,n,r,i,a,o,s,u,c,l,f,d,h,p,v=arguments.length>1&&void 0!==arguments[1]&&arguments[1],y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,m=this.context.graph,b=this.getCanvasSize(),x=g(m.getCanvasByViewport([0,0]),2),w=x[0],k=x[1],E=g(m.getCanvasByViewport(b),2),O=E[0],S=E[1],M=new gr;return M.setMinMax([w,k,0],[O,S,0]),y&&(M=ff(M,y)),ef(t)?hf(t,M):v?(n=M,i=(r=g((e=t).min,2))[0],a=r[1],s=(o=g(e.max,2))[0],u=o[1],l=(c=g(n.min,2))[0],f=c[1],h=(d=g(n.max,2))[0],p=d[1],i>=l&&s<=h&&a>=f&&u<=p):M.intersects(t)}},{key:"cancelAnimation",value:function(){var t,e;(null===(t=this.camera.landmarks)||void 0===t?void 0:t.length)&&this.camera.cancelLandmarkAnimation(),null===(e=this.transformResolver)||void 0===e||e.call(this)}}])}(),_P=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},LP=function(t){function e(t){var n,r;return k(this,e),(n=N(this,e)).options={},n.rendered=!1,n.destroyed=!1,n.context={model:new QA},n.isCollapsingExpanding=!1,n.onResize=Gg((function(){n.resize()}),300),n._setOptions(Object.assign({},e.defaultOptions,t),!0),n.context.graph=n,n.options.autoResize&&(null===(r=globalThis.addEventListener)||void 0===r||r.call(globalThis,"resize",n.onResize)),n}return _(e,t),O(e,[{key:"getOptions",value:function(){return this.options}},{key:"setOptions",value:function(t){this._setOptions(t,!1)}},{key:"_setOptions",value:function(t,e){if(this.updateCanvas(t),Object.assign(this.options,function(t){return[MP].reduce((function(t,e){return e(t)}),t)}(t)),e){var n=t.data;n&&this.addData(n)}else{var r=t.behaviors,i=t.combo,a=t.data,o=t.edge,s=t.layout,u=t.node,c=t.plugins,l=t.theme,f=t.transforms;r&&this.setBehaviors(r),a&&this.setData(a),u&&this.setNode(u),o&&this.setEdge(o),i&&this.setCombo(i),s&&this.setLayout(s),l&&this.setTheme(l),c&&this.setPlugins(c),f&&this.setTransforms(f)}}},{key:"getSize",value:function(){return this.context.canvas?this.context.canvas.getSize():[this.options.width||0,this.options.height||0]}},{key:"setSize",value:function(t,e){t&&(this.options.width=t),e&&(this.options.height=e),this.resize(t,e)}},{key:"setZoomRange",value:function(t){this.options.zoomRange=t}},{key:"getZoomRange",value:function(){return this.options.zoomRange}},{key:"setNode",value:function(t){this.options.node=t,this.context.model.refreshData()}},{key:"setEdge",value:function(t){this.options.edge=t,this.context.model.refreshData()}},{key:"setCombo",value:function(t){this.options.combo=t,this.context.model.refreshData()}},{key:"getTheme",value:function(){return this.options.theme}},{key:"setTheme",value:function(t){this.options.theme=_n(t)?t(this.getTheme()):t}},{key:"setLayout",value:function(t){this.options.layout=_n(t)?t(this.getLayout()):t}},{key:"getLayout",value:function(){return this.options.layout}},{key:"setBehaviors",value:function(t){var e;this.options.behaviors=_n(t)?t(this.getBehaviors()):t,null===(e=this.context.behavior)||void 0===e||e.setBehaviors(this.options.behaviors)}},{key:"updateBehavior",value:function(t){this.setBehaviors((function(e){return e.map((function(e){return"object"==typeof e&&e.key===t.key?Object.assign(Object.assign({},e),t):e}))}))}},{key:"getBehaviors",value:function(){return this.options.behaviors||[]}},{key:"setPlugins",value:function(t){var e;this.options.plugins=_n(t)?t(this.getPlugins()):t,null===(e=this.context.plugin)||void 0===e||e.setPlugins(this.options.plugins)}},{key:"updatePlugin",value:function(t){this.setPlugins((function(e){return e.map((function(e){return"object"==typeof e&&e.key===t.key?Object.assign(Object.assign({},e),t):e}))}))}},{key:"getPlugins",value:function(){return this.options.plugins||[]}},{key:"getPluginInstance",value:function(t){return this.context.plugin.getPluginInstance(t)}},{key:"setTransforms",value:function(t){var e;this.options.transforms=_n(t)?t(this.getTransforms()):t,null===(e=this.context.transform)||void 0===e||e.setTransforms(this.options.transforms)}},{key:"updateTransform",value:function(t){this.setTransforms((function(e){return e.map((function(e){return"object"==typeof e&&e.key===t.key?Object.assign(Object.assign({},e),t):e}))})),this.context.model.refreshData()}},{key:"getTransforms",value:function(){return this.options.transforms||[]}},{key:"getData",value:function(){return this.context.model.getData()}},{key:"getElementData",value:function(t){var e=this;return Array.isArray(t)?t.map((function(t){return e.context.model.getElementDataById(t)})):this.context.model.getElementDataById(t)}},{key:"getNodeData",value:function(t){return void 0===t?this.context.model.getNodeData():Array.isArray(t)?this.context.model.getNodeData(t):this.context.model.getNodeLikeDatum(t)}},{key:"getEdgeData",value:function(t){return void 0===t?this.context.model.getEdgeData():Array.isArray(t)?this.context.model.getEdgeData(t):this.context.model.getEdgeDatum(t)}},{key:"getComboData",value:function(t){return void 0===t?this.context.model.getComboData():Array.isArray(t)?this.context.model.getComboData(t):this.context.model.getNodeLikeDatum(t)}},{key:"setData",value:function(t){this.context.model.setData(_n(t)?t(this.getData()):t)}},{key:"addData",value:function(t){this.context.model.addData(_n(t)?t(this.getData()):t)}},{key:"addNodeData",value:function(t){this.context.model.addNodeData(_n(t)?t(this.getNodeData()):t)}},{key:"addEdgeData",value:function(t){this.context.model.addEdgeData(_n(t)?t(this.getEdgeData()):t)}},{key:"addComboData",value:function(t){this.context.model.addComboData(_n(t)?t(this.getComboData()):t)}},{key:"addChildrenData",value:function(t,e){this.context.model.addChildrenData(t,e)}},{key:"updateData",value:function(t){this.context.model.updateData(_n(t)?t(this.getData()):t)}},{key:"updateNodeData",value:function(t){this.context.model.updateNodeData(_n(t)?t(this.getNodeData()):t)}},{key:"updateEdgeData",value:function(t){this.context.model.updateEdgeData(_n(t)?t(this.getEdgeData()):t)}},{key:"updateComboData",value:function(t){this.context.model.updateComboData(_n(t)?t(this.getComboData()):t)}},{key:"removeData",value:function(t){this.context.model.removeData(_n(t)?t(this.getData()):t)}},{key:"removeNodeData",value:function(t){this.context.model.removeNodeData(_n(t)?t(this.getNodeData()):t)}},{key:"removeEdgeData",value:function(t){this.context.model.removeEdgeData(_n(t)?t(this.getEdgeData()):t)}},{key:"removeComboData",value:function(t){this.context.model.removeComboData(_n(t)?t(this.getComboData()):t)}},{key:"getElementType",value:function(t){return this.context.model.getElementType(t)}},{key:"getRelatedEdgesData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both";return this.context.model.getRelatedEdgesData(t,e)}},{key:"getNeighborNodesData",value:function(t){return this.context.model.getNeighborNodesData(t)}},{key:"getAncestorsData",value:function(t,e){return this.context.model.getAncestorsData(t,e)}},{key:"getParentData",value:function(t,e){return this.context.model.getParentData(t,e)}},{key:"getChildrenData",value:function(t){return this.context.model.getChildrenData(t)}},{key:"getDescendantsData",value:function(t){return this.context.model.getDescendantsData(t)}},{key:"getElementDataByState",value:function(t,e){return this.context.model.getElementDataByState(t,e)}},{key:"initCanvas",value:function(){return _P(this,void 0,void 0,Jn().mark((function t(){var e,n,r,i,a,o,s,u,c,l,f,d,h,p,v,g;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.context.canvas){t.next=4;break}return t.next=3,this.context.canvas.ready;case 3:return t.abrupt("return",t.sent);case 4:if(n=this.options,r=n.container,i=void 0===r?"container":r,a=n.width,o=n.height,s=n.renderer,u=n.cursor,c=n.background,l=n.canvas,f=n.devicePixelRatio,d=void 0===f?null!==(e=globalThis.devicePixelRatio)&&void 0!==e?e:1:f,!(i instanceof TA)){t.next=13;break}return this.context.canvas=i,u&&i.setCursor(u),s&&i.setRenderer(s),t.next=11,i.ready;case 11:t.next=22;break;case 13:return h=Te(i)?document.getElementById(i):i,p=CA(h),this.emit(kl.BEFORE_CANVAS_INIT,{container:h,width:a,height:o}),v=Object.assign(Object.assign({},l),{container:h,width:a||p[0],height:o||p[1],background:c,renderer:s,cursor:u,devicePixelRatio:d}),g=new TA(v),this.context.canvas=g,t.next=21,g.ready;case 21:this.emit(kl.AFTER_CANVAS_INIT,{canvas:g});case 22:case"end":return t.stop()}}),t,this)})))}},{key:"updateCanvas",value:function(t){var e,n,r=t.renderer,i=t.cursor,a=t.height,o=t.width,s=this.context.canvas;s&&(r&&(this.emit(kl.BEFORE_RENDERER_CHANGE,{renderer:this.options.renderer}),s.setRenderer(r),this.emit(kl.AFTER_RENDERER_CHANGE,{renderer:r})),i&&s.setCursor(i),(Oe(o)||Oe(a))&&this.setSize(null!==(e=null!=o?o:this.options.width)&&void 0!==e?e:0,null!==(n=null!=a?a:this.options.height)&&void 0!==n?n:0))}},{key:"initRuntime",value:function(){this.context.options=this.options,this.context.batch||(this.context.batch=new VA(this.context)),this.context.plugin||(this.context.plugin=new TP(this.context)),this.context.viewport||(this.context.viewport=new CP(this.context)),this.context.transform||(this.context.transform=new PP(this.context)),this.context.element||(this.context.element=new tP(this.context)),this.context.animation||(this.context.animation=new WA(this.context)),this.context.layout||(this.context.layout=new OP(this.context)),this.context.behavior||(this.context.behavior=new HA(this.context))}},{key:"prepare",value:function(){return _P(this,void 0,void 0,Jn().mark((function t(){return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve();case 2:if(!this.destroyed){t.next=4;break}throw new Error(jl("The graph instance has been destroyed"));case 4:return t.next=6,this.initCanvas();case 6:this.initRuntime();case 7:case"end":return t.stop()}}),t,this)})))}},{key:"render",value:function(){return _P(this,void 0,void 0,Jn().mark((function t(){var e,n,r;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.prepare();case 2:if(IA(this,new LA(kl.BEFORE_RENDER)),this.options.layout){t.next=9;break}return e=this.context.element.draw({type:"render"}),t.next=7,Promise.all([null==e?void 0:e.finished,this.autoFit()]);case 7:t.next=22;break;case 9:if(this.rendered||(i=this.options.layout,Array.isArray(i)||!(null==i?void 0:i.preLayout))){t.next=17;break}return t.next=12,this.context.element.preLayoutDraw({type:"render"});case 12:return n=t.sent,t.next=15,Promise.all([null==n?void 0:n.finished,this.autoFit()]);case 15:t.next=22;break;case 17:return r=this.context.element.draw({type:"render"}),t.next=20,Promise.all([null==r?void 0:r.finished,this.context.layout.postLayout()]);case 20:return t.next=22,this.autoFit();case 22:this.rendered=!0,IA(this,new LA(kl.AFTER_RENDER));case 24:case"end":return t.stop()}var i}),t,this)})))}},{key:"draw",value:function(){return _P(this,void 0,void 0,Jn().mark((function t(){var e;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.prepare();case 2:return t.next=4,null===(e=this.context.element.draw())||void 0===e?void 0:e.finished;case 4:case"end":return t.stop()}}),t,this)})))}},{key:"layout",value:function(t){return _P(this,void 0,void 0,Jn().mark((function e(){return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.layout.postLayout(t);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"stopLayout",value:function(){this.context.layout.stopLayout()}},{key:"clear",value:function(){return _P(this,void 0,void 0,Jn().mark((function t(){var e,n,r;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.context,n=e.model,r=e.element,n.setData({}),n.clearChanges(),null==r||r.clear();case 4:case"end":return t.stop()}}),t,this)})))}},{key:"destroy",value:function(){var t;IA(this,new LA(kl.BEFORE_DESTROY));var e=this.context,n=e.layout,r=e.animation,i=e.element,a=e.model,o=e.canvas,s=e.behavior,u=e.plugin;null==u||u.destroy(),null==s||s.destroy(),null==n||n.destroy(),null==r||r.destroy(),null==i||i.destroy(),a.destroy(),null==o||o.destroy(),this.options={},this.context={},this.off(),null===(t=globalThis.removeEventListener)||void 0===t||t.call(globalThis,"resize",this.onResize),this.destroyed=!0,IA(this,new LA(kl.AFTER_DESTROY))}},{key:"getCanvas",value:function(){return this.context.canvas}},{key:"resize",value:function(t,e){var n,r,i=CA(null===(r=this.context.canvas)||void 0===r?void 0:r.getContainer()),a=[t||i[0],e||i[1]];if(this.context.canvas){var o=this.context.canvas.getSize();pl(a,o)||(IA(this,new LA(kl.BEFORE_SIZE_CHANGE,{size:a})),(n=this.context.canvas).resize.apply(n,a),IA(this,new LA(kl.AFTER_SIZE_CHANGE,{size:a})))}}},{key:"fitView",value:function(t,e){return _P(this,void 0,void 0,Jn().mark((function n(){var r;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(r=this.context.viewport)||void 0===r?void 0:r.fitView(t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"fitCenter",value:function(t){return _P(this,void 0,void 0,Jn().mark((function e(){var n;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=this.context.viewport)||void 0===n?void 0:n.fitCenter({animation:t});case 2:case"end":return e.stop()}}),e,this)})))}},{key:"autoFit",value:function(){return _P(this,void 0,void 0,Jn().mark((function t(){var e,n,r;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.context.options.autoFit){t.next=3;break}return t.abrupt("return");case 3:if(!Te(e)){t.next=14;break}if("view"!==e){t.next=9;break}return t.next=7,this.fitView();case 7:t.next=12;break;case 9:if("center"!==e){t.next=12;break}return t.next=12,this.fitCenter();case 12:case 18:t.next=23;break;case 14:if(n=e.type,r=e.animation,"view"!==n){t.next=20;break}return t.next=18,this.fitView(e.options,r);case 20:if("center"!==n){t.next=23;break}return t.next=23,this.fitCenter(r);case 23:case"end":return t.stop()}}),t,this)})))}},{key:"focusElement",value:function(t,e){return _P(this,void 0,void 0,Jn().mark((function n(){var r;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(r=this.context.viewport)||void 0===r?void 0:r.focusElements(Array.isArray(t)?t:[t],{animation:e});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"zoomBy",value:function(t,e,n){return _P(this,void 0,void 0,Jn().mark((function r(){return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.context.viewport.transform({mode:"relative",scale:t,origin:n},e);case 2:case"end":return r.stop()}}),r,this)})))}},{key:"zoomTo",value:function(t,e,n){return _P(this,void 0,void 0,Jn().mark((function r(){return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.context.viewport.transform({mode:"absolute",scale:t,origin:n},e);case 2:case"end":return r.stop()}}),r,this)})))}},{key:"getZoom",value:function(){return this.context.viewport.getZoom()}},{key:"rotateBy",value:function(t,e,n){return _P(this,void 0,void 0,Jn().mark((function r(){return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.context.viewport.transform({mode:"relative",rotate:t,origin:n},e);case 2:case"end":return r.stop()}}),r,this)})))}},{key:"rotateTo",value:function(t,e,n){return _P(this,void 0,void 0,Jn().mark((function r(){return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.context.viewport.transform({mode:"absolute",rotate:t,origin:n},e);case 2:case"end":return r.stop()}}),r,this)})))}},{key:"getRotation",value:function(){return this.context.viewport.getRotation()}},{key:"translateBy",value:function(t,e){return _P(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.context.viewport.transform({mode:"relative",translate:t},e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"translateTo",value:function(t,e){return _P(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.context.viewport.transform({mode:"absolute",translate:t},e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"getPosition",value:function(){return md([0,0],this.getCanvasByViewport([0,0]))}},{key:"translateElementBy",value:function(t,e){return _P(this,arguments,void 0,(function(t,e){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Jn().mark((function i(){var a,o,s,u,c,l;return Jn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=Ln(t)?[t,null===(a=e)||void 0===a||a]:[b({},t,e),r],u=g(s,2),c=u[0],l=u[1],Object.entries(c).forEach((function(t){var e=g(t,2),r=e[0],i=e[1];return n.context.model.translateNodeLikeBy(r,i)})),i.next=4,null===(o=n.context.element.draw({animation:l,stage:"translate"}))||void 0===o?void 0:o.finished;case 4:case"end":return i.stop()}}),i)}))()}))}},{key:"translateElementTo",value:function(t,e){return _P(this,arguments,void 0,(function(t,e){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Jn().mark((function i(){var a,o,s,u,c,l;return Jn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=Ln(t)?[t,null===(a=e)||void 0===a||a]:[b({},t,e),r],u=g(s,2),c=u[0],l=u[1],Object.entries(c).forEach((function(t){var e=g(t,2),r=e[0],i=e[1];return n.context.model.translateNodeLikeTo(r,i)})),i.next=4,null===(o=n.context.element.draw({animation:l,stage:"translate"}))||void 0===o?void 0:o.finished;case 4:case"end":return i.stop()}}),i)}))()}))}},{key:"getElementPosition",value:function(t){return this.context.model.getElementPosition(t)}},{key:"getElementRenderStyle",value:function(t){return Lw(this.context.element.getElement(t).attributes,["context"])}},{key:"setElementVisibility",value:function(t,e){return _P(this,arguments,void 0,(function(t,e){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Jn().mark((function i(){var a,o,s,u,c,l,f,d,h,p;return Jn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=Ln(t)?[t,null===(a=e)||void 0===a||a]:[b({},t,e),r],u=g(s,2),c=u[0],l=u[1],f={nodes:[],edges:[],combos:[]},Object.entries(c).forEach((function(t){var e=g(t,2),r=e[0],i=e[1],a=n.getElementType(r);f["".concat(a,"s")].push({id:r,style:{visibility:i}})})),d=n.context,h=d.model,p=d.element,h.preventUpdateNodeLikeHierarchy((function(){h.updateData(f)})),i.next=7,null===(o=p.draw({animation:l,stage:"visibility"}))||void 0===o?void 0:o.finished;case 7:case"end":return i.stop()}}),i)}))()}))}},{key:"showElement",value:function(t,e){return _P(this,void 0,void 0,Jn().mark((function n(){var r;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Array.isArray(t)?t:[t],n.next=3,this.setElementVisibility(Object.fromEntries(r.map((function(t){return[t,"visible"]}))),e);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"hideElement",value:function(t,e){return _P(this,void 0,void 0,Jn().mark((function n(){var r;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Array.isArray(t)?t:[t],n.next=3,this.setElementVisibility(Object.fromEntries(r.map((function(t){return[t,"hidden"]}))),e);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"getElementVisibility",value:function(t){var e,n,r=this.context.element.getElement(t);return null!==(n=null===(e=null==r?void 0:r.style)||void 0===e?void 0:e.visibility)&&void 0!==n?n:"visible"}},{key:"setElementZIndex",value:function(t,e){return _P(this,void 0,void 0,Jn().mark((function n(){var r,i,a,o,s,u,c=this;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={nodes:[],edges:[],combos:[]},a=Ln(t)?t:b({},t,e),Object.entries(a).forEach((function(t){var e=g(t,2),n=e[0],r=e[1],a=c.getElementType(n);i["".concat(a,"s")].push({id:n,style:{zIndex:r}})})),o=this.context,s=o.model,u=o.element,s.preventUpdateNodeLikeHierarchy((function(){return s.updateData(i)})),n.next=7,null===(r=u.draw({animation:!1,stage:"zIndex"}))||void 0===r?void 0:r.finished;case 7:case"end":return n.stop()}}),n,this)})))}},{key:"frontElement",value:function(t){return _P(this,void 0,void 0,Jn().mark((function e(){var n,r,i,a=this;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.isArray(t)?t:[t],r=this.context.model,i={},n.map((function(t){var e=r.getFrontZIndex(t);if("combo"===r.getElementType(t)){var n=r.getAncestorsData(t,Al).at(-1)||a.getComboData(t),o=[n].concat(M(r.getDescendantsData(Kf(n)))),s=e-FA(n);o.forEach((function(t){i[Kf(t)]=a.getElementZIndex(Kf(t))+s}));var u=Uv(o.map(Kf),(function(t){return r.getRelatedEdgesData(t)}));u.internal.forEach((function(t){var e=Kf(t);i[e]=a.getElementZIndex(e)+s}))}else i[t]=e})),e.next=6,this.setElementZIndex(i);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"getElementZIndex",value:function(t){return FA(this.context.model.getElementDataById(t))}},{key:"setElementState",value:function(t,e){return _P(this,arguments,void 0,(function(t,e){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Jn().mark((function i(){var a,o,s,u,c,l,f,d;return Jn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=Ln(t)?[t,null===(a=e)||void 0===a||a]:[b({},t,e),r],u=g(s,2),c=u[0],l=u[1],f=function(t){return t?Array.isArray(t)?t:[t]:[]},d={nodes:[],edges:[],combos:[]},Object.entries(c).forEach((function(t){var e=g(t,2),r=e[0],i=e[1],a=n.getElementType(r);d["".concat(a,"s")].push({id:r,states:f(i)})})),n.updateData(d),i.next=7,null===(o=n.context.element.draw({animation:l,stage:"state"}))||void 0===o?void 0:o.finished;case 7:case"end":return i.stop()}}),i)}))()}))}},{key:"getElementState",value:function(t){return this.context.model.getElementState(t)}},{key:"getElementRenderBounds",value:function(t){return this.context.element.getElement(t).getRenderBounds()}},{key:"collapseElement",value:function(t){return _P(this,arguments,void 0,(function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Jn().mark((function r(){var i,a,o,s;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.context,a=i.model,o=i.element,!uh(a.getNodeLikeData([t])[0])){r.next=3;break}return r.abrupt("return");case 3:if(!e.isCollapsingExpanding){r.next=5;break}return r.abrupt("return");case 5:return"boolean"==typeof n&&(n={animation:n,align:!0}),s=a.getElementType(t),r.next=9,e.frontElement(t);case 9:if(e.isCollapsingExpanding=!0,e.setElementCollapsibility(t,!0),"node"!==s){r.next=16;break}return r.next=14,o.collapseNode(t,n);case 14:r.next=19;break;case 16:if("combo"!==s){r.next=19;break}return r.next=19,o.collapseCombo(t,!!n.animation);case 19:e.isCollapsingExpanding=!1;case 20:case"end":return r.stop()}}),r)}))()}))}},{key:"expandElement",value:function(t){return _P(this,arguments,void 0,(function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Jn().mark((function r(){var i,a,o,s;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.context,a=i.model,o=i.element,uh(a.getNodeLikeData([t])[0])){r.next=3;break}return r.abrupt("return");case 3:if(!e.isCollapsingExpanding){r.next=5;break}return r.abrupt("return");case 5:if("boolean"==typeof n&&(n={animation:n,align:!0}),s=a.getElementType(t),e.isCollapsingExpanding=!0,e.setElementCollapsibility(t,!1),"node"!==s){r.next=14;break}return r.next=12,o.expandNode(t,n);case 12:r.next=17;break;case 14:if("combo"!==s){r.next=17;break}return r.next=17,o.expandCombo(t,!!n.animation);case 17:e.isCollapsingExpanding=!1;case 18:case"end":return r.stop()}}),r)}))()}))}},{key:"setElementCollapsibility",value:function(t,e){var n=this.getElementType(t);"node"===n?this.updateNodeData([{id:t,style:{collapsed:e}}]):"combo"===n&&this.updateComboData([{id:t,style:{collapsed:e}}])}},{key:"toDataURL",value:function(){return _P(this,arguments,void 0,(function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.context.canvas.toDataURL(e));case 1:case"end":return n.stop()}}),n)}))()}))}},{key:"getCanvasByViewport",value:function(t){return this.context.canvas.getCanvasByViewport(t)}},{key:"getViewportByCanvas",value:function(t){return this.context.canvas.getViewportByCanvas(t)}},{key:"getClientByCanvas",value:function(t){return this.context.canvas.getClientByCanvas(t)}},{key:"getCanvasByClient",value:function(t){return this.context.canvas.getCanvasByClient(t)}},{key:"getViewportCenter",value:function(){return this.context.viewport.getViewportCenter()}},{key:"getCanvasCenter",value:function(){return this.context.viewport.getCanvasCenter()}},{key:"on",value:function(t,n,r){return Dn(e,"on",this,3)([t,n,r])}},{key:"once",value:function(t,n){return Dn(e,"once",this,3)([t,n])}},{key:"off",value:function(t,n){return Dn(e,"off",this,3)([t,n])}}])}(Ug);LP.defaultOptions={autoResize:!1,theme:"light",rotation:0,zoom:1,zoomRange:[.01,10]};var RP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function jP(t,e){var n=e||{},r=n.getNodeData,i=void 0===r?function(t,e){if(t.depth=e,!t.children)return t;var n=t.children,r=RP(t,["children"]);return Object.assign(Object.assign({},r),{children:n.map((function(t){return t.id}))})}:r,a=n.getEdgeData,o=void 0===a?function(t,e){return{source:t.id,target:e.id}}:a,s=n.getChildren,u=void 0===s?function(t){return t.children||[]}:s,c=[],l=[];return nh(t,(function(t,e){c.push(i(t,e));var n,r=nr(u(t));try{for(r.s();!(n=r.n()).done;){var a=n.value;l.push(o(t,a))}}catch(t){r.e(t)}finally{r.f()}}),(function(t){return u(t)}),"TB"),{nodes:c,edges:l}}var DP=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"beforeDraw",value:function(t){var e=t.add,n=t.update,r=this.context.model;return[].concat(M(e.edges.entries()),M(n.edges.entries())).forEach((function(t){var e=g(t,2)[1];IP(r,e)})),t}}])}(lA),IP=function(t,e){var n=e.source,r=e.target,i=t.getElementDataById(n),a=t.getElementDataById(r),o=qv(i,(function(e){return t.getParentData(e,Al)})),s=qv(a,(function(e){return t.getParentData(e,Al)})),u={sourceNode:Kf(o),targetNode:Kf(s)};return e.style?Object.assign(e.style,u):e.style=u,e},FP=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,vd({},e.defaultOptions,n)])).assignSizeByCentrality=function(t,e,n,r,i,a){var o=[e,n],s=[r[0],i[0]],u=[r[1],i[1]],c=[r[2],i[2]],l=function(t,e){if("function"==typeof a)return a(t,o,e);switch(a){case"linear":return function(t,e,n){var r=g(e,2),i=r[0],a=r[1],o=g(n,2),s=o[0],u=o[1];return a===i?s:s+(t-i)/(a-i)*(u-s)}(t,o,e);case"log":return function(t,e,n){var r=g(e,2),i=r[0],a=r[1],o=g(n,2),s=o[0],u=o[1];return s+Math.log(t-i+1)/Math.log(a-i+1)*(u-s)}(t,o,e);case"pow":return function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=g(e,2),a=i[0],o=i[1],s=g(n,2),u=s[0],c=s[1];return u+Math.pow((t-a)/(o-a),r)*(c-u)}(t,o,e,2);case"sqrt":return function(t,e,n){var r=g(e,2),i=r[0],a=r[1],o=g(n,2),s=o[0],u=o[1];return s+Math.sqrt((t-i)/(a-i))*(u-s)}(t,o,e);default:return e[0]}};return[l(t,s),l(t,u),l(t,c)]},r}return _(e,t),O(e,[{key:"beforeDraw",value:function(t){var e=this,n=this.context.model.getNodeData(),r=gh(this.options.maxSize),i=gh(this.options.minSize),a=this.getCentralities(this.options.centrality),o=a.size>0?Math.max.apply(Math,M(a.values())):0,s=a.size>0?Math.min.apply(Math,M(a.values())):0;return n.forEach((function(n){var u,c=e.assignSizeByCentrality(a.get(Kf(n))||0,s,o,i,r,e.options.scale),l=null===(u=e.context.element)||void 0===u?void 0:u.getElement(Kf(n)),f={size:c};e.assignLabelStyle(f,c,n,l),l&&hA(f,l.attributes)||dA(t,l?"update":"add","node",vd(n,{style:f}),!0)})),t}},{key:"assignLabelStyle",value:function(t,e,n,r){var i,a=r?r.config.style:null===(i=this.context.element)||void 0===i?void 0:i.getElementComputedStyle("node",n);if(Object.assign(t,vv(a,["labelFontSize","labelLineHeight"])),this.options.mapLabelSize){var o=this.getLabelSizeByNodeSize(e,1/0,Number(t.labelFontSize));Object.assign(t,{labelFontSize:o,labelLineHeight:o+af(t.labelPadding)})}return t}},{key:"getLabelSizeByNodeSize",value:function(t,e,n){var r=Math.min.apply(Math,M(t))/2,i=g(Array.isArray(this.options.mapLabelSize)?this.options.mapLabelSize:[n,e],2),a=i[0],o=i[1];return Math.min(o,Math.max(r,a))}},{key:"getCentralities",value:function(t){var e=this.context.model,n=e.getData();if("function"==typeof t)return t(n);var r=e.getRelatedEdgesData.bind(e);return Qf(n,r,t)}}])}(lA);FP.defaultOptions={centrality:{type:"degree"},maxSize:80,minSize:20,scale:"linear",mapLabelSize:!1};var zP=function(t){function e(t,n){return k(this,e),N(this,e,[t,Object.assign({},e.defaultOptions,n)])}return _(e,t),O(e,[{key:"ref",get:function(){return this.context.model.getRootsData()[0]}},{key:"afterLayout",value:function(){var t,e=this,n=Rd(this.ref),r=this.context,i=r.graph,a=r.model;null===(t=a.getData().nodes)||void 0===t||t.forEach((function(t){var r;if(Kf(t)!==Kf(e.ref)){var o=Nd(md(Rd(t),n)),s=Math.abs(o)>Math.PI/2,u=!t.children||0===t.children.length,c=Kf(t),l=null===(r=e.context.element)||void 0===r?void 0:r.getElement(c);if(l&&l.isVisible()){var f=(u?1:-1)*(gh(i.getElementRenderStyle(c).size)[0]/2+e.options.offset),d=[["translate",f*Math.cos(o),f*Math.sin(o)],["rotate",s?Nr(o)+180:Nr(o)]];a.updateNodeData([{id:Kf(t),style:{labelTextAlign:s===u?"right":"left",labelTextBaseline:"middle",labelTransform:d}}])}}})),i.draw()}}])}(lA);zP.defaultOptions={offset:5};var BP=["top","top-right","right","right-bottom","bottom","bottom-left","left","left-top"],GP=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)])).cacheMergeStyle=new Map,r.getAffectedParallelEdges=function(t){var e=t.add.edges,n=t.update,i=n.nodes,a=n.edges,o=n.combos,s=t.remove.edges,u=r.context.model,c=new Map,l=function(t,e){u.getRelatedEdgesData(e).forEach((function(t){return!c.has(Kf(t))&&c.set(Kf(t),t)}))};i.forEach(l),o.forEach(l);var f=function(t){var e=u.getEdgeData().map((function(t){return IP(u,t)}));VP(t,e,!0).forEach((function(t){return!c.has(Kf(t))&&c.set(Kf(t),t)}))};if(s.size&&s.forEach(f),e.size&&e.forEach(f),a.size){var d=Gk(Bk(u.getChanges())).update.edges;a.forEach((function(t){var e;f(t);var n=null===(e=d.find((function(e){return Kf(e.value)===Kf(t)})))||void 0===e?void 0:e.original;n&&!HP(t,n)&&f(n)}))}Mh(r.options.edges)||c.forEach((function(t,e){return!r.options.edges.includes(e)&&c.delete(e)}));var h=u.getEdgeData().map(Kf);return new Map(M(c).sort((function(t,e){return h.indexOf(t[0])-h.indexOf(e[0])})))},r.applyBundlingStyle=function(t,e,n){var i=WP(e),a=i.edgeMap,o=i.reverses;a.forEach((function(e){e.forEach((function(e,i,a){var s,u=a.length,c=e.style||{};if(e.source===e.target){var l=BP.length;c.loopPlacement=BP[i%l],c.loopDist=Math.floor(i/l)*n+50}else if(1===u)c.curveOffset=0;else{var f=(i%2==0?1:-1)*(o["".concat(e.source,"|").concat(e.target,"|").concat(i)]?-1:1);c.curveOffset=u%2==1?f*Math.ceil(i/2)*n*2:f*(Math.floor(i/2)*n*2+n)}var d=Object.assign(e,{type:"quadratic",style:c}),h=null===(s=r.context.element)||void 0===s?void 0:s.getElement(Kf(e));h&&hA(d.style,h.attributes)||dA(t,h?"update":"add","edge",d,!0)}))}))},r.resetEdgeStyle=function(t){var e=t.style||{},n=r.cacheMergeStyle.get(Kf(t))||{};return Object.keys(n).forEach((function(r){pl(e[r],n[r])&&(t[r]?e[r]=t[r]:delete e[r])})),Object.assign(t,{style:e})},r.applyMergingStyle=function(t,e){var n=WP(e),i=n.edgeMap,a=n.reverses;i.forEach((function(e){var n;if(1!==e.length){var i=e.map((function(t,e){var n=t.source,r=t.target,i=t.style,o=void 0===i?{}:i,s=o.startArrow,u=o.endArrow,c={},l=g(a["".concat(n,"|").concat(r,"|").concat(e)]?["endArrow","startArrow"]:["startArrow","endArrow"],2),f=l[0],d=l[1];return Cn(s)&&(c[f]=s),Cn(u)&&(c[d]=u),c})).reduce((function(t,e){return Object.assign(Object.assign({},t),e)}),{});e.forEach((function(e,n,a){var o;if(0===n){var s=Object.assign({},_n(r.options.style)?r.options.style(a):r.options.style,{childrenData:a});r.cacheMergeStyle.set(Kf(e),s);var u=Object.assign(Object.assign({},e),{type:"line",style:Object.assign(Object.assign(Object.assign({},e.style),i),s)}),c=null===(o=r.context.element)||void 0===o?void 0:o.getElement(Kf(e));c&&hA(u.style,c.attributes)||dA(t,c?"update":"add","edge",u,!0)}else dA(t,"remove","edge",e)}))}else{var o=e[0],s=null===(n=r.context.element)||void 0===n?void 0:n.getElement(Kf(o)),u=r.resetEdgeStyle(o);s&&hA(u,s.attributes)||dA(t,s?"update":"add","edge",u)}}))},r}return _(e,t),O(e,[{key:"beforeDraw",value:function(t){var e=this.getAffectedParallelEdges(t);return 0===e.size||("bundle"===this.options.mode?this.applyBundlingStyle(t,e,this.options.distance):this.applyMergingStyle(t,e)),t}}])}(lA);GP.defaultOptions={mode:"bundle",distance:15};var WP=function(t){var e,n=new Map,r=new Set,i={},a=new Map,o=nr(t);try{for(o.s();!(e=o.n()).done;){var s=g(e.value,2),u=s[0],c=s[1];if(!r.has(u)){var l=c.source,f=c.target,d="".concat(l,"-").concat(f);n.has(d)||(n.set(d,[]),a.set(d,new Set));var h=n.get(d),p=a.get(d);h&&p&&!p.has(u)&&(h.push(c),p.add(u),r.add(u));var v,y=nr(t);try{for(y.s();!(v=y.n()).done;){var m=g(v.value,2),b=m[0],x=m[1];if(!r.has(b)&&b!==u&&HP(c,x)){var w=n.get(d),k=a.get(d);w&&k&&!k.has(b)&&(w.push(x),k.add(b),l===x.target&&f===x.source&&(i["".concat(x.source,"|").concat(x.target,"|").concat(w.length-1)]=!0),r.add(b))}}}catch(t){y.e(t)}finally{y.f()}}}}catch(t){o.e(t)}finally{o.f()}return{edgeMap:n,reverses:i}},VP=function(t,e,n){return e.filter((function(e){return(n||Kf(e)!==Kf(t))&&HP(e,t)}))},HP=function(t,e){var n=t.style||{},r=n.sourceNode,i=n.targetNode,a=e.style||{},o=a.sourceNode,s=a.targetNode;return r===o&&i===s||r===s&&i===o},YP=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"beforeDraw",value:function(t,e){if("visibility"===e.stage)return t;var n=this.context.model,r=t.update,i=r.nodes,a=r.edges,o=r.combos,s=function(t,e){n.getRelatedEdgesData(e).forEach((function(t){return!a.has(Kf(t))&&a.set(Kf(t),t)}))};return i.forEach(s),o.forEach(s),t}}])}(lA),UP={animation:{"combo-collapse":Xl,"combo-expand":Kl,"node-collapse":Hl,"node-expand":Yl,"path-in":Ul,"path-out":ql,fade:[{fields:["opacity"]}],translate:[{fields:["x","y"]}]},behavior:{"brush-select":Qd,"click-select":sh,"collapse-expand":Dg,"create-edge":Bg,"drag-canvas":Vg,"drag-element-force":ry,"drag-element":Yg,"fix-element-size":ay,"focus-element":oy,"hover-activate":sy,"lasso-select":uy,"auto-adapt-label":fd,"optimize-viewport-transform":cy,"scroll-canvas":fy,"zoom-canvas":hy},combo:{circle:Ov,rect:Sv},edge:{cubic:rg,line:sg,polyline:yg,quadratic:mg,"cubic-horizontal":ig,"cubic-radial":ag,"cubic-vertical":og},layout:{"antv-dagre":eb,"combo-combined":ex,"compact-box":py.compactBox,"d3-force":Hx,"force-atlas2":Jx,circular:ab,concentric:fb,dagre:Xx,dendrogram:py.dendrogram,fishbone:Mw,force:Lb,fruchterman:ew,grid:rw,indented:py.indented,mds:Kb,mindmap:py.mindmap,radial:gw,random:Ew,snake:Nw},node:{circle:Yh,diamond:qh,ellipse:Zh,hexagon:Qh,html:gv,image:mv,rect:bv,star:xv,donut:Xh,triangle:wv},palette:{spectral:["rgb(158, 1, 66)","rgb(213, 62, 79)","rgb(244, 109, 67)","rgb(253, 174, 97)","rgb(254, 224, 139)","rgb(255, 255, 191)","rgb(230, 245, 152)","rgb(171, 221, 164)","rgb(102, 194, 165)","rgb(50, 136, 189)","rgb(94, 79, 162)"],tableau:["rgb(78, 121, 167)","rgb(242, 142, 44)","rgb(225, 87, 89)","rgb(118, 183, 178)","rgb(89, 161, 79)","rgb(237, 201, 73)","rgb(175, 122, 161)","rgb(255, 157, 167)","rgb(156, 117, 95)","rgb(186, 176, 171)"],oranges:["rgb(255, 245, 235)","rgb(254, 230, 206)","rgb(253, 208, 162)","rgb(253, 174, 107)","rgb(253, 141, 60)","rgb(241, 105, 19)","rgb(217, 72, 1)","rgb(166, 54, 3)","rgb(127, 39, 4)"],greens:["rgb(247, 252, 245)","rgb(229, 245, 224)","rgb(199, 233, 192)","rgb(161, 217, 155)","rgb(116, 196, 118)","rgb(65, 171, 93)","rgb(35, 139, 69)","rgb(0, 109, 44)","rgb(0, 68, 27)"],blues:["rgb(247, 251, 255)","rgb(222, 235, 247)","rgb(198, 219, 239)","rgb(158, 202, 225)","rgb(107, 174, 214)","rgb(66, 146, 198)","rgb(33, 113, 181)","rgb(8, 81, 156)","rgb(8, 48, 107)"]},theme:{dark:uA,light:cA},plugin:{"bubble-sets":bk,"edge-bundling":Mk,"edge-filter-lens":jk,"grid-line":zk,background:Iw,contextmenu:Sk,fisheye:Ik,fullscreen:Fk,history:Hk,hull:wE,legend:DO,minimap:IO,snapline:WO,timebar:DT,toolbar:WT,tooltip:$T,watermark:rA},transform:{"arrange-draw-order":fA,"collapse-expand-combo":pA,"collapse-expand-node":gA,"get-edge-actual-ends":DP,"map-node-size":FP,"place-radial-labels":zP,"process-parallel-edges":GP,"update-related-edges":YP},shape:{circle:Du,ellipse:zu,group:Bu,html:Wu,image:Dh,line:Yu,path:qu,polygon:Ku,polyline:Zu,rect:Qu,text:tc,label:Nh,badge:Ch}};Object.entries(UP).forEach((function(t){var e=g(t,2),n=e[0],r=e[1];Object.entries(r).forEach((function(t){var e=g(t,2),r=e[0],i=e[1];xA(n,r,i)}))}));var qP,XP={css:"//at.alicdn.com/t/a/font_470089_8hnbbf8n4u8.css",js:"//at.alicdn.com/t/a/font_470089_8hnbbf8n4u8.js"},KP=s(6003),$P=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},ZP=Object.assign({},KP),QP=ZP.version,JP=ZP.render,tN=ZP.unmountComponentAtNode;function eN(){return $P(this,void 0,void 0,Jn().mark((function t(){var e;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!qP){t.next=2;break}return t.abrupt("return");case 2:if(!(Number((QP||"").split(".")[0])>=18)){t.next=13;break}return t.prev=4,t.next=7,Promise.resolve().then(s.t.bind(s,4629,19));case 7:(e=t.sent).createRoot&&(qP=e.createRoot),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(4);case 13:case"end":return t.stop()}}),t,null,[[4,11]])})))}function nN(t){var e=ZP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&"object"==typeof e&&(e.usingClientEntryPoint=t)}var rN="__rc_react_root__";function iN(t,e){nN(!0);var n=e[rN]||qP(e);nN(!1),n.render(t),e[rN]=n}function aN(t,e){JP(t,e)}function oN(t,e){return $P(this,void 0,void 0,Jn().mark((function n(){return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,eN();case 2:qP?iN(t,e):aN(t,e);case 3:case"end":return n.stop()}}),n)})))}function sN(t){return $P(this,void 0,void 0,Jn().mark((function e(){return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then((function(){var e;null===(e=t[rN])||void 0===e||e.unmount(),delete t[rN]})));case 1:case"end":return e.stop()}}),e)})))}function uN(t){tN(t)}var cN=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"getKeyStyle",value:function(t){return Object.assign({},Dn(e,"getKeyStyle",this,3)([t]))}},{key:"update",value:function(t){Dn(e,"update",this,3)([t])}},{key:"connectedCallback",value:function(){Dn(e,"connectedCallback",this,3)([]),oN(this.attributes.component,this.getDomElement())}},{key:"attributeChangedCallback",value:function(t,n,r){Dn(e,"attributeChangedCallback",this,3)([t,n,r]),"component"===t&&n!==r&&oN(this.attributes.component,this.getDomElement())}},{key:"destroy",value:function(){!function(t){$P(this,void 0,void 0,Jn().mark((function e(){return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eN();case 2:if(!qP){e.next=4;break}return e.abrupt("return",sN(t));case 4:uN(t);case 5:case"end":return e.stop()}}),e)})))}(this.getDomElement()),Dn(e,"destroy",this,3)([])}}])}(gv),lN=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"getActiveIds",value:function(t){var e=this.context,n=e.model,r=e.graph,i=t.target.id,a=r.getElementType(i),o=[i];if("edge"===a){var s=n.getEdgeDatum(i);this.collectChainNodes(s.source,"in",o),this.collectChainNodes(s.target,"out",o)}else"node"===a&&this.collectChainNodes(i,"both",o);return r.frontElement(o),o}},{key:"collectChainNodes",value:function(t,e,n){var r=this;this.context.model.getRelatedEdgesData(t,e).forEach((function(t){n.includes(Kf(t))||n.push(Kf(t)),n.includes(t.source)||(n.push(t.source),r.collectChainNodes(t.source,"in",n)),n.includes(t.target)||(n.push(t.target),r.collectChainNodes(t.target,"out",n))}))}}])}(sy),fN=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"getActiveIds",value:function(t){var e=this.context,n=e.model,r=e.graph,i=t.target.id,a=r.getElementType(i),o=[i];if("edge"===a){var s=n.getEdgeDatum(i);o.push(s.source,s.target)}else"node"===a&&o.push.apply(o,M(n.getRelatedEdgesData(i).map(Kf)));return r.frontElement(o),o}}])}(sy),dN=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"getControlPoints",value:function(t){var e=g(this.getEndpoints(t,!1),2),n=e[0],r=e[1];return[[g(n,1)[0],g(r,2)[1]]]}}])}(yg),hN=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"beforeDraw",value:function(t){var e=this.context.model.getData(),n=e.nodes,r=e.edges,i=n.filter((function(t){return 1===t.depth})),a=i.map((function(t){return t.id}));return r.forEach((function(t){a.includes(t.target)&&(t.style||(t.style={}),t.style.zIndex=i.length-i.findIndex((function(e){return e.id===t.target})))})),t}}])}(lA),pN=function(t){function e(t,n){return k(this,e),N(this,e,[t,Object.assign({},e.defaultOptions,n)])}return _(e,t),O(e,[{key:"beforeDraw",value:function(t){var e=this,n=this.context.model.getNodeData();if(0===n.length)return t;var r=0,i=function(t,a){var o,s=n.find((function(e){return e.id==t}));s&&(s.style||(s.style={}),s.style.color=a||e.options.colors[r++%e.options.colors.length],null===(o=s.children)||void 0===o||o.forEach((function(t){var e;return i(t,null===(e=s.style)||void 0===e?void 0:e.color)})))};return n.filter((function(t){return 1===t.depth})).forEach((function(t){return i(t.id)})),t}}])}(lA);b(pN,"defaultOptions",{colors:["#1783FF","#F08F56","#D580FF","#00C9C9","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]});var vN=s(9276),gN=s(5442),yN=s.n(gN);function mN(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var bN=s(5410),xN=s.n(bN),wN="-ms-",kN="-moz-",EN="-webkit-",ON="comm",SN="rule",MN="decl",TN="@keyframes",AN=Math.abs,PN=String.fromCharCode,NN=Object.assign;function CN(t){return t.trim()}function _N(t,e){return(t=e.exec(t))?t[0]:t}function LN(t,e,n){return t.replace(e,n)}function RN(t,e,n){return t.indexOf(e,n)}function jN(t,e){return 0|t.charCodeAt(e)}function DN(t,e,n){return t.slice(e,n)}function IN(t){return t.length}function FN(t){return t.length}function zN(t,e){return e.push(t),t}function BN(t,e){return t.filter((function(t){return!_N(t,e)}))}var GN=1,WN=1,VN=0,HN=0,YN=0,UN="";function qN(t,e,n,r,i,a,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:GN,column:WN,length:o,return:"",siblings:s}}function XN(t,e){return NN(qN("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function KN(t){for(;t.root;)t=XN(t.root,{children:[t]});zN(t,t.siblings)}function $N(){return YN=HN>0?jN(UN,--HN):0,WN--,10===YN&&(WN=1,GN--),YN}function ZN(){return YN=HN<VN?jN(UN,HN++):0,WN++,10===YN&&(WN=1,GN++),YN}function QN(){return jN(UN,HN)}function JN(){return HN}function tC(t,e){return DN(UN,t,e)}function eC(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function nC(t){return CN(tC(HN-1,aC(91===t?t+2:40===t?t+1:t)))}function rC(t){for(;(YN=QN())&&YN<33;)ZN();return eC(t)>2||eC(YN)>3?"":" "}function iC(t,e){for(;--e&&ZN()&&!(YN<48||YN>102||YN>57&&YN<65||YN>70&&YN<97););return tC(t,JN()+(e<6&&32==QN()&&32==ZN()))}function aC(t){for(;ZN();)switch(YN){case t:return HN;case 34:case 39:34!==t&&39!==t&&aC(YN);break;case 40:41===t&&aC(t);break;case 92:ZN()}return HN}function oC(t,e){for(;ZN()&&t+YN!==57&&(t+YN!==84||47!==QN()););return"/*"+tC(e,HN-1)+"*"+PN(47===t?t:ZN())}function sC(t){for(;!eC(QN());)ZN();return tC(t,HN)}function uC(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function cC(t,e,n,r){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case MN:return t.return=t.return||t.value;case ON:return"";case TN:return t.return=t.value+"{"+uC(t.children,r)+"}";case SN:if(!IN(t.value=t.props.join(",")))return""}return IN(n=uC(t.children,r))?t.return=t.value+"{"+n+"}":""}function lC(t,e,n){switch(function(t,e){return 45^jN(t,0)?(((e<<2^jN(t,0))<<2^jN(t,1))<<2^jN(t,2))<<2^jN(t,3):0}(t,e)){case 5103:return EN+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return EN+t+t;case 4789:return kN+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return EN+t+kN+t+wN+t+t;case 5936:switch(jN(t,e+11)){case 114:return EN+t+wN+LN(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return EN+t+wN+LN(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return EN+t+wN+LN(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return EN+t+wN+t+t;case 6165:return EN+t+wN+"flex-"+t+t;case 5187:return EN+t+LN(t,/(\w+).+(:[^]+)/,EN+"box-$1$2"+wN+"flex-$1$2")+t;case 5443:return EN+t+wN+"flex-item-"+LN(t,/flex-|-self/g,"")+(_N(t,/flex-|baseline/)?"":wN+"grid-row-"+LN(t,/flex-|-self/g,""))+t;case 4675:return EN+t+wN+"flex-line-pack"+LN(t,/align-content|flex-|-self/g,"")+t;case 5548:return EN+t+wN+LN(t,"shrink","negative")+t;case 5292:return EN+t+wN+LN(t,"basis","preferred-size")+t;case 6060:return EN+"box-"+LN(t,"-grow","")+EN+t+wN+LN(t,"grow","positive")+t;case 4554:return EN+LN(t,/([^-])(transform)/g,"$1"+EN+"$2")+t;case 6187:return LN(LN(LN(t,/(zoom-|grab)/,EN+"$1"),/(image-set)/,EN+"$1"),t,"")+t;case 5495:case 3959:return LN(t,/(image-set\([^]*)/,EN+"$1$`$1");case 4968:return LN(LN(t,/(.+:)(flex-)?(.*)/,EN+"box-pack:$3"+wN+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+EN+t+t;case 4200:if(!_N(t,/flex-|baseline/))return wN+"grid-column-align"+DN(t,e)+t;break;case 2592:case 3360:return wN+LN(t,"template-","")+t;case 4384:case 3616:return n&&n.some((function(t,n){return e=n,_N(t.props,/grid-\w+-end/)}))?~RN(t+(n=n[e].value),"span",0)?t:wN+LN(t,"-start","")+t+wN+"grid-row-span:"+(~RN(n,"span",0)?_N(n,/\d+/):+_N(n,/\d+/)-+_N(t,/\d+/))+";":wN+LN(t,"-start","")+t;case 4896:case 4128:return n&&n.some((function(t){return _N(t.props,/grid-\w+-start/)}))?t:wN+LN(LN(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return LN(t,/(.+)-inline(.+)/,EN+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(IN(t)-1-e>6)switch(jN(t,e+1)){case 109:if(45!==jN(t,e+4))break;case 102:return LN(t,/(.+:)(.+)-([^]+)/,"$1"+EN+"$2-$3$1"+kN+(108==jN(t,e+3)?"$3":"$2-$3"))+t;case 115:return~RN(t,"stretch",0)?lC(LN(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return LN(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(e,n,r,i,a,o,s){return wN+n+":"+r+s+(i?wN+n+"-span:"+(a?o:+o-+r)+s:"")+t}));case 4949:if(121===jN(t,e+6))return LN(t,":",":"+EN)+t;break;case 6444:switch(jN(t,45===jN(t,14)?18:11)){case 120:return LN(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+EN+(45===jN(t,14)?"inline-":"")+"box$3$1"+EN+"$2$3$1"+wN+"$2box$3")+t;case 100:return LN(t,":",":"+wN)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return LN(t,"scroll-","scroll-snap-")+t}return t}function fC(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case MN:return void(t.return=lC(t.value,t.length,n));case TN:return uC([XN(t,{value:LN(t.value,"@","@"+EN)})],r);case SN:if(t.length)return function(t,e){return t.map(e).join("")}(n=t.props,(function(e){switch(_N(e,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":KN(XN(t,{props:[LN(e,/:(read-\w+)/,":-moz-$1")]})),KN(XN(t,{props:[e]})),NN(t,{props:BN(n,r)});break;case"::placeholder":KN(XN(t,{props:[LN(e,/:(plac\w+)/,":"+EN+"input-$1")]})),KN(XN(t,{props:[LN(e,/:(plac\w+)/,":-moz-$1")]})),KN(XN(t,{props:[LN(e,/:(plac\w+)/,wN+"input-$1")]})),KN(XN(t,{props:[e]})),NN(t,{props:BN(n,r)})}return""}))}}function dC(t){return function(t){return UN="",t}(hC("",null,null,null,[""],t=function(t){return GN=WN=1,VN=IN(UN=t),HN=0,[]}(t),0,[0],t))}function hC(t,e,n,r,i,a,o,s,u){for(var c=0,l=0,f=o,d=0,h=0,p=0,v=1,g=1,y=1,m=0,b="",x=i,w=a,k=r,E=b;g;)switch(p=m,m=ZN()){case 40:if(108!=p&&58==jN(E,f-1)){-1!=RN(E+=LN(nC(m),"&","&\f"),"&\f",AN(c?s[c-1]:0))&&(y=-1);break}case 34:case 39:case 91:E+=nC(m);break;case 9:case 10:case 13:case 32:E+=rC(p);break;case 92:E+=iC(JN()-1,7);continue;case 47:switch(QN()){case 42:case 47:zN(vC(oC(ZN(),JN()),e,n,u),u);break;default:E+="/"}break;case 123*v:s[c++]=IN(E)*y;case 125*v:case 59:case 0:switch(m){case 0:case 125:g=0;case 59+l:-1==y&&(E=LN(E,/\f/g,"")),h>0&&IN(E)-f&&zN(h>32?gC(E+";",r,n,f-1,u):gC(LN(E," ","")+";",r,n,f-2,u),u);break;case 59:E+=";";default:if(zN(k=pC(E,e,n,c,l,i,s,b,x=[],w=[],f,a),a),123===m)if(0===l)hC(E,e,k,k,x,a,f,s,w);else switch(99===d&&110===jN(E,3)?100:d){case 100:case 108:case 109:case 115:hC(t,k,k,r&&zN(pC(t,k,k,0,0,i,s,b,i,x=[],f,w),w),i,w,f,s,r?x:w);break;default:hC(E,k,k,k,[""],w,0,s,w)}}c=l=h=0,v=y=1,b=E="",f=o;break;case 58:f=1+IN(E),h=p;default:if(v<1)if(123==m)--v;else if(125==m&&0==v++&&125==$N())continue;switch(E+=PN(m),m*v){case 38:y=l>0?1:(E+="\f",-1);break;case 44:s[c++]=(IN(E)-1)*y,y=1;break;case 64:45===QN()&&(E+=nC(ZN())),d=QN(),l=f=IN(b=E+=sC(JN())),m++;break;case 45:45===p&&2==IN(E)&&(v=0)}}return a}function pC(t,e,n,r,i,a,o,s,u,c,l,f){for(var d=i-1,h=0===i?a:[""],p=FN(h),v=0,g=0,y=0;v<r;++v)for(var m=0,b=DN(t,d+1,d=AN(g=o[v])),x=t;m<p;++m)(x=CN(g>0?h[m]+" "+b:LN(b,/&\f/g,h[m])))&&(u[y++]=x);return qN(t,e,n,0===i?SN:s,u,c,l,f)}function vC(t,e,n,r){return qN(t,e,n,ON,PN(YN),DN(t,2,-2),0,r)}function gC(t,e,n,r,i){return qN(t,e,n,MN,DN(t,0,r),DN(t,r+1,-1),r,i)}var yC={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},mC="undefined"!=typeof process&&void 0!==process.env&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",bC="active",xC="data-styled-version",wC="6.1.18",kC="/*!sc*/\n",EC="undefined"!=typeof window&&"undefined"!=typeof document,OC=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&"false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY),SC=(new Set,Object.freeze([])),MC=Object.freeze({});var TC=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),AC=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,PC=/(^-|-$)/g;function NC(t){return t.replace(AC,"-").replace(PC,"")}var CC=/(a)(d)/gi,_C=function(t){return String.fromCharCode(t+(t>25?39:97))};function LC(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=_C(e%52)+n;return(_C(e%52)+n).replace(CC,"$1-$2")}var RC,jC=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},DC=function(t){return jC(5381,t)};function IC(t){return"string"==typeof t&&!0}var FC="function"==typeof Symbol&&Symbol.for,zC=FC?Symbol.for("react.memo"):60115,BC=FC?Symbol.for("react.forward_ref"):60112,GC={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},WC={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},VC={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},HC=((RC={})[BC]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},RC[zC]=VC,RC);function YC(t){return("type"in(e=t)&&e.type.$$typeof)===zC?VC:"$$typeof"in t?HC[t.$$typeof]:GC;var e}var UC=Object.defineProperty,qC=Object.getOwnPropertyNames,XC=Object.getOwnPropertySymbols,KC=Object.getOwnPropertyDescriptor,$C=Object.getPrototypeOf,ZC=Object.prototype;function QC(t,e,n){if("string"!=typeof e){if(ZC){var r=$C(e);r&&r!==ZC&&QC(t,r,n)}var i=qC(e);XC&&(i=i.concat(XC(e)));for(var a=YC(t),o=YC(e),s=0;s<i.length;++s){var u=i[s];if(!(u in WC||n&&n[u]||o&&u in o||a&&u in a)){var c=KC(e,u);try{UC(t,u,c)}catch(t){}}}}return t}function JC(t){return"function"==typeof t}function t_(t){return"object"==typeof t&&"styledComponentId"in t}function e_(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function n_(t,e){if(0===t.length)return"";for(var n=t[0],r=1;r<t.length;r++)n+=e?e+t[r]:t[r];return n}function r_(t){return null!==t&&"object"==typeof t&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function i_(t,e,n){if(void 0===n&&(n=!1),!n&&!r_(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=i_(t[r],e[r]);else if(r_(e))for(var r in e)t[r]=i_(t[r],e[r]);return t}function a_(t,e){Object.defineProperty(t,"toString",{value:e})}function o_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var s_=function(){function t(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return t.prototype.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},t.prototype.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;t>=i;)if((i<<=1)<0)throw o_(16,"".concat(t));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(t+1),s=(a=0,e.length);a<s;a++)this.tag.insertRule(o,e[a])&&(this.groupSizes[t]++,o++)},t.prototype.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),r=n+e;this.groupSizes[t]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.prototype.getGroup=function(t){var e="";if(t>=this.length||0===this.groupSizes[t])return e;for(var n=this.groupSizes[t],r=this.indexOfGroup(t),i=r+n,a=r;a<i;a++)e+="".concat(this.tag.getRule(a)).concat(kC);return e},t}(),u_=new Map,c_=new Map,l_=1,f_=function(t){if(u_.has(t))return u_.get(t);for(;c_.has(l_);)l_++;var e=l_++;return u_.set(t,e),c_.set(e,t),e},d_=function(t,e){l_=e+1,u_.set(t,e),c_.set(e,t)},h_="style[".concat(mC,"][").concat(xC,'="').concat(wC,'"]'),p_=new RegExp("^".concat(mC,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),v_=function(t,e,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&t.registerName(e,r)},g_=function(t,e){for(var n,r=(null!==(n=e.textContent)&&void 0!==n?n:"").split(kC),i=[],a=0,o=r.length;a<o;a++){var s=r[a].trim();if(s){var u=s.match(p_);if(u){var c=0|parseInt(u[1],10),l=u[2];0!==c&&(d_(l,c),v_(t,l,u[3]),t.getTag().insertRules(c,i)),i.length=0}else i.push(s)}}},y_=function(t){for(var e=document.querySelectorAll(h_),n=0,r=e.length;n<r;n++){var i=e[n];i&&i.getAttribute(mC)!==bC&&(g_(t,i),i.parentNode&&i.parentNode.removeChild(i))}};function m_(){return s.nc}var b_=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(t){var e=Array.from(t.querySelectorAll("style[".concat(mC,"]")));return e[e.length-1]}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(mC,bC),r.setAttribute(xC,wC);var o=m_();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},x_=function(){function t(t){this.element=b_(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var e=document.styleSheets,n=0,r=e.length;n<r;n++){var i=e[n];if(i.ownerNode===t)return i}throw o_(17)}(this.element),this.length=0}return t.prototype.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch(t){return!1}},t.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},t.prototype.getRule=function(t){var e=this.sheet.cssRules[t];return e&&e.cssText?e.cssText:""},t}(),w_=function(){function t(t){this.element=b_(t),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},t.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},t}(),k_=function(){function t(t){this.rules=[],this.length=0}return t.prototype.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},t.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},t.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},t}(),E_=EC,O_={isServer:!EC,useCSSOMInjection:!OC},S_=function(){function t(t,e,n){void 0===t&&(t=MC),void 0===e&&(e={});var r=this;this.options=Ce(Ce({},O_),t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&EC&&E_&&(E_=!1,y_(this)),a_(this,(function(){return function(t){for(var e=t.getTag(),n=e.length,r="",i=function(n){var i=function(t){return c_.get(t)}(n);if(void 0===i)return"continue";var a=t.names.get(i),o=e.getGroup(n);if(void 0===a||!a.size||0===o.length)return"continue";var s="".concat(mC,".g").concat(n,'[id="').concat(i,'"]'),u="";void 0!==a&&a.forEach((function(t){t.length>0&&(u+="".concat(t,","))})),r+="".concat(o).concat(s,'{content:"').concat(u,'"}').concat(kC)},a=0;a<n;a++)i(a);return r}(r)}))}return t.registerId=function(t){return f_(t)},t.prototype.rehydrate=function(){!this.server&&EC&&y_(this)},t.prototype.reconstructWithOptions=function(e,n){return void 0===n&&(n=!0),new t(Ce(Ce({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(t=function(t){var e=t.useCSSOMInjection,n=t.target;return t.isServer?new k_(n):e?new x_(n):new w_(n)}(this.options),new s_(t)));var t},t.prototype.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},t.prototype.registerName=function(t,e){if(f_(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},t.prototype.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(f_(t),n)},t.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},t.prototype.clearRules=function(t){this.getTag().clearGroup(f_(t)),this.clearNames(t)},t.prototype.clearTag=function(){this.tag=void 0},t}(),M_=/&/g,T_=/^\s*\/\/.*$/gm;function A_(t,e){return t.map((function(t){return"rule"===t.type&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map((function(t){return"".concat(e," ").concat(t)}))),Array.isArray(t.children)&&"@keyframes"!==t.type&&(t.children=A_(t.children,e)),t}))}function P_(t){var e,n,r,i=void 0===t?MC:t,a=i.options,o=void 0===a?MC:a,s=i.plugins,u=void 0===s?SC:s,c=function(t,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(e):t},l=u.slice();l.push((function(t){t.type===SN&&t.value.includes("&")&&(t.props[0]=t.props[0].replace(M_,n).replace(r,c))})),o.prefix&&l.push(fC),l.push(cC);var f=function(t,i,a,s){void 0===i&&(i=""),void 0===a&&(a=""),void 0===s&&(s="&"),e=s,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var u=t.replace(T_,""),c=dC(a||i?"".concat(a," ").concat(i," { ").concat(u," }"):u);o.namespace&&(c=A_(c,o.namespace));var f,d,h,p=[];return uC(c,(f=l.concat((h=function(t){return p.push(t)},function(t){t.root||(t=t.return)&&h(t)})),d=FN(f),function(t,e,n,r){for(var i="",a=0;a<d;a++)i+=f[a](t,e,n,r)||"";return i})),p};return f.hash=u.length?u.reduce((function(t,e){return e.name||o_(15),jC(t,e.name)}),5381).toString():"",f}var N_=new S_,C_=P_(),__=yN().createContext({shouldForwardProp:void 0,styleSheet:N_,stylis:C_}),L_=(__.Consumer,yN().createContext(void 0));function R_(){return(0,gN.useContext)(__)}function j_(t){var e=(0,gN.useState)(t.stylisPlugins),n=e[0],r=e[1],i=R_().styleSheet,a=(0,gN.useMemo)((function(){var e=i;return t.sheet?e=t.sheet:t.target&&(e=e.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e}),[t.disableCSSOMInjection,t.sheet,t.target,i]),o=(0,gN.useMemo)((function(){return P_({options:{namespace:t.namespace,prefix:t.enableVendorPrefixes},plugins:n})}),[t.enableVendorPrefixes,t.namespace,n]);(0,gN.useEffect)((function(){xN()(n,t.stylisPlugins)||r(t.stylisPlugins)}),[t.stylisPlugins]);var s=(0,gN.useMemo)((function(){return{shouldForwardProp:t.shouldForwardProp,styleSheet:a,stylis:o}}),[t.shouldForwardProp,a,o]);return yN().createElement(__.Provider,{value:s},yN().createElement(L_.Provider,{value:o},t.children))}var D_=function(){function t(t,e){var n=this;this.inject=function(t,e){void 0===e&&(e=C_);var r=n.name+e.hash;t.hasNameForId(n.id,r)||t.insertRules(n.id,r,e(n.rules,r,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=e,a_(this,(function(){throw o_(12,String(n.name))}))}return t.prototype.getName=function(t){return void 0===t&&(t=C_),this.name+t.hash},t}(),I_=function(t){return t>="A"&&t<="Z"};function F_(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(1===n&&"-"===r&&"-"===t[0])return t;I_(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var z_=function(t){return null==t||!1===t||""===t},B_=function(t){var e,n,r=[];for(var i in t){var a=t[i];t.hasOwnProperty(i)&&!z_(a)&&(Array.isArray(a)&&a.isCss||JC(a)?r.push("".concat(F_(i),":"),a,";"):r_(a)?r.push.apply(r,De(De(["".concat(i," {")],B_(a),!1),["}"],!1)):r.push("".concat(F_(i),": ").concat((e=i,null==(n=a)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||e in yC||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function G_(t,e,n,r){return z_(t)?[]:t_(t)?[".".concat(t.styledComponentId)]:JC(t)?!JC(i=t)||i.prototype&&i.prototype.isReactComponent||!e?[t]:G_(t(e),e,n,r):t instanceof D_?n?(t.inject(n,r),[t.getName(r)]):[t]:r_(t)?B_(t):Array.isArray(t)?Array.prototype.concat.apply(SC,t.map((function(t){return G_(t,e,n,r)}))):[t.toString()];var i}function W_(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(JC(n)&&!t_(n))return!1}return!0}var V_=DC(wC),H_=function(){function t(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&W_(t),this.componentId=e,this.baseHash=jC(V_,e),this.baseStyle=n,S_.registerId(e)}return t.prototype.generateAndInjectStyles=function(t,e,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,e,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(this.componentId,this.staticRulesId))r=e_(r,this.staticRulesId);else{var i=n_(G_(this.rules,t,e,n)),a=LC(jC(this.baseHash,i)>>>0);if(!e.hasNameForId(this.componentId,a)){var o=n(i,".".concat(a),void 0,this.componentId);e.insertRules(this.componentId,a,o)}r=e_(r,a),this.staticRulesId=a}else{for(var s=jC(this.baseHash,n.hash),u="",c=0;c<this.rules.length;c++){var l=this.rules[c];if("string"==typeof l)u+=l;else if(l){var f=n_(G_(l,t,e,n));s=jC(s,f+c),u+=f}}if(u){var d=LC(s>>>0);e.hasNameForId(this.componentId,d)||e.insertRules(this.componentId,d,n(u,".".concat(d),void 0,this.componentId)),r=e_(r,d)}}return r},t}(),Y_=yN().createContext(void 0);Y_.Consumer;var U_={};function q_(t,e,n){var r=t_(t),i=t,a=!IC(t),o=e.attrs,s=void 0===o?SC:o,u=e.componentId,c=void 0===u?function(t,e){var n="string"!=typeof t?"sc":NC(t);U_[n]=(U_[n]||0)+1;var r="".concat(n,"-").concat(function(t){return LC(DC(t)>>>0)}(wC+n+U_[n]));return e?"".concat(e,"-").concat(r):r}(e.displayName,e.parentComponentId):u,l=e.displayName,f=void 0===l?function(t){return IC(t)?"styled.".concat(t):"Styled(".concat(function(t){return t.displayName||t.name||"Component"}(t),")")}(t):l,d=e.displayName&&e.componentId?"".concat(NC(e.displayName),"-").concat(e.componentId):e.componentId||c,h=r&&i.attrs?i.attrs.concat(s).filter(Boolean):s,p=e.shouldForwardProp;if(r&&i.shouldForwardProp){var v=i.shouldForwardProp;if(e.shouldForwardProp){var g=e.shouldForwardProp;p=function(t,e){return v(t,e)&&g(t,e)}}else p=v}var y=new H_(n,d,r?i.componentStyle:void 0);function m(t,e){return function(t,e,n){var r=t.attrs,i=t.componentStyle,a=t.defaultProps,o=t.foldedComponentIds,s=t.styledComponentId,u=t.target,c=yN().useContext(Y_),l=R_(),f=t.shouldForwardProp||l.shouldForwardProp,d=function(t,e,n){return void 0===n&&(n=MC),t.theme!==n.theme&&t.theme||e||n.theme}(e,c,a)||MC,h=function(t,e,n){for(var r,i=Ce(Ce({},e),{className:void 0,theme:n}),a=0;a<t.length;a+=1){var o=JC(r=t[a])?r(i):r;for(var s in o)i[s]="className"===s?e_(i[s],o[s]):"style"===s?Ce(Ce({},i[s]),o[s]):o[s]}return e.className&&(i.className=e_(i.className,e.className)),i}(r,e,d),p=h.as||u,v={};for(var g in h)void 0===h[g]||"$"===g[0]||"as"===g||"theme"===g&&h.theme===d||("forwardedAs"===g?v.as=h.forwardedAs:f&&!f(g,p)||(v[g]=h[g]));var y=function(t,e){var n=R_();return t.generateAndInjectStyles(e,n.styleSheet,n.stylis)}(i,h),m=e_(o,s);return y&&(m+=" "+y),h.className&&(m+=" "+h.className),v[IC(p)&&!TC.has(p)?"class":"className"]=m,n&&(v.ref=n),(0,gN.createElement)(p,v)}(b,t,e)}m.displayName=f;var b=yN().forwardRef(m);return b.attrs=h,b.componentStyle=y,b.displayName=f,b.shouldForwardProp=p,b.foldedComponentIds=r?e_(i.foldedComponentIds,i.styledComponentId):"",b.styledComponentId=d,b.target=r?i.target:t,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)i_(t,i[r],!0);return t}({},i.defaultProps,t):t}}),a_(b,(function(){return".".concat(b.styledComponentId)})),a&&QC(b,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function X_(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n}new Set;var K_=function(t){return Object.assign(t,{isCss:!0})};function $_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(JC(t)||r_(t))return K_(G_(X_(SC,De([t],e,!0))));var r=t;return 0===e.length&&1===r.length&&"string"==typeof r[0]?G_(r):K_(G_(X_(r,e)))}function Z_(t,e,n){if(void 0===n&&(n=MC),!e)throw o_(1,e);var r=function(r){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];return t(e,n,$_.apply(void 0,De([r],i,!1)))};return r.attrs=function(r){return Z_(t,e,Ce(Ce({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return Z_(t,e,Ce(Ce({},n),r))},r}var Q_=function(t){return Z_(q_,t)},J_=Q_;TC.forEach((function(t){J_[t]=Q_(t)})),function(){function t(t,e){this.rules=t,this.componentId=e,this.isStatic=W_(t),S_.registerId(this.componentId+1)}t.prototype.createStyles=function(t,e,n,r){var i=r(n_(G_(this.rules,e,n,r)),""),a=this.componentId+t;n.insertRules(a,a,i)},t.prototype.removeStyles=function(t,e){e.clearRules(this.componentId+t)},t.prototype.renderStyles=function(t,e,n,r){t>2&&S_.registerId(this.componentId+t),this.removeStyles(t,n),this.createStyles(t,e,n,r)}}(),function(){function t(){var t=this;this._emitSheetCSS=function(){var e=t.instance.toString();if(!e)return"";var n=m_(),r=n_([n&&'nonce="'.concat(n,'"'),"".concat(mC,'="true"'),"".concat(xC,'="').concat(wC,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(e,"</style>")},this.getStyleTags=function(){if(t.sealed)throw o_(2);return t._emitSheetCSS()},this.getStyleElement=function(){var e;if(t.sealed)throw o_(2);var n=t.instance.toString();if(!n)return[];var r=((e={})[mC]="",e[xC]=wC,e.dangerouslySetInnerHTML={__html:n},e),i=m_();return i&&(r.nonce=i),[yN().createElement("style",Ce({},r,{key:"sc-0-0"}))]},this.seal=function(){t.sealed=!0},this.instance=new S_({isServer:!0}),this.sealed=!1}t.prototype.collectStyles=function(t){if(this.sealed)throw o_(2);return yN().createElement(j_,{sheet:this.instance},t)},t.prototype.interleaveWithNodeStream=function(t){throw o_(3)}}(),"__sc-".concat(mC,"__");var tL,eL,nL,rL,iL=J_.div(tL||(tL=mN(["\n  ","\n\n  .arrow-count-icon-bar {\n    ","\n    background-color: ",";\n  }\n\n  .arrow-count-icon-circle {\n    width: 16px;\n    height: 16px;\n    color: #fff;\n    font-weight: 600;\n    font-size: 10px;\n    line-height: ",";\n    text-align: center;\n    background-color: ",";\n    border-radius: 50%;\n  }\n\n  .arrow-count-icon-circle-arrow {\n    width: 16px;\n    height: 16px;\n    transform: ",";\n  }\n\n  display: ",";\n\n  .collapsible-node-wrapper:hover & {\n    display: flex;\n  }\n"])),(function(t){switch(t.$placement){case"top":return"transform: translate(-50%, -100%); flex-direction: column-reverse;";case"right":return"transform: translate(0, -50%);";case"left":return"transform: translate(-100%, -50%); flex-direction: row-reverse;";default:return"transform: translate(-50%, 0); flex-direction: column;"}}),(function(t){var e=t.$placement;return"top"===e||"bottom"===e?"width: 3px; height: 8px; margin: 0 7px;":"width: 8px; height: 3px; margin: 7px 0;"}),(function(t){return t.$color}),(function(t){return t.$isCollapsed?"16px":"14px"}),(function(t){return t.$color}),(function(t){var e=t.$isCollapsed,n=t.$placement;if(e)return"none";switch(n){case"top":return"translateY(1px) rotate(-90deg)";case"right":return"translateX(-1px) rotate(0deg)";case"left":return"translateX(1px) rotate(180deg)";default:return"translateY(-1px) rotate(90deg)"}}),(function(t){return t.$isCollapsed?"flex":"none"})),aL=function(t){var e,n=t.className,r=t.style,i=t.graph,a=t.data,o=t.isCollapsed,s=t.countType,u=void 0===s?"descendant":s,c=t.placement,l=void 0===c?"bottom":c,f=(null===(e=i.getNodeData(a.id).style)||void 0===e?void 0:e.color)||"#99ADD1",d=("descendant"===u?i.getDescendantsData(a.id):i.getChildrenData(a.id)).length;return yN().createElement(iL,{$color:f,$isCollapsed:o,$placement:l,className:"arrow-count-icon ".concat(o?"arrow-count-icon-collapsed":""," ").concat(n||""),style:r},yN().createElement("div",{className:"arrow-count-icon-bar"}),yN().createElement("div",{className:"arrow-count-icon-circle"},o?d:yN().createElement("div",{className:"arrow-count-icon-circle-arrow"},yN().createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},yN().createElement("path",{d:"M11,4 L5.5,8 L11,12",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})))))},oL=J_.div(eL||(eL=mN(["\n  height: 16px;\n  width: 16px;\n  transform: translate(-50%, -50%);\n  background: #fff;\n  border-radius: 50%;\n  border: 2px solid #99add1;\n  color: #99add1;\n  font-weight: 800;\n  line-height: 14px;\n  text-align: center;\n  box-sizing: content-box;\n"]))),sL=function(t){var e=t.isCollapsed,n=t.style,r=t.className;return yN().createElement(oL,{className:r,style:n},e?"+":"-")},uL=J_.div(nL||(nL=mN(["\n  height: inherit;\n  width: inherit;\n  border-radius: 8px;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.12), 0 2px 4px 0 rgba(0, 0, 0, 0.1);\n  position: relative;\n  border: none;\n  background-color: #fff;\n  box-sizing: content-box;\n\n  ","\n\n  .org-chart-node-line {\n    width: 100%;\n    height: 6px;\n    background-color: ",";\n    border-radius: 8px 8px 0 0;\n  }\n\n  .org-chart-node-content {\n    height: calc(100% - 6px);\n    margin: 0 16px 3px;\n    display: flex;\n    align-items: center;\n\n    &-avatar {\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      margin-right: 16px;\n      background-color: ",";\n      font-weight: 600;\n      font-size: 18px;\n      text-align: center;\n      line-height: 40px;\n      color: #fff;\n    }\n\n    &-detail {\n      width: calc(100% - 56px);\n    }\n\n    &-name {\n      color: #242424;\n      font-weight: 600;\n      font-size: 18px;\n      margin-bottom: 5px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    &-post {\n      color: #616161;\n      font-size: 14px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n"])),(function(t){return t.$isActive&&$_(rL||(rL=mN(["\n      transform: translate(-3px, -3px);\n      border: 2px solid #1783ff;\n    "])))}),(function(t){return t.$color}),(function(t){return t.$color})),cL=function(t){var e=t.name,n=t.position,r=t.status,i=void 0===r?"online":r,a=t.isActive,o=t.className,s=t.style;return yN().createElement(uL,{$color:{online:"#1783FF",busy:"#00C9C9",offline:"#F08F56"}[i],$isActive:a,className:o,style:s},yN().createElement("div",{className:"org-chart-node-line"}),yN().createElement("div",{className:"org-chart-node-content"},yN().createElement("div",{className:"org-chart-node-content-avatar"},e.slice(0,1)),yN().createElement("div",{className:"org-chart-node-content-detail"},yN().createElement("div",{className:"org-chart-node-content-name"},e),n&&yN().createElement("div",{className:"org-chart-node-content-post"},n))))},lL=function(){return lL=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},lL.apply(this,arguments)},fL=lL({},KP),dL=fL.version;fL.render,fL.unmountComponentAtNode;try{Number((dL||"").split(".")[0])>=18&&fL.createRoot}catch(Est){}var hL=new Map;"undefined"!=typeof document&&hL.set("tooltip",document.createElement("div"));var pL,vL,gL,yL,mL,bL,xL,wL,kL,EL=function(t){var e=t.loadingTemplate,n=t.theme,r=void 0===n?"light":n,i=yN().useRef(null);return yN().useEffect((function(){!e&&i.current&&function(t){if("undefined"==typeof document)return"loading";var e=t.attachShadow({mode:"open"}),n=document.createElement("div"),r=document.createElement("style");r.innerHTML=".loading {\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: 80px;\n  }\n  .loading div {\n    position: absolute;\n    top: 33px;\n    width: 13px;\n    height: 13px;\n    border-radius: 50%;\n    background: #ccc;\n    animation-timing-function: cubic-bezier(0, 1, 1, 0);\n  }\n  .loading div:nth-child(1) {\n    left: 8px;\n    animation: loading1 0.6s infinite;\n  }\n  .loading div:nth-child(2) {\n    left: 8px;\n    animation: loading2 0.6s infinite;\n  }\n  .loading div:nth-child(3) {\n    left: 32px;\n    animation: loading2 0.6s infinite;\n  }\n  .loading div:nth-child(4) {\n    left: 56px;\n    animation: loading3 0.6s infinite;\n  }\n  @keyframes loading1 {\n    0% {\n      transform: scale(0);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n  @keyframes loading3 {\n    0% {\n      transform: scale(1);\n    }\n    100% {\n      transform: scale(0);\n    }\n  }\n  @keyframes loading2 {\n    0% {\n      transform: translate(0, 0);\n    }\n    100% {\n      transform: translate(24px, 0);\n    }\n  }\n  ",n.classList.add("loading"),n.innerHTML="<div></div><div></div><div></div><div></div>",e.appendChild(r),e.appendChild(n)}(i.current)}),[]),yN().createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"dark"===r?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},e||yN().createElement("div",{ref:i}))},OL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),SL=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={hasError:!1},e.renderError=function(t){var n=e.props.errorTemplate;return"function"==typeof n?n(t):n||yN().createElement("h5",null,"组件出错了，请核查后重试： ",t.message)},e}return OL(e,t),e.getDerivedStateFromError=function(t){return{hasError:!0,error:t}},e.getDerivedStateFromProps=function(t,e){return e.children!==t.children?{children:t.children,hasError:!1,error:void 0}:null},e.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):yN().createElement(gN.Fragment,null,this.props.children)},e}(yN().Component),ML=(0,vN.memoize)((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=void 0===r?"sans-serif":r,a=e.fontWeight,o=e.fontStyle,s=e.fontVariant,u=(pL||(pL=document.createElement("canvas").getContext("2d")),pL);return u.font=[o,a,s,"".concat(n,"px"),i].join(" "),u.measureText((0,vN.isString)(t)?t:"")}),(function(t,e){return void 0===e&&(e={}),function(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([t],(0,vN.values)(e),!0).join("")})),TL=function(t,e){return void 0===e&&(e={}),ML(t,e).width},AL=function(t,e){void 0===e&&(e={});var n=ML(t,e);return n.actualBoundingBoxAscent+n.actualBoundingBoxDescent},PL=J_.div(vL||(vL=mN(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow-wrap: anywhere;\n  line-height: 1.5em;\n  text-align: center;\n  height: inherit;\n  width: inherit;\n  box-sizing: content-box;\n  font-size: 14px;\n\n  ","\n\n  ","\n"])),(function(t){var e=t.$type,n=t.$color,r=t.$borderWidth;switch(e){case"normal":return"\n          color: ".concat(n,";\n        ");case"filled":return $_(gL||(gL=mN(["\n          color: #fff;\n          background-color: ",";\n          border-radius: 8px;\n        "])),n);case"outlined":return $_(yL||(yL=mN(["\n          height: calc(100% - 2 * ","px);\n          width: calc(100% - 2 * ","px);\n          color: ",";\n          background-color: #fff;\n          border: ","px solid ",";\n          border-radius: 8px;\n        "])),r,r,n,r,n);case"underlined":return $_(mL||(mL=mN(["\n          height: calc(100% - ","px / 2);\n          width: inherit;\n          border-bottom: ","px solid ",";\n          background-color: #fff;\n          color: ",";\n        "])),r,r,n,n)}}),(function(t){var e=t.$isActive,n=t.$isSelected,r=t.$borderWidth,i=t.$color;return(e||n)&&$_(bL||(bL=mN(["\n      height: calc(100% - 2 * ","px);\n      width: calc(100% - 2 * ","px);\n      border: ","px solid ",";\n      ","\n    "])),r,r,r,function(t){var e=0,n=0,r=0;4===t.length?(e=parseInt(t[1]+t[1],16),n=parseInt(t[2]+t[2],16),r=parseInt(t[3]+t[3],16)):7===t.length&&(e=parseInt(t[1]+t[2],16),n=parseInt(t[3]+t[4],16),r=parseInt(t[5]+t[6],16)),e=Math.max(0,e-100),n=Math.max(0,n-100),r=Math.max(0,r-100);var i=function(t){return t.toString(16).padStart(2,"0")};return"#".concat(i(e)).concat(i(n)).concat(i(r))}(i),n&&"box-shadow: 0 0 0 2px ".concat(function(t){var e=0,n=0,r=0;return 4===t.length?(e=parseInt(t[1]+t[1],16),n=parseInt(t[2]+t[2],16),r=parseInt(t[3]+t[3],16)):7===t.length&&(e=parseInt(t[1]+t[2],16),n=parseInt(t[3]+t[4],16),r=parseInt(t[5]+t[6],16)),"rgba(".concat(e,", ").concat(n,", ").concat(r,", ").concat(.1,")")}(i),";"))})),NL=function(t){var e=t.className,n=t.style,r=void 0===n?{}:n,i=t.type,a=void 0===i?"normal":i,o=t.text,s=void 0===o?"":o,u=t.font,c=t.color,l=void 0===c?"#1783ff":c,f=t.borderWidth,d=void 0===f?3:f,h=t.maxWidth,p=void 0===h?1/0:h,v=t.isActive,g=void 0!==v&&v,y=t.isSelected,m=void 0!==y&&y,b=TL(s,u)>p;return yN().createElement(PL,{$type:a,$color:l,$borderWidth:d,$isActive:g,$isSelected:m,className:"text-node text-node-".concat(a," ").concat(e||""),style:w(w({},r),u)},yN().createElement("div",{style:b?{width:"calc(100% - 12px)"}:{}},s))},CL=J_.div(xL||(xL=mN(["\n  position: relative;\n  height: inherit;\n  width: inherit;\n"]))),_L=J_.div(wL||(wL=mN(["\n  position: absolute;\n  z-index: 10;\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  ","\n"])),(function(t){var e=t.$placement,n=t.$offsetX,r=t.$offsetY,i={top:"left: calc(50% + ".concat(n,"px); top: ").concat(r,"px;"),bottom:"left: calc(50% + ".concat(n,"px); top: calc(100% + ").concat(r,"px);"),right:"left: calc(100% + ".concat(n,"px); top: calc(50% + ").concat(r,"px);"),left:"left: ".concat(n,"px; top: calc(50% + ").concat(r,"px);")};return $_(kL||(kL=mN(["\n      ","\n    "])),i[e])})),LL=["children"],RL={nodes:[],edges:[]};function jL(t){if("object"!=typeof t||null===t)return!1;if(!("id"in t))return!1;if("children"in t){if(!Array.isArray(t.children))return!1;var e,n=nr(t.children);try{for(n.s();!(e=n.n()).done;)if(!jL(e.value))return!1}catch(t){n.e(t)}finally{n.f()}}return!0}function DL(t){if("object"!=typeof t||null===t)return!1;if(!Object.keys(t).every((function(t){return["nodes","edges","combos"].includes(t)})))return!1;var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,a=t.combos,o=void 0===a?[]:a;if(!Array.isArray(n)||!Array.isArray(i)||!Array.isArray(o))return!1;var s=new Set(n.map((function(t){return t.id})));return!!n.every((function(t){return"object"==typeof t&&null!==t&&"id"in t}))&&!!i.every((function(t){return s.has(t.source)&&s.has(t.target)}))}function IL(t,e){return jL(t)?jP(t,{getNodeData:function(t,n){if(t.depth=n,t.style||(t.style={}),e&&(t.style.collapsed=n>=e),!t.children)return t;var r=t.children;return w(w({},rr(t,LL)),{},{children:r.map((function(t){return t.id}))})}}):RL}function FL(t,e){if(!t)return RL;var n=DL(t)?function(t){if(DL(t)){var e,n=t.nodes,r=void 0===n?[]:n,i=t.edges,a=void 0===i?[]:i,o=Object.fromEntries(r.map((function(t){return[t.id,t]}))),s=Object.fromEntries(r.map((function(t){return[t.id,0]}))),u=Object.fromEntries(r.map((function(t){return[t.id,[]]}))),c=nr(a);try{for(c.s();!(e=c.n()).done;){var l=e.value,f=l.source,d=l.target;u[f].push(d),s[d]=(s[d]||0)+1}}catch(t){c.e(t)}finally{c.f()}var h=Object.entries(s).filter((function(t){var e=g(t,2);return e[0],0===e[1]})).map((function(t){return g(t,1)[0]}));if(1===h.length){var p=function(t){return w(w({},o[t]),{},{children:u[t].map(p)})};return p(h[0])}}}(t):t;return n?IL(n,e):RL}var zL=["enable"],BL=sL,GL=function(t){function e(t,n){return k(this,e),N(this,e,[t,Object.assign({},e.defaultOptions,n)])}return _(e,t),O(e,[{key:"afterLayout",value:function(){var t=this,e=this.context,n=e.graph,r=e.element,i=e.model,a=n.getData(),o=a.nodes,s=void 0===o?[]:o,u=a.edges,c=void 0===u?[]:u,l=this.options,f=l.enable,d=rr(l,zL);s.forEach((function(e){var n=Kf(e);if(r.getElement(n)&&!(e.children&&e.children.length>0)){var a=function(t,e,n){var r=function(){var n=g(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?["target","source"]:["source","target"],2),r=n[0],i=n[1];return e.filter((function(e){return e[r]===t})).map((function(t){return t[i]}))};return"out"===n?r():"in"===n?r(!0):r().concat(r(!0))}(n,c,t.options.direction);0!==a.length&&i.updateNodeData([{id:n,children:a}])}}));var h=n.getOptions().node;if((0,vN.has)(h,"style.component")){var p=(0,vN.get)(h,"style.component");(0,vN.set)(h,"style.component",(function(t){if(!("function"==typeof f?f(t):f))return p.call(n,t);var e,r=(e=p,function(t){var n=t.data,r=t.graph,i=t.trigger,a=t.iconRender,o=t.iconPlacement,s=t.iconOffsetX,u=t.iconOffsetY,c=t.iconClassName,l=t.iconStyle,f=t.refreshLayout,d=g((0,gN.useState)((0,vN.get)(n,"style.collapsed",!1)),2),h=d[0],p=d[1],v=(0,gN.useRef)(null),y=(0,gN.useRef)(null),m="icon"===i&&!(0,vN.isEmpty)(n.children),b=function(){var t=er(Jn().mark((function t(e){var i;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stopPropagation(),i=h?"expandElement":"collapseElement",t.next=4,r[i](Kf(n));case 4:if(p((function(t){return!t})),!f){t.next=8;break}return t.next=8,r.layout();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();(0,gN.useEffect)((function(){var t="icon"===i?y.current:"node"===i?v.current:i;return null==t||t.addEventListener("click",b),function(){null==t||t.removeEventListener("click",b)}}),[i,h]);var x=function(t){return"function"==typeof t?t.call(r,n):t};return yN().createElement(CL,{ref:v,className:"collapsible-node-wrapper"},m&&yN().createElement(_L,{ref:y,$placement:x(o),$offsetX:x(s),$offsetY:x(u),className:c,style:l},null==a?void 0:a.call(r,h,n)),e.call(r,n))});return yN().createElement(r,w({data:t,graph:n},d))}))}n.setNode(h),n.draw()}}])}(lA);b(GL,"defaultOptions",{enable:!0,trigger:"icon",direction:"out",iconRender:function(t){return yN().createElement(BL,{isCollapsed:t})},iconPlacement:"bottom",iconOffsetX:0,iconOffsetY:0,iconClassName:"",iconStyle:{},refreshLayout:!1});var WL=function(t){function e(t,n){var r;return k(this,e),b(r=N(this,e,[t,Object.assign({},e.defaultOptions,n)]),"assignLineWidthByValue",(function(t,e,n,r,i,a){var o=[e,n],s=[r,i];if(t<e||t>n||e===n)return s[0];if("function"==typeof a)return a(t,o,s);switch(a){case"linear":return function(t,e,n){var r=g(e,2),i=r[0],a=r[1],o=g(n,2),s=o[0],u=o[1];return a===i?s:s+(t-i)/(a-i)*(u-s)}(t,o,s);case"log":return function(t,e,n){var r=g(e,2),i=r[0],a=r[1],o=g(n,2),s=o[0],u=o[1];return s+Math.log(t-i+1)/Math.log(a-i+1)*(u-s)}(t,o,s);case"pow":return function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=g(e,2),a=i[0],o=i[1],s=g(n,2),u=s[0],c=s[1];return u+Math.pow((t-a)/(o-a),r)*(c-u)}(t,o,s,2);case"sqrt":return function(t,e,n){var r=g(e,2),i=r[0],a=r[1],o=g(n,2),s=o[0],u=o[1];return s+Math.sqrt((t-i)/(a-i))*(u-s)}(t,o,s);default:return s[0]}})),r}return _(e,t),O(e,[{key:"beforeDraw",value:function(t){var e=this,n=this.options,r=n.maxValue,i=n.minValue,a=n.maxLineWidth,o=n.minLineWidth,s=n.scale,u=n.value,c=this.context.model.getEdgeData(),l="function"==typeof u?u:function(){return u},f=Object.fromEntries(c.map((function(t){return[Kf(t),l(t)]}))),d=t.add.edges,h=t.update.edges;return[].concat(M(d.values()),M(h.values())).forEach((function(t){var n=e.assignLineWidthByValue(f[Kf(t)]||0,"function"==typeof i?i(t,f):i,"function"==typeof r?r(t,f):r,"function"==typeof o?o(t):o,"function"==typeof a?a(t):a,s);t.style||(t.style={}),t.style.lineWidth=n})),t}}])}(lA);b(WL,"defaultOptions",{minValue:function(t,e){return Math.min.apply(Math,M(Object.values(e)))},maxValue:function(t,e){return Math.max.apply(Math,M(Object.values(e)))},minLineWidth:1,maxLineWidth:10,scale:"linear"});var VL=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"beforeDraw",value:function(t){var e=this.context,n=e.graph,r=e.element,i=t.add.nodes,a=t.update.nodes;return[].concat(M(i.values()),M(a.values())).forEach((function(t){r.computeElementDefaultStyle("node",{graph:n,datum:t});var e=g(gh(r.getDefaultStyle(t.id).size),2),i=e[0],a=e[1];t.style||(t.style={}),t.style.dx=-i/2,t.style.dy=-a/2})),t}}])}(lA),HL={node:{react:cN},edge:{indented:dN},behavior:{"hover-activate-neighbors":fN,"hover-activate-chain":lN},transform:{"translate-react-node-origin":VL,"collapse-expand-react-node":GL,"assign-color-by-branch":pN,"map-edge-line-width":WL,"arrange-edge-z-index":hN}};Object.entries(HL).forEach((function(t){var e=g(t,2),n=e[0],r=e[1];Object.entries(r).forEach((function(t){var e=g(t,2),r=e[0],i=e[1];xA(n,r,i)}))}));var YL=yN().createContext({graph:null,isReady:!1}),UL=function(){return UL=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},UL.apply(this,arguments)},qL=function(){return qL=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},qL.apply(this,arguments)},XL=(0,gN.forwardRef)((function(t,e){var n=t.style,r=t.children,i=function(t){var e=t.onInit,n=t.onReady,r=t.onDestroy,i=t.options,a=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}((0,gN.useState)(!1),2),o=a[0],s=a[1],u=(0,gN.useRef)(null),c=(0,gN.useRef)(null);return(0,gN.useEffect)((function(){if(!u.current&&c.current){var t=new LP(UL({container:c.current},i));return u.current=t,s(!0),null==e||e(u.current),function(){var t=u.current;t&&(t.destroy(),null==r||r(),u.current=null)}}}),[]),(0,gN.useEffect)((function(){var t=c.current,e=u.current;i&&t&&e&&!e.destroyed&&(e.setOptions(i),e.render().then((function(){return null==n?void 0:n(e)})))}),[i]),{graph:u.current,containerRef:c,isReady:o}}(function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["style","children"])),a=i.graph,o=i.containerRef,s=i.isReady;(0,gN.useImperativeHandle)(e,(function(){return a}),[a]);var u=qL({height:"inherit",position:"relative"},n);return r?yN().createElement(YL.Provider,{value:{graph:a,isReady:s}},yN().createElement("div",{ref:o,style:u},s&&r)):yN().createElement("div",{ref:o,style:u})})),KL=(0,gN.memo)(XL),$L=["children"],ZL=["containerStyle","className","onInit","onReady","onDestroy","errorTemplate","loading","loadingTemplate"],QL=(0,gN.forwardRef)((function(t,e){var n=t.children,r=rr(t,$L),i=r.containerStyle,a=r.className,o=r.onInit,s=r.onReady,u=r.onDestroy,c=r.errorTemplate,l=r.loading,f=r.loadingTemplate,d=rr(r,ZL),h=(0,gN.useRef)(null);return(0,gN.useImperativeHandle)(e,(function(){return h.current})),yN().createElement(SL,{errorTemplate:c},l&&yN().createElement(EL,{loadingTemplate:f}),!(0,vN.isEmpty)(d.data)&&yN().createElement(KL,{ref:function(t){h.current=t},className:a,style:i,options:d,onInit:o,onReady:s,onDestroy:u},n))})),JL={autoResize:!0,behaviors:[{key:"zoom-canvas",type:"zoom-canvas"},{key:"drag-canvas",type:"drag-canvas"}]};function tR(){if(0===arguments.length)return{};for(var t=w({},arguments.length<=0?void 0:arguments[0]),e=1;e<arguments.length;e++){var n=e<0||arguments.length<=e?void 0:arguments[e],r=function(){if(n.hasOwnProperty(i)){var e=n[i],r=t[i];["component","data"].includes(i)?t[i]=e:"function"==typeof e?["plugins","behaviors","transforms"].includes(i)?t[i]=e(r||[]):t[i]=function(t){var n=e.call(this,t);return(0,vN.isPlainObject)(n)?tR(r,n):n}:(0,vN.isPlainObject)(e)&&(0,vN.isPlainObject)(r)?t[i]=tR(r,e):t[i]=e}};for(var i in n)r()}return t}var eR={node:{type:"circle",style:{labelText:function(t){return t.id}}}},nR=["children"],rR=["data","defaultExpandLevel","direction","compact"],iR=(0,gN.forwardRef)((function(t,e){var n=t.children,r=rr(t,nR),i=(0,gN.useMemo)((function(){var t=r.data,e=r.defaultExpandLevel,n=r.direction,i=void 0===n?"horizontal":n,a=r.compact,o=void 0!==a&&a,s=rr(r,rR);return tR(JL,eR,{data:FL(t,e)},function(t){var e=t.direction,n=function(t){return(0,vN.isEmpty)(t.children)},r=t.compact?"compact-box":"dendrogram";return"vertical"===e?{node:{style:{labelBackground:!0,labelPlacement:"right",labelTransform:function(t){return n(t)?"rotate(90deg) translate(18px)":"translate(18px)"},ports:[{placement:"top"},{placement:"bottom"}]}},edge:{type:"cubic-vertical"},layout:{type:r,direction:"TB",nodeSep:40,rankSep:140,getVGap:function(){return 80},getHGap:function(){return 20}}}:"horizontal"===e?{node:{style:{labelBackground:!0,labelPlacement:function(t){return n(t)?"right":"left"},ports:[{placement:"left"},{placement:"right"}]}},edge:{type:"cubic-horizontal"},layout:{type:r,direction:"LR",nodeSep:40,rankSep:200,getVGap:function(){return 5},getHGap:function(){return 100}}}:{node:{style:{labelBackground:!0}},edge:{type:"cubic-radial"},layout:{type:r,direction:"RL",radial:!0,nodeSep:40,rankSep:200,getVGap:function(){return 30},getHGap:function(){return 60}},transforms:function(t){return[].concat(M(t),["place-radial-labels"])}}}({direction:i,compact:o}),s)}),[r]);return yN().createElement(QL,w(w({},i),{},{ref:e}),n)}));function aR(t,e){var n=e?"function"==typeof e?e(t):(0,vN.get)(t,"data.".concat(e),t.id):t.id;return String(n)}function oR(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{fontSize:16,fontFamily:"PingFang SC"},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,a=AL(t,n),o=TL(t,n)+4,s=i===1/0?1:Math.ceil(o/i),u=g(e,2),c=u[0],l=u[1];return[Math.max(r,Math.min(i,o))+c,l+a+1.5*a*(s-1)]}var sR={node:{style:{size:10,labelPlacement:"center"}},edge:{type:"polyline"},layout:{type:"fishbone",hGap:40,vGap:60},animation:!1},uR="system-ui, sans-serif";var cR=["children"],lR=["data","defaultExpandLevel","type","labelField"],fR=(0,gN.forwardRef)((function(t,e){var n=t.children,r=rr(t,cR),i=r.data,a=(r.defaultExpandLevel,r.type),o=void 0===a?"cause":a,s=r.labelField,u=rr(r,lR),c=(0,gN.useMemo)((function(){return tR(JL,sR,{data:FL(i)},function(t){var e=t.type,n=t.labelField,r={node:{type:"rect",style:{fill:function(t){return function(t){var e,n=t.depth;return 0===n?"#EFF0F0":1===n?(null===(e=t.style)||void 0===e?void 0:e.color)||"#EFF0F0":"transparent"}(t)},labelFill:function(t){return 1===t.depth?"#fff":"#262626"},labelFillOpacity:1,labelFontSize:function(t){return 0===t.depth?24:1===t.depth?18:16},labelFontWeight:function(t){return 0===t.depth?600:400},labelLineHeight:function(t){return 0===t.depth?26:1===t.depth?20:18},labelText:function(t){return aR(t,n)},radius:8,size:function(t){return function(t,e){return 0===e?oR(t,[80,48],{fontSize:24,fontWeight:600,fontFamily:uR}):1===e?oR(t,[80,30],{fontSize:18,fontFamily:uR}):[2,30]}(t.id,t.depth)}}},edge:{type:"polyline",style:{lineWidth:3,stroke:function(t){var e=this.getNodeData(t.target);return(0,vN.get)(e,"style.color","#99ADD1")}}},transforms:function(t){return[].concat(M(t),[{type:"assign-color-by-branch",key:"assign-color-by-branch"},{type:"arrange-edge-z-index",key:"arrange-edge-z-index"}])}};return r.layout||(r.layout={}),"decision"===e?(r.node.style.labelPlacement=function(t){return 0===t.depth||1===t.depth?"center":"right"},Object.assign(r.layout,{direction:"LR"})):"cause"===e&&(r.node.style.labelPlacement=function(t){return 0===t.depth||1===t.depth?"center":"left"},Object.assign(r.layout,{direction:"RL"})),r}({type:o,labelField:s}),u)}),[r]);return yN().createElement(QL,w(w({},c),{},{ref:e}),n)})),dR=NL,hR={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"cubic-horizontal",style:{strokeOpacity:.5},state:{active:{strokeOpacity:1}}},layout:{type:"dagre",rankdir:"LR",animation:!1},transforms:["translate-react-node-origin"]},pR=["children"],vR=["labelField"],gR=(0,gN.forwardRef)((function(t,e){var n=t.children,r=rr(t,pR),i=r.labelField,a=rr(r,vR),o=(0,gN.useMemo)((function(){return tR(JL,hR,function(t){var e=t.labelField,n={node:{style:{component:function(t){var n=aR(t,e);return yN().createElement(dR,{type:"filled",text:n})},size:[100,40],ports:[{placement:"left"},{placement:"right"}]}}};return n}({labelField:i}),a)}),[r]);return yN().createElement(QL,w(w({},o),{},{ref:e}),n)})),yR=NL,mR={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"polyline",style:{lineWidth:2,endArrow:!0,radius:8,router:{type:"orth"}}},layout:{type:"dagre",animation:!1},transforms:["translate-react-node-origin"]},bR=["children"],xR=["direction","labelField"],wR=(0,gN.forwardRef)((function(t,e){var n=t.children,r=rr(t,bR),i=(0,gN.useMemo)((function(){var t=r.direction,e=void 0===t?"horizontal":t,n=r.labelField,i=rr(r,xR);return tR(JL,mR,function(t){var e=t.direction,n=t.labelField,r={node:{style:{component:function(t){var e=aR(t,n);return yN().createElement(yR,{type:"filled",text:e})},size:[100,40],ports:"vertical"===e?[{placement:"top"},{placement:"bottom"}]:[{placement:"left"},{placement:"right"}]}},layout:{type:"dagre",rankdir:"vertical"===e?"TB":"LR"}};return r}({direction:e,labelField:n}),i)}),[r]);return yN().createElement(QL,w(w({},i),{},{ref:e}),n)})),kR=(0,vN.memoize)((function(t,e){if(!e)return"center";var n=Rd(t)[0];return Rd(e)[0]>n?"left":"right"}),(function(t,e){return e?[Rd(t),Rd(e)].flat().join("-"):"center"})),ER=function(t,e){var n=t.getParentData(Kf(e),"tree");return kR(e,n)},OR=(0,vN.memoize)((function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i={fontWeight:0===r?600:400,fontSize:0===r?24:16};return{font:i,size:oR(t,0===r?[64,30]:[12,12],i,e,n)}})),SR=(0,vN.memoize)((function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i={fontWeight:0===r||1===r?600:400,fontSize:0===r?24:16};return{font:i,size:oR(t,0===r?[64,30]:[36,24],i,e,n)}})),MR=aL,TR=NL,AR={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"indented",style:{lineWidth:3}},transforms:function(t){return[].concat(M(t),[{type:"collapse-expand-react-node",key:"collapse-expand-react-node",enable:!1,trigger:"icon",iconRender:function(t,e){return yN().createElement(MR,{graph:this,data:e,isCollapsed:t})}}])},layout:{type:"indented",direction:"LR",indent:function(t){return PR(t,20)},getVGap:function(){return 14},preLayout:!1},animation:{duration:500}},PR=function(t,e){if(0===t.depth)return 0;for(var n=e,r=t.parent;r;)n+=r.width/2,r=r.parent;return n/t.depth},NR=function(t,e){var n=ER(t,e);return"left"===n?"right":"center"===n?"center":"left"},CR=["children"],_R=["data","defaultExpandLevel","type","nodeMinWidth","nodeMaxWidth","direction","labelField"],LR=(0,gN.forwardRef)((function(t,e){var n=t.children,r=rr(t,CR),i=r.data,a=r.defaultExpandLevel,o=r.type,s=void 0===o?"default":o,u=r.nodeMinWidth,c=r.nodeMaxWidth,l=r.direction,f=void 0===l?"right":l,d=r.labelField,h=rr(r,_R),p=(0,gN.useMemo)((function(){return tR(JL,AR,{data:FL(i,a)},function(t){var e,n=t.type,r=t.direction,i=t.labelField,a={},o=t.nodeMinWidth||0,s=t.nodeMaxWidth||300;if("boxed"===n)a={node:{style:{component:function(t){var e,n=t.depth,r=null===(e=t.style)||void 0===e?void 0:e.color,a=aR(t,i),u=SR(a,o,s,n).font,c={type:0===n||1===n?"filled":"outlined",text:a,color:0===n?"#f1f4f5":r,maxWidth:s,font:u,style:w({textAlign:NR(this,t)},0===n?{color:"#252525"}:{})};return yN().createElement(TR,w({},c))},size:function(t){var e=aR(t,i);return SR(e,o,s,t.depth).size}}},edge:{style:{stroke:function(t){var e=this.getNodeData(t.source);return(0,vN.get)(e,"style.color","#99ADD1")},radius:16}},transforms:function(t){return[].concat(M(t),[{type:"assign-color-by-branch",key:"assign-color-by-branch"}])},layout:{type:"indented",getWidth:function(t){var e=aR(t,i);return g(SR(e,o,s,t.depth).size,1)[0]},getHeight:function(t){var e=aR(t,i);return g(SR(e,o,s,t.depth).size,2)[1]}}};else if("linear"===n)a={node:{style:{component:function(t){var e,n=t.depth,r=null===(e=t.style)||void 0===e?void 0:e.color,a=aR(t,i),u=OR(a,o,s,n).font,c={text:a,color:r,maxWidth:s,font:u};return Object.assign(c,0===n?{type:"filled",color:"#f1f4f5",style:{color:"#252525"}}:{type:"underlined",style:{textAlign:NR(this,t)}}),yN().createElement(TR,w({},c))},size:function(t){var e=aR(t,i);return OR(e,o,s,t.depth).size},ports:function(t){var e=ER(this,t);return"left"===e?[{placement:"bottom"},{placement:"bottom-right"}]:"center"===e?[{placement:"bottom"}]:[{placement:"bottom"},{placement:"bottom-left"}]}}},edge:{style:{stroke:function(t){var e=this.getNodeData(t.target);return(0,vN.get)(e,"style.color","#99ADD1")},radius:24}},layout:{type:"indented",getWidth:function(t){var e=aR(t,i);return g(OR(e,o,s,t.depth).size,1)[0]},getHeight:function(t){var e=aR(t,i);return g(OR(e,o,s,t.depth).size,2)[1]},getVGap:function(){return 12}},transforms:function(t){return[].concat(M(t),[{type:"assign-color-by-branch",key:"assign-color-by-branch"},{type:"arrange-edge-z-index",key:"arrange-edge-z-index"}])}};else{var u=[24,16];a={node:{style:{component:function(t){var e=aR(t,i);return yN().createElement(TR,{type:"filled",text:e})},size:function(t){return oR(aR(t,i),u)}}},layout:{type:"indented",getWidth:function(t){return g(oR(aR(t,i),u),1)[0]},getHeight:function(t){return g(oR(aR(t,i),u),2)[1]}}}}return r&&((e=a).layout||(e.layout={}),Object.assign(a.layout,{direction:"alternate"===r?"H":"left"===r?"RL":"LR"})),a}({type:s,nodeMinWidth:u,nodeMaxWidth:c,direction:f,labelField:d}),h)}),[r]);return yN().createElement(QL,w(w({},p),{},{ref:e}),n)})),RR=aL,jR=NL,DR={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"cubic-horizontal",style:{lineWidth:3}},transforms:function(t){return[].concat(M(t),[{type:"collapse-expand-react-node",key:"collapse-expand-react-node",enable:!1,trigger:"icon",iconRender:function(t,e){var n=ER(this,e);return yN().createElement(RR,{graph:this,data:e,isCollapsed:t,placement:"left"===n?"left":"right"})},iconPlacement:function(t){return"left"===ER(this,t)?"left":"right"}}])},layout:{type:"mindmap",direction:"H",preLayout:!1,getWidth:function(){return 120},getHGap:function(){return 64}},animation:{duration:500}},IR=["children"],FR=["data","type","nodeMinWidth","nodeMaxWidth","direction","labelField","defaultExpandLevel"],zR=(0,gN.forwardRef)((function(t,e){var n=t.children,r=rr(t,IR),i=(0,gN.useMemo)((function(){var t=r.data,e=r.type,n=void 0===e?"default":e,i=r.nodeMinWidth,a=r.nodeMaxWidth,o=r.direction,s=void 0===o?"alternate":o,u=r.labelField,c=r.defaultExpandLevel,l=rr(r,FR),f=tR(JL,DR,{data:FL(t,c)},function(t){var e,n=t.type,r=t.direction,i=t.nodeMinWidth,a=t.nodeMaxWidth,o=t.labelField,s={};if("boxed"===n){var u=i||120,c=a||300;s={node:{style:{component:function(t){var e,n=t.depth,r=null===(e=t.style)||void 0===e?void 0:e.color,i=aR(t,o),a=SR(i,u,c,n).font,s={text:i,color:r,maxWidth:c,font:a};return Object.assign(s,0===n?{type:"filled",color:"#f1f4f5",style:{color:"#252525"}}:1===n?{type:"filled"}:{type:"outlined"}),yN().createElement(jR,w({},s))},size:function(t){var e=aR(t,o);return SR(e,u,c,t.depth).size},dx:function(t){var e=ER(this,t),n=aR(t,o),r=g(SR(n,u,c,t.depth).size,1)[0];return"left"===e?-r:"center"===e?-r/2:0},ports:[{placement:"left"},{placement:"right"}]}},edge:{style:{stroke:function(t){var e=this.getNodeData(t.source);return(0,vN.get)(e,"style.color","#99ADD1")}}},transforms:function(t){return[].concat(M(t),[{type:"assign-color-by-branch",key:"assign-color-by-branch"}])},layout:{type:"mindmap",getHeight:function(t){var e=aR(t,o);return g(SR(e,u,c,t.depth).size,2)[1]},getVGap:function(){return 14}}}}else if("linear"===n){var l=i||0,f=a||300;s={node:{style:{component:function(t){var e,n=ER(this,t),r=t.depth,i=null===(e=t.style)||void 0===e?void 0:e.color,a=aR(t,o),s=OR(a,l,f,r).font,u={text:a,color:i,maxWidth:f,font:s};return Object.assign(u,0===r?{type:"filled",color:"#f1f4f5",style:{color:"#252525"}}:{type:"underlined",style:"left"===n?{textAlign:"right"}:"center"===n?{textAlign:"center"}:{}}),yN().createElement(jR,w({},u))},size:function(t){var e=aR(t,o);return OR(e,l,f,t.depth).size},dx:function(t){var e=ER(this,t),n=aR(t,o),r=g(OR(n,l,f,t.depth).size,1)[0];return"left"===e?-r:"center"===e?-r/2:0},dy:function(t){var e=aR(t,o);return g(OR(e,l,f,t.depth).size,2)[1]/2},ports:function(t){return"center"===ER(this,t)?[{placement:"left"},{placement:"right"}]:[{placement:"left-bottom"},{placement:"right-bottom"}]}}},edge:{style:{stroke:function(t){var e=this.getNodeData(t.target);return(0,vN.get)(e,"style.color","#99ADD1")}}},layout:{type:"mindmap",getHeight:function(t){var e=aR(t,o);return g(OR(e,l,f,t.depth).size,2)[1]},getVGap:function(){return 12}},transforms:function(t){return[].concat(M(t.filter((function(t){return"collapse-expand-react-node"!==t.key}))),[{type:"assign-color-by-branch",key:"assign-color-by-branch"},w(w({},t.find((function(t){return"collapse-expand-react-node"===t.key}))),{},{iconOffsetY:function(t){if(0===t.depth)return 0;var e=aR(t,o);return g(OR(e,l,f,t.depth).size,2)[1]/2}})])}}}else{var d=[24,16];s={node:{style:{component:function(t){var e=aR(t,o);return yN().createElement(jR,{type:"filled",text:e})},size:function(t){return oR(aR(t,o),d)},dx:function(t){var e=ER(this,t),n=g(oR(aR(t,o),d),1)[0];return"left"===e?-n:"center"===e?-n/2:0},ports:[{placement:"left"},{placement:"right"}]}},layout:{type:"mindmap",getHeight:function(t){return g(oR(aR(t,o),d),2)[1]}}}}return r&&((e=s).layout||(e.layout={}),s.layout.direction="alternate"===r?"H":"left"===r?"RL":"LR"),s}({type:n,nodeMinWidth:i,nodeMaxWidth:a,direction:s,labelField:u}),l);return f}),[r]);return yN().createElement(QL,w(w({},i),{},{ref:e}),n)})),BR={node:{type:"circle"},layout:{type:"d3-force",link:{distance:128},collide:{radius:32},manyBody:{strength:-704},x:{},y:{}}},GR=["children"],WR=(0,gN.forwardRef)((function(t,e){var n=t.children,r=rr(t,GR),i=(0,gN.useMemo)((function(){return tR(JL,BR,r)}),[r]);return yN().createElement(QL,w(w({},i),{},{ref:e}),n)})),VR=NL,HR={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"polyline",style:{lineWidth:2,router:{type:"orth"}}},layout:{type:"dagre",animation:!1},transforms:["translate-react-node-origin"]},YR=["children"],UR=["direction","labelField"],qR=(0,gN.forwardRef)((function(t,e){var n=t.children,r=rr(t,YR),i=(0,gN.useMemo)((function(){var t=r.direction,e=void 0===t?"vertical":t,n=r.labelField,i=rr(r,UR),a=tR(JL,HR,function(t){var e=t.direction,n=t.labelField,r={node:{style:{component:function(t){var e=aR(t,n);return yN().createElement(VR,{type:"filled",text:e})},size:[100,40],ports:"vertical"===e?[{placement:"top"},{placement:"bottom"}]:[{placement:"left"},{placement:"right"}]}},transforms:function(t){return[].concat(M(t),[{type:"collapse-expand-react-node",key:"collapse-expand-react-node",iconPlacement:"vertical"===e?"bottom":"right",enable:!1,refreshLayout:!0}])},layout:{type:"dagre",rankdir:"vertical"===e?"TB":"LR"}};return r}({direction:e,labelField:n}),i);return a}),[r]);return yN().createElement(QL,w(w({},i),{},{ref:e}),n)})),XR=function(){return[["cartesian"]]};XR.props={};var KR=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={startAngle:-Math.PI/2,endAngle:3*Math.PI/2,innerRadius:0,outerRadius:1},i=Object.assign(Object.assign({},r),n);return Object.assign(Object.assign({},i),(t=i.startAngle,e=i.endAngle,t%=2*Math.PI,e%=2*Math.PI,t<0&&(t=2*Math.PI+t),e<0&&(e=2*Math.PI+e),t>=e&&(e+=2*Math.PI),{startAngle:t,endAngle:e}))},$R=function(t){var e=KR(t);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",e.startAngle,e.endAngle,e.innerRadius,e.outerRadius]]};$R.props={};var ZR=function(){return[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]]};ZR.props={transform:!0};var QR=function(t){var e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={startAngle:-Math.PI/2,endAngle:3*Math.PI/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)}(t),n=e.startAngle,r=e.endAngle,i=e.innerRadius,a=e.outerRadius;return[].concat(M(ZR()),M($R({startAngle:n,endAngle:r,innerRadius:i,outerRadius:a})))};QR.props={};var JR=function(){return[["parallel",0,1,0,1]]};JR.props={};var tj=function(t){var e=t.focusX,n=void 0===e?0:e,r=t.focusY,i=void 0===r?0:r,a=t.distortionX,o=void 0===a?2:a,s=t.distortionY,u=void 0===s?2:s,c=t.visual;return[["fisheye",n,i,o,u,void 0!==c&&c]]};tj.props={transform:!0};var ej=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={startAngle:-Math.PI/2,endAngle:3*Math.PI/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)},nj=function(t){var e=ej(t),n=e.startAngle,r=e.endAngle,i=e.innerRadius,a=e.outerRadius;return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5]].concat(M($R({startAngle:n,endAngle:r,innerRadius:i,outerRadius:a})))};nj.props={};var rj=function(t){var e=t.startAngle,n=void 0===e?-Math.PI/2:e,r=t.endAngle,i=void 0===r?3*Math.PI/2:r,a=t.innerRadius,o=void 0===a?0:a,s=t.outerRadius,u=void 0===s?1:s;return[].concat(M(JR()),M($R({startAngle:n,endAngle:i,innerRadius:o,outerRadius:u})))};rj.props={};var ij=function(t){var e=t.startAngle,n=void 0===e?0:e,r=t.endAngle,i=void 0===r?6*Math.PI:r,a=t.innerRadius,o=void 0===a?0:a,s=t.outerRadius;return[["translate",.5,.5],["reflect.y"],["translate",-.5,-.5],["helix",n,i,o,void 0===s?1:s]]};ij.props={};var aj=function(t){var e=t.value;return function(t){return t.map((function(){return e}))}};aj.props={};var oj=function(t){var e=t.value;return function(t){return t.map((function(t){return t[e]}))}};oj.props={};var sj=function(t){var e=t.value;return function(t){return t.map(e)}};sj.props={};var uj=function(t){var e=t.value;return function(){return e}};function cj(t,e){if(null!==t)return{type:"column",value:t,field:e}}function lj(t,e){var n=cj(t,e);return Object.assign(Object.assign({},n),{inferred:!0})}function fj(t,e){if(null!==t)return{type:"column",value:t,field:e,visual:!0}}function dj(t,e){var n=cj(t,e);return Object.assign(Object.assign({},n),{constant:!1})}function hj(t,e){var n,r=[],i=nr(t);try{for(i.s();!(n=i.n()).done;)r[n.value]=e}catch(t){i.e(t)}finally{i.f()}return r}function pj(t,e){var n=t[e];if(!n)return[null,null];var r=n.value,i=n.field;return[r,void 0===i?null:i]}function vj(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];if("string"!=typeof o)return[o,null];var s=g(pj(t,o),2),u=s[0],c=s[1];if(null!==u)return[u,c]}return[null,null]}function gj(t){return!(t instanceof Date)&&"object"==typeof t}uj.props={};var yj=function(){return function(t,e){return void 0!==e.encode.y1?[t,e]:[t,vd({},e,{encode:{y1:lj(hj(t,0))}})]}};yj.props={};var mj=function(){return function(t,e){return void 0!==e.encode.x?[t,e]:[t,vd({},e,{encode:{x:lj(hj(t,0))},scale:{x:{guide:null}}})]}};function bj(t){return function(){return t}}mj.props={};var xj,wj,kj,Ej,Oj,Sj,Mj,Tj,Aj,Pj,Nj,Cj,_j,Lj,Rj=Math.abs,jj=Math.atan2,Dj=Math.cos,Ij=Math.max,Fj=Math.min,zj=Math.sin,Bj=Math.sqrt,Gj=1e-12,Wj=Math.PI,Vj=Wj/2,Hj=2*Wj;function Yj(t){return t>=1?Vj:t<=-1?-Vj:Math.asin(t)}var Uj=Math.PI,qj=2*Uj,Xj=1e-6,Kj=qj-Xj;function $j(t){this._+=t[0];for(var e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}var Zj=function(){return O((function t(e){k(this,t),this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?$j:function(t){var e=Math.floor(t);if(!(e>=0))throw new Error("invalid digits: ".concat(t));if(e>15)return $j;var n=Math.pow(10,e);return function(t){this._+=t[0];for(var e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(e)}),[{key:"moveTo",value:function(t,e){this._append(xj||(xj=mN(["M",",",""])),this._x0=this._x1=+t,this._y0=this._y1=+e)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(wj||(wj=mN(["Z"]))))}},{key:"lineTo",value:function(t,e){this._append(kj||(kj=mN(["L",",",""])),this._x1=+t,this._y1=+e)}},{key:"quadraticCurveTo",value:function(t,e,n,r){this._append(Ej||(Ej=mN(["Q",",",",",",",""])),+t,+e,this._x1=+n,this._y1=+r)}},{key:"bezierCurveTo",value:function(t,e,n,r,i,a){this._append(Oj||(Oj=mN(["C",",",",",",",",",",",""])),+t,+e,+n,+r,this._x1=+i,this._y1=+a)}},{key:"arcTo",value:function(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error("negative radius: ".concat(i));var a=this._x1,o=this._y1,s=n-t,u=r-e,c=a-t,l=o-e,f=c*c+l*l;if(null===this._x1)this._append(Sj||(Sj=mN(["M",",",""])),this._x1=t,this._y1=e);else if(f>Xj)if(Math.abs(l*s-u*c)>Xj&&i){var d=n-a,h=r-o,p=s*s+u*u,v=d*d+h*h,g=Math.sqrt(p),y=Math.sqrt(f),m=i*Math.tan((Uj-Math.acos((p+f-v)/(2*g*y)))/2),b=m/y,x=m/g;Math.abs(b-1)>Xj&&this._append(Tj||(Tj=mN(["L",",",""])),t+b*c,e+b*l),this._append(Aj||(Aj=mN(["A",",",",0,0,",",",",",""])),i,i,+(l*d>c*h),this._x1=t+x*s,this._y1=e+x*u)}else this._append(Mj||(Mj=mN(["L",",",""])),this._x1=t,this._y1=e)}},{key:"arc",value:function(t,e,n,r,i,a){if(t=+t,e=+e,a=!!a,(n=+n)<0)throw new Error("negative radius: ".concat(n));var o=n*Math.cos(r),s=n*Math.sin(r),u=t+o,c=e+s,l=1^a,f=a?r-i:i-r;null===this._x1?this._append(Pj||(Pj=mN(["M",",",""])),u,c):(Math.abs(this._x1-u)>Xj||Math.abs(this._y1-c)>Xj)&&this._append(Nj||(Nj=mN(["L",",",""])),u,c),n&&(f<0&&(f=f%qj+qj),f>Kj?this._append(Cj||(Cj=mN(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,l,t-o,e-s,n,n,l,this._x1=u,this._y1=c):f>Xj&&this._append(_j||(_j=mN(["A",",",",0,",",",",",",",""])),n,n,+(f>=Uj),l,this._x1=t+n*Math.cos(i),this._y1=e+n*Math.sin(i)))}},{key:"rect",value:function(t,e,n,r){this._append(Lj||(Lj=mN(["M",",","h","v","h","Z"])),this._x0=this._x1=+t,this._y0=this._y1=+e,n=+n,+r,-n)}},{key:"toString",value:function(){return this._}}])}();function Qj(){return new Zj}function Jj(t){var e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{var r=Math.floor(n);if(!(r>=0))throw new RangeError("invalid digits: ".concat(n));e=r}return t},function(){return new Zj(e)}}function tD(t){return t.innerRadius}function eD(t){return t.outerRadius}function nD(t){return t.startAngle}function rD(t){return t.endAngle}function iD(t){return t&&t.padAngle}function aD(t,e,n,r,i,a,o){var s=t-n,u=e-r,c=(o?a:-a)/Bj(s*s+u*u),l=c*u,f=-c*s,d=t+l,h=e+f,p=n+l,v=r+f,g=(d+p)/2,y=(h+v)/2,m=p-d,b=v-h,x=m*m+b*b,w=i-a,k=d*v-p*h,E=(b<0?-1:1)*Bj(Ij(0,w*w*x-k*k)),O=(k*b-m*E)/x,S=(-k*m-b*E)/x,M=(k*b+m*E)/x,T=(-k*m+b*E)/x,A=O-g,P=S-y,N=M-g,C=T-y;return A*A+P*P>N*N+C*C&&(O=M,S=T),{cx:O,cy:S,x01:-l,y01:-f,x11:O*(i/w-1),y11:S*(i/w-1)}}function oD(){var t=tD,e=eD,n=bj(0),r=null,i=nD,a=rD,o=iD,s=null,u=Jj(c);function c(){var c,l,f,d=+t.apply(this,arguments),h=+e.apply(this,arguments),p=i.apply(this,arguments)-Vj,v=a.apply(this,arguments)-Vj,g=Rj(v-p),y=v>p;if(s||(s=c=u()),h<d&&(l=h,h=d,d=l),h>Gj)if(g>Hj-Gj)s.moveTo(h*Dj(p),h*zj(p)),s.arc(0,0,h,p,v,!y),d>Gj&&(s.moveTo(d*Dj(v),d*zj(v)),s.arc(0,0,d,v,p,y));else{var m,b,x=p,w=v,k=p,E=v,O=g,S=g,M=o.apply(this,arguments)/2,T=M>Gj&&(r?+r.apply(this,arguments):Bj(d*d+h*h)),A=Fj(Rj(h-d)/2,+n.apply(this,arguments)),P=A,N=A;if(T>Gj){var C=Yj(T/d*zj(M)),_=Yj(T/h*zj(M));(O-=2*C)>Gj?(k+=C*=y?1:-1,E-=C):(O=0,k=E=(p+v)/2),(S-=2*_)>Gj?(x+=_*=y?1:-1,w-=_):(S=0,x=w=(p+v)/2)}var L=h*Dj(x),R=h*zj(x),j=d*Dj(E),D=d*zj(E);if(A>Gj){var I,F=h*Dj(w),z=h*zj(w),B=d*Dj(k),G=d*zj(k);if(g<Wj)if(I=function(t,e,n,r,i,a,o,s){var u=n-t,c=r-e,l=o-i,f=s-a,d=f*u-l*c;if(!(d*d<Gj))return[t+(d=(l*(e-a)-f*(t-i))/d)*u,e+d*c]}(L,R,B,G,F,z,j,D)){var W=L-I[0],V=R-I[1],H=F-I[0],Y=z-I[1],U=1/zj(((f=(W*H+V*Y)/(Bj(W*W+V*V)*Bj(H*H+Y*Y)))>1?0:f<-1?Wj:Math.acos(f))/2),q=Bj(I[0]*I[0]+I[1]*I[1]);P=Fj(A,(d-q)/(U-1)),N=Fj(A,(h-q)/(U+1))}else P=N=0}S>Gj?N>Gj?(m=aD(B,G,L,R,h,N,y),b=aD(F,z,j,D,h,N,y),s.moveTo(m.cx+m.x01,m.cy+m.y01),N<A?s.arc(m.cx,m.cy,N,jj(m.y01,m.x01),jj(b.y01,b.x01),!y):(s.arc(m.cx,m.cy,N,jj(m.y01,m.x01),jj(m.y11,m.x11),!y),s.arc(0,0,h,jj(m.cy+m.y11,m.cx+m.x11),jj(b.cy+b.y11,b.cx+b.x11),!y),s.arc(b.cx,b.cy,N,jj(b.y11,b.x11),jj(b.y01,b.x01),!y))):(s.moveTo(L,R),s.arc(0,0,h,x,w,!y)):s.moveTo(L,R),d>Gj&&O>Gj?P>Gj?(m=aD(j,D,F,z,d,-P,y),b=aD(L,R,B,G,d,-P,y),s.lineTo(m.cx+m.x01,m.cy+m.y01),P<A?s.arc(m.cx,m.cy,P,jj(m.y01,m.x01),jj(b.y01,b.x01),!y):(s.arc(m.cx,m.cy,P,jj(m.y01,m.x01),jj(m.y11,m.x11),!y),s.arc(0,0,d,jj(m.cy+m.y11,m.cx+m.x11),jj(b.cy+b.y11,b.cx+b.x11),y),s.arc(b.cx,b.cy,P,jj(b.y11,b.x11),jj(b.y01,b.x01),!y))):s.arc(0,0,d,E,k,y):s.lineTo(j,D)}else s.moveTo(0,0);if(s.closePath(),c)return s=null,c+""||null}return c.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Wj/2;return[Dj(r)*n,zj(r)*n]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:bj(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:bj(+t),c):e},c.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:bj(+t),c):n},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:bj(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:bj(+t),c):i},c.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:bj(+t),c):a},c.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:bj(+t),c):o},c.context=function(t){return arguments.length?(s=null==t?null:t,c):s},c}function sD(t){var e=t.getOptions().transformations.map((function(t){return g(t,1)[0]})).filter((function(t){return"transpose"===t}));return e.length%2!=0}function uD(t){return t.getOptions().transformations.some((function(t){return"polar"===g(t,1)[0]}))}function cD(t){var e=t.getOptions().transformations;return e.some((function(t){return"reflect"===g(t,1)[0]}))&&e.some((function(t){return g(t,1)[0].startsWith("transpose")}))}function lD(t){return t.getOptions().transformations.some((function(t){return"helix"===g(t,1)[0]}))}function fD(t){return t.getOptions().transformations.some((function(t){return"parallel"===g(t,1)[0]}))}function dD(t){return t.getOptions().transformations.some((function(t){return"fisheye"===g(t,1)[0]}))}function hD(t){return lD(t)||uD(t)}function pD(t){var e=t.getOptions().transformations.find((function(t){return"polar"===t[0]})),n=g(e,5);return[+n[3],+n[4]]}function vD(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.getOptions().transformations.find((function(t){return"polar"===t[0]})),r=g(n,3),i=r[1],a=r[2];return e?[180*+i/Math.PI,180*+a/Math.PI]:[i,a]}function gD(t,e,n,r){var i=t-n,a=e-r;return Math.sqrt(i*i+a*a)}function yD(t,e){var n=Math.min.apply(Math,M(t)),r=Math.min.apply(Math,M(e));return{x:n,y:r,width:Math.max.apply(Math,M(t))-n,height:Math.max.apply(Math,M(e))-r}}function mD(t,e,n,r,i,a){return n*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+t}function bD(t,e,n,r,i,a){return n*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+e}function xD(t,e,n,r,i,a,o){for(var s=function(t,e,n){return Math.atan(-e/t*Math.tan(n))}(n,r,i),u=1/0,c=-1/0,l=[a,o],f=2*-Math.PI;f<=2*Math.PI;f+=Math.PI){var d=s+f;a<o?a<d&&d<o&&l.push(d):o<d&&d<a&&l.push(d)}for(var h=0;h<l.length;h++){var p=mD(t,0,n,r,i,l[h]);p<u&&(u=p),p>c&&(c=p)}for(var v=function(t,e,n){return Math.atan(e/(t*Math.tan(n)))}(n,r,i),g=1/0,y=-1/0,m=[a,o],b=2*-Math.PI;b<=2*Math.PI;b+=Math.PI){var x=v+b;a<o?a<x&&x<o&&m.push(x):o<x&&x<a&&m.push(x)}for(var w=0;w<m.length;w++){var k=bD(0,e,n,r,i,m[w]);k<g&&(g=k),k>y&&(y=k)}return{x:u,y:g,width:c-u,height:y-g}}function wD(t,e,n,r,i,a){var o=-1,s=1/0,u=[n,r],c=20;a&&a>200&&(c=a/10);for(var l=1/c,f=l/10,d=0;d<=c;d++){var h=d*l,p=[i.apply(void 0,M(t.concat([h]))),i.apply(void 0,M(e.concat([h])))],v=gD(u[0],u[1],p[0],p[1]);v<s&&(o=h,s=v)}if(0===o)return{x:t[0],y:e[0]};if(1===o){var g=t.length;return{x:t[g-1],y:e[g-1]}}s=1/0;for(var y=0;y<32&&!(f<1e-4);y++){var m=o-f,b=o+f,x=[i.apply(void 0,M(t.concat([m]))),i.apply(void 0,M(e.concat([m])))],w=gD(u[0],u[1],x[0],x[1]);if(m>=0&&w<s)o=m,s=w;else{var k=[i.apply(void 0,M(t.concat([b]))),i.apply(void 0,M(e.concat([b])))],E=gD(u[0],u[1],k[0],k[1]);b<=1&&E<s?(o=b,s=E):f*=.5}}return{x:i.apply(void 0,M(t.concat([o]))),y:i.apply(void 0,M(e.concat([o])))}}function kD(t,e,n,r){return gD(t,e,n,r)}function ED(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}}function OD(t,e,n,r,i){var a=1-i;return a*a*a*t+3*e*i*a*a+3*n*i*i*a+r*i*i*i}function SD(t,e,n,r){var i,a,o,s=-3*t+9*e-9*n+3*r,u=6*t-12*e+6*n,c=3*e-3*t,l=[];if(pn(s,0))pn(u,0)||(i=-c/u)>=0&&i<=1&&l.push(i);else{var f=u*u-4*s*c;pn(f,0)?l.push(-u/(2*s)):f>0&&(a=(-u-(o=Math.sqrt(f)))/(2*s),(i=(-u+o)/(2*s))>=0&&i<=1&&l.push(i),a>=0&&a<=1&&l.push(a))}return l}function MD(t,e,n,r,i,a,o,s){for(var u=[t,o],c=[e,s],l=SD(t,n,i,o),f=SD(e,r,a,s),d=0;d<l.length;d++)u.push(OD(t,n,i,o,l[d]));for(var h=0;h<f.length;h++)c.push(OD(e,r,a,s,f[h]));return yD(u,c)}function TD(t,e,n,r,i,a,o,s,u,c,l){var f=function(t,e,n,r,i,a,o,s,u,c,l){return wD([t,n,i,o],[e,r,a,s],u,c,OD,l)}(t,e,n,r,i,a,o,s,u,c,l);return gD(f.x,f.y,u,c)}function AD(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function PD(t,e,n){var r=t+n-2*e;if(pn(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function ND(t,e,n,r,i,a){var o=PD(t,n,i)[0],s=PD(e,r,a)[0],u=[t,i],c=[e,a];return void 0!==o&&u.push(AD(t,n,i,o)),void 0!==s&&c.push(AD(e,r,a,s)),yD(u,c)}function CD(t,e,n,r,i,a,o,s){var u=function(t,e,n,r,i,a,o,s){return wD([t,n,i],[e,r,a],o,s,AD)}(t,e,n,r,i,a,o,s);return gD(u.x,u.y,o,s)}Qj.prototype=Zj.prototype,"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==s.g?s.g:"undefined"!=typeof self&&self;var _D={exports:{}};!function(t){t.exports=function(){function t(t,n,i,a,o){e(t,n,i||0,a||t.length-1,o||r)}function e(t,r,i,a,o){for(;a>i;){if(a-i>600){var s=a-i+1,u=r-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1);e(t,r,Math.max(i,Math.floor(r-u*l/s+f)),Math.min(a,Math.floor(r+(s-u)*l/s+f)),o)}var d=t[r],h=i,p=a;for(n(t,i,r),o(t[a],d)>0&&n(t,i,a);h<p;){for(n(t,h,p),h++,p--;o(t[h],d)<0;)h++;for(;o(t[p],d)>0;)p--}0===o(t[i],d)?n(t,i,p):n(t,++p,a),p<=r&&(i=p+1),r<=p&&(a=p-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=v(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var a=e;a<n;a++){var o=t.children[a];u(i,t.leaf?r(o):o)}return i}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function h(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function v(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,r,i,a){for(var o=[n,r];o.length;)if(!((r=o.pop())-(n=o.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,a),o.push(n,s,s,r)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,n=[];if(!p(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var a=0;a<e.children.length;a++){var o=e.children[a],s=e.leaf?r(o):o;p(t,s)&&(e.leaf?n.push(o):h(t,s)?this._all(o,n):i.push(o))}e=i.pop()}return n},i.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],a=e.leaf?this.toBBox(i):i;if(p(t,a)){if(e.leaf||h(t,a))return!0;n.push(i)}}e=n.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=v([]),this},i.prototype.remove=function(t,e){if(!t)return this;for(var n,r,i,o=this.data,s=this.toBBox(t),u=[],c=[];o||u.length;){if(o||(o=u.pop(),r=u[u.length-1],n=c.pop(),i=!0),o.leaf){var l=a(t,o.children,e);if(-1!==l)return o.children.splice(l,1),u.push(o),this._condense(u),this}i||o.leaf||!h(o,s)?r?(n++,o=r.children[n],i=!1):o=null:(u.push(o),c.push(n),n=0,r=o,o=o.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},i.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=v(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=v([])).leaf=!1,i.height=r;var u=Math.ceil(a/s),c=u*Math.ceil(Math.sqrt(s));g(t,e,n,c,this.compareMinX);for(var l=e;l<=n;l+=c){var f=Math.min(l+c-1,n);g(t,l,f,u,this.compareMinY);for(var d=l;d<=f;d+=u){var h=Math.min(d+u-1,f);i.children.push(this._build(t,d,h,r-1))}}return o(i,this.toBBox),i},i.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,a=1/0,o=void 0,s=0;s<e.children.length;s++){var u=e.children[s],c=f(u),l=(d=t,h=u,(Math.max(h.maxX,d.maxX)-Math.min(h.minX,d.minX))*(Math.max(h.maxY,d.maxY)-Math.min(h.minY,d.minY))-c);l<a?(a=l,i=c<i?c:i,o=u):l===a&&c<i&&(i=c,o=u)}e=o||e.children[0]}var d,h;return e},i.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],a=this._chooseSubtree(r,this.data,e,i);for(a.children.push(t),u(a,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},i.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=v(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},i.prototype._splitRoot=function(t,e){this.data=v([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,n){for(var r,i=1/0,a=1/0,o=e;o<=n-e;o++){var u=s(t,0,o,this.toBBox),c=s(t,o,n,this.toBBox),l=(h=u,p=c,v=void 0,g=void 0,y=void 0,m=void 0,v=Math.max(h.minX,p.minX),g=Math.max(h.minY,p.minY),y=Math.min(h.maxX,p.maxX),m=Math.min(h.maxY,p.maxY),Math.max(0,y-v)*Math.max(0,m-g)),d=f(u)+f(c);l<i?(i=l,r=o,a=d<a?d:a):l===i&&d<a&&(a=d,r=o)}var h,p,v,g,y,m;return r||n-e},i.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:c,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},i.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,a=s(t,0,e,i),o=s(t,n-e,n,i),c=d(a)+d(o),l=e;l<n-e;l++){var f=t.children[l];u(a,t.leaf?i(f):f),c+=d(a)}for(var h=n-e-1;h>=e;h--){var p=t.children[h];u(o,t.leaf?i(p):p),c+=d(o)}return c},i.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)u(e[r],t)},i.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},i}()}(_D);var LD=_D.exports,RD=function(t){return t.GROUP="g",t.FRAGMENT="fragment",t.CIRCLE="circle",t.ELLIPSE="ellipse",t.IMAGE="image",t.RECT="rect",t.LINE="line",t.POLYLINE="polyline",t.POLYGON="polygon",t.TEXT="text",t.PATH="path",t.HTML="html",t.MESH="mesh",t}({}),jD=function(t){return t[t.ZERO=0]="ZERO",t[t.NEGATIVE_ONE=1]="NEGATIVE_ONE",t}({}),DD=function(){return O((function t(){k(this,t),this.plugins=[]}),[{key:"addRenderingPlugin",value:function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)}},{key:"removeAllRenderingPlugins",value:function(){var t=this;this.plugins.forEach((function(e){var n=t.context.renderingPlugins.indexOf(e);n>=0&&t.context.renderingPlugins.splice(n,1)}))}}])}(),ID=function(){return O((function t(e){k(this,t),this.clipSpaceNearZ=jD.NEGATIVE_ONE,this.plugins=[],this.config=w({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},e)}),[{key:"registerPlugin",value:function(t){var e=this.plugins.findIndex((function(e){return e===t}));-1===e&&this.plugins.push(t)}},{key:"unregisterPlugin",value:function(t){var e=this.plugins.findIndex((function(e){return e===t}));e>-1&&this.plugins.splice(e,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(t){return this.plugins.find((function(e){return e.name===t}))}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(t){Object.assign(this.config,t)}}])}(),FD=W,zD=B,BD=U,GD=Y,WD=q,VD=nt,HD=function(){function t(){k(this,t),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return O(t,[{key:"update",value:function(t,e){zD(this.center,t),zD(this.halfExtents,e),VD(this.min,this.center,this.halfExtents),FD(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,e){FD(this.center,e,t),WD(this.center,this.center,.5),VD(this.halfExtents,e,t),WD(this.halfExtents,this.halfExtents,.5),zD(this.min,t),zD(this.max,e)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(e){if(!t.isEmpty(e))if(t.isEmpty(this))this.setMinMax(e.getMin(),e.getMax());else{var n=this.center,r=n[0],i=n[1],a=n[2],o=this.halfExtents,s=o[0],u=o[1],c=o[2],l=r-s,f=r+s,d=i-u,h=i+u,p=a-c,v=a+c,g=e.center,y=g[0],m=g[1],b=g[2],x=e.halfExtents,w=x[0],k=x[1],E=x[2],O=y-w,S=y+w,M=m-k,T=m+k,A=b-E,P=b+E;O<l&&(l=O),S>f&&(f=S),M<d&&(d=M),T>h&&(h=T),A<p&&(p=A),P>v&&(v=P),n[0]=.5*(l+f),n[1]=.5*(d+h),n[2]=.5*(p+v),o[0]=.5*(f-l),o[1]=.5*(h-d),o[2]=.5*(v-p),this.min[0]=l,this.min[1]=d,this.min[2]=p,this.max[0]=f,this.max[1]=h,this.max[2]=v}}},{key:"setFromTransformedAABB",value:function(t,e){var n=this.center,r=this.halfExtents,i=t.center,a=t.halfExtents,o=e[0],s=e[4],u=e[8],c=e[1],l=e[5],f=e[9],d=e[2],h=e[6],p=e[10],v=Math.abs(o),g=Math.abs(s),y=Math.abs(u),m=Math.abs(c),b=Math.abs(l),x=Math.abs(f),w=Math.abs(d),k=Math.abs(h),E=Math.abs(p);n[0]=e[12]+o*i[0]+s*i[1]+u*i[2],n[1]=e[13]+c*i[0]+l*i[1]+f*i[2],n[2]=e[14]+d*i[0]+h*i[1]+p*i[2],r[0]=v*a[0]+g*a[1]+y*a[2],r[1]=m*a[0]+b*a[1]+x*a[2],r[2]=w*a[0]+k*a[1]+E*a[2],VD(this.min,n,r),FD(this.max,n,r)}},{key:"intersects",value:function(t){var e=this.getMax(),n=this.getMin(),r=t.getMax(),i=t.getMin();return n[0]<=r[0]&&e[0]>=i[0]&&n[1]<=r[1]&&e[1]>=i[1]&&n[2]<=r[2]&&e[2]>=i[2]}},{key:"intersection",value:function(e){if(!this.intersects(e))return null;var n=new t,r=BD([0,0,0],this.getMin(),e.getMin()),i=GD([0,0,0],this.getMax(),e.getMax());return n.setMinMax(r,i),n}},{key:"getNegativeFarPoint",value:function(t){return 273===t.pnVertexFlag?zD([0,0,0],this.min):272===t.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:257===t.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:256===t.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:17===t.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:16===t.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:1===t.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(t){return 273===t.pnVertexFlag?zD([0,0,0],this.max):272===t.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:257===t.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:256===t.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:17===t.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:16===t.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:1===t.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(t){return!t||0===t.halfExtents[0]&&0===t.halfExtents[1]&&0===t.halfExtents[2]}}])}(),YD=function(){return O((function t(e,n){k(this,t),this.distance=e||0,this.normal=n||z(0,1,0),this.updatePNVertexFlag()}),[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return K(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/it(this.normal);q(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,e,n){var r=this.distanceToPoint(t),i=r/(r-this.distanceToPoint(e)),a=i>=0&&i<=1;return a&&n&&Z(n,t,e,i),a}}])}(),UD=function(t){return t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE",t}({}),qD=function(){return O((function t(e){if(k(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new YD)}),[{key:"extractFromVPMatrix",value:function(t){var e=g(t,16),n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],p=e[12],v=e[13],y=e[14],m=e[15];G(this.planes[0].normal,a-n,c-o,h-l),this.planes[0].distance=m-p,G(this.planes[1].normal,a+n,c+o,h+l),this.planes[1].distance=m+p,G(this.planes[2].normal,a+r,c+s,h+f),this.planes[2].distance=m+v,G(this.planes[3].normal,a-r,c-s,h-f),this.planes[3].distance=m-v,G(this.planes[4].normal,a-i,c-u,h-d),this.planes[4].distance=m-y,G(this.planes[5].normal,a+i,c+u,h+d),this.planes[5].distance=m+y,this.planes.forEach((function(t){t.normalize(),t.updatePNVertexFlag()}))}}])}(),XD=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;k(this,t),this.x=0,this.y=0,this.x=e,this.y=n}return O(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y}}])}(),KD=function(){function t(e,n,r,i){k(this,t),this.x=e,this.y=n,this.width=r,this.height=i,this.left=e,this.right=e+r,this.top=n,this.bottom=n+i}return O(t,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(e){return new t(e.x,e.y,e.width,e.height)}},{key:"applyTransform",value:function(e,n){var r=ot(e.x,e.y,0,1),i=ot(e.x+e.width,e.y,0,1),a=ot(e.x,e.y+e.height,0,1),o=ot(e.x+e.width,e.y+e.height,0,1),s=at(),u=at(),c=at(),l=at();st(s,r,n),st(u,i,n),st(c,a,n),st(l,o,n);var f=Math.min(s[0],u[0],c[0],l[0]),d=Math.min(s[1],u[1],c[1],l[1]),h=Math.max(s[0],u[0],c[0],l[0]),p=Math.max(s[1],u[1],c[1],l[1]);return t.fromRect({x:f,y:d,width:h-f,height:p-d})}}])}(),$D="Method not implemented.",ZD="Use document.documentElement instead.";function QD(t){return void 0===t?0:t>360||t<-360?t%360:t}var JD=D();function tI(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Array.isArray(t)&&3===t.length?r?I(t):B(JD,t):Oe(t)?r?z(t,e,n):G(JD,t,e,n):r?z(t[0],t[1]||e,t[2]||n):G(JD,t[0],t[1]||e,t[2]||n)}var eI=Math.PI/180;function nI(t){return t*eI}var rI=180/Math.PI;function iI(t){return t*rI}var aI=Math.PI/2;function oI(t,e){return 16===e.length?function(t,e){var n,r,i=g(Rt(D(),e),3),a=i[0],o=i[1],s=i[2],u=Math.asin(-e[2]/a);return u<aI?u>-aI?(n=Math.atan2(e[6]/o,e[10]/s),r=Math.atan2(e[1]/a,e[0]/a)):(r=0,n=-Math.atan2(e[4]/o,e[5]/o)):(r=0,n=Math.atan2(e[4]/o,e[5]/o)),t[0]=n,t[1]=u,t[2]=r,t}(t,e):function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=r*r,s=i*i,u=a*a,c=n*n+o+s+u,l=n*a-r*i;return l>.499995*c?(t[0]=aI,t[1]=2*Math.atan2(r,n),t[2]=0):l<-.499995*c?(t[0]=-aI,t[1]=2*Math.atan2(r,n),t[2]=0):(t[0]=Math.asin(2*(n*i-a*r)),t[1]=Math.atan2(2*(n*a+r*i),1-2*(s+u)),t[2]=Math.atan2(2*(n*r+i*a),1-2*(o+s))),t}(t,e)}function sI(t){var e=t[0],n=t[1],r=t[3],i=t[4],a=Math.sqrt(e*e+n*n),o=Math.sqrt(r*r+i*i);if(e*i-n*r<0&&(e<i?a=-a:o=-o),a){var s=1/a;e*=s,n*=s}if(o){var u=1/o;r*=u,i*=u}var c=iI(Math.atan2(n,e));return[t[6],t[7],a,o,c]}var uI=ut(),cI=ut(),lI=at(),fI=[D(),D(),D()],dI=D();function hI(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}var pI=function(t){return t[t.ORBITING=0]="ORBITING",t[t.EXPLORING=1]="EXPLORING",t[t.TRACKING=2]="TRACKING",t}({}),vI=function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.ROTATIONAL=1]="ROTATIONAL",t[t.TRANSLATIONAL=2]="TRANSLATIONAL",t[t.CINEMATIC=3]="CINEMATIC",t}({}),gI=function(t){return t[t.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",t[t.PERSPECTIVE=1]="PERSPECTIVE",t}({}),yI="updated",mI=2e-4,bI=function(){return O((function t(){k(this,t),this.clipSpaceNearZ=jD.NEGATIVE_ONE,this.eventEmitter=new L,this.matrix=ut(),this.right=z(1,0,0),this.up=z(0,1,0),this.forward=z(0,0,1),this.position=z(0,0,1),this.focalPoint=z(0,0,0),this.distanceVector=z(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=ut(),this.projectionMatrixInverse=ut(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=pI.EXPLORING,this.trackingMode=vI.DEFAULT,this.projectionMode=gI.PERSPECTIVE,this.frustum=new qD,this.orthoMatrix=ut()}),[{key:"isOrtho",value:function(){return this.projectionMode===gI.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(t){this.enableUpdate=t}},{key:"setType",value:function(t,e){return this.type=t,this.type===pI.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===pI.TRACKING&&void 0!==e&&this.setTrackingMode(e),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==pI.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){return this.rotateWorld=t,this._getAngles(),this}},{key:"getViewTransform",value:function(){return vt(ut(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(t,e){var n=St(ut(),[t,e,0]);this.jitteredProjectionMatrix=mt(ut(),n,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setProjectionMatrix",value:function(t){this.projectionMatrix=t}},{key:"setFov",value:function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setNear",value:function(t){return this.projectionMode===gI.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this}},{key:"setFar",value:function(t){return this.projectionMode===gI.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this}},{key:"setViewOffset",value:function(t,e,n,r,i,a){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.projectionMode===gI.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===gI.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(t){return this.zoom=t,this.projectionMode===gI.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===gI.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(t,e){var n=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),r=n.x,i=n.y,a=this.roll;this.rotate(0,0,-a),this.setPosition(r,i),this.setFocalPoint(r,i),this.setZoom(t),this.rotate(0,0,a);var o=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),s=z(o.x-r,o.y-i,0),u=K(s,this.right)/F(this.right),c=K(s,this.up)/F(this.up),l=g(this.getPosition(),2),f=l[0],d=l[1],h=g(this.getFocalPoint(),2),p=h[0],v=h[1];return this.setPosition(f-u,d-c),this.setFocalPoint(p-u,v-c),this}},{key:"setPerspective",value:function(t,e,n,r){var i;this.projectionMode=gI.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=r;var a=this.near*Math.tan(nI(.5*this.fov))/this.zoom,o=2*a,s=this.aspect*o,u=-.5*s;if(null!==(i=this.view)&&void 0!==i&&i.enabled){var c=this.view.fullWidth,l=this.view.fullHeight;u+=this.view.offsetX*s/c,a-=this.view.offsetY*o/l,s*=this.view.width/c,o*=this.view.height/l}return function(t,e,n,r,i,a,o){var s,u,c=2*a,l=n-e,f=r-i,d=c/l,h=c/f,p=(n+e)/l,v=(r+i)/f,g=o-a,y=o*a;arguments.length>7&&void 0!==arguments[7]&&arguments[7]?(s=-o/g,u=-y/g):(s=-(o+a)/g,u=-2*y/g),t[0]=d,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=p,t[9]=v,t[10]=s,t[11]=-1,t[12]=0,t[13]=0,t[14]=u,t[15]=0}(this.projectionMatrix,u,u+s,a-o,a,t,this.far,this.clipSpaceNearZ===jD.ZERO),vt(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(t,e,n,r,i,a){var o;this.projectionMode=gI.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=r,this.near=i,this.far=a;var s=(this.rright-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,l=(this.top+this.bottom)/2,f=c-s,d=c+s,h=l+u,p=l-u;if(null!==(o=this.view)&&void 0!==o&&o.enabled){var v=(this.rright-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d=(f+=v*this.view.offsetX)+v*this.view.width,p=(h-=g*this.view.offsetY)-g*this.view.height}return this.clipSpaceNearZ===jD.NEGATIVE_ONE?Yt(this.projectionMatrix,f,d,h,p,i,a):Ut(this.projectionMatrix,f,d,h,p,i,a),vt(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(t){var e=tI(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.position[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.position[2]);return this._setPosition(e),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.focalPoint[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.focalPoint[2],r=z(0,1,0);if(this.focalPoint=tI(t,e,n),this.trackingMode===vI.CINEMATIC){var i=V(D(),this.focalPoint,this.position);t=i[0],e=i[1],n=i[2];var a=F(i),o=iI(Math.asin(e/a)),s=90+iI(Math.atan2(n,t)),u=ut();Et(u,u,nI(s)),kt(u,u,nI(o)),r=Q(D(),[0,1,0],u)}return vt(this.matrix,qt(ut(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<mI&&(this.distance=mI),this.dollyingStep=this.distance/100;var e=D();t=this.distance;var n=this.forward,r=this.focalPoint;return e[0]=t*n[0]+r[0],e[1]=t*n[1]+r[1],e[2]=t*n[2]+r[2],this._setPosition(e),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(t){return this.maxDistance=t,this}},{key:"setMinDistance",value:function(t){return this.minDistance=t,this}},{key:"setAzimuth",value:function(t){return this.azimuth=QD(t),this.computeMatrix(),this._getAxes(),this.type===pI.ORBITING||this.type===pI.EXPLORING?this._getPosition():this.type===pI.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=QD(t),this.computeMatrix(),this._getAxes(),this.type===pI.ORBITING||this.type===pI.EXPLORING?this._getPosition():this.type===pI.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(t){return this.roll=QD(t),this.computeMatrix(),this._getAxes(),this.type===pI.ORBITING||this.type===pI.EXPLORING?this._getPosition():this.type===pI.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var t=ce(ue(),[0,0,1],nI(this.roll));ht(this.matrix);var e=ce(ue(),[1,0,0],nI((this.rotateWorld&&this.type!==pI.TRACKING||this.type===pI.TRACKING?1:-1)*this.elevation)),n=ce(ue(),[0,1,0],nI((this.rotateWorld&&this.type!==pI.TRACKING||this.type===pI.TRACKING?1:-1)*this.azimuth)),r=le(ue(),n,e);r=le(ue(),r,t);var i=Ft(ut(),r);this.type===pI.ORBITING||this.type===pI.EXPLORING?(bt(this.matrix,this.matrix,this.focalPoint),mt(this.matrix,this.matrix,i),bt(this.matrix,this.matrix,[0,0,this.distance])):this.type===pI.TRACKING&&(bt(this.matrix,this.matrix,this.position),mt(this.matrix,this.matrix,i))}},{key:"_setPosition",value:function(t,e,n){this.position=tI(t,e,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){B(this.right,tI(st(at(),[1,0,0,0],this.matrix))),B(this.up,tI(st(at(),[0,1,0,0],this.matrix))),B(this.forward,tI(st(at(),[0,0,1,0],this.matrix))),X(this.right,this.right),X(this.up,this.up),X(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],r=F(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===pI.TRACKING||this.rotateWorld?(this.elevation=iI(Math.asin(e/r)),this.azimuth=iI(Math.atan2(-t,-n))):(this.elevation=-iI(Math.asin(e/r)),this.azimuth=-iI(Math.atan2(-t,-n)))}},{key:"_getPosition",value:function(){B(this.position,tI(st(at(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){J(this.distanceVector,[0,0,-this.distance],oe(ae(),this.matrix)),W(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=V(D(),this.focalPoint,this.position),this.distance=F(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===gI.ORTHOGRAPHIC){var t=this.position,e=ce(ue(),[0,0,1],-this.roll*Math.PI/180);It(this.orthoMatrix,e,z((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),z(this.zoom,this.zoom,1),t)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var t=this.getViewTransform(),e=mt(ut(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(e),this.eventEmitter.emit(yI)}}},{key:"rotate",value:function(t,e,n){throw new Error($D)}},{key:"pan",value:function(t,e){throw new Error($D)}},{key:"dolly",value:function(t){throw new Error($D)}},{key:"createLandmark",value:function(t,e){throw new Error($D)}},{key:"gotoLandmark",value:function(t,e){throw new Error($D)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error($D)}}])}(),xI=function(t){return t[t.Standard=0]="Standard",t}({}),wI=function(t){return t[t.ADDED=0]="ADDED",t[t.REMOVED=1]="REMOVED",t[t.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",t}({}),kI={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new KD(0,0,0,0)},EI=function(t){return t.COORDINATE="<coordinate>",t.COLOR="<color>",t.PAINT="<paint>",t.NUMBER="<number>",t.ANGLE="<angle>",t.OPACITY_VALUE="<opacity-value>",t.SHADOW_BLUR="<shadow-blur>",t.LENGTH="<length>",t.PERCENTAGE="<percentage>",t.LENGTH_PERCENTAGE="<length> | <percentage>",t.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",t.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",t.LIST_OF_POINTS="<list-of-points>",t.PATH="<path>",t.FILTER="<filter>",t.Z_INDEX="<z-index>",t.OFFSET_DISTANCE="<offset-distance>",t.DEFINED_PATH="<defined-path>",t.MARKER="<marker>",t.TRANSFORM="<transform>",t.TRANSFORM_ORIGIN="<transform-origin>",t.TEXT="<text>",t.TEXT_TRANSFORM="<text-transform>",t}({});function OI(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function SI(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function MI(){}var TI=.7,AI=1.4285714285714286,PI="\\s*([+-]?\\d+)\\s*",NI="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",CI="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_I=/^#([0-9a-f]{3,8})$/,LI=new RegExp("^rgb\\(".concat(PI,",").concat(PI,",").concat(PI,"\\)$")),RI=new RegExp("^rgb\\(".concat(CI,",").concat(CI,",").concat(CI,"\\)$")),jI=new RegExp("^rgba\\(".concat(PI,",").concat(PI,",").concat(PI,",").concat(NI,"\\)$")),DI=new RegExp("^rgba\\(".concat(CI,",").concat(CI,",").concat(CI,",").concat(NI,"\\)$")),II=new RegExp("^hsl\\(".concat(NI,",").concat(CI,",").concat(CI,"\\)$")),FI=new RegExp("^hsla\\(".concat(NI,",").concat(CI,",").concat(CI,",").concat(NI,"\\)$")),zI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function BI(){return this.rgb().formatHex()}function GI(){return this.rgb().formatRgb()}function WI(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=_I.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?VI(e):3===n?new YI(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?HI(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?HI(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=LI.exec(t))?new YI(e[1],e[2],e[3],1):(e=RI.exec(t))?new YI(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=jI.exec(t))?HI(e[1],e[2],e[3],e[4]):(e=DI.exec(t))?HI(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=II.exec(t))?ZI(e[1],e[2]/100,e[3]/100,1):(e=FI.exec(t))?ZI(e[1],e[2]/100,e[3]/100,e[4]):zI.hasOwnProperty(t)?VI(zI[t]):"transparent"===t?new YI(NaN,NaN,NaN,0):null}function VI(t){return new YI(t>>16&255,t>>8&255,255&t,1)}function HI(t,e,n,r){return r<=0&&(t=e=n=NaN),new YI(t,e,n,r)}function YI(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function UI(){return"#".concat($I(this.r)).concat($I(this.g)).concat($I(this.b))}function qI(){var t=XI(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(KI(this.r),", ").concat(KI(this.g),", ").concat(KI(this.b)).concat(1===t?")":", ".concat(t,")"))}function XI(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function KI(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $I(t){return((t=KI(t))<16?"0":"")+t.toString(16)}function ZI(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new JI(t,e,n,r)}function QI(t){if(t instanceof JI)return new JI(t.h,t.s,t.l,t.opacity);if(t instanceof MI||(t=WI(t)),!t)return new JI;if(t instanceof JI)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new JI(o,s,u,t.opacity)}function JI(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function tF(t){return(t=(t||0)%360)<0?t+360:t}function eF(t){return Math.max(0,Math.min(1,t||0))}function nF(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function rF(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=e?e.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var u=t.apply(this,i);return n.cache=s.set(o,u)||s,u};return n.cache=new(rF.Cache||Map),rF.cacheList.push(n.cache),n}OI(MI,WI,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:BI,formatHex:BI,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return QI(this).formatHsl()},formatRgb:GI,toString:GI}),OI(YI,(function(t,e,n,r){return 1===arguments.length?((i=t)instanceof MI||(i=WI(i)),i?new YI((i=i.rgb()).r,i.g,i.b,i.opacity):new YI):new YI(t,e,n,null==r?1:r);var i}),SI(MI,{brighter:function(t){return t=null==t?AI:Math.pow(AI,t),new YI(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?TI:Math.pow(TI,t),new YI(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new YI(KI(this.r),KI(this.g),KI(this.b),XI(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:UI,formatHex:UI,formatHex8:function(){return"#".concat($I(this.r)).concat($I(this.g)).concat($I(this.b)).concat($I(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:qI,toString:qI})),OI(JI,(function(t,e,n,r){return 1===arguments.length?QI(t):new JI(t,e,n,null==r?1:r)}),SI(MI,{brighter:function(t){return t=null==t?AI:Math.pow(AI,t),new JI(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?TI:Math.pow(TI,t),new JI(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new YI(nF(t>=240?t-240:t+120,i,r),nF(t,i,r),nF(t<120?t+240:t-120,i,r),this.opacity)},clamp:function(){return new JI(tF(this.h),eF(this.s),eF(this.l),XI(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=XI(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(tF(this.h),", ").concat(100*eF(this.s),"%, ").concat(100*eF(this.l),"%").concat(1===t?")":", ".concat(t,")"))}})),rF.Cache=Map,rF.cacheList=[],rF.clearCache=function(){rF.cacheList.forEach((function(t){return t.clear()}))};var iF=function(t){return t[t.kUnknown=0]="kUnknown",t[t.kNumber=1]="kNumber",t[t.kPercentage=2]="kPercentage",t[t.kEms=3]="kEms",t[t.kPixels=4]="kPixels",t[t.kRems=5]="kRems",t[t.kDegrees=6]="kDegrees",t[t.kRadians=7]="kRadians",t[t.kGradians=8]="kGradians",t[t.kTurns=9]="kTurns",t[t.kMilliseconds=10]="kMilliseconds",t[t.kSeconds=11]="kSeconds",t[t.kInteger=12]="kInteger",t}({}),aF=function(t){return t[t.kUNumber=0]="kUNumber",t[t.kUPercent=1]="kUPercent",t[t.kULength=2]="kULength",t[t.kUAngle=3]="kUAngle",t[t.kUTime=4]="kUTime",t[t.kUOther=5]="kUOther",t}({}),oF=function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t}({}),sF=function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t}({}),uF=[{name:"em",unit_type:iF.kEms},{name:"px",unit_type:iF.kPixels},{name:"deg",unit_type:iF.kDegrees},{name:"rad",unit_type:iF.kRadians},{name:"grad",unit_type:iF.kGradians},{name:"ms",unit_type:iF.kMilliseconds},{name:"s",unit_type:iF.kSeconds},{name:"rem",unit_type:iF.kRems},{name:"turn",unit_type:iF.kTurns}],cF=function(t){return t[t.kUnknownType=0]="kUnknownType",t[t.kUnparsedType=1]="kUnparsedType",t[t.kKeywordType=2]="kKeywordType",t[t.kUnitType=3]="kUnitType",t[t.kSumType=4]="kSumType",t[t.kProductType=5]="kProductType",t[t.kNegateType=6]="kNegateType",t[t.kInvertType=7]="kInvertType",t[t.kMinType=8]="kMinType",t[t.kMaxType=9]="kMaxType",t[t.kClampType=10]="kClampType",t[t.kTransformType=11]="kTransformType",t[t.kPositionType=12]="kPositionType",t[t.kURLImageType=13]="kURLImageType",t[t.kColorType=14]="kColorType",t[t.kUnsupportedColorType=15]="kUnsupportedColorType",t}({}),lF=function(t){var e=1;switch(t){case iF.kPixels:case iF.kDegrees:case iF.kSeconds:break;case iF.kMilliseconds:e=.001;break;case iF.kRadians:e=180/Math.PI;break;case iF.kGradians:e=.9;break;case iF.kTurns:e=360}return e},fF=function(t){switch(t){case iF.kNumber:case iF.kInteger:return"";case iF.kPercentage:return"%";case iF.kEms:return"em";case iF.kRems:return"rem";case iF.kPixels:return"px";case iF.kDegrees:return"deg";case iF.kRadians:return"rad";case iF.kGradians:return"grad";case iF.kMilliseconds:return"ms";case iF.kSeconds:return"s";case iF.kTurns:return"turn"}return""},dF=function(){return O((function t(){k(this,t)}),[{key:"toString",value:function(){return this.buildCSSText(oF.kNo,sF.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=cF.kUnitType&&this.getType()<=cF.kClampType}}],[{key:"isAngle",value:function(t){return t===iF.kDegrees||t===iF.kRadians||t===iF.kGradians||t===iF.kTurns}},{key:"isLength",value:function(t){return t>=iF.kEms&&t<iF.kDegrees}},{key:"isRelativeUnit",value:function(t){return t===iF.kPercentage||t===iF.kEms||t===iF.kRems}},{key:"isTime",value:function(t){return t===iF.kSeconds||t===iF.kMilliseconds}}])}(),hF=function(t){function e(t){var n;return k(this,e),(n=N(this,e)).colorSpace=t,n}return _(e,t),O(e,[{key:"getType",value:function(){return cF.kColorType}},{key:"to",value:function(t){return this}}])}(dF),pF=function(t){return t[t.Constant=0]="Constant",t[t.LinearGradient=1]="LinearGradient",t[t.RadialGradient=2]="RadialGradient",t}({}),vF=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e)).type=t,r.value=n,r}return _(e,t),O(e,[{key:"clone",value:function(){return new e(this.type,this.value)}},{key:"buildCSSText",value:function(t,e,n){return n}},{key:"getType",value:function(){return cF.kColorType}}])}(dF),gF=function(t){function e(t){var n;return k(this,e),(n=N(this,e)).value=t,n}return _(e,t),O(e,[{key:"clone",value:function(){return new e(this.value)}},{key:"getType",value:function(){return cF.kKeywordType}},{key:"buildCSSText",value:function(t,e,n){return n+this.value}}])}(dF),yF=function(t){return function(t){switch(t){case aF.kUNumber:return iF.kNumber;case aF.kULength:return iF.kPixels;case aF.kUPercent:return iF.kPercentage;case aF.kUTime:return iF.kSeconds;case aF.kUAngle:return iF.kDegrees;default:return iF.kUnknown}}(function(t){switch(t){case iF.kNumber:case iF.kInteger:return aF.kUNumber;case iF.kPercentage:return aF.kUPercent;case iF.kPixels:return aF.kULength;case iF.kMilliseconds:case iF.kSeconds:return aF.kUTime;case iF.kDegrees:case iF.kRadians:case iF.kGradians:case iF.kTurns:return aF.kUAngle;default:return aF.kUOther}}(t))},mF=function(t){function e(t){var n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iF.kNumber;return k(this,e),n=N(this,e),r="string"==typeof a?(i=a)?"number"===i?iF.kNumber:"percent"===i||"%"===i?iF.kPercentage:function(t){return uF.find((function(e){return e.name===t})).unit_type}(i):iF.kUnknown:a,n.unit=r,n.value=t,n}return _(e,t),O(e,[{key:"clone",value:function(){return new e(this.value,this.unit)}},{key:"equals",value:function(t){var e=t;return this.value===e.value&&this.unit===e.unit}},{key:"getType",value:function(){return cF.kUnitType}},{key:"convertTo",value:function(t){if(this.unit===t)return new e(this.value,this.unit);var n=yF(this.unit);if(n!==yF(t)||n===iF.kUnknown)return null;var r=lF(this.unit)/lF(t);return new e(this.value*r,t)}},{key:"buildCSSText",value:function(t,e,n){var r;switch(this.unit){case iF.kUnknown:break;case iF.kInteger:r=Number(this.value).toFixed(0);break;case iF.kNumber:case iF.kPercentage:case iF.kEms:case iF.kRems:case iF.kPixels:case iF.kDegrees:case iF.kRadians:case iF.kGradians:case iF.kMilliseconds:case iF.kSeconds:case iF.kTurns:var i=this.value,a=fF(this.unit);if(i<-999999||i>999999){var o=fF(this.unit);r=!Number.isFinite(i)||Number.isNaN(i)?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(Number.isFinite(t)?"NaN":t>0?"infinity":"-infinity")+e}(i,o):i+(o||"")}else r="".concat(i).concat(a)}return n+r}}])}(dF),bF=new mF(0,"px");new mF(1,"px");var xF=new mF(0,"deg"),wF=function(t){function e(t,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return k(this,e),(i=N(this,e,["rgb"])).r=t,i.g=n,i.b=r,i.alpha=a,i.isNone=o,i}return _(e,t),O(e,[{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(t,e,n){return"".concat(n,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])}(hF),kF=new gF("unset"),EF={"":kF,unset:kF,initial:new gF("initial"),inherit:new gF("inherit")},OF=new wF(0,0,0,0,!0),SF=new wF(0,0,0,0),MF=rF((function(t,e,n,r){return new wF(t,e,n,r)}),(function(t,e,n,r){return"rgba(".concat(t,",").concat(e,",").concat(n,",").concat(r,")")})),TF=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iF.kNumber;return new mF(t,e)};function AF(t){var e=t.type,n=t.value;return"hex"===e?"#".concat(n):"literal"===e?n:"rgb"===e?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}new mF(50,"%");var PF=function(){var t=/^(linear\-gradient)/i,e=/^(repeating\-linear\-gradient)/i,n=/^(radial\-gradient)/i,r=/^(repeating\-radial\-gradient)/i,i=/^(conic\-gradient)/i,a=/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,o=/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,s=/^(left|center|right|top|bottom)/i,u=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,c=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,l=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,f=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,d=/^\(/,h=/^\)/,p=/^,/,v=/^\#([0-9a-fA-F]+)/,g=/^([a-zA-Z]+)/,y=/^rgb/i,m=/^rgba/i,b=/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/,x="";function w(t){throw new Error("".concat(x,": ").concat(t))}function k(){return E("linear-gradient",t,S)||E("repeating-linear-gradient",e,S)||E("radial-gradient",n,M)||E("repeating-radial-gradient",r,M)||E("conic-gradient",i,M)}function E(t,e,n){return O(e,(function(e){var r=n();return r&&(I(p)||w("Missing comma before color stops")),{type:t,orientation:r,colorStops:C(_)}}))}function O(t,e){var n=I(t);if(n){I(d)||w("Missing (");var r=e(n);return I(h)||w("Missing )"),r}}function S(){return D("directional",a,1)||D("angular",f,1)}function M(){var t,e,n=T();return n&&((t=[]).push(n),e=x,I(p)&&((n=T())?t.push(n):x=e)),t}function T(){var t,e=function(){var t=D("shape",/^(circle)/i,0);return t&&(t.style=j()||A()),t}()||((t=D("shape",/^(ellipse)/i,0))&&(t.style=R()||A()),t);if(e)e.at=P();else{var n=A();if(n){e=n;var r=P();r&&(e.at=r)}else{var i=N();i&&(e={type:"default-radial",at:i})}}return e}function A(){return D("extent-keyword",o,1)}function P(){if(D("position",/^at/,0)){var t=N();return t||w("Missing positioning value"),t}}function N(){var t={x:R(),y:R()};if(t.x||t.y)return{type:"position",value:t}}function C(t){var e=t(),n=[];if(e)for(n.push(e);I(p);)(e=t())?n.push(e):w("One extra comma");return n}function _(){var t=D("hex",v,1)||O(m,(function(){return{type:"rgba",value:C(L)}}))||O(y,(function(){return{type:"rgb",value:C(L)}}))||D("literal",g,0);return t||w("Expected color definition"),t.length=R(),t}function L(){return I(b)[1]}function R(){return D("%",c,1)||D("position-keyword",s,1)||j()}function j(){return D("px",u,1)||D("em",l,1)}function D(t,e,n){var r=I(e);if(r)return{type:t,value:r[n]}}function I(t){var e=/^[\n\r\t\s]+/.exec(x);e&&F(e[0].length);var n=t.exec(x);return n&&F(n[0].length),n}function F(t){x=x.substring(t)}return function(t){return x=t,e=C(k),x.length>0&&w("Invalid input not EOF"),e;var e}}(),NF=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,CF=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,_F=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,LF=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,RF={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},jF=rF((function(t){var e;return e="angular"===t.type?Number(t.value):RF[t.value]||0,TF(e,"deg")})),DF=rF((function(t){var e=50,n=50,r="%",i="%";if("position"===(null==t?void 0:t.type)){var a=t.value,o=a.x,s=a.y;"position-keyword"===(null==o?void 0:o.type)&&("left"===o.value?e=0:"center"===o.value?e=50:"right"===o.value?e=100:"top"===o.value?n=0:"bottom"===o.value&&(n=100)),"position-keyword"===(null==s?void 0:s.type)&&("left"===s.value?e=0:"center"===s.value?n=50:"right"===s.value?e=100:"top"===s.value?n=0:"bottom"===s.value&&(n=100)),"px"!==(null==o?void 0:o.type)&&"%"!==(null==o?void 0:o.type)&&"em"!==(null==o?void 0:o.type)||(r=null==o?void 0:o.type,e=Number(o.value)),"px"!==(null==s?void 0:s.type)&&"%"!==(null==s?void 0:s.type)&&"em"!==(null==s?void 0:s.type)||(i=null==s?void 0:s.type,n=Number(s.value))}return{cx:TF(e,r),cy:TF(n,i)}})),IF=rF((function(t){if(t.indexOf("linear")>-1||t.indexOf("radial")>-1)return PF(t).map((function(t){var e=t.type,n=t.orientation,r=t.colorStops;!function(t){var e,n,r=t.length;t[r-1].length=null!==(e=t[r-1].length)&&void 0!==e?e:{type:"%",value:"100"},r>1&&(t[0].length=null!==(n=t[0].length)&&void 0!==n?n:{type:"%",value:"0"});for(var i=0,a=Number(t[0].length.value),o=1;o<r;o++){var s,u=null===(s=t[o].length)||void 0===s?void 0:s.value;if(!Me(u)&&!Me(a)){for(var c=1;c<o-i;c++)t[i+c].length={type:"%",value:"".concat(a+(Number(u)-a)*c/(o-i))};i=o,a=Number(u)}}}(r);var i,a=r.map((function(t){return{offset:TF(Number(t.length.value),"%"),color:AF(t)}}));if("linear-gradient"===e)return new vF(pF.LinearGradient,{angle:n?jF(n):xF,steps:a});if("radial-gradient"===e&&(n||(n=[{type:"shape",value:"circle"}]),"shape"===n[0].type&&"circle"===n[0].value)){var o,s=DF(n[0].at),u=s.cx,c=s.cy;if(n[0].style){var l=n[0].style,f=l.type,d=l.value;"extent-keyword"===f?(EF[i=d]||(EF[i]=new gF(i)),o=EF[i]):o=TF(d,f)}return new vF(pF.RadialGradient,{cx:u,cy:c,size:o,steps:a})}}));var e=t[0];if("("===t[1]||"("===t[2])if("l"===e){var n=NF.exec(t);if(n){var r,i=(null===(r=n[2].match(LF))||void 0===r?void 0:r.map((function(t){return t.split(":")})))||[];return[new vF(pF.LinearGradient,{angle:TF(parseFloat(n[1]),"deg"),steps:i.map((function(t){var e=g(t,2),n=e[0],r=e[1];return{offset:TF(100*Number(n),"%"),color:r}}))})]}}else if("r"===e){var a=function(t){var e=CF.exec(t);if(e){var n,r=(null===(n=e[4].match(LF))||void 0===n?void 0:n.map((function(t){return t.split(":")})))||[];return{cx:TF(50,"%"),cy:TF(50,"%"),steps:r.map((function(t){var e=g(t,2),n=e[0],r=e[1];return{offset:TF(100*Number(n),"%"),color:r}}))}}return null}(t);if(a){if(!Te(a))return[new vF(pF.RadialGradient,a)];t=a}}else if("p"===e)return function(t){var e=_F.exec(t);if(e){var n=e[1],r=e[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}(t)}));function FF(t){return t&&!!t.image}function zF(t){return t&&!Me(t.r)&&!Me(t.g)&&!Me(t.b)}var BF=rF((function(t){if(FF(t))return w({repetition:"repeat"},t);if(Me(t)&&(t=""),"transparent"===t)return SF;if("currentColor"===t)t="black";else if("none"===t)return OF;var e=IF(t);if(e)return e;var n=WI(t),r=[0,0,0,0];return null!==n&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),MF.apply(void 0,r)}));function GF(t,e){if(zF(t)&&zF(e))return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(t){var e=t.slice();if(e[3])for(var n=0;n<3;n++)e[n]=Math.round(Ae(e[n],0,255));return e[3]=Ae(e[3],0,1),"rgba(".concat(e.join(","),")")}]}function WF(t,e){if(Me(e))return TF(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(t)>=0)return TF(Number(e),"px");if("deg".search(t)>=0)return TF(Number(e),"deg")}var n=[];e=e.replace(t,(function(t){return n.push(t),"U".concat(t)}));var r="U(".concat(t.source,")");return n.map((function(t){return TF(Number(e.replace(new RegExp("U".concat(t),"g"),"").replace(new RegExp(r,"g"),"*0")),t)}))[0]}var VF=function(t){return WF(new RegExp("px","g"),t)},HF=rF(VF);rF((function(t){return WF(new RegExp("%","g"),t)}));var YF=function(t){return Oe(t)||isFinite(Number(t))?TF(Number(t)||0,"px"):WF(new RegExp("px|%|em|rem","g"),t)},UF=rF(YF),qF=function(t){return WF(new RegExp("deg|rad|grad|turn","g"),t)},XF=rF(qF);function KF(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a="",o=t.value||0,s=e.value||0,u=yF(t.unit),c=t.convertTo(u),l=e.convertTo(u);return c&&l?(o=c.value,s=l.value,a=fF(t.unit)):(mF.isLength(t.unit)||mF.isLength(e.unit))&&(o=QF(t,i,n),s=QF(e,i,n),a="px"),[o,s,function(t){return r&&(t=Math.max(t,0)),t+a}]}function $F(t){var e=0;return t.unit===iF.kDegrees?e=t.value:t.unit===iF.kRadians?e=iI(Number(t.value)):t.unit===iF.kTurns?e=360*Number(t.value):t.value&&(e=t.value),e}function ZF(t,e){var n;return Array.isArray(t)?n=t.map((function(t){return Number(t)})):Te(t)?n=t.split(" ").map((function(t){return Number(t)})):Oe(t)&&(n=[t]),2===e?1===n.length?[n[0],n[0]]:[n[0],n[1]]:4===e?1===n.length?[n[0],n[0],n[0],n[0]]:2===n.length?[n[0],n[1],n[0],n[1]]:3===n.length?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]:"even"===e&&n.length%2==1?[].concat(M(n),M(n)):n}function QF(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.unit===iF.kPixels)return Number(t.value);if(t.unit===iF.kPercentage&&n){var i=n.nodeName===RD.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[e]:0)+t.value/100*i.halfExtents[e]*2}return 0}var JF=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function tz(t){return t.toString()}var ez=function(t){return"number"==typeof t?TF(t):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t)?TF(Number(t)):TF(0)},nz=rF(ez);function rz(t,e){return[t,e,tz]}function iz(t,e){return function(n,r){return[n,r,function(n){return tz(Ae(n,t,e))}]}}function az(t,e){if(t.length===e.length)return[t,e,function(t){return t}]}function oz(t){return 0===t.parsedStyle.d.totalLength&&(t.parsedStyle.d.totalLength=ln(t.parsedStyle.d.absolutePath)),t.parsedStyle.d.totalLength}function sz(t){return 0===t.parsedStyle.points.totalLength&&(t.parsedStyle.points.totalLength=function(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=gD(r[0],r[1],i[0],i[1])}return e}(t.parsedStyle.points.points)),t.parsedStyle.points.totalLength}function uz(t,e){return t[0]===e[0]&&t[1]===e[1]}function cz(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||0===Math.sin(u)||pn(u,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),l=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,l=l>Math.PI/2?Math.PI-l:l,{xExtra:Math.cos(u/2-c)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(l-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0}}function lz(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}rF((function(t){return Te(t)?t.split(" ").map(nz):t.map(nz)}));var fz=function(t,e){var n=t.x*e.x+t.y*e.y,r=Math.sqrt((Math.pow(t.x,2)+Math.pow(t.y,2))*(Math.pow(e.x,2)+Math.pow(e.y,2)));return(t.x*e.y-t.y*e.x<0?-1:1)*Math.acos(n/r)},dz=function(t,e,n,r,i,a,o,s){e=Math.abs(e),n=Math.abs(n);var u=nI(r=vn(r,360));if(t.x===o.x&&t.y===o.y)return{x:t.x,y:t.y,ellipticalArcAngle:0};if(0===e||0===n)return{x:0,y:0,ellipticalArcAngle:0};var c=(t.x-o.x)/2,l=(t.y-o.y)/2,f={x:Math.cos(u)*c+Math.sin(u)*l,y:-Math.sin(u)*c+Math.cos(u)*l},d=Math.pow(f.x,2)/Math.pow(e,2)+Math.pow(f.y,2)/Math.pow(n,2);d>1&&(e*=Math.sqrt(d),n*=Math.sqrt(d));var h=(Math.pow(e,2)*Math.pow(n,2)-Math.pow(e,2)*Math.pow(f.y,2)-Math.pow(n,2)*Math.pow(f.x,2))/(Math.pow(e,2)*Math.pow(f.y,2)+Math.pow(n,2)*Math.pow(f.x,2));h=h<0?0:h;var p=(i!==a?1:-1)*Math.sqrt(h),v=p*(e*f.y/n),g=p*(-n*f.x/e),y={x:Math.cos(u)*v-Math.sin(u)*g+(t.x+o.x)/2,y:Math.sin(u)*v+Math.cos(u)*g+(t.y+o.y)/2},m={x:(f.x-v)/e,y:(f.y-g)/n},b=fz({x:1,y:0},m),x=fz(m,{x:(-f.x-v)/e,y:(-f.y-g)/n});!a&&x>0?x-=2*Math.PI:a&&x<0&&(x+=2*Math.PI);var w=b+(x%=2*Math.PI)*s,k=e*Math.cos(w),E=n*Math.sin(w);return{x:Math.cos(u)*k-Math.sin(u)*E+y.x,y:Math.sin(u)*k+Math.cos(u)*E+y.y,ellipticalArcStartAngle:b,ellipticalArcEndAngle:b+x,ellipticalArcAngle:w,ellipticalArcCenter:y,resultantRx:e,resultantRy:n}};function hz(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.arcParams,i=r.rx,a=void 0===i?0:i,o=r.ry,s=void 0===o?0:o,u=r.xRotation,c=r.arcFlag,l=r.sweepFlag,f=dz({x:t.prePoint[0],y:t.prePoint[1]},a,s,u,!!c,!!l,{x:t.currentPoint[0],y:t.currentPoint[1]},e),d=dz({x:t.prePoint[0],y:t.prePoint[1]},a,s,u,!!c,!!l,{x:t.currentPoint[0],y:t.currentPoint[1]},n?e+.005:e-.005),h=d.x-f.x,p=d.y-f.y,v=Math.sqrt(h*h+p*p);return{x:-h/v,y:-p/v}}function pz(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function vz(t,e){return pz(t)*pz(e)?(t[0]*e[0]+t[1]*e[1])/(pz(t)*pz(e)):1}function gz(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(vz(t,e))}function yz(t,e){var n=e[1],r=e[2],i=vn(nI(e[3]),2*Math.PI),a=e[4],o=e[5],s=t[0],u=t[1],c=e[6],l=e[7],f=Math.cos(i)*(s-c)/2+Math.sin(i)*(u-l)/2,d=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(u-l)/2,h=f*f/(n*n)+d*d/(r*r);h>1&&(n*=Math.sqrt(h),r*=Math.sqrt(h));var p=n*n*(d*d)+r*r*(f*f),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*d/r:0,y=n?v*-r*f/n:0,m=(s+c)/2+Math.cos(i)*g-Math.sin(i)*y,b=(u+l)/2+Math.sin(i)*g+Math.cos(i)*y,x=[(f-g)/n,(d-y)/r],w=[(-1*f-g)/n,(-1*d-y)/r],k=gz([1,0],x),E=gz(x,w);return vz(x,w)<=-1&&(E=Math.PI),vz(x,w)>=1&&(E=0),0===o&&E>0&&(E-=2*Math.PI),1===o&&E<0&&(E+=2*Math.PI),{cx:m,cy:b,rx:uz(t,[c,l])?0:n,ry:uz(t,[c,l])?0:r,startAngle:k,endAngle:k+E,xRotation:i,arcFlag:a,sweepFlag:o}}function mz(t,e,n,r){var i=(-1+Math.sqrt(2))/3*4,a=t*i,o=e*i,s=n-t,u=n+t,c=r-e,l=r+e;return[["M",s,r],["C",s,r-o,n-a,c,n,c],["C",n+a,c,u,r-o,u,r],["C",u,r+o,n+a,l,n,l],["C",n-a,l,s,r+o,s,r],["Z"]]}var bz=function(t){if(""===t||Array.isArray(t)&&0===t.length)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var e;try{e=Qe(t)}catch(n){e=Qe(""),console.error("[g]: Invalid SVG Path definition: ".concat(t))}!function(t){for(var e=0;e<t.length;e++){var n=t[e-1],r=t[e];if("M"===r[0]&&n){var i=n[0],a=[r[1],r[2]],o=void 0;"L"===i||"M"===i?o=[n[1],n[2]]:"C"!==i&&"A"!==i&&"Q"!==i||(o=[n[n.length-2],n[n.length-1]]),o&&uz(a,o)&&(t.splice(e,1),e--)}}}(e);var n=function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e}(e),r=function(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var a=t[i],o=a[0];"M"===o?(r.length&&(n.push(r),r=[]),r.push([a[1],a[2]])):"Z"===o?r.length&&(e.push(r),r=[]):r.push([a[1],a[2]])}return r.length>0&&n.push(r),{polygons:e,polylines:n}}(e),i=r.polygons,a=r.polylines,o=function(t){for(var e=[],n=null,r=null,i=null,a=0,o=t.length,s=0;s<o;s++){var u=t[s];r=t[s+1];var c=u[0],l={command:c,prePoint:n,params:u,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(c){case"M":i=[u[1],u[2]],a=s;break;case"A":var f=yz(n,u);l.arcParams=f}if("Z"===c)n=i,r=t[a+1];else{var d=u.length;n=[u[d-2],u[d-1]]}r&&"Z"===r[0]&&(r=t[a],e[a]&&(e[a].prePoint=n)),l.currentPoint=n,e[a]&&uz(n,e[a].currentPoint)&&(e[a].prePoint=l.prePoint);var h=r?[r[r.length-2],r[r.length-1]]:null;l.nextPoint=h;var p=l.prePoint;if(["L","H","V"].includes(c))l.startTangent=[p[0]-n[0],p[1]-n[1]],l.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===c){var v=[u[1],u[2]];l.startTangent=[p[0]-v[0],p[1]-v[1]],l.endTangent=[n[0]-v[0],n[1]-v[1]]}else if("T"===c){var g=e[s-1],y=lz(g.currentPoint,p);"Q"===g.command?(l.command="Q",l.startTangent=[p[0]-y[0],p[1]-y[1]],l.endTangent=[n[0]-y[0],n[1]-y[1]]):(l.command="TL",l.startTangent=[p[0]-n[0],p[1]-n[1]],l.endTangent=[n[0]-p[0],n[1]-p[1]])}else if("C"===c){var m=[u[1],u[2]],b=[u[3],u[4]];l.startTangent=[p[0]-m[0],p[1]-m[1]],l.endTangent=[n[0]-b[0],n[1]-b[1]],0===l.startTangent[0]&&0===l.startTangent[1]&&(l.startTangent=[m[0]-b[0],m[1]-b[1]]),0===l.endTangent[0]&&0===l.endTangent[1]&&(l.endTangent=[b[0]-m[0],b[1]-m[1]])}else if("S"===c){var x=e[s-1],w=lz(x.currentPoint,p),k=[u[1],u[2]];"C"===x.command?(l.command="C",l.startTangent=[p[0]-w[0],p[1]-w[1]],l.endTangent=[n[0]-k[0],n[1]-k[1]]):(l.command="SQ",l.startTangent=[p[0]-k[0],p[1]-k[1]],l.endTangent=[n[0]-k[0],n[1]-k[1]])}else if("A"===c){var E=hz(l,0),O=E.x,S=E.y,M=hz(l,1,!1),T=M.x,A=M.y;l.startTangent=[O,S],l.endTangent=[T,A]}e.push(l)}return e}(e),s=function(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var a=t[i],o=a.currentPoint,s=a.params,u=a.prePoint,c=void 0;switch(a.command){case"Q":c=ND(u[0],u[1],s[1],s[2],s[3],s[4]);break;case"C":c=MD(u[0],u[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var l=a.arcParams;c=xD(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:e.push(o[0]),n.push(o[1])}c&&(a.box=c,e.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height))}e=e.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0})),n=n.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0}));var f=dn(e),d=dn(n),h=hn(e),p=hn(n);if(0===r.length)return{x:f,y:d,width:h-f,height:p-d};for(var v=0;v<r.length;v++){var g=r[v],y=g.currentPoint;y[0]===f?f-=cz(g,0).xExtra:y[0]===h&&(h+=cz(g,0).xExtra),y[1]===d?d-=cz(g,0).yExtra:y[1]===p&&(p+=cz(g,0).yExtra)}return{x:f,y:d,width:h-f,height:p-d}}(o),u=s.x,c=s.y,l=s.width,f=s.height;return{absolutePath:e,hasArc:n,segments:o,polygons:i,polylines:a,totalLength:0,rect:{x:Number.isFinite(u)?u:0,y:Number.isFinite(c)?c:0,width:Number.isFinite(l)?l:0,height:Number.isFinite(f)?f:0}}},xz=rF(bz);function wz(t){return Te(t)?xz(t):bz(t)}function kz(t,e,n){var r=t.curve,i=e.curve;r&&0!==r.length||(r=wn(t.absolutePath,!1),t.curve=r),i&&0!==i.length||(i=wn(e.absolutePath,!1),e.curve=i);var a=[r,i];r.length!==i.length&&(a=En(r,i));var o=On(a[0])!==On(a[1])?Sn(a[0]):Mn(a[0]);return[o,Tn(a[1],o),function(t){return t}]}function Ez(t,e){return[t.points,e.points,function(t){return t}]}var Oz=null,Sz=/\s*(\w+)\(([^)]*)\)/g;function Mz(t){return function(e){var n=0;return t.map((function(t){return t===Oz?e[n++]:t}))}}function Tz(t){return t}var Az={matrix:["NNNNNN",[Oz,Oz,0,0,Oz,Oz,0,0,0,0,1,0,Oz,Oz,0,1],Tz],matrix3d:["NNNNNNNNNNNNNNNN",Tz],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Mz([Oz,Oz,new mF(1)]),Tz],scaleX:["N",Mz([Oz,new mF(1),new mF(1)]),Mz([Oz,new mF(1)])],scaleY:["N",Mz([new mF(1),Oz,new mF(1)]),Mz([new mF(1),Oz])],scaleZ:["N",Mz([new mF(1),new mF(1),Oz])],scale3d:["NNN",Tz],skew:["Aa",null,Tz],skewX:["A",null,Mz([Oz,xF])],skewY:["A",null,Mz([xF,Oz])],translate:["Tt",Mz([Oz,Oz,bF]),Tz],translateX:["T",Mz([Oz,bF,bF]),Mz([Oz,bF])],translateY:["T",Mz([bF,Oz,bF]),Mz([bF,Oz])],translateZ:["L",Mz([bF,bF,Oz])],translate3d:["TTL",Tz]};function Pz(t){for(var e=[],n=t.length,r=0;r<n;r++){var i=t[r],a=i[0],o=i.slice(1);if("translate"===a||"skew"===a?1===o.length&&o.push(0):"scale"===a&&1===o.length&&o.push(o[0]),!Az[a])return[];var s=o.map((function(t){return TF(t)}));e.push({t:a,d:s})}return e}function Nz(t){if(Array.isArray(t))return Pz(t);if("none"===(t=(t||"none").trim()))return[];var e,n=[],r=0;for(Sz.lastIndex=0;e=Sz.exec(t);){if(e.index!==r)return[];r=e.index+e[0].length;var i=e[1],a=Az[i];if(!a)return[];var o=e[2].split(","),s=a[0];if(s.length<o.length)return[];for(var u=[],c=0;c<s.length;c++){var l,f=o[c],d=s[c];if(l=f?{A:function(t){return"0"===t.trim()?xF:XF(t)},N:nz,T:UF,L:HF}[d.toUpperCase()](f):{a:xF,n:u[0],t:bF}[d],void 0===l)return[];u.push(l)}if(n.push({t:i,d:u}),Sz.lastIndex===t.length)return n}return[]}function Cz(t){if(Array.isArray(t))return Pz(t);if("none"===(t=(t||"none").trim()))return[];var e,n=[],r=0;for(Sz.lastIndex=0;e=Sz.exec(t);){if(e.index!==r)return[];r=e.index+e[0].length;var i=e[1],a=Az[i];if(!a)return[];var o=e[2].split(","),s=a[0];if(s.length<o.length)return[];for(var u=[],c=0;c<s.length;c++){var l,f=o[c],d=s[c];if(l=f?{A:function(t){return"0"===t.trim()?xF:qF(t)},N:ez,T:YF,L:VF}[d.toUpperCase()](f):{a:xF,n:u[0],t:bF}[d],void 0===l)return[];u.push(l)}if(n.push({t:i,d:u}),Sz.lastIndex===t.length)return n}return[]}function _z(t){var e,n,r,i;switch(t.t){case"rotateX":return i=nI($F(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return i=nI($F(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return i=nI($F(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=t.d[0].value,n=t.d[1].value,r=t.d[2].value,i=nI($F(t.d[3]));var a=e*e+n*n+r*r;if(0===a)e=1,n=0,r=0;else if(1!==a){var o=Math.sqrt(a);e/=o,n/=o,r/=o}var s=Math.sin(i/2),u=s*Math.cos(i/2),c=s*s;return[1-2*(n*n+r*r)*c,2*(e*n*c+r*u),2*(e*r*c-n*u),0,2*(e*n*c-r*u),1-2*(e*e+r*r)*c,2*(n*r*c+e*u),0,2*(e*r*c+n*u),2*(n*r*c-e*u),1-2*(e*e+n*n)*c,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":var l=nI($F(t.d[0])),f=nI($F(t.d[1]));return[1,Math.tan(f),0,0,Math.tan(l),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return i=nI($F(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return i=nI($F(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,e=QF(t.d[0],0,null)||0,n=QF(t.d[1],0,null)||0,0,1];case"translateX":return[1,0,0,0,0,1,0,0,0,0,1,0,e=QF(t.d[0],0,null)||0,0,0,1];case"translateY":return[1,0,0,0,0,1,0,0,0,0,1,0,0,n=QF(t.d[0],0,null)||0,0,1];case"translateZ":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r=QF(t.d[0],0,null)||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,e=QF(t.d[0],0,null)||0,n=QF(t.d[1],0,null)||0,r=QF(t.d[2],0,null)||0,1];case"perspective":var d=QF(t.d[0],0,null)||0;return[1,0,0,0,0,1,0,0,0,0,1,d?-1/d:0,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map((function(t){return t.value}))}}function Lz(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function Rz(t){var e=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return function(t,e,n,r,i,a){if(!function(t,e){var n=e[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0}(uI,t))return!1;if(lt(cI,uI),cI[3]=0,cI[7]=0,cI[11]=0,cI[15]=1,Math.abs(yt(cI))<1e-8)return!1;var o,s,u=uI[3],c=uI[7],l=uI[11],f=uI[12],d=uI[13],h=uI[14],p=uI[15];if(0!==u||0!==c||0!==l){if(lI[0]=u,lI[1]=c,lI[2]=l,lI[3]=p,!vt(cI,cI))return!1;pt(cI,cI),st(i,lI,cI)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=f,e[1]=d,e[2]=h,s=uI,(o=fI)[0][0]=s[0],o[0][1]=s[1],o[0][2]=s[2],o[1][0]=s[4],o[1][1]=s[5],o[1][2]=s[6],o[2][0]=s[8],o[2][1]=s[9],o[2][2]=s[10],n[0]=F(fI[0]),X(fI[0],fI[0]),r[0]=K(fI[0],fI[1]),hI(fI[1],fI[1],fI[0],1,-r[0]),n[1]=F(fI[1]),X(fI[1],fI[1]),r[0]/=n[1],r[1]=K(fI[0],fI[2]),hI(fI[2],fI[2],fI[0],1,-r[1]),r[2]=K(fI[1],fI[2]),hI(fI[2],fI[2],fI[1],1,-r[2]),n[2]=F(fI[2]),X(fI[2],fI[2]),r[1]/=n[2],r[2]/=n[2],$(dI,fI[1],fI[2]),K(fI[0],dI)<0)for(var v=0;v<3;v++)n[v]*=-1,fI[v][0]*=-1,fI[v][1]*=-1,fI[v][2]*=-1;a[0]=.5*Math.sqrt(Math.max(1+fI[0][0]-fI[1][1]-fI[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-fI[0][0]+fI[1][1]-fI[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-fI[0][0]-fI[1][1]+fI[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+fI[0][0]+fI[1][1]+fI[2][2],0)),fI[2][1]>fI[1][2]&&(a[0]=-a[0]),fI[0][2]>fI[2][0]&&(a[1]=-a[1]),fI[1][0]>fI[0][1]&&(a[2]=-a[2])}(function(t){return 0===t.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(_z).reduce(Lz)}(t),e,n,r,i,a),[[e,n,r,a,i]]}var jz=function(){function t(t,e){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var i=0;i<4;i++)for(var a=0;a<4;a++)n[r][i]+=e[r][a]*t[a][i];return n}return function(e,n,r,i,a){for(var o=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],s=0;s<4;s++)o[s][3]=a[s];for(var u=0;u<3;u++)for(var c=0;c<3;c++)o[3][u]+=e[c]*o[c][u];var l=i[0],f=i[1],d=i[2],h=i[3],p=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];p[0][0]=1-2*(f*f+d*d),p[0][1]=2*(l*f-d*h),p[0][2]=2*(l*d+f*h),p[1][0]=2*(l*f+d*h),p[1][1]=1-2*(l*l+d*d),p[1][2]=2*(f*d-l*h),p[2][0]=2*(l*d-f*h),p[2][1]=2*(f*d+l*h),p[2][2]=1-2*(l*l+f*f),o=t(o,p);var v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r[2]&&(v[2][1]=r[2],o=t(o,v)),r[1]&&(v[2][1]=0,v[2][0]=r[0],o=t(o,v)),r[0]&&(v[2][0]=0,v[1][0]=r[0],o=t(o,v));for(var g=0;g<3;g++)for(var y=0;y<3;y++)o[g][y]*=n[g];return function(t){return 0===t[0][2]&&0===t[0][3]&&0===t[1][2]&&0===t[1][3]&&0===t[2][0]&&0===t[2][1]&&1===t[2][2]&&0===t[2][3]&&0===t[3][2]&&1===t[3][3]}(o)?[o[0][0],o[0][1],o[1][0],o[1][1],o[3][0],o[3][1]]:o[0].concat(o[1],o[2],o[3])}}();function Dz(t){return t.toFixed(6).replace(".000000","")}function Iz(t,e){var n,r;return t.decompositionPair!==e&&(t.decompositionPair=e,n=Rz(t)),e.decompositionPair!==t&&(e.decompositionPair=t,r=Rz(e)),null===n[0]||null===r[0]?[[!1],[!0],function(n){return n?e[0].d:t[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(t){var e=function(t,e,n){var r=function(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}(t,e),i=[];if(1===(r=Ae(r,-1,1)))i=t;else for(var a=Math.acos(r),o=1*Math.sin(n*a)/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(t[s]*(Math.cos(n*a)-r*o)+e[s]*o);return i}(n[0][3],r[0][3],t[5]);return jz(t[0],t[1],t[2],e,t[4]).map(Dz).join(",")}])}function Fz(t){return t.replace(/[XY]/,"")}function zz(t){return t.replace(/(X|Y|Z|3d)?$/,"3d")}var Bz=function(t,e){return"perspective"===t&&"perspective"===e||("matrix"===t||"matrix3d"===t)&&("matrix"===e||"matrix3d"===e)};function Gz(t,e,n){var r=!1;if(!t.length||!e.length){t.length||(r=!0,t=e,e=[]);for(var i=function(){var n=t[a],r=n.t,i=n.d,o="scale"===r.substring(0,5)?1:0;e.push({t:r,d:i.map((function(t){return"number"==typeof t?TF(o):TF(o,t.unit)}))})},a=0;a<t.length;a++)i()}var o=[],s=[],u=[];if(t.length!==e.length){var c=Iz(t,e);o=[c[0]],s=[c[1]],u=[["matrix",[c[2]]]]}else for(var l=0;l<t.length;l++){var f=t[l].t,d=e[l].t,h=t[l].d,p=e[l].d,v=Az[f],g=Az[d],y=void 0;if(Bz(f,d)){var m=Iz([t[l]],[e[l]]);o.push(m[0]),s.push(m[1]),u.push(["matrix",[m[2]]])}else{if(f===d)y=f;else if(v[2]&&g[2]&&Fz(f)===Fz(d))y=Fz(f),h=v[2](h),p=g[2](p);else{if(!v[1]||!g[1]||zz(f)!==zz(d)){var b=Iz(t,e);o=[b[0]],s=[b[1]],u=[["matrix",[b[2]]]];break}y=zz(f),h=v[1](h),p=g[1](p)}for(var x=[],w=[],k=[],E=0;E<h.length;E++){var O=KF(h[E],p[E],n,!1,E);x[E]=O[0],w[E]=O[1],k.push(O[2])}o.push(x),s.push(w),u.push([y,k])}}if(r){var S=o;o=s,s=S}return[o,s,function(t){return t.map((function(t,e){var n=t.map((function(t,n){return u[e][1][n](t)})).join(",");return"matrix"===u[e][0]&&16===n.split(",").length&&(u[e][0]="matrix3d"),"matrix3d"===u[e][0]&&6===n.split(",").length&&(u[e][0]="matrix"),"".concat(u[e][0],"(").concat(n,")")})).join(" ")}]}var Wz=rF((function(t){if(Te(t)){if("text-anchor"===t)return[TF(0,"px"),TF(0,"px")];var e=t.split(" ");return 1===e.length&&("top"===e[0]||"bottom"===e[0]?(e[1]=e[0],e[0]="center"):e[1]="center"),2!==e.length?null:[UF(Vz(e[0])),UF(Vz(e[1]))]}return[TF(t[0]||0,"px"),TF(t[1]||0,"px")]}));function Vz(t){return"center"===t?"50%":"left"===t||"top"===t?"0%":"right"===t||"bottom"===t?"100%":t}var Hz=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:EI.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:EI.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:EI.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:EI.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:EI.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:EI.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:EI.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:EI.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:EI.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:EI.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:EI.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:EI.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:EI.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:EI.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:EI.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:EI.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:EI.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:EI.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:EI.FILTER},{n:"clipPath",syntax:EI.DEFINED_PATH},{n:"textPath",syntax:EI.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:EI.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:EI.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:EI.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:EI.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:EI.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:EI.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:EI.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:EI.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:EI.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:EI.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:EI.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:EI.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:EI.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:EI.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:EI.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:EI.COORDINATE},{n:"y1",int:!0,l:!0,syntax:EI.COORDINATE},{n:"z1",int:!0,l:!0,syntax:EI.COORDINATE},{n:"x2",int:!0,l:!0,syntax:EI.COORDINATE},{n:"y2",int:!0,l:!0,syntax:EI.COORDINATE},{n:"z2",int:!0,l:!0,syntax:EI.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:EI.PATH,p:50},{n:"points",int:!0,l:!0,syntax:EI.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:EI.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:EI.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:EI.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:EI.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:EI.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:EI.NUMBER,d:function(t){return t===RD.PATH||t===RD.POLYGON||t===RD.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:EI.MARKER},{n:"markerEnd",syntax:EI.MARKER},{n:"markerMid",syntax:EI.MARKER},{n:"markerStartOffset",syntax:EI.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:EI.LENGTH,l:!0,int:!0,d:"0"}],Yz=new Set(Hz.filter((function(t){return!!t.l})).map((function(t){return t.n}))),Uz={},qz=function(){return O((function t(e){var n=this;k(this,t),this.runtime=e,Hz.forEach((function(t){n.registerMetadata(t)}))}),[{key:"registerMetadata",value:function(t){[t.n].concat(M(t.a||[])).forEach((function(e){Uz[e]=t}))}},{key:"getPropertySyntax",value:function(t){return this.runtime.CSSPropertySyntaxFactory[t]}},{key:"processProperties",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(t.attributes,e);var r=t.parsedStyle.clipPath,i=t.parsedStyle.offsetPath;!function(t,e){var n=Xz(t);for(var r in e)n.has(r)&&(t.parsedStyle[r]=e[r])}(t,e);var a=!!n.forceUpdateGeometry;if(!a)for(var o in e)if(Yz.has(o)){a=!0;break}var s,u=Xz(t);u.has("fill")&&e.fill&&(t.parsedStyle.fill=BF(e.fill)),u.has("stroke")&&e.stroke&&(t.parsedStyle.stroke=BF(e.stroke)),u.has("shadowColor")&&e.shadowColor&&(t.parsedStyle.shadowColor=BF(e.shadowColor)),u.has("filter")&&e.filter&&(t.parsedStyle.filter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("none"===(t=t.toLowerCase().trim()))return[];for(var e,n=/\s*([\w-]+)\(([^)]*)\)/g,r=[],i=0;e=n.exec(t);){if(e.index!==i)return[];if(i=e.index+e[0].length,JF.indexOf(e[1])>-1&&r.push({name:e[1],params:e[2].split(" ").map((function(t){return WF(/deg|rad|grad|turn|px|%/g,t)||BF(t)}))}),n.lastIndex===t.length)return r}return[]}(e.filter)),u.has("radius")&&!Me(e.radius)&&(t.parsedStyle.radius=ZF(e.radius,4)),u.has("lineDash")&&!Me(e.lineDash)&&(t.parsedStyle.lineDash=ZF(e.lineDash,"even")),u.has("points")&&e.points&&(t.parsedStyle.points={points:Te(s=e.points)?s.split(" ").map((function(t){var e=g(t.split(","),2),n=e[0],r=e[1];return[Number(n),Number(r)]})):s,totalLength:0,segments:[]}),u.has("d")&&""===e.d&&(t.parsedStyle.d=w({},kI)),u.has("d")&&e.d&&(t.parsedStyle.d=wz(e.d)),u.has("textTransform")&&e.textTransform&&this.runtime.CSSPropertySyntaxFactory[EI.TEXT_TRANSFORM].calculator(null,null,{value:e.textTransform},t,null),u.has("clipPath")&&!An(e.clipPath)&&this.runtime.CSSPropertySyntaxFactory[EI.DEFINED_PATH].calculator("clipPath",r,e.clipPath,t,this.runtime),u.has("offsetPath")&&e.offsetPath&&this.runtime.CSSPropertySyntaxFactory[EI.DEFINED_PATH].calculator("offsetPath",i,e.offsetPath,t,this.runtime),u.has("transform")&&e.transform&&(t.parsedStyle.transform=Nz(e.transform)),u.has("transformOrigin")&&e.transformOrigin&&(t.parsedStyle.transformOrigin=Wz(e.transformOrigin)),u.has("markerStart")&&e.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[EI.MARKER].calculator(null,e.markerStart,e.markerStart,null,null)),u.has("markerEnd")&&e.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[EI.MARKER].calculator(null,e.markerEnd,e.markerEnd,null,null)),u.has("markerMid")&&e.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[EI.MARKER].calculator("",e.markerMid,e.markerMid,null,null)),u.has("zIndex")&&!Me(e.zIndex)&&this.runtime.CSSPropertySyntaxFactory[EI.Z_INDEX].postProcessor(t),u.has("offsetDistance")&&!Me(e.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[EI.OFFSET_DISTANCE].postProcessor(t),u.has("transform")&&e.transform&&this.runtime.CSSPropertySyntaxFactory[EI.TRANSFORM].postProcessor(t),u.has("transformOrigin")&&e.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[EI.TRANSFORM_ORIGIN].postProcessor(t),a&&(t.geometry.dirty=!0,t.renderable.boundsDirty=!0,t.renderable.renderBoundsDirty=!0,n.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(t))}},{key:"updateGeometry",value:function(t){var e=t.nodeName,n=this.runtime.geometryUpdaterFactory[e];if(n){var r=t.geometry;r.contentBounds||(r.contentBounds=new HD),r.renderBounds||(r.renderBounds=new HD);var i=t.parsedStyle,a=n.update(i,t),o=a.cx,s=void 0===o?0:o,u=a.cy,c=void 0===u?0:u,l=a.cz,f=void 0===l?0:l,d=a.hwidth,h=void 0===d?0:d,p=a.hheight,v=void 0===p?0:p,g=a.hdepth,y=void 0===g?0:g,m=[Math.abs(h),Math.abs(v),y],b=i.stroke,x=i.lineWidth,w=void 0===x?1:x,k=i.increasedLineWidthForHitTesting,E=void 0===k?0:k,O=i.shadowType,S=void 0===O?"outer":O,M=i.shadowColor,T=i.filter,A=void 0===T?[]:T,P=i.transformOrigin,N=[s,c,f];r.contentBounds.update(N,m);var C=e===RD.POLYLINE||e===RD.POLYGON||e===RD.PATH?Math.SQRT2:.5;if(b&&!b.isNone){var _=((w||0)+(E||0))*C;m[0]+=_,m[1]+=_}if(r.renderBounds.update(N,m),M&&S&&"inner"!==S){var L=r.renderBounds,R=L.min,j=L.max,D=i.shadowBlur||0,I=i.shadowOffsetX||0,F=i.shadowOffsetY||0,z=R[0]-D+I,B=j[0]+D+I,G=R[1]-D+F,V=j[1]+D+F;R[0]=Math.min(R[0],z),j[0]=Math.max(j[0],B),R[1]=Math.min(R[1],G),j[1]=Math.max(j[1],V),r.renderBounds.setMinMax(R,j)}A.forEach((function(t){var e=t.name,n=t.params;if("blur"===e){var i=n[0].value;r.renderBounds.update(r.renderBounds.center,W(r.renderBounds.halfExtents,r.renderBounds.halfExtents,[i,i,0]))}else if("drop-shadow"===e){var a=n[0].value,o=n[1].value,s=n[2].value,u=r.renderBounds,c=u.min,l=u.max,f=c[0]-s+a,d=l[0]+s+a,h=c[1]-s+o,p=l[1]+s+o;c[0]=Math.min(c[0],f),l[0]=Math.max(l[0],d),c[1]=Math.min(c[1],h),l[1]=Math.max(l[1],p),r.renderBounds.setMinMax(c,l)}})),t.geometry.dirty=!1;var H=v<0,Y=(h<0?-1:1)*(P?QF(P[0],0,t,!0):0),U=(H?-1:1)*(P?QF(P[1],1,t,!0):0);(Y||U)&&t.setOrigin(Y,U)}}},{key:"updateSizeAttenuation",value:function(t,e){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=(t.style.rawLineWidth||1)/e,t.nodeName===RD.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=(t.style.rawR||1)/e)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===RD.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))}}])}();function Xz(t){return t.constructor.PARSED_STYLE_LIST}var Kz=function(){return O((function t(){k(this,t),this.mixer=rz}),[{key:"calculator",value:function(t,e,n,r){return $F(n)}}])}(),$z=function(){return O((function t(){k(this,t)}),[{key:"calculator",value:function(t,e,n,r,i){return n instanceof gF&&(n=null),i.sceneGraphService.updateDisplayObjectDependency(t,e,n,r),"clipPath"===t&&r.forEach((function(t){0===t.childNodes.length&&i.sceneGraphService.dirtifyToRoot(t)})),n}}])}(),Zz=function(){return O((function t(){k(this,t),this.parser=BF,this.mixer=GF}),[{key:"calculator",value:function(t,e,n,r){return n instanceof gF?"none"===n.value?OF:SF:n}}])}(),Qz=function(){return O((function t(){k(this,t)}),[{key:"calculator",value:function(t,e,n){return n instanceof gF?[]:n}}])}();function Jz(t){var e=t.parsedStyle.fontSize;return Me(e)?null:e}var tB=function(){return O((function t(){k(this,t),this.mixer=rz}),[{key:"calculator",value:function(t,e,n,r,i){if(Oe(n))return n;if(!mF.isRelativeUnit(n.unit))return n.value;if(n.unit===iF.kPercentage)return 0;if(n.unit===iF.kEms){if(r.parentNode){var a=Jz(r.parentNode);if(a)return a*n.value}return 0}if(n.unit===iF.kRems){var o;if(null!=r&&null!==(o=r.ownerDocument)&&void 0!==o&&o.documentElement){var s=Jz(r.ownerDocument.documentElement);if(s)return s*n.value}return 0}}}])}(),eB=function(){return O((function t(){k(this,t),this.mixer=az}),[{key:"calculator",value:function(t,e,n){return n.map((function(t){return t.value}))}}])}(),nB=function(){return O((function t(){k(this,t),this.mixer=az}),[{key:"calculator",value:function(t,e,n){return n.map((function(t){return t.value}))}}])}(),rB=function(){return O((function t(){k(this,t)}),[{key:"calculator",value:function(t,e,n,r){var i;n instanceof gF&&(n=null);var a=null===(i=n)||void 0===i?void 0:i.cloneNode(!0);return a&&(a.style.isMarker=!0),a}}])}(),iB=function(){return O((function t(){k(this,t),this.mixer=rz}),[{key:"calculator",value:function(t,e,n){return n.value}}])}(),aB=function(){return O((function t(){k(this,t),this.mixer=iz(0,1)}),[{key:"calculator",value:function(t,e,n){return n.value}},{key:"postProcessor",value:function(t){var e=t.parsedStyle,n=e.offsetPath,r=e.offsetDistance;if(n){var i=n.nodeName;if(i===RD.LINE||i===RD.PATH||i===RD.POLYLINE){var a=n.getPoint(r);a&&t.setLocalPosition(a.x,a.y)}}}}])}(),oB=function(){return O((function t(){k(this,t),this.mixer=iz(0,1)}),[{key:"calculator",value:function(t,e,n){return n.value}}])}(),sB=function(){return O((function t(){k(this,t),this.parser=wz,this.mixer=kz}),[{key:"calculator",value:function(t,e,n){return n instanceof gF&&"unset"===n.value?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new KD(0,0,0,0)}:n}}])}(),uB=O((function t(){k(this,t),this.mixer=Ez})),cB=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).mixer=iz(0,1/0),t}return _(e,t),O(e)}(tB),lB=function(){return O((function t(){k(this,t)}),[{key:"calculator",value:function(t,e,n,r){return n instanceof gF?"unset"===n.value?"":n.value:"".concat(n)}},{key:"postProcessor",value:function(t){t.nodeValue="".concat(t.parsedStyle.text)||""}}])}(),fB=function(){return O((function t(){k(this,t)}),[{key:"calculator",value:function(t,e,n,r){var i=r.getAttribute("text");if(i){var a=i;"capitalize"===n.value?a=i.charAt(0).toUpperCase()+i.slice(1):"lowercase"===n.value?a=i.toLowerCase():"uppercase"===n.value&&(a=i.toUpperCase()),r.parsedStyle.text=a}return n.value}}])}(),dB=new WeakMap,hB="undefined"!=typeof window&&void 0!==window.document;function pB(t){return!!t.getAttribute}function vB(t,e){var n=Number(t.parsedStyle.zIndex||0),r=Number(e.parsedStyle.zIndex||0);if(n===r){var i=t.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(t)-a.indexOf(e)}}return n-r}function gB(t){var e=t;do{var n;if(null===(n=e.parsedStyle)||void 0===n?void 0:n.clipPath)return e;e=e.parentElement}while(null!==e);return null}function yB(t,e){if(hB)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}var mB={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},bB="object"==typeof performance&&performance.now?performance:Date;function xB(t){return t.nodeName===RD.FRAGMENT||t.getRootNode().nodeName===RD.FRAGMENT}function wB(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=!1,i=!1,a=!!e&&!e.isNone,o=!!n&&!n.isNone;return"visiblepainted"===t||"painted"===t||"auto"===t?(r=a,i=o):"visiblefill"===t||"fill"===t?r=!0:"visiblestroke"===t||"stroke"===t?i=!0:"visible"!==t&&"all"!==t||(r=!0,i=!0),[r,i]}var kB=1,EB="object"==typeof self&&self.self===self?self:"object"==typeof s.g&&s.g.global===s.g?s.g:{},OB=Date.now(),SB={},MB=Date.now(),TB=function(t){if("function"!=typeof t)throw new TypeError("".concat(t," is not a function"));var e=Date.now(),n=e-MB,r=n>16?0:16-n,i=kB++;return SB[i]=t,Object.keys(SB).length>1||setTimeout((function(){MB=e;var t=SB;SB={},Object.keys(t).forEach((function(e){return t[e](EB.performance&&"function"==typeof EB.performance.now?EB.performance.now():Date.now()-OB)}))}),r),i},AB=function(t){delete SB[t]},PB=function(t){return"string"!=typeof t?TB:""===t?EB.requestAnimationFrame:EB["".concat(t,"RequestAnimationFrame")]},NB=function(t,e){for(var n=0;void 0!==t[n];){if(e(t[n]))return t[n];n+=1}}(["","webkit","moz","ms","o"],(function(t){return!!PB(t)})),CB=PB(NB),_B=function(t){return"string"!=typeof t?AB:""===t?EB.cancelAnimationFrame:EB["".concat(t,"CancelAnimationFrame")]||EB["".concat(t,"CancelRequestAnimationFrame")]}(NB);EB.requestAnimationFrame=CB,EB.cancelAnimationFrame=_B;var LB=function(){return O((function t(){k(this,t),this.callbacks=[]}),[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(t,e){this.callbacks.push(e)}},{key:"promise",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Promise.all(this.callbacks.map((function(t){return t.apply(void 0,e)})))}}])}(),RB=function(){return O((function t(){k(this,t),this.callbacks=[]}),[{key:"tapPromise",value:function(t,e){this.callbacks.push(e)}},{key:"promise",value:(t=er(Jn().mark((function t(){var e,n,r,i,a=arguments;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callbacks.length){t.next=14;break}return t.next=3,(e=this.callbacks)[0].apply(e,a);case 3:n=t.sent,r=0;case 5:if(!(r<this.callbacks.length-1)){t.next=13;break}return i=this.callbacks[r],t.next=9,i(n);case 9:n=t.sent;case 10:r++,t.next=5;break;case 13:return t.abrupt("return",n);case 14:return t.abrupt("return",null);case 15:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t}(),jB=function(){return O((function t(){k(this,t),this.callbacks=[]}),[{key:"tap",value:function(t,e){this.callbacks.push(e)}},{key:"call",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=arguments;this.callbacks.forEach((function(t){t.apply(void 0,r)}))}}])}(),DB=function(){return O((function t(){k(this,t),this.callbacks=[]}),[{key:"tap",value:function(t,e){this.callbacks.push(e)}},{key:"call",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this.callbacks.length){for(var r=arguments,i=this.callbacks[0].apply(void 0,r),a=0;a<this.callbacks.length-1;a++)i=(0,this.callbacks[a])(i);return i}return null}}])}(),IB=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],FB=/([\"\'])[^\'\"]+\1/;function zB(t,e,n){return ht(t),t[4]=Math.tan(e),t[1]=Math.tan(n),t}var BB=ut(),GB=ut(),WB={scale:function(t){Mt(BB,[t[0].value,t[1].value,1])},scaleX:function(t){Mt(BB,[t[0].value,1,1])},scaleY:function(t){Mt(BB,[1,t[0].value,1])},scaleZ:function(t){Mt(BB,[1,1,t[0].value])},scale3d:function(t){Mt(BB,[t[0].value,t[1].value,t[2].value])},translate:function(t){St(BB,[t[0].value,t[1].value,0])},translateX:function(t){St(BB,[t[0].value,0,0])},translateY:function(t){St(BB,[0,t[0].value,0])},translateZ:function(t){St(BB,[0,0,t[0].value])},translate3d:function(t){St(BB,[t[0].value,t[1].value,t[2].value])},rotate:function(t){Nt(BB,nI($F(t[0])))},rotateX:function(t){At(BB,nI($F(t[0])))},rotateY:function(t){Pt(BB,nI($F(t[0])))},rotateZ:function(t){Nt(BB,nI($F(t[0])))},rotate3d:function(t){Tt(BB,nI($F(t[3])),[t[0].value,t[1].value,t[2].value])},skew:function(t){zB(BB,nI(t[0].value),nI(t[1].value))},skewX:function(t){zB(BB,nI(t[0].value),0)},skewY:function(t){zB(BB,0,nI(t[0].value))},matrix:function(t){dt(BB,t[0].value,t[1].value,0,0,t[2].value,t[3].value,0,0,0,0,1,0,t[4].value,t[5].value,0,1)},matrix3d:function(e){dt.apply(t,[BB].concat(M(e.map((function(t){return t.value})))))}},VB=z(1,1,1),HB=D(),YB={translate:function(t,e){qG.sceneGraphService.setLocalScale(t,VB,!1),qG.sceneGraphService.setLocalEulerAngles(t,HB,void 0,void 0,!1),qG.sceneGraphService.setLocalPosition(t,[e[0].value,e[1].value,0],!1),qG.sceneGraphService.dirtifyLocal(t,t.transformable)}};function UB(t,e){if(t.length){if(1===t.length&&YB[t[0].t])return void YB[t[0].t](e,t[0].d);for(var n=ht(GB),r=0;r<t.length;r++){var i=t[r],a=i.t,o=i.d,s=WB[a];s&&(s(o),re(n,n,BB))}e.setLocalTransform(n)}else e.resetLocalTransform();return e.getLocalTransform()}var qB=function(){return O((function t(){k(this,t),this.parser=Cz,this.mixer=Gz}),[{key:"calculator",value:function(t,e,n,r){return n instanceof gF?[]:n}},{key:"postProcessor",value:function(t){UB(t.parsedStyle.transform,t)}}])}(),XB=function(){return O((function t(){k(this,t)}),[{key:"postProcessor",value:function(t){var e=t.parsedStyle.transformOrigin;e[0].unit===iF.kPixels&&e[1].unit===iF.kPixels?t.setOrigin(e[0].value,e[1].value):t.getGeometryBounds()}}])}(),KB=function(){return O((function t(){k(this,t)}),[{key:"calculator",value:function(t,e,n,r){return n.value}},{key:"postProcessor",value:function(t){if(t.parentNode){var e=t.parentNode,n=e.renderable,r=e.sortable;n&&(n.dirty=!0),r&&(r.dirty=!0,r.dirtyReason=wI.Z_INDEX_CHANGED)}}}])}(),$B=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t,e){var n=t.cx,r=void 0===n?0:n,i=t.cy,a=void 0===i?0:i,o=t.r,s=void 0===o?0:o;return{cx:r,cy:a,hwidth:s,hheight:s}}}])}(),ZB=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t,e){var n=t.cx,r=void 0===n?0:n,i=t.cy,a=void 0===i?0:i,o=t.rx,s=void 0===o?0:o,u=t.ry;return{cx:r,cy:a,hwidth:s,hheight:void 0===u?0:u}}}])}(),QB=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t){var e=t.x1,n=t.y1,r=t.x2,i=t.y2,a=Math.min(e,r),o=Math.max(e,r),s=Math.min(n,i),u=(o-a)/2,c=(Math.max(n,i)-s)/2;return{cx:a+u,cy:s+c,hwidth:u,hheight:c}}}])}(),JB=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t){var e=t.d.rect,n=e.x,r=e.y,i=e.width/2,a=e.height/2;return{cx:n+i,cy:r+a,hwidth:i,hheight:a}}}])}(),tG=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t){if(t.points&&fn(t.points.points)){var e=t.points.points,n=Math.min.apply(Math,M(e.map((function(t){return t[0]})))),r=Math.max.apply(Math,M(e.map((function(t){return t[0]})))),i=Math.min.apply(Math,M(e.map((function(t){return t[1]})))),a=Math.max.apply(Math,M(e.map((function(t){return t[1]})))),o=(r-n)/2,s=(a-i)/2;return{cx:n+o,cy:i+s,hwidth:o,hheight:s}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),eG=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t,e){var n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i,o=t.src,s=t.width,u=void 0===s?0:s,c=t.height,l=u,f=void 0===c?0:c;return o&&!Te(o)&&(l||(l=o.width,t.width=l),f||(f=o.height,t.height=f)),{cx:r+l/2,cy:a+f/2,hwidth:l/2,hheight:f/2}}}])}(),nG=function(){return O((function t(e){k(this,t),this.globalRuntime=e}),[{key:"isReadyToMeasure",value:function(t,e){return t.text}},{key:"update",value:function(t,e){var n,r=t.text,i=t.textAlign,a=void 0===i?"start":i,o=t.lineWidth,s=void 0===o?1:o,u=t.textBaseline,c=void 0===u?"alphabetic":u,l=t.dx,f=void 0===l?0:l,d=t.dy,h=void 0===d?0:d,p=t.x,v=void 0===p?0:p,g=t.y,y=void 0===g?0:g;if(!this.isReadyToMeasure(t,e))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var m=((null==e||null===(n=e.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n?void 0:n.getConfig())||{}).offscreenCanvas,b=this.globalRuntime.textService.measureText(r,t,m);t.metrics=b;var x=b.width/2,w=b.height/2,k=v+x;"center"===a||"middle"===a?k+=s/2-x:"right"!==a&&"end"!==a||(k+=s-2*x);var E=y-w;return"middle"===c?E+=w:"top"===c||"hanging"===c?E+=2*w:"alphabetic"===c||"bottom"!==c&&"ideographic"!==c||(E+=0),f&&(k+=f),h&&(E+=h),{cx:k,cy:E,hwidth:x,hheight:w}}}])}(),rG=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t,e){return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),iG=function(){return O((function t(){k(this,t)}),[{key:"update",value:function(t,e){var n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i,o=t.width,s=void 0===o?0:o,u=t.height,c=void 0===u?0:u;return{cx:r+s/2,cy:a+c/2,hwidth:s/2,hheight:c/2}}}])}(),aG=function(){return O((function t(e){k(this,t),this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new XD,this.page=new XD,this.canvas=new XD,this.viewport=new XD,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}),[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return!this.manager||this.path&&this.path[0]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error($D)}}])}(),oG=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).client=new XD,t.movement=new XD,t.offset=new XD,t.global=new XD,t.screen=new XD,t}return _(e,t),O(e,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}},{key:"initMouseEvent",value:function(){throw new Error($D)}}])}(aG),sG=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).width=0,t.height=0,t.isPrimary=!1,t}return _(e,t),O(e,[{key:"getCoalescedEvents",value:function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])}(oG),uG=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])}(oG),cG=function(t){function e(t,n){var r;return k(this,e),(r=N(this,e,[null])).type=t,r.detail=n,Object.assign(r,n),r}return _(e,t),O(e)}(aG),lG=new WeakMap,fG=function(){return O((function t(){k(this,t),this.emitter=new L}),[{key:"on",value:function(t,e,n){return this.addEventListener(t,e,n),this}},{key:"addEventListener",value:function(t,e,n){var r=!1,i=!1;if(Cn(n))r=n;else if(n){var a=n.capture;r=void 0!==a&&a;var o=n.once;i=void 0!==o&&o}r&&(t+="capture"),e=_n(e)?e:e.handleEvent;var s=_n(e)?void 0:e;return i?this.emitter.once(t,e,s):this.emitter.on(t,e,s),this}},{key:"off",value:function(t,e,n){return t?this.removeEventListener(t,e,n):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var t;null===(t=this.emitter)||void 0===t||t.removeAllListeners()}},{key:"removeEventListener",value:function(t,e,n){var r;if(!this.emitter)return this;(Cn(n)?n:null==n?void 0:n.capture)&&(t+="capture"),e=_n(e)?e:null===(r=e)||void 0===r?void 0:r.handleEvent;var i=_n(e)?void 0:e;return this.emitter.off(t,e,i),this}},{key:"emit",value:function(t,e){this.dispatchEvent(new cG(t,e))}},{key:"dispatchEvent",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=lG.get(this);if(r||(r=this.document?this:this.defaultView?this.defaultView:null===(e=this.ownerDocument)||void 0===e?void 0:e.defaultView)&&lG.set(this,r),r){if(t.manager=r.getEventService(),!t.manager)return!1;t.defaultPrevented=!1,t.path?t.path.length=0:t.page=[],n||(t.target=this),t.manager.dispatchEvent(t,t.type,n)}else this.emitter.emit(t.type,t);return!t.defaultPrevented}}])}(),dG=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).shadow=!1,t.ownerDocument=null,t.isConnected=!1,t.baseURI="",t.childNodes=[],t.nodeType=0,t.nodeName="",t.nodeValue=null,t.parentNode=null,t}return _(e,t),O(e,[{key:"textContent",get:function(){var t="";this.nodeName===RD.TEXT&&(t+=this.style.text);var e,n=nr(this.childNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.nodeName===RD.TEXT?t+=r.nodeValue:t+=r.textContent}}catch(t){n.e(t)}finally{n.f()}return t},set:function(t){var e=this;this.childNodes.slice().forEach((function(t){e.removeChild(t)})),this.nodeName===RD.TEXT&&(this.style.text="".concat(t))}},{key:"getRootNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(t):t.composed&&this.host?this.host.getRootNode(t):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(t){throw new Error($D)}},{key:"lookupNamespaceURI",value:function(t){throw new Error($D)}},{key:"lookupPrefix",value:function(t){throw new Error($D)}},{key:"normalize",value:function(){throw new Error($D)}},{key:"isEqualNode",value:function(t){return this===t}},{key:"isSameNode",value:function(t){return this.isEqualNode(t)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(t){if(t===this)return 0;for(var n=t,r=this,i=[n],a=[r];null!==(o=n.parentNode)&&void 0!==o?o:r.parentNode;){var o;n=n.parentNode?(i.push(n.parentNode),n.parentNode):n,r=r.parentNode?(a.push(r.parentNode),r.parentNode):r}if(n!==r)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var s=i.length>a.length?i:a,u=s===i?a:i;if(s[s.length-u.length]===u[0])return s===i?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var c=s.length-u.length,l=u.length-1;l>=0;l--){var f=u[l],d=s[c+l];if(d!==f){var h=f.parentNode.childNodes;return h.indexOf(f)<h.indexOf(d)?u===i?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:s===i?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(t){return this.contains(t)}},{key:"contains",value:function(t){for(var e=t;e&&this!==e;)e=e.parentNode;return!!e}},{key:"getAncestor",value:function(t){for(var e=this;t>0&&e;)e=e.parentNode,t--;return e}},{key:"forEach",value:function(t){for(var e=[this];e.length>0;){var n=e.pop();if(!1===t(n))break;for(var r=n.childNodes.length-1;r>=0;r--)e.push(n.childNodes[r])}}}],[{key:"isNode",value:function(t){return!!t.childNodes}}])}(fG);dG.DOCUMENT_POSITION_DISCONNECTED=1,dG.DOCUMENT_POSITION_PRECEDING=2,dG.DOCUMENT_POSITION_FOLLOWING=4,dG.DOCUMENT_POSITION_CONTAINS=8,dG.DOCUMENT_POSITION_CONTAINED_BY=16,dG.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var hG=function(){return O((function t(e,n){var r=this;k(this,t),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=ut(),this.tmpVec3=D(),this.onPointerDown=function(t){var e=r.createPointerEvent(t);if(r.dispatchEvent(e,"pointerdown"),"touch"===e.pointerType)r.dispatchEvent(e,"touchstart");else if("mouse"===e.pointerType||"pen"===e.pointerType){var n=2===e.button;r.dispatchEvent(e,n?"rightdown":"mousedown")}r.trackingData(t.pointerId).pressTargetsByButton[t.button]=e.composedPath(),r.freeEvent(e)},this.onPointerUp=function(t){var e=bB.now(),n=r.createPointerEvent(t,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)r.dispatchEvent(n,"touchend");else if("mouse"===n.pointerType||"pen"===n.pointerType){var i=2===n.button;r.dispatchEvent(n,i?"rightup":"mouseup")}var a=r.trackingData(t.pointerId),o=r.findMountedTarget(a.pressTargetsByButton[t.button]),s=o;if(o&&!n.composedPath().includes(o)){for(var u=o;u&&!n.composedPath().includes(u);){if(n.currentTarget=u,r.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)r.notifyTarget(n,"touchendoutside");else if("mouse"===n.pointerType||"pen"===n.pointerType){var c=2===n.button;r.notifyTarget(n,c?"rightupoutside":"mouseupoutside")}dG.isNode(u)&&(u=u.parentNode)}delete a.pressTargetsByButton[t.button],s=u}if(s){var l,f=r.clonePointerEvent(n,"click");f.target=s,f.path=[],a.clicksByButton[t.button]||(a.clicksByButton[t.button]={clickCount:0,target:f.target,timeStamp:e});var d=r.context.renderingContext.root.ownerDocument.defaultView,h=a.clicksByButton[t.button];h.target===f.target&&e-h.timeStamp<d.getConfig().dblClickSpeed?++h.clickCount:h.clickCount=1,h.target=f.target,h.timeStamp=e,f.detail=h.clickCount,null!==(l=n.detail)&&void 0!==l&&l.preventClick||(r.context.config.useNativeClickEvent||"mouse"!==f.pointerType&&"touch"!==f.pointerType||r.dispatchEvent(f,"click"),r.dispatchEvent(f,"pointertap")),r.freeEvent(f)}r.freeEvent(n)},this.onPointerMove=function(t){var e=r.createPointerEvent(t,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),n="mouse"===e.pointerType||"pen"===e.pointerType,i=r.trackingData(t.pointerId),a=r.findMountedTarget(i.overTargets);if(i.overTargets&&a!==e.target){var o="mousemove"===t.type?"mouseout":"pointerout",s=r.createPointerEvent(t,o,a||void 0);if(r.dispatchEvent(s,"pointerout"),n&&r.dispatchEvent(s,"mouseout"),!e.composedPath().includes(a)){var u=r.createPointerEvent(t,"pointerleave",a||void 0);for(u.eventPhase=u.AT_TARGET;u.target&&!e.composedPath().includes(u.target);)u.currentTarget=u.target,r.notifyTarget(u),n&&r.notifyTarget(u,"mouseleave"),dG.isNode(u.target)&&(u.target=u.target.parentNode);r.freeEvent(u)}r.freeEvent(s)}if(a!==e.target){var c="mousemove"===t.type?"mouseover":"pointerover",l=r.clonePointerEvent(e,c);r.dispatchEvent(l,"pointerover"),n&&r.dispatchEvent(l,"mouseover");for(var f=a&&dG.isNode(a)&&a.parentNode;f&&f!==(dG.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&f!==e.target;)f=f.parentNode;if(!f||f===(dG.isNode(r.rootTarget)&&r.rootTarget.parentNode)){var d=r.clonePointerEvent(e,"pointerenter");for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==a&&d.target!==(dG.isNode(r.rootTarget)&&r.rootTarget.parentNode);)d.currentTarget=d.target,r.notifyTarget(d),n&&r.notifyTarget(d,"mouseenter"),dG.isNode(d.target)&&(d.target=d.target.parentNode);r.freeEvent(d)}r.freeEvent(l)}r.dispatchEvent(e,"pointermove"),"touch"===e.pointerType&&r.dispatchEvent(e,"touchmove"),n&&(r.dispatchEvent(e,"mousemove"),r.cursor=r.getCursor(e.target)),i.overTargets=e.composedPath(),r.freeEvent(e)},this.onPointerOut=function(t){var e=r.trackingData(t.pointerId);if(e.overTargets){var n="mouse"===t.pointerType||"pen"===t.pointerType,i=r.findMountedTarget(e.overTargets),a=r.createPointerEvent(t,"pointerout",i||void 0);r.dispatchEvent(a),n&&r.dispatchEvent(a,"mouseout");var o=r.createPointerEvent(t,"pointerleave",i||void 0);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==(dG.isNode(r.rootTarget)&&r.rootTarget.parentNode);)o.currentTarget=o.target,r.notifyTarget(o),n&&r.notifyTarget(o,"mouseleave"),dG.isNode(o.target)&&(o.target=o.target.parentNode);e.overTargets=null,r.freeEvent(a),r.freeEvent(o)}r.cursor=null},this.onPointerOver=function(t){var e=r.trackingData(t.pointerId),n=r.createPointerEvent(t),i="mouse"===n.pointerType||"pen"===n.pointerType;r.dispatchEvent(n,"pointerover"),i&&r.dispatchEvent(n,"mouseover"),"mouse"===n.pointerType&&(r.cursor=r.getCursor(n.target));var a=r.clonePointerEvent(n,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==(dG.isNode(r.rootTarget)&&r.rootTarget.parentNode);)a.currentTarget=a.target,r.notifyTarget(a),i&&r.notifyTarget(a,"mouseenter"),dG.isNode(a.target)&&(a.target=a.target.parentNode);e.overTargets=n.composedPath(),r.freeEvent(n),r.freeEvent(a)},this.onPointerUpOutside=function(t){var e=r.trackingData(t.pointerId),n=r.findMountedTarget(e.pressTargetsByButton[t.button]),i=r.createPointerEvent(t);if(n){for(var a=n;a;)i.currentTarget=a,r.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType||"mouse"!==i.pointerType&&"pen"!==i.pointerType||r.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),dG.isNode(a)&&(a=a.parentNode);delete e.pressTargetsByButton[t.button]}r.freeEvent(i)},this.onWheel=function(t){var e=r.createWheelEvent(t);r.dispatchEvent(e),r.freeEvent(e)},this.onClick=function(t){if(r.context.config.useNativeClickEvent){var e=r.createPointerEvent(t);r.dispatchEvent(e),r.freeEvent(e)}},this.onPointerCancel=function(t){var e=r.createPointerEvent(t,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(e),r.freeEvent(e)},this.globalRuntime=e,this.context=n}),[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var t=this.context.contextService.getBoundingClientRect(),e=1,n=1,r=this.context.contextService.getDomElement();if(r&&t){var i=r.offsetWidth,a=r.offsetHeight;i&&a&&(e=t.width/i,n=t.height/a)}return{scaleX:e,scaleY:n,bbox:t}}},{key:"client2Viewport",value:function(t){var e=this.getScale(),n=e.scaleX,r=e.scaleY,i=e.bbox;return new XD((t.x-((null==i?void 0:i.left)||0))/n,(t.y-((null==i?void 0:i.top)||0))/r)}},{key:"viewport2Client",value:function(t){var e=this.getScale(),n=e.scaleX,r=e.scaleY,i=e.bbox;return new XD((t.x+((null==i?void 0:i.left)||0))*n,(t.y+((null==i?void 0:i.top)||0))*r)}},{key:"viewport2Canvas",value:function(t){var e=t.x,n=t.y,r=this.rootTarget.defaultView.getCamera(),i=this.context.config,a=i.width,o=i.height,s=r.getPerspectiveInverse(),u=r.getWorldTransform(),c=mt(this.tmpMatrix,u,s),l=G(this.tmpVec3,e/a*2-1,2*(1-n/o)-1,0);return Q(l,l,c),new XD(l[0],l[1])}},{key:"canvas2Viewport",value:function(t){var e=this.rootTarget.defaultView.getCamera(),n=e.getPerspective(),r=e.getViewTransform(),i=mt(this.tmpMatrix,n,r),a=G(this.tmpVec3,t.x,t.y,0);Q(this.tmpVec3,this.tmpVec3,i);var o=this.context.config,s=o.width,u=o.height;return new XD((a[0]+1)/2*s,(1-(a[1]+1)/2)*u)}},{key:"setPickHandler",value:function(t){this.pickHandler=t}},{key:"addEventMapping",value:function(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((function(t,e){return t.priority-e.priority}))}},{key:"mapEvent",value:function(t){if(this.rootTarget){var e=this.mappingTable[t.type];if(e)for(var n=0,r=e.length;n<r;n++)e[n].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}}},{key:"dispatchEvent",value:function(t,e,n){if(n){t.eventPhase=t.AT_TARGET;var r=this.rootTarget.defaultView||null;t.currentTarget=r,this.notifyListeners(t,e)}else t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e)}},{key:"propagate",value:function(t,e){if(t.target){var n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var r=n.length-1;r>=1;r--)if(t.currentTarget=n[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){var i=n.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var a=i+1;a<n.length;a++)if(t.currentTarget=n[a],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(t){var e=[t],n=this.rootTarget.defaultView||null;if(n&&n===t)return e.unshift(n.document),e;for(var r=0;r<2048&&t!==this.rootTarget;r++)dG.isNode(t)&&t.parentNode&&(e.push(t.parentNode),t=t.parentNode);return n&&e.push(n),e}},{key:"hitTest",value:function(t){var e=t.viewportX,n=t.viewportY,r=this.context.config,i=r.width,a=r.height,o=r.disableHitTesting;return e<0||n<0||e>i||n>a?null:!o&&this.pickHandler(t)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(t,e){var n,r=null==e?void 0:e.target;if(null!==(n=r)&&void 0!==n&&n.shadowRoot&&(r=e.composedPath()[0]),r){if(r===t)return!0;if(t&&t.contains)return t.contains(r)}return!(null==e||!e.composedPath)&&e.composedPath().indexOf(t)>-1}},{key:"getExistedHTML",value:function(t){if(t.nativeEvent.composedPath)for(var e=0,n=t.nativeEvent.composedPath();e<n.length;e++){var r=n[e],i=this.nativeHTMLMap.get(r);if(i)return i}return null}},{key:"pickTarget",value:function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})}},{key:"createPointerEvent",value:function(t,e,n,r){var i=this.allocateEvent(sG);this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t;var a=this.getExistedHTML(i),o=this.context.contextService.getDomElement();return i.target=null!=n?n:a||this.isNativeEventFromCanvas(o,i.nativeEvent)&&this.pickTarget(i)||r,"string"==typeof e&&(i.type=e),i}},{key:"createWheelEvent",value:function(t){var e=this.allocateEvent(uG);this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t;var n=this.getExistedHTML(e),r=this.context.contextService.getDomElement();return e.target=n||this.isNativeEventFromCanvas(r,e.nativeEvent)&&this.pickTarget(e),e}},{key:"trackingData",value:function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}},{key:"cloneWheelEvent",value:function(t){var e=this.allocateEvent(uG);return e.nativeEvent=t.nativeEvent,e.originalEvent=t.originalEvent,this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.target=t.target,e.path=t.composedPath().slice(),e.type=t.type,e}},{key:"clonePointerEvent",value:function(t,e){var n=this.allocateEvent(sG);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=null!=e?e:n.type,n}},{key:"copyPointerData",value:function(t,e){e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist}},{key:"copyMouseData",value:function(t,e){e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.client.copyFrom(t.client),e.movement.copyFrom(t.movement),e.canvas.copyFrom(t.canvas),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global),e.offset.copyFrom(t.offset)}},{key:"copyWheelData",value:function(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}},{key:"copyData",value:function(t,e){e.isTrusted=t.isTrusted,e.timeStamp=bB.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.page.copyFrom(t.page),e.viewport.copyFrom(t.viewport)}},{key:"allocateEvent",value:function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=[],e.target=null,e}},{key:"freeEvent",value:function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}},{key:"notifyTarget",value:function(t,e){e=null!=e?e:t.type;var n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(e,"capture"):e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}},{key:"notifyListeners",value:function(t,e){var n=t.currentTarget.emitter,r=n._events[e];if(r)if("fn"in r)r.once&&n.removeListener(e,r.fn,void 0,!0),r.fn.call(t.currentTarget||r.context,t);else for(var i=0;i<r.length&&!t.propagationImmediatelyStopped;i++)r[i].once&&n.removeListener(e,r[i].fn,void 0,!0),r[i].fn.call(t.currentTarget||r[i].context,t)}},{key:"findMountedTarget",value:function(t){if(!t)return null;for(var e=t[t.length-1],n=t.length-2;n>=0;n--){var r=t[n];if(!(r===this.rootTarget||dG.isNode(r)&&r.parentNode===e))break;e=t[n]}return e}},{key:"getCursor",value:function(t){for(var e=t;e;){var n=pB(e)&&e.getAttribute("cursor");if(n)return n;e=dG.isNode(e)&&e.parentNode}}}])}(),pG=function(){return O((function t(){k(this,t)}),[{key:"getOrCreateCanvas",value:function(t,e){if(this.canvas)return this.canvas;if(t||qG.offscreenCanvas)this.canvas=t||qG.offscreenCanvas,this.context=this.canvas.getContext("2d",w({willReadFrequently:!0},e));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",w({willReadFrequently:!0},e)),this.context&&this.context.measureText||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",w({willReadFrequently:!0},e))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(t,e){return this.context||this.getOrCreateCanvas(t,e),this.context}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch(t){}try{return document.createElement("canvas")}catch(t){}return null}}])}(),vG=function(t){return t[t.CAMERA_CHANGED=0]="CAMERA_CHANGED",t[t.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",t[t.NONE=2]="NONE",t}({}),gG=function(){return O((function t(e,n){k(this,t),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new jB,initAsync:new LB,dirtycheck:new DB,cull:new DB,beginFrame:new jB,beforeRender:new jB,render:new jB,afterRender:new jB,endFrame:new jB,destroy:new jB,pick:new RB,pickSync:new DB,pointerDown:new jB,pointerUp:new jB,pointerMove:new jB,pointerOut:new jB,pointerOver:new jB,pointerWheel:new jB,pointerCancel:new jB,click:new jB},this.globalRuntime=e,this.context=n}),[{key:"init",value:function(t){var e=this,n=w(w({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach((function(t){t.apply(n,e.globalRuntime)})),this.hooks.init.call(),0===this.hooks.initAsync.getCallbacksNum()?(this.inited=!0,t()):this.hooks.initAsync.promise().then((function(){e.inited=!0,t()})).catch((function(t){}))}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){return!this.context.config.renderer.getConfig().enableDirtyRectangleRendering||this.context.renderingContext.renderReasons.has(vG.CAMERA_CHANGED)}},{key:"render",value:function(t,e,n){var r=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var i=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(i.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),i.renderReasons.size&&this.inited){i.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var a=1===i.renderReasons.size&&i.renderReasons.has(vG.CAMERA_CHANGED),o=!t.disableRenderHooks||!(t.disableRenderHooks&&a);o&&this.renderDisplayObject(i.root,t,i),this.hooks.beginFrame.call(e),o&&i.renderListCurrentFrame.forEach((function(t){r.hooks.beforeRender.call(t),r.hooks.render.call(t),r.hooks.afterRender.call(t)})),this.hooks.endFrame.call(e),i.renderListCurrentFrame=[],i.renderReasons.clear(),n()}}},{key:"renderDisplayObject",value:function(t,e,n){var r=this,i=e.renderer.getConfig(),a=i.enableDirtyCheck,o=i.enableCulling;function s(t){var e=t.renderable,i=t.sortable,s=a?e.dirty||n.dirtyRectangleRenderingDisabled?t:null:t;if(s){var u=o?r.hooks.cull.call(s,r.context.camera):s;u&&(r.stats.rendered+=1,n.renderListCurrentFrame.push(u))}e.dirty=!1,i.renderOrder=r.zIndexCounter,r.zIndexCounter+=1,r.stats.total+=1,i.dirty&&(r.sort(t,i),i.dirty=!1,i.dirtyChildren=[],i.dirtyReason=void 0)}for(var u=[t];u.length>0;){var c,l=u.pop();s(l);for(var f=(null===(c=l.sortable)||void 0===c||null===(c=c.sorted)||void 0===c?void 0:c.length)>0?l.sortable.sorted:l.childNodes,d=f.length-1;d>=0;d--)u.push(f[d])}}},{key:"sort",value:function(t,e){var n,r;(null==e||null===(n=e.sorted)||void 0===n?void 0:n.length)>0&&e.dirtyReason!==wI.Z_INDEX_CHANGED?e.dirtyChildren.forEach((function(n){var r=e.sorted.indexOf(n);if(r>-1&&e.sorted.splice(r,1),t.childNodes.indexOf(n)>-1)if(0===e.sorted.length)e.sorted.push(n);else{var i=function(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;vB(t[i],e)<0?n=i+1:r=i}return n}(e.sorted,n);e.sorted.splice(i,0,n)}})):e.sorted=t.childNodes.slice().sort(vB),(null===(r=e.sorted)||void 0===r?void 0:r.length)>0&&0===t.childNodes.filter((function(t){return t.parsedStyle.zIndex})).length&&(e.sorted=[])}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()}},{key:"dirtify",value:function(){this.context.renderingContext.renderReasons.add(vG.DISPLAY_OBJECT_CHANGED)}}])}(),yG=/\[\s*(.*)=(.*)\s*\]/,mG=function(){return O((function t(){k(this,t)}),[{key:"selectOne",value:function(t,e){var n=this;if(t.startsWith("."))return e.find((function(e){return((null==e?void 0:e.classList)||[]).indexOf(n.getIdOrClassname(t))>-1}));if(t.startsWith("#"))return e.find((function(e){return e.id===n.getIdOrClassname(t)}));if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,a=r.value;return i?e.find((function(t){return e!==t&&("name"===i?t.name===a:n.attributeToString(t,i)===a)})):null}return e.find((function(n){return e!==n&&n.nodeName===t}))}},{key:"selectAll",value:function(t,e){var n=this;if(t.startsWith("."))return e.findAll((function(r){return e!==r&&((null==r?void 0:r.classList)||[]).indexOf(n.getIdOrClassname(t))>-1}));if(t.startsWith("#"))return e.findAll((function(r){return e!==r&&r.id===n.getIdOrClassname(t)}));if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,a=r.value;return i?e.findAll((function(t){return e!==t&&("name"===i?t.name===a:n.attributeToString(t,i)===a)})):[]}return e.findAll((function(n){return e!==n&&n.nodeName===t}))}},{key:"is",value:function(t,e){if(t.startsWith("."))return e.className===this.getIdOrClassname(t);if(t.startsWith("#"))return e.id===this.getIdOrClassname(t);if(t.startsWith("[")){var n=this.getAttribute(t),r=n.name,i=n.value;return"name"===r?e.name===i:this.attributeToString(e,r)===i}return e.nodeName===t}},{key:"getIdOrClassname",value:function(t){return t.substring(1)}},{key:"getAttribute",value:function(t){var e=t.match(yG),n="",r="";return e&&e.length>2&&(n=e[1].replace(/"/g,""),r=e[2].replace(/"/g,"")),{name:n,value:r}}},{key:"attributeToString",value:function(t,e){if(!t.getAttribute)return"";var n=t.getAttribute(e);return Me(n)?"":n.toString?n.toString():""}}])}(),bG=function(t){return t.ATTR_MODIFIED="DOMAttrModified",t.INSERTED="DOMNodeInserted",t.MOUNTED="DOMNodeInsertedIntoDocument",t.REMOVED="removed",t.UNMOUNTED="DOMNodeRemovedFromDocument",t.REPARENT="reparent",t.DESTROY="destroy",t.BOUNDS_CHANGED="bounds-changed",t.CULLED="culled",t}({}),xG=function(t){function e(t,n,r,i,a,o,s,u){var c;return k(this,e),(c=N(this,e,[null])).relatedNode=n,c.prevValue=r,c.newValue=i,c.attrName=a,c.attrChange=o,c.prevParsedValue=s,c.newParsedValue=u,c.type=t,c}return _(e,t),O(e)}(aG);function wG(t){var e=t.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0)}xG.ADDITION=2,xG.MODIFICATION=1,xG.REMOVAL=3;var kG=new xG(bG.REPARENT,null,"","","",0,"",""),EG=me(),OG=D(),SG=z(1,1,1),MG=ut(),TG=me(),AG=D(),PG=ut(),NG=ue(),CG=D(),_G=ue(),LG=D(),RG=D(),jG=D(),DG=ut(),IG=ue(),FG=ue(),zG=ue(),BG={affectChildren:!0},GG=function(){return O((function t(e){k(this,t),this.pendingEvents=new Map,this.boundsChangedEvent=new cG(bG.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=e}),[{key:"matches",value:function(t,e){return this.runtime.sceneGraphSelector.is(t,e)}},{key:"querySelector",value:function(t,e){return this.runtime.sceneGraphSelector.selectOne(t,e)}},{key:"querySelectorAll",value:function(t,e){return this.runtime.sceneGraphSelector.selectAll(t,e)}},{key:"attach",value:function(t,e,n){var r,i=!1;t.parentNode&&(i=t.parentNode!==e,this.detach(t));var a=t.nodeName===RD.FRAGMENT,o=xB(e);t.parentNode=e;var s=a?t.childNodes:[t];Oe(n)?s.forEach((function(t){e.childNodes.splice(n,0,t),t.parentNode=e})):s.forEach((function(t){e.childNodes.push(t),t.parentNode=e}));var u=e.sortable;if((null!=u&&null!==(r=u.sorted)&&void 0!==r&&r.length||u.dirty||t.parsedStyle.zIndex)&&(-1===u.dirtyChildren.indexOf(t)&&u.dirtyChildren.push(t),u.dirty=!0,u.dirtyReason=wI.ADDED),!o){if(a)this.dirtifyFragment(t);else{var c=t.transformable;c&&this.dirtifyWorld(t,c)}i&&t.dispatchEvent(kG)}}},{key:"detach",value:function(t){var e,n;if(t.parentNode){var r=t.transformable,i=t.parentNode.sortable;(null!=i&&null!==(e=i.sorted)&&void 0!==e&&e.length||null!==(n=t.style)&&void 0!==n&&n.zIndex)&&(-1===i.dirtyChildren.indexOf(t)&&i.dirtyChildren.push(t),i.dirty=!0,i.dirtyReason=wI.REMOVED);var a=t.parentNode.childNodes.indexOf(t);a>-1&&t.parentNode.childNodes.splice(a,1),r&&this.dirtifyWorld(t,r),t.parentNode=null}}},{key:"getOrigin",value:function(t){return t.getGeometryBounds(),t.transformable.origin}},{key:"setOrigin",value:function(t,e){"number"==typeof e&&(e=[e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0]);var n=t.transformable;if(e[0]!==n.origin[0]||e[1]!==n.origin[1]||e[2]!==n.origin[2]){var r=n.origin;r[0]=e[0],r[1]=e[1],r[2]=e[2]||0,this.dirtifyLocal(t,n)}}},{key:"rotate",value:function(t,e){"number"==typeof e&&(e=z(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=t.transformable;if(null!==t.parentNode&&t.parentNode.transformable){var r=NG;de(r,e[0],e[1],e[2]);var i=this.getRotation(t),a=this.getRotation(t.parentNode);pe(zG,a),fe(zG,zG),le(r,zG,r),le(n.localRotation,r,i),ye(n.localRotation,n.localRotation),this.dirtifyLocal(t,n)}else this.rotateLocal(t,e)}},{key:"rotateLocal",value:function(t,e){"number"==typeof e&&(e=z(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=t.transformable;de(FG,e[0],e[1],e[2]),ge(n.localRotation,n.localRotation,FG),this.dirtifyLocal(t,n)}},{key:"setEulerAngles",value:function(t,e){"number"==typeof e&&(e=z(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=t.transformable;if(null!==t.parentNode&&t.parentNode.transformable){de(n.localRotation,e[0],e[1],e[2]);var r=this.getRotation(t.parentNode);pe(IG,fe(NG,r)),ge(n.localRotation,n.localRotation,IG),this.dirtifyLocal(t,n)}else this.setLocalEulerAngles(t,e)}},{key:"setLocalEulerAngles",value:function(t,e){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];"number"==typeof e&&(e=z(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var r=t.transformable;de(r.localRotation,e[0],e[1],e[2]),n&&this.dirtifyLocal(t,r)}},{key:"translateLocal",value:function(t,e){"number"==typeof e&&(e=z(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=t.transformable;et(e,OG)||(tt(e,e,n.localRotation),W(n.localPosition,n.localPosition,e),this.dirtifyLocal(t,n))}},{key:"setPosition",value:function(t,e){var n,r=t.transformable;if(jG[0]=e[0],jG[1]=e[1],jG[2]=null!==(n=e[2])&&void 0!==n?n:0,!et(this.getPosition(t),jG)){if(B(r.position,jG),null!==t.parentNode&&t.parentNode.transformable){var i=t.parentNode.transformable;lt(DG,i.worldTransform),vt(DG,DG),Q(r.localPosition,jG,DG)}else B(r.localPosition,jG);this.dirtifyLocal(t,r)}}},{key:"setLocalPosition",value:function(t,e){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.transformable;RG[0]=e[0],RG[1]=e[1],RG[2]=null!==(n=e[2])&&void 0!==n?n:0,et(i.localPosition,RG)||(B(i.localPosition,RG),r&&this.dirtifyLocal(t,i))}},{key:"scaleLocal",value:function(t,e){var n,r=t.transformable;H(r.localScale,r.localScale,G(AG,e[0],e[1],null!==(n=e[2])&&void 0!==n?n:1)),this.dirtifyLocal(t,r)}},{key:"setLocalScale",value:function(t,e){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.transformable;G(AG,e[0],e[1],null!==(n=e[2])&&void 0!==n?n:i.localScale[2]),et(AG,i.localScale)||(B(i.localScale,AG),r&&this.dirtifyLocal(t,i))}},{key:"translate",value:function(t,e){"number"==typeof e&&(e=G(AG,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)),et(e,OG)||(W(AG,this.getPosition(t),e),this.setPosition(t,AG))}},{key:"setRotation",value:function(t,e,n,r,i){var a=t.transformable;if("number"==typeof e&&(e=he(e,n,r,i)),null!==t.parentNode&&t.parentNode.transformable){var o=this.getRotation(t.parentNode);pe(NG,o),fe(NG,NG),le(a.localRotation,NG,e),ye(a.localRotation,a.localRotation),this.dirtifyLocal(t,a)}else this.setLocalRotation(t,e)}},{key:"setLocalRotation",value:function(t,e,n,r,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];"number"==typeof e&&(e=ve(NG,e,n,r,i));var o=t.transformable;pe(o.localRotation,e),a&&this.dirtifyLocal(t,o)}},{key:"setLocalSkew",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];"number"==typeof e&&(e=xe(TG,e,n));var i=t.transformable;be(i.localSkew,e),r&&this.dirtifyLocal(t,i)}},{key:"dirtifyLocal",value:function(t,e){xB(t)||e.localDirtyFlag||(e.localDirtyFlag=!0,e.dirtyFlag||this.dirtifyWorld(t,e))}},{key:"dirtifyWorld",value:function(t,e){e.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,e),this.dirtifyToRoot(t,!0)}},{key:"dirtifyFragment",value:function(t){var e=t.transformable;e&&(e.frozen=!1,e.dirtyFlag=!0,e.localDirtyFlag=!0);var n=t.renderable;n&&(n.renderBoundsDirty=!0,n.boundsDirty=!0,n.dirty=!0);for(var r=t.childNodes.length,i=0;i<r;i++)this.dirtifyFragment(t.childNodes[i]);t.nodeName===RD.FRAGMENT&&this.pendingEvents.set(t,!1)}},{key:"triggerPendingEvents",value:function(){var t=this,e=new Set,n=function(n,r){n.isConnected&&!e.has(n)&&n.nodeName!==RD.FRAGMENT&&(t.boundsChangedEvent.detail=r,t.boundsChangedEvent.target=n,n.isMutationObserved?n.dispatchEvent(t.boundsChangedEvent):n.ownerDocument.defaultView.dispatchEvent(t.boundsChangedEvent,!0),e.add(n))};this.pendingEvents.forEach((function(t,e){e.nodeName!==RD.FRAGMENT&&(BG.affectChildren=t,t?e.forEach((function(t){n(t,BG)})):n(e,BG))})),e.clear(),this.clearPendingEvents()}},{key:"clearPendingEvents",value:function(){this.pendingEvents.clear()}},{key:"dirtifyToRoot",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t;for(n.renderable&&(n.renderable.dirty=!0);n;)wG(n),n=n.parentNode;e&&t.forEach((function(t){wG(t)})),this.informDependentDisplayObjects(t),this.pendingEvents.set(t,e)}},{key:"updateDisplayObjectDependency",value:function(t,e,n,r){if(e&&e!==n){var i=this.displayObjectDependencyMap.get(e);if(i&&i[t]){var a=i[t].indexOf(r);i[t].splice(a,1)}}if(n){var o=this.displayObjectDependencyMap.get(n);o||(this.displayObjectDependencyMap.set(n,{}),o=this.displayObjectDependencyMap.get(n)),o[t]||(o[t]=[]),o[t].push(r)}}},{key:"informDependentDisplayObjects",value:function(t){var e=this,n=this.displayObjectDependencyMap.get(t);n&&Object.keys(n).forEach((function(t){n[t].forEach((function(n){e.dirtifyToRoot(n,!0),n.dispatchEvent(new xG(bG.ATTR_MODIFIED,n,e,e,t,xG.MODIFICATION,e,e)),n.isCustomElement&&n.isConnected&&n.attributeChangedCallback&&n.attributeChangedCallback(t,e,e)}))}))}},{key:"getPosition",value:function(t){var e=t.transformable;return Lt(e.position,this.getWorldTransform(t,e))}},{key:"getRotation",value:function(t){var e=t.transformable;return jt(e.rotation,this.getWorldTransform(t,e))}},{key:"getScale",value:function(t){var e=t.transformable;return Rt(e.scaling,this.getWorldTransform(t,e))}},{key:"getWorldTransform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.transformable;return e.localDirtyFlag||e.dirtyFlag?(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.sync(t,e),e.worldTransform):e.worldTransform}},{key:"getLocalPosition",value:function(t){return t.transformable.localPosition}},{key:"getLocalRotation",value:function(t){return t.transformable.localRotation}},{key:"getLocalScale",value:function(t){return t.transformable.localScale}},{key:"getLocalSkew",value:function(t){return t.transformable.localSkew}},{key:"calcLocalTransform",value:function(t){if(0!==t.localSkew[0]||0!==t.localSkew[1]){It(t.localTransform,t.localRotation,t.localPosition,z(1,1,1),t.origin),0===t.localSkew[0]&&0===t.localSkew[1]||(ht(PG),PG[4]=Math.tan(t.localSkew[0]),PG[1]=Math.tan(t.localSkew[1]),mt(t.localTransform,t.localTransform,PG));var e=It(PG,ve(NG,0,0,0,1),G(AG,1,1,1),t.localScale,t.origin);mt(t.localTransform,t.localTransform,e)}else{var n=t.localTransform,r=t.localPosition,i=t.localRotation,a=t.localScale,o=t.origin,s=0!==r[0]||0!==r[1]||0!==r[2],u=1!==i[3]||0!==i[0]||0!==i[1]||0!==i[2],c=1!==a[0]||1!==a[1]||1!==a[2],l=0!==o[0]||0!==o[1]||0!==o[2];u||c||l?It(n,i,r,a,o):s?St(n,r):ht(n)}}},{key:"getLocalTransform",value:function(t){var e=t.transformable;return e.localDirtyFlag&&(this.calcLocalTransform(e),e.localDirtyFlag=!1),e.localTransform}},{key:"setLocalTransform",value:function(t,e){var n=Lt(CG,e),r=jt(_G,e),i=Rt(LG,e);this.setLocalScale(t,i,!1),this.setLocalPosition(t,n,!1),this.setLocalRotation(t,r,void 0,void 0,void 0,!1),this.dirtifyLocal(t,t.transformable)}},{key:"resetLocalTransform",value:function(t){this.setLocalScale(t,SG,!1),this.setLocalPosition(t,OG,!1),this.setLocalEulerAngles(t,OG,void 0,void 0,!1),this.setLocalSkew(t,EG,void 0,!1),this.dirtifyLocal(t,t.transformable)}},{key:"getTransformedGeometryBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.getGeometryBounds(t,e);if(!HD.isEmpty(r)){var i=n||new HD;return i.setFromTransformedAABB(r,this.getWorldTransform(t)),i}return null}},{key:"getGeometryBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.geometry;return n.dirty&&qG.styleValueRegistry.updateGeometry(t),(e?n.renderBounds:n.contentBounds||null)||new HD}},{key:"getBounds",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.renderable;if(!r.boundsDirty&&!n&&r.bounds)return r.bounds;if(!r.renderBoundsDirty&&n&&r.renderBounds)return r.renderBounds;var i=n?r.renderBounds:r.bounds,a=this.getTransformedGeometryBounds(t,n,i);if(t.childNodes.forEach((function(t){var r=e.getBounds(t,n);r&&(a?a.add(r):(a=i||new HD).update(r.center,r.halfExtents))})),a||(a=new HD),n){var o=gB(t);if(o){var s=o.parsedStyle.clipPath.getBounds(n);a?s&&(a=s.intersection(a)):a.update(s.center,s.halfExtents)}}return n?(r.renderBounds=a,r.renderBoundsDirty=!1):(r.bounds=a,r.boundsDirty=!1),a}},{key:"getLocalBounds",value:function(t){if(t.parentNode){var e=MG;t.parentNode.transformable&&(e=vt(PG,this.getWorldTransform(t.parentNode)));var n=this.getBounds(t);if(!HD.isEmpty(n)){var r=new HD;return r.setFromTransformedAABB(n,e),r}}return this.getBounds(t)}},{key:"getBoundingClientRect",value:function(t){var e,n,r=this.getGeometryBounds(t);HD.isEmpty(r)||(n=new HD).setFromTransformedAABB(r,this.getWorldTransform(t));var i=null===(e=t.ownerDocument)||void 0===e||null===(e=e.defaultView)||void 0===e?void 0:e.getContextService().getBoundingClientRect();if(n){var a=g(n.getMin(),2),o=a[0],s=a[1],u=g(n.getMax(),2),c=u[0],l=u[1];return new KD(o+((null==i?void 0:i.left)||0),s+((null==i?void 0:i.top)||0),c-o,l-s)}return new KD((null==i?void 0:i.left)||0,(null==i?void 0:i.top)||0,0,0)}},{key:"dirtifyWorldInternal",value:function(t,e){var n=this;if(!e.dirtyFlag){e.dirtyFlag=!0,e.frozen=!1,t.childNodes.forEach((function(t){var e=t.transformable;e.dirtyFlag||n.dirtifyWorldInternal(t,e)}));var r=t.renderable;r&&(r.renderBoundsDirty=!0,r.boundsDirty=!0,r.dirty=!0)}}},{key:"syncHierarchy",value:function(t){var e=t.transformable;if(!e.frozen){e.frozen=!0,(e.localDirtyFlag||e.dirtyFlag)&&this.sync(t,e);for(var n=t.childNodes,r=0;r<n.length;r++)this.syncHierarchy(n[r])}}},{key:"sync",value:function(t,e){if(e.localDirtyFlag&&(this.calcLocalTransform(e),e.localDirtyFlag=!1),e.dirtyFlag){var n=t.parentNode,r=n&&n.transformable;null!==n&&r?mt(e.worldTransform,r.worldTransform,e.localTransform):lt(e.worldTransform,e.localTransform),e.dirtyFlag=!1}}},{key:"unfreezeParentToRoot",value:function(t){for(var e=t.parentNode;e;){var n=e.transformable;n&&(n.frozen=!1),e=e.parentNode}}}])}(),WG={MetricsString:"|ÉqÅ",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},VG=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,HG=new RegExp("".concat(/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/.source,"|").concat(/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/.source,"|").concat(/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/.source,"|").concat(/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/.source)),YG=new RegExp("".concat(/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/.source,"|").concat(/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/.source,"|").concat(/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/.source,"|").concat(/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/.source)),UG=function(){return O((function t(e){var n=this;k(this,t),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(t,e){return!n.isBreakingSpace(e)&&!(!t||!YG.exec(e)&&!HG.exec(t))},this.trimByKinsokuShorui=function(t){var e=M(t),n=e[e.length-2];if(!n)return t;var r=n[n.length-1];return e[e.length-2]=n.slice(0,-1),e[e.length-1]=r+e[e.length-1],e},this.runtime=e}),[{key:"measureFont",value:function(t,e){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var n={ascent:0,descent:0,fontSize:0},r=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(e),i=this.runtime.offscreenCanvasCreator.getOrCreateContext(e,{willReadFrequently:!0});i.font=t;var a=WG.MetricsString+WG.BaselineSymbol,o=Math.ceil(i.measureText(a).width),s=Math.ceil(i.measureText(WG.BaselineSymbol).width),u=WG.HeightMultiplier*s;s=s*WG.BaselineMultiplier|0,r.width=o,r.height=u,i.fillStyle="#f00",i.fillRect(0,0,o,u),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a,0,s);var c=i.getImageData(0,0,o||1,u||1).data,l=c.length,f=4*o,d=0,h=0,p=!1;for(d=0;d<s;++d){for(var v=0;v<f;v+=4)if(255!==c[h+v]){p=!0;break}if(p)break;h+=f}for(n.ascent=s-d,h=l-f,p=!1,d=u;d>s;--d){for(var g=0;g<f;g+=4)if(255!==c[h+g]){p=!0;break}if(p)break;h-=f}return n.descent=d-s,n.fontSize=n.ascent+n.descent,this.fontMetricsCache[t]=n,n}},{key:"measureText",value:function(t,e,n){var r=e.fontSize,i=void 0===r?16:r,a=e.wordWrap,o=void 0!==a&&a,s=e.lineHeight,u=e.lineWidth,c=void 0===u?1:u,l=e.textBaseline,f=void 0===l?"alphabetic":l,d=e.textAlign,h=void 0===d?"start":d,p=e.letterSpacing,v=void 0===p?0:p,g=e.textPath;e.textPathSide,e.textPathStartOffset;var y=e.leading,m=void 0===y?0:y,b=function(t){for(var e=t.fontSize,n=void 0===e?16:e,r=t.fontFamily,i=void 0===r?"sans-serif":r,a=t.fontStyle,o=void 0===a?"normal":a,s=t.fontVariant,u=void 0===s?"normal":s,c=t.fontWeight,l=void 0===c?"normal":c,f=Oe(n)&&"".concat(n,"px")||"16px",d=i.split(","),h=d.length-1;h>=0;h--){var p=d[h].trim();!FB.test(p)&&IB.indexOf(p)<0&&(p='"'.concat(p,'"')),d[h]=p}return"".concat(o," ").concat(u," ").concat(l," ").concat(f," ").concat(d.join(","))}(e),x=this.measureFont(b,n);0===x.fontSize&&(x.fontSize=i,x.ascent=i);var w=this.runtime.offscreenCanvasCreator.getOrCreateContext(n);w.font=b,e.isOverflowing=!1;var k=(o?this.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),E=new Array(k.length),O=0;if(!g){for(var S=0;S<k.length;S++){var M=w.measureText(k[S]).width+(k[S].length-1)*v;E[S]=M,O=Math.max(O,M)}var T=O+c,A=s||x.fontSize+c,P=Math.max(A,x.fontSize+c)+(k.length-1)*(A+m),N=0;return"middle"===f?N=-P/2:"bottom"===f||"alphabetic"===f||"ideographic"===f?N=-P:"top"!==f&&"hanging"!==f||(N=0),{font:b,width:T,height:P,lines:k,lineWidths:E,lineHeight:A+=m,maxLineWidth:O,fontProperties:x,lineMetrics:E.map((function(t,e){var n=0;return"center"===h||"middle"===h?n-=t/2:"right"!==h&&"end"!==h||(n-=t),new KD(n-c/2,N+e*A,t+c,A)}))}}g.getTotalLength();for(var C=0;C<k.length;C++)w.measureText(k[C]).width,k[C].length}},{key:"wordWrap",value:function(t,e,n){var r=this,i=this,a=e.wordWrapWidth,o=void 0===a?0:a,s=e.letterSpacing,u=void 0===s?0:s,c=e.maxLines,l=void 0===c?1/0:c,f=e.textOverflow,d=this.runtime.offscreenCanvasCreator.getOrCreateContext(n),h=o+u,p="";"ellipsis"===f?p="...":f&&"clip"!==f&&(p=f);var v=Array.from(t),g=[],y=0,m=0,b=-1,x={},w=function(t){return r.getFromCache(t,u,x,d)},k=w(p);function E(t,e,n,r){for(;w(t)<r&&e<v.length-1&&!i.isNewline(v[e+1]);)t+=v[e+=1];for(;w(t)>r&&e>=n;)e-=1,t=t.slice(0,-1);return{lineTxt:t,txtLastCharIndex:e}}function O(t,e){if(!(k<=0||k>h))if(g[t]){var n=E(g[t],e,b+1,h-k);g[t]=n.lineTxt+p}else g[t]=p}for(var S=0;S<v.length;S++){var M=v[S],T=v[S-1],A=v[S+1],P=w(M);if(this.isNewline(M)){if(y+1>=l){e.isOverflowing=!0,S<v.length-1&&O(y,S-1);break}b=S-1,m=0,g[y+=1]=""}else{if(m>0&&m+P>h){var N=E(g[y],S-1,b+1,h);if(N.txtLastCharIndex!==S-1){if(g[y]=N.lineTxt,N.txtLastCharIndex===v.length-1)break;S=N.txtLastCharIndex+1,M=v[S],T=v[S-1],A=v[S+1],P=w(M)}if(y+1>=l){e.isOverflowing=!0,O(y,S-1);break}if(b=S-1,m=0,g[y+=1]="",this.isBreakingSpace(M))continue;this.canBreakInLastChar(M)||(g=this.trimToBreakable(g),m=this.sumTextWidthByCache(g[y]||"",w)),this.shouldBreakByKinsokuShorui(M,A)&&(g=this.trimByKinsokuShorui(g),m+=w(T||""))}m+=P,g[y]=(g[y]||"")+M}}return g.join("\n")}},{key:"isBreakingSpace",value:function(t){return"string"==typeof t&&WG.BreakingSpaces.indexOf(t.charCodeAt(0))>=0}},{key:"isNewline",value:function(t){return"string"==typeof t&&WG.Newlines.indexOf(t.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(t){var e=M(t),n=e[e.length-2],r=this.findBreakableIndex(n);if(-1===r||!n)return e;var i=n.slice(r,r+1),a=r+1,o=r+(this.isBreakingSpace(i)?0:1);return e[e.length-1]+=n.slice(a,n.length),e[e.length-2]=n.slice(0,o),e}},{key:"canBreakInLastChar",value:function(t){return!t||!VG.test(t)}},{key:"sumTextWidthByCache",value:function(t,e){return t.split("").reduce((function(t,n){return t+e(n)}),0)}},{key:"findBreakableIndex",value:function(t){for(var e=t.length-1;e>=0;e--)if(!VG.test(t[e]))return e;return-1}},{key:"getFromCache",value:function(t,e,n,r){var i=n[t];if("number"!=typeof i){var a=t.length*e;i=r.measureText(t).width+a,n[t]=i}return i}}])}(),qG={},XG=function(t){var e=new eG,n=new tG;return b(b(b(b(b(b(b(b(b(b(t={},RD.FRAGMENT,null),RD.CIRCLE,new $B),RD.ELLIPSE,new ZB),RD.RECT,e),RD.IMAGE,e),RD.GROUP,new rG),RD.LINE,new QB),RD.TEXT,new nG(qG)),RD.POLYLINE,n),RD.POLYGON,n),b(b(b(t,RD.PATH,new JB),RD.HTML,new iG),RD.MESH,null)}(),KG=function(t){var e=new Zz,n=new tB;return b(b(b(b(b(b(b(b(b(b(t={},EI.PERCENTAGE,null),EI.NUMBER,new iB),EI.ANGLE,new Kz),EI.DEFINED_PATH,new $z),EI.PAINT,e),EI.COLOR,e),EI.FILTER,new Qz),EI.LENGTH,n),EI.LENGTH_PERCENTAGE,n),EI.LENGTH_PERCENTAGE_12,new eB),b(b(b(b(b(b(b(b(b(b(t,EI.LENGTH_PERCENTAGE_14,new nB),EI.COORDINATE,new tB),EI.OFFSET_DISTANCE,new aB),EI.OPACITY_VALUE,new oB),EI.PATH,new sB),EI.LIST_OF_POINTS,new uB),EI.SHADOW_BLUR,new cB),EI.TEXT,new lB),EI.TEXT_TRANSFORM,new fB),EI.TRANSFORM,new qB),b(b(b(t,EI.TRANSFORM_ORIGIN,new XB),EI.Z_INDEX,new KB),EI.MARKER,new rB)}();qG.CameraContribution=bI,qG.AnimationTimeline=null,qG.EasingFunction=null,qG.offscreenCanvasCreator=new pG,qG.sceneGraphSelector=new mG,qG.sceneGraphService=new GG(qG),qG.textService=new UG(qG),qG.geometryUpdaterFactory=XG,qG.CSSPropertySyntaxFactory=KG,qG.styleValueRegistry=new qz(qG),qG.layoutRegistry=null,qG.globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==s.g?s.g:{},qG.enableStyleSyntax=!0,qG.enableSizeAttenuation=!1;var $G=0,ZG=new xG(bG.INSERTED,null,"","","",0,"",""),QG=new xG(bG.REMOVED,null,"","","",0,"",""),JG=new cG(bG.DESTROY),tW=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).entity=$G++,t.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},t.cullable={strategy:xI.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},t.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},t.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},t.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},t.rBushNode={aabb:void 0},t.namespaceURI="g",t.scrollLeft=0,t.scrollTop=0,t.clientTop=0,t.clientLeft=0,t.destroyed=!1,t.style={},t.computedStyle={},t.parsedStyle={},t.attributes={},t}return _(e,t),O(e,[{key:"className",get:function(){return this.getAttribute("class")||""},set:function(t){this.setAttribute("class",t)}},{key:"classList",get:function(){return this.className.split(" ").filter((function(t){return""!==t}))}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t-1]||null}return null}},{key:"cloneNode",value:function(t){throw new Error($D)}},{key:"appendChild",value:function(t,e){var n;if(t.destroyed)throw new Error("Cannot append a destroyed element.");return qG.sceneGraphService.attach(t,this,e),null!==(n=this.ownerDocument)&&void 0!==n&&n.defaultView&&(xB(this)||t.nodeName!==RD.FRAGMENT?this.ownerDocument.defaultView.mountChildren(t):this.ownerDocument.defaultView.mountFragment(t)),this.isMutationObserved&&(ZG.relatedNode=this,t.dispatchEvent(ZG)),t}},{key:"insertBefore",value:function(t,e){if(e){t.parentElement&&t.parentElement.removeChild(t);var n=this.childNodes.indexOf(e);-1===n?this.appendChild(t):this.appendChild(t,n)}else this.appendChild(t);return t}},{key:"replaceChild",value:function(t,e){var n=this.childNodes.indexOf(e);return this.removeChild(e),this.appendChild(t,n),e}},{key:"removeChild",value:function(t){var e;return QG.relatedNode=this,t.dispatchEvent(QG),null!==(e=t.ownerDocument)&&void 0!==e&&e.defaultView&&t.ownerDocument.defaultView.unmountChildren(t),qG.sceneGraphService.detach(t),t}},{key:"removeChildren",value:function(){for(var t=this.childNodes.length-1;t>=0;t--){var e=this.childNodes[t];this.removeChild(e)}}},{key:"destroyChildren",value:function(){for(var t=this.childNodes.length-1;t>=0;t--){var e=this.childNodes[t];e.childNodes.length>0&&e.destroyChildren(),e.destroy()}}},{key:"matches",value:function(t){return qG.sceneGraphService.matches(t,this)}},{key:"getElementById",value:function(t){return qG.sceneGraphService.querySelector("#".concat(t),this)}},{key:"getElementsByName",value:function(t){return qG.sceneGraphService.querySelectorAll('[name="'.concat(t,'"]'),this)}},{key:"getElementsByClassName",value:function(t){return qG.sceneGraphService.querySelectorAll(".".concat(t),this)}},{key:"getElementsByTagName",value:function(t){return qG.sceneGraphService.querySelectorAll(t,this)}},{key:"querySelector",value:function(t){return qG.sceneGraphService.querySelector(t,this)}},{key:"querySelectorAll",value:function(t){return qG.sceneGraphService.querySelectorAll(t,this)}},{key:"closest",value:function(t){var e=this;do{if(qG.sceneGraphService.matches(t,e))return e;e=e.parentElement}while(null!==e);return null}},{key:"find",value:function(t){var e=this,n=null;return this.forEach((function(r){return r===e||!t(r)||(n=r,!1)})),n}},{key:"findAll",value:function(t){var e=this,n=[];return this.forEach((function(r){r!==e&&t(r)&&n.push(r)})),n}},{key:"after",value:function(){var t=this;if(this.parentNode){for(var e=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(n,r){var i;return null===(i=t.parentNode)||void 0===i?void 0:i.appendChild(n,e+r+1)}))}}},{key:"before",value:function(){if(this.parentNode){for(var t,e=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r[0],o=r.slice(1);this.parentNode.appendChild(a,e),(t=a).after.apply(t,M(o))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e){return t.appendChild(e)}))}},{key:"prepend",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e,n){return t.appendChild(e,n)}))}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){this.destroyChildren(),this.dispatchEvent(JG),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){return qG.sceneGraphService.getGeometryBounds(this)}},{key:"getRenderBounds",value:function(){return qG.sceneGraphService.getBounds(this,!0)}},{key:"getBounds",value:function(){return qG.sceneGraphService.getBounds(this)}},{key:"getLocalBounds",value:function(){return qG.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return qG.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(t){if("symbol"!=typeof t)return this.attributes[t]}},{key:"hasAttribute",value:function(t){return this.getAttributeNames().includes(t)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(t){this.setAttribute(t,null),delete this.attributes[t]}},{key:"setAttribute",value:function(t,e,n,r){this.attributes[t]=e}},{key:"getAttributeNS",value:function(t,e){throw new Error($D)}},{key:"getAttributeNode",value:function(t){throw new Error($D)}},{key:"getAttributeNodeNS",value:function(t,e){throw new Error($D)}},{key:"hasAttributeNS",value:function(t,e){throw new Error($D)}},{key:"removeAttributeNS",value:function(t,e){throw new Error($D)}},{key:"removeAttributeNode",value:function(t){throw new Error($D)}},{key:"setAttributeNS",value:function(t,e,n){throw new Error($D)}},{key:"setAttributeNode",value:function(t){throw new Error($D)}},{key:"setAttributeNodeNS",value:function(t){throw new Error($D)}},{key:"toggleAttribute",value:function(t,e){throw new Error($D)}}])}(dG);function eW(t){return!(null==t||!t.nodeName)}var nW=qG.globalThis.Proxy?qG.globalThis.Proxy:function(){},rW=new xG(bG.ATTR_MODIFIED,null,null,null,null,xG.MODIFICATION,null,null),iW=D(),aW=ue(),oW=function(t){function e(t){var n;return k(this,e),(n=N(this,e)).isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=t,n.id=t.id||"",n.name=t.name||"",(t.className||t.class)&&(n.className=t.className||t.class),n.nodeName=t.type||RD.GROUP,t.initialParsedStyle&&Object.assign(n.parsedStyle,t.initialParsedStyle),n.initAttributes(t.style),qG.enableStyleSyntax&&(n.style=new nW({setProperty:function(t,e){n.setAttribute(t,e)},getPropertyValue:function(t){return n.getAttribute(t)},removeProperty:function(t){n.removeAttribute(t)},item:function(){return""}},{get:function(t,e){return void 0!==t[e]?t[e]:n.getAttribute(e)},set:function(t,e,r){return n.setAttribute(e,r),!0}})),n}return _(e,t),O(e,[{key:"destroy",value:function(){Dn(e,"destroy",this,3)([]),this.getAnimations().forEach((function(t){t.cancel()}))}},{key:"cloneNode",value:function(t,e){var n=w({},this.attributes);for(var r in n){var i=n[r];eW(i)&&"clipPath"!==r&&"offsetPath"!==r&&"textPath"!==r&&(n[r]=i.cloneNode(t)),e&&(n[r]=e(r,i))}var a=new this.constructor(w(w({},this.config),{},{style:n}));return a.setLocalTransform(this.getLocalTransform()),t&&this.children.forEach((function(e){if(!e.style.isMarker){var n=e.cloneNode(t);a.appendChild(n)}})),a}},{key:"initAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qG.styleValueRegistry.processProperties(this,t,{forceUpdateGeometry:!0}),this.renderable.dirty=!0}},{key:"setAttribute",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];An(n)||(r||n!==this.attributes[t])&&(this.internalSetAttribute(t,n,{memoize:i}),Dn(e,"setAttribute",this,3)([t,n]))}},{key:"internalSetAttribute",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.renderable,i=this.attributes[t],a=this.parsedStyle[t];qG.styleValueRegistry.processProperties(this,b({},t,e),n),r.dirty=!0;var o,s=this.parsedStyle[t];this.isConnected&&(rW.relatedNode=this,rW.prevValue=i,rW.newValue=e,rW.attrName=t,rW.prevParsedValue=a,rW.newParsedValue=s,this.isMutationObserved?this.dispatchEvent(rW):(rW.target=this,this.ownerDocument.defaultView.dispatchEvent(rW,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&(null===(o=this.attributeChangedCallback)||void 0===o||o.call(this,t,i,e,a,s))}},{key:"getBBox",value:function(){var t=this.getBounds(),e=g(t.getMin(),2),n=e[0],r=e[1],i=g(t.getMax(),2),a=i[0],o=i[1];return new KD(n,r,a-n,o-r)}},{key:"setOrigin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return qG.sceneGraphService.setOrigin(this,tI(t,e,n,!1)),this}},{key:"getOrigin",value:function(){return qG.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return qG.sceneGraphService.setPosition(this,tI(t,e,n,!1)),this}},{key:"setLocalPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return qG.sceneGraphService.setLocalPosition(this,tI(t,e,n,!1)),this}},{key:"translate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return qG.sceneGraphService.translate(this,tI(t,e,n,!1)),this}},{key:"translateLocal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return qG.sceneGraphService.translateLocal(this,tI(t,e,n,!1)),this}},{key:"getPosition",value:function(){return qG.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return qG.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(t,e,n){return this.scaleLocal(t,e,n)}},{key:"scaleLocal",value:function(t,e,n){return"number"==typeof t&&(t=tI(t,e=e||t,n=n||t,!1)),qG.sceneGraphService.scaleLocal(this,t),this}},{key:"setLocalScale",value:function(t,e,n){return"number"==typeof t&&(t=tI(t,e=e||t,n=n||t,!1)),qG.sceneGraphService.setLocalScale(this,t),this}},{key:"getLocalScale",value:function(){return qG.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return qG.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){return iI(g(oI(iW,qG.sceneGraphService.getWorldTransform(this)),3)[2])}},{key:"getLocalEulerAngles",value:function(){return iI(g(oI(iW,qG.sceneGraphService.getLocalRotation(this)),3)[2])}},{key:"setEulerAngles",value:function(t){return qG.sceneGraphService.setEulerAngles(this,0,0,t),this}},{key:"setLocalEulerAngles",value:function(t){return qG.sceneGraphService.setLocalEulerAngles(this,0,0,t),this}},{key:"rotateLocal",value:function(t,e,n){return Me(e)&&Me(n)?qG.sceneGraphService.rotateLocal(this,0,0,t):qG.sceneGraphService.rotateLocal(this,t,e,n),this}},{key:"rotate",value:function(t,e,n){return Me(e)&&Me(n)?qG.sceneGraphService.rotate(this,0,0,t):qG.sceneGraphService.rotate(this,t,e,n),this}},{key:"setRotation",value:function(t,e,n,r){return qG.sceneGraphService.setRotation(this,t,e,n,r),this}},{key:"setLocalRotation",value:function(t,e,n,r){return qG.sceneGraphService.setLocalRotation(this,t,e,n,r),this}},{key:"setLocalSkew",value:function(t,e){return qG.sceneGraphService.setLocalSkew(this,t,e),this}},{key:"getRotation",value:function(){return qG.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return qG.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return qG.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return qG.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return qG.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(t){return qG.sceneGraphService.setLocalTransform(this,t),this}},{key:"resetLocalTransform",value:function(){qG.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(t,e){var n,r=null===(n=this.ownerDocument)||void 0===n?void 0:n.timeline;return r?r.play(this,t,e):null}},{key:"isVisible",value:function(){var t;return"hidden"!==(null===(t=this.parsedStyle)||void 0===t?void 0:t.visibility)}},{key:"interactive",get:function(){return this.isInteractive()},set:function(t){this.style.pointerEvents=t?"auto":"none"}},{key:"isInteractive",value:function(){var t;return"none"!==(null===(t=this.parsedStyle)||void 0===t?void 0:t.pointerEvents)}},{key:"isCulled",value:function(){return!(!this.cullable||!this.cullable.enable||this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,M(this.parentNode.children.map((function(t){return Number(t.style.zIndex)}))))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,M(this.parentNode.children.map((function(t){return Number(t.style.zIndex)}))))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1];return i?Ln(i)?(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),this):2===n.length?(this.setAttribute(i,a),this):this.attributes[i]:this.attributes}},{key:"getMatrix",value:function(t){var e=t||this.getWorldTransform(),n=g(Lt(iW,e),2),r=n[0],i=n[1],a=g(Rt(iW,e),2),o=a[0],s=a[1],u=jt(aW,e),c=g(oI(iW,u),3),l=c[0],f=c[2];return function(t,e,n,r,i){var a=Math.cos(t),o=Math.sin(t);return se(r*a,i*o,0,-r*o,i*a,0,e,n,1)}(l||f,r,i,o,s)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(t){var e=g(sI(t),5),n=e[0],r=e[1],i=e[2],a=e[3],o=e[4];this.setEulerAngles(o).setPosition(n,r).setLocalScale(i,a)}},{key:"setLocalMatrix",value:function(t){var e=g(sI(t),5),n=e[0],r=e[1],i=e[2],a=e[3],o=e[4];this.setLocalEulerAngles(o).setLocalPosition(n,r).setLocalScale(i,a)}},{key:"show",value:function(){this.forEach((function(t){t.style.visibility="visible"}))}},{key:"hide",value:function(){this.forEach((function(t){t.style.visibility="hidden"}))}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(t){return this.children[t]||null}},{key:"add",value:function(t,e){return this.appendChild(t,e)}},{key:"set",value:function(t,e){this.config[t]=e}},{key:"get",value:function(t){return this.config[t]}},{key:"moveTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(t,e,n),this}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(t,e,n),this}},{key:"setZIndex",value:function(t){return this.style.zIndex=t,this}}])}(tW);oW.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var sW=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,e),N(this,e,[w({type:RD.CIRCLE},t)])}return _(e,t),O(e)}(oW);sW.PARSED_STYLE_LIST=new Set([].concat(M(oW.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var uW=["style"],cW=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=rr(n,uW);return k(this,e),(t=N(this,e,[w({style:r},i)])).isCustomElement=!0,t}return _(e,t),O(e)}(oW);cW.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var lW=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,e),N(this,e,[w({type:RD.ELLIPSE},t)])}return _(e,t),O(e)}(oW);lW.PARSED_STYLE_LIST=new Set([].concat(M(oW.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"])),(function(t){function e(){return k(this,e),N(this,e,[{type:RD.FRAGMENT}])}return _(e,t),O(e)}(oW)).PARSED_STYLE_LIST=new Set(["class","className"]);var fW=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,e),N(this,e,[w({type:RD.GROUP},t)])}return _(e,t),O(e)}(oW);fW.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var dW=["style"],hW=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=rr(n,dW);return k(this,e),(t=N(this,e,[w({type:RD.HTML,style:r},i)])).cullable.enable=!1,t}return _(e,t),O(e,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var t=vt(ut(),this.parentNode.getWorldTransform()),e=this.getBounds();if(!HD.isEmpty(e)){var n=new HD;return n.setFromTransformedAABB(e,t),n}}return this.getBounds()}}])}(oW);hW.PARSED_STYLE_LIST=new Set([].concat(M(oW.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var pW=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,e),N(this,e,[w({type:RD.IMAGE},t)])}return _(e,t),O(e)}(oW);pW.PARSED_STYLE_LIST=new Set([].concat(M(oW.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var vW=["style"],gW=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=rr(n,vW);k(this,e),(t=N(this,e,[w({type:RD.LINE,style:w({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},r)},i)])).markerStartAngle=0,t.markerEndAngle=0;var a=t.parsedStyle,o=a.markerStart,s=a.markerEnd;return o&&eW(o)&&(t.markerStartAngle=o.getLocalEulerAngles(),t.appendChild(o)),s&&eW(s)&&(t.markerEndAngle=s.getLocalEulerAngles(),t.appendChild(s)),t.transformMarker(!0),t.transformMarker(!1),t}return _(e,t),O(e,[{key:"attributeChangedCallback",value:function(t,e,n,r,i){"x1"===t||"y1"===t||"x2"===t||"y2"===t||"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&eW(r)&&(this.markerStartAngle=0,r.remove()),i&&eW(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t&&(r&&eW(r)&&(this.markerEndAngle=0,r.remove()),i&&eW(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1)))}},{key:"transformMarker",value:function(t){var e,n,r,i,a,o,s,u=this.parsedStyle,c=u.markerStart,l=u.markerEnd,f=u.markerStartOffset,d=u.markerEndOffset,h=u.x1,p=u.x2,v=u.y1,g=u.y2,y=t?c:l;y&&eW(y)&&(t?(i=h,a=v,n=p-h,r=g-v,o=f||0,s=this.markerStartAngle):(i=p,a=g,n=h-p,r=v-g,o=d||0,s=this.markerEndAngle),e=Math.atan2(r,n),y.setLocalEulerAngles(180*e/Math.PI+s),y.setLocalPosition(i+Math.cos(e)*o,a+Math.sin(e)*o))}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle,r=ED(n.x1,n.y1,n.x2,n.y2,t),i=r.x,a=r.y,o=Q(D(),z(i,a,0),e?this.getWorldTransform():this.getLocalTransform());return new XD(o[0],o[1])}},{key:"getPointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(t/this.getTotalLength(),e)}},{key:"getTotalLength",value:function(){var t=this.parsedStyle;return kD(t.x1,t.y1,t.x2,t.y2)}}])}(oW);gW.PARSED_STYLE_LIST=new Set([].concat(M(oW.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var yW=["style"],mW=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=rr(n,yW);k(this,e),(t=N(this,e,[w({type:RD.PATH,style:r,initialParsedStyle:{miterLimit:4,d:w({},kI)}},i)])).markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var a=t.parsedStyle,o=a.markerStart,s=a.markerEnd,u=a.markerMid;return o&&eW(o)&&(t.markerStartAngle=o.getLocalEulerAngles(),t.appendChild(o)),u&&eW(u)&&t.placeMarkerMid(u),s&&eW(s)&&(t.markerEndAngle=s.getLocalEulerAngles(),t.appendChild(s)),t.transformMarker(!0),t.transformMarker(!1),t}return _(e,t),O(e,[{key:"attributeChangedCallback",value:function(t,e,n,r,i){"d"===t?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&eW(r)&&(this.markerStartAngle=0,r.remove()),i&&eW(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t?(r&&eW(r)&&(this.markerEndAngle=0,r.remove()),i&&eW(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===t&&this.placeMarkerMid(i)}},{key:"transformMarker",value:function(t){var e=this.parsedStyle,n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,o=t?n:r;if(o&&eW(o)){var s,u,c,l,f,d,h;if(t){var p=g(this.getStartTangent(),2),v=p[0],y=p[1];l=y[0],f=y[1],u=v[0]-y[0],c=v[1]-y[1],d=i||0,h=this.markerStartAngle}else{var m=g(this.getEndTangent(),2),b=m[0],x=m[1];l=x[0],f=x[1],u=b[0]-x[0],c=b[1]-x[1],d=a||0,h=this.markerEndAngle}s=Math.atan2(c,u),o.setLocalEulerAngles(180*s/Math.PI+h),o.setLocalPosition(l+Math.cos(s)*d,f+Math.sin(s)*d)}}},{key:"placeMarkerMid",value:function(t){var e=this.parsedStyle.d.segments;if(this.markerMidList.forEach((function(t){t.remove()})),t&&eW(t))for(var n=1;n<e.length-1;n++){var r=g(e[n].currentPoint,2),i=r[0],a=r[1],o=1===n?t:t.cloneNode(!0);this.markerMidList.push(o),this.appendChild(o),o.setLocalPosition(i,a)}}},{key:"getTotalLength",value:function(){return oz(this)}},{key:"getPointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Rn(this.parsedStyle.d.absolutePath,t),r=n.x,i=n.y,a=Q(D(),z(r,i,0),e?this.getWorldTransform():this.getLocalTransform());return new XD(a[0],a[1])}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPointAtLength(t*oz(this),e)}},{key:"getStartTangent",value:function(){var t=this.parsedStyle.d.segments,e=[];if(t.length>1){var n=t[0].currentPoint,r=t[1].currentPoint,i=t[1].startTangent;e=[],i?(e.push([n[0]-i[0],n[1]-i[1]]),e.push([n[0],n[1]])):(e.push([r[0],r[1]]),e.push([n[0],n[1]]))}return e}},{key:"getEndTangent",value:function(){var t=this.parsedStyle.d.segments,e=t.length,n=[];if(e>1){var r=t[e-2].currentPoint,i=t[e-1].currentPoint,a=t[e-1].endTangent;n=[],a?(n.push([i[0]-a[0],i[1]-a[1]]),n.push([i[0],i[1]])):(n.push([r[0],r[1]]),n.push([i[0],i[1]]))}return n}}])}(oW);mW.PARSED_STYLE_LIST=new Set([].concat(M(oW.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var bW=["style"],xW=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=rr(n,bW);k(this,e),(t=N(this,e,[w({type:RD.POLYGON,style:r,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},i)])).markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var a=t.parsedStyle,o=a.markerStart,s=a.markerEnd,u=a.markerMid;return o&&eW(o)&&(t.markerStartAngle=o.getLocalEulerAngles(),t.appendChild(o)),u&&eW(u)&&t.placeMarkerMid(u),s&&eW(s)&&(t.markerEndAngle=s.getLocalEulerAngles(),t.appendChild(s)),t.transformMarker(!0),t.transformMarker(!1),t}return _(e,t),O(e,[{key:"attributeChangedCallback",value:function(t,e,n,r,i){"points"===t?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&eW(r)&&(this.markerStartAngle=0,r.remove()),i&&eW(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t?(r&&eW(r)&&(this.markerEndAngle=0,r.remove()),i&&eW(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===t&&this.placeMarkerMid(i)}},{key:"transformMarker",value:function(t){var e=this.parsedStyle,n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,o=(e.points||{}).points,s=t?n:r;if(s&&eW(s)&&o){var u,c,l,f,d,h,p;if(f=o[0][0],d=o[0][1],t)c=o[1][0]-o[0][0],l=o[1][1]-o[0][1],h=i||0,p=this.markerStartAngle;else{var v=o.length;this.parsedStyle.isClosed?(c=o[v-1][0]-o[0][0],l=o[v-1][1]-o[0][1]):(f=o[v-1][0],d=o[v-1][1],c=o[v-2][0]-o[v-1][0],l=o[v-2][1]-o[v-1][1]),h=a||0,p=this.markerEndAngle}u=Math.atan2(l,c),s.setLocalEulerAngles(180*u/Math.PI+p),s.setLocalPosition(f+Math.cos(u)*h,d+Math.sin(u)*h)}}},{key:"placeMarkerMid",value:function(t){var e=(this.parsedStyle.points||{}).points;if(this.markerMidList.forEach((function(t){t.remove()})),this.markerMidList=[],t&&eW(t)&&e)for(var n=1;n<(this.parsedStyle.isClosed?e.length:e.length-1);n++){var r=e[n][0],i=e[n][1],a=1===n?t:t.cloneNode(!0);this.markerMidList.push(a),this.appendChild(a),a.setLocalPosition(r,i)}}}])}(oW);xW.PARSED_STYLE_LIST=new Set([].concat(M(oW.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var wW=["style"],kW=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.style,r=rr(t,wW);return k(this,e),N(this,e,[w({type:RD.POLYLINE,style:n,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},r)])}return _(e,t),O(e,[{key:"getTotalLength",value:function(){return sz(this)}},{key:"getPointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(t/this.getTotalLength(),e)}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle.points.points;if(0===this.parsedStyle.points.segments.length){var r,i,a=[],o=0,s=this.getTotalLength();n.forEach((function(t,e){n[e+1]&&((r=[0,0])[0]=o/s,i=kD(t[0],t[1],n[e+1][0],n[e+1][1]),o+=i,r[1]=o/s,a.push(r))})),this.parsedStyle.points.segments=a}var u=0,c=0;this.parsedStyle.points.segments.forEach((function(e,n){t>=e[0]&&t<=e[1]&&(u=(t-e[0])/(e[1]-e[0]),c=n)}));var l=ED(n[c][0],n[c][1],n[c+1][0],n[c+1][1],u),f=l.x,d=l.y,h=Q(D(),z(f,d,0),e?this.getWorldTransform():this.getLocalTransform());return new XD(h[0],h[1])}},{key:"getStartTangent",value:function(){var t=this.parsedStyle.points.points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e}},{key:"getEndTangent",value:function(){var t=this.parsedStyle.points.points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n}}])}(xW);kW.PARSED_STYLE_LIST=new Set([].concat(M(xW.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var EW=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,e),N(this,e,[w({type:RD.RECT},t)])}return _(e,t),O(e)}(oW);EW.PARSED_STYLE_LIST=new Set([].concat(M(oW.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var OW=["style"],SW=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.style,r=rr(t,OW);return k(this,e),N(this,e,[w({type:RD.TEXT,style:w({fill:"black"},n)},r)])}return _(e,t),O(e,[{key:"getComputedTextLength",value:function(){var t;return this.getGeometryBounds(),(null===(t=this.parsedStyle.metrics)||void 0===t?void 0:t.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var t;return this.getGeometryBounds(),(null===(t=this.parsedStyle.metrics)||void 0===t?void 0:t.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])}(oW);SW.PARSED_STYLE_LIST=new Set([].concat(M(oW.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textPathSide","textPathStartOffset","metrics","dx","dy"]));var MW=function(){return O((function t(){k(this,t),this.registry={},this.define(RD.CIRCLE,sW),this.define(RD.ELLIPSE,lW),this.define(RD.RECT,EW),this.define(RD.IMAGE,pW),this.define(RD.LINE,gW),this.define(RD.GROUP,fW),this.define(RD.PATH,mW),this.define(RD.POLYGON,xW),this.define(RD.POLYLINE,kW),this.define(RD.TEXT,SW),this.define(RD.HTML,hW)}),[{key:"define",value:function(t,e){this.registry[t]=e}},{key:"get",value:function(t){return this.registry[t]}}])}(),TW=function(t){var e=t.name,n=t.inherits,r=t.interpolable,i=t.initialValue,a=t.syntax;qG.styleValueRegistry.registerMetadata({n:e,inh:n,int:r,d:i,syntax:a})},AW=function(t){function e(){var t;k(this,e),(t=N(this,e)).defaultView=null,t.ownerDocument=null,t.nodeName="document";try{t.timeline=new qG.AnimationTimeline(t)}catch(t){}var n={};return Hz.forEach((function(t){var e=t.n,r=t.inh,i=t.d;r&&i&&(n[e]=_n(i)?i(RD.GROUP):i)})),t.documentElement=new fW({id:"g-root",style:n}),t.documentElement.ownerDocument=t,t.documentElement.parentNode=t,t.childNodes=[t.documentElement],t}return _(e,t),O(e,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(t,e){if("svg"===t)return this.documentElement;var n=this.defaultView.customElements.get(t);n||(console.warn("Unsupported tagName: ",t),n="tspan"===t?SW:fW);var r=new n(e);return r.ownerDocument=this,r}},{key:"createElementNS",value:function(t,e,n){return this.createElement(e,n)}},{key:"cloneNode",value:function(t){throw new Error($D)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(t){}}},{key:"elementsFromBBox",value:function(t,e,n,r){var i=this.defaultView.context.rBushRoot.search({minX:t,minY:e,maxX:n,maxY:r}),a=[];return i.forEach((function(t){var e=t.displayObject,n=e.parsedStyle.pointerEvents,r=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(void 0===n?"auto":n);(!r||r&&e.isVisible())&&!e.isCulled()&&e.isInteractive()&&a.push(e)})),a.sort((function(t,e){return e.sortable.renderOrder-t.sortable.renderOrder})),a}},{key:"elementFromPointSync",value:function(t,e){var n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,i=n.y,a=this.defaultView.getConfig(),o=a.width,s=a.height;if(r<0||i<0||r>o||i>s)return null;var u=this.defaultView.viewport2Client({x:r,y:i}),c=u.x,l=u.y,f=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:t,y:e,viewportX:r,viewportY:i,clientX:c,clientY:l},picked:[]}).picked;return f&&f[0]||this.documentElement}},{key:"elementFromPoint",value:(r=er(Jn().mark((function t(e,n){var r,i,a,o,s,u,c,l,f,d,h;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.defaultView.canvas2Viewport({x:e,y:n}),i=r.x,a=r.y,o=this.defaultView.getConfig(),s=o.width,u=o.height,!(i<0||a<0||i>s||a>u)){t.next=4;break}return t.abrupt("return",null);case 4:return c=this.defaultView.viewport2Client({x:i,y:a}),l=c.x,f=c.y,t.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:e,y:n,viewportX:i,viewportY:a,clientX:l,clientY:f},picked:[]});case 7:return d=t.sent,h=d.picked,t.abrupt("return",h&&h[0]||this.documentElement);case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"elementsFromPointSync",value:function(t,e){var n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,i=n.y,a=this.defaultView.getConfig(),o=a.width,s=a.height;if(r<0||i<0||r>o||i>s)return[];var u=this.defaultView.viewport2Client({x:r,y:i}),c=u.x,l=u.y,f=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:t,y:e,viewportX:r,viewportY:i,clientX:c,clientY:l},picked:[]}).picked;return f[f.length-1]!==this.documentElement&&f.push(this.documentElement),f}},{key:"elementsFromPoint",value:(n=er(Jn().mark((function t(e,n){var r,i,a,o,s,u,c,l,f,d,h;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.defaultView.canvas2Viewport({x:e,y:n}),i=r.x,a=r.y,o=this.defaultView.getConfig(),s=o.width,u=o.height,!(i<0||a<0||i>s||a>u)){t.next=4;break}return t.abrupt("return",[]);case 4:return c=this.defaultView.viewport2Client({x:i,y:a}),l=c.x,f=c.y,t.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:e,y:n,viewportX:i,viewportY:a,clientX:l,clientY:f},picked:[]});case 7:return d=t.sent,(h=d.picked)[h.length-1]!==this.documentElement&&h.push(this.documentElement),t.abrupt("return",h);case 11:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"appendChild",value:function(t,e){throw new Error(ZD)}},{key:"insertBefore",value:function(t,e){throw new Error(ZD)}},{key:"removeChild",value:function(t,e){throw new Error(ZD)}},{key:"replaceChild",value:function(t,e,n){throw new Error(ZD)}},{key:"append",value:function(){throw new Error(ZD)}},{key:"prepend",value:function(){throw new Error(ZD)}},{key:"getElementById",value:function(t){return this.documentElement.getElementById(t)}},{key:"getElementsByName",value:function(t){return this.documentElement.getElementsByName(t)}},{key:"getElementsByTagName",value:function(t){return this.documentElement.getElementsByTagName(t)}},{key:"getElementsByClassName",value:function(t){return this.documentElement.getElementsByClassName(t)}},{key:"querySelector",value:function(t){return this.documentElement.querySelector(t)}},{key:"querySelectorAll",value:function(t){return this.documentElement.querySelectorAll(t)}},{key:"find",value:function(t){return this.documentElement.find(t)}},{key:"findAll",value:function(t){return this.documentElement.findAll(t)}}]);var n,r}(dG),PW=function(){function t(e){k(this,t),this.strategies=e}return O(t,[{key:"apply",value:function(e){var n=e.camera,r=e.renderingService,i=e.renderingContext,a=this.strategies;r.hooks.cull.tap(t.tag,(function(t){if(t){var e=t.cullable;return 0===a.length?e.visible=i.unculledEntities.indexOf(t.entity)>-1:e.visible=a.every((function(e){return e.isVisible(n,t)})),!t.isCulled()&&t.isVisible()?t:(t.dispatchEvent(new cG(bG.CULLED)),null)}return t})),r.hooks.afterRender.tap(t.tag,(function(t){t.cullable.visibilityPlaneMask=-1}))}}])}();PW.tag="Culling";var NW=function(){function t(){var e=this;k(this,t),this.autoPreventDefault=!1,this.rootPointerEvent=new sG(null),this.rootWheelEvent=new uG(null),this.onPointerMove=function(t){var n,r=null===(n=e.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView;if(!r.supportsTouchEvents||"touch"!==t.pointerType){var i,a=nr(e.normalizeToPointerEvent(t,r));try{for(a.s();!(i=a.n()).done;){var o=i.value,s=e.bootstrapEvent(e.rootPointerEvent,o,r,t);e.context.eventService.mapEvent(s)}}catch(t){a.e(t)}finally{a.f()}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(t){var n,r,i=null===(n=e.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView,a=nr(e.normalizeToPointerEvent(t,i));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=e.bootstrapEvent(e.rootPointerEvent,o,i,t);e.context.eventService.mapEvent(s)}}catch(t){a.e(t)}finally{a.f()}e.setCursor(e.context.eventService.cursor)}}return O(t,[{key:"apply",value:function(e){var n=this;this.context=e;var r=e.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler((function(t){return n.context.renderingService.hooks.pickSync.call({position:t,picked:[],topmost:!0}).picked[0]||null})),r.hooks.pointerWheel.tap(t.tag,(function(t){var e=n.normalizeWheelEvent(t);n.context.eventService.mapEvent(e)})),r.hooks.pointerDown.tap(t.tag,(function(t){if(!i.supportsTouchEvents||"touch"!==t.pointerType){var e=n.normalizeToPointerEvent(t,i);n.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();var r,a=nr(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=n.bootstrapEvent(n.rootPointerEvent,o,i,t);n.context.eventService.mapEvent(s)}}catch(t){a.e(t)}finally{a.f()}n.setCursor(n.context.eventService.cursor)}})),r.hooks.pointerUp.tap(t.tag,(function(t){if(!i.supportsTouchEvents||"touch"!==t.pointerType){var e,r=n.context.contextService.getDomElement(),a=n.context.eventService.isNativeEventFromCanvas(r,t)?"":"outside",o=nr(n.normalizeToPointerEvent(t,i));try{for(o.s();!(e=o.n()).done;){var s=e.value,u=n.bootstrapEvent(n.rootPointerEvent,s,i,t);u.type+=a,n.context.eventService.mapEvent(u)}}catch(t){o.e(t)}finally{o.f()}n.setCursor(n.context.eventService.cursor)}})),r.hooks.pointerMove.tap(t.tag,this.onPointerMove),r.hooks.pointerOver.tap(t.tag,this.onPointerMove),r.hooks.pointerOut.tap(t.tag,this.onPointerMove),r.hooks.click.tap(t.tag,this.onClick),r.hooks.pointerCancel.tap(t.tag,(function(t){var e,r=nr(n.normalizeToPointerEvent(t,i));try{for(r.s();!(e=r.n()).done;){var a=e.value,o=n.bootstrapEvent(n.rootPointerEvent,a,i,t);n.context.eventService.mapEvent(o)}}catch(t){r.e(t)}finally{r.f()}n.setCursor(n.context.eventService.cursor)}))}},{key:"bootstrapEvent",value:function(t,e,n,r){t.view=n,t.originalEvent=null,t.nativeEvent=r,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);var i=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),a=i.x,o=i.y;t.viewport.x=a,t.viewport.y=o;var s=this.context.eventService.viewport2Canvas(t.viewport),u=s.x,c=s.y;return t.canvas.x=u,t.canvas.y=c,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=r.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=mB[t.type]||t.type),t}},{key:"normalizeWheelEvent",value:function(t){var e=this.rootWheelEvent;this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ;var n=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),r=n.x,i=n.y;e.viewport.x=r,e.viewport.y=i;var a=this.context.eventService.viewport2Canvas(e.viewport),o=a.x,s=a.y;return e.canvas.x=o,e.canvas.y=s,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.nativeEvent=t,e.type=t.type,e}},{key:"transferMouseData",value:function(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=bB.now(),t.type=e.type,t.altKey=e.altKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.ctrlKey=e.ctrlKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null}},{key:"setCursor",value:function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(t,e){var n=[];if(e.isTouchEvent(t))for(var r=0;r<t.changedTouches.length;r++){var i=t.changedTouches[r];An(i.button)&&(i.button=0),An(i.buttons)&&(i.buttons=1),An(i.isPrimary)&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),An(i.width)&&(i.width=i.radiusX||1),An(i.height)&&(i.height=i.radiusY||1),An(i.tiltX)&&(i.tiltX=0),An(i.tiltY)&&(i.tiltY=0),An(i.pointerType)&&(i.pointerType="touch"),An(i.pointerId)&&(i.pointerId=i.identifier||0),An(i.pressure)&&(i.pressure=i.force||.5),An(i.twist)&&(i.twist=0),An(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=t.type,n.push(i)}else if(e.isMouseEvent(t)){var a=t;An(a.isPrimary)&&(a.isPrimary=!0),An(a.width)&&(a.width=1),An(a.height)&&(a.height=1),An(a.tiltX)&&(a.tiltX=0),An(a.tiltY)&&(a.tiltY=0),An(a.pointerType)&&(a.pointerType="mouse"),An(a.pointerId)&&(a.pointerId=1),An(a.pressure)&&(a.pressure=.5),An(a.twist)&&(a.twist=0),An(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,n.push(a)}else n.push(t);return n}}])}();NW.tag="Event";var CW=[RD.CIRCLE,RD.ELLIPSE,RD.IMAGE,RD.RECT,RD.LINE,RD.POLYLINE,RD.POLYGON,RD.TEXT,RD.PATH,RD.HTML],_W=function(){return O((function t(){k(this,t)}),[{key:"isVisible",value:function(t,e){var n,r=e.cullable;if(!r.enable)return!0;var i=e.getRenderBounds();if(HD.isEmpty(i))return!1;var a=t.getFrustum(),o=null===(n=e.parentNode)||void 0===n||null===(n=n.cullable)||void 0===n?void 0:n.visibilityPlaneMask;return r.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(e,i,o||UD.INDETERMINATE,a.planes),r.visible=r.visibilityPlaneMask!==UD.OUTSIDE,r.visible}},{key:"computeVisibilityWithPlaneMask",value:function(t,e,n,r){if(n===UD.OUTSIDE||n===UD.INSIDE)return n;for(var i=UD.INSIDE,a=CW.indexOf(t.nodeName)>-1,o=0,s=r.length;o<s;++o){var u=1<<o;if(0!==(n&u)&&(!a||4!==o&&5!==o)){var c=r[o],l=c.normal,f=c.distance;if(K(l,e.getPositiveFarPoint(r[o]))+f<0)return UD.OUTSIDE;K(l,e.getNegativeFarPoint(r[o]))+f<0&&(i|=u)}}return i}}])}(),LW=function(){function t(){k(this,t),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return O(t,[{key:"apply",value:function(e){var n,r=this,i=e.renderingService,a=e.renderingContext,o=e.rBushRoot,s=a.root.ownerDocument.defaultView;this.rBush=o;var u=function(t){t.target.renderable.dirty=!0,i.dirtify()},c=function(t){r.syncTasks.set(t.target,t.detail.affectChildren),i.dirtify()},l=function(t){var e=t.target;qG.enableSizeAttenuation&&qG.styleValueRegistry.updateSizeAttenuation(e,s.getCamera().getZoom())},f=function(t){var e=t.target,n=e.rBushNode;n.aabb&&r.rBush.remove(n.aabb),r.syncTasks.delete(e),qG.sceneGraphService.dirtifyToRoot(e),i.dirtify()};i.hooks.init.tap(t.tag,(function(){s.addEventListener(bG.MOUNTED,l),s.addEventListener(bG.UNMOUNTED,f),s.addEventListener(bG.ATTR_MODIFIED,u),s.addEventListener(bG.BOUNDS_CHANGED,c)})),i.hooks.destroy.tap(t.tag,(function(){s.removeEventListener(bG.MOUNTED,l),s.removeEventListener(bG.UNMOUNTED,f),s.removeEventListener(bG.ATTR_MODIFIED,u),s.removeEventListener(bG.BOUNDS_CHANGED,c),r.syncTasks.clear()}));var d=null!==(n=qG.globalThis.requestIdleCallback)&&void 0!==n?n:CB.bind(qG.globalThis);i.hooks.endFrame.tap(t.tag,(function(){r.isFirstTimeRendering?(r.isFirstTimeRendering=!1,r.syncing=!0,d((function(){r.syncRTree(!0),r.isFirstTimeRenderingFinished=!0}))):r.syncRTree()}))}},{key:"syncNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.isConnected){var n=t.rBushNode;n.aabb&&this.rBush.remove(n.aabb);var r=t.getRenderBounds();if(r){var i=t.renderable;e&&(i.dirtyRenderBounds||(i.dirtyRenderBounds=new HD),i.dirtyRenderBounds.update(r.center,r.halfExtents));var a=g(r.getMin(),2),o=a[0],s=a[1],u=g(r.getMax(),2),c=u[0],l=u[1];n.aabb||(n.aabb={}),n.aabb.displayObject=t,n.aabb.minX=o,n.aabb.minY=s,n.aabb.maxX=c,n.aabb.maxY=l}return n.aabb&&!(isNaN(n.aabb.maxX)||isNaN(n.aabb.maxX)||isNaN(n.aabb.minX)||isNaN(n.aabb.minY))?n.aabb:void 0}}},{key:"syncRTree",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||!this.syncing&&0!==this.syncTasks.size){this.syncing=!0;var n=[],r=new Set,i=function(i){if(!r.has(i)&&i.renderable){var a=t.syncNode(i,e);a&&(n.push(a),r.add(i))}};this.syncTasks.forEach((function(t,e){t&&e.forEach(i);for(var n=e;n;)i(n),n=n.parentElement})),this.rBush.load(n),n.length=0,this.syncing=!1}}}])}();LW.tag="Prepare";var RW=function(t){return t.READY="ready",t.BEFORE_RENDER="beforerender",t.RERENDER="rerender",t.AFTER_RENDER="afterrender",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.RESIZE="resize",t.DIRTY_RECTANGLE="dirtyrectangle",t.RENDERER_CHANGED="rendererchanged",t}({}),jW=new cG(bG.MOUNTED),DW=new cG(bG.UNMOUNTED),IW=new cG(RW.BEFORE_RENDER),FW=new cG(RW.RERENDER),zW=new cG(RW.AFTER_RENDER),BW=function(t){function e(t){var n;k(this,e),(n=N(this,e)).Element=oW,n.inited=!1,n.context={};var r=t.container,i=t.canvas,a=t.renderer,o=t.width,s=t.height,u=t.background,c=t.cursor,l=t.supportsMutipleCanvasesInOneContainer,f=t.cleanUpOnDestroy,d=void 0===f||f,h=t.offscreenCanvas,p=t.devicePixelRatio,v=t.requestAnimationFrame,g=t.cancelAnimationFrame,y=t.createImage,m=t.supportsTouchEvents,b=t.supportsPointerEvents,x=t.isTouchEvent,E=t.isMouseEvent,O=t.dblClickSpeed,S=o,M=s,T=p||hB&&window.devicePixelRatio||1;return T=T>=1?Math.ceil(T):1,i&&(S=o||function(t){var e=yB(t,"width");return"auto"===e?t.offsetWidth:parseFloat(e)}(i)||i.width/T,M=s||function(t){var e=yB(t,"height");return"auto"===e?t.offsetHeight:parseFloat(e)}(i)||i.height/T),n.customElements=new MW,n.devicePixelRatio=T,n.requestAnimationFrame=null!=v?v:CB.bind(qG.globalThis),n.cancelAnimationFrame=null!=g?g:_B.bind(qG.globalThis),n.supportsTouchEvents=null!=m?m:"ontouchstart"in qG.globalThis,n.supportsPointerEvents=null!=b?b:!!qG.globalThis.PointerEvent,n.isTouchEvent=null!=x?x:function(t){return n.supportsTouchEvents&&t instanceof qG.globalThis.TouchEvent},n.isMouseEvent=null!=E?E:function(t){return!qG.globalThis.MouseEvent||t instanceof qG.globalThis.MouseEvent&&(!n.supportsPointerEvents||!(t instanceof qG.globalThis.PointerEvent))},h&&(qG.offscreenCanvas=h),n.document=new AW,n.document.defaultView=n,l||function(t,e,n){if(t){var r="string"==typeof t?document.getElementById(t):t;dB.has(r)&&dB.get(r).destroy(n),dB.set(r,e)}}(r,n,d),n.initRenderingContext(w(w({},t),{},{width:S,height:M,background:null!=u?u:"transparent",cursor:null!=c?c:"default",cleanUpOnDestroy:d,devicePixelRatio:T,requestAnimationFrame:n.requestAnimationFrame,cancelAnimationFrame:n.cancelAnimationFrame,supportsTouchEvents:n.supportsTouchEvents,supportsPointerEvents:n.supportsPointerEvents,isTouchEvent:n.isTouchEvent,isMouseEvent:n.isMouseEvent,dblClickSpeed:null!=O?O:200,createImage:null!=y?y:function(){return new window.Image}})),n.initDefaultCamera(S,M,a.clipSpaceNearZ),n.initRenderer(a,!0),n}return _(e,t),O(e,[{key:"initRenderingContext",value:function(t){this.context.config=t,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(t,e,n){var r=this,i=new qG.CameraContribution;i.clipSpaceNearZ=n,i.setType(pI.EXPLORING,vI.DEFAULT).setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0).setOrthographic(t/-2,t/2,e/2,e/-2,.1,1e3),i.canvas=this,i.eventEmitter.on(yI,(function(){r.context.renderingContext.renderReasons.add(vG.CAMERA_CHANGED),qG.enableSizeAttenuation&&r.getConfig().renderer.getConfig().enableSizeAttenuation&&r.updateSizeAttenuation()})),this.context.camera=i}},{key:"updateSizeAttenuation",value:function(){var t=this.getCamera().getZoom();this.document.documentElement.forEach((function(e){qG.styleValueRegistry.updateSizeAttenuation(e,t)}))}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var t=this;return this.readyPromise||(this.readyPromise=new Promise((function(e){t.resolveReadyPromise=function(){e(t)}})),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0;rF.clearCache(),e||this.dispatchEvent(new cG(RW.BEFORE_DESTROY)),this.frameId&&this.cancelAnimationFrame(this.frameId);var n=this.getRoot();t&&(this.unmountChildren(n),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),e||this.dispatchEvent(new cG(RW.AFTER_DESTROY));var r=function(t){t.currentTarget=null,t.manager=null,t.target=null,t.relatedNode=null};r(jW),r(DW),r(IW),r(FW),r(zW),r(rW),r(ZG),r(QG),r(JG)}},{key:"changeSize",value:function(t,e){this.resize(t,e)}},{key:"resize",value:function(t,e){var n=this.context.config;n.width=t,n.height=e,this.getContextService().resize(t,e);var r=this.context.camera,i=r.getProjectionMode();r.setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0),i===gI.ORTHOGRAPHIC?r.setOrthographic(t/-2,t/2,e/2,e/-2,r.getNear(),r.getFar()):r.setAspect(t/e),this.dispatchEvent(new cG(RW.RESIZE,{width:t,height:e}))}},{key:"appendChild",value:function(t,e){return this.document.documentElement.appendChild(t,e)}},{key:"insertBefore",value:function(t,e){return this.document.documentElement.insertBefore(t,e)}},{key:"removeChild",value:function(t){return this.document.documentElement.removeChild(t)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(t){var e=this;t&&(IW.detail=t,zW.detail=t),this.dispatchEvent(IW),this.getRenderingService().render(this.getConfig(),t,(function(){e.dispatchEvent(FW)})),this.dispatchEvent(zW)}},{key:"run",value:function(){var t=this,e=function(n,r){t.render(r),t.frameId=t.requestAnimationFrame(e)};e()}},{key:"initRenderer",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new LD,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new NW,new LW,new PW([new _W])),this.loadRendererContainerModule(t),this.context.contextService=new this.context.ContextService(w(w({},qG),this.context)),this.context.renderingService=new gG(qG,this.context),this.context.eventService=new hG(qG,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(t,n,!0)):this.context.contextService.initAsync().then((function(){e.initRenderingService(t,n)})).catch((function(t){console.error(t)}))}},{key:"initRenderingService",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.context.renderingService.init((function(){e.inited=!0,n?r?e.requestAnimationFrame((function(){e.dispatchEvent(new cG(RW.READY))})):e.dispatchEvent(new cG(RW.READY)):e.dispatchEvent(new cG(RW.RENDERER_CHANGED)),e.readyPromise&&e.resolveReadyPromise(),n||e.getRoot().forEach((function(t){var e=t.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0,e.dirty=!0)})),e.mountChildren(e.getRoot()),t.getConfig().enableAutoRendering&&e.run()}))}},{key:"loadRendererContainerModule",value:function(t){var e=this;t.getPlugins().forEach((function(t){t.context=e.context,t.init(qG)}))}},{key:"setRenderer",value:function(t){var e=this.getConfig();if(e.renderer!==t){var n=e.renderer;e.renderer=t,this.destroy(!1,!0),M((null==n?void 0:n.getPlugins())||[]).reverse().forEach((function(t){t.destroy(qG)})),this.initRenderer(t)}}},{key:"setCursor",value:function(t){this.getConfig().cursor=t,this.getContextService().applyCursorStyle(t)}},{key:"unmountChildren",value:function(t){var e=this;t.childNodes.forEach((function(t){e.unmountChildren(t)})),this.inited&&(t.isMutationObserved?t.dispatchEvent(DW):(DW.target=t,this.dispatchEvent(DW,!0)),t!==this.document.documentElement&&(t.ownerDocument=null),t.isConnected=!1),t.isCustomElement&&t.disconnectedCallback&&t.disconnectedCallback()}},{key:"mountChildren",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xB(t);this.inited?t.isConnected||(t.ownerDocument=this.document,t.isConnected=!0,n||(t.isMutationObserved?t.dispatchEvent(jW):(jW.target=t,this.dispatchEvent(jW,!0)))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",t.nodeName),t.childNodes.forEach((function(t){e.mountChildren(t,n)})),t.isCustomElement&&t.connectedCallback&&t.connectedCallback()}},{key:"mountFragment",value:function(t){this.mountChildren(t,!1)}},{key:"client2Viewport",value:function(t){return this.getEventService().client2Viewport(t)}},{key:"viewport2Client",value:function(t){return this.getEventService().viewport2Client(t)}},{key:"viewport2Canvas",value:function(t){return this.getEventService().viewport2Canvas(t)}},{key:"canvas2Viewport",value:function(t){return this.getEventService().canvas2Viewport(t)}},{key:"getPointByClient",value:function(t,e){return this.client2Viewport({x:t,y:e})}},{key:"getClientByPoint",value:function(t,e){return this.viewport2Client({x:t,y:e})}}])}(fG),GW=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).landmarks=[],t}return _(e,t),O(e,[{key:"rotate",value:function(t,e,n){if(this.relElevation=QD(e),this.relAzimuth=QD(t),this.relRoll=QD(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===pI.EXPLORING){var r=ce(ue(),[1,0,0],nI((this.rotateWorld?1:-1)*this.relElevation)),i=ce(ue(),[0,1,0],nI((this.rotateWorld?1:-1)*this.relAzimuth)),a=ce(ue(),[0,0,1],nI(this.relRoll)),o=le(ue(),i,r);o=le(ue(),o,a);var s=Ft(ut(),o);bt(this.matrix,this.matrix,[0,0,-this.distance]),mt(this.matrix,this.matrix,s),bt(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===pI.ORBITING||this.type===pI.EXPLORING?this._getPosition():this.type===pI.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,e){var n=tI(t,e,0),r=I(this.position);return W(r,r,q(D(),this.right,n[0])),W(r,r,q(D(),this.up,n[1])),this._setPosition(r),this.triggerUpdate(),this}},{key:"dolly",value:function(t){var e=this.forward,n=I(this.position),r=this.dollyingStep,i=this.distance+t*this.dollyingStep;return r=Math.max(Math.min(i,this.maxDistance),this.minDistance)-this.distance,n[0]+=r*e[0],n[1]+=r*e[1],n[2]+=r*e[2],this._setPosition(n),this.type===pI.ORBITING||this.type===pI.EXPLORING?this._getDistance():this.type===pI.TRACKING&&W(this.focalPoint,n,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){void 0!==this.landmarkAnimationID&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(t){var e,n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.position,s=void 0===o?this.position:o,u=a.focalPoint,c=void 0===u?this.focalPoint:u,l=a.roll,f=a.zoom,d=new qG.CameraContribution;d.setType(this.type,void 0),d.setPosition(s[0],null!==(e=s[1])&&void 0!==e?e:this.position[1],null!==(n=s[2])&&void 0!==n?n:this.position[2]),d.setFocalPoint(c[0],null!==(r=c[1])&&void 0!==r?r:this.focalPoint[1],null!==(i=c[2])&&void 0!==i?i:this.focalPoint[2]),d.setRoll(null!=l?l:this.roll),d.setZoom(null!=f?f:this.zoom);var h={name:t,matrix:ct(d.getWorldTransform()),right:I(d.right),up:I(d.up),forward:I(d.forward),position:I(d.getPosition()),focalPoint:I(d.getFocalPoint()),distanceVector:I(d.getDistanceVector()),distance:d.getDistance(),dollyingStep:d.getDollyingStep(),azimuth:d.getAzimuth(),elevation:d.getElevation(),roll:d.getRoll(),relAzimuth:d.relAzimuth,relElevation:d.relElevation,relRoll:d.relRoll,zoom:d.getZoom()};return this.landmarks.push(h),h}},{key:"gotoLandmark",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Te(t)?this.landmarks.find((function(e){return e.name===t})):t;if(r){var i=Oe(n)?{duration:n}:n,a=i.easing,o=void 0===a?"linear":a,s=i.duration,u=void 0===s?100:s,c=i.easingFunction,l=void 0===c?void 0:c,f=i.onfinish,d=void 0===f?void 0:f,h=i.onframe,p=void 0===h?void 0:h;this.cancelLandmarkAnimation();var v,g=r.position,y=r.focalPoint,m=r.zoom,b=r.roll,x=l||qG.EasingFunction(o),w=function(){e.setFocalPoint(y),e.setPosition(g),e.setRoll(b),e.setZoom(m),e.computeMatrix(),e.triggerUpdate(),null==d||d()};if(0===u)return w();var k=function(t){void 0===v&&(v=t);var n=t-v;if(n>=u)w();else{var r,i,a=x(n/u),o=D(),s=D();if(Z(o,e.focalPoint,y,a),Z(s,e.position,g,a),i=e.roll*(1-a)+b*a,r=e.zoom*(1-a)+m*a,e.setFocalPoint(o),e.setPosition(s),e.setRoll(i),e.setZoom(r),rt(o,y)+rt(s,g)<=.01&&void 0===m&&void 0===b)return w();e.computeMatrix(),e.triggerUpdate(),n<u&&(null==p||p(a),e.landmarkAnimationID=e.canvas.requestAnimationFrame(k))}};this.canvas.requestAnimationFrame(k)}}}])}(bI);qG.CameraContribution=GW,new WeakMap;var WW=function(t){function e(t,n,r,i){var a;return k(this,e),(a=N(this,e,[t])).currentTime=r,a.timelineTime=i,a.target=n,a.type="finish",a.bubbles=!1,a.currentTarget=n,a.defaultPrevented=!1,a.eventPhase=a.AT_TARGET,a.timeStamp=Date.now(),a.currentTime=r,a.timelineTime=i,a}return _(e,t),O(e)}(aG),VW=0,HW=function(){return O((function t(e,n){var r;k(this,t),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=e,e.animation=this,this.timeline=n,this.id="".concat(VW++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number(null===(r=this.effect)||void 0===r?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}),[{key:"pending",get:function(){return null===this._startTime&&!this._paused&&0!==this.playbackRate||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var t=this;return this.readyPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise((function(e,n){t.resolveReadyPromise=function(){e(t)},t.rejectReadyPromise=function(){n(new Error)}})),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var t=this;return this.finishedPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise((function(e,n){t.resolveFinishedPromise=function(){e(t)},t.rejectFinishedPromise=function(){n(new Error)}})),"finished"===this.playState&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var e;(t=Number(t),isNaN(t))||(this.timeline.restart(),this._paused||null===this._startTime||(this._startTime=Number(null===(e=this.timeline)||void 0===e?void 0:e.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))}},{key:"startTime",get:function(){return this._startTime},set:function(t){if(null!==t){if(this.updatePromises(),t=Number(t),isNaN(t))return;if(this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var e=this.currentTime;this._playbackRate=t,this.startTime=null,"paused"!==this.playState&&"idle"!==this.playState&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),null!==e&&(this.currentTime=e),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||"running"===this.playState||!this._finishedFlag}},{key:"updatePromises",value:function(){var t=this.oldPlayState,e=this.pending?"pending":this.playState;return this.readyPromise&&e!==t&&("idle"===e?(this.rejectReadyPromise(),this.readyPromise=void 0):"pending"===t?this.resolveReadyPromise():"pending"===e&&(this.readyPromise=void 0)),this.finishedPromise&&e!==t&&("idle"===e?(this.rejectFinishedPromise(),this.finishedPromise=void 0):"finished"===e?this.resolveFinishedPromise():"finished"===t&&(this.finishedPromise=void 0)),this.oldPlayState=e,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),-1===this.timeline.animations.indexOf(this)&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._isFinished||this._paused||this._idle?this._idle&&(this.rewind(),this._idle=!1):this.currentTimePending=!0,this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var t=this;if(this.updatePromises(),this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var e=new WW(null,this,this.currentTime,null);setTimeout((function(){t.oncancel(e)}))}}},{key:"reverse",value:function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),null!==t&&(this.currentTime=t),this.updatePromises()}},{key:"updatePlaybackRate",value:function(t){this.playbackRate=t}},{key:"targetAnimations",value:function(){var t;return(null===(t=this.effect)||void 0===t?void 0:t.target).getAnimations()}},{key:"markTarget",value:function(){var t=this.targetAnimations();-1===t.indexOf(this)&&t.push(this)}},{key:"unmarkTarget",value:function(){var t=this.targetAnimations(),e=t.indexOf(this);-1!==e&&t.splice(e,1)}},{key:"tick",value:function(t,e){this._idle||this._paused||(null===this._startTime?e&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),e&&(this.currentTimePending=!1,this.fireEvents(t))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else{if(!(this._totalDuration<1/0))throw new Error("Unable to rewind negative playback rate animation with infinite duration");this.currentTime=this._totalDuration}}},{key:"persist",value:function(){throw new Error($D)}},{key:"addEventListener",value:function(t,e,n){throw new Error($D)}},{key:"removeEventListener",value:function(t,e,n){throw new Error($D)}},{key:"dispatchEvent",value:function(t){throw new Error($D)}},{key:"commitStyles",value:function(){throw new Error($D)}},{key:"ensureAlive",value:function(){var t,e;this.playbackRate<0&&0===this.currentTime?this._inEffect=!(null===(t=this.effect)||void 0===t||!t.update(-1)):this._inEffect=!(null===(e=this.effect)||void 0===e||!e.update(this.currentTime)),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(t,e){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!e&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(t){var e=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var n=new WW(null,this,this.currentTime,t);setTimeout((function(){e.onfinish&&e.onfinish(n)}))}this._finishedFlag=!0}}else{if(this.onframe&&"running"===this.playState){var r=new WW(null,this,this.currentTime,t);this.onframe(r)}this._finishedFlag=!1}}}])}(),YW=.1,UW="function"==typeof Float32Array,qW=function(t,e){return 1-3*e+3*t},XW=function(t,e){return 3*e-6*t},KW=function(t){return 3*t},$W=function(t,e,n){return((qW(e,n)*t+XW(e,n))*t+KW(e))*t},ZW=function(t,e,n){return 3*qW(e,n)*t*t+2*XW(e,n)*t+KW(e)},QW=function(t,e,n,r){if(!(t>=0&&t<=1&&n>=0&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===r)return function(t){return t};for(var i=UW?new Float32Array(11):new Array(11),a=0;a<11;++a)i[a]=$W(a*YW,t,n);return function(a){return 0===a||1===a?a:$W(function(e){for(var r=0,a=1;10!==a&&i[a]<=e;++a)r+=YW;--a;var o=r+(e-i[a])/(i[a+1]-i[a])*YW,s=ZW(o,t,n);return s>=.001?function(t,e,n,r){for(var i=0;i<4;++i){var a=ZW(e,n,r);if(0===a)return e;e-=($W(e,n,r)-t)/a}return e}(e,o,t,n):0===s?o:function(t,e,n,r,i){var a,o,s=0;do{(a=$W(o=e+(n-e)/2,r,i)-t)>0?n=o:e=o}while(Math.abs(a)>1e-7&&++s<10);return o}(e,r,r+YW,t,n)}(a),e,r)}},JW=function(t){return Math.pow(t,2)},tV=function(t){return Math.pow(t,3)},eV=function(t){return Math.pow(t,4)},nV=function(t){return Math.pow(t,5)},rV=function(t){return Math.pow(t,6)},iV=function(t){return 1-Math.cos(t*Math.PI/2)},aV=function(t){return 1-Math.sqrt(1-t*t)},oV=function(t){return t*t*(3*t-2)},sV=function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)},uV=function(t){var e=g(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],2),n=e[0],r=void 0===n?1:n,i=e[1],a=void 0===i?.5:i,o=Ae(Number(r),1,10),s=Ae(Number(a),.1,2);return 0===t||1===t?t:-o*Math.pow(2,10*(t-1))*Math.sin((t-1-s/(2*Math.PI)*Math.asin(1/o))*(2*Math.PI)/s)},cV=function(t){var e=arguments.length>2?arguments[2]:void 0,n=g(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],4),r=n[0],i=void 0===r?1:r,a=n[1],o=void 0===a?100:a,s=n[2],u=void 0===s?10:s,c=n[3],l=void 0===c?0:c;i=Ae(i,.1,1e3),o=Ae(o,.1,1e3),u=Ae(u,.1,1e3),l=Ae(l,.1,1e3);var f=Math.sqrt(o/i),d=u/(2*Math.sqrt(o*i)),h=d<1?f*Math.sqrt(1-d*d):0,p=d<1?(d*f-l)/h:-l+f,v=e?e*t/1e3:t;return v=d<1?Math.exp(-v*d*f)*(1*Math.cos(h*v)+p*Math.sin(h*v)):(1+p*v)*Math.exp(-v*f),0===t||1===t?t:1-v},lV=function(t){var e=g(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],2),n=e[0],r=void 0===n?10:n;return("start"===e[1]?Math.ceil:Math.floor)(Ae(t,0,1)*r)/r},fV=function(t){var e=g(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],4),n=e[0],r=e[1],i=e[2],a=e[3];return QW(n,r,i,a)(t)},dV=QW(.42,0,1,1),hV=function(t){return function(e){return 1-t(1-e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],arguments.length>2?arguments[2]:void 0)}},pV=function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return e<.5?t(2*e,n,r)/2:1-t(-2*e+2,n,r)/2}},vV=function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return e<.5?(1-t(1-2*e,n,r))/2:(t(2*e-1,n,r)+1)/2}},gV={steps:lV,"step-start":function(t){return lV(t,[1,"start"])},"step-end":function(t){return lV(t,[1,"end"])},linear:function(t){return t},"cubic-bezier":fV,ease:function(t){return fV(t,[.25,.1,.25,1])},in:dV,out:hV(dV),"in-out":pV(dV),"out-in":vV(dV),"in-quad":JW,"out-quad":hV(JW),"in-out-quad":pV(JW),"out-in-quad":vV(JW),"in-cubic":tV,"out-cubic":hV(tV),"in-out-cubic":pV(tV),"out-in-cubic":vV(tV),"in-quart":eV,"out-quart":hV(eV),"in-out-quart":pV(eV),"out-in-quart":vV(eV),"in-quint":nV,"out-quint":hV(nV),"in-out-quint":pV(nV),"out-in-quint":vV(nV),"in-expo":rV,"out-expo":hV(rV),"in-out-expo":pV(rV),"out-in-expo":vV(rV),"in-sine":iV,"out-sine":hV(iV),"in-out-sine":pV(iV),"out-in-sine":vV(iV),"in-circ":aV,"out-circ":hV(aV),"in-out-circ":pV(aV),"out-in-circ":vV(aV),"in-back":oV,"out-back":hV(oV),"in-out-back":pV(oV),"out-in-back":vV(oV),"in-bounce":sV,"out-bounce":hV(sV),"in-out-bounce":pV(sV),"out-in-bounce":vV(sV),"in-elastic":uV,"out-elastic":hV(uV),"in-out-elastic":pV(uV),"out-in-elastic":vV(uV),spring:cV,"spring-in":cV,"spring-out":hV(cV),"spring-in-out":pV(cV),"spring-out-in":vV(cV)},yV=function(t){return t};function mV(t,e){return function(n){if(n>=1)return 1;var r=1/t;return(n+=e*r)-n%r}}var bV="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",xV=new RegExp("cubic-bezier\\(".concat(bV,",").concat(bV,",").concat(bV,",").concat(bV,"\\)")),wV=/steps\(\s*(\d+)\s*\)/,kV=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function EV(t){var e=xV.exec(t);if(e)return QW.apply(void 0,M(e.slice(1).map(Number)));var n=wV.exec(t);if(n)return mV(Number(n[1]),0);var r,i,a=kV.exec(t);return a?mV(Number(a[1]),{start:1,middle:.5,end:0}[a[2]]):gV[(r=t,(i=r,"-"===(i=i.replace(/([A-Z])/g,(function(t){return"-".concat(t.toLowerCase())}))).charAt(0)?i.substring(1):i).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim())]||gV.linear}function OV(t){return"offset"!==t&&"easing"!==t&&"composite"!==t&&"computedOffset"!==t}var SV=function(t,e,n){return function(r){var i=TV(t,e,r);return Oe(i)?i:n(i)}};function MV(t,e,n,r){var i=Uz[t];if(i&&i.syntax&&i.int){var a=qG.styleValueRegistry.getPropertySyntax(i.syntax);if(a){var o=a.parser,s=o?o(e,r):e,u=o?o(n,r):n,c=a.mixer(s,u,r);if(c){var l=SV.apply(void 0,M(c));return function(t){return 0===t?e:1===t?n:l(t)}}}}return SV(!1,!0,(function(t){return t?n:e}))}function TV(t,e,n){if("number"==typeof t&&"number"==typeof e)return t*(1-n)+e*n;if("boolean"==typeof t&&"boolean"==typeof e||"string"==typeof t&&"string"==typeof e)return n<.5?t:e;if(Array.isArray(t)&&Array.isArray(e)){for(var r=t.length,i=e.length,a=Math.max(r,i),o=[],s=0;s<a;s++)o.push(TV(t[s<r?s:r-1],e[s<i?s:i-1],n));return o}throw new Error("Mismatched interpolation arguments ".concat(t,":").concat(e))}var AV=function(){return O((function t(){k(this,t),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=yV,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}),[{key:"easing",get:function(){return this._easing},set:function(t){this.easingFunction=EV(t),this._easing=t}}])}();function PV(t,e){if(null===t)return[];Array.isArray(t)||(t=function(t){var e=[];for(var n in t)if(!(n in["easing","offset","composite"])){var r=t[n];Array.isArray(r)||(r=[r]);for(var i=r.length,a=0;a<i;a++){if(!e[a]){var o={};"offset"in t&&(o.offset=Number(t.offset)),"easing"in t&&(o.easing=t.easing),"composite"in t&&(o.composite=t.composite),e[a]=o}void 0!==r[a]&&null!==r[a]&&(e[a][n]=r[a])}}return e.sort((function(t,e){return(t.computedOffset||0)-(e.computedOffset||0)})),e}(t));for(var n=t.map((function(t){var n={};for(var r in null!=e&&e.composite&&(n.composite="auto"),t){var i=t[r];if("offset"===r){if(null!==i){if(i=Number(i),!isFinite(i))throw new Error("Keyframe offsets must be numbers.");if(i<0||i>1)throw new Error("Keyframe offsets must be between 0 and 1.");n.computedOffset=i}}else if("composite"===r&&-1===["replace","add","accumulate","auto"].indexOf(i))throw new Error("".concat(i," compositing is not supported"));n[r]=i}return void 0===n.offset&&(n.offset=null),void 0===n.easing&&(n.easing=(null==e?void 0:e.easing)||"linear"),void 0===n.composite&&(n.composite="auto"),n})),r=!0,i=-1/0,a=0;a<n.length;a++){var o=n[a].offset;if(Me(o))r=!1;else{if(o<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=o}}return n=n.filter((function(t){return Number(t.offset)>=0&&Number(t.offset)<=1})),r||function(){var t,e,r=n.length;n[r-1].computedOffset=Number(null!==(t=n[r-1].offset)&&void 0!==t?t:1),r>1&&(n[0].computedOffset=Number(null!==(e=n[0].offset)&&void 0!==e?e:0));for(var i=0,a=Number(n[0].computedOffset),o=1;o<r;o++){var s=n[o].computedOffset;if(!Me(s)&&!Me(a)){for(var u=1;u<o-i;u++)n[i+u].computedOffset=a+(Number(s)-a)*u/(o-i);i=o,a=Number(s)}}}(),n}var NV="backwards|forwards|both|none".split("|"),CV="reverse|alternate|alternate-reverse".split("|");var _V=function(){return O((function t(e,n,r){var i,a=this;k(this,t),this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=function(t,e){return function(t,e){var n=new AV;return e&&(n.fill="both",n.duration="auto"),"number"!=typeof t||isNaN(t)?void 0!==t&&Object.keys(t).forEach((function(e){if(void 0!==t[e]&&null!==t[e]&&"auto"!==t[e]){if(("number"==typeof n[e]||"duration"===e)&&("number"!=typeof t[e]||isNaN(t[e])))return;if("fill"===e&&-1===NV.indexOf(t[e]))return;if("direction"===e&&-1===CV.indexOf(t[e]))return;n[e]=t[e]}})):n.duration=t,n}(t=function(t){return"number"==typeof t&&(t=isNaN(t)?{duration:"auto"}:{duration:t}),t}(null!=t?t:{duration:"auto"}),e)}(r,!1),this.timing.effect=this,this.timing.activeDuration=(i=this.timing,Math.abs(function(t){var e;return 0===t.duration||0===t.iterations?0:("auto"===t.duration?0:Number(t.duration))*(null!==(e=t.iterations)&&void 0!==e?e:1)}(i)/(i.playbackRate||1))),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=PV(n,this.timing),this.interpolations=function(t,e,n){var r=function(t,e){for(var n={},r=0;r<t.length;r++)for(var i in t[r])if(OV(i)){var a={offset:t[r].offset,computedOffset:t[r].computedOffset,easing:t[r].easing,easingFunction:EV(t[r].easing)||e.easingFunction,value:t[r][i]};n[i]=n[i]||[],n[i].push(a)}return n}(t,e),i=function(t,e){var n=[];for(var r in t)for(var i=t[r],a=0;a<i.length-1;a++){var o=a,s=a+1,u=i[o].computedOffset,c=i[s].computedOffset,l=u,f=c;0===a&&(l=-1/0,0===c&&(s=o)),a===i.length-2&&(f=1/0,1===u&&(o=s)),n.push({applyFrom:l,applyTo:f,startOffset:i[o].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[o].easingFunction,property:r,interpolation:MV(r,i[o].value,i[s].value,e)})}return n.sort((function(t,e){return t.startOffset-e.startOffset})),n}(r,n);return function(t,e){if(null!==e)i.filter((function(t){return e>=t.applyFrom&&e<t.applyTo})).forEach((function(n){var r=e-n.startOffset,i=n.endOffset-n.startOffset,a=0===i?0:r/i;t.setAttribute(n.property,n.interpolation(a),!1,!1)}));else for(var n in r)OV(n)&&t.setAttribute(n,null)}}(this.normalizedKeyframes,this.timing,this.target);var o=qG.globalThis.Proxy;this.computedTiming=o?new o(this.timing,{get:function(t,e){return"duration"===e?"auto"===t.duration?0:t.duration:"fill"===e?"auto"===t.fill?"none":t.fill:"localTime"===e?a.animation&&a.animation.currentTime||null:"currentIteration"===e?a.animation&&"running"===a.animation.playState?t.currentIteration||0:null:"progress"===e?a.animation&&"running"===a.animation.playState?t.progress||0:null:t[e]},set:function(){return!0}}):this.timing}),[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(t){return null!==t&&(this.timeFraction=function(t,e,n){var r=function(t,e,n){if(null===e)return 0;var r=n.endTime;return e<Math.min(n.delay,r)?1:e>=Math.min(n.delay+t+n.endDelay,r)?2:3}(t,e,n),i=function(t,e,n,r,i){switch(r){case 1:return"backwards"===e||"both"===e?0:null;case 3:return n-i;case 2:return"forwards"===e||"both"===e?t:null;case 0:return null}}(t,n.fill,e,r,n.delay);if(null===i)return null;var a="auto"===n.duration?0:n.duration,o=function(t,e,n,r,i){var a=i;return 0===t?1!==e&&(a+=n):a+=r/t,a}(a,r,n.iterations,i,n.iterationStart),s=function(t,e,n,r,i,a){var o=t===1/0?e%1:t%1;return 0!==o||2!==n||0===r||0===i&&0!==a||(o=1),o}(o,n.iterationStart,r,n.iterations,i,a),u=function(t,e,n,r){return 2===t&&e===1/0?1/0:1===n?Math.floor(r)-1:Math.floor(r)}(r,n.iterations,s,o),c=function(t,e,n){var r=t;if("normal"!==t&&"reverse"!==t){var i=e;"alternate-reverse"===t&&(i+=1),r="normal",i!==1/0&&i%2!=0&&(r="reverse")}return"normal"===r?n:1-n}(n.direction,u,s);return n.currentIteration=u,n.progress=c,n.easingFunction(c)}(this.timing.activeDuration,t,this.timing),null!==this.timeFraction)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(t){this.normalizedKeyframes=PV(t)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(t){var e=this;Object.keys(t||{}).forEach((function(n){e.timing[n]=t[n]}))}}])}();function LV(t,e){return Number(t.id)-Number(e.id)}var RV=function(){return O((function t(e){var n=this;k(this,t),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(t){n.currentTime=t,n.discardAnimations(),0===n.animations.length?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(t){var e=n.rafCallbacks;n.rafCallbacks=[],t<Number(n.currentTime)&&(t=Number(n.currentTime)),n.animations.sort(LV),n.animations=n.tick(t,!0,n.animations)[0],e.forEach((function(e){e[1](t)})),n.applyPendingEffects()},this.document=e}),[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(t,e,n){var r=new _V(t,e,n),i=new HW(r,this);return this.animations.push(i),this.restartWebAnimationsNextTick(),i.updatePromises(),i.play(),i.updatePromises(),i}},{key:"applyDirtiedAnimation",value:function(t){var e=this;if(!this.inTick){t.markTarget();var n=t.targetAnimations();n.sort(LV),this.tick(Number(this.currentTime),!1,n.slice())[1].forEach((function(t){var n=e.animations.indexOf(t);-1!==n&&e.animations.splice(n,1)})),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame((function(){})),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach((function(t){null==t||t.applyInterpolations()})),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter((function(t){return t.updatePromises()}))}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter((function(t){return"finished"!==t.playState&&"idle"!==t.playState}))}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(t){var e=this.rafId++;return 0===this.rafCallbacks.length&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([e,t]),e}},{key:"requestAnimationFrame",value:function(t){var e=this;return this.rAF((function(n){e.updateAnimationsPromises(),t(n),e.updateAnimationsPromises()}))}},{key:"tick",value:function(t,e,n){var r,i,a=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var o=[],s=[],u=[],c=[];return n.forEach((function(n){n.tick(t,e),n._inEffect?(s.push(n.effect),n.markTarget()):(o.push(n.effect),n.unmarkTarget()),n._needsTick&&(a.ticking=!0);var r=n._inEffect||n._needsTick;n._inTimeline=r,r?u.push(n):c.push(n)})),(r=this.pendingEffects).push.apply(r,o),(i=this.pendingEffects).push.apply(i,s),this.ticking&&this.requestAnimationFrame((function(){})),this.inTick=!1,[u,c]}}])}();qG.EasingFunction=EV,qG.AnimationTimeline=RV;var jV=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zV;if(k(this,e),n=N(this,e),Object.defineProperties(n,{_intern:{value:new Map},_key:{value:r}}),null!=t){var i,a=nr(t);try{for(a.s();!(i=a.n()).done;){var o=g(i.value,2),s=o[0],u=o[1];n.set(s,u)}}catch(t){a.e(t)}finally{a.f()}}return n}return _(e,t),O(e,[{key:"get",value:function(t){return Dn(e,"get",this,3)([DV(this,t)])}},{key:"has",value:function(t){return Dn(e,"has",this,3)([DV(this,t)])}},{key:"set",value:function(t,n){return Dn(e,"set",this,3)([IV(this,t),n])}},{key:"delete",value:function(t){return Dn(e,"delete",this,3)([FV(this,t)])}}])}(PM(Map));function DV(t,e){var n=t._intern,r=(0,t._key)(e);return n.has(r)?n.get(r):e}function IV(t,e){var n=t._intern,r=(0,t._key)(e);return n.has(r)?n.get(r):(n.set(r,e),e)}function FV(t,e){var n=t._intern,r=(0,t._key)(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}function zV(t){return null!==t&&"object"==typeof t?t.valueOf():t}function BV(t){return t}function GV(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return YV(t,BV,BV,n)}function WV(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return YV(t,Array.from,BV,n)}function VV(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return YV(t,BV,e,r)}function HV(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return YV(t,Array.from,e,r)}function YV(t,e,n,r){return function t(i,a){if(a>=r.length)return n(i);var o,s=new jV,u=r[a++],c=-1,l=nr(i);try{for(l.s();!(o=l.n()).done;){var f=o.value,d=u(f,++c,i),h=s.get(d);h?h.push(f):s.set(d,[f])}}catch(t){l.e(t)}finally{l.f()}var p,v=nr(s);try{for(v.s();!(p=v.n()).done;){var y=g(p.value,2),m=y[0],b=y[1];s.set(m,t(b,a))}}catch(t){v.e(t)}finally{v.f()}return e(s)}(t,0)}var UV=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"getDefaultOptions",value:function(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:MM}}},{key:"map",value:function(t){var e=g(this.options.range,1)[0];return void 0!==e?e:this.options.unknown}},{key:"invert",value:function(t){var e=g(this.options.range,1)[0];return t===e&&void 0!==e?this.options.domain:[]}},{key:"getTicks",value:function(){var t=this.options,e=t.tickMethod,n=t.domain,r=t.tickCount,i=g(n,2),a=i[0],o=i[1];return Oe(a)&&Oe(o)?e(a,o,r):[]}},{key:"clone",value:function(){return new e(this.options)}}])}(iM);function qV(t){for(var e,n=t;n;){if("view"===(null===(e=n.attributes)||void 0===e?void 0:e.class))return n;n=n.parentNode}return null}function XV(t,e){var n=null!=e?e:qV(t).__data__,r=t.__data__,i=r.markKey,a=r.index,o=r.seriesIndex,s=n.markState,u=Array.from(s.keys()).find((function(t){return t.key===i}));if(u)return o?o.map((function(t){return u.data[t]})):u.data[a]}function KV(t){return $V(qV(t).__data__.scale,t.__data__)}function $V(t,e){var n=t.color,r=t.series,i=t.facet,a=void 0!==i&&i,o=e.color,s=e.series,u=function(t){return t&&t.invert&&!(t instanceof GM)&&!(t instanceof UV)};if(u(r))return r.clone().invert(s);if(s&&r instanceof GM&&r.invert(s)!==o&&!a)return r.invert(s);if(u(n)){var c=n.invert(o);return Array.isArray(c)?null:c}return null}function ZV(t){return t}function QV(t){return t.reduce((function(t,e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return e.apply(void 0,[t.apply(void 0,[n].concat(i))].concat(i))}}),ZV)}function JV(t){var e=this;return t.reduce((function(t,n){return function(r){return i=e,a=void 0,o=void 0,s=Jn().mark((function e(){var i;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:return i=e.sent,e.abrupt("return",n(i));case 4:case"end":return e.stop()}}),e)})),new(o||(o=Promise))((function(t,e){function n(t){try{u(s.next(t))}catch(t){e(t)}}function r(t){try{u(s.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof o?t:new o((function(e){e(t)}))}(e.value).then(n,r)}u((s=s.apply(i,a||[])).next())}));var i,a,o,s}}),ZV)}function tH(t){return t.replace(/( |^)[a-z]/g,(function(t){return t.toUpperCase()}))}function eH(){throw new Error(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}function nH(t,e){for(var n=e.attributes,r=new Set(["id","className"]),i=0,a=Object.entries(n);i<a.length;i++){var o=g(a[i],2),s=o[0],u=o[1];r.has(s)||t.attr(s,u)}}function rH(t){return null!=t&&!Number.isNaN(t)}function iH(t,e){return aH(t,e)||{}}function aH(t,e){var n=Object.entries(t||{}).filter((function(t){return g(t,1)[0].startsWith(e)})).map((function(t){var n=g(t,2),r=n[0],i=n[1];return[fh(r.replace(e,"").trim()),i]})).filter((function(t){return!!g(t,1)[0]}));return 0===n.length?null:Object.fromEntries(n)}function oH(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Object.fromEntries(Object.entries(t).filter((function(t){var e=g(t,1)[0];return n.every((function(t){return!e.startsWith(t)}))})))}function sH(t,e){if(void 0===t)return null;if("number"==typeof t)return t;var n=+t.replace("%","");return Number.isNaN(n)?null:n/100*e}function uH(t){return!("object"!=typeof t||t instanceof Date||null===t||Array.isArray(t))}function cH(t){return null===t||!1===t}function lH(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!(r>=n)){for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i],s=e[o];dd(s)&&dd(t[o])?lH(t[o],s,n,r+1):t[o]=s}return t}}function fH(t){return new dH([t],null,t,t.ownerDocument)}var dH=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[null,null,null,null,null],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];k(this,t),this._elements=Array.from(e),this._data=n,this._parent=r,this._document=i,this._enter=a[0],this._update=a[1],this._exit=a[2],this._merge=a[3],this._split=a[4],this._transitions=o,this._facetElements=s}return O(t,[{key:"selectAll",value:function(e){return new t("string"==typeof e?this._parent.querySelectorAll(e):e,null,this._elements[0],this._document)}},{key:"selectFacetAll",value:function(e){var n="string"==typeof e?this._parent.querySelectorAll(e):e;return new t(this._elements,null,this._parent,this._document,void 0,void 0,n)}},{key:"select",value:function(e){var n="string"==typeof e?this._parent.querySelectorAll(e)[0]||null:e;return new t([n],null,n,this._document)}},{key:"append",value:function(e){var n=this,r="function"==typeof e?e:function(){return n.createElement(e)},i=[];if(null!==this._data){for(var a=0;a<this._data.length;a++){var o=this._data[a],s=g(Array.isArray(o)?o:[o,null],2),u=s[0],c=s[1],l=r(u,a);l.__data__=u,null!==c&&(l.__fromElements__=c),this._parent.appendChild(l),i.push(l)}return new t(i,null,this._parent,this._document)}for(var f=0;f<this._elements.length;f++){var d=this._elements[f],h=r(d.__data__,f);d.appendChild(h),i.push(h)}return new t(i,null,i[0],this._document)}},{key:"maybeAppend",value:function(e,n,r){var i=this._elements[0],a=i.getElementById(e);if(a)return new t([a],null,this._parent,this._document);var o="string"==typeof n?this.createElement(n):n();return o.id=e,r&&(o.className=r),i.appendChild(o),new t([o],null,this._parent,this._document)}},{key:"data",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null},i=[],a=[],o=new Set(this._elements),s=[],u=new Set,c=new Map(this._elements.map((function(t,e){return[n(t.__data__,e),t]}))),l=new Map(this._facetElements.map((function(t,e){return[n(t.__data__,e),t]}))),f=GV(this._elements,(function(t){return r(t.__data__)})),d=0;d<e.length;d++){var h=e[d],p=n(h,d),v=r(h,d);if(c.has(p)){var g=c.get(p);g.__data__=h,g.__facet__=!1,a.push(g),o.delete(g),c.delete(p)}else if(l.has(p)){var y=l.get(p);y.__data__=h,y.__facet__=!0,a.push(y),l.delete(p)}else if(f.has(p)){var m=f.get(p);s.push([h,m]);var b,x=nr(m);try{for(x.s();!(b=x.n()).done;){var w=b.value;o.delete(w)}}catch(t){x.e(t)}finally{x.f()}f.delete(p)}else if(c.has(v)){var k=c.get(v);k.__toData__?k.__toData__.push(h):k.__toData__=[h],u.add(k),o.delete(k)}else i.push(h)}var E=[new t([],i,this._parent,this._document),new t(a,null,this._parent,this._document),new t(o,null,this._parent,this._document),new t([],s,this._parent,this._document),new t(u,null,this._parent,this._document)];return new t(this._elements,null,this._parent,this._document,E)}},{key:"merge",value:function(e){var n=[].concat(M(this._elements),M(e._elements)),r=[].concat(M(this._transitions),M(e._transitions));return new t(n,null,this._parent,this._document,void 0,r)}},{key:"createElement",value:function(e){if(this._document)return this._document.createElement(e,{});var n=t.registry[e];return n?new n:eH("Unknown node type: ".concat(e))}},{key:"join",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t.remove()},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return t},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(t){return t.remove()},a=t(this._enter),o=e(this._update),s=n(this._exit),u=r(this._merge),c=i(this._split);return o.merge(a).merge(s).merge(u).merge(c)}},{key:"remove",value:function(){for(var e=this,n=function(t){var n=e._transitions[t];if(n){var r=Array.isArray(n)?n:[n];Promise.all(r.map((function(t){return t.finished}))).then((function(){e._elements[t].remove()}))}else e._elements[t].remove()},r=0;r<this._elements.length;r++)n(r);return new t([],null,this._parent,this._document,void 0,this._transitions)}},{key:"each",value:function(t){for(var e=0;e<this._elements.length;e++){var n=this._elements[e];t(n.__data__,e,n)}return this}},{key:"attr",value:function(t,e){var n="function"!=typeof e?function(){return e}:e;return this.each((function(r,i,a){void 0!==e&&(a[t]=n(r,i,a))}))}},{key:"style",value:function(t,e){var n="function"!=typeof e?function(){return e}:e;return this.each((function(r,i,a){void 0!==e&&(a.style[t]=n(r,i,a))}))}},{key:"transition",value:function(t){var e="function"!=typeof t?function(){return t}:t,n=this._transitions;return this.each((function(t,r,i){n[r]=e(t,r,i)}))}},{key:"on",value:function(t,e){return this.each((function(n,r,i){i.addEventListener(t,e)})),this}},{key:"call",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this].concat(n)),this}},{key:"node",value:function(){return this._elements[0]}},{key:"nodes",value:function(){return this._elements}},{key:"transitions",value:function(){return this._transitions}},{key:"parent",value:function(){return this._parent}}])}();function hH(t,e){var n=g(t,2),r=n[0],i=n[1],a=g(e,2);return[r-a[0],i-a[1]]}function pH(t,e){var n=g(t,2),r=n[0],i=n[1],a=g(e,2);return[r+a[0],i+a[1]]}function vH(t,e){var n=g(t,2),r=n[0],i=n[1],a=g(e,2),o=a[0],s=a[1];return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-s,2))}function gH(t){var e=g(t,2),n=e[0],r=e[1];return Math.atan2(r,n)}function yH(t){var e=g(t,2);return gH([e[0],e[1]])+Math.PI/2}function mH(t,e){var n=gH(t),r=gH(e);return n<r?r-n:2*Math.PI-(n-r)}function bH(t){var e,n=1/0,r=-1/0,i=1/0,a=-1/0,o=nr(t);try{for(o.s();!(e=o.n()).done;){var s=g(e.value,2),u=s[0],c=s[1];n=Math.min(u,n),r=Math.max(u,r),i=Math.min(c,i),a=Math.max(c,a)}}catch(t){o.e(t)}finally{o.f()}return[n,i,r-n,a-i]}function xH(t,e){var n=g(t,2),r=n[0],i=n[1],a=g(e,2);return[(r+a[0])/2,(i+a[1])/2]}function wH(t,e,n){return Math.max(e,Math.min(t,n))}function kH(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return"number"!=typeof t||Math.abs(t)<1e-15?t:parseFloat(t.toFixed(e))}function EH(t,e){var n,r;if(void 0===e){var i,a=nr(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;null!=o&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}}catch(t){a.e(t)}finally{a.f()}}else{var s,u=-1,c=nr(t);try{for(c.s();!(s=c.n()).done;){var l=s.value;null!=(l=e(l,++u,t))&&(void 0===n?l>=l&&(n=r=l):(n>l&&(n=l),r<l&&(r=l)))}}catch(t){c.e(t)}finally{c.f()}}return[n,r]}function OH(t,e){return Object.entries(t).reduce((function(n,r){var i=g(r,2),a=i[0],o=i[1];return n[a]=e(o,a,t),n}),{})}function SH(t){return t.map((function(t,e){return e}))}function MH(t){return t[0]}function TH(t){return t[t.length-1]}function AH(t,e){var n=[[],[]];return t.forEach((function(t){n[e(t)?0:1].push(t)})),n}function PH(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length;if(1===e)return t.map((function(t){return[t]}));for(var n=[],r=function(r){PH(t.slice(r+1),e-1).forEach((function(e){n.push([t[r]].concat(M(e)))}))},i=0;i<t.length;i++)r(i);return n}function NH(t,e){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=g(r[n],2),a=i[0],o=i[1];t.style(a,o)}}function CH(t,e,n,r,i){var a=gH(hH(r,e))+Math.PI,o=gH(hH(r,n))+Math.PI;return t.arc(r[0],r[1],i,a,o,o-a<0),t}function _H(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"y",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"between",a="y"===r||!0===r?n:e,o=function(t,e){return"y"===t||!0===t?e?180:90:e?90:0}(r,arguments.length>5&&void 0!==arguments[5]&&arguments[5]),s=SH(a),u=g(EH(s,(function(t){return a[t]})),2),c=u[0],l=u[1],f=new TM({domain:[c,l],range:[0,100]}),d=function(t){return Oe(a[t])&&!Number.isNaN(a[t])?f.map(a[t]):0},h={between:function(e){return"".concat(t[e]," ").concat(d(e),"%")},start:function(e){return 0===e?"".concat(t[e]," ").concat(d(e),"%"):"".concat(t[e-1]," ").concat(d(e),"%, ").concat(t[e]," ").concat(d(e),"%")},end:function(e){return e===t.length-1?"".concat(t[e]," ").concat(d(e),"%"):"".concat(t[e]," ").concat(d(e),"%, ").concat(t[e+1]," ").concat(d(e),"%")}},p=s.sort((function(t,e){return d(t)-d(e)})).map(h[i]||h.between).join(",");return"linear-gradient(".concat(o,"deg, ").concat(p,")")}function LH(t){var e=g(t,4),n=e[0],r=e[1],i=e[2];return[e[3],n,r,i]}function RH(t,e,n){var r=g(sD(t)?LH(e):e,4),i=r[0],a=r[1],o=r[3],s=g(n,2),u=s[0],c=s[1],l=t.getCenter(),f=yH(hH(i,l)),d=yH(hH(a,l)),h=d===f&&u!==c?d+2*Math.PI:d;return{startAngle:f,endAngle:h-f>=0?h:2*Math.PI+h,innerRadius:vH(o,l),outerRadius:vH(i,l)}}function jH(t){var e=t.colorAttribute,n=t.opacityAttribute;return"".concat(void 0===n?e:n,"Opacity")}function DH(t,e){if(!uD(t))return"";var n=t.getCenter(),r=e.transform;return"translate(".concat(n[0],", ").concat(n[1],") ").concat(r||"")}function IH(t){if(1===t.length)return t[0];var e=g(t,2),n=g(e[0],3),r=n[0],i=n[1],a=n[2],o=void 0===a?0:a,s=g(e[1],3),u=s[0],c=s[1],l=s[2];return[(r+u)/2,(i+c)/2,(o+(void 0===l?0:l))/2]}dH.registry={g:fW,rect:EW,circle:sW,path:mW,text:SW,ellipse:lW,image:pW,line:gW,polygon:xW,polyline:kW,html:hW};var FH=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function zH(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=i.inset,o=void 0===a?0:a,s=i.radius,u=void 0===s?0:s,c=i.insetLeft,l=void 0===c?o:c,f=i.insetTop,d=void 0===f?o:f,h=i.insetRight,p=void 0===h?o:h,v=i.insetBottom,y=void 0===v?o:v,m=i.radiusBottomLeft,b=void 0===m?u:m,x=i.radiusBottomRight,w=void 0===x?u:x,k=i.radiusTopLeft,E=void 0===k?u:k,O=i.radiusTopRight,S=void 0===O?u:O,M=i.minWidth,T=void 0===M?-1/0:M,A=i.maxWidth,P=void 0===A?1/0:A,N=i.minHeight,C=void 0===N?-1/0:N,_=FH(i,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!uD(r)&&!lD(r)){var L=!!sD(r),R=g(L?LH(e):e,3),j=R[0],D=R[2],I=g(j,2),F=I[0],z=I[1],B=g(hH(D,j),2),G=B[0],W=B[1],V=(G>0?F:F+G)+l,H=(W>0?z:z+W)+d,Y=Math.abs(G)-(l+p),U=Math.abs(W)-(d+y),q=L?wH(Y,C,1/0):wH(Y,T,P),X=L?wH(U,T,P):wH(U,C,1/0),K=L?V:V-(q-Y)/2,$=L?H-(X-U)/2:H-(X-U);return fH(t.createElement("rect",{})).style("x",K).style("y",$).style("width",q).style("height",X).style("radius",[E,S,w,b]).call(NH,_).node()}var Z=n.y,Q=n.y1,J=r.getCenter(),tt=RH(r,e,[Z,Q]),et=oD().cornerRadius(u).padAngle(o*Math.PI/180);return fH(t.createElement("path",{})).style("d",et(tt)).style("transform","translate(".concat(J[0],", ").concat(J[1],")")).style("radius",u).style("inset",o).call(NH,_).node()}var BH=function(t,e){var n=t.colorAttribute,r=(t.opacityAttribute,t.first),i=void 0===r||r,a=t.last,o=void 0===a||a,s=FH(t,["colorAttribute","opacityAttribute","first","last"]),u=e.coordinate,c=e.document;return function(e,r,a){var l=a.color,f=a.radius,d=void 0===f?0:f,h=FH(a,["color","radius"]),p=h.lineWidth||1,v=s.stroke,g=s.radius,y=void 0===g?d:g,m=s.radiusTopLeft,b=void 0===m?y:m,x=s.radiusTopRight,w=void 0===x?y:x,k=s.radiusBottomRight,E=void 0===k?y:k,O=s.radiusBottomLeft,S=void 0===O?y:O,M=s.innerRadius,T=void 0===M?0:M,A=s.innerRadiusTopLeft,P=void 0===A?T:A,N=s.innerRadiusTopRight,C=void 0===N?T:N,_=s.innerRadiusBottomRight,L=void 0===_?T:_,R=s.innerRadiusBottomLeft,j=void 0===R?T:R,D=s.lineWidth,I=void 0===D?"stroke"===n||v?p:0:D,F=s.inset,z=void 0===F?0:F,B=s.insetLeft,G=void 0===B?z:B,W=s.insetRight,V=void 0===W?z:W,H=s.insetBottom,Y=void 0===H?z:H,U=s.insetTop,q=void 0===U?z:U,X=s.minWidth,K=s.maxWidth,$=s.minHeight,Z=FH(s,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),Q=r.color,J=void 0===Q?l:Q,tt=r.opacity,et=[i?b:P,i?w:C,o?E:L,o?S:j],nt=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];sD(u)&&nt.push(nt.shift());var rt=Object.assign(Object.assign({radius:y},Object.fromEntries(nt.map((function(t,e){return[t,et[e]]})))),{inset:z,insetLeft:G,insetRight:V,insetBottom:Y,insetTop:q,minWidth:X,maxWidth:K,minHeight:$});return fH(zH(c,e,r,u,rt)).call(NH,h).style("fill","transparent").style(n,J).style(jH(t),tt).style("lineWidth",I).style("stroke",void 0===v?J:v).call(NH,Z).node()}};BH.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var GH=function(t,e){return BH(Object.assign({colorAttribute:"fill"},t),e)};GH.props=Object.assign(Object.assign({},BH.props),{defaultMarker:"square"});var WH=function(t,e){return BH(Object.assign({colorAttribute:"stroke"},t),e)};function VH(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function HH(t){this._context=t}function YH(t){return new HH(t)}function UH(t){return t[0]}function qH(t){return t[1]}function XH(t,e){var n=bj(!0),r=null,i=YH,a=null,o=Jj(s);function s(s){var u,c,l,f=(s=VH(s)).length,d=!1;for(null==r&&(a=i(l=o())),u=0;u<=f;++u)!(u<f&&n(c=s[u],u,s))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(c,u,s),+e(c,u,s));if(l)return a=null,l+""||null}return t="function"==typeof t?t:void 0===t?UH:bj(t),e="function"==typeof e?e:void 0===e?qH:bj(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:bj(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:bj(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:bj(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),s):r},s}function KH(){}function $H(t){this._context=t}function ZH(t){return new $H(t)}WH.props=Object.assign(Object.assign({},BH.props),{defaultMarker:"hollowSquare"}),Array.prototype.slice,HH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},$H.prototype={areaStart:KH,areaEnd:KH,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var QH=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function JH(t,e,n){var r=g(t,4),i=r[0],a=r[1],o=r[2],s=r[3];return sD(n)?[i,[e?e[0][0]:a[0],a[1]],[e?e[3][0]:o[0],o[1]],s]:[i,[a[0],e?e[0][1]:a[1]],[o[0],e?e[3][1]:o[1]],s]}var tY=function(t,e){var n=t.adjustPoints,r=void 0===n?JH:n,i=QH(t,["adjustPoints"]),a=e.coordinate,o=e.document;return function(t,e,n,s){var u=e.index,c=n.color,l=QH(n,["color"]),f=s[u+1],d=r(t,f,a),h=g(sD(a)?LH(d):d,4),p=h[0],v=h[1],y=h[2],m=h[3],b=e.color,x=void 0===b?c:b,w=e.opacity,k=XH().curve(ZH)([p,v,y,m]);return fH(o.createElement("path",{})).call(NH,l).style("d",k).style("fill",x).style("fillOpacity",w).call(NH,i).node()}};function eY(t,e,n){var r=g(t,4),i=r[0],a=r[1],o=r[2],s=r[3];return sD(n)?[i,[e?e[0][0]:(a[0]+o[0])/2,a[1]],[e?e[3][0]:(a[0]+o[0])/2,o[1]],s]:[i,[a[0],e?e[0][1]:(a[1]+o[1])/2],[o[0],e?e[3][1]:(a[1]+o[1])/2],s]}tY.props={defaultMarker:"square"};var nY=function(t,e){return tY(Object.assign({adjustPoints:eY},t),e)};function rY(t){return Math.abs(t)>10?String(t):t.toString().padStart(2,"0")}nY.props={defaultMarker:"square"};var iY=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).channel,e=void 0===t?"x":t;return function(t,n){var r=n.encode,i=n.tooltip;if(cH(i))return[t,n];if(void 0!==i.title)return[t,n];var a=Object.keys(r).filter((function(t){return t.startsWith(e)})).filter((function(t){return!r[t].inferred})).map((function(t){return pj(r,t)})).filter((function(t){return g(t,1)[0]})).map((function(t){return t[0]}));if(0===a.length)return[t,n];var o,s=[],u=nr(t);try{var c=function(){var t=o.value;s[t]={value:a.map((function(e){return e[t]instanceof Date?function(t){var e=t.getFullYear(),n=rY(t.getMonth()+1),r=rY(t.getDate()),i="".concat(e,"-").concat(n,"-").concat(r),a=t.getHours(),o=t.getMinutes(),s=t.getSeconds();return a||o||s?"".concat(i," ").concat(rY(a),":").concat(rY(o),":").concat(rY(s)):i}(e[t]):e[t]})).join(", ")}};for(u.s();!(o=u.n()).done;)c()}catch(t){u.e(t)}finally{u.f()}return[t,vd({},n,{tooltip:{title:s}})]}};iY.props={};var aY=function(t){var e=t.channel;return function(t,n){var r=n.encode,i=n.tooltip;if(cH(i))return[t,n];var a=i.items,o=void 0===a?[]:a;if(!o||o.length>0)return[t,n];var s=(Array.isArray(e)?e:[e]).flatMap((function(t){return Object.keys(r).filter((function(e){return e.startsWith(t)})).map((function(t){var e=r[t],n=e.field,i=e.value,a=e.inferred,o=void 0!==a&&a,s=e.aggregate;return o?null:s&&i?{channel:t}:n?{field:n}:i?{channel:t}:null})).filter((function(t){return null!==t}))}));return[t,vd({},n,{tooltip:{items:s}})]}};aY.props={};var oY=function(){return function(t,e){var n=e.encode,r=n.key,i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(n,["key"]);if(void 0!==r)return[t,e];var a=Object.values(i).map((function(t){return t.value})),o=t.map((function(t){return a.filter(Array.isArray).map((function(e){return e[t]})).join("-")}));return[t,vd({},e,{encode:{key:cj(o)}})]}};function sY(){return[{name:"color"},{name:"opacity"},{name:"shape",range:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).shapes},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function uY(){return[].concat(M(sY(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})),[{name:"title",scale:"identity"}])}function cY(){return[{type:iY,channel:"color"},{type:aY,channel:["x","y"]}]}function lY(){return[{type:iY,channel:"x"},{type:aY,channel:["y"]}]}function fY(){return sY(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function dY(){return[{type:oY}]}function hY(t,e){return t.getBandWidth(t.invert(e))}function pY(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.x,i=e.y,a=e.series,o=t.x,s=t.y,u=t.series,c=n.style,l=void 0===c?{}:c,f=l.bandOffset,d=void 0===f?u?0:.5:f,h=l.bandOffsetX,p=void 0===h?d:h,v=l.bandOffsetY,y=void 0===v?d:v,m=!!(null==o?void 0:o.getBandWidth),b=!!(null==s?void 0:s.getBandWidth),x=!!(null==u?void 0:u.getBandWidth);return m||b?function(t,e){var n=m?hY(o,r[e]):0,c=b?hY(s,i[e]):0,l=x&&a?(hY(u,a[e])/2+ +a[e])*n:0,f=g(t,2),d=f[0],h=f[1];return[d+p*n+l,h+y*c]}:function(t){return t}}function vY(t){return parseFloat(t)/100}function gY(t,e,n,r){var i=n.x,a=n.y,o=r.getOptions(),s=o.innerWidth,u=o.innerHeight,c=Array.from(t,(function(t){var e=i[t],n=a[t];return[["string"==typeof e?vY(e)*s:+e,"string"==typeof n?vY(n)*u:+n]]}));return[t,c]}function yY(t){return"function"==typeof t?t:function(e){return e[t]}}function mY(t,e){return Array.from(t,yY(e))}function bY(t,e){var n=e.source,r=void 0===n?function(t){return t.source}:n,i=e.target,a=void 0===i?function(t){return t.target}:i,o=e.value,s=void 0===o?function(t){return t.value}:o,u=t.links,c=t.nodes,l=mY(u,r),f=mY(u,a),d=mY(u,s);return{links:u.map((function(t,e){return{target:f[e],source:l[e],value:d[e]}})),nodes:c||Array.from(new Set([].concat(M(l),M(f))),(function(t){return{key:t}}))}}function xY(t,e){return t.getBandWidth(t.invert(e))}oY.props={};var wY={rect:GH,hollow:WH,funnel:tY,pyramid:nY},kY=function(){return function(t,e,n,r){var i=n.x,a=n.y,o=n.y1,s=n.series,u=n.size,c=e.x,l=e.series,f=g(r.getSize(),1)[0],d=u?u.map((function(t){return+t/f})):null,h=u?function(t,e,n){var r=t+e/2,i=d[n];return[r-i/2,r+i/2]}:function(t,e,n){return[t,t+e]},p=Array.from(t,(function(t){var e=xY(c,i[t]),n=e*(l?xY(l,null==s?void 0:s[t]):1),u=(+(null==s?void 0:s[t])||0)*e,f=+i[t]+u,d=g(h(f,n,t),2),p=d[0],v=d[1],y=+a[t],m=+o[t];return[[p,y],[v,y],[v,m],[p,m]].map((function(t){return r.map(t)}))}));return[t,p]}};kY.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:wY,channels:[].concat(M(uY({shapes:Object.keys(wY)})),[{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}]),preInference:[].concat(M(dY()),[{type:yj},{type:mj}]),postInference:[].concat(M([]),M(lY())),interaction:{shareTooltip:!0}};var EY={rect:GH,hollow:WH},OY=function(){return function(t,e,n,r){var i=n.x,a=n.x1,o=n.y,s=n.y1,u=Array.from(t,(function(t){return[[+i[t],+o[t]],[+a[t],+o[t]],[+a[t],+s[t]],[+i[t],+s[t]]].map((function(t){return r.map(t)}))}));return[t,u]}};OY.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:EY,channels:[].concat(M(uY({shapes:Object.keys(EY)})),[{name:"x",required:!0},{name:"y",required:!0}]),preInference:[].concat(M(dY()),[{type:yj}]),postInference:[].concat(M([]),M(lY())),interaction:{shareTooltip:!0}};var SY=TY(YH);function MY(t){this._curve=t}function TY(t){function e(e){return new MY(t(e))}return e._curve=t,e}function AY(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(TY(t)):e()._curve},t}function PY(t){var e="function"==typeof t?t:t.render;return function(t){function n(){return k(this,n),N(this,n,arguments)}return _(n,t),O(n,[{key:"connectedCallback",value:function(){this.draw()}},{key:"attributeChangedCallback",value:function(){this.draw()}},{key:"draw",value:function(){e(this)}}])}(cW)}MY.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var NY=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},CY=PY((function(t){var e=t.attributes,n=e.d1,r=e.d2,i=e.style1,a=e.style2,o=t.ownerDocument;fH(t).maybeAppend("line",(function(){return o.createElement("path",{})})).style("d",n).call(NH,i),fH(t).maybeAppend("line1",(function(){return o.createElement("path",{})})).style("d",r).call(NH,a)})),_Y=function(t,e){var n=t.curve,r=t.gradient,i=void 0!==r&&r,a=t.gradientColor,o=void 0===a?"between":a,s=t.defined,u=void 0===s?function(t){return!Number.isNaN(t)&&null!=t}:s,c=t.connect,l=void 0!==c&&c,f=NY(t,["curve","gradient","gradientColor","defined","connect"]),d=e.coordinate,h=e.document;return function(t,e,r){var a,s=r.color,c=r.lineWidth,p=NY(r,["color","lineWidth"]),v=e.color,y=void 0===v?s:v,m=e.size,b=void 0===m?c:m,x=e.seriesColor,w=e.seriesX,k=e.seriesY,E=DH(d,e),O=sD(d),S=i&&x?_H(x,w,k,i,o,O):y,M=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},p),S&&{stroke:S}),b&&{lineWidth:b}),E&&{transform:E}),f);if(uD(d)){var T=d.getCenter();a=function(t){return AY(XH().curve(SY)).angle((function(e,n){return yH(hH(t[n],T))})).radius((function(e,n){return vH(t[n],T)})).defined((function(t){var e=g(t,2),n=e[0],r=e[1];return u(n)&&u(r)})).curve(n)(t)}}else a=XH().x((function(t){return t[0]})).y((function(t){return t[1]})).defined((function(t){var e=g(t,2),n=e[0],r=e[1];return u(n)&&u(r)})).curve(n);var A,P=function(t,e){var n,r=[],i=[],a=!1,o=null,s=nr(t);try{for(s.s();!(n=s.n()).done;){var u=n.value;e(u[0])&&e(u[1])?(r.push(u),a&&(a=!1,i.push([o,u])),o=u):a=!0}}catch(t){s.e(t)}finally{s.f()}return[r,i]}(t,u),N=g(P,2),C=N[0],_=N[1],L=iH(M,"connect"),R=!!_.length;return!R||l&&!Object.keys(L).length?fH(h.createElement("path",{})).style("d",a(C)||[]).call(NH,M).node():R&&!l?fH(h.createElement("path",{})).style("d",a(t)).call(NH,M).node():fH(new CY).style("style1",Object.assign(Object.assign({},M),L)).style("style2",M).style("d1",(A=_,A.map(a).join(","))).style("d2",a(t)).node()}};_Y.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var LY=function(t,e){var n=e.coordinate;return function(){var r=uD(n)?ZH:YH;return _Y(Object.assign({curve:r},t),e).apply(void 0,arguments)}};function RY(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function jY(t,e){this._context=t,this._k=(1-e)/6}function DY(t,e){this._context=t,this._k=(1-e)/6}function IY(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Gj){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>Gj){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*c+t._x1*t._l23_2a-e*t._l12_2a)/l,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function FY(t,e){this._context=t,this._alpha=e}function zY(t,e){this._context=t,this._alpha=e}LY.props=Object.assign(Object.assign({},_Y.props),{defaultMarker:"line"}),jY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:RY(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:RY(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new jY(t,e)}return n.tension=function(e){return t(+e)},n}(0),DY.prototype={areaStart:KH,areaEnd:KH,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:RY(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new DY(t,e)}return n.tension=function(e){return t(+e)},n}(0),FY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:IY(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return e?new FY(t,e):new jY(t,0)}return n.alpha=function(e){return t(+e)},n}(.5),zY.prototype={areaStart:KH,areaEnd:KH,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:IY(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const BY=function t(e){function n(t){return e?new zY(t,e):new DY(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function GY(t){return t<0?-1:1}function WY(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(GY(a)+GY(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function VY(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function HY(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function YY(t){this._context=t}function UY(t){this._context=new qY(t)}function qY(t){this._context=t}function XY(t){return new YY(t)}function KY(t){return new UY(t)}YY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:HY(this,this._t0,VY(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,HY(this,VY(this,n=WY(this,t,e)),n);break;default:HY(this,this._t0,n=WY(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(UY.prototype=Object.create(YY.prototype)).point=function(t,e){YY.prototype.point.call(this,e,t)},qY.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};var $Y=function(t,e){var n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,[]),r=e.coordinate;return function(){var t=uD(r)?BY:sD(r)?KY:XY;return _Y(Object.assign({curve:t},n),e).apply(void 0,arguments)}};function ZY(t,e){this._context=t,this._t=e}function QY(t){return new ZY(t,.5)}function JY(t){return new ZY(t,0)}function tU(t){return new ZY(t,1)}$Y.props=Object.assign(Object.assign({},_Y.props),{defaultMarker:"smooth"}),ZY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var eU=function(t,e){return _Y(Object.assign({curve:tU},t),e)};eU.props=Object.assign(Object.assign({},_Y.props),{defaultMarker:"hv"});var nU=function(t,e){return _Y(Object.assign({curve:JY},t),e)};nU.props=Object.assign(Object.assign({},_Y.props),{defaultMarker:"vh"});var rU=function(t,e){return _Y(Object.assign({curve:QY},t),e)};rU.props=Object.assign(Object.assign({},_Y.props),{defaultMarker:"hvh"});function iU(t,e,n,r,i){var a=gH(hH(n,e)),o=a+Math.PI/2,s=[r/2*Math.cos(o),r/2*Math.sin(o)],u=[i/2*Math.cos(o),i/2*Math.sin(o)],c=[i/2*Math.cos(a),i/2*Math.sin(a)],l=[r/2*Math.cos(a),r/2*Math.sin(a)],f=pH(e,s),d=pH(n,u),h=pH(d,c),p=pH(n,c),v=hH(p,u),g=hH(n,u),y=hH(e,s),m=hH(y,l),b=hH(e,l),x=hH(f,l);t.moveTo.apply(t,M(f)),t.lineTo.apply(t,M(d)),t.arcTo.apply(t,M(h).concat(M(p),[i/2])),t.arcTo.apply(t,M(v).concat(M(g),[i/2])),t.lineTo.apply(t,M(y)),t.arcTo.apply(t,M(m).concat(M(b),[r/2])),t.arcTo.apply(t,M(x).concat(M(f),[r/2])),t.closePath()}var aU=function(t,e){var n=e.document;return function(e,r,i){for(var a=r.seriesSize,o=r.color,s=i.color,u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(i,["color"]),c=Qj(),l=0;l<e.length-1;l++){var f=e[l],d=e[l+1],h=a[l],p=a[l+1];[].concat(M(f),M(d)).every(rH)&&iU(c,f,d,h,p)}return fH(n.createElement("path",{})).call(NH,u).style("fill",o||s).style("d",c.toString()).call(NH,t).node()}};aU.props=Object.assign(Object.assign({},_Y.props),{defaultMarker:"line"});var oU=function(){return function(t,e){var n=e.style,r=void 0===n?{}:n,i=e.encode.series;return!r.gradient||i?[t,e]:[t,vd({},e,{encode:{series:fj(hj(t,void 0))}})]}};oU.props={};var sU=function(){return function(t,e){var n=e.encode,r=n.series,i=n.color;if(void 0!==r||void 0===i)return[t,e];var a=g(pj(n,"color"),2),o=a[0],s=a[1];return[t,vd({},e,{encode:{series:cj(o,s)}})]}};sU.props={};var uU={line:LY,smooth:$Y,hv:eU,vh:nU,hvh:rU,trail:aU},cU=function(t,e,n,r){var i,a,o=n.series,s=n.x,u=n.y,c=e.x,l=e.y;if(void 0===s||void 0===u)throw new Error("Missing encode for x or y channel.");var f=o?Array.from(GV(t,(function(t){return o[t]})).values()):[t],d=f.map((function(t){return t[0]})).filter((function(t){return void 0!==t})),h=((null===(i=null==c?void 0:c.getBandWidth)||void 0===i?void 0:i.call(c))||0)/2,p=((null===(a=null==l?void 0:l.getBandWidth)||void 0===a?void 0:a.call(l))||0)/2,v=Array.from(f,(function(t){return t.map((function(t){return r.map([+s[t]+h,+u[t]+p])}))}));return[d,v,f]},lU=function(t,e,n,r){var i=Object.entries(n).filter((function(t){return g(t,1)[0].startsWith("position")})).map((function(t){return g(t,2)[1]}));if(0===i.length)throw new Error("Missing encode for position channel.");return[t,Array.from(t,(function(t){for(var e=i.map((function(e){return+e[t]})),n=r.map(e),a=[],o=0;o<n.length;o+=2)a.push([n[o],n[o+1]]);return a}))]},fU=function(){return function(t,e,n,r){return(fD(r)?lU:cU)(t,e,n,r)}};fU.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:uU,channels:[].concat(M(uY({shapes:Object.keys(uU)})),[{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}]),preInference:[].concat(M(dY()),[{type:oU},{type:sU}]),postInference:[].concat(M([]),M(lY()),M([{type:iY,channel:"color"},{type:aY,channel:["position"]}])),interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var dU=function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]};dU.style=["fill"];var hU=dU.bind(void 0);hU.style=["stroke","lineWidth"];var pU=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]};pU.style=["fill"];var vU=pU.bind(void 0);vU.style=["fill"];var gU=pU.bind(void 0);gU.style=["stroke","lineWidth"];var yU=function(t,e,n){var r=.618*n;return[["M",t-r,e],["L",t,e-n],["L",t+r,e],["L",t,e+n],["Z"]]};yU.style=["fill"];var mU=yU.bind(void 0);mU.style=["stroke","lineWidth"];var bU=function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]};bU.style=["fill"];var xU=bU.bind(void 0);xU.style=["stroke","lineWidth"];var wU=function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]};wU.style=["fill"];var kU=wU.bind(void 0);kU.style=["stroke","lineWidth"];var EU=function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]};EU.style=["fill"];var OU=EU.bind(void 0);OU.style=["stroke","lineWidth"];var SU=function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]};SU.style=["fill"];var MU=SU.bind(void 0);MU.style=["stroke","lineWidth"];var TU=function(t,e,n){return[["M",t,e+n],["L",t,e-n]]};TU.style=["stroke","lineWidth"];var AU=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]};AU.style=["stroke","lineWidth"];var PU=function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]};PU.style=["stroke","lineWidth"];var NU=function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]};NU.style=["stroke","lineWidth"];var CU=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]};CU.style=["stroke","lineWidth"];var _U=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]};_U.style=["stroke","lineWidth"];var LU=_U.bind(void 0);LU.style=["stroke","lineWidth"];var RU=function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]};RU.style=["stroke","lineWidth"];var jU=function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]};jU.style=["stroke","lineWidth"];var DU=function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]};DU.style=["stroke","lineWidth"];var IU=function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]};IU.style=["stroke","lineWidth"];var FU=function(t,e,n){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]};FU.style=["stroke","lineWidth"];var zU=new Map([["bowtie",SU],["cross",AU],["dash",LU],["diamond",yU],["dot",_U],["hexagon",EU],["hollowBowtie",MU],["hollowDiamond",mU],["hollowHexagon",OU],["hollowPoint",hU],["hollowSquare",gU],["hollowTriangle",xU],["hollowTriangleDown",kU],["hv",jU],["hvh",IU],["hyphen",CU],["line",TU],["plus",NU],["point",dU],["rect",vU],["smooth",RU],["square",pU],["tick",PU],["triangleDown",wU],["triangle",bU],["vh",DU],["vhv",FU]]);function BU(t){return t.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()}))}function GU(t,e,n,r){if(1!==e.length){var i=n.size;if("fixed"===t)return i;if("normal"===t||dD(r)){var a=g(e,2),o=g(a[0],2),s=o[0],u=o[1],c=g(a[1],2),l=c[0],f=c[1],d=Math.abs((l-s)/2),h=Math.abs((f-u)/2);return Math.max(0,(d+h)/2)}return i}}var WU=function(t,e){var n=t.colorAttribute,r=t.symbol,i=t.mode,a=void 0===i?"auto":i,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["colorAttribute","symbol","mode"]),s=zU.get(BU(r))||zU.get("point"),u=e.coordinate,c=e.document;return function(e,r,i){var l=i.lineWidth,f=i.color,d=o.stroke?l||1:l,h=r.color,p=void 0===h?f:h,v=r.transform,y=r.opacity,m=g(IH(e),2),b=m[0],x=m[1],w=GU(a,e,r,u)||o.r||i.r;return fH(c.createElement("path",{})).call(NH,i).style("fill","transparent").style("d",s(b,x,w)).style("lineWidth",d).style("transform",v).style("transformOrigin","".concat(b-w," ").concat(x-w)).style("stroke",p).style(jH(t),y).style(n,p).call(NH,o).node()}};WU.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var VU=function(t,e){return WU(Object.assign({colorAttribute:"stroke",symbol:"point"},t),e)};VU.props=Object.assign({defaultMarker:"hollowPoint"},WU.props);var HU=function(t,e){return WU(Object.assign({colorAttribute:"stroke",symbol:"diamond"},t),e)};HU.props=Object.assign({defaultMarker:"hollowDiamond"},WU.props);var YU=function(t,e){return WU(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},t),e)};YU.props=Object.assign({defaultMarker:"hollowHexagon"},WU.props);var UU=function(t,e){return WU(Object.assign({colorAttribute:"stroke",symbol:"square"},t),e)};UU.props=Object.assign({defaultMarker:"hollowSquare"},WU.props);var qU=function(t,e){return WU(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},t),e)};qU.props=Object.assign({defaultMarker:"hollowTriangleDown"},WU.props);var XU=function(t,e){return WU(Object.assign({colorAttribute:"stroke",symbol:"triangle"},t),e)};XU.props=Object.assign({defaultMarker:"hollowTriangle"},WU.props);var KU=function(t,e){return WU(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},t),e)};KU.props=Object.assign({defaultMarker:"hollowBowtie"},WU.props);var $U=function(t,e){var n=t.colorAttribute,r=t.mode,i=void 0===r?"auto":r,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["colorAttribute","mode"]),o=e.coordinate,s=e.document;return function(e,r,u){var c=u.lineWidth,l=u.color,f=a.stroke?c||1:c,d=r.color,h=void 0===d?l:d,p=r.transform,v=r.opacity,y=g(IH(e),2),m=y[0],b=y[1],x=GU(i,e,r,o)||a.r||u.r;return fH(s.createElement("circle",{})).call(NH,u).style("fill","transparent").style("cx",m).style("cy",b).style("r",x).style("lineWidth",f).style("transform",p).style("transformOrigin","".concat(m," ").concat(b)).style("stroke",h).style(jH(t),v).style(n,h).call(NH,a).node()}},ZU=function(t,e){return $U(Object.assign({colorAttribute:"fill"},t),e)};ZU.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};var QU=function(t,e){return $U(Object.assign({colorAttribute:"stroke"},t),e)};QU.props=Object.assign({defaultMarker:"hollowPoint"},ZU.props);var JU=function(t,e){return WU(Object.assign({colorAttribute:"fill",symbol:"point"},t),e)};JU.props=Object.assign({defaultMarker:"point"},WU.props);var tq=function(t,e){return WU(Object.assign({colorAttribute:"stroke",symbol:"plus"},t),e)};tq.props=Object.assign({defaultMarker:"plus"},WU.props);var eq=function(t,e){return WU(Object.assign({colorAttribute:"fill",symbol:"diamond"},t),e)};eq.props=Object.assign({defaultMarker:"diamond"},WU.props);var nq=function(t,e){return WU(Object.assign({colorAttribute:"fill",symbol:"square"},t),e)};nq.props=Object.assign({defaultMarker:"square"},WU.props);var rq=function(t,e){return WU(Object.assign({colorAttribute:"fill",symbol:"triangle"},t),e)};rq.props=Object.assign({defaultMarker:"triangle"},WU.props);var iq=function(t,e){return WU(Object.assign({colorAttribute:"fill",symbol:"hexagon"},t),e)};iq.props=Object.assign({defaultMarker:"hexagon"},WU.props);var aq=function(t,e){return WU(Object.assign({colorAttribute:"stroke",symbol:"cross"},t),e)};aq.props=Object.assign({defaultMarker:"cross"},WU.props);var oq=function(t,e){return WU(Object.assign({colorAttribute:"fill",symbol:"bowtie"},t),e)};oq.props=Object.assign({defaultMarker:"bowtie"},WU.props);var sq=function(t,e){return WU(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},t),e)};sq.props=Object.assign({defaultMarker:"hyphen"},WU.props);var uq=function(t,e){return WU(Object.assign({colorAttribute:"stroke",symbol:"line"},t),e)};uq.props=Object.assign({defaultMarker:"line"},WU.props);var cq=function(t,e){return WU(Object.assign({colorAttribute:"stroke",symbol:"tick"},t),e)};cq.props=Object.assign({defaultMarker:"tick"},WU.props);var lq=function(t,e){return WU(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},t),e)};lq.props=Object.assign({defaultMarker:"triangleDown"},WU.props);var fq=function(){return function(t,e){return void 0!==e.encode.y?[t,e]:[t,vd({},e,{encode:{y:lj(hj(t,0))},scale:{y:{guide:null}}})]}};fq.props={};var dq=function(){return function(t,e){return void 0!==e.encode.size?[t,e]:[t,vd({},e,{encode:{size:fj(hj(t,3))}})]}};dq.props={};var hq={hollow:VU,hollowDiamond:HU,hollowHexagon:YU,hollowSquare:UU,hollowTriangleDown:qU,hollowTriangle:XU,hollowBowtie:KU,hollowCircle:QU,point:JU,plus:tq,diamond:eq,square:nq,triangle:rq,hexagon:iq,cross:aq,bowtie:oq,hyphen:sq,line:uq,tick:cq,triangleDown:lq,circle:ZU},pq=function(t){return function(e,n,r,i){var a=r.x,o=r.y,s=r.x1,u=r.y1,c=r.size,l=r.dx,f=r.dy,d=g(i.getSize(),2),h=d[0],p=d[1],v=pY(n,r,t),y=function(t){var e=+((null==l?void 0:l[t])||0),n=+((null==f?void 0:f[t])||0);return[(s?(+a[t]+ +s[t])/2:+a[t])+e,(u?(+o[t]+ +u[t])/2:+o[t])+n]},m=c?Array.from(e,(function(t){var e=g(y(t),2),n=e[0],r=e[1],a=+c[t],o=a/h,s=a/p,u=[n-o,r-s],l=[n+o,r+s];return[i.map(v(u,t)),i.map(v(l,t))]})):Array.from(e,(function(t){return[i.map(v(y(t),t))]}));return[e,m]}};pq.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:hq,channels:[].concat(M(uY({shapes:Object.keys(hq)})),[{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}]),preInference:[].concat(M(dY()),[{type:mj},{type:fq}]),postInference:[].concat(M([]),[{type:dq}],M(cY()))};var vq=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function gq(t){var e=t.getLocalBounds(),n=g(e.min,2),r=n[0],i=n[1],a=g(e.max,2),o=a[0],s=a[1],u=0,c=0;return r>0&&(u=r),o<0&&(u=o),i>0&&(c=i),s<0&&(c=s),[u,c]}var yq=PY((function(t){var e=t.attributes,n=e.className,r=(e.class,e.transform,e.rotate,e.labelTransform),i=e.labelTransformOrigin,a=e.x,o=e.y,s=e.x0,u=void 0===s?a:s,c=e.y0,l=void 0===c?o:c,f=e.text,d=e.background,h=e.connector,p=e.startMarker,v=e.endMarker,y=e.coordCenter,m=e.innerHTML,b=vq(e,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(t.style.transform="translate(".concat(a,", ").concat(o,")"),[a,o,u,l].some((function(t){return!Oe(t)})))t.children.forEach((function(t){return t.remove()}));else{var x,w=iH(b,"background"),k=w.padding,E=vq(w,["padding"]),O=iH(b,"connector"),S=O.points,T=void 0===S?[]:S,A=vq(O,["points"]);x=m?fH(t).maybeAppend("html","html",n).style("zIndex",0).style("innerHTML",m).call(NH,Object.assign({transform:r,transformOrigin:i},b)).node():fH(t).maybeAppend("text","text").style("zIndex",0).style("text",f).call(NH,Object.assign({textBaseline:"middle",transform:r,transformOrigin:i},b)).node();var P=fH(t).maybeAppend("background","rect").style("zIndex",-1).call(NH,function(t){var e=g(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],4),n=e[0],r=void 0===n?0:n,i=e[1],a=void 0===i?0:i,o=e[2],s=void 0===o?r:o,u=e[3],c=void 0===u?a:u,l=t.parentNode,f=l.getEulerAngles();l.setEulerAngles(0);var d=t.getLocalBounds(),h=d.min,p=d.halfExtents,v=g(h,2),y=v[0],m=v[1],b=g(p,2),x=b[0],w=b[1];return l.setEulerAngles(f),{x:y-c,y:m-r,width:2*x+c+a,height:2*w+r+s}}(x,k)).call(NH,d?E:{}).node(),N=function(t,e,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=function(t){return XH()(t)};if(!e[0]&&!e[1])return o([gq(t),e]);if(!n.length)return o([[0,0],e]);var s=g(n,2),u=s[0],c=s[1],l=M(c),f=M(u);if(c[0]!==u[0]){var d=i?-4:4;l[1]=c[1],a&&!i&&(l[0]=Math.max(u[0],c[0]-d),c[1]<u[1]?f[1]=l[1]:(f[1]=u[1],f[0]=Math.max(f[0],l[0]-d))),a||i||(l[0]=Math.max(u[0],c[0]-d),c[1]>u[1]?f[1]=l[1]:(f[1]=u[1],f[0]=Math.max(f[0],l[0]-d))),!a&&i&&(l[0]=Math.min(u[0],c[0]-d),c[1]>u[1]?f[1]=l[1]:(f[1]=u[1],f[0]=Math.min(f[0],l[0]-d))),a&&i&&(l[0]=Math.min(u[0],c[0]-d),c[1]<u[1]?f[1]=l[1]:(f[1]=u[1],f[0]=Math.min(f[0],l[0]-d)))}return o([c,l,f,u,e])}(P,[+u-+a,+l-+o],T,y,+u<y[0],+l<y[1]),C=p&&new dO({id:"startMarker",style:Object.assign({x:0,y:0},iH(b,"startMarker"))}),_=v&&new dO({id:"endMarker",style:Object.assign({x:0,y:0},iH(b,"endMarker"))});fH(t).maybeAppend("connector","path").style("zIndex",0).style("d",N).style("markerStart",C).style("markerEnd",_).call(NH,h?A:{})}})),mq=function(t,e){var n=e.coordinate;return function(e,r,i){var a=r.color,o=r.text,s=void 0===o?"":o,u=r.fontSize,c=r.rotate,l=void 0===c?0:c,f=r.transform,d=void 0===f?"":f,h={text:String(s),stroke:a,fill:a,fontSize:u},p=g(e,1),v=g(p[0],2),y=v[0],m=v[1];return fH(new yq).style("x",y).style("y",m).call(NH,i).style("transform","".concat(d,"rotate(").concat(+l,")")).style("coordCenter",n.getCenter()).call(NH,h).call(NH,t).node()}};mq.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var bq=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},xq=PY((function(t){var e=t.attributes,n=(e.class,e.x,e.y,e.transform,bq(e,["class","x","y","transform"])),r=iH(n,"marker"),i=r.size,a=void 0===i?24:i,o=function(){return function(t){var e=t/Math.sqrt(2),n=t*Math.sqrt(2);return[["M",-e,e-n],["A",t,t,0,1,1,e,e-n],["L",0,0],["Z"]]}(a/2)},s=function(t){var e=t.getLocalBounds(),n=e.min,r=e.max;return[.5*(n[0]+r[0]),.5*(n[1]+r[1])]}(fH(t).maybeAppend("marker",(function(){return new dO({})})).call((function(t){return t.node().update(Object.assign({symbol:o},r))})).node()),u=g(s,2),c=u[0],l=u[1];fH(t).maybeAppend("text","text").style("x",c).style("y",l).call(NH,n)})),wq=function(t,e){var n=bq(t,[]);return function(t,e,r){var i=r.color,a=bq(r,["color"]),o=e.color,s=void 0===o?i:o,u=e.text,c={text:String(void 0===u?"":u),stroke:s,fill:s},l=g(t,1),f=g(l[0],2),d=f[0],h=f[1];return fH(new xq).call(NH,a).style("transform","translate(".concat(d,",").concat(h,")")).call(NH,c).call(NH,n).node()}};wq.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var kq=function(t,e){var n=e.coordinate;return function(e,r,i){var a=r.color,o=r.text,s=void 0===o?"":o,u=r.fontSize,c=r.rotate,l=void 0===c?0:c,f=r.transform,d=void 0===f?"":f,h={text:String(s),stroke:a,fill:a,fontSize:u,textAlign:"center",textBaseline:"middle"},p=g(e,1),v=g(p[0],2),y=v[0],m=v[1];return fH(new SW).style("x",y).style("y",m).call(NH,i).style("transformOrigin","center center").style("transform","".concat(d,"rotate(").concat(l,"deg)")).style("coordCenter",n.getCenter()).call(NH,h).call(NH,t).node()}};kq.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Eq=function(){return function(t,e){var n=e.data;if(!Array.isArray(n)||n.some(gj))return[t,e];var r=Array.isArray(n[0])?n:[n],i=r.map((function(t){return t[0]})),a=r.map((function(t){return t[1]}));return[t,vd({},e,{encode:{x:cj(i),y:cj(a)}})]}};Eq.props={};var Oq=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Sq=function(){return function(t,e){e.data;var n=e.style,r=void 0===n?{}:n,i=Oq(e,["data","style"]),a=r.x,o=r.y,s=Oq(r,["x","y"]);if(null==a||null==o)return[t,e];var u=o||0;return[[0],vd({},i,{data:[0],cartesian:!0,encode:{x:cj([a||0]),y:cj([u])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:s})]}};Sq.props={};var Mq={text:mq,badge:wq,tag:kq},Tq=function(t){var e=t.cartesian;return void 0!==e&&e?gY:function(e,n,r,i){var a=r.x,o=r.y,s=pY(n,r,t),u=Array.from(e,(function(t){var e=[+a[t],+o[t]];return[i.map(s(e,t))]}));return[e,u]}};Tq.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:Mq,channels:[].concat(M(uY({shapes:Object.keys(Mq)})),[{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}]),preInference:[].concat(M(dY()),[{type:Eq},{type:Sq}]),postInference:[].concat(M([]),M(cY()))};var Aq=function(){return function(t,e){return[t,vd({scale:{x:{padding:0},y:{padding:0}}},e)]}};Aq.props={};var Pq={cell:GH,hollow:WH},Nq=function(){return function(t,e,n,r){var i=n.x,a=n.y,o=e.x,s=e.y,u=Array.from(t,(function(t){var e=o.getBandWidth(o.invert(+i[t])),n=s.getBandWidth(s.invert(+a[t])),u=+i[t],c=+a[t];return[[u,c],[u+e,c],[u+e,c+n],[u,c+n]].map((function(t){return r.map(t)}))}));return[t,u]}};function Cq(t,e,n){var r=null,i=bj(!0),a=null,o=YH,s=null,u=Jj(c);function c(c){var l,f,d,h,p,v=(c=VH(c)).length,g=!1,y=new Array(v),m=new Array(v);for(null==a&&(s=o(p=u())),l=0;l<=v;++l){if(!(l<v&&i(h=c[l],l,c))===g)if(g=!g)f=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=l-1;d>=f;--d)s.point(y[d],m[d]);s.lineEnd(),s.areaEnd()}g&&(y[l]=+t(h,l,c),m[l]=+e(h,l,c),s.point(r?+r(h,l,c):y[l],n?+n(h,l,c):m[l]))}if(p)return s=null,p+""||null}function l(){return XH().defined(i).curve(o).context(a)}return t="function"==typeof t?t:void 0===t?UH:bj(+t),e="function"==typeof e?e:bj(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?qH:bj(+n),c.x=function(e){return arguments.length?(t="function"==typeof e?e:bj(+e),r=null,c):t},c.x0=function(e){return arguments.length?(t="function"==typeof e?e:bj(+e),c):t},c.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:bj(+t),c):r},c.y=function(t){return arguments.length?(e="function"==typeof t?t:bj(+t),n=null,c):e},c.y0=function(t){return arguments.length?(e="function"==typeof t?t:bj(+t),c):e},c.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:bj(+t),c):n},c.lineX0=c.lineY0=function(){return l().x(t).y(e)},c.lineY1=function(){return l().x(t).y(n)},c.lineX1=function(){return l().x(r).y(e)},c.defined=function(t){return arguments.length?(i="function"==typeof t?t:bj(!!t),c):i},c.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),c):o},c.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),c):a},c}Nq.props={defaultShape:"cell",defaultLabelShape:"label",shape:Pq,composite:!1,channels:[].concat(M(uY({shapes:Object.keys(Pq)})),[{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}]),preInference:[].concat(M(dY()),[{type:mj},{type:fq},{type:Aq}]),postInference:[].concat(M([]),M(cY()))};var _q=PY((function(t){var e=t.attributes,n=e.areaPath,r=e.connectPath,i=e.areaStyle,a=e.connectStyle,o=t.ownerDocument;fH(t).maybeAppend("connect-path",(function(){return o.createElement("path",{})})).style("d",r).call(NH,a),fH(t).maybeAppend("area-path",(function(){return o.createElement("path",{})})).style("d",n).call(NH,i)})),Lq=function(t,e){var n=t.curve,r=t.gradient,i=void 0!==r&&r,a=t.defined,o=void 0===a?function(t){return!Number.isNaN(t)&&null!=t}:a,s=t.connect,u=void 0!==s&&s,c=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["curve","gradient","defined","connect"]),l=e.coordinate,f=e.document;return function(t,e,r){var a=r.color,s=e.color,d=void 0===s?a:s,h=e.seriesColor,p=e.seriesX,v=e.seriesY,y=sD(l),m=DH(l,e),b=i&&h?_H(h,p,v,i,void 0,y):d,x=Object.assign(Object.assign(Object.assign(Object.assign({},r),{stroke:b,fill:b}),m&&{transform:m}),c),w=function(t,e){for(var n=[],r=[],i=[],a=!1,o=null,s=t.length/2,u=0;u<s;u++){var c=t[u],l=t[u+s];if([].concat(M(c),M(l)).some((function(t){return!e(t)})))a=!0;else{if(n.push(c),r.push(l),a&&o){a=!1;var f=g(o,2),d=f[0],h=f[1];i.push([d,c,h,l])}o=[c,l]}}return[n.concat(r),i]}(t,o),k=g(w,2),E=k[0],O=k[1],S=iH(x,"connect"),T=!!O.length,A=function(t){return fH(f.createElement("path",{})).style("d",t||"").call(NH,x).node()};if(uD(l)){var P=function(t){var e=l.getCenter(),r=t.slice(0,t.length/2),i=t.slice(t.length/2);return function(){var t=Cq().curve(SY),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return AY(n())},delete t.lineX0,t.lineEndAngle=function(){return AY(r())},delete t.lineX1,t.lineInnerRadius=function(){return AY(i())},delete t.lineY0,t.lineOuterRadius=function(){return AY(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(TY(t)):e()._curve},t}().angle((function(t,n){return yH(hH(r[n],e))})).outerRadius((function(t,n){return vH(r[n],e)})).innerRadius((function(t,n){return vH(i[n],e)})).defined((function(t,e){return[].concat(M(r[e]),M(i[e])).every(o)})).curve(n)(i)};return!T||u&&!Object.keys(S).length?A(P(E)):T&&!u?A(P(t)):fH(new _q).style("areaStyle",x).style("connectStyle",Object.assign(Object.assign({},S),c)).style("areaPath",P(t)).style("connectPath",O.map(P).join("")).node()}var N=function(t){var e=t.slice(0,t.length/2),r=t.slice(t.length/2);return y?Cq().y((function(t,n){return e[n][1]})).x1((function(t,n){return e[n][0]})).x0((function(t,e){return r[e][0]})).defined((function(t,n){return[].concat(M(e[n]),M(r[n])).every(o)})).curve(n)(e):Cq().x((function(t,n){return e[n][0]})).y1((function(t,n){return e[n][1]})).y0((function(t,e){return r[e][1]})).defined((function(t,n){return[].concat(M(e[n]),M(r[n])).every(o)})).curve(n)(e)};return!T||u&&!Object.keys(S).length?A(N(E)):T&&!u?A(N(t)):fH(new _q).style("areaStyle",x).style("connectStyle",Object.assign(Object.assign({},S),c)).style("areaPath",N(t)).style("connectPath",O.map(N).join("")).node()}};Lq.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Rq=function(t,e){var n=e.coordinate;return function(){var r=uD(n)?ZH:YH;return Lq(Object.assign({curve:r},t),e).apply(void 0,arguments)}};Rq.props=Object.assign(Object.assign({},Lq.props),{defaultMarker:"square"});var jq=function(t,e){var n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,[]),r=e.coordinate;return function(){var t=uD(r)?BY:sD(r)?KY:XY;return Lq(Object.assign({curve:t},n),e).apply(void 0,arguments)}};jq.props=Object.assign(Object.assign({},Lq.props),{defaultMarker:"smooth"});var Dq=function(t,e){return function(){return Lq(Object.assign({curve:QY},t),e).apply(void 0,arguments)}};Dq.props=Object.assign(Object.assign({},Lq.props),{defaultMarker:"hvh"});var Iq=function(t,e){return function(){return Lq(Object.assign({curve:JY},t),e).apply(void 0,arguments)}};Iq.props=Object.assign(Object.assign({},Lq.props),{defaultMarker:"vh"});var Fq=function(t,e){return function(){return Lq(Object.assign({curve:tU},t),e).apply(void 0,arguments)}};Fq.props=Object.assign(Object.assign({},Lq.props),{defaultMarker:"hv"});var zq={area:Rq,smooth:jq,hvh:Dq,vh:Iq,hv:Fq},Bq=function(){return function(t,e,n,r){var i,a,o=n.x,s=n.y,u=n.y1,c=n.series,l=e.x,f=e.y,d=c?Array.from(GV(t,(function(t){return c[t]})).values()):[t],h=d.map((function(t){return t[0]})).filter((function(t){return void 0!==t})),p=((null===(i=null==l?void 0:l.getBandWidth)||void 0===i?void 0:i.call(l))||0)/2,v=((null===(a=null==f?void 0:f.getBandWidth)||void 0===a?void 0:a.call(f))||0)/2,g=Array.from(d,(function(t){for(var e=t.length,n=new Array(2*e),i=0;i<t.length;i++){var a=t[i];n[i]=r.map([+o[a]+p,+s[a]+v]),n[e+i]=r.map([+o[a]+p,+u[a]+v])}return n}));return[h,g,d]}};Bq.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:zq,channels:[].concat(M(uY({shapes:Object.keys(zq)})),[{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}]),preInference:[].concat(M(dY()),[{type:sU},{type:yj},{type:Aq}]),postInference:[].concat(M([]),M(lY())),interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var Gq=function(){return function(t,e){var n=e.encode;if(n.y1)return[t,e];var r=g(pj(n,"y"),1)[0];return[t,vd({},e,{encode:{y1:cj(M(r))}})]}};Gq.props={};var Wq=function(){return function(t,e){var n=e.encode;if(n.x1)return[t,e];var r=g(pj(n,"x"),1)[0];return[t,vd({},e,{encode:{x1:cj(M(r))}})]}};Wq.props={};var Vq=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Hq=function(t,e){var n=t.arrow,r=void 0===n||n,i=t.arrowSize,a=void 0===i?"40%":i,o=Vq(t,["arrow","arrowSize"]),s=e.document;return function(t,e,n){var i=n.defaultColor,u=Vq(n,["defaultColor"]),c=e.color,l=void 0===c?i:c,f=e.transform,d=g(t,2),h=d[0],p=d[1],v=Qj();if(v.moveTo.apply(v,M(h)),v.lineTo.apply(v,M(p)),r){var y=function(t,e,n){var r=n.arrowSize,i="string"==typeof r?+parseFloat(r)/100*vH(t,e):r,a=Math.PI/6,o=Math.atan2(e[1]-t[1],e[0]-t[0]),s=Math.PI/2-o-a,u=o-a;return[[e[0]-i*Math.sin(s),e[1]-i*Math.cos(s)],[e[0]-i*Math.cos(u),e[1]-i*Math.sin(u)]]}(h,p,{arrowSize:a}),m=g(y,2),b=m[0],x=m[1];v.moveTo.apply(v,M(b)),v.lineTo.apply(v,M(p)),v.lineTo.apply(v,M(x))}return fH(s.createElement("path",{})).call(NH,u).style("d",v.toString()).style("stroke",l).style("transform",f).call(NH,o).node()}};Hq.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Yq=function(t,e){var n=t.arrow,r=void 0!==n&&n;return function(){return Hq(Object.assign(Object.assign({},t),{arrow:r}),e).apply(void 0,arguments)}};Yq.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Uq=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},qq=function(t,e){var n=Uq(t,[]),r=e.coordinate,i=e.document;return function(t,e,a){var o=a.color,s=Uq(a,["color"]),u=e.color,c=void 0===u?o:u,l=e.transform,f=g(t,2),d=f[0],h=f[1],p=Qj();if(p.moveTo(d[0],d[1]),uD(r)){var v=r.getCenter();p.quadraticCurveTo(v[0],v[1],h[0],h[1])}else CH(p,d,h,xH(d,h),vH(d,h)/2);return fH(i.createElement("path",{})).call(NH,s).style("d",p.toString()).style("stroke",c).style("transform",l).call(NH,n).node()}};qq.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Xq=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Kq=function(t,e){var n=Xq(t,[]),r=e.document;return function(t,e,i){var a=i.color,o=Xq(i,["color"]),s=e.color,u=void 0===s?a:s,c=e.transform,l=g(t,2),f=l[0],d=l[1],h=Qj();return h.moveTo(f[0],f[1]),h.bezierCurveTo(f[0]/2+d[0]/2,f[1],f[0]/2+d[0]/2,d[1],d[0],d[1]),fH(r.createElement("path",{})).call(NH,o).style("d",h.toString()).style("stroke",u).style("transform",c).call(NH,n).node()}};Kq.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var $q=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Zq=function(t,e){var n=t.cornerRatio,r=void 0===n?1/3:n,i=$q(t,["cornerRatio"]),a=e.coordinate,o=e.document;return function(t,e,n){var s=n.defaultColor,u=$q(n,["defaultColor"]),c=e.color,l=void 0===c?s:c,f=e.transform,d=g(t,2),h=function(t,e,n,r){var i=Qj();if(uD(n)){var a=n.getCenter(),o=vH(t,a),s=(vH(e,a)-o)*r+o;return i.moveTo(t[0],t[1]),CH(i,t,e,a,s),i.lineTo(e[0],e[1]),i}return sD(n)?(i.moveTo(t[0],t[1]),i.lineTo(t[0]+(e[0]-t[0])*r,t[1]),i.lineTo(t[0]+(e[0]-t[0])*r,e[1]),i.lineTo(e[0],e[1]),i):(i.moveTo(t[0],t[1]),i.lineTo(t[0],t[1]+(e[1]-t[1])*r),i.lineTo(e[0],t[1]+(e[1]-t[1])*r),i.lineTo(e[0],e[1]),i)}(d[0],d[1],a,r);return fH(o.createElement("path",{})).call(NH,u).style("d",h.toString()).style("stroke",l).style("transform",f).call(NH,i).node()}};Zq.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Qq={link:Yq,arc:qq,smooth:Kq,vhv:Zq},Jq=function(t){return function(e,n,r,i){var a=r.x,o=r.y,s=r.x1,u=void 0===s?a:s,c=r.y1,l=void 0===c?o:c,f=pY(n,r,t),d=e.map((function(t){return[i.map(f([+a[t],+o[t]],t)),i.map(f([+u[t],+l[t]],t))]}));return[e,d]}};Jq.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:Qq,channels:[].concat(M(uY({shapes:Object.keys(Qq)})),[{name:"x",required:!0},{name:"y",required:!0}]),preInference:[].concat(M(dY()),[{type:Gq},{type:Wq}]),postInference:[].concat(M([]),M(cY()))};var tX=function(t,e){var n=e.coordinate,r=e.document;return function(e,i,a){var o=a.color,s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(a,["color"]),u=i.color,c=void 0===u?o:u,l=i.src,f=void 0===l?"":l,d=i.size,h=void 0===d?32:d,p=i.transform,v=void 0===p?"":p,y=t.width,m=void 0===y?h:y,b=t.height,x=void 0===b?h:b,w=g(e,1),k=g(w[0],2),E=k[0],O=k[1],S=g(n.getSize(),2),M=S[0],T=S[1];m="string"==typeof m?vY(m)*M:m,x="string"==typeof x?vY(x)*T:x;var A=E-Number(m)/2,P=O-Number(x)/2;return fH(r.createElement("image",{})).call(NH,s).style("x",A).style("y",P).style("src",f).style("stroke",c).style("transform",v).call(NH,t).style("width",m).style("height",x).node()}};tX.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var eX={image:tX},nX=function(t){return t.cartesian?gY:function(e,n,r,i){var a=r.x,o=r.y,s=pY(n,r,t),u=Array.from(e,(function(t){var e=[+a[t],+o[t]];return[i.map(s(e,t))]}));return[e,u]}};nX.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:eX,channels:[].concat(M(uY({shapes:Object.keys(eX)})),[{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}]),preInference:[].concat(M(dY()),[{type:Eq},{type:Sq}]),postInference:[].concat(M([]),M(cY()))};var rX=function(t,e){var n=e.coordinate,r=e.document;return function(e,i,a){var o=a.color,s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(a,["color"]),u=i.color,c=void 0===u?o:u,l=i.transform,f=function(t,e){var n=Qj();if(uD(e)){var r=e.getCenter(),i=[].concat(M(t),[t[0]]),a=i.map((function(t){return vH(t,r)}));return i.forEach((function(e,i){if(0!==i){var o=a[i],s=t[i-1],u=a[i-1];void 0!==u&&Math.abs(o-u)<1e-10?CH(n,s,e,r,o):n.lineTo(e[0],e[1])}else n.moveTo(e[0],e[1])})),n.closePath(),n}return function(t,e){return e.forEach((function(e,n){return 0===n?t.moveTo(e[0],e[1]):t.lineTo(e[0],e[1])})),t.closePath(),t}(n,t)}(e,n);return fH(r.createElement("path",{})).call(NH,s).style("d",f.toString()).style("stroke",c).style("fill",c).style("transform",l).call(NH,t).node()}};rX.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var iX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},aX=function(t,e){var n=iX(t,[]),r=e.coordinate,i=e.document;return function(t,e,a){var o=a.color,s=iX(a,["color"]),u=e.color,c=void 0===u?o:u,l=e.transform,f=function(t,e){var n=g(t,4),r=n[0],i=n[1],a=n[2],o=n[3],s=Qj();if(uD(e)){var u=e.getCenter(),c=vH(u,r);return s.moveTo(r[0],r[1]),s.quadraticCurveTo(u[0],u[1],a[0],a[1]),CH(s,a,o,u,c),s.quadraticCurveTo(u[0],u[1],i[0],i[1]),CH(s,i,r,u,c),s.closePath(),s}return s.moveTo(r[0],r[1]),s.bezierCurveTo(r[0]/2+a[0]/2,r[1],r[0]/2+a[0]/2,a[1],a[0],a[1]),s.lineTo(o[0],o[1]),s.bezierCurveTo(o[0]/2+i[0]/2,o[1],o[0]/2+i[0]/2,i[1],i[0],i[1]),s.lineTo(r[0],r[1]),s.closePath(),s}(t,r);return fH(i.createElement("path",{})).call(NH,s).style("d",f.toString()).style("fill",c||o).style("stroke",c||o).style("transform",l).call(NH,n).node()}};aX.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var oX={polygon:rX,ribbon:aX},sX=function(){return function(t,e,n,r){var i=Object.entries(n).filter((function(t){return g(t,1)[0].startsWith("x")})).map((function(t){return g(t,2)[1]})),a=Object.entries(n).filter((function(t){return g(t,1)[0].startsWith("y")})).map((function(t){return g(t,2)[1]})),o=t.map((function(t){for(var e=[],n=0;n<i.length;n++){var o=i[n][t];if(void 0===o)break;var s=a[n][t];e.push(r.map([+o,+s]))}return e}));return[t,o]}};sX.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:oX,channels:[].concat(M(uY({shapes:Object.keys(oX)})),[{name:"x",required:!0},{name:"y",required:!0}]),preInference:M(dY()),postInference:[].concat(M([]),M(cY()))};var uX=function(t,e){var n=e.coordinate,r=e.document;return function(e,i,a){var o=i.color,s=i.transform,u=a.color,c=a.fill,l=void 0===c?u:c,f=a.stroke,d=void 0===f?u:f,h=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(a,["color","fill","stroke"]),p=function(t,e){var n=Qj();if(uD(e)){var r=e.getCenter(),i=g(r,2),a=i[0],o=i[1],s=gH(hH(t[0],r)),u=gH(hH(t[1],r)),c=vH(r,t[2]),l=vH(r,t[3]),f=vH(r,t[8]),d=vH(r,t[10]),h=vH(r,t[11]);n.moveTo.apply(n,M(t[0])),n.arc(a,o,c,s,u),n.arc(a,o,c,u,s,!0),n.moveTo.apply(n,M(t[2])),n.lineTo.apply(n,M(t[3])),n.moveTo.apply(n,M(t[4])),n.arc(a,o,l,s,u),n.lineTo.apply(n,M(t[6])),n.arc(a,o,d,u,s,!0),n.closePath(),n.moveTo.apply(n,M(t[8])),n.arc(a,o,f,s,u),n.arc(a,o,f,u,s,!0),n.moveTo.apply(n,M(t[10])),n.lineTo.apply(n,M(t[11])),n.moveTo.apply(n,M(t[12])),n.arc(a,o,h,s,u),n.arc(a,o,h,u,s,!0)}else n.moveTo.apply(n,M(t[0])),n.lineTo.apply(n,M(t[1])),n.moveTo.apply(n,M(t[2])),n.lineTo.apply(n,M(t[3])),n.moveTo.apply(n,M(t[4])),n.lineTo.apply(n,M(t[5])),n.lineTo.apply(n,M(t[6])),n.lineTo.apply(n,M(t[7])),n.closePath(),n.moveTo.apply(n,M(t[8])),n.lineTo.apply(n,M(t[9])),n.moveTo.apply(n,M(t[10])),n.lineTo.apply(n,M(t[11])),n.moveTo.apply(n,M(t[12])),n.lineTo.apply(n,M(t[13]));return n}(e,n);return fH(r.createElement("path",{})).call(NH,h).style("d",p.toString()).style("stroke",d).style("fill",o||l).style("transform",s).call(NH,t).node()}};uX.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var cX=function(t,e){var n=e.coordinate,r=e.document;return function(e,i,a){var o=i.color,s=i.transform,u=a.color,c=a.fill,l=void 0===c?u:c,f=a.stroke,d=void 0===f?u:f,h=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(a,["color","fill","stroke"]),p=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=Qj();if(!uD(e))return r.moveTo.apply(r,M(t[2])),r.lineTo.apply(r,M(t[3])),r.lineTo(t[3][0]-n,t[3][1]),r.lineTo(t[10][0]-n,t[10][1]),r.lineTo(t[10][0]+n,t[10][1]),r.lineTo(t[3][0]+n,t[3][1]),r.lineTo.apply(r,M(t[3])),r.closePath(),r.moveTo.apply(r,M(t[10])),r.lineTo.apply(r,M(t[11])),r.moveTo(t[3][0]+n/2,t[8][1]),r.arc(t[3][0],t[8][1],n/2,0,2*Math.PI),r.closePath(),r;var i=e.getCenter(),a=g(i,2),o=a[0],s=a[1],u=vH(i,t[3]),c=vH(i,t[8]),l=vH(i,t[10]),f=gH(hH(t[2],i)),d=Math.asin(n/c),h=f-d,p=f+d;r.moveTo.apply(r,M(t[2])),r.lineTo.apply(r,M(t[3])),r.moveTo(Math.cos(h)*u+o,Math.sin(h)*u+s),r.arc(o,s,u,h,p),r.lineTo(Math.cos(p)*l+o,Math.sin(p)*l+s),r.arc(o,s,l,p,h,!0),r.lineTo(Math.cos(h)*u+o,Math.sin(h)*u+s),r.closePath(),r.moveTo.apply(r,M(t[10])),r.lineTo.apply(r,M(t[11]));var v=(h+p)/2;return r.moveTo(Math.cos(v)*(c+n/2)+o,Math.sin(v)*(c+n/2)+s),r.arc(Math.cos(v)*c+o,Math.sin(v)*c+s,n/2,v,2*Math.PI+v),r.closePath(),r}(e,n,4);return fH(r.createElement("path",{})).call(NH,h).style("d",p.toString()).style("stroke",d).style("fill",o||l).style("transform",s).call(NH,t).node()}};cX.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var lX={box:uX,violin:cX},fX=function(){return function(t,e,n,r){var i=n.x,a=n.y,o=n.y1,s=n.y2,u=n.y3,c=n.y4,l=n.series,f=e.x,d=e.series,h=Array.from(t,(function(t){var e=f.getBandWidth(f.invert(+i[t])),n=e*(d?d.getBandWidth(d.invert(+(null==l?void 0:l[t]))):1),h=(+(null==l?void 0:l[t])||0)*e,p=+i[t]+h+n/2,v=+a[t],g=+o[t],y=+s[t],m=+u[t],b=+c[t];return[[p-n/2,b],[p+n/2,b],[p,b],[p,m],[p-n/2,m],[p+n/2,m],[p+n/2,g],[p-n/2,g],[p-n/2,y],[p+n/2,y],[p,g],[p,v],[p-n/2,v],[p+n/2,v]].map((function(t){return r.map(t)}))}));return[t,h]}};fX.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:lX,channels:[].concat(M(uY({shapes:Object.keys(lX)})),[{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}]),preInference:[].concat(M(dY()),[{type:mj}]),postInference:[].concat(M([]),M(lY())),interaction:{shareTooltip:!0}};var dX={vector:Hq},hX=function(){return function(t,e,n,r){var i=n.x,a=n.y,o=n.size,s=n.rotate,u=g(r.getSize(),2),c=u[0],l=u[1],f=t.map((function(t){var e=+s[t]/180*Math.PI,n=+o[t],u=n/l,f=n/c*Math.cos(e),d=-u*Math.sin(e);return[r.map([+i[t]-f/2,+a[t]-d/2]),r.map([+i[t]+f/2,+a[t]+d/2])]}));return[t,f]}};hX.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:dX,channels:[].concat(M(uY({shapes:Object.keys(dX)})),[{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}]),preInference:M(dY()),postInference:[].concat(M([]),M(cY()))};var pX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},vX=function(t,e){var n=t.arrow,r=t.arrowSize,i=void 0===r?4:r,a=pX(t,["arrow","arrowSize"]),o=e.coordinate,s=e.document;return function(t,e,r){var u=r.color,c=r.lineWidth,l=pX(r,["color","lineWidth"]),f=e.color,d=void 0===f?u:f,h=e.size,p=void 0===h?c:h,v=n?function(t,e,n){return t.createElement("path",{style:Object.assign({d:"M ".concat(e,",").concat(e," L -").concat(e,",0 L ").concat(e,",-").concat(e," L 0,0 Z"),transformOrigin:"center"},n)})}(s,i,Object.assign({fill:a.stroke||d,stroke:a.stroke||d},iH(a,"arrow"))):null,y=function(t,e){if(!uD(e))return XH().x((function(t){return t[0]})).y((function(t){return t[1]}))(t);var n=e.getCenter();return oD()({startAngle:0,endAngle:2*Math.PI,outerRadius:vH(t[0],n),innerRadius:vH(t[1],n)})}(t,o),m=function(t,e){if(!uD(t))return e;var n=g(t.getCenter(),2),r=n[0],i=n[1];return"translate(".concat(r,", ").concat(i,") ").concat(e||"")}(o,e.transform);return fH(s.createElement("path",{})).call(NH,l).style("d",y).style("stroke",d).style("lineWidth",p).style("transform",m).style("markerEnd",v).call(NH,a).node()}};vX.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var gX=function(){return function(t,e){var n=e.data;return!Array.isArray(n)||n.some(gj)?[t,e]:[t,vd({},e,{encode:{x:cj(n)}})]}};gX.props={};var yX={line:vX},mX=function(t){return function(e,n,r,i){var a=r.x,o=pY(n,r,vd({style:{bandOffset:0}},t)),s=Array.from(e,(function(t){return[[a[t],1],[a[t],0]].map((function(e){return i.map(o(e,t))}))}));return[e,s]}};mX.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:yX,channels:[].concat(M(fY({shapes:Object.keys(yX)})),[{name:"x",required:!0}]),preInference:[].concat(M(dY()),[{type:gX}]),postInference:M([])};var bX=function(){return function(t,e){var n=e.data;return!Array.isArray(n)||n.some(gj)?[t,e]:[t,vd({},e,{encode:{y:cj(n)}})]}};bX.props={};var xX={line:vX},wX=function(t){return function(e,n,r,i){var a=r.y,o=pY(n,r,vd({style:{bandOffset:0}},t)),s=Array.from(e,(function(t){return[[0,a[t]],[1,a[t]]].map((function(e){return i.map(o(e,t))}))}));return[e,s]}};wX.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:xX,channels:[].concat(M(fY({shapes:Object.keys(xX)})),[{name:"y",required:!0}]),preInference:[].concat(M(dY()),[{type:bX}]),postInference:M([])};var kX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function EX(t,e,n){return[["M",t,e],["L",t+2*n,e-n],["L",t+2*n,e+n],["Z"]]}var OX=function(t,e){var n=t.offset,r=void 0===n?0:n,i=t.offset1,a=void 0===i?r:i,o=t.offset2,s=void 0===o?r:o,u=t.connectLength1,c=t.endMarker,l=void 0===c||c,f=kX(t,["offset","offset1","offset2","connectLength1","endMarker"]),d=e.coordinate;return function(t,e,n){var r=n.color,i=n.connectLength1,o=kX(n,["color","connectLength1"]),c=e.color,h=e.transform,p=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=g(e,2),o=g(a[0],2),s=o[0],u=o[1],c=g(a[1],2),l=c[0],f=c[1];if(sD(t)){var d=s+n,h=d+i;return[[d,u],[h,u],[h,f],[l+r,f]]}var p=u-n,v=p-i;return[[s,p],[s,v],[l,v],[l,f-r]]}(d,t,a,s,null!=u?u:i),v=iH(Object.assign(Object.assign({},f),n),"endMarker");return fH(new mW).call(NH,o).style("d",function(t){return XH().x((function(t){return t[0]})).y((function(t){return t[1]}))(t)}(p)).style("stroke",c||r).style("transform",h).style("markerEnd",l?new dO({className:"marker",style:Object.assign(Object.assign({},v),{symbol:EX})}):null).call(NH,f).node()}};OX.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var SX={connector:OX},MX=function(){return Jq.apply(void 0,arguments)};function TX(t,e,n,r){if(e)return function(){return[0,1]};var i=n[t],a=n["".concat(t,"1")];return function(t){var e,n=(null===(e=r.getBandWidth)||void 0===e?void 0:e.call(r,r.invert(+a[t])))||0;return[i[t],a[t]+n]}}function AX(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.extendX,n=void 0!==e&&e,r=t.extendY,i=void 0!==r&&r;return function(t,e,r,a){var o=TX("x",n,r,e.x),s=TX("y",i,r,e.y),u=Array.from(t,(function(t){var e=g(o(t),2),n=e[0],r=e[1],i=g(s(t),2),u=i[0],c=i[1];return[[n,u],[r,u],[r,c],[n,c]].map((function(t){return a.map(t)}))}));return[t,u]}}MX.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:SX,channels:[].concat(M(fY({shapes:Object.keys(SX)})),[{name:"x",required:!0},{name:"y",required:!0}]),preInference:M(dY()),postInference:M([])};var PX={range:GH},NX=function(){return AX()};NX.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:PX,channels:[].concat(M(fY({shapes:Object.keys(PX)})),[{name:"x",required:!0},{name:"y",required:!0}]),preInference:M(dY()),postInference:M([])};var CX=function(){return function(t,e){var n=e.data;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(gj))){var r=function(t,e){return Array.isArray(t[0])?t.map((function(t){return t[e]})):[t[e]]};return[t,vd({},e,{encode:{x:cj(r(n,0)),x1:cj(r(n,1))}})]}return[t,e]}};CX.props={};var _X={range:GH},LX=function(){return AX({extendY:!0})};LX.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:_X,channels:[].concat(M(fY({shapes:Object.keys(_X)})),[{name:"x",required:!0}]),preInference:[].concat(M(dY()),[{type:CX}]),postInference:M([])};var RX=function(){return function(t,e){var n=e.data;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(gj))){var r=function(t,e){return Array.isArray(t[0])?t.map((function(t){return t[e]})):[t[e]]};return[t,vd({},e,{encode:{y:cj(r(n,0)),y1:cj(r(n,1))}})]}return[t,e]}};RX.props={};var jX={range:GH},DX=function(){return AX({extendX:!0})};DX.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:jX,channels:[].concat(M(fY({shapes:Object.keys(jX)})),[{name:"y",required:!0}]),preInference:[].concat(M(dY()),[{type:RX}]),postInference:M([])};var IX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},FX=function(t,e){t.arrow;var n=t.colorAttribute,r=IX(t,["arrow","colorAttribute"]),i=e.coordinate,a=e.document;return function(t,e,o){var s=o.color,u=(o.stroke,IX(o,["color","stroke"])),c=e.d,l=e.color,f=void 0===l?s:l,d=g(i.getSize(),2),h=d[0],p=d[1];return fH(a.createElement("path",{})).call(NH,u).style("d","function"==typeof c?c({width:h,height:p}):c).style(n,f).call(NH,r).node()}};FX.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var zX=function(t,e){return FX(Object.assign({colorAttribute:"fill"},t),e)};zX.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var BX=function(t,e){return FX(Object.assign({fill:"none",colorAttribute:"stroke"},t),e)};BX.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var GX={path:zX,hollow:BX},WX=function(t){return function(t,e,n,r){return[t,t.map((function(){return[[0,0]]}))]}};WX.props={defaultShape:"path",defaultLabelShape:"label",shape:GX,composite:!1,channels:[].concat(M(uY({shapes:Object.keys(GX)})),[{name:"d",scale:"identity"}]),preInference:M(dY()),postInference:M([])};var VX=function(t,e){var n=t.render,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["render"]);return function(t){var i=g(t,1),a=g(i[0],2),o=a[0],s=a[1];return n(Object.assign(Object.assign({},r),{x:o,y:s}),e)}};VX.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var HX=function(){return function(t,e){var n=e.style,r=void 0===n?{}:n;return[t,vd({},e,{style:Object.assign(Object.assign({},r),Object.fromEntries(Object.entries(r).filter((function(t){return"function"==typeof g(t,2)[1]})).map((function(t){var e=g(t,2),n=e[0],r=e[1];return[n,function(){return r}]}))))})]}};HX.props={};var YX={shape:VX},UX=function(t){return t.cartesian?gY:function(e,n,r,i){var a=r.x,o=r.y,s=pY(n,r,t),u=Array.from(e,(function(t){var e=[+a[t],+o[t]];return[i.map(s(e,t))]}));return[e,u]}};UX.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:YX,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[].concat(M(dY()),[{type:Eq},{type:Sq},{type:HX}])};var qX=function(t,e){var n=e.document;return function(e,r,i){var a=r.transform,o=i.color,s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(i,["color"]),u=r.color,c=void 0===u?o:u,l=_h(e),f=l[0],d=l.slice(1),h=Qj();return h.moveTo.apply(h,M(f)),d.forEach((function(t){var e=g(t,2),n=e[0],r=e[1];h.lineTo(n,r)})),h.closePath(),fH(n.createElement("path",{})).call(NH,s).style("d",h.toString()).style("stroke",c||o).style("fill",c||o).style("fillOpacity",.4).style("transform",a).call(NH,t).node()}};qX.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var XX={density:qX},KX=function(){return function(t,e,n,r){var i=n.x,a=n.series,o=Object.entries(n).filter((function(t){return g(t,1)[0].startsWith("y")})).map((function(t){return g(t,2)[1]})),s=Object.entries(n).filter((function(t){return g(t,1)[0].startsWith("size")})).map((function(t){return g(t,2)[1]}));if(void 0===i||void 0===o||void 0===s)throw new Error("Missing encode for x or y or size channel.");var u=e.x,c=e.series,l=Array.from(t,(function(e){var n=u.getBandWidth(u.invert(+i[e])),l=n*(c?c.getBandWidth(c.invert(+(null==a?void 0:a[e]))):1),f=(+(null==a?void 0:a[e])||0)*n,d=+i[e]+f+l/2;return[].concat(M(o.map((function(n,r){return[d+ +s[r][e]/t.length,+o[r][e]]}))),M(o.map((function(n,r){return[d-+s[r][e]/t.length,+o[r][e]]})).reverse())).map((function(t){return r.map(t)}))}));return[t,l]}};function $X(t,e){var n;if(void 0===e){var r,i=nr(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(n>a||void 0===n&&a>=a)&&(n=a)}}catch(t){i.e(t)}finally{i.f()}}else{var o,s=-1,u=nr(t);try{for(u.s();!(o=u.n()).done;){var c=o.value;null!=(c=e(c,++s,t))&&(n>c||void 0===n&&c>=c)&&(n=c)}}catch(t){u.e(t)}finally{u.f()}}return n}function ZX(t,e){var n;if(void 0===e){var r,i=nr(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(n<a||void 0===n&&a>=a)&&(n=a)}}catch(t){i.e(t)}finally{i.f()}}else{var o,s=-1,u=nr(t);try{for(u.s();!(o=u.n()).done;){var c=o.value;null!=(c=e(c,++s,t))&&(n<c||void 0===n&&c>=c)&&(n=c)}}catch(t){u.e(t)}finally{u.f()}}return n}function QX(t){var e,n,r,i=t||1;function a(t,a){++e>i&&(r=n,o(1),++e),n[t]=a}function o(t){e=0,n=Object.create(null),t||(r=Object.create(null))}return o(),{clear:o,has:function(t){return void 0!==n[t]||void 0!==r[t]},get:function(t){var e=n[t];return void 0!==e?e:void 0!==(e=r[t])?(a(t,e),e):void 0},set:function(t,e){void 0!==n[t]?n[t]=e:a(t,e)}}}function JX(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return"".concat(arguments.length<=0?void 0:arguments[0])},n=QX(arguments.length>2&&void 0!==arguments[2]?arguments[2]:16);return function(){var r=e.apply(void 0,arguments),i=n.get(r);return n.has(r)?n.get(r):(i=t.apply(void 0,arguments),n.set(r,i),i)}}function tK(t,e,n){var r=t?t():document.createElement("canvas");return r.width=e,r.height=n,r}KX.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:XX,channels:[].concat(M(uY({shapes:Object.keys(XX)})),[{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}]),preInference:[].concat(M(dY()),[{type:yj},{type:mj}]),postInference:[].concat(M([]),M(lY())),interaction:{shareTooltip:!0}},QX(3);var eK=JX((function(t,e,n){var r=tK(n,2*t,2*t),i=r.getContext("2d"),a=t,o=t;if(1===e)i.beginPath(),i.arc(a,o,t,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{var s=i.createRadialGradient(a,o,t*e,a,o,t);s.addColorStop(0,"rgba(0,0,0,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=s,i.fillRect(0,0,2*t,2*t)}return r}),(function(t){return"".concat(t)}));function nK(t,e,n,r,i,a,o){var s=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},a);s.minOpacity*=255,s.opacity*=255,s.maxOpacity*=255;var u=tK(o,t,e).getContext("2d"),c=function(t,e){var n=tK(e,256,1).getContext("2d"),r=n.createLinearGradient(0,0,256,1);return function(t){return"string"==typeof t?t.split(" ").map((function(t){var e=g(t.split(":"),2);return[+e[0],e[1]]})):t}(t).forEach((function(t){var e=g(t,2),n=e[0],i=e[1];r.addColorStop(n,i)})),n.fillStyle=r,n.fillRect(0,0,256,1),n.getImageData(0,0,256,1).data}(s.gradient,o);u.clearRect(0,0,t,e),function(t,e,n,r,i,a){for(var o=i.blur,s=r.length;s--;){var u=r[s],c=u.x,l=u.y,f=u.value,d=u.radius,h=Math.min(f,n),p=c-d,v=l-d,g=eK(d,1-o,a),y=(h-e)/(n-e);t.globalAlpha=Math.max(y,.001),t.drawImage(g,p,v)}}(u,n,r,i,s,o);var l=function(t,e,n,r,i){for(var a=i.minOpacity,o=i.opacity,s=i.maxOpacity,u=i.useGradientOpacity,c=e,l=n,f=t.getImageData(0,0,c,l),d=f.data,h=d.length,p=3;p<h;p+=4){var v=d[p],g=4*v;if(g){var y=o||Math.max(0,Math.min(s,Math.max(a,v)));d[p-3]=r[g],d[p-2]=r[g+1],d[p-1]=r[g+2],d[p]=u?r[g+3]:y}}return f}(u,t,e,c,s),f=tK(o,t,e).getContext("2d");return f.putImageData(l,0,0),f}var rK=function(t,e){var n=t.gradient,r=t.opacity,i=t.maxOpacity,a=t.minOpacity,o=t.blur,s=t.useGradientOpacity,u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),c=e.coordinate,l=e.createCanvas,f=e.document;return function(t,e,d){var h,p,v=e.transform,y=g(c.getSize(),2),m=y[0],b=y[1],x=t.map((function(t){return{x:t[0],y:t[1],value:t[2],radius:t[3]}})),w=$X(t,(function(t){return t[2]})),k=ZX(t,(function(t){return t[2]})),E=m&&b?nK(m,b,w,k,x,(h={gradient:n,opacity:r,minOpacity:a,maxOpacity:i,blur:o,useGradientOpacity:s},p=function(t){return void 0===t},Object.keys(h).reduce((function(t,e){var n=h[e];return p(n)||(t[e]=n),t}),{})),l):{canvas:null};return fH(f.createElement("image",{})).call(NH,d).style("x",0).style("y",0).style("width",m).style("height",b).style("src",E.canvas.toDataURL()).style("transform",v).call(NH,u).node()}};rK.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var iK={heatmap:rK},aK=function(t){return function(t,e,n,r){var i=n.x,a=n.y,o=n.size,s=n.color,u=Array.from(t,(function(t){var e=o?+o[t]:40;return[].concat(M(r.map([+i[t],+a[t]])),[s[t],e])}));return[[0],[u]]}};aK.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:iK,channels:[].concat(M(uY({shapes:Object.keys(iK)})),[{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}]),preInference:[].concat(M(dY()),[{type:mj},{type:fq}]),postInference:[].concat(M([]),M(cY()))};var oK=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function sK(t,e){var n=e.text,r=void 0===n?"text":n,i=e.value,a=void 0===i?"value":i;return t.map((function(t){return Object.assign(Object.assign({},t),{text:t[r],value:t[a]})}))}var uK=function(t,e){return n=void 0,r=void 0,i=void 0,a=Jn().mark((function n(){var r,i,a,o,s,u,c,l,f,d,h,p;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.width,i=e.height,a=t.data,o=t.encode,s=void 0===o?{}:o,u=t.scale,c=t.style,l=void 0===c?{}:c,f=t.layout,d=void 0===f?{}:f,h=oK(t,["data","encode","scale","style","layout"]),p=sK(a,s),n.abrupt("return",vd({},{axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:function(t){return t.fontFamily}}},Object.assign(Object.assign({data:{value:p,transform:[Object.assign({type:"wordCloud",size:[r,i]},d)]},encode:s,scale:u,style:l},h),{axis:!1})));case 4:case"end":return n.stop()}}),n)})),new(i||(i=Promise))((function(t,e){function o(t){try{u(a.next(t))}catch(t){e(t)}}function s(t){try{u(a.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(e.value).then(o,s)}u((a=a.apply(n,r||[])).next())}));var n,r,i,a};uK.props={};var cK=function(){return["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"]};cK.props={};var lK=function(){return["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"]};lK.props={};var fK=function(t){return new TM(t)};fK.props={};var dK=function(t){return new zM(t)};dK.props={};var hK=function(t){return new GM(t)};function pK(t){return Me(t)?0:dl(t)?t.length:Object.keys(t).length}hK.props={};const vK=function(t,e){if(!dl(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,i=0;i<t.length;i++)if(t[i]===e){r=i;break}return r};function gK(t){return Math.abs(t)<1e-14?t:parseFloat(t.toFixed(14))}var yK=[1,5,2,2.5,4,3],mK=100*Number.EPSILON;function bK(t,e,n,r,i,a){var o=pK(e),s=vK(e,t),u=0,c=function(t,e){return(t%e+e)%e}(r,a);return(c<mK||a-c<mK)&&r<=0&&i>=0&&(u=1),1-s/(o-1)-n+u}function xK(t,e,n){var r=pK(e);return 1-vK(e,t)/(r-1)-n+1}function wK(t,e,n,r,i,a){var o=(t-1)/(a-i),s=(e-1)/(Math.max(a,r)-Math.min(n,i));return 2-Math.max(o/s,s/o)}function kK(t,e){return t>=e?2-(t-1)/(e-1):1}function EK(t,e,n,r){var i=e-t;return 1-.5*(Math.pow(e-r,2)+Math.pow(t-n,2))/Math.pow(.1*i,2)}function OK(t,e,n){var r=e-t;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}var SK=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:yK,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[.25,.2,.5,.05],o=n<0?0:Math.round(n);if(Number.isNaN(t)||Number.isNaN(e)||"number"!=typeof t||"number"!=typeof e||!o)return[];if(e-t<1e-15||1===o)return[t];for(var s={score:-2,lmin:0,lmax:0,lstep:0},u=1;u<1/0;){for(var c=0;c<i.length;c+=1){var l=i[c],f=xK(l,i,u);if(a[0]*f+a[1]+a[2]+a[3]<s.score){u=1/0;break}for(var d=2;d<1/0;){var h=kK(d,o);if(a[0]*f+a[1]+a[2]*h+a[3]<s.score)break;for(var p=(e-t)/(d+1)/u/l,v=Math.ceil(Math.log10(p));v<1/0;){var g=u*l*Math.pow(10,v),y=OK(t,e,g*(d-1));if(a[0]*f+a[1]*y+a[2]*h+a[3]<s.score)break;var m=Math.floor(e/g)*u-(d-1)*u,b=Math.ceil(t/g)*u;if(m<=b)for(var x=b-m,w=0;w<=x;w+=1){var k=(m+w)*(g/u),E=k+g*(d-1),O=g,S=bK(l,i,u,k,E,O),M=EK(t,e,k,E),T=wK(d,o,t,e,k,E),A=a[0]*S+a[1]*M+a[2]*T+1*a[3];A>s.score&&(!r||k<=t&&E>=e)&&(s.lmin=k,s.lmax=E,s.lstep=O,s.score=A)}v+=1}d+=1}}u+=1}var P=gK(s.lmax),N=gK(s.lmin),C=gK(s.lstep),_=Math.floor(function(t){return Math.round(1e12*t)/1e12}((P-N)/C))+1,L=new Array(_);L[0]=gK(N);for(var R=1;R<_;R+=1)L[R]=gK(L[R-1]+C);return L},MK=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:SK}}},{key:"map",value:function(t){return vM(t)?t:this.options.unknown}},{key:"invert",value:function(t){return this.map(t)}},{key:"clone",value:function(){return new e(this.options)}},{key:"getTicks",value:function(){var t=this.options,e=t.domain,n=t.tickCount,r=t.tickMethod,i=g(e,2),a=i[0],o=i[1];return Oe(a)&&Oe(o)?r(a,o,n):[]}}])}(iM),TK=function(t){return new MK(t)};TK.props={};var AK=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"getDefaultOptions",value:function(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:jM,paddingInner:1,paddingOuter:0}}},{key:"getPaddingInner",value:function(){return 1}},{key:"clone",value:function(){return new e(this.options)}},{key:"update",value:function(t){Dn(e,"update",this,3)([t])}},{key:"getPaddingOuter",value:function(){return this.options.padding}}])}(GM),PK=function(t){return new AK(t)};PK.props={};var NK=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,CK=/\[([^]*?)\]/gm;function _K(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}var LK=function(t){return function(e,n){var r=n[t].map((function(t){return t.toLowerCase()})),i=r.indexOf(e.toLowerCase());return i>-1?i:null}};function RK(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var a=i[r];for(var o in a)t[o]=a[o]}return t}var jK=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],DK=["January","February","March","April","May","June","July","August","September","October","November","December"],IK=_K(DK,3),FK=RK({},{dayNamesShort:_K(jK,3),dayNames:jK,monthNamesShort:IK,monthNames:DK,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10?1:0)*t%10]}}),zK=function(t,e){for(void 0===e&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},BK={D:function(t){return String(t.getDate())},DD:function(t){return zK(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return zK(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return zK(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return zK(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return zK(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return zK(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return zK(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return zK(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return zK(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return zK(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return zK(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+zK(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+zK(Math.floor(Math.abs(e)/60),2)+":"+zK(Math.abs(e)%60,2)}},GK=(LK("monthNamesShort"),LK("monthNames"),{default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"}),WK=1e3,VK=6e4,HK=36e5,YK=864e5,UK=6048e5,qK=2592e6,XK=31536e6;function KK(t,e,n,r){var i=function(t,i){i&&function(t,e){for(var i=function(t){return r(t)%e===0},a=e;a&&!i(t);)n(t,-1),a-=1}(t,i),e(t)},a=function(t,e){var r=new Date(+t-1);return i(r,e),n(r,e),i(r),r};return{ceil:a,floor:function(t,e){var n=new Date(+t);return i(n,e),n},range:function(t,e,r,o){for(var s=[],u=Math.floor(r),c=o?a(t,r):a(t);c<e;n(c,u),i(c))s.push(new Date(+c));return s},duration:t}}var $K=KK(1,(function(t){return t}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+e)}),(function(t){return t.getTime()})),ZK=KK(WK,(function(t){t.setMilliseconds(0)}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+WK*e)}),(function(t){return t.getSeconds()})),QK=KK(VK,(function(t){t.setSeconds(0,0)}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+VK*e)}),(function(t){return t.getMinutes()})),JK=KK(HK,(function(t){t.setMinutes(0,0,0)}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+HK*e)}),(function(t){return t.getHours()})),t$=KK(YK,(function(t){t.setHours(0,0,0,0)}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+YK*e)}),(function(t){return t.getDate()-1})),e$=KK(qK,(function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.getMonth();t.setMonth(n+e)}),(function(t){return t.getMonth()})),n$=KK(UK,(function(t){t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setDate(t.getDate()+7*e)}),(function(t){var e=e$.floor(t),n=new Date(+t);return Math.floor((+n-+e)/UK)})),r$=KK(XK,(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.getFullYear();t.setFullYear(n+e)}),(function(t){return t.getFullYear()})),i$={millisecond:$K,second:ZK,minute:QK,hour:JK,day:t$,week:n$,month:e$,year:r$},a$=KK(1,(function(t){return t}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+e)}),(function(t){return t.getTime()})),o$=KK(WK,(function(t){t.setUTCMilliseconds(0)}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+WK*e)}),(function(t){return t.getUTCSeconds()})),s$=KK(VK,(function(t){t.setUTCSeconds(0,0)}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+VK*e)}),(function(t){return t.getUTCMinutes()})),u$=KK(HK,(function(t){t.setUTCMinutes(0,0,0)}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+HK*e)}),(function(t){return t.getUTCHours()})),c$=KK(YK,(function(t){t.setUTCHours(0,0,0,0)}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+YK*e)}),(function(t){return t.getUTCDate()-1})),l$=KK(qK,(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.getUTCMonth();t.setUTCMonth(n+e)}),(function(t){return t.getUTCMonth()})),f$=KK(UK,(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+UK*e)}),(function(t){var e=l$.floor(t),n=new Date(+t);return Math.floor((+n-+e)/UK)})),d$=KK(XK,(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.getUTCFullYear();t.setUTCFullYear(n+e)}),(function(t){return t.getUTCFullYear()})),h$={millisecond:a$,second:o$,minute:s$,hour:u$,day:c$,week:f$,month:l$,year:d$};function p$(t,e,n,r,i){var a,o=+t,s=+e,u=function(t){var e=t?h$:i$,n=e.year,r=e.month,i=e.day,a=e.hour,o=e.minute,s=e.second;return{tickIntervals:[[s,1],[s,5],[s,15],[s,30],[o,1],[o,5],[o,15],[o,30],[a,1],[a,3],[a,6],[a,12],[i,1],[i,2],[e.week,1],[r,1],[r,3],[n,1]],year:n,millisecond:e.millisecond}}(i),c=u.tickIntervals,l=u.year,f=u.millisecond,d=function(t){var e=g(t,2),n=e[0],r=e[1];return n.duration*r},h=r?(s-o)/r:n||5,p=r||(s-o)/h,v=c.length,y=sM(c,p,0,v,d);if(y===v)a=[l,xM(o/l.duration,s/l.duration,h)];else if(y){var m=g(p/d(c[y-1])<d(c[y])/p?c[y-1]:c[y],2),b=m[0],x=m[1];a=[b,r?Math.ceil(r/b.duration):x]}else a=[f,Math.max(xM(o,s,h),1)];return a}var v$=function(t,e,n,r,i){var a=t>e,o=a?e:t,s=a?t:e,u=g(p$(o,s,n,r,i),2),c=u[0],l=u[1],f=c.range(o,new Date(+s+1),l,!0);return a?f.reverse():f},g$=function(t,e,n,r,i){var a=t>e,o=a?e:t,s=a?t:e,u=g(p$(o,s,n,r,i),2),c=u[0],l=u[1],f=[c.floor(o,l),c.ceil(s,l)];return a?f.reverse():f};function y$(t){var e=t.getTimezoneOffset(),n=new Date(t);return n.setMinutes(n.getMinutes()+e,n.getSeconds(),n.getMilliseconds()),n}var m$=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"getDefaultOptions",value:function(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:v$,interpolate:dM,mask:void 0,utc:!1}}},{key:"chooseTransforms",value:function(){return[function(t){return+t},function(t){return new Date(t)}]}},{key:"chooseNice",value:function(){return g$}},{key:"getTickMethodOptions",value:function(){var t=this.options,e=t.domain,n=t.tickCount,r=t.tickInterval,i=t.utc;return[e[0],e[e.length-1],n,r,i]}},{key:"getFormatter",value:function(){var t=this.options,e=t.mask,n=t.utc,r=n?h$:i$,i=n?y$:rM;return function(t){return function(t,e,n){if(void 0===e&&(e=GK.default),void 0===n&&(n={}),"number"==typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");var r=[];e=(e=GK[e]||e).replace(CK,(function(t,e){return r.push(e),"@@@"}));var i=RK(RK({},FK),n);return(e=e.replace(NK,(function(e){return BK[e](t,i)}))).replace(/@@@/g,(function(){return r.shift()}))}(i(t),e||function(t,e){var n=e.minute,r=e.hour,i=e.day,a=e.week,o=e.month,s=e.year;return e.second.floor(t)<t?".SSS":n.floor(t)<t?":ss":r.floor(t)<t?"hh:mm":i.floor(t)<t?"hh A":o.floor(t)<t?a.floor(t)<t?"MMM DD":"ddd DD":s.floor(t)<t?"MMMM":"YYYY"}(t,r))}}},{key:"clone",value:function(){return new e(this.options)}}])}(SM),b$=function(t){return new m$(t)};b$.props={};var x$=function(t){return function(e){return-t(-e)}},w$=function(t,e){var n=Math.log(t),r=t===Math.E?Math.log:10===t?Math.log10:2===t?Math.log2:function(t){return Math.log(t)/n};return e?x$(r):r},k$=function(t,e){var n=t===Math.E?Math.exp:function(e){return Math.pow(t,e)};return e?x$(n):n},E$=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=t<0,a=k$(r,i),o=w$(r,i),s=e<t,u=s?e:t,c=s?t:e,l=o(u),f=o(c),d=[];if(!(r%1)&&f-l<n){if(l=Math.floor(l),f=Math.ceil(f),i)for(;l<=f;l+=1)for(var h=a(l),p=r-1;p>=1;p-=1){var v=h*p;if(v>c)break;v>=u&&d.push(v)}else for(;l<=f;l+=1)for(var g=a(l),y=1;y<r;y+=1){var m=g*y;if(m>c)break;m>=u&&d.push(m)}2*d.length<n&&(d=MM(u,c,n))}else{var b=-1===n?f-l:Math.min(f-l,n);d=MM(l,f,b).map(a)}return s?d.reverse():d},O$=function(t,e,n,r){var i=t<0,a=w$(r,i),o=k$(r,i),s=t>e,u=s?e:t,c=s?t:e,l=[o(Math.floor(a(u))),o(Math.ceil(a(c)))];return s?l.reverse():l},S$=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"getDefaultOptions",value:function(){return{domain:[1,10],range:[0,1],base:10,interpolate:hM,tickMethod:E$,tickCount:5}}},{key:"chooseNice",value:function(){return O$}},{key:"getTickMethodOptions",value:function(){var t=this.options,e=t.domain,n=t.tickCount,r=t.base;return[e[0],e[e.length-1],n,r]}},{key:"chooseTransforms",value:function(){var t=this.options,e=t.base,n=t.domain[0]<0;return[w$(e,n),k$(e,n)]}},{key:"clone",value:function(){return new e(this.options)}}])}(SM),M$=function(t){return new S$(t)};M$.props={};var T$=function(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)},A$=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:hM,tickMethod:MM,tickCount:5}}},{key:"chooseTransforms",value:function(){var t=this.options.exponent;if(1===t)return[rM,rM];var e=.5===t?T$:function(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}(t),n=function(t){return function(e){return e<0?-Math.pow(-e,1/t):Math.pow(e,1/t)}}(t);return[e,n]}},{key:"clone",value:function(){return new e(this.options)}}])}(SM),P$=function(t){return new A$(t)};P$.props={};var N$=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:hM,tickMethod:MM,tickCount:5,exponent:.5}}},{key:"update",value:function(t){Dn(e,"update",this,3)([t])}},{key:"clone",value:function(){return new e(this.options)}}])}(A$),C$=function(t){return new N$(t)};C$.props={};var _$=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"getDefaultOptions",value:function(){return{domain:[.5],range:[0,1]}}},{key:"map",value:function(t){if(!vM(t))return this.options.unknown;var e=sM(this.thresholds,t,0,this.n);return this.options.range[e]}},{key:"invert",value:function(t){var e=this.options.range.indexOf(t),n=this.thresholds;return[n[e-1],n[e]]}},{key:"clone",value:function(){return new e(this.options)}},{key:"rescale",value:function(){var t=this.options,e=t.domain,n=t.range;this.n=Math.min(e.length,n.length-1),this.thresholds=e}}])}(iM),L$=function(t){return new _$(t)};function R$(t,e){var n=t.length;if(n){if(n<2)return t[n-1];var r=(n-1)*e,i=Math.floor(r),a=t[i];return a+(t[i+1]-a)*(r-i)}}L$.props={};var j$=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"getDefaultOptions",value:function(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:SK}}},{key:"rescale",value:function(){var t=this.options,e=t.domain,n=t.range;this.n=n.length-1,this.thresholds=function(t,e){var n=t;arguments.length>2&&void 0!==arguments[2]&&arguments[2]||n.sort((function(t,e){return t-e}));for(var r=[],i=1;i<e;i+=1)r.push(R$(n,i/e));return r}(e,this.n+1,!1)}},{key:"invert",value:function(t){var n=g(Dn(e,"invert",this,3)([t]),2),r=n[0],i=n[1],a=this.options.domain,o=a[0],s=a[a.length-1];return void 0===r&&void 0===i?[r,i]:[r||o,i||s]}},{key:"getThresholds",value:function(){return this.thresholds}},{key:"clone",value:function(){return new e(this.options)}},{key:"getTicks",value:function(){var t=this.options,e=t.tickCount,n=t.domain,r=t.tickMethod,i=n.length-1;return r(n[0],n[i],e)}}])}(_$),D$=function(t){return new j$(t)};D$.props={};var I$=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:SK}}},{key:"nice",value:function(){if(this.options.nice){var t=g(this.getTickMethodOptions(),3),e=t[0],n=t[1],r=t[2];this.options.domain=wM(e,n,r)}}},{key:"getTicks",value:function(){var t=this.options.tickMethod,e=g(this.getTickMethodOptions(),3);return t(e[0],e[1],e[2])}},{key:"getTickMethodOptions",value:function(){var t=this.options,e=t.domain,n=t.tickCount;return[e[0],e[e.length-1],n]}},{key:"rescale",value:function(){this.nice();var t=this.options,e=t.range,n=g(t.domain,2),r=n[0],i=n[1];this.n=e.length-1,this.thresholds=new Array(this.n);for(var a=0;a<this.n;a+=1)this.thresholds[a]=((a+1)*i-(a-this.n)*r)/(this.n+1)}},{key:"invert",value:function(t){var n=g(Dn(e,"invert",this,3)([t]),2),r=n[0],i=n[1],a=g(this.options.domain,2),o=a[0],s=a[1];return void 0===r&&void 0===i?[r,i]:[r||o,i||s]}},{key:"getThresholds",value:function(){return this.thresholds}},{key:"clone",value:function(){return new e(this.options)}}])}(_$),F$=function(t){return new I$(t)};F$.props={};var z$,B$=z$=function(t){function e(t){return k(this,e),N(this,e,[t])}return _(e,t),O(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:rM,tickMethod:MM,tickCount:5}}},{key:"clone",value:function(){return new z$(this.options)}}])}(TM);B$=z$=function(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([function(t){t.prototype.rescale=function(){this.initRange(),this.nice();var t=g(this.chooseTransforms(),1)[0];this.composeOutput(t,this.chooseClamp(t))},t.prototype.initRange=function(){var t=this.options.interpolator;this.options.range=function(t){return[t(0),t(1)]}(t)},t.prototype.composeOutput=function(t,e){var n=this.getOptions(),r=n.domain,i=n.interpolator,a=n.round,o=function(t){var e=g(t,2),n=e[0],r=e[1];return oM(dM(0,1),aM(n,r))}(r.map(t)),s=a?function(t){return function(e){var n=t(e);return Oe(n)?Math.round(n):n}}(i):i;this.output=oM(s,o,e,t)},t.prototype.invert=void 0}],B$);var G$=function(t){return new B$(t)};G$.props={};var W$=function(t){return new UV(t)};function V$(t){var e=t.colorDefault,n=t.colorBlack,r=t.colorWhite,i=t.colorStroke,a=t.colorBackground,o=t.padding1,s=t.padding2,u=(t.padding3,t.alpha90),c=t.alpha65,l=t.alpha45,f=(t.alpha25,t.alpha10),d=t.category10,h=t.category20,p=t.sizeDefault,v=void 0===p?1:p,g=t.padding,y=void 0===g?"auto":g,m=t.margin;return{padding:y,margin:void 0===m?16:m,size:v,color:e,category10:d,category20:h,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:a,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:n,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:i,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:i,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:i,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:i,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:i,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:i,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:i,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:i,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:i,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:n,gridStrokeOpacity:f,labelAlign:"horizontal",labelFill:n,labelOpacity:l,labelFontSize:12,labelFontWeight:"normal",labelSpacing:o,line:!1,lineLineWidth:.5,lineStroke:n,lineStrokeOpacity:l,tickLength:4,tickLineWidth:1,tickStroke:n,tickOpacity:l,titleFill:n,titleOpacity:u,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",label:!1,tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:n,itemLabelFillOpacity:u,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,itemSpacing:[o,o],itemValueFill:n,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:n,navButtonFillOpacity:.65,navPageNumFill:n,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:n,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:n,tickStrokeOpacity:.25,rowPadding:o,colPadding:s,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:n,handleLabelFillOpacity:l,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:n,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:n,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:n,labelFillOpacity:l,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:u,tickStroke:n,tickStrokeOpacity:l},label:{fill:n,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:n,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:r,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:n,fontWeight:"normal"},slider:{trackSize:16,trackFill:i,trackFillOpacity:1,selectionFill:e,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:n,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:n,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:n,titleFillOpacity:u,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:n,subtitleFillOpacity:c,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"},tooltip:{css:{".g2-tooltip":{"font-family":"sans-serif"}}}}}W$.props={};var H$=V$({colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),Y$=function(t){return vd({},H$,t)};Y$.props={};var U$=function(t){return vd({},Y$(),{category10:"category10",category20:"category20"},t)};U$.props={};var q$=V$({colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25}),X$=function(t){return vd({},q$,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},t)},K$=function(t){return Object.assign({},X$(),{category10:"category10",category20:"category20"},t)};K$.props={};var $$=V$({colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),Z$=function(t){return vd({},$$,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:function(t,e){return 0!==e}},axisRight:{gridFilter:function(t,e){return 0!==e}},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},t)};function Q$(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}Z$.props={};var J$,tZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function eZ(t){if(!(e=tZ.exec(t)))throw new Error("invalid format: "+t);var e;return new nZ({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function nZ(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function rZ(t,e){var n=Q$(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}eZ.prototype=nZ.prototype,nZ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const iZ={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return rZ(100*t,e)},r:rZ,s:function(t,e){var n=Q$(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(J$=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Q$(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function aZ(t){return t}var oZ,sZ,uZ=Array.prototype.map,cZ=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function lZ(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,a=0;a<t.length;a++){var o=t[a],s=o.x,u=o.y,c=je([s+o.width,u+o.height],2),l=c[0],f=c[1];s<e&&(e=s),u<n&&(n=u),l>r&&(r=l),f>i&&(i=f)}return new GE(e,n,r-e,i-n)}oZ=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?aZ:(e=uZ.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?aZ:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(uZ.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=eZ(t)).fill,n=t.align,f=t.sign,d=t.symbol,h=t.zero,p=t.width,v=t.comma,g=t.precision,y=t.trim,m=t.type;"n"===m?(v=!0,m="g"):iZ[m]||(void 0===g&&(g=12),y=!0,m="g"),(h||"0"===e&&"="===n)&&(h=!0,e="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",x="$"===d?a:/[%p]/.test(m)?u:"",w=iZ[m],k=/[defgprs%]/.test(m);function E(t){var i,a,u,d=b,E=x;if("c"===m)E=w(t)+E,t="";else{var O=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:w(Math.abs(t),g),y&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),O&&0===+t&&"+"!==f&&(O=!1),d=(O?"("===f?f:c:"-"===f||"("===f?"":f)+d,E=("s"===m?cZ[8+J$/3]:"")+E+(O&&"("===f?")":""),k)for(i=-1,a=t.length;++i<a;)if(48>(u=t.charCodeAt(i))||u>57){E=(46===u?o+t.slice(i+1):t.slice(i))+E,t=t.slice(0,i);break}}v&&!h&&(t=r(t,1/0));var S=d.length+t.length+E.length,M=S<p?new Array(p-S+1).join(e):"";switch(v&&h&&(t=r(M+t,M.length?p-E.length:1/0),M=""),n){case"<":t=d+t+E+M;break;case"=":t=d+M+t+E;break;case"^":t=M.slice(0,S=M.length>>1)+d+t+E+M.slice(S);break;default:t=M+d+t+E}return s(t)}return g=void 0===g?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),E.toString=function(){return t+""},E}return{format:f,formatPrefix:function(t,e){var n,r=f(((t=eZ(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor((n=e,((n=Q$(Math.abs(n)))?n[1]:NaN)/3)))),a=Math.pow(10,-i),o=cZ[8+i/3];return function(t){return r(a*t)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),sZ=oZ.format,oZ.formatPrefix;var fZ=function(t,e,n){var r=t.width,i=t.height,a=n.flexDirection,o=void 0===a?"row":a,s=(n.flexWrap,n.justifyContent),u=void 0===s?"flex-start":s,c=(n.alignContent,n.alignItems),l=void 0===c?"flex-start":c,f="row"===o,d="row"===o||"column"===o,h=f?d?[1,0]:[-1,0]:d?[0,1]:[0,-1],p=je([0,0],2),v=p[0],g=p[1],y=e.map((function(t){var e,n=t.width,r=t.height,i=je([v,g],2),a=i[0],o=i[1];return e=je([v+n*h[0],g+r*h[1]],2),v=e[0],g=e[1],new GE(a,o,n,r)})),m=lZ(y),b={"flex-start":0,"flex-end":f?r-m.width:i-m.height,center:f?(r-m.width)/2:(i-m.height)/2},x=y.map((function(t){var e=t.x,n=t.y,r=GE.fromRect(t);return r.x=f?e+b[u]:e,r.y=f?n:n+b[u],r})),w=(lZ(x),function(t){var e=je(f?["height",i]:["width",r],2),n=e[0],a=e[1];switch(l){case"flex-start":default:return 0;case"flex-end":return a-t[n];case"center":return a/2-t[n]/2}}),k=x.map((function(t){var e=t.x,n=t.y,r=GE.fromRect(t);return r.x=f?e:e+w(r),r.y=f?n+w(r):n,r})).map((function(e){var n,r,i=GE.fromRect(e);return i.x+=null!==(n=t.x)&&void 0!==n?n:0,i.y+=null!==(r=t.y)&&void 0!==r?r:0,i}));return k},dZ=function(t,e,n){return[]},hZ=function(t){function e(e){var n=t.call(this,e)||this;n.layoutEvents=[Ys.BOUNDS_CHANGED,Ys.INSERTED,Ys.REMOVED],n.$margin=VE(0),n.$padding=VE(0);var r=e.style||{},i=r.margin,a=void 0===i?0:i,o=r.padding,s=void 0===o?0:o;return n.margin=a,n.padding=s,n.isMutationObserved=!0,n.bindEvents(),n}return Ne(e,t),Object.defineProperty(e.prototype,"margin",{get:function(){return this.$margin},set:function(t){this.$margin=VE(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this.$padding},set:function(t){this.$padding=VE(t)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var t=this.attributes,e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,a=t.width,o=t.height,s=je(this.$margin,4),u=s[0],c=s[1],l=s[2],f=s[3];return new GE(n-f,i-u,a+f+c,o+u+l)},e.prototype.appendChild=function(e,n){return e.isMutationObserved=!0,t.prototype.appendChild.call(this,e,n),e},e.prototype.getAvailableSpace=function(){var t=this.attributes,e=t.width,n=t.height,r=je(this.$padding,4),i=r[0],a=r[1],o=r[2],s=r[3],u=je(this.$margin,4),c=u[0],l=u[3];return new GE(s+l,i+c,e-s-a,n-i-o)},e.prototype.layout=function(){if(this.attributes.display&&this.isConnected&&!this.children.some((function(t){return!t.isConnected})))try{var t=this.attributes,e=t.x,n=t.y;this.style.transform="translate(".concat(e,", ").concat(n,")");var r=function(t,e,n){if(0===e.length)return[];var r={flex:fZ,grid:dZ},i=n.display in r?r[n.display]:null;return(null==i?void 0:i.call(null,t,e,n))||[]}(this.getAvailableSpace(),this.children.map((function(t){return t.getBBox()})),this.attributes);this.children.forEach((function(t,e){var n=r[e],i=n.x,a=n.y;t.style.transform="translate(".concat(i,", ").concat(a,")")}))}catch(t){}},e.prototype.bindEvents=function(){var t=this;this.layoutEvents.forEach((function(e){t.addEventListener(e,(function(e){e.target&&(e.target.isMutationObserved=!0,t.layout())}))}))},e.prototype.attributeChangedCallback=function(t,e,n){"margin"===t?this.margin=n:"padding"===t&&(this.padding=n),this.layout()},e}(Bu);function pZ(t,e,n){return t.querySelector(e)?fH(t).select(e):fH(t).append(n)}function vZ(t){return Array.isArray(t)?t.join(", "):"".concat(t||"")}function gZ(t,e){var n="row",r="flex-start",i="center",a={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};if(t in a){var o=g(a[t],3);n=o[0],r=o[1],i=o[2]}return Object.assign({display:"flex",flexDirection:n,justifyContent:r,alignItems:i},e)}var yZ=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"child",get:function(){var t;return null===(t=this.children)||void 0===t?void 0:t[0]}},{key:"update",value:function(t){var e;this.attr(t);var n=t.subOptions;null===(e=this.child)||void 0===e||e.update(n)}}])}(hZ),mZ=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"update",value:function(t){var e,n=t.subOptions;this.attr(t),null===(e=this.child)||void 0===e||e.update(n)}}])}(yZ);function bZ(t,e){var n;return null===(n=t.filter((function(t){return t.getOptions().name===e})))||void 0===n?void 0:n[0]}function xZ(t){return"vertical"===t||t===-Math.PI/2}function wZ(t,e,n){var r=t.bbox,i=e.position,a=void 0===i?"top":i,o=e.size,s=e.length,u=["top","bottom","center"].includes(a),c=g(u?[r.height,r.width]:[r.width,r.height],2),l=c[0],f=c[1],d=n.props,h=d.defaultSize,p=d.defaultLength,v=o||h||l,y=s||p||f,m=u?"horizontal":"vertical",b=g(u?[y,v]:[v,y],2);return{orientation:m,width:b[0],height:b[1],size:v,length:y}}function kZ(t){var e=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],n=t.style,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["style"]),i={};return Object.entries(r).forEach((function(t){var n=g(t,2),r=n[0],a=n[1];e.includes(r)?i["show".concat(ll(r))]=a:i[r]=a})),Object.assign(Object.assign({},i),n)}var EZ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function OZ(t,e){var n=e.eulerAngles,r=e.origin;r&&t.setOrigin(r),n&&t.rotate(n[0],n[1],n[2])}function SZ(t){var e=t.getOptions();return[e.innerWidth,e.innerHeight,e.depth]}function MZ(t,e,n,r,i,a,o,s){var u;void 0===n&&void 0===a||t.update(Object.assign(Object.assign({},n&&{tickCount:n}),a&&{tickMethod:a}));var c=function(t,e,n){if(t.getTicks)return t.getTicks();if(!n)return e;var r=EH(e,(function(t){return+t})),i=g(r,2);return n(i[0],i[1],t.getOptions().tickCount)}(t,e,a),l=i?c.filter(i):c,f=function(t){return t instanceof Date?String(t):"object"==typeof t&&t?t:String(t)},d=r||(null===(u=t.getFormatter)||void 0===u?void 0:u.call(t))||f,h=function(t,e){if(uD(e))return function(t){return t};var n=e.getOptions(),r=n.innerWidth,i=n.innerHeight,a=n.insetTop,o=n.insetBottom,s=n.insetLeft,u=n.insetRight,c=g("left"===t||"right"===t?[a,o,i]:[s,u,r],3),l=c[0],f=c[1],d=c[2],h=new TM({domain:[0,1],range:[l/d,1-f/d]});return function(t){return h.map(t)}}(o,s),p=function(t,e){var n=e.getOptions(),r=n.width,i=n.height;return function(n){if(!dD(e))return n;var a="bottom"===t?[n,1]:[0,n],o=e.map(a);if("bottom"===t){var s=o[0];return new TM({domain:[0,r],range:[0,1]}).map(s)}if("left"===t){var u=o[1];return new TM({domain:[0,i],range:[0,1]}).map(u)}return n}}(o,s),v=function(t){return["left","right"].includes(t)};return uD(s)||sD(s)?l.map((function(e,n,r){var i,a,u=(null===(i=t.getBandWidth)||void 0===i?void 0:i.call(t,e))/2||0,c=h(t.map(e)+u);return{value:cD(s)&&"center"===o||sD(s)&&(null===(a=t.getTicks)||void 0===a?void 0:a.call(t))&&function(t){return["top","bottom","center","outer"].includes(t)}(o)||sD(s)&&v(o)?1-c:c,label:f(d(kH(e),n,r)),id:String(n)}})):l.map((function(e,n,r){var i,a=(null===(i=t.getBandWidth)||void 0===i?void 0:i.call(t,e))/2||0,s=p(h(t.map(e)+a));return{value:v(o)?1-s:s,label:f(d(kH(e),n,r)),id:String(n)}}))}function TZ(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;if(t.length>0)return t;var n=e.labelAutoRotate,r=e.labelAutoHide,i=e.labelAutoEllipsis,a=e.labelAutoWrap,o=[],s=function(t,e){e&&o.push(Object.assign(Object.assign({},t),e))};return s({type:"rotate",optionalAngles:[0,15,30,45,60,90]},n),s({type:"ellipsis",minLength:20},i),s({type:"hide"},r),s({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},a),o}function AZ(t,e,n){return!function(t){return uD(t)&&sD(t)}(e)&&!fD(e)&&(void 0===t?!!n.getTicks:t)}var PZ=function(t){return function(e){var n=e.labelFormatter,r=e.labelFilter,i=void 0===r?function(){return!0}:r;return function(r){var a,o=g(r.scales,1)[0],s=(null===(a=o.getTicks)||void 0===a?void 0:a.call(o))||o.getOptions().domain,u="string"==typeof n?sZ(n):n,c=Object.assign(Object.assign({},e),{labelFormatter:u,labelFilter:function(t,e,n){return i(s[e],e,s)},scale:o});return t(c)(r)}}},NZ=PZ((function(t){var e=t.direction,n=void 0===e?"left":e,r=t.important,i=void 0===r?{}:r,a=t.labelFormatter,o=(t.order,t.orientation),s=t.actualPosition,u=t.position,c=t.size,l=t.style,f=void 0===l?{}:l,d=t.title,h=t.tickCount,p=t.tickFilter,v=t.tickMethod,y=t.transform,m=t.indexBBox,b=EZ(t,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","transform","indexBBox"]);return function(e){var r=e.scales,l=e.value,x=e.coordinate,w=e.theme,k=l.bbox,E=g(r,1)[0],O=E.getOptions(),S=O.domain,M=O.xScale,T=function(t,e,n,r,i,a){var o=function(t,e,n,r,i){var a=n.axis,o=["top","right","bottom","left"].includes(i)?n["axis".concat(tH(i))]:n.axisLinear,s=t.getOptions().name,u=n["axis".concat(ll(s))]||{};return Object.assign({},a,o,u)}(t,0,n,0,i);return"center"===i?Object.assign(Object.assign(Object.assign(Object.assign({},o),{labelDirection:"right"===r?"negative":"positive"}),"center"===r?{labelTransform:"translate(50%,0)"}:null),{tickDirection:"right"===r?"negative":"positive",labelSpacing:"center"===r?0:4,titleSpacing:xZ(a)?10:0,tick:"center"!==r&&void 0}):o}(E,0,w,n,u,o),A=Object.assign(Object.assign(Object.assign({},T),f),b),P=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"xy",r=g(SZ(e),3),i=r[0],a=r[1],o=r[2];return"xy"===n?t.includes("bottom")||t.includes("top")?a:i:"xz"===n?t.includes("bottom")||t.includes("top")?o:i:t.includes("bottom")||t.includes("top")?a:o}(s||u,x,t.plane),N=function(t,e,n,r,i){var a=n.x,o=n.y,s=n.width,u=n.height;if("bottom"===t)return{startPos:[a,o],endPos:[a+s,o]};if("left"===t)return{startPos:[a+s,o+u],endPos:[a+s,o]};if("right"===t)return{startPos:[a,o+u],endPos:[a,o]};if("top"===t)return{startPos:[a,o+u],endPos:[a+s,o+u]};if("center"===t){if("vertical"===e)return{startPos:[a,o],endPos:[a,o+u]};if("horizontal"===e)return{startPos:[a,o],endPos:[a+s,o]};if("number"==typeof e){var c=g(r.getCenter(),2),l=c[0],f=c[1],d=g(pD(r),2),h=d[0],p=d[1],v=g(vD(r),2),y=v[0],m=v[1],b=Math.min(s,u)/2,x=r.getOptions(),w=h*b,k=p*b,E=l+a-x.insetLeft,O=f+o-x.insetTop,S=[Math.cos(e),Math.sin(e)],M=S[0],T=S[1],A=[E+k*M,O+k*T],P=[E+w*M,O+w*T],N=uD(r)&&i?i.getOptions().domain.length:3;return{startPos:A,endPos:P,gridClosed:Math.abs(m-y-360)<1e-6,gridCenter:[E,O],gridControlAngles:new Array(N).fill(0).map((function(t,e,n){return(m-y)/N*e}))}}}return{}}(u,o,k,x,M),C=function(t){return t.getOptions().depth?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}(x),_=MZ(E,S,h,a,p,v,u,x),L=m?_.map((function(t,e){var n=m.get(e);return n?n[0]!==t.label?t:Object.assign(Object.assign({},t),{bbox:n[1]}):t})):_,R=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},A),{type:"linear",data:L,crossSize:c,titleText:vZ(d),labelOverlap:TZ(y,A),grid:AZ(A.grid,x,E),gridLength:P,line:!0,indexBBox:m}),A.line?null:{lineOpacity:0}),N),C),i),j=R.labelOverlap.find((function(t){return"hide"===t.type}));return j&&(R.crossSize=!1),new tM({className:"axis",style:kZ(R)})}})),CZ=PZ((function(t){t.order,t.size;var e=t.position,n=(t.orientation,t.labelFormatter),r=t.tickFilter,i=t.tickCount,a=t.tickMethod,o=t.important,s=void 0===o?{}:o,u=(t.style,t.indexBBox),c=t.title,l=t.grid,f=void 0!==l&&l,d=EZ(t,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","important","style","indexBBox","title","grid"]);return function(t){var o=g(t.scales,1)[0],l=t.value,h=t.coordinate,p=t.theme,v=l.bbox,y=o.getOptions(),m=MZ(o,y.domain,i,n,r,a,e,h),b=u?m.map((function(t,e){var n=u.get(e);return n?n[0]!==t.label?t:Object.assign(Object.assign({},t),{bbox:n[1]}):t})):m,x=g(pD(h),2),w=x[0],k=x[1],E=function(t,e,n,r,i){var a=e.x,o=e.y,s=e.width,u=e.height,c=[a+s/2,o+u/2],l=Math.min(s,u)/2,f=g(vD(i),2),d=f[0],h=f[1],p=g(SZ(i),2),v=p[0],y=p[1],m={center:c,radius:l,startAngle:d,endAngle:h,gridLength:(r-n)*(Math.min(v,y)/2)};if("inner"===t){var b=i.getOptions(),x=b.insetLeft,w=b.insetTop;return Object.assign(Object.assign({},m),{center:[c[0]-x,c[1]-w],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},m),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}(e,v,w,k,h),O=p.axis,S=p.axisArc,M=kZ(vd({},O,void 0===S?{}:S,E,Object.assign(Object.assign({type:"arc",data:b,titleText:vZ(c),grid:f},d),s)));return new tM({style:Lw(M,["transform"])})}}));NZ.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]},CZ.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var _Z=function(t){return function(){var e=NZ(Object.assign({},{crossPadding:50},t)).apply(void 0,arguments);return OZ(e,t),e}};_Z.props=Object.assign(Object.assign({},NZ.props),{defaultPosition:"bottom"});var LZ=function(t){return function(){var e=NZ(Object.assign({},{crossPadding:10},t)).apply(void 0,arguments);return OZ(e,t),e}};function RZ(t){if(dl(t))return t[t.length-1]}LZ.props=Object.assign(Object.assign({},NZ.props),{defaultPosition:"left"});function jZ(t,e){var n=e.scales,r=e.library,i=function(t,e){var n,r=bZ(t,"shape"),i=bZ(t,"color"),a=r?r.clone():null,o=[],s=nr(e);try{var u=function(){var t=g(n.value,2),e=t[0],r=t[1],s=e.type,u=((null==i?void 0:i.getOptions().domain.length)>0?null==i?void 0:i.getOptions().domain:r.data).map((function(t,n){var i;return a?a.map(t||"point"):(null===(i=null==e?void 0:e.style)||void 0===i?void 0:i.shape)||r.defaultShape||"point"}));"string"==typeof s&&o.push([s,u])};for(s.s();!(n=s.n()).done;)u()}catch(t){s.e(t)}finally{s.f()}if(0===o.length)return["point",["point"]];if(1===o.length)return o[0];if(!r)return o[0];var c=r.getOptions().range;return o.map((function(t){for(var e=g(t,2),n=e[0],r=e[1],i=0,a=0;a<o.length;a++){var s=c[a%c.length];r[a]===s&&i++}return[i/r.length,[n,r]]})).sort((function(t,e){return e[0]-t[0]}))[0][1]}(n,e.markState),a=g(i,2),o=a[0],s=a[1],u=t.itemMarker,c=t.itemMarkerSize,l=function(t,e){var n,i,a,s=(null===(a=null===(i=null===(n=r["mark.".concat(o)])||void 0===n?void 0:n.props)||void 0===i?void 0:i.shape[t])||void 0===a?void 0:a.props.defaultMarker)||RZ(t.split(".")),u="function"==typeof c?c(e):c;return function(){return function(t,e){var n=e.fill,r=e.lineWidth,i=e.stroke,a=e.color,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["d","fill","lineWidth","path","stroke","color"]),s=zU.get(t)||zU.get("point");return function(){return new mW({style:Object.assign(Object.assign({},o),{d:s.apply(void 0,arguments),stroke:s.style.includes("stroke")?a||i:"",fill:s.style.includes("fill")?a||n:"",lineWidth:s.style.includes("lineWidth")?r||r||2:0})})}}(s,{color:e.color})(0,0,u)}},f=function(t){return"".concat(s[t])};return bZ(n,"shape")&&!u?function(t,e){return l(f(e),t)}:"function"==typeof u?function(t,e){var n=u(t.id,e);return"string"==typeof n?l(n,t):n}:function(t,e){return l(u||f(e),t)}}function DZ(t){var e=bZ(t,"opacity");if(e){var n=e.getOptions().range;return function(t,e){return n[e]}}}var IZ=function(t){t.labelFormatter;var e=t.layout,n=(t.order,t.orientation,t.position),r=(t.size,t.title),i=t.cols,a=(t.itemMarker,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker"])),o=a.gridRow;return function(s){var u=s.value,c=s.theme,l=u.bbox,f=function(t,e,n){if("center"===e.position){var r=t.bbox;return{width:r.width,height:r.height}}var i=wZ(t,e,n);return{width:i.width,height:i.height}}(u,t,IZ),d=f.width,h=f.height,p=gZ(n,e),v=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(n)?"vertical":"horizontal",width:d,height:h,layout:void 0!==i?"grid":"flex"},void 0!==i&&{gridCol:i}),void 0!==o&&{gridRow:o}),{titleText:vZ(r)}),function(t,e){var n=t.labelFormatter,r=void 0===n?function(t){return"".concat(t)}:n,i=e.scales,a=function(t,e){var n=bZ(t,"size");return n instanceof MK?2*n.map(NaN):e}(i,e.theme.legendCategory.itemMarkerSize),o={itemMarker:jZ(Object.assign(Object.assign({},t),{itemMarkerSize:a}),e),itemMarkerSize:a,itemMarkerOpacity:DZ(i)},s="string"==typeof r?sZ(r):r,u=bZ(i,"color"),c=function(t){return t.find((function(t){return t.getOptions().domain.length>0})).getOptions().domain}(i),l=u?function(t){return u.map(t)}:function(){return e.theme.color};return Object.assign(Object.assign({},o),{data:c.map((function(t){return{id:t,label:s(t),color:l(t)}}))})}(t,s)),g=c.legendCategory,y=void 0===g?{}:g,m=kZ(Object.assign({},y,function(t){return Object.assign(Object.assign({},t),{data:(null==t?void 0:t.data.filter((function(t){return""!==t.id})))||[]})}(v),a)),b=new mZ({style:Object.assign(Object.assign({x:l.x,y:l.y,width:l.width,height:l.height},p),{subOptions:m})});return b.appendChild(new RO({className:"legend-category",style:m})),b}};function FZ(t,e){var n=je(function(t,e){for(var n=1;n<t.length;n+=1){var r=t[n-1],i=t[n];if(e>=r&&e<=i)return[r,i]}return[e,e]}(t,e),2),r=n[0],i=n[1];return{tick:e>(r+i)/2?i:r,range:[r,i]}}IZ.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var zZ=WE({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function BZ(t){var e=t.orientation,n=t.size,r=t.length;return hO(e,[r,n],[n,r])}function GZ(t){var e=t.type,n=je(BZ(t),2),r=n[0],i=n[1];return"size"===e?[["M",0,i],["L",0+r,0],["L",0+r,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+r,0],["L",0+r,i],["Z"]]}function WZ(t){return GZ(t)}function VZ(t){var e=t.orientation,n=t.range;if(!n)return[];var r=je(BZ(t),2),i=r[0],a=r[1],o=je(n,2),s=o[0],u=o[1],c=hO(e,s*i,0),l=hO(e,0,s*a),f=hO(e,u*i,i),d=hO(e,a,u*a);return[["M",c,l],["L",c,d],["L",f,d],["L",f,l],["Z"]]}var HZ=function(t){function e(e){return t.call(this,e,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return Ne(e,t),e.prototype.render=function(t,e){!function(t,e){var n=jE(e,"track");t.maybeAppendByClassName(zZ.track,"path").styles(Ce({d:GZ(e)},n))}(BE(e).maybeAppendByClassName(zZ.trackGroup,"g"),t),function(t,e){var n=jE(e,"selection"),r=function(t){var e,n=t.orientation,r=t.color,i=t.block,a=t.partition;e=_n(r)?new Array(20).fill(0).map((function(t,e,n){return r(e/(n.length-1))})):r;var o=e.length,s=e.map((function(t){return da(t).toString()}));return o?1===o?s[0]:i?function(t,e,n){var r=Array.from(e),i=t.length;return new Array(i).fill(0).reduce((function(e,n,a){var o=r[a%r.length];return e+" ".concat(t[a],":").concat(o).concat(a<i-1?" ".concat(t[a+1],":").concat(o):"")}),"l(".concat("horizontal"===n?"0":"270",")"))}(a,s,n):s.reduce((function(t,e,n){return t+" ".concat(n/(o-1),":").concat(e)}),"l(".concat(hO(n,"0","270"),")")):""}(e),i=t.maybeAppendByClassName(zZ.selection,"path").styles(Ce({d:WZ(e),fill:r},n)),a=i.maybeAppendByClassName(zZ.clipPath,"path").styles({d:VZ(e)}).node();i.style("clipPath",a)}(BE(e).maybeAppendByClassName(zZ.selectionGroup,"g"),t)},e}(CE),YZ=function(t){function e(e){var n=t.call(this,e,_O)||this;return n.eventToOffsetScale=new TM({}),n.innerRibbonScale=new TM({}),n.cacheLabelBBox=null,n.cacheHandleBBox=null,n.onHovering=function(t){var e=n.attributes,r=e.data,i=e.block;t.stopPropagation();var a=n.getValueByCanvasPoint(t);if(i){var o=FZ(r.map((function(t){return t.value})),a).range,s=n.getRealSelection(o);n.showIndicator((o[0]+o[1])/2,"".concat(s[0],"-").concat(s[1])),n.dispatchIndicated(a,o)}else{var u=n.getTickValue(a);n.showIndicator(u,"".concat(n.getRealValue(u))),n.dispatchIndicated(u)}},n.onDragStart=function(t){return function(e){e.stopPropagation(),n.attributes.slidable&&(n.target=t,n.prevValue=n.getTickValue(n.getValueByCanvasPoint(e)),document.addEventListener("mousemove",n.onDragging),document.addEventListener("touchmove",n.onDragging),document.addEventListener("mouseleave",n.onDragEnd),document.addEventListener("mouseup",n.onDragEnd),document.addEventListener("mouseup",n.onDragEnd),document.addEventListener("touchend",n.onDragEnd))}},n.onDragging=function(t){var e=n.target;n.updateMouse();var r=je(n.selection,2),i=r[0],a=r[1],o=n.getTickValue(n.getValueByCanvasPoint(t)),s=o-n.prevValue;"start"===e?i!==o&&n.updateSelection(o,a):"end"===e?a!==o&&n.updateSelection(i,o):"ribbon"===e&&0!==s&&(n.prevValue=o,n.updateSelection(s,s,!0))},n.onDragEnd=function(){n.style.cursor="pointer",document.removeEventListener("mousemove",n.onDragging),document.removeEventListener("touchmove",n.onDragging),document.removeEventListener("mouseup",n.onDragEnd),document.removeEventListener("touchend",n.onDragEnd)},n}return Ne(e,t),Object.defineProperty(e.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var t=this.attributes,e=t.width,n=t.height;return new GE(0,0,e,n)},e.prototype.render=function(t,e){var n=this,r=t.showLabel;this.renderTitle(BE(e));var i=this.availableSpace,a=i.x,o=i.y,s=BE(e).maybeAppendByClassName(LO.contentGroup,"g").styles({transform:"translate(".concat(a,", ").concat(o,")")});HE(!!r,s.maybeAppendByClassName(LO.labelGroup,"g").styles({zIndex:1}),(function(t){n.renderLabel(t)}));var u=s.maybeAppendByClassName(LO.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=s.maybeAppendByClassName(LO.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(u),this.renderIndicator(s),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(e.prototype,"range",{get:function(){var t=this.attributes,e=t.data,n=t.domain;return n?{min:n[0],max:n[1]}:function(t){return{min:Math.min.apply(Math,De([],je(t.map((function(t){return t.value}))),!1)),max:Math.max.apply(Math,De([],je(t.map((function(t){return t.value}))),!1))}}(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonScale",{get:function(){var t=this.range,e=t.min,n=t.max;return this.innerRibbonScale.update({domain:[e,n],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonRange",{get:function(){var t=je(this.selection,2),e=t[0],n=t[1],r=this.ribbonScale;return[r.map(e),r.map(n)]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){var t=this.range,e=t.min,n=t.max,r=this.attributes.defaultValue,i=je(void 0===r?[e,n]:r,2);return[i[0],i[1]]},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(t,e){return hO(this.attributes.orientation,"function"==typeof t?t():t,"function"==typeof e?e():e)},e.prototype.renderTitle=function(t){var e=this.attributes,n=e.showTitle,r=e.titleText,i=e.width,a=e.height,o=jE(this.attributes,"title"),s=Ce(Ce({},o),{width:i,height:a,text:r}),u=this;t.selectAll(LO.title.class).data(n?[r]:[]).join((function(t){return t.append((function(){return new XE({style:s})})).attr("className",LO.title.name).each((function(){u.title=this}))}),(function(t){return t.update(s)}),(function(t){return t.each((function(){u.title=void 0})).remove()}))},Object.defineProperty(e.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var t=this.attributes,e=t.width,n=t.height;return new GE(0,0,e,n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelFixedSpacing",{get:function(){return this.attributes.showTick?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelPosition",{get:function(){var t=this.attributes,e=t.orientation,n=t.labelDirection;return{vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}}[e][n]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelBBox",{get:function(){var t;if(!this.attributes.showLabel)return new GE(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var e=(null===(t=this.label.querySelector(qO.labelGroup.class))||void 0===t?void 0:t.children.slice(-1)[0]).getBBox(),n=e.width,r=e.height;return this.cacheLabelBBox=new GE(0,0,n,r),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelShape",{get:function(){var t=this.attributes,e=t.showLabel,n=t.labelSpacing,r=void 0===n?0:n;if(!e)return{width:0,height:0,size:0,length:0};var i=this.labelBBox,a=i.width,o=i.height;return{width:a,height:o,size:this.ifHorizontal(o,a)+r+this.labelFixedSpacing,length:this.ifHorizontal(a,o)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonBBox",{get:function(){var t,e=this.attributes,n=e.showHandle,r=e.ribbonSize,i=this.availableSpace,a=i.width,o=i.height,s=this.labelShape,u=s.size,c=s.length,l=je(this.ifHorizontal([o,a],[a,o]),2),f=l[0],d=l[1],h=n?this.handleShape:{size:0,length:0},p=h.size,v=h.length,g=this.handleOffsetRatio,y=this.labelPosition;t=r||(["bottom","right"].includes(y)?Math.min(f-u,(f-p)/g):f*(1-g)>p?Math.max(f-u,0):Math.max((f-u-p)/g,0));var m=Math.max(v,c),b=d-m,x=je(this.ifHorizontal([b,t],[t,b]),2),w=x[0],k=x[1],E=["top","left"].includes(y)?u:0,O=je(this.ifHorizontal([m/2,E],[E,m/2]),2),S=O[0],M=O[1];return new GE(S,M,w,k)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonShape",{get:function(){var t=this.ribbonBBox,e=t.width,n=t.height;return this.ifHorizontal({size:n,length:e},{size:e,length:n})},enumerable:!1,configurable:!0}),e.prototype.renderRibbon=function(t){var e=this.attributes,n=e.data,r=e.type,i=e.orientation,a=e.color,o=e.block,s=jE(this.attributes,"ribbon"),u=this.range,c=u.min,l=u.max,f=this.ribbonBBox,d=f.x,h=f.y,p=this.ribbonShape,v=p.length,g=p.size,y=TE({transform:"translate(".concat(d,", ").concat(h,")"),length:v,size:g,type:r,orientation:i,color:a,block:o,partition:n.map((function(t){return(t.value-c)/(l-c)})),range:this.ribbonRange},s);this.ribbon=t.maybeAppendByClassName(LO.ribbon,(function(){return new HZ({style:y})})).update(y)},e.prototype.getHandleClassName=function(t){return"".concat(LO.prefix("".concat(t,"-handle")))},e.prototype.renderHandles=function(){var t=this.attributes,e=t.showHandle,n=t.orientation,r=jE(this.attributes,"handle"),i=je(this.selection,2),a=i[0],o=i[1],s=Ce(Ce({},r),{orientation:n}),u=r.shape,c="basic"===(void 0===u?"slider":u)?PO:iT,l=this;this.handlesGroup.selectAll(LO.handle.class).data(e?[{value:a,type:"start"},{value:o,type:"end"}]:[],(function(t){return t.type})).join((function(t){return t.append((function(){return new c({style:s})})).attr("className",(function(t){var e=t.type;return"".concat(LO.handle," ").concat(l.getHandleClassName(e))})).each((function(t){var e=t.type,n=t.value;this.update({labelText:n});var r="".concat(e,"Handle");l[r]=this,this.addEventListener("pointerdown",l.onDragStart(e))}))}),(function(t){return t.update(s).each((function(t){var e=t.value;this.update({labelText:e})}))}),(function(t){return t.each((function(t){var e=t.type,n="".concat(e,"Handle");l[n]=void 0})).remove()}))},e.prototype.adjustHandles=function(){var t=je(this.selection,2),e=t[0],n=t[1];this.setHandlePosition("start",e),this.setHandlePosition("end",n)},Object.defineProperty(e.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new GE(0,0,0,0);var t=this.startHandle.getBBox(),e=t.width,n=t.height,r=this.endHandle.getBBox(),i=r.width,a=r.height,o=je([Math.max(e,i),Math.max(n,a)],2),s=o[0],u=o[1];return this.cacheHandleBBox=new GE(0,0,s,u),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleShape",{get:function(){var t=this.handleBBox,e=t.width,n=t.height,r=je(this.ifHorizontal([n,e],[e,n]),2);return{width:e,height:n,size:r[0],length:r[1]}},enumerable:!1,configurable:!0}),e.prototype.setHandlePosition=function(t,e){var n=this.attributes.handleFormatter,r=this.ribbonBBox,i=r.x,a=r.y,o=this.ribbonShape.size,s=this.getOffset(e),u=je(this.ifHorizontal([i+s,a+o*this.handleOffsetRatio],[i+o*this.handleOffsetRatio,a+s]),2),c=u[0],l=u[1],f=this.handlesGroup.select(".".concat(this.getHandleClassName(t))).node();null==f||f.update({transform:"translate(".concat(c,", ").concat(l,")"),formatter:n})},e.prototype.renderIndicator=function(t){var e=jE(this.attributes,"indicator");this.indicator=t.maybeAppendByClassName(LO.indicator,(function(){return new uT({})})).update(e)},Object.defineProperty(e.prototype,"labelData",{get:function(){var t=this;return this.attributes.data.reduce((function(e,n,r,i){var a,o,s=null!==(a=null==n?void 0:n.id)&&void 0!==a?a:r.toString();if(e.push(Ce(Ce({},n),{id:s,index:r,type:"value",label:null!==(o=null==n?void 0:n.label)&&void 0!==o?o:n.value.toString(),value:t.ribbonScale.map(n.value)})),r<i.length-1){var u=i[r+1],c=je([n.value,u.value],2),l=c[0],f=c[1],d=(l+f)/2;e.push(Ce(Ce({},n),{id:s,index:r,type:"range",range:[l,f],label:[l,f].join("~"),value:t.ribbonScale.map(d)}))}return e}),[])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelStyle",{get:function(){var t=je(["center","middle"],2),e=t[0],n=t[1],r=this.labelPosition;return"top"===r?n="bottom":"bottom"===r?n="top":"left"===r?e="end":"right"===r&&(e="start"),{labelTextAlign:e,labelTextBaseline:n}},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(t){var e=this.attributes,n=e.showTick,r=void 0!==n&&n,i=e.labelFilter,a=e.labelFormatter,o=jE(this.attributes,"tick"),s=jE(this.attributes,"label"),u=s.align,c=TE(Ce({showLine:!1,showGrid:!1,showTick:r,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),DE(o,"tick"),DE(s,"label"),{data:this.labelData}),l={tickFilter:function(t,e,n){return"value"===(null==t?void 0:t.type)&&(!i||i(t,t.index,n.filter((function(t){return"value"!==t.type}))))},labelFilter:function(t,e,n){return(null==t?void 0:t.type)===u&&(!i||i(t,t.index,n.filter((function(t){return t.type===u}))))},labelFormatter:a},f=Ce(Ce(Ce({},c),l),{labelOverlap:[{type:"hide"}]});this.label=t.maybeAppendByClassName(LO.label,(function(){return new tM({style:f})})).node(),this.label.update(f,!1)},Object.defineProperty(e.prototype,"labelAxisStyle",{get:function(){var t=this.attributes,e=t.showTick,n=t.labelDirection,r=t.labelSpacing,i=t.tickLength,a=this.ribbonShape.size,o=this.labelPosition,s=this.labelFixedSpacing,u=je([0,0,0],3),c=u[0],l=u[1],f=u[2],d=null!=i?i:a;return e?(f=d,l=s,"positive"===n?"right"===o?(c=d,f=d):"bottom"===o&&(c=f):"negative"===n&&("top"===o||"left"===o)&&(c=a)):"positive"===n?"right"===o?l=d:"bottom"===o&&(c=a+s,l=r):"negative"===n&&("left"===o||"top"===o)&&(l=r),{offset:c,spacing:l,tickLength:f}},enumerable:!1,configurable:!0}),e.prototype.adjustLabel=function(){if(this.attributes.showLabel){var t=this.ribbonBBox,e=t.x,n=t.y,r=t.width,i=t.height,a=this.labelAxisStyle,o=a.offset,s=a.spacing,u=a.tickLength,c=je(this.ifHorizontal([[e,n+o],[e+r,n+o]],[[e+o,n+i],[e+o,n]]),2),l=c[0],f=c[1];this.label.update({startPos:l,endPos:f,tickLength:u,labelSpacing:s},!1)}},e.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},e.prototype.showIndicator=function(t,e){if(void 0===e&&(e="".concat(t)),this.attributes.showIndicator&&"number"==typeof t){var n=this.range,r=n.min,i=n.max,a=this.ribbonBBox,o=a.x,s=a.y,u=Ae(t,r,i),c=this.getOffset(u),l=this.ifHorizontal([c+o,s],[o,c+s]);this.indicator.update({x:l[0],y:l[1],position:this.ifHorizontal("top","left"),labelText:e}),EE(this.indicator.node())}else this.hideIndicator()},e.prototype.hideIndicator=function(){OE(this.indicator.node())},e.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},e.prototype.setSelection=function(t,e){this.updateSelection(t,e)},e.prototype.updateSelection=function(t,e,n){var r;void 0===n&&(n=!1);var i=je(this.selection,2),a=i[0],o=i[1],s=je([t,e],2),u=s[0],c=s[1];n&&(u+=a,c+=o);var l=this.range;r=je(function(t,e,n,r){var i;void 0===r&&(r=4);var a=je(t,2),o=a[0],s=a[1],u=je(e,2),c=u[0],l=u[1],f=je(n,2),d=f[0],h=f[1],p=je([c,l],2),v=p[0],g=p[1],y=g-v;return v>g&&(v=(i=je([g,v],2))[0],g=i[1]),y>s-o?[o,s]:v<o?d===o&&h===g?[o,g]:[o,y+o]:g>s?h===s&&d===v?[v,s]:[s-y,s]:[v,g]}([l.min,l.max],[u,c],this.selection),2),u=r[0],c=r[1],this.update({defaultValue:[u,c]}),this.dispatchSelection()},Object.defineProperty(e.prototype,"step",{get:function(){var t=this.attributes.step,e=void 0===t?1:t,n=this.range,r=n.min,i=n.max;return An(e)?nM(.01*(i-r),0):e},enumerable:!1,configurable:!0}),e.prototype.getTickValue=function(t){var e=this.attributes,n=e.data,r=e.block,i=this.range.min;return r?FZ(n.map((function(t){return t.value})),t).tick:function(t,e,n){return n+Math.round((t-n)/e)*e}(t,this.step,i)},e.prototype.getValueByCanvasPoint=function(t){var e=this.range,n=e.min,r=e.max,i=je(this.ribbon.node().getPosition(),2),a=i[0],o=i[1],s=this.ifHorizontal(a,o),u=this.ifHorizontal.apply(this,De([],je(eM(t)),!1))-s;return Ae(this.getOffset(u,!0),n,r)},e.prototype.getOffset=function(t,e){void 0===e&&(e=!1);var n=this.range,r=n.min,i=n.max,a=this.ribbonShape.length,o=this.eventToOffsetScale;return o.update({domain:[r,i],range:[0,a]}),e?o.invert(t):o.map(t)},e.prototype.getRealSelection=function(t){var e=this.range.max,n=je(t,2),r=n[0],i=n[1];return this.ifHorizontal([r,i],[e-i,e-r])},e.prototype.getRealValue=function(t){var e=this.range.max;return this.ifHorizontal(t,e-t)},e.prototype.dispatchSelection=function(){var t=this.getRealSelection(this.selection),e=new js("valuechange",{detail:{value:t}});this.dispatchEvent(e)},e.prototype.dispatchIndicated=function(t,e){var n=this,r=this.range.max,i=this.ifHorizontal((function(){return{value:t,range:e}}),(function(){return{value:r-t,range:e?n.getRealSelection(e):void 0}})),a=new js("indicate",{detail:i});this.dispatchEvent(a)},e}(CE);function UZ(t){var e=t.getOptions().domain,n=[e[0],TH(e)];return[n[0],n[1]]}function qZ(t,e,n,r,i,a){var o=bZ(t,"color"),s=function(t,e,n){var r=e.size,i=wZ(t,e,n);return function(t,e,n){return t.size=e,function(t){return"horizontal"===t||0===t}(n)?t.height=e:t.width=e,t}(i,r,i.orientation)}(n,r,i);if(o instanceof _$){var u=o.getOptions().range,c=g(UZ(o),2),l=c[0],f=c[1];return o instanceof I$||o instanceof j$?function(t,e,n,r,i){var a=e.thresholds,o=function(t){return function(e){return{value:e/t,label:String(e)}}}(r);return Object.assign(Object.assign({},t),{color:i,data:[n].concat(M(a),[r]).map(o)})}(s,o,l,f,u):function(t,e,n){var r=e.thresholds,i=[-1/0].concat(M(r),[1/0]).map((function(t,e){return{value:e,label:t}}));return Object.assign(Object.assign({},t),{data:i,color:n,labelFilter:function(t,e){return e>0&&e<i.length-1}})}(s,o,u)}return function(t,e,n,r,i,a){var o=t.length,s=n||r,u=i.color?a.legendContinuous.ribbonFill||"black":a.color,c=e||function(t,e){var n=t.getOptions(),r=t.clone();return r.update(Object.assign(Object.assign({},n),{range:[BF(e).toString()]})),r}(s,u),l=g(UZ(c),2),f=l[0],d=l[1],h=UZ([e,n,r].filter((function(t){return void 0!==t})).find((function(t){return!(t instanceof UV)}))),p=g(h,2),v=p[0],y=p[1];return Object.assign(Object.assign({},t),{domain:[v,y],data:c.getTicks().map((function(t){return{value:t}})),color:new Array(Math.floor(o)).fill(0).map((function(t,e){var n=(d-f)/(o-1)*e+f,i=c.map(n)||u,a=r?r.map(n):1;return i.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(function(t,e,n,r){return"rgba(".concat(e,", ").concat(n,", ").concat(r,", ").concat(a,")")}))}))})}(s,o,bZ(t,"size"),bZ(t,"opacity"),e,a)}var XZ=function(t){var e=t.labelFormatter,n=t.layout,r=(t.order,t.orientation,t.position),i=(t.size,t.title),a=t.style,o=(t.crossPadding,t.padding,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]));return function(s){var u=s.scales,c=s.value,l=s.theme,f=s.scale,d=c.bbox,h=d.x,p=d.y,v=d.width,g=d.height,y=gZ(r,n),m=l.legendContinuous,b=void 0===m?{}:m,x=kZ(Object.assign({},b,Object.assign(Object.assign({titleText:vZ(i),labelAlign:"value",labelFormatter:"string"==typeof e?function(t){return sZ(e)(t.label)}:e},qZ(u,f,c,t,XZ,l)),a),o)),w=new yZ({style:Object.assign(Object.assign({x:h,y:p,width:v,height:g},y),{subOptions:x})});return w.appendChild(new YZ({className:"legend-continuous",style:x})),w}};XZ.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};var KZ=function(t){return function(){return new fW}};KZ.props={};function $Z(t,e,n,r){switch(r){case"center":return{x:t+n/2,y:e,textAlign:"middle"};case"right":return{x:t+n,y:e,textAlign:"right"};default:return{x:t,y:e,textAlign:"left"}}}var ZZ,QZ=(ZZ={render:function(t,e){var n=t.width,r=t.title,i=t.subtitle,a=t.spacing,o=void 0===a?2:a,s=t.align,u=void 0===s?"left":s,c=t.x,l=t.y,f=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["width","title","subtitle","spacing","align","x","y"]);e.style.transform="translate(".concat(c,", ").concat(l,")");var d=iH(f,"title"),h=iH(f,"subtitle"),p=pZ(e,".title","text").attr("className","title").call(NH,Object.assign(Object.assign(Object.assign({},$Z(0,0,n,u)),{fontSize:14,textBaseline:"top",text:r}),d)).node().getLocalBounds();pZ(e,".sub-title","text").attr("className","sub-title").call((function(t){if(!i)return t.node().remove();t.node().attr(Object.assign(Object.assign(Object.assign({},$Z(0,p.max[1]+o,n,u)),{fontSize:12,textBaseline:"top",text:i}),h))}))}},function(t){function e(t){var n;return k(this,e),(n=N(this,e,[t])).descriptor=ZZ,n}return _(e,t),O(e,[{key:"connectedCallback",value:function(){var t,e;null===(e=(t=this.descriptor).render)||void 0===e||e.call(t,this.attributes,this)}},{key:"update",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.attr(vd({},this.attributes,n)),null===(e=(t=this.descriptor).render)||void 0===e||e.call(t,this.attributes,this)}}])}(cW)),JZ=function(t){return function(e){var n=e.value,r=e.theme,i=n.bbox,a=i.x,o=i.y,s=i.width,u=i.height;return new QZ({style:vd({},r.title,Object.assign({x:a,y:o,width:s,height:u},t))})}};function tQ(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function eQ(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function nQ(t){var e,n,r;function i(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<a){if(0!==e(r,r))return a;do{var o=i+a>>>1;n(t[o],r)<0?i=o+1:a=o}while(i<a)}return i}return 2!==t.length?(e=tQ,n=function(e,n){return tQ(t(e),n)},r=function(e,n){return t(e)-n}):(e=t===tQ||t===eQ?t:rQ,n=t,r=t),{left:i,center:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=i(t,e,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length)-1);return a>n&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<a){if(0!==e(r,r))return a;do{var o=i+a>>>1;n(t[o],r)<=0?i=o+1:a=o}while(i<a)}return i}}}function rQ(){return 0}JZ.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};var iQ=Jn().mark(oQ);function aQ(t){return null===t?NaN:+t}function oQ(t,e){var n,r,i,a,o,s,u;return Jn().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(void 0!==e){c.next=21;break}n=nr(t),c.prev=2,n.s();case 4:if((r=n.n()).done){c.next=11;break}if(!(null!=(i=r.value)&&(i=+i)>=i)){c.next=9;break}return c.next=9,i;case 9:c.next=4;break;case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),n.e(c.t0);case 16:return c.prev=16,n.f(),c.finish(16);case 19:c.next=40;break;case 21:a=-1,o=nr(t),c.prev=23,o.s();case 25:if((s=o.n()).done){c.next=32;break}if(u=s.value,!(null!=(u=e(u,++a,t))&&(u=+u)>=u)){c.next=30;break}return c.next=30,u;case 30:c.next=25;break;case 32:c.next=37;break;case 34:c.prev=34,c.t1=c.catch(23),o.e(c.t1);case 37:return c.prev=37,o.f(),c.finish(37);case 40:case"end":return c.stop()}}),iQ,null,[[2,13,16,19],[23,34,37,40]])}var sQ=nQ(tQ),uQ=sQ.right,cQ=sQ.left,lQ=nQ(aQ).center;const fQ=uQ;function dQ(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);var i,a,o=g(n,1)[0];if(o&&2!==o.length||n.length>1){var s=Uint32Array.from(t,(function(t,e){return e}));return n.length>1?(n=n.map((function(e){return t.map(e)})),s.sort((function(t,e){var r,i=nr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=pQ(a[t],a[e]);if(o)return o}}catch(t){i.e(t)}finally{i.f()}}))):(o=t.map(o),s.sort((function(t,e){return pQ(o[t],o[e])}))),i=t,a=s,Array.from(a,(function(t){return i[t]}))}return t.sort(hQ(o))}function hQ(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tQ;if(t===tQ)return pQ;if("function"!=typeof t)throw new TypeError("compare is not a function");return function(e,n){var r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}function pQ(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function vQ(t){return!!t.getBandWidth}function gQ(t,e,n){if(!vQ(t))return t.invert(e);var r=t.adjustedRange,i=t.getOptions().domain,a=n?-1:0,o=t.getStep(),s=n?r:r.map((function(t){return t+o})),u=function(t,e,n){return Math.min(n,Math.max(0,t))}(cQ(s,e)+a,0,i.length-1);return i[u]}function yQ(t,e,n){if(!e)return t.getOptions().domain;if(!vQ(t)){var r=dQ(e);if(!n)return r;var i=g(r,1)[0],a=g(t.getOptions().range,2),o=a[0]>a[1]?-1:1;return[i,t.invert(t.map(i)+o*n)]}var s=t.getOptions().domain,u=e[0],c=s.indexOf(u);if(n){var l=c+Math.round(s.length*n);return s.slice(c,l)}var f=e[e.length-1],d=s.indexOf(f);return s.slice(c,d+1)}function mQ(t,e,n,r,i,a){var o=i.x,s=i.y,u=function(t,e){var n=g(a.invert(t),2),r=n[0],i=n[1];return[gQ(o,r,e),gQ(s,i,e)]},c=u([t,e],!0),l=u([n,r],!1);return[yQ(o,[c[0],l[0]]),yQ(s,[c[1],l[1]])]}function bQ(t,e){var n=g(t,2),r=n[0],i=n[1];return[e.map(r),e.map(i)+function(t){return t.getStep?t.getStep():0}(e)]}var xQ=function(t){var e=t.orientation,n=t.labelFormatter,r=(t.size,t.style),i=void 0===r?{}:r,a=t.position,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["orientation","labelFormatter","size","style","position"]);return function(r){var s,u=g(r.scales,1)[0],c=r.value,l=r.theme,f=r.coordinate,d=c.bbox,h=d.width,p=d.height,v=l.slider,y=void 0===v?{}:v,m=(null===(s=u.getFormatter)||void 0===s?void 0:s.call(u))||function(t){return t+""},b="string"==typeof n?sZ(n):n,x="horizontal"===e,w=sD(f)&&x,k=i.trackSize,E=void 0===k?y.trackSize:k,O=function(t,e,n){var r=t.x,i=t.y,a=t.width,o=t.height;return"left"===e?[r+a-n,i]:"right"===e||"bottom"===e?[r,i]:"top"===e?[r,i+o-n]:void 0}(d,a,E),S=g(O,2),M=S[0],T=S[1];return new aT({className:"slider",style:Object.assign({},y,Object.assign(Object.assign({x:M,y:T,trackLength:x?h:p,orientation:e,formatter:function(t){return(b||m)(gQ(u,w?1-t:t,!0))},sparklineData:wQ(t,r)},i),o))})}};function wQ(t,e){var n=e.markState;return fn(t.sparklineData)?t.sparklineData:function(t,e){var n=Array.from(t.entries()).filter((function(t){var e=g(t,1)[0];return"line"===e.type||"area"===e.type})).filter((function(t){return g(t,1)[0].slider})).map((function(t){var n=g(t,1)[0],r=n.encode,i=n.slider;if(null==i?void 0:i.x)return Object.fromEntries(e.map((function(t){var e=r[t];return[t,e?e.value:void 0]})))})),r=g(n,1)[0];if(!(null==r?void 0:r.series))return null==r?void 0:r.y;var i=r.series.reduce((function(t,e,n){return t[e]=t[e]||[],t[e].push(r.y[n]),t}),{});return Object.values(i)}(n,["y","series"])}xQ.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var kQ=function(t){return xQ(Object.assign(Object.assign({},t),{orientation:"horizontal"}))};kQ.props=Object.assign(Object.assign({},xQ.props),{defaultPosition:"bottom"});var EQ=function(t){return xQ(Object.assign(Object.assign({},t),{orientation:"vertical"}))};EQ.props=Object.assign(Object.assign({},xQ.props),{defaultPosition:"left"});var OQ=function(t){function e(e){var n=t.call(this,e,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return n.range=[0,1],n.onValueChange=function(t){var e=n.attributes.value;if(t!==e){var r={detail:{oldValue:t,value:e}};n.dispatchEvent(new js("scroll",r)),n.dispatchEvent(new js("valuechange",r))}},n.onTrackClick=function(t){if(n.attributes.slidable){var e=je(n.getLocalPosition(),2),r=e[0],i=e[1],a=je(n.padding,4),o=a[0],s=a[3],u=n.getOrientVal([r+s,i+o]),c=(n.getOrientVal(eM(t))-u)/n.trackLength;n.setValue(c,!0)}},n.onThumbMouseenter=function(t){n.dispatchEvent(new js("thumbMouseenter",{detail:t.detail}))},n.onTrackMouseenter=function(t){n.dispatchEvent(new js("trackMouseenter",{detail:t.detail}))},n.onThumbMouseleave=function(t){n.dispatchEvent(new js("thumbMouseleave",{detail:t.detail}))},n.onTrackMouseleave=function(t){n.dispatchEvent(new js("trackMouseleave",{detail:t.detail}))},n}return Ne(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return VE(this.attributes.padding)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var t=this.attributes.value,e=je(this.range,2),n=e[0],r=e[1];return Ae(t,n,r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackLength",{get:function(){var t=this.attributes,e=t.viewportLength,n=t.trackLength;return void 0===n?e:n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes.trackSize,e=this.trackLength,n=je(this.padding,4),r=n[0],i=n[1],a=n[2],o=n[3],s=je(this.getOrientVal([[e,t],[t,e]]),2);return{x:o,y:r,width:+s[0]-(o+i),height:+s[1]-(r+a)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackRadius",{get:function(){var t=this.attributes,e=t.isRound,n=t.trackSize;return e?n/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbRadius",{get:function(){var t=this.attributes,e=t.isRound,n=t.thumbRadius;if(!e)return 0;var r=this.availableSpace,i=r.width,a=r.height;return n||this.getOrientVal([a,i])/2},enumerable:!1,configurable:!0}),e.prototype.getValues=function(t){void 0===t&&(t=this.value);var e=this.attributes,n=e.viewportLength/e.contentLength,r=je(this.range,2),i=r[0],a=t*(r[1]-i-n);return[a,a+n]},e.prototype.getValue=function(){return this.value},e.prototype.renderSlider=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.orientation,a=e.trackSize,o=e.padding,s=e.slidable,u=jE(this.attributes,"track"),c=jE(this.attributes,"thumb"),l=Ce(Ce({x:n,y:r,brushable:!1,orientation:i,padding:o,selectionRadius:this.thumbRadius,showHandle:!1,slidable:s,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:a,values:this.getValues()},DE(u,"track")),DE(c,"selection"));this.slider=BE(t).maybeAppendByClassName("scrollbar",(function(){return new aT({style:l})})).update(l).node()},e.prototype.render=function(t,e){this.renderSlider(e)},e.prototype.setValue=function(t,e){void 0===e&&(e=!1);var n=this.attributes.value,r=je(this.range,2),i=r[0],a=r[1];this.slider.setValues(this.getValues(Ae(t,i,a)),e),this.onValueChange(n)},e.prototype.bindEvents=function(){var t=this;this.slider.addEventListener("trackClick",(function(e){e.stopPropagation(),t.onTrackClick(e.detail)})),this.onHover()},e.prototype.getOrientVal=function(t){return"horizontal"===this.attributes.orientation?t[0]:t[1]},e.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},e.tag="scrollbar",e}(CE),SQ=function(t){var e=t.orientation,n=(t.labelFormatter,t.style),r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["orientation","labelFormatter","style"]);return function(t){var i=g(t.scales,1)[0],a=t.value,o=t.theme,s=a.bbox,u=s.x,c=s.y,l=s.width,f=s.height,d=o.scrollbar,h=void 0===d?{}:d,p=i.getOptions(),v=p.ratio,y=p.range,m="horizontal"===e?l:f,b=m/v,x=g(y,2),w=x[0],k=x[1]>w?0:1;return new OQ({className:"g2-scrollbar",style:Object.assign({},h,Object.assign(Object.assign(Object.assign(Object.assign({},n),{x:u,y:c,trackLength:m,value:k}),r),{orientation:e,contentLength:b,viewportLength:m}))})}};SQ.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var MQ=function(t){return SQ(Object.assign(Object.assign({},t),{orientation:"horizontal"}))};MQ.props=Object.assign(Object.assign({},SQ.props),{defaultPosition:"bottom"});var TQ=function(t){return SQ(Object.assign(Object.assign({},t),{orientation:"vertical"}))};TQ.props=Object.assign(Object.assign({},SQ.props),{defaultPosition:"left"});var AQ=function(t,e){var n=1e-4,r=e.coordinate;return function(e,i,a){var o=g(e,1)[0],s=o.style,u=s.transform,c=void 0===u?"":u,l=s.fillOpacity,f=void 0===l?1:l,d=s.strokeOpacity,h=void 0===d?1:d,p=s.opacity,v=void 0===p?1:p,y=g(sD(r)?["left bottom","scale(1, ".concat(n,")")]:["left top","scale(".concat(n,", 1)")],2),m=y[0],b=y[1],x=[{transform:"".concat(c," ").concat(b).trimStart(),transformOrigin:m,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:"".concat(c," ").concat(b).trimStart(),transformOrigin:m,fillOpacity:f,strokeOpacity:h,opacity:v,offset:.01},{transform:"".concat(c," scale(1, 1)").trimStart(),transformOrigin:m,fillOpacity:f,strokeOpacity:h,opacity:v}];return o.animate(x,Object.assign(Object.assign({},a),t))}},PQ=function(t,e){var n=1e-4,r=e.coordinate;return function(e,i,a){var o=g(e,1)[0],s=o.style,u=s.transform,c=void 0===u?"":u,l=s.fillOpacity,f=void 0===l?1:l,d=s.strokeOpacity,h=void 0===d?1:d,p=s.opacity,v=void 0===p?1:p,y=g(sD(r)?["left bottom","scale(1, ".concat(n,")")]:["left top","scale(".concat(n,", 1)")],2),m=y[0],b=y[1],x=[{transform:"".concat(c," scale(1, 1)").trimStart(),transformOrigin:m},{transform:"".concat(c," ").concat(b).trimStart(),transformOrigin:m,fillOpacity:f,strokeOpacity:h,opacity:v,offset:.99},{transform:"".concat(c," ").concat(b).trimStart(),transformOrigin:m,fillOpacity:0,strokeOpacity:0,opacity:0}];return o.animate(x,Object.assign(Object.assign({},a),t))}},NQ=function(t,e){var n=1e-4,r=e.coordinate;return TW({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:EI.NUMBER}),function(e,i,a){var o=g(e,1)[0];return uD(r)?function(e){var i=e.__data__,o=e.style,s=o.fillOpacity,u=void 0===s?1:s,c=o.strokeOpacity,l=void 0===c?1:c,f=o.opacity,d=void 0===f?1:f,h=i.points,p=i.y,v=i.y1,g=RH(r,h,[p,v]),y=g.innerRadius,m=g.outerRadius,b=[{scaleInYRadius:y+n,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:y+n,fillOpacity:u,strokeOpacity:l,opacity:d,offset:.01},{scaleInYRadius:m,fillOpacity:u,strokeOpacity:l,opacity:d}];return e.animate(b,Object.assign(Object.assign({},a),t))}(o):function(e){var i=e.style,o=i.transform,s=void 0===o?"":o,u=i.fillOpacity,c=void 0===u?1:u,l=i.strokeOpacity,f=void 0===l?1:l,d=i.opacity,h=void 0===d?1:d,p=g(sD(r)?["left top","scale(".concat(n,", 1)")]:["left bottom","scale(1, ".concat(n,")")],2),v=p[0],y=p[1],m=[{transform:"".concat(s," ").concat(y).trimStart(),transformOrigin:v,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:"".concat(s," ").concat(y).trimStart(),transformOrigin:v,fillOpacity:c,strokeOpacity:f,opacity:h,offset:.01},{transform:"".concat(s," scale(1, 1)").trimStart(),transformOrigin:v,fillOpacity:c,strokeOpacity:f,opacity:h}];return e.animate(m,Object.assign(Object.assign({},a),t))}(o)}},CQ=function(t,e){var n=1e-4,r=e.coordinate;return function(e,i,a){var o=g(e,1)[0],s=o.style,u=s.transform,c=void 0===u?"":u,l=s.fillOpacity,f=void 0===l?1:l,d=s.strokeOpacity,h=void 0===d?1:d,p=s.opacity,v=void 0===p?1:p,y=g(sD(r)?["left top","scale(".concat(n,", 1)")]:["left bottom","scale(1, ".concat(n,")")],2),m=y[0],b=y[1],x=[{transform:"".concat(c," scale(1, 1)").trimStart(),transformOrigin:m},{transform:"".concat(c," ").concat(b).trimStart(),transformOrigin:m,fillOpacity:f,strokeOpacity:h,opacity:v,offset:.99},{transform:"".concat(c," ").concat(b).trimStart(),transformOrigin:m,fillOpacity:0,strokeOpacity:0,opacity:0}];return o.animate(x,Object.assign(Object.assign({},a),t))}},_Q=function(t,e){var n=1e-4;TW({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:EI.NUMBER});var r=e.coordinate;return function(i,a,o){var s=g(i,1)[0];if(!uD(r))return AQ(t,e)(i,a,o);var u=s.__data__,c=s.style,l=c.radius,f=void 0===l?0:l,d=c.inset,h=void 0===d?0:d,p=c.fillOpacity,v=void 0===p?1:p,y=c.strokeOpacity,m=void 0===y?1:y,b=c.opacity,x=void 0===b?1:b,w=u.points,k=u.y,E=u.y1,O=oD().cornerRadius(f).padAngle(h*Math.PI/180),S=RH(r,w,[k,E]),M=S.startAngle,T=S.endAngle,A=[{waveInArcAngle:M+n,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:M+n,fillOpacity:v,strokeOpacity:m,opacity:x,offset:.01},{waveInArcAngle:T,fillOpacity:v,strokeOpacity:m,opacity:x}],P=s.animate(A,Object.assign(Object.assign({},o),t));return P.onframe=function(){s.style.d=O(Object.assign(Object.assign({},S),{endAngle:Number(s.style.waveInArcAngle)}))},P.onfinish=function(){s.style.d=O(Object.assign(Object.assign({},S),{endAngle:T}))},P}};_Q.props={};var LQ=function(t){return function(e,n,r){var i=g(e,1)[0],a=i.style,o=a.fillOpacity,s=void 0===o?1:o,u=a.strokeOpacity,c=void 0===u?1:u,l=a.opacity,f=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:s,strokeOpacity:c,opacity:void 0===l?1:l}];return i.animate(f,Object.assign(Object.assign({},r),t))}};LQ.props={};var RQ=function(t){return function(e,n,r){var i=g(e,1)[0],a=i.style,o=a.fillOpacity,s=void 0===o?1:o,u=a.strokeOpacity,c=void 0===u?1:u,l=a.opacity,f=[{fillOpacity:s,strokeOpacity:c,opacity:void 0===l?1:l},{fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(f,Object.assign(Object.assign({},r),t))}};RQ.props={};var jQ=function(t){var e=1e-4;return function(n,r,i){var a=g(n,1)[0],o=a.style,s=o.transform,u=void 0===s?"":s,c=o.fillOpacity,l=void 0===c?1:c,f=o.strokeOpacity,d=void 0===f?1:f,h=o.opacity,p=void 0===h?1:h,v="center center",y=[{transform:"".concat(u," scale(").concat(e,")").trimStart(),transformOrigin:v,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:"".concat(u," scale(").concat(e,")").trimStart(),transformOrigin:v,fillOpacity:l,strokeOpacity:d,opacity:p,offset:.01},{transform:"".concat(u," scale(1)").trimStart(),transformOrigin:v,fillOpacity:l,strokeOpacity:d,opacity:p}];return a.animate(y,Object.assign(Object.assign({},i),t))}},DQ=function(t){var e=1e-4;return function(n,r,i){var a=g(n,1)[0],o=a.style,s=o.transform,u=void 0===s?"":s,c=o.fillOpacity,l=void 0===c?1:c,f=o.strokeOpacity,d=void 0===f?1:f,h=o.opacity,p=void 0===h?1:h,v="center center",y=[{transform:"".concat(u," scale(1)").trimStart(),transformOrigin:v},{transform:"".concat(u," scale(").concat(e,")").trimStart(),transformOrigin:v,fillOpacity:l,strokeOpacity:d,opacity:p,offset:.99},{transform:"".concat(u," scale(").concat(e,")").trimStart(),transformOrigin:v,fillOpacity:0,strokeOpacity:0,opacity:0}];return a.animate(y,Object.assign(Object.assign({},i),t))}},IQ=function(t){return function(e,n,r){var i,a,o=g(e,1)[0],s=(null===(a=(i=o).getTotalLength)||void 0===a?void 0:a.call(i))||0,u=[{lineDash:[0,s]},{lineDash:[s,0]}];return o.animate(u,Object.assign(Object.assign({},r),t))}};IQ.props={};var FQ={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},zQ=b(b(b(b(b(b(b({},RD.CIRCLE,["cx","cy","r"]),RD.ELLIPSE,["cx","cy","rx","ry"]),RD.RECT,["x","y","width","height"]),RD.IMAGE,["x","y","width","height"]),RD.LINE,["x1","y1","x2","y2"]),RD.POLYLINE,["points"]),RD.POLYGON,["points"]);function BQ(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={},a=nr(e);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=t.style[o];s?i[o]=s:r&&(i[o]=FQ[o])}}catch(t){a.e(t)}finally{a.f()}return i}var GQ=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function WQ(t){var e=t.getLocalBounds(),n=e.min,r=e.max,i=g(n,2),a=i[0],o=i[1],s=g(r,2);return[a,o,s[0]-a,s[1]-o]}function VQ(t){var e=g(t,4),n=e[0],r=e[1],i=e[2],a=e[3];return"\n    M ".concat(n," ").concat(r,"\n    L ").concat(n+i," ").concat(r,"\n    L ").concat(n+i," ").concat(r+a,"\n    L ").concat(n," ").concat(r+a,"\n    Z\n  ")}function HQ(t,e){for(var n=g(WQ(t),4),r=n[0],i=n[1],a=n[2],o=n[3],s=o/a,u=Math.ceil(Math.sqrt(e/s)),c=[],l=o/Math.ceil(e/u),f=0,d=e;d>0;){for(var h=Math.min(d,u),p=a/h,v=0;v<h;v++){var y=r+v*p,m=i+f*l;c.push(VQ([y,m,p,l]))}d-=h,f+=1}return c}function YQ(t,e){t.__data__=e.__data__,t.className=e.className,t.markType=e.markType,e.parentNode.replaceChild(t,e)}function UQ(t,e){return t.indexOf(e)===t.lastIndexOf(e)}function qQ(t){var e=function(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getLocalTransform(),a=[];switch(t.nodeName){case RD.LINE:var o=t.parsedStyle,s=o.x1,u=void 0===s?0:s,c=o.y1,l=void 0===c?0:c,f=o.x2,d=void 0===f?0:f,h=o.y2;a=function(t,e,n,r){return[["M",t,e],["L",n,r]]}(u,l,d,void 0===h?0:h);break;case RD.CIRCLE:var p=t.parsedStyle,v=p.r,y=void 0===v?0:v,m=p.cx,b=void 0===m?0:m,x=p.cy;a=mz(y,y,b,void 0===x?0:x);break;case RD.ELLIPSE:var w=t.parsedStyle,k=w.rx,E=void 0===k?0:k,O=w.ry,S=void 0===O?0:O,T=w.cx,A=void 0===T?0:T,P=w.cy;a=mz(E,S,A,void 0===P?0:P);break;case RD.POLYLINE:case RD.POLYGON:e=t.parsedStyle.points.points,n=t.nodeName===RD.POLYGON,r=e.map((function(t,e){return[0===e?"M":"L",t[0],t[1]]})),n&&r.push(["Z"]),a=r;break;case RD.RECT:var N=t.parsedStyle,C=N.width,_=void 0===C?0:C,L=N.height,R=void 0===L?0:L,j=N.x,D=void 0===j?0:j,I=N.y,F=void 0===I?0:I,B=N.radius,G=B&&B.some((function(t){return 0!==t}));a=function(t,e,n,r,i){if(i){var a=g(i,4),o=a[0],s=a[1],u=a[2],c=a[3],l=t>0?1:-1,f=e>0?1:-1,d=l+f!==0?1:0;return[["M",l*o+n,r],["L",t-l*s+n,r],s?["A",s,s,0,0,d,t+n,f*s+r]:null,["L",t+n,e-f*u+r],u?["A",u,u,0,0,d,t+n-l*u,e+r]:null,["L",n+l*c,e+r],c?["A",c,c,0,0,d,n,e+r-f*c]:null,["L",n,f*o+r],o?["A",o,o,0,0,d,l*o+n,r]:null,["Z"]].filter((function(t){return t}))}return[["M",n,r],["L",n+t,r],["L",n+t,r+e],["L",n,r+e],["Z"]]}(_,R,D,F,G&&B.map((function(t){return Ae(t,0,Math.min(Math.abs(_)/2,Math.abs(R)/2))})));break;case RD.PATH:a=M(t.parsedStyle.d.absolutePath)}if(a.length)return function(t,e,n){return t.reduce((function(t,e){var r="";if("M"===e[0]||"L"===e[0]){var i=z(e[1],e[2],0);n&&Q(i,i,n),r="".concat(e[0]).concat(i[0],",").concat(i[1])}else if("Z"===e[0])r=e[0];else if("C"===e[0]){var a=z(e[1],e[2],0),o=z(e[3],e[4],0),s=z(e[5],e[6],0);n&&(Q(a,a,n),Q(o,o,n),Q(s,s,n)),r="".concat(e[0]).concat(a[0],",").concat(a[1],",").concat(o[0],",").concat(o[1],",").concat(s[0],",").concat(s[1])}else if("A"===e[0]){var u=z(e[6],e[7],0);n&&Q(u,u,n),r="".concat(e[0]).concat(e[1],",").concat(e[2],",").concat(e[3],",").concat(e[4],",").concat(e[5],",").concat(u[0],",").concat(u[1])}else if("Q"===e[0]){var c=z(e[1],e[2],0),l=z(e[3],e[4],0);n&&(Q(c,c,n),Q(l,l,n)),r="".concat(e[0]).concat(e[1],",").concat(e[2],",").concat(e[3],",").concat(e[4],"}")}return t+r}),"")}(a,0,i)}(t);if(e&&!function(t){return!UQ(t,"m")||!UQ(t,"M")}(e))return e}function XQ(t){if("path"===t.nodeName){var e=ch(t,"attributes");return e.markerEnd||e.markerStart}return!1}function KQ(t,e,n,r){var i=e.nodeName,a=n.nodeName,o=qQ(e),s=qQ(n),u=i===a&&"path"!==i,c=void 0===o||void 0===s,l=XQ(e)||XQ(n);if(u||c||l)return function(t,e,n){var r=t.style.transform,i=e.style.transform;YQ(e,t);var a=GQ;if(t.nodeName===RD.GROUP){var o=g(WQ(t),4),s=o[0],u=o[1],c=o[2],l=o[3],f=g(WQ(e),4),d=f[0],h=u-f[1],p=c/f[2],v=l/f[3];r="translate(".concat(s-d,", ").concat(h,") scale(").concat(p,", ").concat(v,")")}else a=a.concat(zQ[t.nodeName]||[]);var y=[Object.assign({transform:null!=r?r:"none"},BQ(t,a,!0)),Object.assign({transform:null!=i?i:"none"},BQ(e,a,!0))];return e.animate(y,n)}(e,n,r);var f=function(t,e){if("path"===t.nodeName)return t;var n=new mW({style:Object.assign(Object.assign({},BQ(t,GQ)),{d:e})});return YQ(n,t),n}(t,o),d=[Object.assign({},BQ(e,GQ)),Object.assign({},BQ(n,GQ))];if(o!==s){d[0].d=o,d[1].d=s;var h=f.animate(d,r);return h.onfinish=function(){nH(f,n),f.style.d=s,f.style.transform="none"},f.style.transform="none",h}return null}var $Q=function(t){return function(e,n,r){var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pack";return"function"==typeof t?t:HQ}(t.split),a=Object.assign(Object.assign({},r),t),o=e.length,s=n.length;if(1===o&&1===s||o>1&&s>1){var u=g(e,1)[0];return KQ(u,u,g(n,1)[0],a)}return 1===o&&s>1?function(t,e,n,r){t.style.visibility="hidden";var i=r(t,e.length);return e.map((function(e,r){return KQ(e,new mW({style:Object.assign({d:i[r]},BQ(t,GQ))}),e,n)}))}(g(e,1)[0],n,a,i):o>1&&1===s?function(t,e,n,r){var i=r(e,t.length),a=e.style,o=a.fillOpacity,s=void 0===o?1:o,u=a.strokeOpacity,c=void 0===u?1:u,l=a.opacity,f=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:s,strokeOpacity:c,opacity:void 0===l?1:l}],d=e.animate(f,n),h=t.map((function(t,r){return KQ(t,t,new mW({style:{d:i[r],fill:e.style.fill}}),n)}));return[].concat(M(h),[d])}(e,g(n,1)[0],a,i):null}};$Q.props={};var ZQ=function(t,e){return function(n,r,i){var a=g(n,1)[0],o=a.getLocalBounds(),s=g(o.min,2),u=s[0],c=s[1],l=o.halfExtents,f=2*l[0],d=2*l[1],h=new mW({style:{d:"M".concat(u,",").concat(c,"L").concat(u+f,",").concat(c,"L").concat(u+f,",").concat(c+d,"L").concat(u,",").concat(c+d,"Z")}});return a.appendChild(h),a.style.clipPath=h,AQ(t,e)([h],r,i)}};ZQ.props={};var QQ=function(t,e){return function(n,r,i){var a=g(n,1)[0],o=a.getLocalBounds(),s=g(o.min,2),u=s[0],c=s[1],l=o.halfExtents,f=2*l[0],d=2*l[1],h=new mW({style:{d:"M".concat(u,",").concat(c,"L").concat(u+f,",").concat(c,"L").concat(u+f,",").concat(c+d,"L").concat(u,",").concat(c+d,"Z")}});return a.appendChild(h),a.style.clipPath=h,NQ(t,e)([h],r,i)}};QQ.props={};var JQ="main-layer",tJ="label-layer",eJ="element",nJ="view",rJ="plot",iJ="component",aJ="label",oJ="area",sJ="mask",uJ={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function cJ(t,e){var n;return null!==(n=t.style[e])&&void 0!==n?n:uJ[e]}function lJ(t,e,n,r){t.style[e]=n,r&&t.children.forEach((function(t){return lJ(t,e,n,r)}))}function fJ(t){lJ(t,"visibility","hidden",!0)}function dJ(t){lJ(t,"visibility","visible",!0)}var hJ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function pJ(t){return fH(t).selectAll(".".concat(eJ)).nodes().filter((function(t){return!t.__removed__}))}function vJ(t,e){return gJ(t,e).flatMap((function(t){return pJ(t.container)}))}function gJ(t,e){return e.filter((function(e){return e!==t&&e.options.parentKey===t.options.key}))}function yJ(t){return fH(t).select(".".concat(rJ)).node()}function mJ(t){if("g"===t.tagName)return t.getRenderBounds();var e=t.getGeometryBounds(),n=new HD;return n.setFromTransformedAABB(e,t.getWorldTransform()),n}function bJ(t,e){var n=e.offsetX,r=e.offsetY,i=mJ(t),a=g(i.min,2),o=a[0],s=a[1],u=g(i.max,2),c=u[0],l=u[1];return n<o||n>c||r<s||r>l?null:[n-o,r-s]}function xJ(t,e){var n=e.offsetX,r=e.offsetY,i=function(t){var e=t.getRenderBounds(),n=g(e.min,2),r=n[0],i=n[1],a=g(e.max,2);return[r,i,a[0],a[1]]}(t),a=g(i,4),o=a[0],s=a[1],u=a[2],c=a[3];return[Math.min(u,Math.max(o,n))-o,Math.min(c,Math.max(s,r))-s]}function wJ(t){return function(t){return t.__data__.color}}function kJ(t){return function(t){return t.__data__.x}}function EJ(t){var e=Array.isArray(t)?t:[t],n=new Map(e.flatMap((function(t){return Array.from(t.markState.keys()).map((function(e){return[SJ(t.key,e.key),e.data]}))})));return function(t){var e=t.__data__,r=e.index,i=e.markKey,a=e.viewKey;return n.get(SJ(a,i))[r]}}function OJ(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t,e){return t},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t,e,n){return t.setAttribute(e,n)},r="__states__",i="__ordinal__",a=function(a){var o=a[r],s=void 0===o?[]:o,u=a[i],c=void 0===u?{}:u,l=s.reduce((function(e,n){return Object.assign(Object.assign({},e),t[n])}),c);if(0!==Object.keys(l).length){for(var f=0,d=Object.entries(l);f<d.length;f++){var h=g(d[f],2),p=h[0],v=h[1],y=cJ(a,p),m=e(v,a);n(a,p,m),p in c||(c[p]=y)}a[i]=c}},o=function(t){t[r]||(t[r]=[])};return{setState:function(t){o(t);for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t[r]=[].concat(n),a(t)},removeState:function(t){o(t);for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var s=0,u=n;s<u.length;s++){var c=u[s],l=t[r].indexOf(c);-1!==l&&t[r].splice(l,1)}a(t)},hasState:function(t,e){return o(t),-1!==t[r].indexOf(e)}}}function SJ(t,e){return"".concat(t,",").concat(e)}function MJ(t,e){var n,r=(Array.isArray(t)?t:[t]).flatMap((function(t){return t.marks.map((function(e){return[SJ(t.key,e.key),e.state]}))})),i={},a=nr(e);try{var o=function(){var t=n.value,e=g(Array.isArray(t)?t:[t,{}],2),a=e[0],o=e[1];i[a]=r.reduce((function(t,e){for(var n,r=g(e,2),i=r[0],s=r[1],u=void 0===s?{}:s,c=void 0===(n=u[a])||"object"==typeof n&&0===Object.keys(n).length?o:u[a],l=function(){var e=g(d[f],2),n=e[0],r=e[1],a=t[n];t[n]=function(t,e,n,o){var s=SJ(o.__data__.viewKey,o.__data__.markKey);return i!==s?null==a?void 0:a(t,e,n,o):"function"!=typeof r?r:r(t,e,n,o)}},f=0,d=Object.entries(c);f<d.length;f++)l();return t}),{})};for(a.s();!(n=a.n()).done;)o()}catch(t){a.e(t)}finally{a.f()}return i}function TJ(t,e){var n=new Map(t.map((function(t,e){return[t,e]}))),r=e?t.map(e):t;return function(t,i){if("function"!=typeof t)return t;var a=n.get(i);return t(e?e(i):i,a,r,i)}}function AJ(t){var e=t.link,n=void 0!==e&&e,r=t.valueof,i=void 0===r?function(t,e){return t}:r,a=(t.coordinate,hJ(t,["link","valueof","coordinate"]));if(!n)return[function(){},function(){}];var o=function(t){return t.__data__.points};return[function(t){var e;if(!(t.length<=1))for(var n=dQ(t,(function(t,e){return t.__data__.x-e.__data__.x})),r=function(){var t=Qj(),r=n[s-1],u=n[s],c=function(t,e){var n=g(t,3),r=n[1],i=n[2],a=g(e,4);return[r,a[0],a[3],i]}(o(r),o(u)),l=g(c,4),f=l[0],d=l[1],h=l[2],p=l[3];t.moveTo.apply(t,M(f)),t.lineTo.apply(t,M(d)),t.lineTo.apply(t,M(h)),t.lineTo.apply(t,M(p)),t.closePath();var v=OH(a,(function(t){return i(t,r)})),y=v.fill,m=void 0===y?r.getAttribute("fill"):y,b=hJ(v,["fill"]),x=new mW({className:"element-link",style:Object.assign({d:t.toString(),fill:m,zIndex:-2},b)});null===(e=r.link)||void 0===e||e.remove(),r.parentNode.appendChild(x),r.link=x},s=1;s<n.length;s++)r()},function(t){var e;null===(e=t.link)||void 0===e||e.remove(),t.link=null}]}function PJ(t,e,n){var r=function(e){var n=t.style.transform;return n?"".concat(n," ").concat(e):e};if(uD(n)){var i=t.__data__.points,a=g(sD(n)?LH(i):i,2),o=a[0],s=a[1],u=n.getCenter(),c=hH(o,u),l=hH(s,u),f=gH(c)+mH(c,l)/2,d=e*Math.cos(f),h=e*Math.sin(f);return r("translate(".concat(d,", ").concat(h,")"))}return sD(n)?r("translate(".concat(e,", 0)")):r("translate(0, ".concat(-e,")"))}function NJ(t){var e=t.document,n=t.background,r=t.scale,i=t.coordinate,a=t.valueof,o=hJ(t,["document","background","scale","coordinate","valueof"]),s="element-background";if(!n)return[function(){},function(){}];var u=function(t,e,n){var r=t.invert(e),i=e+t.getBandWidth(r)/2,a=t.getStep(r)/2,o=a*n;return[i-a+o,i+a-o]},c=function(t,n){var a=n.padding,o=function(t,e){var n=r.x;if(!vQ(n))return[0,1];var i=t.__data__.x,a=g(u(n,i,e),2);return[a[0],a[1]]}(t,a),s=g(o,2),c=s[0],l=s[1],f=function(t,e){var n=r.y;if(!vQ(n))return[0,1];var i=t.__data__.y,a=g(u(n,i,e),2);return[a[0],a[1]]}(t,a),d=g(f,2),h=d[0],p=d[1],v=[[c,h],[l,h],[l,p],[c,p]].map((function(t){return i.map(t)})),y=t.__data__,m=y.y,b=y.y1;return zH(e,v,{y:m,y1:b},i,n)},l=function(t,e){for(var n=e.transform,r=void 0===n?"scale(1.2, 1.2)":n,i=e.transformOrigin,a=void 0===i?"center center":i,o=e.stroke,s=void 0===o?"":o,u=hJ(e,["transform","transformOrigin","stroke"]),c=Object.assign({transform:r,transformOrigin:a,stroke:s},u),l=t.cloneNode(!0),f=0,d=Object.entries(c);f<d.length;f++){var h=g(d[f],2),p=h[0],v=h[1];l.style[p]=v}return l};return[function(t){t.background&&t.background.remove();var e=OH(o,(function(e){return a(e,t)})),n=e.fill,i=void 0===n?"#CCD6EC":n,u=e.fillOpacity,f=void 0===u?.3:u,d=e.zIndex,h=void 0===d?-2:d,p=e.padding,v=void 0===p?.001:p,g=e.lineWidth,y=void 0===g?0:g,m=hJ(e,["fill","fillOpacity","zIndex","padding","lineWidth"]),b=Object.assign(Object.assign({},m),{fill:i,fillOpacity:f,zIndex:h,padding:v,lineWidth:y}),x=([r.x,r.y].some(vQ)?c:l)(t,b);x.className=s,t.parentNode.parentNode.appendChild(x),t.background=x},function(t){var e;null===(e=t.background)||void 0===e||e.remove(),t.background=null},function(t){return t.className===s}]}function CJ(t,e){var n=t.getRootNode().defaultView.getContextService().getDomElement();(null==n?void 0:n.style)&&(t.cursor=n.style.cursor,n.style.cursor=e)}function _J(t,e,n){return t.find((function(t){return Object.entries(e).every((function(e){var r=g(e,2),i=r[0],a=r[1];return n(t)[i]===a}))}))}function LJ(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function RJ(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Mv(t,(function(t){return!!t})).map((function(t,e){return[0===e?"M":"L"].concat(M(t))}));return e&&n.push(["Z"]),n}function jJ(t){return t.querySelectorAll(".element")}function DJ(t,e){if(e(t))return t;for(var n=t.parent;n&&!e(n);)n=n.parent;return n}var IJ=["interval","point","density"],FJ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function zJ(t){var e=t.delay,n=t.createGroup,r=t.background,i=void 0!==r&&r,a=t.link,o=void 0!==a&&a,s=FJ(t,["delay","createGroup","background","link"]);return function(t,r,a){var u=t.container,c=t.view,l=t.options,f=c.scale,d=c.coordinate;return function(t,e){var n,r,i=e.elements,a=e.datum,o=e.groupKey,s=void 0===o?function(t){return t}:o,u=e.link,c=void 0!==u&&u,l=e.background,f=void 0!==l&&l,d=e.delay,h=void 0===d?60:d,p=e.scale,v=e.coordinate,y=e.emitter,m=e.state,b=void 0===m?{}:m,x=i(t),w=new Set(x),k=GV(x,s),E=TJ(x,a),O=g(AJ(Object.assign({elements:x,valueof:E,link:c,coordinate:v},iH(b.active,"link"))),2),S=O[0],M=O[1],T=g(NJ(Object.assign({document:t.ownerDocument,scale:p,coordinate:v,background:f,valueof:E},iH(b.active,"background"))),3),A=T[0],P=T[1],N=T[2],C=vd(b,{active:Object.assign({},(null===(n=b.active)||void 0===n?void 0:n.offset)&&{transform:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=(t=b.active).offset.apply(t,n),a=n[1];return PJ(x[a],i,v)}})}),_=OJ(C,E),L=_.setState,R=_.removeState,j=_.hasState,D=function(t){var e=t.target,n=t.nativeEvent,i=void 0===n||n;if(w.has(e)){r&&clearTimeout(r);var o,u=s(e),c=k.get(u),l=new Set(c),f=nr(x);try{for(f.s();!(o=f.n()).done;){var d=o.value;l.has(d)?j(d,"active")||L(d,"active"):(L(d,"inactive"),M(d)),d!==e&&P(d)}}catch(t){f.e(t)}finally{f.f()}A(e),S(c),i&&y.emit("element:highlight",{nativeEvent:i,data:{data:a(e),group:c.map(a)}})}},I=function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=nr(x);try{for(n.s();!(t=n.n()).done;){var r=t.value;R(r,"active","inactive"),P(r),M(r)}}catch(t){n.e(t)}finally{n.f()}e&&y.emit("element:unhighlight",{nativeEvent:e})},F=function(t){var e=t.target;f&&!N(e)||(f||w.has(e))&&(h>0?(r&&clearTimeout(r),r=setTimeout((function(){I(),r=null}),h)):I())},z=function(){I()};t.addEventListener("pointerover",D),t.addEventListener("pointerout",F),t.addEventListener("pointerleave",z);var B=function(t){t.nativeEvent||I(!1)},G=function(t){if(!t.nativeEvent){var e=t.data.data,n=_J(x,e,a);n&&D({target:n,nativeEvent:!1})}};return y.on("element:highlight",G),y.on("element:unhighlight",B),function(){t.removeEventListener("pointerover",D),t.removeEventListener("pointerout",F),t.removeEventListener("pointerleave",z),y.off("element:highlight",G),y.off("element:unhighlight",B);var e,n=nr(x);try{for(n.s();!(e=n.n()).done;){var r=e.value;P(r),M(r)}}catch(t){n.e(t)}finally{n.f()}}}(yJ(u),Object.assign({elements:pJ,datum:EJ(c),groupKey:n?n(c):void 0,coordinate:d,scale:f,state:MJ(l,[["active",i?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:i,link:o,delay:e,emitter:a},s))}}function BJ(t){return zJ(Object.assign(Object.assign({},t),{createGroup:kJ}))}function GJ(t){return zJ(Object.assign(Object.assign({},t),{createGroup:wJ}))}zJ.props={reapplyWhenUpdate:!0},BJ.props={reapplyWhenUpdate:!0},GJ.props={reapplyWhenUpdate:!0};var WJ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function VJ(t){var e=t.createGroup,n=t.createRegionGroup,r=t.background,i=void 0!==r&&r,a=t.link,o=void 0!==a&&a,s=WJ(t,["createGroup","createRegionGroup","background","link"]);return function(t,r,a){var u=t.container,c=t.view,l=t.options,f=c.coordinate,d=c.scale;return function(t,e){var n,r=e.elements,i=e.datum,a=e.groupKey,o=void 0===a?function(t){return t}:a,s=e.regionGroupKey,u=void 0===s?function(t){return t}:s,c=e.link,l=void 0!==c&&c,f=e.single,d=void 0!==f&&f,h=e.multipleSelectHotkey,p=e.coordinate,v=e.background,y=void 0!==v&&v,m=e.scale,b=e.emitter,x=e.state,w=void 0===x?{}:x,k=e.region,E=void 0!==k&&k,O=r(t),S=new Set(O),T=function(t){var e,n,r=t.root,i=t.coordinate,a=t.scale,o=t.validFindByXMarks,s=void 0===o?IJ:o,u=(0,t.elementsof)(r),c=function(t){return s.includes(t.markType)};if(u.find(c)){u=u.filter(c);var l=a.x,f=a.series,d=null!==(n=null===(e=null==l?void 0:l.getBandWidth)||void 0===e?void 0:e.call(l))&&void 0!==n?n:0,h=f?function(t){var e=Math.round(1/f.valueBandWidth);return t.__data__.x+t.__data__.series*d+d/(2*e)}:function(t){return t.__data__.x+d/2};return u.sort((function(t,e){return h(t)-h(e)})),function(t){var e=bJ(r,t);if(e){var n=g(i.invert(e),1)[0],a=(0,nQ(h).center)(u,n);return u[a]}}}return function(t){return DJ(t.target,(function(t){return!!t.classList&&t.classList.includes("element")}))}}({elementsof:r,root:t,coordinate:p,scale:m}),A=GV(O,o),P=GV(O,u),N=TJ(O,i),C=g(AJ(Object.assign({link:l,elements:O,valueof:N,coordinate:p},iH(w.selected,"link"))),2),_=C[0],L=C[1],R=g(NJ(Object.assign({document:t.ownerDocument,background:y,coordinate:p,scale:m,valueof:N},iH(w.selected,"background"))),2),j=R[0],D=R[1],I=vd(w,{selected:Object.assign({},(null===(n=w.selected)||void 0===n?void 0:n.offset)&&{transform:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=(t=w.selected).offset.apply(t,n),a=n[1];return PJ(O[a],i,p)}})}),F=OJ(I,N),z=F.setState,B=F.removeState,G=F.hasState,W=!d,V=null,H=function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=nr(O);try{for(n.s();!(t=n.n()).done;){var r=t.value;B(r,"selected","unselected"),L(r),D(r)}}catch(t){n.e(t)}finally{n.f()}e&&b.emit("element:unselect",{nativeEvent:!0})},Y=function(t){var e=t.event,n=t.element,r=t.nativeEvent,a=void 0===r||r,s=t.filter,u=void 0===s?function(t){return!0}:s,c=t.groupBy,l=void 0===c?o:c,f=t.groupMap,d=void 0===f?A:f,h=O.filter(u);if(G(n,"selected"))H();else{var p,v=l(n),g=d.get(v),y=new Set(g),m=nr(h);try{for(m.s();!(p=m.n()).done;){var x=p.value;y.has(x)?z(x,"selected"):(z(x,"unselected"),L(x)),x!==n&&D(x)}}catch(t){m.e(t)}finally{m.f()}if(_(g),j(n),!a)return;b.emit("element:select",Object.assign(Object.assign({},e),{nativeEvent:a,data:{data:[i(n)].concat(M(g.map(i)))}}))}},U=function(t){var e=t.event,n=t.element,r=t.nativeEvent,a=void 0===r||r,s=t.filter,u=void 0===s?function(t){return!0}:s,c=t.groupBy,f=void 0===c?o:c,d=t.groupMap,h=void 0===d?A:d,p=f(n),v=h.get(p),g=new Set(v),y=O.filter(u);if(G(n,"selected")){var m=O.some((function(t){return!g.has(t)&&G(t,"selected")}));if(!m)return H();var x,w=nr(v);try{for(w.s();!(x=w.n()).done;){var k=x.value;z(k,"unselected"),L(k),D(k)}}catch(t){w.e(t)}finally{w.f()}}else{var E,S=v.some((function(t){return G(t,"selected")})),M=nr(y);try{for(M.s();!(E=M.n()).done;){var T=E.value;g.has(T)?z(T,"selected"):G(T,"selected")||z(T,"unselected")}}catch(t){M.e(t)}finally{M.f()}!S&&l&&_(v),j(n)}a&&b.emit("element:select",Object.assign(Object.assign({},e),{nativeEvent:a,data:{data:O.filter((function(t){return G(t,"selected")})).map(i)}}))},q=function(t){var e=t.target,n=t.nativeEvent,r=void 0===n||n,i=W?U:Y,a=e,s=S.has(e);return!E||s?s?i({event:t,element:a,nativeEvent:r,groupBy:o}):H():(a=T(t),S.has(a)?i({event:t,element:a,nativeEvent:r,filter:function(t){return IJ.includes(t.markType)},groupBy:u,groupMap:P}):H())},X=Array.isArray(h)?h:[h],K=function(t){X.includes(t.code)&&!V&&(V=t.code,W=!0)},$=function(t){t.code===V&&(V=null,W=!1)};t.addEventListener("click",q),h&&(W=!1,document.addEventListener("keydown",K),document.addEventListener("keyup",$));var Z=function(t){var e=t.nativeEvent,n=t.data;if(!e){var r,a=nr(W?n.data:n.data.slice(0,1));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=_J(O,o,i);q({target:s,nativeEvent:!1})}}catch(t){a.e(t)}finally{a.f()}}},Q=function(){H(!1)};return b.on("element:select",Z),b.on("element:unselect",Q),function(){var e,n=nr(O);try{for(n.s();!(e=n.n()).done;){var r=e.value;L(r)}}catch(t){n.e(t)}finally{n.f()}t.removeEventListener("click",q),h&&(document.removeEventListener("keydown",K),document.removeEventListener("keyup",$)),b.off("element:select",Z),b.off("element:unselect",Q)}}(yJ(u),Object.assign({elements:pJ,datum:EJ(c),groupKey:e?e(c):void 0,regionGroupKey:n?n(c):function(t){return t.__data__.x},coordinate:f,scale:d,state:MJ(l,[["selected",i?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:i,link:o,emitter:a},s))}}function HJ(t){return VJ(Object.assign(Object.assign({},t),{createGroup:kJ}))}function YJ(t){return VJ(Object.assign(Object.assign({},t),{createGroup:wJ}))}function UJ(t){var e=t.wait,n=void 0===e?30:e,r=t.leading,i=t.trailing,a=void 0!==i&&i;return function(t){t.options;var e=t.update,i=t.setState,o=yJ(t.container),s=Ql((function(t){var n=bJ(o,t);if(!n)return i("fisheye"),void e();i("fisheye",(function(t){var e,r=vd({},t,{interaction:{tooltip:{preserve:!0}}}),i=nr(r.marks);try{for(i.s();!(e=i.n()).done;)e.value.animate=!1}catch(t){i.e(t)}finally{i.f()}var a=g(n,2),o=a[0],s=a[1],u=function(t){var e=t.coordinate,n=void 0===e?{}:e,r=n.transform,i=void 0===r?[]:r,a=i.find((function(t){return"fisheye"===t.type}));if(a)return a;var o={type:"fisheye"};return i.push(o),n.transform=i,t.coordinate=n,o}(r);return u.focusX=o,u.focusY=s,u.visual=!0,r})),e()}),n,{leading:r,trailing:a});return o.addEventListener("pointerenter",s),o.addEventListener("pointermove",s),o.addEventListener("pointerleave",s),function(){o.removeEventListener("pointerenter",s),o.removeEventListener("pointermove",s),o.removeEventListener("pointerleave",s)}}}VJ.props={reapplyWhenUpdate:!0},HJ.props={reapplyWhenUpdate:!0},YJ.props={reapplyWhenUpdate:!0};var qJ=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},XJ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function KJ(t){var e=t.transform,n=void 0===e?[]:e,r=n.find((function(t){return"normalizeY"===t.type}));if(r)return r;var i={type:"normalizeY"};return n.push(i),t.transform=n,i}function $J(t){var e=this,n=t.wait,r=void 0===n?20:n,i=t.leading,a=t.trailing,o=void 0!==a&&a,s=t.labelFormatter,u=void 0===s?function(t){return"".concat(t)}:s,c=XJ(t,["wait","leading","trailing","labelFormatter"]);return function(t){var n=t.view,a=t.container,s=t.update,l=t.setState,f=n.markState,d=n.scale,h=n.coordinate,p=function(t,e,n){var r=Array.from(t.entries()).filter((function(t){return"line"===g(t,1)[0].type})).map((function(t){var e=g(t,1)[0].encode;return Object.fromEntries(n.map((function(t){var n=e[t];return[t,n?n.value:void 0]})))}));return g(r,1)[0]}(f,0,["x","y","series"]);if(p){var v=p.y,y=p.x,m=p.series,b=void 0===m?[]:m,x=v.map((function(t,e){return e})),w=dQ(x.map((function(t){return y[t]}))),k=yJ(a),E=a.getElementsByClassName(eJ),O=GV(a.getElementsByClassName(aJ),(function(t){return t.__data__.key.split("-")[0]})),S=new gW({style:Object.assign({x1:0,y1:0,x2:0,y2:k.getAttribute("height"),stroke:"black",lineWidth:1},iH(c,"rule"))}),M=new SW({style:Object.assign({x:0,y:k.getAttribute("height"),text:"",fontSize:10},iH(c,"label"))});S.append(M),k.appendChild(S);var T,A,P=function(t,e,n){var r=g(t.invert(n),1)[0],i=e.invert(r);return w[lQ(w,i)]},N=function(t,e){S.setAttribute("x1",t[0]),S.setAttribute("x2",t[0]),M.setAttribute("text",u(e))},C=Ql((function(t){var e=bJ(k,t);e&&function(t){var e=T,n=e.scale,r=e.coordinate,i=n.x,a=n.y,o=P(r,i,t);N(t,o);var s,u=nr(E);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=c.__data__,f=l.seriesIndex,d=l.key,h=f[nQ((function(t){return y[+t]})).center(f,o)],p=[0,a.map(1)],m=[0,a.map(v[h]/v[f[0]])],b=g(r.map(p),2)[1]-g(r.map(m),2)[1];c.setAttribute("transform","translate(0, ".concat(b,")"));var x,w=nr(O.get(d)||[]);try{for(w.s();!(x=w.n()).done;)x.value.setAttribute("dy",b)}catch(t){w.e(t)}finally{w.f()}}}catch(t){u.e(t)}finally{u.f()}}(e)}),r,{leading:i,trailing:o});return A=[0,0],qJ(e,void 0,void 0,Jn().mark((function t(){var e,n,r;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=d.x,n=P(h,e,A),N(A,n),l("chartIndex",(function(t){var e=vd({},t),r=e.marks.find((function(t){return"line"===t.type})),i=ZX(VV(x,(function(t){return ZX(t,(function(t){return+v[t]}))/$X(t,(function(t){return+v[t]}))}),(function(t){return b[t]})).values());vd(r,{scale:{y:{domain:[1/i,i]}}});var a=KJ(r);a.groupBy="color",a.basis=function(t,e){return e[t[nQ((function(t){return y[+t]})).center(t,n)]]};var o,s=nr(e.marks);try{for(s.s();!(o=s.n()).done;)o.value.animate=!1}catch(t){s.e(t)}finally{s.f()}return e})),t.next=6,s("chartIndex");case 6:r=t.sent,T=r.view;case 8:case"end":return t.stop()}}),t)}))),k.addEventListener("pointerenter",C),k.addEventListener("pointermove",C),k.addEventListener("pointerleave",C),function(){S.remove(),k.removeEventListener("pointerenter",C),k.removeEventListener("pointermove",C),k.removeEventListener("pointerleave",C)}}}}function ZJ(t,e){var n,r=-1,i=-1;if(void 0===e){var a,o=nr(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;++i,null!=s&&(n>s||void 0===n&&s>=s)&&(n=s,r=i)}}catch(t){o.e(t)}finally{o.f()}}else{var u,c=nr(t);try{for(c.s();!(u=c.n()).done;){var l=u.value;null!=(l=e(l,++i,t))&&(n>l||void 0===n&&l>=l)&&(n=l,r=i)}}catch(t){c.e(t)}finally{c.f()}}return r}function QJ(t,e){var n=0,r=0;if(void 0===e){var i,a=nr(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;null!=o&&(o=+o)>=o&&(++n,r+=o)}}catch(t){a.e(t)}finally{a.f()}}else{var s,u=-1,c=nr(t);try{for(c.s();!(s=c.n()).done;){var l=s.value;null!=(l=e(l,++u,t))&&(l=+l)>=l&&(++n,r+=l)}}catch(t){c.e(t)}finally{c.f()}}if(n)return r/n}function JJ(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(cH(t))return t;if(Array.isArray(t)&&r)return t;var i=iH(t,e);return vd(n,i)}function t0(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return cH(t)||Array.isArray(t)?t:e0(t)?vd(e,t):t}function e0(t){if(0===Object.keys(t).length)return!0;var e=t.title,n=t.items;return void 0!==e||void 0!==n}function n0(t,e){return"object"==typeof t?iH(t,e):t}$J.props={reapplyWhenUpdate:!0};function r0(t,e,n,r){var i=t.radar,a=g(r,1)[0].getOptions().name,o=g(vD(n),2),s=o[0],u=o[1],c=e.axisRadar,l=void 0===c?{}:c;return Object.assign(Object.assign({},l),{grid:"position"===a,gridConnect:"line",gridControlAngles:new Array(i.count).fill(0).map((function(t,e){return(u-s)/i.count*e}))})}var i0=function(t){var e=t.important,n=void 0===e?{}:e,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["important"]);return function(e){var i=e.theme,a=e.coordinate,o=e.scales;return NZ(Object.assign(Object.assign(Object.assign({},r),function(t){var e=t%(2*Math.PI);return e===Math.PI/2?{titleTransform:"translate(0, 50%)"}:e>-Math.PI/2&&e<Math.PI/2?{titleTransform:"translate(50%, 0)"}:e>Math.PI/2&&e<3*Math.PI/2?{titleTransform:"translate(-50%, 0)"}:{}}(t.orientation)),{important:Object.assign(Object.assign({},r0(t,i,a,o)),n)}))(e)}};i0.props=Object.assign(Object.assign({},NZ.props),{defaultPosition:"center"});var a0=function(t){return function(){return XZ(Object.assign({},{block:!0},t)).apply(void 0,arguments)}};a0.props=Object.assign(Object.assign({},XZ.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var o0=function(t){return function(e){var n=bZ(e.scales,"size");return XZ(Object.assign({},{type:"size",data:n.getTicks().map((function(t,e){return{value:t,label:String(t)}}))},t))(e)}};o0.props=Object.assign(Object.assign({},XZ.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var s0=function(t){return o0(Object.assign({},{block:!0},t))};s0.props=Object.assign(Object.assign({},XZ.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var u0=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).static,e=void 0!==t&&t;return function(t){var n=t.width,r=t.height,i=t.depth,a=t.paddingLeft,o=t.paddingRight,s=t.paddingTop,u=t.paddingBottom,c=t.padding,l=t.inset,f=t.insetLeft,d=t.insetTop,h=t.insetRight,p=t.insetBottom,v=t.margin,g=t.marginLeft,y=t.marginBottom,m=t.marginTop,b=t.marginRight,x=t.data,w=t.coordinate,k=t.theme,E=t.component,O=t.interaction,S=t.x,M=t.y,T=t.z,A=t.key,P=t.frame,N=t.labelTransform,C=t.parentKey,_=t.clip,L=t.viewStyle,R=t.title,j=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:S,y:M,z:T,key:A,width:n,height:r,depth:i,padding:c,paddingLeft:a,paddingRight:o,paddingTop:s,inset:l,insetLeft:f,insetTop:d,insetRight:h,insetBottom:p,paddingBottom:u,theme:k,coordinate:w,component:E,interaction:O,frame:P,labelTransform:N,margin:v,marginLeft:g,marginBottom:y,marginTop:m,marginRight:b,parentKey:C,clip:_,style:L},!e&&{title:R}),{marks:[Object.assign(Object.assign(Object.assign({},j),{key:"".concat(A,"-0"),data:x}),e&&{title:R})]})]}};u0.props={};function c0(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return vd({},t.apply(void 0,[e].concat(r)),e)}}function l0(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return vd({},e,t.apply(void 0,[e].concat(r)))}}function f0(t,e){if(!t)return e;if(Array.isArray(t))return t;if(function(t){return!(t instanceof Date)&&"object"==typeof t}(t)){var n=t.value,r=void 0===n?e:n,i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["value"]);return Object.assign(Object.assign({},i),{value:r})}return t}var d0=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},h0=function(){return function(t){var e=t.children,n=d0(t,["children"]);if(!Array.isArray(e))return[];var r=n.data,i=n.scale,a=void 0===i?{}:i,o=n.axis,s=void 0===o?{}:o,u=n.legend,c=void 0===u?{}:u,l=n.encode,f=void 0===l?{}:l,d=n.transform,h=void 0===d?[]:d,p=d0(n,["data","scale","axis","legend","encode","transform"]),v=e.map((function(t){var e=t.data,n=t.scale,i=void 0===n?{}:n,o=t.axis,u=void 0===o?{}:o,l=t.legend,d=void 0===l?{}:l,p=t.encode,v=void 0===p?{}:p,g=t.transform,y=void 0===g?[]:g,m=d0(t,["data","scale","axis","legend","encode","transform"]);return Object.assign({data:f0(e,r),scale:vd({},a,i),encode:vd({},f,v),transform:[].concat(M(h),M(y)),axis:!(!u||!s)&&vd({},s,u),legend:!(!d||!c)&&vd({},c,d)},m)}));return[Object.assign(Object.assign({},p),{marks:v,type:"standardView"})]}};function p0(t,e){var n,r=-1,i=-1;if(void 0===e){var a,o=nr(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;++i,null!=s&&(n<s||void 0===n&&s>=s)&&(n=s,r=i)}}catch(t){o.e(t)}finally{o.f()}}else{var u,c=nr(t);try{for(c.s();!(u=c.n()).done;){var l=u.value;null!=(l=e(l,++i,t))&&(n<l||void 0===n&&l>=l)&&(n=l,r=i)}}catch(t){c.e(t)}finally{c.f()}}return r}function v0(t,e,n,r){var i=e.length/2,a=e.slice(0,i),o=e.slice(i),s=p0(a,(function(t,e){return Math.abs(t[1]-o[e][1])})),u=function(t){return[a[t][0],(a[t][1]+o[t][1])/2]},c=u(s=Math.max(Math.min(s,i-2),1)),l=u(s-1),f=gH(hH(u(s+1),l))/Math.PI*180;return{x:c[0],y:c[1],transform:"rotate(".concat(f,")"),textAlign:"center",textBaseline:"middle"}}function g0(t,e,n,r){var i,a,o,s,u,c=g(n.bounds,2),l=g(c[0],2),f=l[0],d=l[1],h=g(c[1],2),p=h[0],v=h[1],y=p-f,m=v-d;return a=(i="left"===t?{x:0,y:m/2,textAlign:"start",textBaseline:"middle"}:"right"===t?{x:y,y:m/2,textAlign:"end",textBaseline:"middle"}:"top"===t?{x:y/2,y:0,textAlign:"center",textBaseline:"top"}:"bottom"===t?{x:y/2,y:m,textAlign:"center",textBaseline:"bottom"}:"top-left"===t?{x:0,y:0,textAlign:"start",textBaseline:"top"}:"top-right"===t?{x:y,y:0,textAlign:"end",textBaseline:"top"}:"bottom-left"===t?{x:0,y:m,textAlign:"start",textBaseline:"bottom"}:"bottom-right"===t?{x:y,y:m,textAlign:"end",textBaseline:"bottom"}:{x:y/2,y:m/2,textAlign:"center",textBaseline:"middle"}).x,o=i.y,s=sH(n.x,y),u=sH(n.y,m),Object.assign(Object.assign({},i),{x:(s||a)+f,y:(u||o)+d})}function y0(t,e,n,r){var i,a,o,s,u=n.y,c=n.y1,l=n.autoRotate,f=n.rotateToAlignArc,d=r.getCenter(),h=RH(r,e,[u,c]),p=h.innerRadius,v=h.outerRadius,y=h.startAngle,m=h.endAngle,b="inside"===t?(y+m)/2:m,x=b0(b,l,f),w=(a=(i=g(e,2))[0],o=i[1],{x:(s=g("inside"===t?m0(d,b,p+.5*(v-p)):xH(a,o),2))[0],y:s[1]});return Object.assign(Object.assign({},w),{textAlign:"inside"===t?"center":"start",textBaseline:"middle",rotate:x})}function m0(t,e,n){return[t[0]+Math.sin(e)*n,t[1]-Math.cos(e)*n]}function b0(t,e,n){if(!e)return 0;var r=n?0:Math.sin(t)<0?90:-90;return t/Math.PI*180+r}function x0(t,e,n,r){var i=n.y,a=n.y1,o=n.autoRotate,s=n.rotateToAlignArc,u=n.radius,c=void 0===u?.5:u,l=n.offset,f=void 0===l?0:l,d=RH(r,e,[i,a]),h=d.startAngle,p=d.endAngle,v=r.getCenter(),y=(h+p)/2,m={textAlign:"center",textBaseline:"middle",rotate:b0(y,o,s)},b=d.innerRadius,x=g(m0(v,y,b+(d.outerRadius-b)*c+f),2),w=x[0],k=x[1];return Object.assign({x:w,y:k},m)}function w0(t){return void 0===t?null:t}function k0(t,e,n,r){var i=g(n.bounds,1)[0];return{x:w0(i[0]),y:w0(i[1])}}function E0(t,e,n,r){return 1===n.bounds.length?k0(0,0,n):(cD(r)?y0:hD(r)?x0:g0)(t,e,n,r)}function O0(t,e,n){var r=RH(n,t,[e.y,e.y1]),i=r.innerRadius;return i+(r.outerRadius-i)}function S0(t,e,n){var r=RH(n,t,[e.y,e.y1]);return(r.startAngle+r.endAngle)/2}function M0(t,e,n,r){var i=n.autoRotate,a=n.rotateToAlignArc,o=n.offset,s=void 0===o?0:o,u=n.connector,c=void 0===u||u,l=n.connectorLength,f=void 0===l?s:l,d=n.connectorLength2,h=void 0===d?0:d,p=n.connectorDistance,v=void 0===p?0:p,y=r.getCenter(),m=S0(e,n,r),b=Math.sin(m)>0?1:-1,x=b0(m,i,a),w={textAlign:b>0||cD(r)?"start":"end",textBaseline:"middle",rotate:x},k=O0(e,n,r),E=function(t,e,n,r,i){var a=g(m0(t,e,n),2),o=a[0],s=a[1],u=g(m0(t,e,r),2),c=u[0],l=u[1];return[[o,s],[c,l],[c+(Math.sin(e)>0?1:-1)*i,l]]}(y,m,k,k+(c?f:s),c?h:0),O=g(E,3),S=g(O[0],2),M=S[0],T=S[1],A=g(O[1],2),P=A[0],N=A[1],C=g(O[2],2),_=C[0],L=C[1],R=c?+v*b:0,j=_+R,D={connector:c,connectorPoints:[[P-j,N-L],[_-j,L-L]]};return Object.assign(Object.assign({x0:M,y0:T,x:_+R,y:L},w),D)}function T0(t,e,n,r){return 1===n.bounds.length?k0(0,0,n):(cD(r)?y0:hD(r)?M0:g0)(t,e,n,r)}function A0(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.labelHeight,r=void 0===n?14:n,i=e.height,a=dQ(t,(function(t){return t.y})),o=a.length,s=new Array(o),u=0;u<o;u++){var c=a[u].y;s[u]={y:c,y1:c+r,labels:[c]}}for(var l=!0;l;){l=!1;for(var f=s.length-1;f>0;f--){var d=s[f],h=s[f-1];if(h.y1>d.y){var p;l=!0,(p=h.labels).push.apply(p,M(d.labels)),s.splice(f,1),h.y1+=d.y1-d.y;var v=h.y1-h.y;h.y1=Math.max(Math.min(h.y1,i),v),h.y=h.y1-v}}}for(var g=0,y=0,m=s;y<m.length;y++){var b,x=m[y],w=x.y-r,k=nr(x.labels);try{for(k.s();!(b=k.n()).done;){var E=b.value,O=a[g++],S=w+r-E;O.connectorPoints[0][1]-=S,O.y=w+r,w+=r}}catch(t){k.e(t)}finally{k.f()}}}function P0(t,e){var n=dQ(t,(function(t){return t.y})),r=e.height,i=e.labelHeight,a=void 0===i?14:i,o=Math.ceil(r/a);if(n.length<=o)return A0(n,e);for(var s=[],u=0;u<n.length;u++)u<n.length-o?(n[u].opacity=0,n[u].connector=!1):s.push(n[u]);A0(s,e)}h0.props={};var N0=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},C0=new WeakMap;function _0(t,e,n,r,i,a){if(!hD(r))return{};if(C0.has(e))return C0.get(e);var o=a.map((function(t){return function(t,e,n){var r=e.connectorLength,i=e.connectorLength2,a=e.connectorDistance,o=N0(M0(0,t,e,n),[]),s=n.getCenter(),u=O0(t,e,n),c=S0(t,e,n),l=u+r+i,f=Math.sin(c)>0?1:-1,d=s[0]+(l+ +a)*f-o.x;return o.x+=d,o.connectorPoints[0][0]-=d,o}(t,n,r)})),s=r.getOptions(),u=s.width,c=s.height,l=o.filter((function(t){return t.x<u/2})),f=o.filter((function(t){return t.x>=u/2})),d=Object.assign(Object.assign({},i),{height:c});return P0(l,d),P0(f,d),o.forEach((function(t,e){return C0.set(a[e],t)})),C0.get(e)}var L0=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function R0(t,e,n,r){if(!hD(r))return{};var i=n.connectorLength,a=n.connectorLength2,o=n.connectorDistance,s=L0(M0(0,e,n,r),[]),u=s.x0,c=s.y0,l=r.getCenter(),f=function(t){if(hD(t)){var e=g(t.getSize(),2),n=e[0],r=e[1],i=t.getOptions().transformations.find((function(t){return"polar"===t[0]}));if(i)return Math.max(n,r)/2*i[4]}return 0}(r),d=f+i,h=yH([u-l[0],c-l[1]]),p=Math.sin(h)>0?1:-1,v=g(m0(l,h,d),2),y=v[0],m=v[1];return s.x=y+(a+o)*p,s.y=m,s}var j0=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};var D0=function(t,e){var n=e.coordinate,r=e.theme,i=t.render;return function(e,o,s,u){var c=o.text,l=(o.x,o.y,o.transform),f=void 0===l?"":l,d=o.transformOrigin,h=o.className,p=void 0===h?"":h,v=j0(o,["text","x","y","transform","transformOrigin","className"]),g=function(t,e,n,r,i,o){var s=e.position,u=i.render,c=function(t,e){return void 0!==t?t:hD(e)?"inside":sD(e)?"right":"top"}(s,n),l=r[u?"htmlLabel":"inside"===c?"innerLabel":"label"],f=Object.assign({},l,e),d=a[BU(c)];if(!d)throw new Error("Unknown position: ".concat(c));return Object.assign(Object.assign({},l),d(c,t,f,n,i,o))}(e,o,n,r,t,u),y=g.rotate,m=void 0===y?0:y,b=g.transform,x=void 0===b?"":b,w=j0(g,["rotate","transform"]);return fH(new yq).call(NH,w).style("text","".concat(c)).style("className","".concat(p," g2-label")).style("innerHTML",i?i(c,o.datum,o.index):void 0).style("labelTransform","".concat(x," rotate(").concat(+m,") ").concat(f).trim()).style("labelTransformOrigin",d).style("coordCenter",n.getCenter()).call(NH,v).node()}};D0.props={defaultMarker:"point"};var I0={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"};function F0(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return!0};return function(i){if(r(i)){n.emit("plot:".concat(t),i);var a=i.target;if(a){var o=a.className;if("plot"!==o){var s=function(t){return DJ(t,(function(t){return"element"===t.className}))}(a),u=function(t){return DJ(t,(function(t){return"component"===t.className}))}(a),c=function(t){return DJ(t,(function(t){return"label"===t.className}))}(a),l=s||u||c;if(l){var f=l.className,d=l.markType,h=Object.assign(Object.assign({},i),{nativeEvent:!0});"element"===f?(h.data={data:XV(l,e)},n.emit("element:".concat(t),h),n.emit("".concat(d,":").concat(t),h)):"label"===f?(h.data={data:l.attributes.datum},n.emit("label:".concat(t),h),n.emit("".concat(o,":").concat(t),h)):(n.emit("component:".concat(t),h),n.emit("".concat(o,":").concat(t),h))}}}}}}function z0(){return function(t,e,n){var r=t.container,i=t.view,a=F0(I0.CLICK,i,n,(function(t){return 1===t.detail})),o=F0(I0.DBLCLICK,i,n,(function(t){return 2===t.detail})),s=F0(I0.POINTER_TAP,i,n),u=F0(I0.POINTER_DOWN,i,n),c=F0(I0.POINTER_UP,i,n),l=F0(I0.POINTER_OVER,i,n),f=F0(I0.POINTER_OUT,i,n),d=F0(I0.POINTER_MOVE,i,n),h=F0(I0.POINTER_ENTER,i,n),p=F0(I0.POINTER_LEAVE,i,n),v=F0(I0.POINTER_UPOUTSIDE,i,n),g=F0(I0.DRAG_START,i,n),y=F0(I0.DRAG,i,n),m=F0(I0.DRAG_END,i,n),b=F0(I0.DRAG_ENTER,i,n),x=F0(I0.DRAG_LEAVE,i,n),w=F0(I0.DRAG_OVER,i,n),k=F0(I0.DROP,i,n);return r.addEventListener("click",a),r.addEventListener("click",o),r.addEventListener("pointertap",s),r.addEventListener("pointerdown",u),r.addEventListener("pointerup",c),r.addEventListener("pointerover",l),r.addEventListener("pointerout",f),r.addEventListener("pointermove",d),r.addEventListener("pointerenter",h),r.addEventListener("pointerleave",p),r.addEventListener("pointerupoutside",v),r.addEventListener("dragstart",g),r.addEventListener("drag",y),r.addEventListener("dragend",m),r.addEventListener("dragenter",b),r.addEventListener("dragleave",x),r.addEventListener("dragover",w),r.addEventListener("drop",k),function(){r.removeEventListener("click",a),r.removeEventListener("click",o),r.removeEventListener("pointertap",s),r.removeEventListener("pointerdown",u),r.removeEventListener("pointerup",c),r.removeEventListener("pointerover",l),r.removeEventListener("pointerout",f),r.removeEventListener("pointermove",d),r.removeEventListener("pointerenter",h),r.removeEventListener("pointerleave",p),r.removeEventListener("pointerupoutside",v),r.removeEventListener("dragstart",g),r.removeEventListener("drag",y),r.removeEventListener("dragend",m),r.removeEventListener("dragenter",b),r.removeEventListener("dragleave",x),r.removeEventListener("dragover",w),r.removeEventListener("drop",k)}}}z0.props={reapplyWhenUpdate:!0};var B0=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function G0(t,e){var n=Object.assign(Object.assign({},{"component.axisRadar":i0,"component.axisLinear":NZ,"component.axisArc":CZ,"component.legendContinuousBlock":a0,"component.legendContinuousBlockSize":s0,"component.legendContinuousSize":o0,"interaction.event":z0,"composition.mark":u0,"composition.view":h0,"shape.label.label":D0}),e),r=function(e){if("string"!=typeof e)return e;var r="".concat(t,".").concat(e);return n[r]||eH("Unknown Component: ".concat(r))};return[function(t,e){var n=t.type,i=B0(t,["type"]);n||eH("Plot type is required!");var a=r(n);return null==a?void 0:a(i,e)},r]}function W0(t){var e=t.canvas,n=t.group;return(null==e?void 0:e.document)||(null==n?void 0:n.ownerDocument)||eH("Cannot find library document")}var V0=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},H0=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Y0(t,e,n){return V0(this,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h,p;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,U0(t,e,n);case 2:if(i=r.sent,a=g(i,2),o=a[0],s=a[1],u=s.encode,c=s.scale,l=s.data,f=s.tooltip,!1!==Array.isArray(l)){r.next=9;break}return r.abrupt("return",null);case 9:return d=e.channels,h=HV(Object.entries(u).filter((function(t){return rH(g(t,2)[1])})),(function(t){return t.map((function(t){var e=g(t,2),n=e[0],r=e[1];return Object.assign({name:n},r)}))}),(function(t){var e,n=g(t,1)[0],r=null===(e=/([^\d]+)\d*$/.exec(n))||void 0===e?void 0:e[1],i=d.find((function(t){return t.name===r}));return(null==i?void 0:i.independent)?n:r})),p=d.filter((function(t){var e=t.name,n=t.required;if(h.find((function(t){return g(t,1)[0]===e})))return!0;if(n)throw new Error("Missing encoding for channel: ".concat(e,"."));return!1})).flatMap((function(t){var e=t.name,n=t.scale,r=t.scaleKey,i=t.range,a=t.quantitative,o=t.ordinal;return h.filter((function(t){return g(t,1)[0].startsWith(e)})).map((function(t,e){var s=g(t,2),u=s[0],l=s[1],f=l.some((function(t){return t.visual})),d=l.some((function(t){return t.constant})),h=c[u]||{},p=h.independent,v=void 0!==p&&p,y=h.key,m=void 0===y?r||u:y,b=h.type,x=void 0===b?d?"constant":f?"identity":n:b,w=H0(h,["independent","key","type"]),k="constant"===x,E=k?void 0:i;return{name:u,values:l,scaleKey:v||k?Symbol("independent"):m,scale:Object.assign(Object.assign({type:x,range:E},w),{quantitative:a,ordinal:o})}}))})),r.abrupt("return",[s,Object.assign(Object.assign({},e),{index:o,channels:p,tooltip:f})]);case 13:case"end":return r.stop()}}),r)})))}function U0(t,e,n){return V0(this,void 0,void 0,Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h,p,v,y,m,b,x,w,k;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=n.library,a=G0("transform",i),o=g(a,1),s=o[0],u=e.preInference,c=void 0===u?[]:u,l=e.postInference,f=void 0===l?[]:l,d=t.transform,h=void 0===d?[]:d,p=[W5,V5,H5,Y5,U5,q5,$5,Q5,Z5,X5].concat(M(c.map(s)),M(h.map(s)),M(f.map(s)),[K5]),v=[],y=t,m=nr(p),r.prev=8,m.s();case 10:if((b=m.n()).done){r.next=20;break}return x=b.value,r.next=14,x(v,y,n);case 14:w=r.sent,k=g(w,2),v=k[0],y=k[1];case 18:r.next=10;break;case 20:r.next=25;break;case 22:r.prev=22,r.t0=r.catch(8),m.e(r.t0);case 25:return r.prev=25,m.f(),r.finish(25);case 28:return r.abrupt("return",[v,y]);case 29:case"end":return r.stop()}}),r,null,[[8,22,25,28]])})))}function q0(t){var e=t.type,n=t.value;return"field"===e&&"string"==typeof n?n:null}function X0(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}const K0=X0("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),$0=X0("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Z0=X0("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Q0=X0("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),J0=X0("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),t1=X0("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),e1=X0("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),n1=X0("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),r1=X0("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),i1=X0("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),a1=X0("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function o1(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function s1(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function u1(){}var c1=.7,l1=1/c1,f1="\\s*([+-]?\\d+)\\s*",d1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",h1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",p1=/^#([0-9a-f]{3,8})$/,v1=new RegExp("^rgb\\(".concat(f1,",").concat(f1,",").concat(f1,"\\)$")),g1=new RegExp("^rgb\\(".concat(h1,",").concat(h1,",").concat(h1,"\\)$")),y1=new RegExp("^rgba\\(".concat(f1,",").concat(f1,",").concat(f1,",").concat(d1,"\\)$")),m1=new RegExp("^rgba\\(".concat(h1,",").concat(h1,",").concat(h1,",").concat(d1,"\\)$")),b1=new RegExp("^hsl\\(".concat(d1,",").concat(h1,",").concat(h1,"\\)$")),x1=new RegExp("^hsla\\(".concat(d1,",").concat(h1,",").concat(h1,",").concat(d1,"\\)$")),w1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function k1(){return this.rgb().formatHex()}function E1(){return this.rgb().formatRgb()}function O1(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=p1.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?S1(e):3===n?new P1(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?M1(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?M1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=v1.exec(t))?new P1(e[1],e[2],e[3],1):(e=g1.exec(t))?new P1(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=y1.exec(t))?M1(e[1],e[2],e[3],e[4]):(e=m1.exec(t))?M1(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=b1.exec(t))?j1(e[1],e[2]/100,e[3]/100,1):(e=x1.exec(t))?j1(e[1],e[2]/100,e[3]/100,e[4]):w1.hasOwnProperty(t)?S1(w1[t]):"transparent"===t?new P1(NaN,NaN,NaN,0):null}function S1(t){return new P1(t>>16&255,t>>8&255,255&t,1)}function M1(t,e,n,r){return r<=0&&(t=e=n=NaN),new P1(t,e,n,r)}function T1(t){return t instanceof u1||(t=O1(t)),t?new P1((t=t.rgb()).r,t.g,t.b,t.opacity):new P1}function A1(t,e,n,r){return 1===arguments.length?T1(t):new P1(t,e,n,null==r?1:r)}function P1(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function N1(){return"#".concat(R1(this.r)).concat(R1(this.g)).concat(R1(this.b))}function C1(){var t=_1(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(L1(this.r),", ").concat(L1(this.g),", ").concat(L1(this.b)).concat(1===t?")":", ".concat(t,")"))}function _1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function L1(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function R1(t){return((t=L1(t))<16?"0":"")+t.toString(16)}function j1(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new I1(t,e,n,r)}function D1(t){if(t instanceof I1)return new I1(t.h,t.s,t.l,t.opacity);if(t instanceof u1||(t=O1(t)),!t)return new I1;if(t instanceof I1)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new I1(o,s,u,t.opacity)}function I1(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function F1(t){return(t=(t||0)%360)<0?t+360:t}function z1(t){return Math.max(0,Math.min(1,t||0))}function B1(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function G1(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}o1(u1,O1,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:k1,formatHex:k1,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return D1(this).formatHsl()},formatRgb:E1,toString:E1}),o1(P1,A1,s1(u1,{brighter:function(t){return t=null==t?l1:Math.pow(l1,t),new P1(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?c1:Math.pow(c1,t),new P1(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new P1(L1(this.r),L1(this.g),L1(this.b),_1(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:N1,formatHex:N1,formatHex8:function(){return"#".concat(R1(this.r)).concat(R1(this.g)).concat(R1(this.b)).concat(R1(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:C1,toString:C1})),o1(I1,(function(t,e,n,r){return 1===arguments.length?D1(t):new I1(t,e,n,null==r?1:r)}),s1(u1,{brighter:function(t){return t=null==t?l1:Math.pow(l1,t),new I1(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?c1:Math.pow(c1,t),new I1(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new P1(B1(t>=240?t-240:t+120,i,r),B1(t,i,r),B1(t<120?t+240:t-120,i,r),this.opacity)},clamp:function(){return new I1(F1(this.h),z1(this.s),z1(this.l),_1(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=_1(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(F1(this.h),", ").concat(100*z1(this.s),"%, ").concat(100*z1(this.l),"%").concat(1===t?")":", ".concat(t,")"))}}));const W1=function(t){return function(){return t}};function V1(t,e){return function(n){return t+n*e}}function H1(t,e){var n=e-t;return n?V1(t,n):W1(isNaN(t)?e:t)}function Y1(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=A1(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}!function t(e){var n=function(t){return 1===(t=+t)?H1:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):W1(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=A1(t)).r,(e=A1(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=H1(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);var U1=Y1((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return G1((n-r/e)*e,o,i,a,s)}}));Y1((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return G1((n-r/e)*e,i,a,o,s)}}));const q1=function(t){return U1(t[t.length-1])};var X1=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(X0);const K1=q1(X1);var $1=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(X0);const Z1=q1($1);var Q1=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(X0);const J1=q1(Q1);var t2=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(X0);const e2=q1(t2);var n2=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(X0);const r2=q1(n2);var i2=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(X0);const a2=q1(i2);var o2=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(X0);const s2=q1(o2);var u2=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(X0);const c2=q1(u2);var l2=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(X0);const f2=q1(l2);var d2=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(X0);const h2=q1(d2);var p2=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(X0);const v2=q1(p2);var g2=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(X0);const y2=q1(g2);var m2=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(X0);const b2=q1(m2);var x2=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(X0);const w2=q1(x2);var k2=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(X0);const E2=q1(k2);var O2=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(X0);const S2=q1(O2);var M2=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(X0);const T2=q1(M2);var A2=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(X0);const P2=q1(A2);var N2=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(X0);const C2=q1(N2);var _2=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(X0);const L2=q1(_2);var R2=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(X0);const j2=q1(R2);var D2=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(X0);const I2=q1(D2);var F2=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(X0);const z2=q1(F2);var B2=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(X0);const G2=q1(B2);var W2=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(X0);const V2=q1(W2);var H2=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(X0);const Y2=q1(H2);var U2=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(X0);const q2=q1(U2);function X2(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}var K2=Math.PI/180,$2=180/Math.PI,Z2=-.29227,Q2=-.90649,J2=1.97294,t3=-1.7884503806,e3=3.5172982438,n3=-.6557636667999999;function r3(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof i3)return new i3(t.h,t.s,t.l,t.opacity);t instanceof P1||(t=T1(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(n3*r+t3*e-e3*n)/(n3+t3-e3),a=r-i,o=(J2*(n-i)-Z2*a)/Q2,s=Math.sqrt(o*o+a*a)/(J2*i*(1-i)),u=s?Math.atan2(o,a)*$2-120:NaN;return new i3(u<0?u+360:u,s,i,t.opacity)}(t):new i3(t,e,n,null==r?1:r)}function i3(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function a3(t){return function e(n){function r(e,r){var i=t((e=r3(e)).h,(r=r3(r)).h),a=H1(e.s,r.s),o=H1(e.l,r.l),s=H1(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}o1(i3,r3,s1(u1,{brighter:function(t){return t=null==t?l1:Math.pow(l1,t),new i3(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?c1:Math.pow(c1,t),new i3(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*K2,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new P1(255*(e+n*(-.14861*r+1.78277*i)),255*(e+n*(Z2*r+Q2*i)),255*(e+n*(J2*r)),this.opacity)}})),a3((function(t,e){var n=e-t;return n?V1(t,n>180||n<-180?n-360*Math.round(n/360):n):W1(isNaN(t)?e:t)}));var o3=a3(H1);const s3=o3(r3(300,.5,0),r3(-240,.5,1));var u3=o3(r3(-100,.75,.35),r3(80,1.5,.8)),c3=o3(r3(260,.75,.35),r3(80,1.5,.8)),l3=r3();function f3(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return l3.h=360*t-100,l3.s=1.5-1.5*e,l3.l=.8-.9*e,l3+""}var d3=A1(),h3=Math.PI/3,p3=2*Math.PI/3;function v3(t){var e;return t=(.5-t)*Math.PI,d3.r=255*(e=Math.sin(t))*e,d3.g=255*(e=Math.sin(t+h3))*e,d3.b=255*(e=Math.sin(t+p3))*e,d3+""}function g3(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function y3(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const m3=y3(X0("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var b3=y3(X0("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),x3=y3(X0("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),w3=y3(X0("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function k3(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t?e.reduce((function(t,e){return function(n){return e(t(n))}}),t):Df}function E3(t){return t instanceof Float32Array||t instanceof Array}var O3=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},S3=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function M3(t,e,n){for(;t<e;)t+=2*Math.PI;for(;t>n;)t-=2*Math.PI;return t}var T3=function(t,e,n,r,i){var a=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}(t,2),o=a[0],s=a[1];return function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}(ae(),[o,s])},A3=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},P3=function(t,e,n,r,i){var a=new TM({range:[e,e+r]}),o=new TM({range:[n,n+i]});return{transform:function(t){var e=A3(t,2),n=e[0],r=e[1];return[a.map(n),o.map(r)]},untransform:function(t){var e=A3(t,2),n=e[0],r=e[1];return[a.invert(n),o.invert(r)]}}},N3=function(t,e,n,r,i){return(0,function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}(t,1)[0])(e,n,r,i)},C3=function(t,e,n,r,i){var a=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}(t,1)[0];return a},_3=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},L3=function(t,e,n,r,i){var a=_3(t,4),o=a[0],s=a[1],u=a[2],c=a[3],l=new TM({range:[u,c]}),f=new TM({range:[o,s]}),d=i/r,h=d>1?1:d,p=d>1?1/d:1;return{transform:function(t){var e=_3(t,2),n=e[0],r=e[1],i=f.map(n),a=l.map(r);return[a*Math.cos(i)*h*.5+.5,a*Math.sin(i)*p*.5+.5]},untransform:function(t){var e=_3(t,2),n=e[0],r=e[1],i=2*(n-.5)/h,a=2*(r-.5)/p,u=Math.sqrt(Math.pow(i,2)+Math.pow(a,2)),c=M3(Math.atan2(a,i),o,s);return[f.invert(c),l.invert(u)]}}},R3=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},j3=function(t,e,n,r,i){return{transform:function(t){var e=R3(t,2),n=e[0];return[e[1],n]},untransform:function(t){var e=R3(t,2),n=e[0];return[e[1],n]}}},D3=function(t,e,n,r,i){var a=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}(t,2),o=a[0],s=a[1];return function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}(ae(),[o,s])},I3=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},F3=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},z3=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return D3.apply(void 0,F3([[-1,-1]],I3(e),!1))},B3=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return D3.apply(void 0,F3([[-1,1]],I3(e),!1))},G3=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return D3.apply(void 0,F3([[1,-1]],I3(e),!1))},W3=function(t,e,n,r,i){var a=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}(t,1)[0];return function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}(ae(),a)},V3=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},H3=function(t,e,n,r,i){var a=V3(t,4),o=a[0],s=a[1],u=a[2],c=(a[3]-u)/((s-0)/(2*Math.PI)+1),l=c/(2*Math.PI),f=new TM({range:[u,u+.99*c]}),d=new TM({range:[o,s]}),h=i/r,p=h>1?1:h,v=h>1?1/h:1;return{transform:function(t){var e=V3(t,2),n=e[0],r=e[1],i=d.map(n),a=f.map(r);return[Math.cos(i)*(l*i+a)*p*.5+.5,Math.sin(i)*(l*i+a)*v*.5+.5]},untransform:function(t){var e=V3(t,2),n=e[0],r=e[1],i=2*(n-.5)/p,a=2*(r-.5)/v,u=Math.sqrt(Math.pow(i,2)+Math.pow(a,2)),h=M3(Math.atan2(a,i)+Math.floor(u/c)*Math.PI*2,o,s),g=u-l*h;return[d.invert(h),f.invert(g)]}}},Y3=function(t,e,n,r,i){var a=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}(t,4),o=a[0],s=a[1],u=a[2],c=a[3],l=new TM({range:[u,c]});return{transform:function(t){for(var e=[],n=t.length,r=new AK({domain:new Array(n).fill(0).map((function(t,e){return e})),range:[o,s]}),i=0;i<n;i++){var a=t[i],u=r.map(i),c=l.map(a);e.push(u,c)}return e},untransform:function(t){for(var e=[],n=0;n<t.length;n+=2){var r=t[n+1];e.push(l.invert(r))}return e}}},U3=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};function q3(t){return 1/Math.tan(t)}var X3=function(t,e,n,r,i){var a=q3(U3(t,1)[0]);return{transform:function(t){var e=U3(t,2),n=e[0],r=e[1];return[n+r*a,r]},untransform:function(t){var e=U3(t,2),n=e[0],r=e[1];return[n-r*a,r]}}},K3=function(t,e,n,r,i){var a=q3(U3(t,1)[0]);return{transform:function(t){var e=U3(t,2),n=e[0];return[n,e[1]+n*a]},untransform:function(t){var e=U3(t,2),n=e[0];return[n,e[1]-n*a]}}},$3=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};function Z3(t,e,n,r,i){var a=t<e,o=(a?e-r:i-e)||i-r,s=a?-1:1;return s*o*(n+1)/(n+o/((t-e)*s))+e}function Q3(t,e,n,r,i){var a=t<e,o=(a?e-r:i-e)||i-r;return o/(o*(n+1)/(t-e)-n*(a?-1:1))+e}function J3(t,e,n){return n?new TM({range:[0,1],domain:[0,e]}).map(t):t}var t5=function(t,e,n,r,i){var a=$3(t,3),o=a[0],s=a[1],u=a[2],c=J3(o,r,void 0!==u&&u);return{transform:function(t){var e=$3(t,2),n=e[0],r=e[1];return[Z3(n,c,s,0,1),r]},untransform:function(t){var e=$3(t,2),n=e[0],r=e[1];return[Q3(n,c,s,0,1),r]}}},e5=function(t,e,n,r,i){var a=$3(t,3),o=a[0],s=a[1],u=a[2],c=J3(o,i,void 0!==u&&u);return{transform:function(t){var e=$3(t,2);return[e[0],Z3(e[1],c,s,0,1)]},untransform:function(t){var e=$3(t,2);return[e[0],Q3(e[1],c,s,0,1)]}}},n5=function(t,e,n,r,i){var a=$3(t,5),o=a[0],s=a[1],u=a[2],c=a[3],l=a[4],f=void 0!==l&&l,d=J3(o,r,f),h=J3(s,i,f);return{transform:function(t){var e=$3(t,2),n=e[0],r=e[1];return[Z3(n,d,u,0,1),Z3(r,h,c,0,1)]},untransform:function(t){var e=$3(t,2),n=e[0],r=e[1];return[Q3(n,d,u,0,1),Q3(r,h,c,0,1)]}}},r5=function(t,e,n,r,i){var a=$3(t,5),o=a[0],s=a[1],u=a[2],c=a[3],l=a[4],f=void 0!==l&&l,d=new TM({range:[0,r]}),h=new TM({range:[0,i]}),p=f?o:d.map(o),v=f?s:h.map(s);return{transform:function(t){var e=$3(t,2),n=e[0],r=e[1],i=d.map(n)-p,a=h.map(r)-v,o=Math.sqrt(i*i+a*a);if(o>u)return[n,r];var s=Z3(o,0,c,0,u),l=Math.atan2(a,i),f=p+s*Math.cos(l),g=v+s*Math.sin(l);return[d.invert(f),h.invert(g)]},untransform:function(t){var e=$3(t,2),n=e[0],r=e[1],i=d.map(n)-p,a=h.map(r)-v,o=Math.sqrt(i*i+a*a);if(o>u)return[n,r];var s=Q3(o,0,c,0,u),l=Math.atan2(a,i),f=p+s*Math.cos(l),g=v+s*Math.sin(l);return[d.invert(f),h.invert(g)]}}},i5=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},a5=function(t,e,n,r,i,a,o){var s=new TM({range:[e,e+i]}),u=new TM({range:[n,n+a]}),c=new TM({range:[r,r+o]});return{transform:function(t){var e=i5(t,3),n=e[0],r=e[1],i=e[2];return[s.map(n),u.map(r),c.map(i)]},untransform:function(t){var e=i5(t,3),n=e[0],r=e[1],i=e[2];return[s.invert(n),u.invert(r),c.invert(i)]}}},o5=function(t,e,n,r,i,a,o){var s=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}(t,3),u=s[0],c=s[1],l=s[2];return St(ut(),[u,c,l])},s5=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},u5=function(t,e,n,r,i,a,o){return{transform:function(t){var e=s5(t,3),n=e[0];return[e[1],n,e[2]]},untransform:function(t){var e=s5(t,3),n=e[0];return[e[1],n,e[2]]}}},c5=function(t,e,n,r,i,a,o){var s=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}(t,3),u=s[0],c=s[1],l=s[2];return Mt(ut(),[u,c,l])},l5=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},f5=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},d5=function(){function t(t){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:P3,translate:T3,custom:N3,matrix:C3,polar:L3,transpose:j3,scale:D3,"shear.x":X3,"shear.y":K3,reflect:z3,"reflect.x":B3,"reflect.y":G3,rotate:W3,helix:H3,parallel:Y3,fisheye:n5,"fisheye.x":t5,"fisheye.y":e5,"fisheye.circular":r5},this.update(t)}return t.prototype.update=function(t){this.options=jf({},this.options,t),this.recoordinate()},t.prototype.clone=function(){return new t(this.options)},t.prototype.getOptions=function(){return this.options},t.prototype.clear=function(){this.update({transformations:[]})},t.prototype.getSize=function(){var t=this.options;return[t.width,t.height]},t.prototype.getCenter=function(){var t=this.options,e=t.x,n=t.y;return[(2*e+t.width)/2,(2*n+t.height)/2]},t.prototype.transform=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.options.transformations;return this.update({transformations:f5(f5([],l5(n),!1),[f5([],l5(t),!1)],!1)}),this},t.prototype.map=function(t){return this.output(t)},t.prototype.invert=function(t){return this.input(t)},t.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},t.prototype.compose=function(t){var e,n;void 0===t&&(t=!1);var r=t?f5([],l5(this.options.transformations),!1).reverse():this.options.transformations,i=t?function(t){return t.untransform}:function(t){return t.transform},a=[],o=[],s=function(t,e){return void 0===e&&(e=!0),o.push(e?function(t){return function(e){for(var n=[],r=0;r<e.length-1;r+=2){var i=[e[r],e[r+1]],a=t(i);n.push.apply(n,S3([],O3(a),!1))}return n}}(t):t)};try{for(var u=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),c=u.next();!c.done;c=u.next()){var l=l5(c.value),f=l[0],d=l.slice(1),h=this.transformers[f];if(h){var p=this.options,v=p.x,g=p.y,y=p.width,m=p.height,b=h(f5([],l5(d),!1),v,g,y,m);E3(b)?a.push(b):(a.length&&(s(this.createMatrixTransform(a,t)),a.splice(0,a.length)),s(i(b)||Df,"parallel"!==f))}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a.length&&s(this.createMatrixTransform(a,t)),k3.apply(void 0,f5([],l5(o),!1))},t.prototype.createMatrixTransform=function(t,e){var n,r,i=ae();return e&&t.reverse(),t.forEach((function(t){return e=i,r=t,a=(n=i)[0],o=n[1],s=n[2],u=n[3],c=n[4],l=n[5],f=n[6],d=n[7],h=n[8],p=r[0],v=r[1],g=r[2],y=r[3],m=r[4],b=r[5],x=r[6],w=r[7],k=r[8],e[0]=p*a+v*u+g*f,e[1]=p*o+v*c+g*d,e[2]=p*s+v*l+g*h,e[3]=y*a+m*u+b*f,e[4]=y*o+m*c+b*d,e[5]=y*s+m*l+b*h,e[6]=x*a+w*u+k*f,e[7]=x*o+w*c+k*d,e[8]=x*s+w*l+k*h,e;var e,n,r,a,o,s,u,c,l,f,d,h,p,v,g,y,m,b,x,w,k})),e&&function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=l*o-s*c,d=-l*a+s*u,h=c*a-o*u,p=n*f+r*d+i*h;p&&(p=1/p,t[0]=f*p,t[1]=(-l*r+i*c)*p,t[2]=(s*r-i*o)*p,t[3]=d*p,t[4]=(l*n-i*u)*p,t[5]=(-s*n+i*a)*p,t[6]=h*p,t[7]=(-c*n+r*u)*p,t[8]=(o*n-r*a)*p)}(i,(n=i,(r=new j(9))[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r)),function(t){var e=[t[0],t[1],1];return J(e,e,i),[e[0],e[1]]}},t}(),h5=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},p5=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},v5=function(){function t(t){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:a5,translate3D:o5,scale3D:c5,transpose3D:u5},this.update(t)}return t.prototype.update=function(t){this.options=jf({},this.options,t),this.recoordinate()},t.prototype.clone=function(){return new t(this.options)},t.prototype.getOptions=function(){return this.options},t.prototype.clear=function(){this.update({transformations:[]})},t.prototype.getSize=function(){var t=this.options;return[t.width,t.height,t.depth]},t.prototype.getCenter=function(){var t=this.options,e=t.x,n=t.y,r=t.z;return[(2*e+t.width)/2,(2*n+t.height)/2,(2*r+t.depth)/2]},t.prototype.transform=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.options.transformations;return this.update({transformations:p5(p5([],h5(n),!1),[p5([],h5(t),!1)],!1)}),this},t.prototype.map=function(t){return this.output(t)},t.prototype.invert=function(t){return this.input(t)},t.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},t.prototype.compose=function(t){var e,n;void 0===t&&(t=!1);var r=t?p5([],h5(this.options.transformations),!1).reverse():this.options.transformations,i=t?function(t){return t.untransform}:function(t){return t.transform},a=[],o=[],s=function(t,e){return void 0===e&&(e=!0),o.push(e?function(t){return function(e){for(var n=[],r=0;r<e.length-1;r+=3){var i=[e[r],e[r+1],e[r+2]],a=t(i);n.push.apply(n,S3([],O3(a),!1))}return n}}(t):t)};try{for(var u=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),c=u.next();!c.done;c=u.next()){var l=h5(c.value),f=l[0],d=l.slice(1),h=this.transformers[f];if(h){var p=this.options,v=p.x,g=p.y,y=p.z,m=p.width,b=p.height,x=p.depth,w=h(p5([],h5(d),!1),v,g,y,m,b,x);E3(w)?a.push(w):(a.length&&(s(this.createMatrixTransform(a,t)),a.splice(0,a.length)),s(i(w)||Df,!0))}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a.length&&s(this.createMatrixTransform(a,t)),k3.apply(void 0,p5([],h5(o),!1))},t.prototype.createMatrixTransform=function(t,e){var n=ut();return e&&t.reverse(),t.forEach((function(t){return re(n,n,t)})),e&&vt(n,ct(n)),function(t){var e=[t[0],t[1],t[2],1];return st(e,e,n),[e[0],e[1],e[2]]}},t}(),g5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function y5(t,e){var n=t.coordinate,r=void 0===n?{}:n,i=t.coordinates,a=g5(t,["coordinate","coordinates"]);if(i)return t;var o=r.type,s=r.transform,u=void 0===s?[]:s,c=g5(r,["type","transform"]);if(!o)return Object.assign(Object.assign({},a),{coordinates:u});var l=((0,g(G0("coordinate",e),2)[1])(o).props||{}).transform;if(void 0!==l&&l)throw new Error("Unknown coordinate: ".concat(o,"."));return Object.assign(Object.assign({},a),{coordinates:[Object.assign({type:o},c)].concat(M(u))})}function m5(t,e){return t.filter((function(t){return t.type===e}))}function b5(t){return m5(t,"polar").length>0}function x5(t){return m5(t,"transpose").length%2==1}function w5(t){return m5(t,"theta").length>0}function k5(t){return m5(t,"radial").length>0}function E5(t,e,n,r,i,a){var s=n.guide,u=void 0===s?{}:s,c=function(t,e,n){var r=n.type,i=n.domain,a=n.range,o=n.quantitative,s=n.ordinal;return void 0!==r?r:function(t){return F5(t,uH)}(e)?"identity":"string"==typeof a?"linear":(i||a||[]).length>2?L5(t,s):void 0!==i?D5([i])?L5(t,s):I5(e)?"time":R5(t,a,o):D5(e)?L5(t,s):I5(e)?"time":R5(t,a,o)}(t,e,n);if("string"!=typeof c)return n;var l=function(t,e,n,r){var i=r.domain;if(void 0!==i)return i;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return j5(function(t,e){var n,r=e.zero,i=void 0!==r&&r,a=1/0,o=-1/0,s=nr(t);try{for(s.s();!(n=s.n()).done;){var u,c=nr(n.value);try{for(c.s();!(u=c.n()).done;){var l=u.value;rH(l)&&(a=Math.min(a,+l),o=Math.max(o,+l))}}catch(t){c.e(t)}finally{c.f()}}}catch(t){s.e(t)}finally{s.f()}return a===1/0?[]:i?[Math.min(0,a),o]:[a,o]}(n,r),r);case"band":case"ordinal":case"point":return function(t){return Array.from(new Set(t.flat()))}(n);case"quantile":return function(t){return t.flat().sort()}(n);case"sequential":return j5(function(t){var e,n=1/0,r=-1/0,i=nr(t);try{for(i.s();!(e=i.n()).done;){var a,o=nr(e.value);try{for(o.s();!(a=o.n()).done;){var s=a.value;rH(s)&&(n=Math.min(n,+s),r=Math.max(r,+s))}}catch(t){o.e(t)}finally{o.f()}}}catch(t){i.e(t)}finally{i.f()}return n===1/0?[]:[n<0?-r:n,r]}(n),r);default:return[]}}(c,0,e,n),f=function(t,e,n){var r=n.ratio;return null==r?e:P5({type:t})?function(t,e,n){var r=t.map(Number),i=new TM({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*e]});return"time"===n?t.map((function(t){return new Date(i.map(t))})):t.map((function(t){return i.map(t)}))}(e,r,t):N5({type:t})?function(t,e){var n=Math.round(t.length*e);return t.slice(0,n)}(e,r):e}(c,l,n);return Object.assign(Object.assign(Object.assign({},n),function(t,e,n,r,i){switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":return function(t,e){var n=e.interpolate,r=void 0===n?hM:n,i=e.nice,a=void 0!==i&&i,o=e.tickCount,s=void 0===o?5:o;return Object.assign(Object.assign({},e),{interpolate:r,nice:a,tickCount:s})}(0,r);case"band":case"point":return function(t,e,n,r){if(void 0!==r.padding||void 0!==r.paddingInner||void 0!==r.paddingOuter)return Object.assign(Object.assign({},r),{unknown:NaN});var i=function(t,e,n){return"enterDelay"===e||"enterDuration"===e||"size"===e?0:"band"===t?w5(n)?0:.1:"point"===t?.5:0}(t,e,n),a=r.paddingInner,o=void 0===a?i:a,s=r.paddingOuter,u=void 0===s?i:s;return Object.assign(Object.assign({},r),{paddingInner:o,paddingOuter:u,padding:i,unknown:NaN})}(t,e,i,r);case"sequential":return function(t){var e=t.palette,n=void 0===e?"ylGnBu":e,r=t.offset,i=ll(n),a=o["interpolate".concat(i)];if(!a)throw new Error("Unknown palette: ".concat(i));return{interpolator:r?function(t){return a(r(t))}:a}}(r);default:return r}}(c,t,0,n,r)),{domain:f,range:C5(c,t,e,n,f,i,a),expectedDomain:l,guide:u,name:t,type:c})}function O5(t,e){for(var n=Object.keys(t),r=function(){var e=a[i],r=e.getOptions().name;if(r in t){var o=n.filter((function(t){return t.startsWith(r)})).map((function(t){return+(t.replace(r,"")||0)})),s=ZX(o)+1,u="".concat(r).concat(s);t[u]=e,e.getOptions().key=u}else t[r]=e},i=0,a=Object.values(e);i<a.length;i++)r();return t}function S5(t,e){var n=g(G0("scale",e),1)[0],r=function(t){return t&&Array.isArray(t)?[function(r){var i;e=r.map.bind(r),n=null===(i=r.invert)||void 0===i?void 0:i.bind(r);var a=t.filter((function(t){return"function"==typeof g(t,1)[0]})),o=t.filter((function(t){return"function"!=typeof g(t,1)[0]})),s=new Map(o);if(r.map=function(t){var n,r=nr(a);try{for(r.s();!(n=r.n()).done;){var i=g(n.value,2),o=i[0],u=i[1];if(o(t))return u}}catch(t){r.e(t)}finally{r.f()}return s.has(t)?s.get(t):e(t)},!n)return r;var u=new Map(o.map((function(t){var e=g(t,2),n=e[0];return[e[1],n]}))),c=new Map(a.map((function(t){var e=g(t,2),n=e[0];return[e[1],n]})));return r.invert=function(t){return c.has(t)?t:u.has(t)?u.get(t):n(t)},r},function(t){return null!==e&&(t.map=e),null!==n&&(t.invert=n),t}]:[ZV,ZV];var e,n}(t.relations);return(0,g(r,1)[0])(n(t))}function M5(t){var e=t.flatMap((function(t){return Array.from(t.values())})).flatMap((function(t){return t.channels.map((function(t){return t.scale}))}));A5(e,"x"),A5(e,"y")}function T5(t){var e=t.channels,n=void 0===e?[]:e,r=t.type,i=t.scale,a=void 0===i?{}:i,o=["shape","color","opacity","size"];return 0!==n.length?n:"axisX"===r?["x"]:"axisY"===r?["y"]:"legends"===r?Object.keys(a).filter((function(t){return o.includes(t)})):[]}function A5(t,e){var n=t.filter((function(t){var n=t.name,r=t.facet;return(void 0===r||r)&&n===e})),r=n.flatMap((function(t){return t.domain})),i=n.every(P5)?EH(r):n.every(N5)?Array.from(new Set(r)):null;if(null!==i){var a,o=nr(n);try{for(o.s();!(a=o.n()).done;)a.value.domain=i}catch(t){o.e(t)}finally{o.f()}}}function P5(t){var e=t.type;return"string"==typeof e&&["linear","log","pow","time"].includes(e)}function N5(t){var e=t.type;return"string"==typeof e&&["band","point","ordinal"].includes(e)}function C5(t,e,n,r,i,a,o){var s=r.range;if("string"==typeof s)return function(t){return t.split("-")}(s);if(void 0!==s)return s;var u=r.rangeMin,c=r.rangeMax;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":var l=function(t,e){return"enterDelay"===t?[0,1e3]:"enterDuration"==t?[300,1e3]:t.startsWith("y")||t.startsWith("position")?[1,0]:"color"===t?[MH(e),TH(e)]:"opacity"===t?[0,1]:"size"===t?[1,10]:[0,1]}(e,_5(0,r,i,a,o)),f=g(l,2),d=f[0],h=f[1];return[null!=u?u:d,null!=c?c:h];case"band":case"point":return[null!=u?u:"size"===e?5:0,null!=c?c:"size"===e?10:1];case"ordinal":return _5(0,r,i,a,o);case"sequential":return;case"constant":return[n[0][0]];default:return[]}}function _5(t,e,n,r,i){var a=g(G0("palette",i),1)[0],s=r.category10,u=r.category20,c=function(t){return Array.from(new Set(t))}(n).length<=s.length?s:u,l=e.palette,f=void 0===l?c:l,d=e.offset;if(Array.isArray(f))return f;try{return a({type:f})}catch(t){var h=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t};if(!t)return null;var r=ll(t),i=o["scheme".concat(r)],a=o["interpolate".concat(r)];if(!i&&!a)return null;if(i){if(!i.some(Array.isArray))return i;var s=i[e.length];if(s)return s}return e.map((function(t,r){return a(n(r/e.length))}))}(f,n,d);if(h)return h;throw new Error("Unknown Component: ".concat(f," "))}}function L5(t,e){return e||(function(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t.startsWith("size")}(t)?"point":"ordinal")}function R5(t,e,n){return n||("color"!==t||e?"linear":"sequential")}function j5(t,e){if(0===t.length)return t;var n=e.domainMin,r=e.domainMax,i=g(t,2),a=i[0],o=i[1];return[null!=n?n:a,null!=r?r:o]}function D5(t){return F5(t,(function(t){var e=typeof t;return"string"===e||"boolean"===e}))}function I5(t){return F5(t,(function(t){return t instanceof Date}))}function F5(t,e){var n,r=nr(t);try{for(r.s();!(n=r.n()).done;)if(n.value.some(e))return!0}catch(t){r.e(t)}finally{r.f()}return!1}var z5=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},B5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},G5=Symbol("CALLBACK_ITEM");function W5(t,e,n){var r=e.encode,i=void 0===r?{}:r,a=e.scale,o=void 0===a?{}:a,s=e.transform,u=void 0===s?[]:s,c=B5(e,["encode","scale","transform"]);return[t,Object.assign(Object.assign({},c),{encode:i,scale:o,transform:u})]}function V5(t,e,n){return z5(this,void 0,void 0,Jn().mark((function t(){var r,i,a,o,s,u,c,l,f,d,h,p,v;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.library,i=e.data,a=G0("data",r),o=g(a,1),s=o[0],u=J5(i),c=u.transform,l=void 0===c?[]:c,f=B5(u,["transform"]),d=[f].concat(M(l)),h=d.map((function(t){return s(t,n)})),t.next=9,JV(h)(i);case 9:return p=t.sent,v=!i||Array.isArray(i)||Array.isArray(p)?p:{value:p},t.abrupt("return",[Array.isArray(p)?SH(p):[],Object.assign(Object.assign({},e),{data:v})]);case 12:case"end":return t.stop()}}),t)})))}function H5(t,e,n){var r=e.encode;if(!r)return[t,e];for(var i={},a=0,o=Object.entries(r);a<o.length;a++){var s=g(o[a],2),u=s[0],c=s[1];if(Array.isArray(c))for(var l=0;l<c.length;l++)i["".concat(u).concat(0===l?"":l)]=c[l];else i[u]=c}return[t,Object.assign(Object.assign({},e),{encode:i})]}function Y5(t,e,n){var r=e.encode,i=e.data;if(!r)return[t,e];var a=OH(r,(function(t){if(function(t){return!("object"!=typeof t||t instanceof Date||null===t)&&rH(t.type)}(t))return t;var e=function(t,e){return"function"==typeof e?"transform":"string"==typeof e&&function(t,e){return!!Array.isArray(t)&&t.some((function(t){return void 0!==t[e]}))}(t,e)?"field":"constant"}(i,t);return{type:e,value:t}}));return[t,Object.assign(Object.assign({},e),{encode:a})]}function U5(t,e,n){var r=e.encode;if(!r)return[t,e];var i=OH(r,(function(t,e){return"constant"!==t.type||function(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||"enterDelay"===t||"enterDuration"===t||"updateDelay"===t||"updateDuration"===t||"exitDelay"===t||"exitDuration"===t}(e)?t:Object.assign(Object.assign({},t),{constant:!0})}));return[t,Object.assign(Object.assign({},e),{encode:i})]}function q5(t,e,n){var r=e.encode,i=e.data;if(!r)return[t,e];var a=function(t){var e=g(G0("encode",t),1)[0];return function(t,n){return void 0===n||void 0===t?null:Object.assign(Object.assign({},n),{type:"column",value:e(n)(t),field:q0(n)})}}(n.library),o=OH(r,(function(t){return a(i,t)}));return[t,Object.assign(Object.assign({},e),{encode:o})]}function X5(t,e,n){var r=e.tooltip,i=void 0===r?{}:r;return cH(i)?[t,e]:Array.isArray(i)?[t,Object.assign(Object.assign({},e),{tooltip:{items:i}})]:uH(i)&&e0(i)?[t,Object.assign(Object.assign({},e),{tooltip:i})]:[t,Object.assign(Object.assign({},e),{tooltip:{items:[i]}})]}function K5(t,e,n){var r=e.data,i=e.encode,a=e.tooltip,o=void 0===a?{}:a;if(cH(o))return[t,e];var s=function(e){if(!e)return e;if("string"==typeof e)return t.map((function(t){return{name:e,value:r[t][e]}}));if(uH(e)){var n,a=e.field,o=e.channel,s=e.color,u=e.name,c=void 0===u?a:u,l=e.valueFormatter,f=void 0===l?function(t){return t}:l,d="string"==typeof f?sZ(f):f,h=o&&i[o],p=h&&i[o].field,v=c||p||o,g=[],y=nr(t);try{for(y.s();!(n=y.n()).done;){var m=n.value,x=a?r[m][a]:h?i[o].value[m]:null;g[m]={name:v,color:s,value:d(x)}}}catch(t){y.e(t)}finally{y.f()}return g}if("function"==typeof e){var w,k=[],E=nr(t);try{for(E.s();!(w=E.n()).done;){var O=w.value,S=e(r[O],O,r,i);uH(S)?k[O]=Object.assign(Object.assign({},S),b({},G5,!0)):k[O]={value:S}}}catch(t){E.e(t)}finally{E.f()}return k}return e},u=o.title,c=o.items,l=void 0===c?[]:c,f=B5(o,["title","items"]),d=Object.assign({title:s(u),items:Array.isArray(l)?l.map(s):[]},f);return[t,Object.assign(Object.assign({},e),{tooltip:d})]}function $5(t,e,n){var r=e.encode,i=B5(e,["encode"]);if(!r)return[t,e];var a=Object.entries(r),o=a.filter((function(t){var e=g(t,2)[1].value;return Array.isArray(e[0])})).flatMap((function(e){for(var n=g(e,2),r=n[0],i=n[1],a=[[r,new Array(t.length).fill(void 0)]],o=i.value,s=B5(i,["value"]),u=0;u<o.length;u++){var c=o[u];if(Array.isArray(c))for(var l=0;l<c.length;l++){var f=a[l]||["".concat(r).concat(l),new Array(t).fill(void 0)];f[1][u]=c[l],a[l]=f}}return a.map((function(t){var e=g(t,2),n=e[0],r=e[1];return[n,Object.assign({type:"column",value:r},s)]}))})),s=Object.fromEntries([].concat(a,M(o)));return[t,Object.assign(Object.assign({},i),{encode:s})]}function Z5(t,e,n){var r=e.axis,i=void 0===r?{}:r,a=e.legend,o=void 0===a?{}:a,s=e.slider,u=void 0===s?{}:s,c=e.scrollbar,l=void 0===c?{}:c,f=function(t,e){if("boolean"==typeof t)return t?{}:null;var n=t[e];return void 0===n||n?n:null},d="object"==typeof i?Array.from(new Set(["x","y","z"].concat(M(Object.keys(i))))):["x","y","z"];return vd(e,{scale:Object.assign(Object.assign({},Object.fromEntries(d.map((function(t){var e=f(l,t);return[t,Object.assign({guide:f(i,t),slider:f(u,t),scrollbar:e},e&&{ratio:void 0===e.ratio?.5:e.ratio})]})))),{color:{guide:f(o,"color")},size:{guide:f(o,"size")},shape:{guide:f(o,"shape")},opacity:{guide:f(o,"opacity")}})}),[t,e]}function Q5(t,e,n){var r=e.animate;return r||void 0===r||vd(e,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[t,e]}function J5(t){if(Oe(t))return{type:"inline",value:t};if(!t)return{type:"inline",value:null};if(Array.isArray(t))return{type:"inline",value:t};var e=t.type,n=void 0===e?"inline":e,r=B5(t,["type"]);return Object.assign(Object.assign({},r),{type:n})}var t6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function e6(t,e){return e?"string"==typeof e?document.querySelector(e):e:t.ownerDocument.defaultView.getContextService().getDomElement().parentElement}function n6(t){var e,n,r,i=t.root,a=t.data,o=t.x,s=t.y,u=t.render,c=t.event,l=t.single,f=t.position,d=void 0===f?"right-bottom":f,h=t.enterable,p=void 0!==h&&h,v=t.css,y=t.mount,m=t.bounding,b=t.offset,x=e6(i,y),w=e6(i),k=l?w:i,E=m||function(t){var e=t.getRenderBounds(),n=g(e.min,2),r=n[0],i=n[1],a=g(e.max,2);return{x:r,y:i,width:a[0]-r,height:a[1]-i}}(i),O=(e=x,n=w.getBoundingClientRect(),r=e.getBoundingClientRect(),{x:n.x-r.x,y:n.y-r.y}),S=k.tooltipElement,M=void 0===S?function(t,e,n,r,i,a,o){var s=new XT({className:"tooltip",style:{x:e,y:n,container:o,data:[],bounding:a,position:r,enterable:i,title:"",offset:arguments.length>8&&void 0!==arguments[8]?arguments[8]:[10,10],template:{prefixCls:"g2-"},style:vd({".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},arguments.length>7&&void 0!==arguments[7]?arguments[7]:{})}});return t.appendChild(s.HTMLTooltipElement),s}(x,o,s,d,p,E,O,v,b):S,T=a.items,A=a.title,P=void 0===A?"":A;M.update(Object.assign({x:o,y:s,data:T,title:P,position:d,enterable:p,container:O},void 0!==u&&{content:u(c,{items:T,title:P})})),k.tooltipElement=M}function r6(t){var e=t.root,n=t.single,r=t.emitter,i=t.nativeEvent,a=void 0===i||i,o=t.event,s=void 0===o?null:o;a&&r.emit("tooltip:hide",{nativeEvent:a});var u=e6(e),c=(n?u:e).tooltipElement;c&&c.hide(null==s?void 0:s.clientX,null==s?void 0:s.clientY),c6(e),l6(e),f6(e)}function i6(t){var e=t.root,n=t.single,r=e6(e),i=n?r:e;if(i){var a=i.tooltipElement;a&&(a.destroy(),i.tooltipElement=void 0),c6(e),l6(e),f6(e)}}function a6(t){var e=t.value;return Object.assign(Object.assign({},t),{value:void 0===e?"undefined":e})}function o6(t){var e=t.getAttribute("fill"),n=t.getAttribute("stroke"),r=t.__data__.color;return void 0===r?e&&"transparent"!==e?e:n:r}function s6(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},n=new Map(t.map((function(t){return[e(t),t]})));return Array.from(n.values())}function u6(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.map((function(t){return t.__data__})),i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=function(t){return t instanceof Date?+t:t},o=s6(r.map((function(t){return t.title})),a).filter(rH),s=r.flatMap((function(r,a){var o=t[a],s=r.items,u=void 0===s?[]:s,c=r.title,l=u.filter(rH),f=void 0!==n?n:u.length<=1;return l.map((function(t){var n=t.color,a=void 0===n?o6(o)||i.color:n,s=t.name,u=t6(t,["color","name"]),l=$V(e,r),d=f&&!(G5 in u)?l||s:s||l;return Object.assign(Object.assign({},u),{color:a,name:d||c})}))})).map(a6);return Object.assign(Object.assign({},o.length>0&&{title:o.join(",")}),{items:s6(s,(function(t){return"(".concat(a(t.name),", ").concat(a(t.value),", ").concat(a(t.color),")")}))})}function c6(t){t.ruleY&&(t.ruleY.remove(),t.ruleY=void 0)}function l6(t){t.ruleX&&(t.ruleX.remove(),t.ruleX=void 0)}function f6(t){t.markers&&(t.markers.forEach((function(t){return t.remove()})),t.markers=[])}function d6(t,e){return Array.from(t.values()).some((function(t){var n;return null===(n=t.interaction)||void 0===n?void 0:n[e]}))}function h6(t,e){return void 0===t?e:t}function p6(t){var e=t.title;return 0===t.items.length&&void 0===e}function v6(t,e){var n,r=e.elements,i=e.sort,a=e.filter,o=e.scale,s=e.coordinate,u=e.crosshairs,c=e.crosshairsX,l=e.crosshairsY,f=e.render,d=e.groupName,h=e.emitter,p=e.wait,v=void 0===p?50:p,y=e.leading,m=void 0===y||y,b=e.trailing,x=void 0!==b&&b,w=e.startX,k=void 0===w?0:w,E=e.startY,O=void 0===E?0:E,S=e.body,T=void 0===S||S,A=e.single,P=void 0===A||A,N=e.position,C=e.enterable,_=e.mount,L=e.bounding,R=e.theme,j=e.offset,D=e.disableNative,I=void 0!==D&&D,F=e.marker,z=void 0===F||F,B=e.preserve,G=void 0!==B&&B,W=e.style,V=void 0===W?{}:W,H=e.css,Y=void 0===H?{}:H,U=t6(e,["elements","sort","filter","scale","coordinate","crosshairs","crosshairsX","crosshairsY","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","offset","disableNative","marker","preserve","style","css"]),q=r(t),X=sD(s),K=uD(s),$=vd(V,U),Z=s.getOptions(),Q=Z.innerWidth,J=Z.innerHeight,tt=Z.width,et=Z.height,nt=Z.insetLeft,rt=Z.insetTop,it=[],at=[],ot=nr(q);try{for(ot.s();!(n=ot.n()).done;){var st=n.value,ut=st.__data__,ct=ut.seriesX,lt=ut.title,ft=ut.items;ct?it.push(st):(lt||ft)&&at.push(st)}}catch(t){ot.e(t)}finally{ot.f()}var dt=at.length&&at.every((function(t){return"interval"===t.markType}))&&!uD(s),ht=function(t){return t.__data__.x},pt=!!o.x.getBandWidth&&at.length>0;it.sort((function(t,e){var n=X?0:1,r=function(t){return t.getBounds().min[n]};return X?r(e)-r(t):r(t)-r(e)}));var vt=function(t){var e=X?1:0,n=t.getLocalBounds(),r=n.min,i=n.max;return dQ([r[e],i[e]])};dt?q.sort((function(t,e){return ht(t)-ht(e)})):at.sort((function(t,e){var n=g(vt(t),2),r=n[0],i=n[1],a=g(vt(e),2),o=(r+i)/2,s=(a[0]+a[1])/2;return X?s-o:o-s}));var gt=new Map(it.map((function(t){var e=t.__data__.seriesX;return[t,[dQ(e.map((function(t,e){return e})),(function(t){return e[+t]})),e]]}))),yt=o.x,mt=(null==yt?void 0:yt.getBandWidth)?yt.getBandWidth()/2:0,bt=function(t){return g(s.invert(t),1)[0]-mt},xt=function(t,e,n,r){var i=t._x,a=void 0!==i?yt.map(i):bt(e),o=r.filter(rH),s=g(dQ([o[0],o[o.length-1]]),2),u=s[0],c=s[1];return!pt&&(a<u||a>c)&&u!==c?null:n[(0,nQ((function(t){return r[+t]})).center)(n,a)]},wt=dt?function(t,e){var n=e[(0,nQ(ht).center)(e,bt(t))];return GV(e,ht).get(ht(n))}:function(t,e){var n=t[X?1:0],r=e.filter((function(t){var e=g(vt(t),2),r=e[0],i=e[1];return n>=r&&n<=i}));if(!pt||r.length>0)return r;var i=nQ((function(t){var e=g(vt(t),2);return(e[0]+e[1])/2})).center;return[e[i(e,n)]].filter(rH)},kt=function(t,e){var n=t.__data__;return Object.fromEntries(Object.entries(n).filter((function(t){var e=g(t,1)[0];return e.startsWith("series")&&"series"!==e})).map((function(t){var n=g(t,2),r=n[0],i=n[1][e];return[fh(r.replace("series","")),i]})))},Et=Ql((function(e){var n,r=bJ(t,e);if(r){var p=mJ(t),v=p.min[0],y=p.min[1],m=[r[0]-k,r[1]-O];if(m){for(var b=wt(m,at),x=[],w=[],E=0,S=it;E<S.length;E++){var A=S[E],D=g(gt.get(A),2),I=D[0],F=D[1],B=xt(e,m,I,F);if(null!==B){x.push(A);var G=kt(A,B),W=G.x,V=G.y,H=s.map([(W||0)+mt,V||0]);w.push([Object.assign(Object.assign({},G),{element:A}),H])}}var U=Array.from(new Set(w.map((function(t){return t[0].x})))),q=U[ZJ(U,(function(t){return Math.abs(t-bt(m))}))],Z=w.filter((function(t){return t[0].x===q})),ot=[].concat(M(Z.map((function(t){return t[0]}))),M(b.map((function(t){return t.__data__})))),st=[].concat(x,M(b)),ut=u6(st,o,d,ot,R);if(i&&ut.items.sort((function(t,e){return i(t)-i(e)})),a&&(ut.items=ut.items.filter(a)),0===st.length||p6(ut))Ot(e);else{if(T&&n6({root:t,data:ut,x:r[0]+v,y:r[1]+y,render:f,event:e,single:P,position:N,enterable:C,mount:_,bounding:L,css:Y,offset:j}),u||c||l){var ct=iH($,"crosshairs"),lt=Object.assign(Object.assign({},ct),iH($,"crosshairsX")),ft=Object.assign(Object.assign({},ct),iH($,"crosshairsY")),dt=Z.map((function(t){return t[1]}));c&&function(t,e,n,r){var i=r.plotWidth,a=r.plotHeight,o=r.mainWidth,s=r.mainHeight,u=r.startX,c=r.startY,l=r.transposed,f=r.polar,d=r.insetLeft,h=r.insetTop,p=t6(r,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]),v=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},p),y=function(t,e){if(1===e.length)return e[0];var n=e.map((function(e){return vH(e,t)})),r=ZJ(n,(function(t){return t}));return e[r]}(n,e);if(f){var m=function(){var t=u+d+o/2,e=c+h+s/2;return[t,e,vH([t,e],y)]}(),b=g(m,3),x=b[0],w=b[1],k=b[2],E=t.ruleX||function(e,n,r){var i=new sW({style:Object.assign({cx:e,cy:n,r},v)});return t.appendChild(i),i}(x,w,k);E.style.cx=x,E.style.cy=w,E.style.r=k,t.ruleX=E}else{var O=g(l?[u+y[0],u+y[0],c,c+a]:[u,u+i,y[1]+c,y[1]+c],4),S=O[0],M=O[1],T=O[2],A=O[3],P=t.ruleX||function(e,n,r,i){var a=new gW({style:Object.assign({x1:e,x2:n,y1:r,y2:i},v)});return t.appendChild(a),a}(S,M,T,A);P.style.x1=S,P.style.x2=M,P.style.y1=T,P.style.y2=A,t.ruleX=P}}(t,dt,r,Object.assign(Object.assign({},lt),{plotWidth:Q,plotHeight:J,mainWidth:tt,mainHeight:et,insetLeft:nt,insetTop:rt,startX:k,startY:O,transposed:X,polar:K})),l&&function(t,e,n){var r,i=n.plotWidth,a=n.plotHeight,o=n.mainWidth,s=n.mainHeight,u=n.startX,c=n.startY,l=n.transposed,f=n.polar,d=n.insetLeft,h=n.insetTop,p=t6(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]),v=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},p),y=e.map((function(t){return t[1]})),m=e.map((function(t){return t[0]})),b=QJ(y),x=QJ(m),w=function(){if(f){var t=Math.min(o,s)/2,e=u+d+o/2,n=c+h+s/2,r=gH(hH([x,b],[e,n]));return[e,e+t*Math.cos(r),n,n+t*Math.sin(r)]}return l?[u,u+i,b+c,b+c]:[x+u,x+u,c,c+a]}(),k=g(w,4),E=k[0],O=k[1],S=k[2],M=k[3];if(m.length>0){var T=t.ruleY||(r=new gW({style:Object.assign({x1:E,x2:O,y1:S,y2:M},v)}),t.appendChild(r),r);T.style.x1=E,T.style.x2=O,T.style.y1=S,T.style.y2=M,t.ruleY=T}}(t,dt,Object.assign(Object.assign({},ft),{plotWidth:Q,plotHeight:J,mainWidth:tt,mainHeight:et,insetLeft:nt,insetTop:rt,startX:k,startY:O,transposed:X,polar:K}))}if(z){var ht=iH($,"marker");!function(t,e){var n=e.data,r=e.style,i=e.theme;t.markers&&t.markers.forEach((function(t){return t.remove()}));var a,o=r.type,s=void 0===o?"":o,u=n.filter((function(t){var e=g(t,1)[0],n=e.x,r=e.y;return rH(n)&&rH(r)})).map((function(t){var e=g(t,2),n=e[0],a=n.color,o=n.element,u=e[1],c=a||o.style.fill||o.style.stroke||i.color,l="hollow"===s?"transparent":c,f="hollow"===s?c:"#fff";return new sW({className:"g2-tooltip-marker",style:Object.assign({cx:u[0],cy:u[1],fill:l,r:4,stroke:f,lineWidth:2,pointerEvents:"none"},r)})})),c=nr(u);try{for(c.s();!(a=c.n()).done;){var l=a.value;t.appendChild(l)}}catch(t){c.e(t)}finally{c.f()}t.markers=u}(t,{data:Z,style:ht,theme:R})}var pt=null===(n=Z[0])||void 0===n?void 0:n[0].x,vt=null!=pt?pt:bt(m);h.emit("tooltip:show",Object.assign(Object.assign({},e),{nativeEvent:!0,data:Object.assign(Object.assign({},ut),{data:{x:gQ(o.x,vt,!0)}})}))}}}}),v,{leading:m,trailing:x}),Ot=function(e){r6({root:t,single:P,emitter:h,event:e})},St=function(){i6({root:t,single:P})},Mt=function(e){var n,r=e.nativeEvent,i=e.data,a=e.offsetX,u=e.offsetY,c=t6(e,["nativeEvent","data","offsetX","offsetY"]);if(!r){var l=null===(n=null==i?void 0:i.data)||void 0===n?void 0:n.x,f=o.x.map(l),d=g(s.map([f,.5]),2),h=d[0],p=d[1],v=t.getRenderBounds(),y=v.min[0],m=v.min[1];Et(Object.assign(Object.assign({},c),{offsetX:void 0!==a?a:y+h,offsetY:void 0!==u?u:m+p,_x:l}))}},Tt=function(){r6({root:t,single:P,emitter:h,nativeEvent:!1})},At=function(){Ct(),St()},Pt=function(){Nt()},Nt=function(){I||(t.addEventListener("pointerdown",Et),t.addEventListener("pointerenter",Et),t.addEventListener("pointermove",Et),t.addEventListener("pointerleave",(function(e){bJ(t,e)||Ot(e)})),t.addEventListener("pointerup",Ot))},Ct=function(){I||(t.removeEventListener("pointerdown",Et),t.removeEventListener("pointerenter",Et),t.removeEventListener("pointermove",Et),t.removeEventListener("pointerleave",Ot),t.removeEventListener("pointerup",Ot))};return Nt(),h.on("tooltip:show",Mt),h.on("tooltip:hide",Tt),h.on("tooltip:disable",At),h.on("tooltip:enable",Pt),function(){Ct(),h.off("tooltip:show",Mt),h.off("tooltip:hide",Tt),h.off("tooltip:disable",At),h.off("tooltip:enable",Pt),G?r6({root:t,single:P,emitter:h,nativeEvent:!1}):St()}}function g6(t){var e=t.shared,n=t.crosshairs,r=t.crosshairsX,i=t.crosshairsY,a=t.series,o=(t.name,t.item),s=void 0===o?function(){return{}}:o,u=t.facet,c=void 0!==u&&u,l=t6(t,["shared","crosshairs","crosshairsX","crosshairsY","series","name","item","facet"]);return function(t,o,u){var f=t.container,d=t.view,h=d.scale,p=d.markState,v=d.coordinate,y=d.theme,m=d6(p,"seriesTooltip"),b=d6(p,"crosshairs"),x=yJ(f),w=h6(a,m),k=h6(n,b);if(w&&function(t){return Array.from(t.values()).some((function(t){var e;return(null===(e=t.interaction)||void 0===e?void 0:e.seriesTooltip)&&t.tooltip}))}(p)&&!c)return v6(x,Object.assign(Object.assign({},l),{theme:y,elements:pJ,scale:h,coordinate:v,crosshairs:k,crosshairsX:h6(h6(r,n),!1),crosshairsY:h6(i,k),item:s,emitter:u}));if(w&&c){var E=o.filter((function(e){return e!==t&&e.options.parentKey===t.options.key})),O=vJ(t,o),S=E[0].view.scale,M=x.getBounds(),T=M.min[0],A=M.min[1];return Object.assign(S,{facet:!0}),v6(x.parentNode.parentNode,Object.assign(Object.assign({},l),{theme:y,elements:function(){return O},scale:S,coordinate:v,crosshairs:h6(n,b),crosshairsX:h6(h6(r,n),!1),crosshairsY:h6(i,k),item:s,startX:T,startY:A,emitter:u}))}return function(t,e){var n,r,i=e.elements,a=e.coordinate,o=e.scale,s=e.render,u=e.groupName,c=e.sort,l=e.filter,f=e.emitter,d=e.wait,h=void 0===d?50:d,p=e.leading,v=void 0===p||p,y=e.trailing,m=void 0!==y&&y,b=e.groupKey,x=void 0===b?function(t){return t}:b,w=e.single,k=void 0===w||w,E=e.position,O=e.enterable,S=e.datum,M=e.view,T=e.mount,A=e.bounding,P=e.theme,N=e.offset,C=e.shared,_=void 0!==C&&C,L=e.body,R=void 0===L||L,j=e.disableNative,D=void 0!==j&&j,I=e.preserve,F=void 0!==I&&I,z=e.css,B=void 0===z?{}:z,G=i(t),W=GV(G,x),V=G.every((function(t){return"interval"===t.markType}))&&!uD(a),H=o.x,Y=o.series,U=null!==(r=null===(n=null==H?void 0:H.getBandWidth)||void 0===n?void 0:n.call(H))&&void 0!==r?r:0,q=Y?function(t){var e=Math.round(1/Y.valueBandWidth);return t.__data__.x+t.__data__.series*U+U/(2*e)}:function(t){return t.__data__.x+U/2};V&&G.sort((function(t,e){return q(t)-q(e)}));var X=function(t){return DJ(t.target,(function(t){return!!t.classList&&t.classList.includes("element")}))},K=V?function(e){var n=bJ(t,e);if(n){var r=g(a.invert(n),1)[0],i=(0,nQ(q).center)(G,r),o=G[i];if(!_){var s=G.find((function(t){return t!==o&&q(t)===q(o)}));if(s)return X(e)}return o}}:X,$=Ql((function(e){var n=K(e);if(n){var r=x(n),i=W.get(r);if(i){var a=1!==i.length||_?u6(i,o,u,void 0,P):function(t){var e=t.__data__,n=e.title,r=e.items,i=(void 0===r?[]:r).filter(rH).map((function(e){var n=e.color,r=void 0===n?o6(t):n,i=t6(e,["color"]);return Object.assign(Object.assign({},i),{color:r})})).map(a6);return Object.assign(Object.assign({},n&&{title:n}),{items:i})}(i[0]);if(c&&a.items.sort((function(t,e){return c(t)-c(e)})),l&&(a.items=a.items.filter(l)),p6(a))r6({root:t,single:k,emitter:f,event:e});else{var d=e.offsetX,h=e.offsetY;R&&n6({root:t,data:a,x:d,y:h,render:s,event:e,single:k,position:E,enterable:O,mount:T,bounding:A,css:B,offset:N}),f.emit("tooltip:show",Object.assign(Object.assign({},e),{nativeEvent:!0,data:Object.assign(Object.assign({},a),{data:XV(n,M)})}))}}}else r6({root:t,single:k,emitter:f,event:e})}),h,{leading:v,trailing:m}),Z=function(e){r6({root:t,single:k,emitter:f,event:e})},Q=function(){D||(t.addEventListener("pointerdown",$),t.addEventListener("pointermove",$),t.addEventListener("pointerleave",Z),t.addEventListener("pointerup",Z))},J=function(){D||(t.removeEventListener("pointerdown",$),t.removeEventListener("pointermove",$),t.removeEventListener("pointerleave",Z),t.removeEventListener("pointerup",Z))},tt=function(e){var n=e.nativeEvent,r=e.offsetX,i=e.offsetY,a=e.data;if(!n){var o=a.data,s=_J(G,o,S);if(s){var u=s.getBBox(),c=u.x,l=u.y,f=u.width,d=u.height,h=t.getBBox();$({target:s,offsetX:void 0!==r?r+h.x:c+f/2,offsetY:void 0!==i?i+h.y:l+d/2})}}},et=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).nativeEvent||r6({root:t,single:k,emitter:f,nativeEvent:!1})};return f.on("tooltip:show",tt),f.on("tooltip:hide",et),f.on("tooltip:enable",(function(){Q()})),f.on("tooltip:disable",(function(){J(),i6({root:t,single:k})})),Q(),function(){J(),f.off("tooltip:show",tt),f.off("tooltip:hide",et),F?r6({root:t,single:k,emitter:f,nativeEvent:!1}):i6({root:t,single:k})}}(x,Object.assign(Object.assign({},l),{datum:EJ(d),elements:pJ,scale:h,coordinate:v,groupKey:e?function(t){return t.__data__.x}:void 0,item:s,emitter:u,view:d,theme:y,shared:e}))}}g6.props={reapplyWhenUpdate:!0};var y6=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},m6="legend-category",b6="legend-continuous",x6="items-item",w6="legend-category-item-marker",k6="legend-category-item-label";function E6(t){return t.getElementsByClassName(w6)[0]}function O6(t){return t.getElementsByClassName(k6)[0]}function S6(t){return t.getElementsByClassName(x6)}function M6(t){return t.getElementsByClassName(m6)}function T6(t){return t.getElementsByClassName(b6)}function A6(t,e){[].concat(M(M6(t)),M(T6(t))).forEach((function(t){e(t,(function(t){return t}))}))}function P6(t){for(var e=t.parentNode;e&&!e.__data__;)e=e.parentNode;return e.__data__}function N6(t,e){var n=e.legend,r=e.channel,i=e.value,a=e.ordinal,o=e.channels,s=e.allChannels,u=e.facet,c=void 0!==u&&u;return y6(this,void 0,void 0,Jn().mark((function e(){var u,l;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.view,l=t.update,(0,t.setState)(n,(function(t){var e=t.marks.map((function(t){if("legends"===t.type)return t;var e=t.transform,n=void 0===e?[]:e,l=t.data,f=void 0===l?[]:l,d=n.findIndex((function(t){var e=t.type;return e.startsWith("group")||e.startsWith("bin")})),h=M(n);f.length&&h.splice(d+1,0,b({type:"filter"},r,{value:i,ordinal:a}));var p=Object.fromEntries(o.map((function(t){return[t,{domain:u.scale[t].getOptions().domain}]})));return vd({},t,Object.assign(Object.assign({transform:h,scale:p},!a&&{animate:!1}),{legend:!c&&Object.fromEntries(s.map((function(t){return[t,{preserve:!0}]})))}))}));return Object.assign(Object.assign({},t),{marks:e})})),e.next=4,l();case 4:case"end":return e.stop()}}),e)})))}function C6(t,e){var n,r=nr(t);try{for(r.s();!(n=r.n()).done;)N6(n.value,Object.assign(Object.assign({},e),{facet:!0}))}catch(t){r.e(t)}finally{r.f()}}function _6(){return function(t,e,n){var r=t.container,i=e.filter((function(e){return e!==t})),a=i.length>0,o=function(t){return P6(t).scales.map((function(t){return t.name}))},s=[].concat(M(M6(r)),M(T6(r))),u=s.flatMap(o),c=Ql(a?C6:N6,50,{trailing:!0}),l=s.map((function(e){var s=P6(e).scales[0],l=s.name,f=s.domain,d={legend:e,channel:l,channels:o(e),allChannels:u};return e.className===m6?function(t,e){for(var n=this,r=e.legends,i=e.marker,a=e.label,o=e.datum,s=e.filter,u=e.emitter,c=e.channel,l=e.state,f=void 0===l?{}:l,d=new Map,h=new Map,p=new Map,v=f.unselected,g=void 0===v?{markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}:v,y={unselected:iH(g,"marker")},m={unselected:iH(g,"label")},b=OJ(y,void 0),x=b.setState,w=b.removeState,k=OJ(m,void 0),E=k.setState,O=k.removeState,S=Array.from(r(t)),M=S.map(o),T=function(){for(var t=0,e=S;t<e.length;t++){var n=e[t],r=o(n),s=i(n),u=a(n);M.includes(r)?(w(s,"unselected"),O(u,"unselected")):(x(s,"unselected"),E(u,"unselected"))}},A=function(){var e=N[P],r=function(){CJ(t,"pointer")},i=function(){!function(t){CJ(t,t.cursor)}(t)},a=function(t){return y6(n,void 0,void 0,Jn().mark((function n(){var r,i,a,l;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=o(e),-1===(i=M.indexOf(r))?M.push(r):M.splice(i,1),n.next=5,s(M);case 5:if(T(),a=t.nativeEvent,l=void 0===a||a){n.next=9;break}return n.abrupt("return");case 9:M.length===S.length?u.emit("legend:reset",{nativeEvent:l}):u.emit("legend:filter",Object.assign(Object.assign({},t),{nativeEvent:l,data:{channel:c,values:M}}));case 10:case"end":return n.stop()}}),n)})))};e.addEventListener("click",a),e.addEventListener("pointerenter",r),e.addEventListener("pointerout",i),d.set(e,a),h.set(e,r),p.set(e,i)},P=0,N=S;P<N.length;P++)A();var C=function(t){return y6(n,void 0,void 0,Jn().mark((function e(){var n,r,i;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.nativeEvent){e.next=3;break}return e.abrupt("return");case 3:if(n=t.data,r=n.channel,i=n.values,r===c){e.next=7;break}return e.abrupt("return");case 7:return M=i,e.next=10,s(M);case 10:T();case 11:case"end":return e.stop()}}),e)})))},_=function(t){return y6(n,void 0,void 0,Jn().mark((function e(){return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.nativeEvent){e.next=3;break}return e.abrupt("return");case 3:return M=S.map(o),e.next=6,s(M);case 6:T();case 7:case"end":return e.stop()}}),e)})))};return u.on("legend:filter",C),u.on("legend:reset",_),function(){for(var t=0,e=S;t<e.length;t++){var n=e[t];n.removeEventListener("click",d.get(n)),n.removeEventListener("pointerenter",h.get(n)),n.removeEventListener("pointerout",p.get(n)),u.off("legend:filter",C),u.off("legend:reset",_)}}}(r,{legends:S6,marker:E6,label:O6,datum:function(t){var e=t.__data__.index;return f[e]},filter:function(e){var n=Object.assign(Object.assign({},d),{value:e,ordinal:!0});c(a?i:t,n)},state:e.attributes.state,channel:l,emitter:n}):function(t,e){var n=e.legend,r=e.filter,i=e.emitter,a=e.channel,o=function(t){var e=t.detail.value;r(e),i.emit({nativeEvent:!0,data:{channel:a,values:e}})};return n.addEventListener("valuechange",o),function(){n.removeEventListener("valuechange",o)}}(0,{legend:e,filter:function(e){var n=Object.assign(Object.assign({},d),{value:e,ordinal:!1});c(a?i:t,n)},emitter:n,channel:l})}));return function(){l.forEach((function(t){return t()}))}}}function L6(){return function(t,e,n){var r,i=t.container,a=t.view,o=t.options,s=M6(i),u=pJ(i),c=MJ(o,["active","inactive"]),l=TJ(u,EJ(a)),f=[],d=nr(s);try{var h=function(){var t,e=r.value,i=function(t){return e.attributes.data[t.__data__.index].label},o=function(t){return P6(t).scales[0].name}(e),s=S6(e),d=function(t){return a.scale[t]}(o),h=GV(u,(function(t){return d.invert(t.__data__[o])})),p=e.attributes.state,v=(void 0===p?{}:p).inactive,y=void 0===v?{}:v,m=OJ(c,l),b=m.setState,x=m.removeState,w={inactive:iH(y,"marker")},k={inactive:iH(y,"label")},E=OJ(w),O=E.setState,S=E.removeState,M=OJ(k),T=M.setState,A=M.removeState,P=function(t){var e,n=nr(s);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=E6(r),a=O6(r);r===t||null===t?(S(i,"inactive"),A(a,"inactive")):(O(i,"inactive"),T(a,"inactive"))}}catch(t){n.e(t)}finally{n.f()}},N=function(t,e){var r,a=i(e),s=new Set(h.get(a)),c=nr(u);try{for(c.s();!(r=c.n()).done;){var l=r.value;s.has(l)?b(l,"active"):b(l,"inactive")}}catch(t){c.e(t)}finally{c.f()}P(e);var f=t.nativeEvent,d=void 0===f||f;d&&n.emit("legend:highlight",Object.assign(Object.assign({},t),{nativeEvent:d,data:{channel:o,value:a}}))},C=new Map,_=nr(s);try{var L=function(){var e=t.value,n=function(t){N(t,e)};e.addEventListener("pointerover",n),C.set(e,n)};for(_.s();!(t=_.n()).done;)L()}catch(t){_.e(t)}finally{_.f()}var R=function(t){var e,r=nr(u);try{for(r.s();!(e=r.n()).done;){var i=e.value;x(i,"inactive","active")}}catch(t){r.e(t)}finally{r.f()}P(null);var a=t.nativeEvent,o=void 0===a||a;o&&n.emit("legend:unhighlight",{nativeEvent:o})},j=function(t){var e=t.nativeEvent,n=t.data;if(!e){var r=n.channel,a=n.value;if(r===o){var u=s.find((function(t){return i(t)===a}));u&&N({nativeEvent:!1},u)}}},D=function(t){t.nativeEvent||R({nativeEvent:!1})};e.addEventListener("pointerleave",R),n.on("legend:highlight",j),n.on("legend:unhighlight",D),f.push((function(){e.removeEventListener(R),n.off("legend:highlight",j),n.off("legend:unhighlight",D);var t,r=nr(C);try{for(r.s();!(t=r.n()).done;){var i=g(t.value,2),a=i[0],o=i[1];a.removeEventListener(o)}}catch(t){r.e(t)}finally{r.f()}}))};for(d.s();!(r=d.n()).done;)h()}catch(t){d.e(t)}finally{d.f()}return function(){return f.forEach((function(t){return t()}))}}}var R6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function j6(t,e){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=g(r[n],2),a=i[0],o=i[1];t.style(a,o)}}var D6=PY((function(t){var e=t.attributes,n=e.x,r=e.y,i=e.width,a=e.height,o=e.class,s=(e.renders,e.handleSize),u=void 0===s?10:s,c=e.document,l=R6(e,["x","y","width","height","class","renders","handleSize","document"]);if(c&&void 0!==i&&void 0!==a&&void 0!==n&&void 0!==r){var f=u/2,d=function(t,e,n){t.handle||(t.handle=n.createElement("rect"),t.append(t.handle));var r=t.handle;return r.attr(e),r},h=iH(oH(l,"handleNW","handleNE"),"handleN"),p=h.render,v=void 0===p?d:p,g=R6(h,["render"]),y=iH(l,"handleE"),m=y.render,b=void 0===m?d:m,x=R6(y,["render"]),w=iH(oH(l,"handleSE","handleSW"),"handleS"),k=w.render,E=void 0===k?d:k,O=R6(w,["render"]),S=iH(l,"handleW"),M=S.render,T=void 0===M?d:M,A=R6(S,["render"]),P=iH(l,"handleNW"),N=P.render,C=void 0===N?d:N,_=R6(P,["render"]),L=iH(l,"handleNE"),R=L.render,j=void 0===R?d:R,D=R6(L,["render"]),I=iH(l,"handleSE"),F=I.render,z=void 0===F?d:F,B=R6(I,["render"]),G=iH(l,"handleSW"),W=G.render,V=void 0===W?d:W,H=R6(G,["render"]),Y=function(t){return function(){var e=PY((function(e){return function(t,e){var n=t.id,r=e(t,t.attributes,c);r.id=n,r.style.draggable=!0}(e,t)}));return new e({})}},U=fH(t).attr("className",o).style("transform","translate(".concat(n,", ").concat(r,")")).style("draggable",!0);U.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(j6,Object.assign(Object.assign({width:i,height:a},oH(l,"handle")),{transform:void 0})),U.maybeAppend("handle-n",Y(v)).style("x",f).style("y",-f).style("width",i-u).style("height",u).style("fill","transparent").call(j6,g),U.maybeAppend("handle-e",Y(b)).style("x",i-f).style("y",f).style("width",u).style("height",a-u).style("fill","transparent").call(j6,x),U.maybeAppend("handle-s",Y(E)).style("x",f).style("y",a-f).style("width",i-u).style("height",u).style("fill","transparent").call(j6,O),U.maybeAppend("handle-w",Y(T)).style("x",-f).style("y",f).style("width",u).style("height",a-u).style("fill","transparent").call(j6,A),U.maybeAppend("handle-nw",Y(C)).style("x",-f).style("y",-f).style("width",u).style("height",u).style("fill","transparent").call(j6,_),U.maybeAppend("handle-ne",Y(j)).style("x",i-f).style("y",-f).style("width",u).style("height",u).style("fill","transparent").call(j6,D),U.maybeAppend("handle-se",Y(z)).style("x",i-f).style("y",a-f).style("width",u).style("height",u).style("fill","transparent").call(j6,B),U.maybeAppend("handle-sw",Y(V)).style("x",-f).style("y",a-f).style("width",u).style("height",u).style("fill","transparent").call(j6,H)}}));function I6(t,e){var n=e.brushed,r=void 0===n?function(){}:n,i=e.brushended,a=void 0===i?function(){}:i,o=e.brushcreated,s=void 0===o?function(){}:o,u=e.brushstarted,c=void 0===u?function(){}:u,l=e.brushupdated,f=void 0===l?function(){}:l,d=e.extent,h=void 0===d?function(t){var e=t.getBBox();return[0,0,e.width,e.height]}(t):d,p=e.brushRegion,v=void 0===p?function(t,e,n,r,i){return[t,e,n,r]}:p,y=e.reverse,m=void 0!==y&&y,b=e.fill,x=void 0===b?"#777":b,w=e.fillOpacity,k=void 0===w?"0.3":w,E=e.stroke,O=void 0===E?"#fff":E,S=e.selectedHandles,M=void 0===S?["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]:S,T=R6(e,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]),A=null,P=null,N=null,C=null,_=null,L=!1,R=g(h,4),j=R[0],D=R[1],I=R[2],F=R[3];CJ(t,"crosshair"),t.style.draggable=!0;var z=function(t,e,n){if(c(n),C&&C.remove(),_&&_.remove(),A=[t,e],m)return B();G()},B=function(){_=new mW({style:Object.assign(Object.assign({},T),{fill:x,fillOpacity:k,stroke:O,pointerEvents:"none"})}),C=new D6({style:{x:0,y:0,width:0,height:0,draggable:!0,document:t.ownerDocument},className:"mask"}),t.appendChild(_),t.appendChild(C)},G=function(){C=new D6({style:Object.assign(Object.assign({document:t.ownerDocument,x:0,y:0},T),{fill:x,fillOpacity:k,stroke:O,draggable:!0}),className:"mask"}),t.appendChild(C)},W=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];C&&C.remove(),_&&_.remove(),A=null,P=null,N=null,L=!1,C=null,_=null,a(t)},V=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=function(t,e,n,r,i){var a=g(i,4),o=a[0],s=a[1],u=a[2],c=a[3];return[Math.max(o,Math.min(t,n)),Math.max(s,Math.min(e,r)),Math.min(u,Math.max(t,n)),Math.min(c,Math.max(e,r))]}(t[0],t[1],e[0],e[1],h),a=g(i,4),o=a[0],s=a[1],u=a[2],c=a[3],l=g(v(o,s,u,c,h),4),f=l[0],d=l[1],p=l[2],y=l[3];return m?Y(f,d,p,y):H(f,d,p,y),r(f,d,p,y,n),[f,d,p,y]},H=function(t,e,n,r){C.style.x=t,C.style.y=e,C.style.width=n-t,C.style.height=r-e},Y=function(t,e,n,r){_.style.d="\n      M".concat(j,",").concat(D,"L").concat(I,",").concat(D,"L").concat(I,",").concat(F,"L").concat(j,",").concat(F,"Z\n      M").concat(t,",").concat(e,"L").concat(t,",").concat(r,"L").concat(n,",").concat(r,"L").concat(n,",").concat(e,"Z\n    "),C.style.x=t,C.style.y=e,C.style.width=n-t,C.style.height=r-e},U={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},q=function(t){return K(t)||X(t)},X=function(t){var e=t.id;return-1!==M.indexOf(e)&&new Set(Object.keys(U)).has(e)},K=function(t){return t===C.getElementById("selection")},$=function(e){var n=e.target,r=g(xJ(t,e),2),i=r[0],a=r[1];if(!C||!q(n))return z(i,a,e),void(L=!0);q(n)&&(N=[i,a])},Z=function(e){var n=e.target,r=xJ(t,e);if(A){if(!N)return V(A,r);if(K(n))return function(t){var e=function(t,e,n,r,i){return t+e<r?r-e:t+n>i?i-n:t},n=t[0]-N[0],r=t[1]-N[1],i=e(n,A[0],P[0],j,I),a=e(r,A[1],P[1],D,F),o=[A[0]+i,A[1]+a],s=[P[0]+i,P[1]+a];V(o,s)}(r);var i=r[0]-N[0],a=r[1]-N[1],o=n.id;if(U[o]){var s=g(U[o].vector,4),u=s[0],c=s[1],l=s[2],f=s[3];return V([A[0]+i*u,A[1]+a*c],[P[0]+i*l,P[1]+a*f])}}},Q=function(e){if(N){N=null;var n=C.style,r=n.x,i=n.y,a=n.width,o=n.height;return A=[r,i],P=[r+a,i+o],void f(r,i,r+a,i+o,e)}P=xJ(t,e);var u=g(V(A,P),4),c=u[0],l=u[1],d=u[2],h=u[3];L=!1,s(c,l,d,h,e)},J=function(t){var e=t.target;C&&!q(e)&&W()},tt=function(e){var n=e.target;C&&q(n)&&!L?K(n)?CJ(t,"move"):X(n)&&CJ(t,U[n.id].cursor):CJ(t,"crosshair")},et=function(){CJ(t,"default")};return t.addEventListener("dragstart",$),t.addEventListener("drag",Z),t.addEventListener("dragend",Q),t.addEventListener("click",J),t.addEventListener("pointermove",tt),t.addEventListener("pointerleave",et),{mask:C,move:function(t,e,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];C||z(t,e,{}),A=[t,e],P=[n,r],V([t,e],[n,r],i)},remove:function(){C&&W(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},destroy:function(){C&&W(!1),CJ(t,"default"),t.removeEventListener("dragstart",$),t.removeEventListener("drag",Z),t.removeEventListener("dragend",Q),t.removeEventListener("click",J),t.removeEventListener("pointermove",tt),t.removeEventListener("pointerleave",et)}}}function F6(t,e,n){return e.filter((function(e){if(e===t)return!1;var r=e.options.interaction,i=void 0===r?{}:r;return Object.values(i).find((function(t){return t.brushKey===n}))}))}function z6(t,e,n){return F6(t,e,n).map((function(t){return t.options}))}function B6(t,e){var n=e.elements,r=e.selectedHandles,i=e.siblings,a=void 0===i?function(t){return[]}:i,o=e.datum,s=e.brushRegion,u=e.extent,c=e.reverse,l=e.scale,f=e.coordinate,d=e.series,h=void 0!==d&&d,p=e.key,v=void 0===p?function(t){return t}:p,y=e.bboxOf,m=void 0===y?function(t){var e=t.style;return{x:e.x,y:e.y,width:e.width,height:e.height}}:y,b=e.state,x=void 0===b?{}:b,w=e.emitter,k=R6(e,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]),E=n(t),O=a(t),S=O.flatMap(n),T=TJ(E,o),A=iH(k,"mask"),P=OJ(x,T),N=P.setState,C=P.removeState,_=new Map,L=m(t),R=L.width,j=L.height,D=L.x,I=void 0===D?0:D,F=L.y,z=void 0===F?0:F,B=u||[0,0,R,j],G=function(){for(var t=0,e=[].concat(M(E),M(S));t<e.length;t++){var n=e[t];C(n,"active","inactive")}},W=function(t,e,n,r){var i,a,o=nr(O);try{for(o.s();!(a=o.n()).done;)null===(i=a.value.brush)||void 0===i||i.remove()}catch(t){o.e(t)}finally{o.f()}var s,u,c,l,f,d,h,p,y,m,b,x,w=new Set,k=nr(E);try{for(k.s();!(s=k.n()).done;){var M=s.value,T=M.getLocalBounds(),A=T.min,P=T.max,C=g(A,2),_=C[0],L=C[1],R=g(P,2),j=R[0],D=R[1];u=[t,e,n,r],void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,l=(c=g([_,L,j,D],4))[0],f=c[1],d=c[2],h=c[3],y=(p=g(u,4))[0],m=p[1],b=p[2],x=p[3],y>d||b<l||m>h||x<f?N(M,"inactive"):(N(M,"active"),w.add(v(M)))}}catch(t){k.e(t)}finally{k.f()}var I,F=nr(S);try{for(F.s();!(I=F.n()).done;){var z=I.value;w.has(v(z))?N(z,"active"):N(z,"inactive")}}catch(t){F.e(t)}finally{F.f()}},V=function(){var t,e=nr(E);try{for(e.s();!(t=e.n()).done;){var n=t.value;C(n,"inactive")}}catch(t){e.e(t)}finally{e.f()}var r,i=nr(_.values());try{for(i.s();!(r=i.n()).done;)r.value.remove()}catch(t){i.e(t)}finally{i.f()}_.clear()},H=function(e,n,r,i){var a=function(t){var e=t.cloneNode();return e.__data__=t.__data__,t.parentNode.appendChild(e),_.set(t,e),e},o=new EW({style:{x:e+I,y:n+z,width:r-e,height:i-n}});t.appendChild(o);var s,u=nr(E);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=_.get(c)||a(c);l.style.clipPath=o,N(c,"inactive"),N(l,"active")}}catch(t){u.e(t)}finally{u.f()}},Y=I6(t,Object.assign(Object.assign({},A),{extent:B,brushRegion:s,reverse:c,selectedHandles:r,brushended:function(t){var e=h?V:G;t&&w.emit("brush:remove",{nativeEvent:!0}),e()},brushed:function(t,e,n,r,i){var a=mQ(t,e,n,r,l,f);i&&w.emit("brush:highlight",{nativeEvent:!0,data:{selection:a}}),(h?H:W)(t,e,n,r)},brushcreated:function(t,e,n,r,i){var a=mQ(t,e,n,r,l,f);w.emit("brush:end",Object.assign(Object.assign({},i),{nativeEvent:!0,data:{selection:a}}))},brushupdated:function(t,e,n,r,i){var a=mQ(t,e,n,r,l,f);w.emit("brush:end",Object.assign(Object.assign({},i),{nativeEvent:!0,data:{selection:a}}))},brushstarted:function(t){w.emit("brush:start",t)}})),U=function(t){var e=t.nativeEvent,n=t.data;if(!e){var r=function(t,e,n){var r=e.x,i=e.y,a=g(t,2),o=a[0],s=a[1],u=bQ(o,r),c=bQ(s,i),l=[u[0],c[0]],f=[u[1],c[1]],d=g(n.map(l),2),h=d[0],p=d[1],v=g(n.map(f),2);return[h,p,v[0],v[1]]}(n.selection,l,f),i=g(r,4),a=i[0],o=i[1],s=i[2],u=i[3];Y.move(a,o,s,u,!1)}};w.on("brush:highlight",U);var q=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).nativeEvent||Y.remove(!1)};w.on("brush:remove",q);var X=Y.destroy.bind(Y);return Y.destroy=function(){w.off("brush:highlight",U),w.off("brush:remove",q),X()},Y}function G6(t){var e=t.facet,n=t.brushKey,r=R6(t,["facet","brushKey"]);return function(t,i,a){var o=t.container,s=t.view,u=t.options,c=yJ(o),l={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},f=["active",["inactive",{opacity:.5}]],d=s.scale,h=s.coordinate;if(e){var p=c.getBounds(),v=p.min[0],g=p.min[1],y=p.max[0],m=p.max[1];return B6(c.parentNode.parentNode,Object.assign(Object.assign({elements:function(){return vJ(t,i)},datum:EJ(gJ(t,i).map((function(t){return t.view}))),brushRegion:function(t,e,n,r){return[t,e,n,r]},extent:[v,g,y,m],state:MJ(gJ(t,i).map((function(t){return t.options})),f),emitter:a,scale:d,coordinate:h,selectedHandles:void 0},l),r))}var b=B6(c,Object.assign(Object.assign({elements:pJ,key:function(t){return t.__data__.key},siblings:function(){return function(t,e,n){return F6(t,e,n).map((function(t){return yJ(t.container)}))}(t,i,n)},datum:EJ([s].concat(M(F6(t,i,n).map((function(t){return t.view}))))),brushRegion:function(t,e,n,r){return[t,e,n,r]},extent:void 0,state:MJ([u].concat(M(z6(t,i,n))),f),emitter:a,scale:d,coordinate:h,selectedHandles:void 0},l),r));return c.brush=b,function(){return b.destroy()}}}function W6(t,e,n,r,i){var a=g(i,4);return[t,a[1],n,a[3]]}function V6(t){return G6(Object.assign(Object.assign({},t),{brushRegion:W6,selectedHandles:["handle-e","handle-w"]}))}function H6(t,e,n,r,i){var a=g(i,3);return[a[0],e,a[2],r]}function Y6(t){return G6(Object.assign(Object.assign({},t),{brushRegion:H6,selectedHandles:["handle-n","handle-s"]}))}var U6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},q6="axis",X6="axis-line",K6="axis-main-group",$6="axis-hot-area";function Z6(t){return t.getElementsByClassName(q6)}function Q6(t){return t.getElementsByClassName(X6)[0]}function J6(t){return function(t){return t.getElementsByClassName(K6)[0]}(t).getLocalBounds()}function t4(t,e){var n=e.cross,r=e.offsetX,i=(e.offsetY,U6(e,["cross","offsetX","offsetY"])),a=J6(t),o=g(Q6(t).getLocalBounds().min,1)[0],s=g(a.min,2),u=s[0],c=s[1],l=g(a.max,2),f=l[0],d=l[1],h=2*(f-u);return{brushRegion:H6,hotZone:new EW({className:$6,style:Object.assign({width:n?h/2:h,transform:"translate(".concat((n?u:o-h/2).toFixed(2),", ").concat(c,")"),height:d-c},i)}),extent:n?function(t,e,n,r){return[-1/0,e,1/0,r]}:function(t,e,n,i){return[Math.floor(u-r),e,Math.ceil(f-r),i]}}}function e4(t,e){var n=e.offsetY,r=(e.offsetX,e.cross),i=void 0!==r&&r,a=U6(e,["offsetY","offsetX","cross"]),o=J6(t),s=g(Q6(t).getLocalBounds().min,2)[1],u=g(o.min,2),c=u[0],l=u[1],f=g(o.max,2),d=f[0],h=f[1],p=h-l;return{brushRegion:W6,hotZone:new EW({className:$6,style:Object.assign({width:d-c,height:i?p:2*p,transform:"translate(".concat(c,", ").concat(i?l:s-p,")")},a)}),extent:i?function(t,e,n,r){return[t,-1/0,n,1/0]}:function(t,e,r,i){return[t,Math.floor(l-n),r,Math.ceil(h-n)]}}}function n4(t,e){var n=e.axes,r=e.elements,i=e.points,a=e.horizontal,o=e.datum,s=e.offsetY,u=e.offsetX,c=e.reverse,l=void 0!==c&&c,f=e.state,d=void 0===f?{}:f,h=e.emitter,p=e.coordinate,v=U6(e,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]),y=r(t),m=n(t),b=OJ(d,TJ(y,o)),x=b.setState,w=b.removeState,k=new Map,E=iH(v,"mask"),O=function(t){return Array.from(k.values()).every((function(e){var n=g(e,4),r=n[0],i=n[1],a=n[2],o=n[3];return t.some((function(t){var e=g(t,2),n=e[0],s=e[1];return n>=r&&n<=a&&s>=i&&s<=o}))}))},S=m.map((function(t){return t.attributes.scale})),T=function(t){return t.length>2?[t[0],t[t.length-1]]:t},A=new Map,P=function(){A.clear();for(var t=0;t<m.length;t++){var e=S[t].getOptions().domain;A.set(t,T(e))}};P();for(var N=function(t,e){var n,r=[],a=nr(y);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=i(o);O(s)?(x(o,"active"),r.push(o)):x(o,"inactive")}}catch(t){a.e(t)}finally{a.f()}A.set(t,C(r,t)),e&&h.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:function(){if(!_)return Array.from(A.values());var t,e=[],n=nr(A);try{for(n.s();!(t=n.n()).done;){var r=g(t.value,2),i=r[0],a=r[1];"x"===S[i].getOptions().name?e[0]=a:e[1]=a}}catch(t){n.e(t)}finally{n.f()}return e}()}})},C=function(t,e){var n=S[e],r=n.getOptions().name,i=t.map((function(t){var e=t.__data__;return n.invert(e[r])}));return T(yQ(n,i))},_=m.some(a)&&m.some((function(t){return!a(t)})),L=[],R=function(t){var e=m[t],n=(a(e)?e4:t4)(e,{offsetY:s,offsetX:u,cross:_,zIndex:999,fill:"transparent"}),r=n.hotZone,i=n.brushRegion,o=n.extent;e.parentNode.appendChild(r);var c=I6(r,Object.assign(Object.assign({},E),{reverse:l,brushRegion:i,brushended:function(n){k.delete(e),0===Array.from(k.entries()).length?function(t){var e,n=nr(y);try{for(n.s();!(e=n.n()).done;){var r=e.value;w(r,"active","inactive")}}catch(t){n.e(t)}finally{n.f()}P(),t&&h.emit("brushAxis:remove",{nativeEvent:!0})}(n):N(t,n)},brushed:function(n,r,i,a,s){k.set(e,o(n,r,i,a)),N(t,s)}}));L.push(c)},j=0;j<m.length;j++)R(j);var D=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).nativeEvent||L.forEach((function(t){return t.remove(!1)}))},I=function(t,e,n){var r=g(t,2),i=r[0],o=r[1],s=F(i,e,n),u=F(o,e,n)+function(t){return t.getStep?t.getStep():0}(e);return a(n)?[s,-1/0,u,1/0]:[-1/0,s,1/0,u]},F=function(t,e,n){var r=p.getOptions(),i=r.height,o=r.width,s=e.clone();return a(n)?s.update({range:[0,o]}):s.update({range:[i,0]}),s.map(t)},z=function(t){if(!t.nativeEvent)for(var e=t.data.selection,n=0;n<L.length;n++){var r=e[n],i=L[n],a=m[n];if(r){var o=S[n];i.move.apply(i,M(I(r,o,a)).concat([!1]))}else i.remove(!1)}};return h.on("brushAxis:remove",D),h.on("brushAxis:highlight",z),function(){L.forEach((function(t){return t.destroy()})),h.off("brushAxis:remove",D),h.off("brushAxis:highlight",z)}}function r4(t){return function(e,n,r){var i=e.container,a=e.view,o=e.options,s=yJ(i).getBBox(),u=s.x,c=s.y,l=a.coordinate;return n4(i,Object.assign({elements:pJ,axes:Z6,offsetY:c,offsetX:u,points:function(t){return t.__data__.points},horizontal:function(t){var e=t.attributes,n=g(e.startPos,2),r=n[0],i=n[1],a=g(e.endPos,2),o=a[0],s=a[1];return r!==o&&i===s},datum:EJ(a),state:MJ(o,["active",["inactive",{opacity:.5}]]),coordinate:l,emitter:r},t))}}var i4=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},a4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function o4(t){var e=this,n=t.hideX,r=void 0===n||n,i=t.hideY,a=void 0===i||i,o=a4(t,["hideX","hideY"]);return function(t,n,i){var s=t.container,u=t.view,c=t.options,l=t.update,f=t.setState,d=yJ(s),h=!1,p=!1,v=u,y=u.scale,m=u.coordinate;return function(t,e){var n=e.filter,r=e.reset,i=e.brushRegion,a=e.extent,o=e.reverse,s=e.emitter,u=(e.scale,e.coordinate,e.selection),c=(e.series,iH(a4(e,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]),"mask")),l=t.getBBox(),f=l.width,d=l.height,h=a||[0,0,f,d],p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,e=null;return function(n){var r=n.timeStamp;return null!==e&&r-e<t?(e=r,!0):(e=r,!1)}}(),v=I6(t,Object.assign(Object.assign({},c),{extent:h,brushRegion:i,reverse:o,brushcreated:function(t,e,r,i,a){a.nativeEvent=!0,n(u(t,e,r,i),a),v.remove()}}));function g(t){p(t)&&(t.nativeEvent=!0,r(t))}t.addEventListener("click",g);var y=function(t){var e=t.nativeEvent,r=t.data;if(!e){var i=r.selection;n(i,{nativeEvent:!1})}};return s.on("brush:filter",y),function(){v.destroy(),s.off("brush:filter",y),t.removeEventListener("click",g)}}(d,Object.assign(Object.assign({brushRegion:function(t,e,n,r){return[t,e,n,r]},selection:function(t,e,n,r){var i=v;return mQ(t,e,n,r,i.scale,i.coordinate)},filter:function(t,n){return i4(e,void 0,void 0,Jn().mark((function e(){var o,s,u,d;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return p=!0,o=g(t,2),s=o[0],u=o[1],f("brushFilter",(function(t){var e=t.marks.map((function(t){return vd({axis:Object.assign(Object.assign({},r&&{x:{transform:[{type:"hide"}]}}),a&&{y:{transform:[{type:"hide"}]}})},t,{scale:{x:{domain:s,nice:!1},y:{domain:u,nice:!1}}})}));return Object.assign(Object.assign({},c),{marks:e,clip:!0})})),i.emit("brush:filter",Object.assign(Object.assign({},n),{data:{selection:[s,u]}})),e.next=8,l();case 8:d=e.sent,v=d.view,p=!1,h=!0;case 12:case"end":return e.stop()}}),e)})))},reset:function(t){if(!p&&h){var e=u.scale,n=e.x,r=e.y,a=n.getOptions().domain,o=r.getOptions().domain;i.emit("brush:filter",Object.assign(Object.assign({},t),{data:{selection:[a,o]}})),h=!1,v=u,f("brushFilter"),l()}},extent:void 0,emitter:i,scale:y,coordinate:m},{maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1}),o))}}function s4(t){return o4(Object.assign(Object.assign({hideX:!0},t),{brushRegion:W6}))}function u4(t){return o4(Object.assign(Object.assign({hideY:!0},t),{brushRegion:H6}))}var c4=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},l4="slider";function f4(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"x",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"y",o=t.marks.map((function(t){var o,s;return vd({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},t,b(b({scale:e},n,Object.assign(Object.assign({},(null===(o=t[n])||void 0===o?void 0:o[i])&&b({},i,Object.assign({preserve:!0},r&&{ratio:null}))),(null===(s=t[n])||void 0===s?void 0:s[a])&&b({},a,{preserve:!0}))),"animate",!1))}));return Object.assign(Object.assign({},t),{marks:o,clip:!0,animate:!1})}function d4(t){return[t[0],t[t.length-1]]}function h4(t){var e=this,n=t.initDomain,r=void 0===n?{}:n,i=t.className,a=void 0===i?l4:i,o=t.prefix,s=void 0===o?"slider":o,u=t.setValue,c=void 0===u?function(t,e){return t.setValues(e)}:u,l=t.hasState,f=void 0!==l&&l,d=t.wait,h=void 0===d?50:d,p=t.leading,v=void 0===p||p,y=t.trailing,m=void 0!==y&&y,x=t.getInitValues,w=void 0===x?function(t){var e,n=null===(e=null==t?void 0:t.attributes)||void 0===e?void 0:e.values;if(0!==n[0]||1!==n[1])return n}:x;return function(t,n,i){var o=t.container,u=t.view,l=t.update,d=t.setState,p=o.getElementsByClassName(a);if(!p.length)return function(){};var y,x=!1,k=u.scale,E=u.coordinate,O=u.layout,S=O.paddingLeft,M=O.paddingTop,T=O.paddingBottom,A=O.paddingRight,P=k.x,N=k.y,C=sD(E),_=new Map,L=new Set,R={x:r.x||P.getOptions().domain,y:r.y||N.getOptions().domain},j=nr(p);try{var D=function(){var t=y.value,n=t.attributes.orientation,r=function(t){var e="vertical"===t?"y":"x",n="vertical"===t?"x":"y";return C?[n,e]:[e,n]}(n),a=g(r,2),o=a[0],u=a[1],p="".concat(s).concat(ll(o),":filter"),E="x"===o,O=P.getOptions().ratio,j=N.getOptions().ratio,D=function(t){if(t.data){var e=g(t.data.selection,2),r=e[0],i=void 0===r?d4(R.x):r,a=e[1],s=void 0===a?d4(R.y):a;return E?[yQ(P,i,O),yQ(N,s,j)]:[yQ(N,s,j),yQ(P,i,O)]}var c=function(t,e,n){var r=g(t,2),i=r[0],a=r[1],o=n?function(t){return 1-t}:function(t){return t};return yQ(e,[gQ(e,o(i),!0),gQ(e,o(a),!1)])}(t.detail.value,k[o],C&&"horizontal"===n);return[c,R[u]]},I=Ql((function(n){return c4(e,void 0,void 0,Jn().mark((function e(){var r,a,c,h,v,y,m,w,k,O;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.initValue,a=void 0!==r&&r,!x||a){e.next=3;break}return e.abrupt("return");case 3:return x=!0,c=n.nativeEvent,h=void 0===c||c,v=D(n),y=g(v,2),m=y[0],w=y[1],R[o]=m,R[u]=w,h&&(k=E?m:w,O=E?w:m,i.emit(p,Object.assign(Object.assign({},n),{nativeEvent:h,data:{selection:[d4(k),d4(O)]}}))),d(t,(function(t){return Object.assign(Object.assign({},f4(t,b({},o,{domain:m,nice:!1}),s,f,o,u)),{paddingLeft:S,paddingTop:M,paddingBottom:T,paddingRight:A})})),e.next=12,l();case 12:x=!1;case 13:case"end":return e.stop()}}),e)})))}),h,{leading:v,trailing:m}),F=function(e){if(!e.nativeEvent){var n=e.data,r=g(n.selection,2),i=r[0],a=r[1];t.dispatchEvent(new cG("valuechange",{data:n,nativeEvent:!1}));var o=E?bQ(i,P):bQ(a,N);c(t,o)}};i.on(p,F),t.addEventListener("valuechange",I),_.set(t,I),L.add([p,F]);var z=w(t);z&&t.dispatchEvent(new cG("valuechange",{detail:{value:z},nativeEvent:!1,initValue:!0}))};for(j.s();!(y=j.n()).done;)D()}catch(t){j.e(t)}finally{j.f()}return function(){var t,e=nr(_);try{for(e.s();!(t=e.n()).done;){var n=g(t.value,2),r=n[0],a=n[1];r.removeEventListener("valuechange",a)}}catch(t){e.e(t)}finally{e.f()}var o,s=nr(L);try{for(s.s();!(o=s.n()).done;){var u=g(o.value,2),c=u[0],l=u[1];i.off(c,l)}}catch(t){s.e(t)}finally{s.f()}}}}var p4="g2-scrollbar";function v4(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n,r){var i=e.view;if(!e.container.getElementsByClassName(p4).length)return function(){};var a=i.scale,o=a.x,s=a.y,u={x:M(o.getOptions().domain),y:M(s.getOptions().domain)};return o.update({domain:o.getOptions().expectedDomain}),s.update({domain:s.getOptions().expectedDomain}),h4(Object.assign(Object.assign({},t),{initDomain:u,className:p4,prefix:"scrollbar",hasState:!0,setValue:function(t,e){return t.setValue(e[0])},getInitValues:function(t){var e=t.slider.attributes.values;if(0!==e[0])return e}}))(e,n,r)}}var g4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function y4(t,e,n){return"<".concat(t,' style="').concat(Object.entries(n).map((function(t){var e=g(t,2),n=e[0],r=e[1];return"".concat(function(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}(n),":").concat(r)})).join(";"),'">').concat(e,"</").concat(t,">")}var m4={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function b4(t){return"text"===t.nodeName&&!!t.isOverflowing()}function x4(t){var e=t.offsetX,n=void 0===e?8:e,r=t.offsetY,i=void 0===r?8:r,a=g4(t,["offsetX","offsetY"]);return function(t){var e=t.container,r=g(e.getBounds().min,2),o=r[0],s=r[1],u=iH(a,"tip"),c=new Set,l=function(t){var r=t.target;if(b4(r)){var a=t.offsetX,l=t.offsetY,f=a+n-o,d=l+i-s;if(r.tip)return r.tip.style.x=f,void(r.tip.style.y=d);var h=r.style.text,p=new hW({className:"poptip",style:{innerHTML:y4("div",h,Object.assign(Object.assign({},m4),u)),x:f,y:d}});e.appendChild(p),r.tip=p,c.add(p)}else t.stopPropagation()},f=function(t){var e=t.target;b4(e)?e.tip&&(e.tip.remove(),e.tip=null,c.delete(e.tip)):t.stopPropagation()};return e.addEventListener("pointerover",l),e.addEventListener("pointerout",f),function(){e.removeEventListener("pointerover",l),e.removeEventListener("pointerout",f),c.forEach((function(t){return t.remove()}))}}}x4.props={reapplyWhenUpdate:!0};const w4=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return hv(t,(function(n,r){_n(t)&&"prototype"===r||e.push(r)})),e},k4=function(t,e){if(!fn(t))return null;var n;if(_n(e)&&(n=e),dd(e)&&(n=function(t){return function(t,e){var n=w4(e),r=n.length;if(Me(t))return!r;for(var i=0;i<r;i+=1){var a=n[i];if(e[a]!==t[a]||!(a in t))return!1}return!0}(t,e)}),n)for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null};function E4(t){return null==t?null:O4(t)}function O4(t){if("function"!=typeof t)throw new Error;return t}function S4(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}var M4=Jn().mark(T4);function T4(){var t,e,n,r,i,a;return Jn().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=[t=this];case 1:e=n.reverse(),n=[];case 2:if(!(t=e.pop())){o.next=8;break}return o.next=5,t;case 5:if(r=t.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);o.next=2;break;case 8:if(n.length){o.next=1;break}case 9:case"end":return o.stop()}}),M4,this)}function A4(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=N4)):void 0===e&&(e=P4);for(var n,r,i,a,o,s=new L4(t),u=[s];n=u.pop();)if((i=e(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;a>=0;--a)u.push(r=i[a]=new L4(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(_4)}function P4(t){return t.children}function N4(t){return Array.isArray(t)?t[1]:null}function C4(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function _4(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function L4(t){this.data=t,this.depth=this.height=0,this.parent=null}L4.prototype=A4.prototype=b({constructor:L4,count:function(){return this.eachAfter(S4)},each:function(t,e){var n,r=-1,i=nr(this);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.call(e,a,++r,this)}}catch(t){i.e(t)}finally{i.f()}return this},eachAfter:function(t,e){for(var n,r,i,a=this,o=[a],s=[],u=-1;a=o.pop();)if(s.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;a=s.pop();)t.call(e,a,++u,this);return this},eachBefore:function(t,e){for(var n,r,i=this,a=[i],o=-1;i=a.pop();)if(t.call(e,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)a.push(n[r]);return this},find:function(t,e){var n,r=-1,i=nr(this);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t.call(e,a,++r,this))return a}}catch(t){i.e(t)}finally{i.f()}},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return A4(this).eachBefore(C4)}},Symbol.iterator,T4);var R4={depth:-1},j4={},D4={};function I4(t){return t.id}function F4(t){return t.parentId}function z4(){var t,e=I4,n=F4;function r(r){var i,a,o,s,u,c,l,f,d=Array.from(r),h=e,p=n,v=new Map;if(null!=t){var g,y=d.map((function(e,n){return function(t){var e=(t="".concat(t)).length;return G4(t,e-1)&&!G4(t,e-2)&&(t=t.slice(0,-1)),"/"===t[0]?t:"/".concat(t)}(t(e,n,r))})),m=y.map(B4),b=new Set(y).add(""),x=nr(m);try{for(x.s();!(g=x.n()).done;){var w=g.value;b.has(w)||(b.add(w),y.push(w),m.push(B4(w)),d.push(D4))}}catch(t){x.e(t)}finally{x.f()}h=function(t,e){return y[e]},p=function(t,e){return m[e]}}for(o=0,i=d.length;o<i;++o)a=d[o],c=d[o]=new L4(a),null!=(l=h(a,o,r))&&(l+="")&&(f=c.id=l,v.set(f,v.has(f)?j4:c)),null!=(l=p(a,o,r))&&(l+="")&&(c.parent=l);for(o=0;o<i;++o)if(l=(c=d[o]).parent){if(!(u=v.get(l)))throw new Error("missing: "+l);if(u===j4)throw new Error("ambiguous: "+l);u.children?u.children.push(c):u.children=[c],c.parent=u}else{if(s)throw new Error("multiple roots");s=c}if(!s)throw new Error("no root");if(null!=t){for(;s.data===D4&&1===s.children.length;)s=s.children[0],--i;for(var k=d.length-1;k>=0&&(c=d[k]).data===D4;--k)c.data=null}if(s.parent=R4,s.eachBefore((function(t){t.depth=t.parent.depth+1,--i})).eachBefore(_4),s.parent=null,i>0)throw new Error("cycle");return s}return r.id=function(t){return arguments.length?(e=E4(t),r):e},r.parentId=function(t){return arguments.length?(n=E4(t),r):n},r.path=function(e){return arguments.length?(t=E4(e),r):t},r}function B4(t){var e=t.length;if(e<2)return"";for(;--e>1&&!G4(t,e););return t.slice(0,e)}function G4(t,e){if("/"===t[e]){for(var n=0;e>0&&"\\"===t[--e];)++n;if(!(1&n))return!0}return!1}function W4(t,e,n,r,i){var a,o,s=t.children,u=s.length,c=new Array(u+1);for(c[0]=o=a=0;a<u;++a)c[a+1]=o+=s[a].value;!function t(e,n,r,i,a,o,u){if(e>=n-1){var l=s[e];return l.x0=i,l.y0=a,l.x1=o,void(l.y1=u)}for(var f=c[e],d=r/2+f,h=e+1,p=n-1;h<p;){var v=h+p>>>1;c[v]<d?h=v+1:p=v}d-c[h-1]<c[h]-d&&e+1<h&&--h;var g=c[h]-f,y=r-g;if(o-i>u-a){var m=r?(i*y+o*g)/r:o;t(e,h,g,i,a,m,u),t(h,n,y,m,a,o,u)}else{var b=r?(a*y+u*g)/r:u;t(e,h,g,i,a,o,b),t(h,n,y,i,b,o,u)}}(0,u,t.value,e,n,r,i)}function V4(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,c=t.value&&(r-e)/t.value;++s<u;)(a=o[s]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*c}function H4(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,c=t.value&&(i-n)/t.value;++s<u;)(a=o[s]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*c}function Y4(t,e,n,r,i){(1&t.depth?H4:V4)(t,e,n,r,i)}var U4=(1+Math.sqrt(5))/2;function q4(t,e,n,r,i,a){for(var o,s,u,c,l,f,d,h,p,v,g,y=[],m=e.children,b=0,x=0,w=m.length,k=e.value;b<w;){u=i-n,c=a-r;do{l=m[x++].value}while(!l&&x<w);for(f=d=l,g=l*l*(v=Math.max(c/u,u/c)/(k*t)),p=Math.max(d/g,g/f);x<w;++x){if(l+=s=m[x].value,s<f&&(f=s),s>d&&(d=s),g=l*l*v,(h=Math.max(d/g,g/f))>p){l-=s;break}p=h}y.push(o={value:l,dice:u<c,children:m.slice(b,x)}),o.dice?V4(o,n,r,i,k?r+=c*l/k:a):H4(o,n,r,k?n+=u*l/k:i,a),k-=l,b=x}return y}const X4=function t(e){function n(t,n,r,i,a){q4(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(U4),K4=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,s,u,c,l,f=-1,d=o.length,h=t.value;++f<d;){for(u=(s=o[f]).children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?V4(s,n,r,i,h?r+=(a-r)*s.value/h:a):H4(s,n,r,h?n+=(i-n)*s.value/h:i,a),h-=s.value}else t._squarify=o=q4(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(U4);function $4(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Z4(){return 0}function Q4(t){return function(){return t}}function J4(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[t.data.name];t.id=t.id||t.data.name,t.path=e,t.children&&t.children.forEach((function(n){n.id="".concat(t.id,"/").concat(n.data.name),n.path=[].concat(M(e),[n.data.name]),J4(n,n.path)}))}function t8(t){var e=ch(t,["data","name"]);e.replaceAll&&(t.path=e.replaceAll(".","/").split("/")),t.children&&t.children.forEach((function(t){t8(t)}))}function e8(t,e,n){var r=n.value,i=function(t,e){var n={treemapBinary:W4,treemapDice:V4,treemapSlice:H4,treemapSliceDice:Y4,treemapSquarify:X4,treemapResquarify:K4},r="treemapSquarify"===t?n[t].ratio(e):n[t];if(!r)throw new TypeError("Invalid tile method!");return r}(e.tile,e.ratio),a=function(t,e){return Array.isArray(t)?"function"==typeof e?z4().path(e)(t):z4()(t):A4(t)}(t,e.path);fn(t)?t8(a):J4(a),r?a.sum((function(t){return e.ignoreParentValue&&t.children?0:yY(r)(t)})).sort(e.sort):a.count(),function(){var t=X4,e=!1,n=1,r=1,i=[0],a=Z4,o=Z4,s=Z4,u=Z4,c=Z4;function l(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore($4),t}function f(e){var n=i[e.depth],r=e.x0+n,l=e.y0+n,f=e.x1-n,d=e.y1-n;f<r&&(r=f=(r+f)/2),d<l&&(l=d=(l+d)/2),e.x0=r,e.y0=l,e.x1=f,e.y1=d,e.children&&(n=i[e.depth+1]=a(e)/2,r+=c(e)-n,l+=o(e)-n,(f-=s(e)-n)<r&&(r=f=(r+f)/2),(d-=u(e)-n)<l&&(l=d=(l+d)/2),t(e,r,l,f,d))}return l.round=function(t){return arguments.length?(e=!!t,l):e},l.size=function(t){return arguments.length?(n=+t[0],r=+t[1],l):[n,r]},l.tile=function(e){return arguments.length?(t=O4(e),l):t},l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()},l.paddingInner=function(t){return arguments.length?(a="function"==typeof t?t:Q4(+t),l):a},l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()},l.paddingTop=function(t){return arguments.length?(o="function"==typeof t?t:Q4(+t),l):o},l.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:Q4(+t),l):s},l.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:Q4(+t),l):u},l.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:Q4(+t),l):c},l}().tile(i).size(e.size).round(e.round).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(a);var o=a.descendants().map((function(t){return Object.assign(t,{id:t.id.replace(/^\//,""),x:[t.x0,t.x1],y:[t.y0,t.y1]})})),s=o.filter("function"==typeof e.layer?e.layer:function(t){return t.height===e.layer});return[s,o]}var n8=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},r8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},i8={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function a8(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.originData,r=void 0===n?[]:n,i=e.layout,a=r8(e,["originData","layout"]),o=vd({},i8,a),s=iH(o,"breadCrumb"),u=iH(o,"active");return function(e){var n=e.update,a=e.setState,o=e.container,c=e.options,l=function(t){return fH(t).select(".".concat(rJ)).node()}(o),f=c.marks[0].state,d=new fW;l.appendChild(d);var h=function(e,c){return n8(t,void 0,void 0,Jn().mark((function t(){var f,p,v,g,y,m;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d.removeChildren(),c&&(f="",p=s.y,v=0,g=[],y=l.getBBox().width,m=e.map((function(t,n){f="".concat(f).concat(t,"/"),g.push(t);var r=new SW({name:f.replace(/\/$/,""),style:Object.assign(Object.assign({text:t,x:v,path:[].concat(g),depth:n},s),{y:p})});d.appendChild(r),v+=r.getBBox().width;var i=new SW({style:Object.assign(Object.assign({x:v,text:" / "},s),{y:p})});return d.appendChild(i),(v+=i.getBBox().width)>y&&(p=d.getBBox().height+s.y,v=0,r.attr({x:v,y:p}),v+=r.getBBox().width,i.attr({x:v,y:p}),v+=i.getBBox().width),n===pK(e)-1&&i.remove(),r})),m.forEach((function(t,e){if(e!==pK(m)-1){var n=Object.assign({},t.attributes);t.attr("cursor","pointer"),t.addEventListener("mouseenter",(function(){t.attr(u)})),t.addEventListener("mouseleave",(function(){t.attr(n)})),t.addEventListener("click",(function(){h(ch(t,["style","path"]),ch(t,["style","depth"]))}))}}))),A6(o,a),a("treemapDrillDown",(function(t){var n=t.marks,a=e.join("/"),o=n.map((function(t){if("rect"!==t.type)return t;var e=r;if(c){var n=r.filter((function(t){var e=ch(t,["id"]);return e&&(e.match("".concat(a,"/"))||a.match(e))})).map((function(t){return{value:0===t.height?ch(t,["value"]):void 0,name:ch(t,["id"])}})),o=i.paddingLeft,s=i.paddingBottom,u=i.paddingRight,l=Object.assign(Object.assign({},i),{paddingTop:(i.paddingTop||d.getBBox().height+10)/(c+1),paddingLeft:o/(c+1),paddingBottom:s/(c+1),paddingRight:u/(c+1),path:function(t){return t.name},layer:function(t){return t.depth===c+1}});e=e8(n,l,{value:"value"})[0]}else e=r.filter((function(t){return 1===t.depth}));var f=[];return e.forEach((function(t){var e=t.path;f.push(RZ(e))})),vd({},t,{data:e,scale:{color:{domain:f}}})}));return Object.assign(Object.assign({},t),{marks:o})})),t.next=6,n(void 0,["legendFilter"]);case 6:case"end":return t.stop()}}),t)})))},p=function(t){var e=t.target;if("rect"===ch(e,["markType"])){var n=ch(e,["__data__","key"]),i=k4(r,(function(t){return t.id===n}));ch(i,"height")&&h(ch(i,"path"),ch(i,"depth"))}};l.addEventListener("click",p);var v=w4(Object.assign(Object.assign({},f.active),f.inactive)),g=function(){jJ(l).forEach((function(t){var e=ch(t,["style","cursor"]),n=k4(r,(function(e){return e.id===ch(t,["__data__","key"])}));if("pointer"!==e&&(null==n?void 0:n.height)){t.style.cursor="pointer";var i=vv(t.attributes,v);t.addEventListener("mouseenter",(function(){t.attr(f.active)})),t.addEventListener("mouseleave",(function(){t.attr(vd(i,f.inactive))}))}}))};return g(),l.addEventListener("mousemove",g),function(){d.remove(),l.removeEventListener("click",p),l.removeEventListener("mousemove",g)}}}var o8=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},s8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},u8={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},c8="movePoint",l8=function(t){var e=t.target,n=e.markType;"line"===n&&(e.attr("_lineWidth",e.attr("lineWidth")||1),e.attr("lineWidth",e.attr("_lineWidth")+3)),"interval"===n&&(e.attr("_opacity",e.attr("opacity")||1),e.attr("opacity",.7*e.attr("_opacity")))},f8=function(t){var e=t.target,n=e.markType;"line"===n&&e.attr("lineWidth",e.attr("_lineWidth")),"interval"===n&&e.attr("opacity",e.attr("_opacity"))},d8=function(t,e,n){return e.map((function(e){var r=["x","color"].reduce((function(r,i){var a=n[i];return a?e[a]===t[a]&&r:r}),!0);return r?Object.assign(Object.assign({},e),t):e}))},h8=function(t){var e=ch(t,["__data__","y"]),n=ch(t,["__data__","y1"])-e,r=t.parentNode,i=r.__data__,a=i.data,o=i.encode,s=i.transform,u=r.childNodes,c=k4(s,(function(t){return"normalizeY"===t.type})),l=ch(o,["y","field"]),f=a[u.indexOf(t)][l];return function(t){return c||arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t/(1-t)/(n/(1-n))*f:t}},p8=function(t,e){var n=ch(t,["__data__","seriesItems",e,"0","value"]),r=ch(t,["__data__","seriesIndex",e]),i=t.parentNode.__data__,a=i.data,o=i.encode,s=i.transform,u=k4(s,(function(t){return"normalizeY"===t.type})),c=ch(o,["y","field"]),l=a[r][c];return function(t){return u?1===n?t:t/(1-t)/(n/(1-n))*l:t}},v8=function(t,e,n){t.forEach((function(t,r){t.attr("stroke",e[1]===r?n.activeStroke:n.stroke)}))},g8=function(t,e,n,r){var i=new mW({style:n}),a=new SW({style:r});return e.appendChild(a),t.appendChild(i),[i,a]},y8=function(t,e){if(ch(t,["options","range","indexOf"])){var n=t.options.range.indexOf(e);return t.sortedDomain[n]}},m8=function(t,e,n){var r=LJ(t,e),i=LJ(t,n)/r;return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]};function b8(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.selection,r=void 0===n?[]:n,i=e.precision,a=void 0===i?2:i,o=s8(e,["selection","precision"]),s=Object.assign(Object.assign({},u8),o||{}),u=iH(s,"path"),c=iH(s,"label"),l=iH(s,"point");return function(e,n,i){var o,s=e.update,f=e.setState,d=e.container,h=e.view,p=e.options,v=p.marks,y=p.coordinate,m=yJ(d),b=jJ(m),x=r,w=y.transform,k=void 0===w?[]:w,E=y.type,O=!!k4(k,(function(t){return"transpose"===t.type})),S="polar"===E,T="theta"===E,A=!!k4(b,(function(t){return"area"===t.markType}));A&&(b=b.filter((function(t){return"area"===t.markType})));var P=new fW({style:{zIndex:2}});m.appendChild(P);var N=function(){i.emit("element-point:select",{nativeEvent:!0,data:{selection:x}})},C=function(t,e){i.emit("element-point:moved",{nativeEvent:!0,data:{changeData:t,data:e}})},_=function(t){var e=t.target;x=[e.parentNode.childNodes.indexOf(e)],N(),R(e)},L=function(t){var e=t.data.selection;if(!t.nativeEvent){var n=ch(b,[null==(x=e)?void 0:x[0]]);n&&R(n)}},R=function(e){var n=e.attributes,r=e.markType,i=e.__data__,p=n.stroke,y=i.points,m=i.seriesTitle,b=i.color,w=i.title,k=i.seriesX,E=i.y1;if(!O||"interval"===r){var _,L=(null==o?void 0:o.view)||h,j=L.scale,D=L.coordinate,I=j.color,F=j.y,z=j.x,B=D.getCenter();P.removeChildren();var G=function(e,n,r,i){return o8(t,void 0,void 0,Jn().mark((function t(){return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f("elementPointMove",(function(t){var a,s=((null===(a=null==o?void 0:o.options)||void 0===a?void 0:a.marks)||v).map((function(t){if(!i.includes(t.type))return t;var a=t.data,o=t.encode,s=Object.keys(o).reduce((function(t,i){var a=o[i];return"x"===i&&(t[a]=e),"y"===i&&(t[a]=n),"color"===i&&(t[a]=r),t}),{}),u=d8(s,a,o);return C(s,u),vd({},t,{data:u,animate:!1})}));return Object.assign(Object.assign({},t),{marks:s})})),t.next=3,s("elementPointMove");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))};if(["line","area"].includes(r))y.forEach((function(n,r){var i=z.invert(k[r]);if(i){var s=new sW({name:c8,style:Object.assign({cx:n[0],cy:n[1],fill:p},l)}),f=p8(e,r);s.addEventListener("mousedown",(function(h){var p=D.output([k[r],0]),v=null==m?void 0:m.length;d.attr("cursor","move"),x[1]!==r&&(x[1]=r,N()),v8(P.childNodes,x,l);var w=g(g8(P,s,u,c),2),E=w[0],O=w[1],M=function(t){var e=n[1]+t.clientY-_[1];if(A)if(S){var i=n[0]+t.clientX-_[0],o=g(m8(B,p,[i,e]),2),u=o[0],c=o[1],l=g(D.output([1,F.output(0)]),2)[1],d=g(D.invert([u,l-(y[r+v][1]-c)]),2)[1],h=(r+1)%v,b=RJ([y[(r-1+v)%v],[u,c],m[h]&&y[h]]);O.attr("text",f(F.invert(d)).toFixed(a)),E.attr("d",b),s.attr("cx",u),s.attr("cy",c)}else{var x=g(D.output([1,F.output(0)]),2)[1],w=g(D.invert([n[0],x-(y[r+v][1]-e)]),2)[1],k=RJ([y[r-1],[n[0],e],m[r+1]&&y[r+1]]);O.attr("text",f(F.invert(w)).toFixed(a)),E.attr("d",k),s.attr("cy",e)}else{var M=g(D.invert([n[0],e]),2)[1],T=RJ([y[r-1],[n[0],e],y[r+1]]);O.attr("text",F.invert(M).toFixed(a)),E.attr("d",T),s.attr("cy",e)}};_=[h.clientX,h.clientY],window.addEventListener("mousemove",M);var T=function(){return o8(t,void 0,void 0,Jn().mark((function t(){var n,r;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d.attr("cursor","default"),window.removeEventListener("mousemove",M),d.removeEventListener("mouseup",T),!An(O.attr("text"))){t.next=5;break}return t.abrupt("return");case 5:return n=Number(O.attr("text")),r=y8(I,b),t.next=9,G(i,n,r,["line","area"]);case 9:o=t.sent,O.remove(),E.remove(),R(e);case 13:case"end":return t.stop()}}),t)})))};d.addEventListener("mouseup",T)})),P.appendChild(s)}})),v8(P.childNodes,x,l);else if("interval"===r){var W=[(y[0][0]+y[1][0])/2,y[0][1]];O?W=[y[0][0],(y[0][1]+y[1][1])/2]:T&&(W=y[0]);var V=h8(e),H=new sW({name:c8,style:Object.assign(Object.assign({cx:W[0],cy:W[1],fill:p},l),{stroke:l.activeStroke})});H.addEventListener("mousedown",(function(n){d.attr("cursor","move");var i=y8(I,b),s=g(g8(P,H,u,c),2),l=s[0],f=s[1],h=function(t){if(O){var e=W[0]+t.clientX-_[0],n=g(D.output([F.output(0),F.output(0)]),1)[0],r=g(D.invert([n+(e-y[2][0]),W[1]]),2)[1],i=RJ([[e,y[0][1]],[e,y[1][1]],y[2],y[3]],!0);f.attr("text",V(F.invert(r)).toFixed(a)),l.attr("d",i),H.attr("cx",e)}else if(T){var o=W[1]+t.clientY-_[1],s=W[0]+t.clientX-_[0],u=g(m8(B,[s,o],W),2),c=u[0],d=u[1],h=g(m8(B,[s,o],y[1]),2),p=h[0],v=h[1],m=D.invert([c,d])[1],b=E-m;if(b<0)return;var x=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[["M"].concat(M(e[1]))],i=LJ(t,e[1]),a=LJ(t,e[0]);return 0===i?r.push(["L"].concat(M(e[3])),["A",a,a,0,n,1].concat(M(e[0])),["Z"]):r.push(["A",i,i,0,n,0].concat(M(e[2])),["L"].concat(M(e[3])),["A",a,a,0,n,1].concat(M(e[0])),["Z"]),r}(B,[[c,d],[p,v],y[2],y[3]],b>.5?1:0);f.attr("text",V(b,!0).toFixed(a)),l.attr("d",x),H.attr("cx",c),H.attr("cy",d)}else{var w=W[1]+t.clientY-_[1],k=g(D.output([1,F.output(0)]),2)[1],S=g(D.invert([W[0],k-(y[2][1]-w)]),2)[1],A=RJ([[y[0][0],w],[y[1][0],w],y[2],y[3]],!0);f.attr("text",V(F.invert(S)).toFixed(a)),l.attr("d",A),H.attr("cy",w)}};_=[n.clientX,n.clientY],window.addEventListener("mousemove",h);var p=function(){return o8(t,void 0,void 0,Jn().mark((function t(){var n;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d.attr("cursor","default"),d.removeEventListener("mouseup",p),window.removeEventListener("mousemove",h),!An(f.attr("text"))){t.next=5;break}return t.abrupt("return");case 5:return n=Number(f.attr("text")),t.next=8,G(w,n,i,[r]);case 8:o=t.sent,f.remove(),l.remove(),R(e);case 12:case"end":return t.stop()}}),t)})))};d.addEventListener("mouseup",p)})),P.appendChild(H)}}};b.forEach((function(t,e){x[0]===e&&R(t),t.addEventListener("click",_),t.addEventListener("mouseenter",l8),t.addEventListener("mouseleave",f8)}));var j=function(t){var e=null==t?void 0:t.target;e&&(e.name===c8||b.includes(e))||(x=[],N(),P.removeChildren())};return i.on("element-point:select",L),i.on("element-point:unselect",j),d.addEventListener("mousedown",j),function(){P.remove(),i.off("element-point:select",L),i.off("element-point:unselect",j),d.removeEventListener("mousedown",j),b.forEach((function(t){t.removeEventListener("click",_),t.removeEventListener("mouseenter",l8),t.removeEventListener("mouseleave",f8)}))}}}var x8=function(){return function(t){var e=t.children;if(!Array.isArray(e))return[];var n=t.x,r=void 0===n?0:n,i=t.y,a=void 0===i?0:i,o=t.width,s=t.height,u=t.data;return e.map((function(t){var e=t.data,n=t.x,i=t.y,c=t.width,l=t.height,f=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["data","x","y","width","height"]);return Object.assign(Object.assign({},f),{data:f0(e,u),x:null!=n?n:r,y:null!=i?i:a,width:null!=c?c:o,height:null!=l?l:s})}))}};x8.props={};var w8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},k8=function(){return function(t){var e=t.children;if(!Array.isArray(e))return[];for(var n=t.direction,r=void 0===n?"row":n,i=t.ratio,a=void 0===i?e.map((function(){return 1})):i,o=t.padding,s=void 0===o?0:o,u=t.data,c=g("col"===r?["y","height","width","x"]:["x","width","height","y"],4),l=c[0],f=c[1],d=c[2],h=c[3],p=a.reduce((function(t,e){return t+e})),v=t[f]-s*(e.length-1),y=a.map((function(t){return v*(t/p)})),m=[],x=t[l]||0,w=0;w<y.length;w+=1){var k=e[w],E=k.data,O=w8(k,["data"]),S=f0(E,u);m.push(Object.assign(b(b(b(b(b({},l,x),f,y[w]),h,t[h]||0),d,t[d]),"data",S),O)),x+=y[w]+s}return m}};k8.props={};var E8=function(){function t(e){k(this,t),this.$value=e}return O(t,[{key:"call",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.$value=t.apply(void 0,[this.$value].concat(n)),this}},{key:"value",value:function(){return this.$value}}],[{key:"of",value:function(e){return new t(e)}}])}(),O8=c0((function(t){var e=t.encode,n=t.data,r=t.scale,i=t.shareSize,a=void 0!==i&&i,o=e.x,s=e.y,u=function(t,e){var i;if(void 0===t||!a)return{};var o=GV(n,(function(e){return e[t]})),s=(null===(i=null==r?void 0:r[e])||void 0===i?void 0:i.domain)||Array.from(o.keys()),u=s.map((function(t){return o.has(t)?o.get(t).length:1}));return{domain:s,flex:u}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:void 0===o?null:{position:"top"}},void 0===o&&{paddingInner:0}),u(o,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:void 0===s?null:{position:"right"}},void 0===s&&{paddingInner:0}),u(s,"y"))}}})),S8=l0((function(t){for(var e,n,r,i=t.data,a=t.scale,o=t.legend,s=[t];s.length;){var u=s.shift(),c=u.children,l=u.encode,f=void 0===l?{}:l,d=u.scale,h=void 0===d?{}:d,p=u.legend,v=void 0===p?{}:p,y=f.color,m=h.color,b=v.color;void 0!==y&&(e=y),void 0!==m&&(n=m),void 0!==b&&(r=b),Array.isArray(c)&&s.push.apply(s,M(c))}var x="string"==typeof e?e:"",w=function(){var t,n=null===(t=null==a?void 0:a.color)||void 0===t?void 0:t.domain;if(void 0!==n)return[n];if(void 0===e)return[void 0];var r="function"==typeof e?e:function(t){return t[e]},o=i.map(r);return o.some((function(t){return"number"==typeof t}))?[EH(o)]:[Array.from(new Set(o)),"ordinal"]}(),k=g(w,2),E=k[0],O=k[1];return Object.assign({encode:{color:{type:"column",value:null!=E?E:[]}},scale:{color:vd({},n,{domain:E,type:O})}},void 0===o&&{legend:{color:vd({title:x},r)}})})),M8=c0((function(){return{animate:{enterType:"fadeIn"}}})),T8=l0((function(){return{frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}}})),A8=l0((function(){return{type:"cell"}})),P8=l0((function(t){var e={type:"custom",callback:function(){var e=t.data,n=t.encode,r=n.x,i=n.y,a=r?Array.from(new Set(e.map((function(t){return t[r]})))):[],o=i?Array.from(new Set(e.map((function(t){return t[i]})))):[];return function(){if(a.length&&o.length){var t,e=[],n=nr(a);try{for(n.s();!(t=n.n()).done;){var s,u=t.value,c=nr(o);try{for(c.s();!(s=c.n()).done;){var l=s.value;e.push(b(b({},r,u),i,l))}}catch(t){c.e(t)}finally{c.f()}}}catch(t){n.e(t)}finally{n.f()}return e}return a.length?a.map((function(t){return b({},r,t)})):o.length?o.map((function(t){return b({},i,t)})):void 0}()}};return{data:{type:"inline",value:t.data,transform:[e]}}})),N8=l0((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:R8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=t.data,o=t.encode,s=t.children,u=t.scale,c=t.x,l=void 0===c?0:c,f=t.y,d=void 0===f?0:f,h=t.shareData,p=void 0!==h&&h,v=t.key,y=a.value,m=o.x,b=o.y,x=u.color.domain;return{children:function(t,a,o){var u=a.x,c=a.y,f=o.paddingLeft,h=o.paddingTop,w=o.marginLeft,k=o.marginTop,E=u.getOptions().domain,O=c.getOptions().domain,S=SH(t),M=t.map(e),T=t.map((function(t){var e=t.x,n=t.y;return[u.invert(e),c.invert(n)]})),A=T.map((function(t){var e=g(t,2),n=e[0],r=e[1];return function(t){var e=t[m],i=t[b];return!(void 0!==m&&e!==n||void 0!==b&&i!==r)}})),P=A.map((function(t){return y.filter(t)})),N=p?ZX(P,(function(t){return t.length})):void 0,C=T.map((function(t){var e=g(t,2),n=e[0],r=e[1];return{columnField:m,columnIndex:E.indexOf(n),columnValue:n,columnValuesLength:E.length,rowField:b,rowIndex:O.indexOf(r),rowValue:r,rowValuesLength:O.length}})),_=C.map((function(t){return Array.isArray(s)?s:[s(t)].flat(1)}));return S.flatMap((function(t){var e=g(M[t],4),a=e[0],o=e[1],s=e[2],u=e[3],c=C[t],p=P[t];return _[t].map((function(e){var g,E,O=e.scale,S=e.key,M=e.facet,T=void 0===M||M,A=e.axis,P=void 0===A?{}:A,C=(e.legend,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["scale","key","facet","axis","legend"])),_=(null===(g=null==O?void 0:O.y)||void 0===g?void 0:g.guide)||P.y,L=(null===(E=null==O?void 0:O.x)||void 0===E?void 0:E.guide)||P.x,R={x:{tickCount:m?5:void 0},y:{tickCount:b?5:void 0}},j=T?p:0===p.length?[]:y,D={color:{domain:x}},I={x:j8(L,n)(c,j),y:j8(_,r)(c,j)};return Object.assign(Object.assign({key:"".concat(S,"-").concat(t),data:j,margin:0,x:a+f+l+w,y:o+h+d+k,parentKey:v,width:s,height:u,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!j.length,dataDomain:N,scale:vd(R,O,D),axis:vd({},P,I),legend:!1},C),i)}))}))}}}));function C8(t){return bH(t.points)}function _8(t,e){return e.length?vd({title:!1,tick:null,label:null},t):vd({title:!1,tick:null,label:null,grid:null},t)}function L8(t){return function(e,n){var r=e.rowIndex,i=e.rowValuesLength,a=e.columnIndex,o=e.columnValuesLength;if(r!==i-1)return _8(t,n);var s=a===o-1&&void 0,u=n.length?void 0:null;return vd({title:s,grid:u},t)}}function R8(t){return function(e,n){var r=e.rowIndex;if(0!==e.columnIndex)return _8(t,n);var i=0===r&&void 0,a=n.length?void 0:null;return vd({title:i,grid:a},t)}}function j8(t,e){return"function"==typeof t?t:null===t||!1===t?function(){return null}:e(t)}var D8=function(){return function(t){return[E8.of(t).call(A8).call(S8).call(M8).call(O8).call(T8).call(P8).call(N8).value()]}};D8.props={};var I8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},F8=c0((function(t){return{scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}}})),z8=l0((function(t){var e=t.data,n=t.children,r=t.x,i=void 0===r?0:r,a=t.y,o=void 0===a?0:a,s=t.key;return{children:function(t,r,a){var u=r.x,c=r.y,l=a.paddingLeft,f=a.paddingTop,d=a.marginLeft,h=a.marginTop,p=u.getOptions().domain,v=c.getOptions().domain,y=SH(t),m=t.map((function(t){return bH(t.points)})),b=t.map((function(t){var e=t.x,n=t.y;return[u.invert(e),c.invert(n)]})),x=b.map((function(t){var e=g(t,2),n=e[0],r=e[1];return{columnField:n,columnIndex:p.indexOf(n),columnValue:n,columnValuesLength:p.length,rowField:r,rowIndex:v.indexOf(r),rowValue:r,rowValuesLength:v.length}})),w=x.map((function(t){return Array.isArray(n)?n:[n(t)].flat(1)}));return y.flatMap((function(t){var n=g(m[t],4),r=n[0],a=n[1],u=n[2],c=n[3],p=g(b[t],2),v=p[0],y=p[1],k=x[t];return w[t].map((function(n){var p,g,m,b=n.scale,x=n.key,w=n.encode,E=n.axis,O=n.interaction,S=I8(n,["scale","key","encode","axis","interaction"]),M=null===(p=null==b?void 0:b.y)||void 0===p?void 0:p.guide,T={x:(m=null===(g=null==b?void 0:b.x)||void 0===g?void 0:g.guide,"function"==typeof m?m:null===m?function(){return null}:function(t,e){if(t.rowIndex!==t.rowValuesLength-1)return _8(m,e)})(k,e),y:G8(M)(k,e)};return Object.assign({data:e,parentKey:s,key:"".concat(x,"-").concat(t),x:r+l+i+d,y:a+f+o+h,width:u,height:c,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:vd({x:{facet:!1},y:{facet:!1}},b),axis:vd({x:{tickCount:5},y:{tickCount:5}},E,T),legend:!1,encode:vd({},w,{x:v,y}),interaction:vd({},O,{legendFilter:!1})},S)}))}))}}})),B8=l0((function(t){var e,n=t.encode,r=I8(t,["encode"]),i=n.position,a=void 0===i?[]:i,o=n.x,s=void 0===o?a:o,u=n.y,c=void 0===u?M(a).reverse():u,l=I8(n,["position","x","y"]),f=[],d=nr([s].flat(1));try{for(d.s();!(e=d.n()).done;){var h,p=e.value,v=nr([c].flat(1));try{for(v.s();!(h=v.n()).done;){var g=h.value;f.push({$x:p,$y:g})}}catch(t){v.e(t)}finally{v.f()}}}catch(t){d.e(t)}finally{d.f()}return Object.assign(Object.assign({},r),{data:f,encode:Object.assign(Object.assign({},l),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},1===[s].flat(1).length&&{x:{paddingInner:0}}),1===[c].flat(1).length&&{y:{paddingInner:0}})})}));function G8(t){return"function"==typeof t?t:null===t?function(){return null}:function(e,n){if(0!==e.columnIndex)return _8(t,n)}}var W8=function(){return function(t){return[E8.of(t).call(A8).call(S8).call(z8).call(B8).call(M8).call(T8).call(F8).value()]}},V8=c0((function(t){return{scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}}})),H8=c0((function(t){return{coordinate:{type:"polar"}}})),Y8=function(t){var e=t.encode,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["encode"]),r=e.position;return Object.assign(Object.assign({},n),{encode:{x:r}})};function U8(t){return function(t){return null}}function q8(t){var e=g(t.points,4),n=e[0],r=e[1],i=e[2],a=e[3],o=vH(n,a),s=hH(n,a),u=mH(s,hH(r,i)),c=1/Math.sin(u/2),l=o/(1+c),f=l*Math.sqrt(2),d=g(i,2),h=d[0],p=d[1],v=yH(s)+u/2,y=l*c;return[h+y*Math.sin(v)-f/2,p-y*Math.cos(v)-f/2,f,f]}var X8=function(){return function(t){return[E8.of(t).call(A8).call(Y8).call(S8).call(H8).call(P8).call(N8,q8,U8,U8,{frame:!1}).call(M8).call(T8).call(V8).value()]}};function K8(t,e,n){var r=[0,n],i=[1-n,1];return"normal"===t?r:"reverse"===t?i:"alternate"===t?e%2==0?r:i:"reverse-alternate"===t?e%2==0?i:r:void 0}var $8=function(){return function(t){var e=t.children,n=void 0===e?[]:e,r=t.duration,i=void 0===r?1e3:r,a=t.iterationCount,o=void 0===a?1:a,s=t.direction,u=void 0===s?"normal":s,c=t.easing,l=void 0===c?"ease-in-out-sine":c,f=n.length;if(!Array.isArray(n)||0===f)return[];var d=n[0].key,h=n.map((function(t){return Object.assign(Object.assign({},t),{key:d})})).map((function(t){return function(t,e,n){for(var r=[t];r.length;){var i=r.pop();i.animate=vd({enter:{duration:e},update:{duration:e,easing:n,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:e}},i.animate||{});var a=i.children;Array.isArray(a)&&r.push.apply(r,M(a))}return t}(t,i,l)}));return Jn().mark((function t(){var e,n,r,i,a,s,c,l;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!("infinite"===o||e<o)){t.next=16;break}r=K8(u,e,f),i=g(r,2),a=i[0],s=i[1],c=a;case 4:if(!(c<s)){t.next=13;break}if(l=Math.abs(c),n===l){t.next=9;break}return t.next=9,h[l];case 9:n=l;case 10:c+=1,t.next=4;break;case 13:e++,t.next=1;break;case 16:case"end":return t.stop()}}),t)}))}};function Z8(t,e,n){var r=n.encode;if(null===t)return[e];var i=function(t){return Array.isArray(t)?t:[t]}(t).map((function(t){var e;return[t,null===(e=pj(r,t))||void 0===e?void 0:e[0]]})).filter((function(t){return rH(g(t,2)[1])}));return Array.from(GV(e,(function(t){return i.map((function(e){return g(e,2)[1][t]})).join("-")})).values())}function Q8(t){return Array.isArray(t)?function(t){return function(e,n,r){return function(n,r){return t.reduce((function(t,i){return 0!==t?t:tQ(e[n][i],e[r][i])}),0)}}}(t):"function"==typeof t?function(t){return function(e,n,r){return a9((function(n){return t(e[n])}))}}(t):"series"===t?e9:"value"===t?n9:"sum"===t?r9:"maxIndex"===t?i9:null}function J8(t,e){var n,r=nr(t);try{for(r.s();!(n=r.n()).done;)n.value.sort(e)}catch(t){r.e(t)}finally{r.f()}}function t9(t,e){return(null==e?void 0:e.domain)||Array.from(new Set(t))}function e9(t,e,n){return a9((function(t){return n[t]}))}function n9(t,e,n){return a9((function(t){return e[t]}))}function r9(t,e,n){var r=SH(t),i=Array.from(GV(r,(function(t){return n[+t]})).entries()),a=new Map(i.map((function(t){var n=g(t,2);return[n[0],n[1].reduce((function(t,n){return t+ +e[n]}))]})));return a9((function(t){return a.get(n[t])}))}function i9(t,e,n){var r=SH(t),i=Array.from(GV(r,(function(t){return n[+t]})).entries()),a=new Map(i.map((function(t){var n=g(t,2);return[n[0],p0(n[1],(function(t){return e[t]}))]})));return a9((function(t){return a.get(n[t])}))}function a9(t){return function(e,n){return tQ(t(e),t(n))}}$8.props={};var o9=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.groupBy,n=void 0===e?"x":e,r=t.orderBy,i=void 0===r?null:r,a=t.reverse,o=void 0!==a&&a,s=t.y,u=void 0===s?"y":s,c=t.y1,l=void 0===c?"y1":c,f=t.series,d=void 0===f||f;return function(t,e){var r,a=e.data,s=e.encode,c=e.style,f=void 0===c?{}:c,h=g(pj(s,"y"),2),p=h[0],v=h[1],y=g(pj(s,"y1"),2),m=y[0],b=y[1],x=g(d?vj(s,"series","color"):pj(s,"color"),1)[0],w=Z8(n,t,e),k=(null!==(r=Q8(i))&&void 0!==r?r:function(){return null})(a,p,x);k&&J8(w,k);var E,O=new Array(t.length),S=new Array(t.length),M=new Array(t.length),T=[],A=[],P=nr(w);try{for(P.s();!(E=P.n()).done;){var N=E.value;o&&N.reverse();var C,_=m?+m[N[0]]:0,L=[],R=[],j=nr(N);try{for(j.s();!(C=j.n()).done;){var D=C.value,I=M[D]=+p[D]-_;I<0?R.push(D):I>=0&&L.push(D)}}catch(t){j.e(t)}finally{j.f()}for(var F=L.length>0?L:R,z=R.length>0?R:L,B=L.length-1,G=0;B>0&&0===p[F[B]];)B--;for(;G<z.length-1&&0===p[z[G]];)G++;T.push(F[B]),A.push(z[G]);var W,V=_,H=nr(R.reverse());try{for(H.s();!(W=H.n()).done;){var Y=W.value,U=M[Y];V=O[Y]=(S[Y]=V)+U}}catch(t){H.e(t)}finally{H.f()}for(var q=_,X=0,K=L;X<K.length;X++){var $=K[X],Z=M[$];Z>0?q=O[$]=(S[$]=q)+Z:O[$]=S[$]=q}}}catch(t){P.e(t)}finally{P.f()}var Q,J=new Set(T),tt=new Set(A),et="y"===u?O:S,nt="y"===l?O:S;return Q="point"===e.type?{y0:lj(p,v),y:cj(et,v)}:{y0:lj(p,v),y:cj(et,v),y1:cj(nt,b)},[t,vd({},e,{encode:Object.assign({},Q),style:Object.assign({first:function(t,e){return J.has(e)},last:function(t,e){return tt.has(e)}},f)})]}};function s9(t,e){var n=0;if(void 0===e){var r,i=nr(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(a=+a)>=a&&++n}}catch(t){i.e(t)}finally{i.f()}}else{var o,s=-1,u=nr(t);try{for(u.s();!(o=u.n()).done;){var c=o.value;null!=(c=e(c,++s,t))&&(c=+c)>=c&&++n}}catch(t){u.e(t)}finally{u.f()}}return n}function u9(t,e){var n=function(t,e){var n,r=0,i=0,a=0;if(void 0===e){var o,s=nr(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;null!=u&&(u=+u)>=u&&(a+=(n=u-i)*(u-(i+=n/++r)))}}catch(t){s.e(t)}finally{s.f()}}else{var c,l=-1,f=nr(t);try{for(f.s();!(c=f.n()).done;){var d=c.value;null!=(d=e(d,++l,t))&&(d=+d)>=d&&(a+=(n=d-i)*(d-(i+=n/++r)))}}catch(t){f.e(t)}finally{f.f()}}if(r>1)return a/(r-1)}(t,e);return n?Math.sqrt(n):n}o9.props={};var c9=Array.prototype,l9=c9.slice;function f9(t){return function(){return t}}c9.map;var d9=Math.sqrt(50),h9=Math.sqrt(10),p9=Math.sqrt(2);function v9(t,e,n){var r,i,a,o=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(o)),u=o/Math.pow(10,s),c=u>=d9?10:u>=h9?5:u>=p9?2:1;return s<0?(a=Math.pow(10,-s)/c,(r=Math.round(t*a))/a<t&&++r,(i=Math.round(e*a))/a>e&&--i,a=-a):(a=Math.pow(10,s)*c,(r=Math.round(t/a))*a<t&&++r,(i=Math.round(e/a))*a>e&&--i),i<r&&.5<=n&&n<2?v9(t,e,2*n):[r,i,a]}function g9(t,e,n){return v9(t=+t,e=+e,n=+n)[2]}function y9(t){return Math.max(1,Math.ceil(Math.log(s9(t))/Math.LN2)+1)}function m9(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=void 0===i?pQ:hQ(i);r>n;){if(r-n>600){var a=r-n+1,o=e-n+1,s=Math.log(a),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(a-u)/a)*(o-a/2<0?-1:1);m9(t,e,Math.max(n,Math.floor(e-o*u/a+c)),Math.min(r,Math.floor(e+(a-o)*u/a+c)),i)}var l=t[e],f=n,d=r;for(b9(t,n,e),i(t[r],l)>0&&b9(t,n,r);f<d;){for(b9(t,f,d),++f,--d;i(t[f],l)<0;)++f;for(;i(t[d],l)>0;)--d}0===i(t[n],l)?b9(t,n,d):b9(t,++d,r),d<=e&&(n=d+1),e<=d&&(r=d-1)}return t}function b9(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function x9(t,e,n){if((r=(t=Float64Array.from(oQ(t,n))).length)&&!isNaN(e=+e)){if(e<=0||r<2)return $X(t);if(e>=1)return ZX(t);var r,i=(r-1)*e,a=Math.floor(i),o=ZX(m9(t,a).subarray(0,a+1));return o+($X(t.subarray(a+1))-o)*(i-a)}}function w9(t,e){return x9(t,.5,e)}function k9(t,e){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aQ;if(!isNaN(e=+e)){if(r=Float64Array.from(t,(function(e,r){return aQ(n(t[r],r,t))})),e<=0)return ZJ(r);if(e>=1)return p0(r);var r,i=Uint32Array.from(t,(function(t,e){return e})),a=r.length-1,o=Math.floor(a*e);return m9(i,o,0,a,(function(t,e){return pQ(r[t],r[e])})),o=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tQ,r=!1;if(1===n.length){var i,a,o=nr(t);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=n(s);(r?tQ(u,i)>0:0===tQ(u,u))&&(e=s,i=u,r=!0)}}catch(t){o.e(t)}finally{o.f()}}else{var c,l=nr(t);try{for(l.s();!(c=l.n()).done;){var f=c.value;(r?n(f,e)>0:0===n(f,f))&&(e=f,r=!0)}}catch(t){l.e(t)}finally{l.f()}}return e}(i.subarray(0,o+1),(function(t){return r[t]})),o>=0?o:-1}}(t,.5,e)}function E9(t,e){var n=0;if(void 0===e){var r,i=nr(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;(a=+a)&&(n+=a)}}catch(t){i.e(t)}finally{i.f()}}else{var o,s=-1,u=nr(t);try{for(u.s();!(o=u.n()).done;){var c=o.value;(c=+e(c,++s,t))&&(n+=c)}}catch(t){u.e(t)}finally{u.f()}}return n}function O9(t){return function(e){return null===e?t:"".concat(t," of ").concat(e)}}function S9(){return[function(t,e){return QJ(t,(function(t){return+e[t]}))},O9("mean")]}function M9(){return[function(t,e){return w9(t,(function(t){return+e[t]}))},O9("median")]}function T9(){return[function(t,e){return ZX(t,(function(t){return+e[t]}))},O9("max")]}function A9(){return[function(t,e){return $X(t,(function(t){return+e[t]}))},O9("min")]}function P9(){return[function(t,e){return t.length},O9("count")]}function N9(){return[function(t,e){return E9(t,(function(t){return+e[t]}))},O9("sum")]}function C9(){return[function(t,e){return e[t[0]]},O9("first")]}function _9(){return[function(t,e){return e[t[t.length-1]]},O9("last")]}var L9=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.groupBy,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["groupBy"]);return function(t,r){var i=r.data,a=r.encode,o=e(t,r);if(!o)return[t,r];var s=Object.entries(n).map((function(t){var e=g(t,2),n=e[0],r=e[1],s=function(t){if("function"==typeof t)return[t,null];var e={mean:S9,max:T9,count:P9,first:C9,last:_9,sum:N9,min:A9,median:M9}[t];if(!e)throw new Error("Unknown reducer: ".concat(t,"."));return e()}(r),u=g(s,2),c=u[0],l=u[1],f=g(pj(a,n),2),d=f[0],h=function(t,e){if(t)return t;var n=e.from;return n?g(pj(a,n),2)[1]:t}(f[1],r),p=o.map((function(t){return c(t,null!=d?d:i)}));return[n,Object.assign(Object.assign({},dj(p,(null==l?void 0:l(h))||h)),{aggregate:!0})]})),u=Object.keys(a).map((function(t){var e=g(pj(a,t),2),n=e[0],r=e[1],i=o.map((function(t){return n[t[0]]}));return[t,cj(i,r)]})),c=o.map((function(t){return i[t[0]]}));return[SH(o),vd({},r,{data:c,encode:Object.fromEntries([].concat(M(u),M(s)))})]}};L9.props={};var R9="thresholds";var j9=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.groupChannels,n=void 0===e?["color"]:e,r=t.binChannels,i=void 0===r?["x","y"]:r,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["groupChannels","binChannels"]),o={};return L9(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(a).filter((function(t){return!g(t,1)[0].startsWith(R9)})))),Object.fromEntries(i.flatMap((function(t){var e=function(e){var n=g(e,1)[0];return+o[t].get(n).split(",")[1]};return e.from=t,[[t,function(e){var n=g(e,1)[0];return+o[t].get(n).split(",")[0]}],["".concat(t,"1"),e]]})))),{groupBy:function(t,e){var r=e.encode,s=i.map((function(t){return g(pj(r,t),1)[0]})),u=iH(a,R9),c=t.filter((function(t){return s.every((function(e){return rH(e[t])}))})),l=[].concat(M(n.map((function(t){return g(pj(r,t),1)[0]})).filter(rH).map((function(t){return function(e){return t[e]}}))),M(i.map((function(t,e){var n=s[e],r=u[t]||function(t){var e=g(EH(t),2),n=e[0],r=e[1];return Math.min(200,function(t,e,n){var r=s9(t),i=u9(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}(t,n,r))}(n),i=function(){var t=BV,e=EH,n=y9;function r(r){Array.isArray(r)||(r=Array.from(r));var i,a,o,s=r.length,u=new Array(s);for(i=0;i<s;++i)u[i]=t(r[i],i,r);var c=e(u),l=c[0],f=c[1],d=n(u,l,f);if(!Array.isArray(d)){var h=f,p=+d;if(e===EH){var v=function(t,e,n){for(var r;;){var i=g9(t,e,n);if(i===r||0===i||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}(l,f,p),y=g(v,2);l=y[0],f=y[1]}if(d=function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];var r=e<t,i=g(r?v9(e,t,n):v9(t,e,n),3),a=i[0],o=i[1],s=i[2];if(!(o>=a))return[];var u=o-a+1,c=new Array(u);if(r)if(s<0)for(var l=0;l<u;++l)c[l]=(o-l)/-s;else for(var f=0;f<u;++f)c[f]=(o-f)*s;else if(s<0)for(var d=0;d<u;++d)c[d]=(a+d)/-s;else for(var h=0;h<u;++h)c[h]=(a+h)*s;return c}(l,f,p),d[0]<=l&&(o=g9(l,f,p)),d[d.length-1]>=f)if(h>=f&&e===EH){var m=g9(l,f,p);isFinite(m)&&(m>0?f=(Math.floor(f/m)+1)*m:m<0&&(f=(Math.ceil(f*-m)+1)/-m))}else d.pop()}for(var b=d.length,x=0,w=b;d[x]<=l;)++x;for(;d[w-1]>f;)--w;(x||w<b)&&(d=d.slice(x,w),b=w-x);var k,E=new Array(b+1);for(i=0;i<=b;++i)(k=E[i]=[]).x0=i>0?d[i-1]:l,k.x1=i<b?d[i]:f;if(isFinite(o)){if(o>0)for(i=0;i<s;++i)null!=(a=u[i])&&l<=a&&a<=f&&E[Math.min(b,Math.floor((a-l)/o))].push(r[i]);else if(o<0)for(i=0;i<s;++i)if(null!=(a=u[i])&&l<=a&&a<=f){var O=Math.floor((l-a)*o);E[Math.min(b,O+(d[O]<=a))].push(r[i])}}else for(i=0;i<s;++i)null!=(a=u[i])&&l<=a&&a<=f&&E[fQ(d,a,0,b)].push(r[i]);return E}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:f9(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:f9([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:f9(Array.isArray(t)?l9.call(t):t),r):n},r}().thresholds(r).value((function(t){return+n[t]}))(c),a=new Map(i.flatMap((function(t){var e=t.x0,n=t.x1,r="".concat(e,",").concat(n);return t.map((function(t){return[t,r]}))})));return o[t]=a,function(t){return a.get(t)}}))));return Array.from(GV(c,(function(t){return l.map((function(e){return e(t)})).join("-")})).values())}}))};j9.props={};var D9=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.thresholds;return j9(Object.assign(Object.assign({},t),{thresholdsX:e,groupChannels:["color"],binChannels:["x"]}))};D9.props={};var I9=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.groupBy,n=void 0===e?"x":e,r=t.reverse,i=void 0!==r&&r,a=t.orderBy,o=t.padding;return function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}}(t,["groupBy","reverse","orderBy","padding"]),function(t,e){var r=e.data,s=e.encode,u=e.scale.series,c=g(pj(s,"y"),1)[0],l=g(vj(s,"series","color"),1)[0],f=t9(l,u),d=vd({},e,{scale:{series:{domain:f,paddingInner:o}}}),h=Z8(n,t,e),p=Q8(a);if(!p)return[t,vd(d,{encode:{series:cj(l)}})];var v=p(r,c,l);v&&J8(h,v);var y,m=new Array(t.length),b=nr(h);try{for(b.s();!(y=b.n()).done;){var x=y.value;i&&x.reverse();for(var w=0;w<x.length;w++)m[x[w]]=f[w]}}catch(t){b.e(t)}finally{b.f()}return[t,vd(d,{encode:{series:cj(a?m:l)}})]}};function F9(t,e,n){if(null===t)return[-.5,.5];var r=t9(t,e),i=new GM({domain:r,range:[0,1],padding:n}).getBandWidth();return[-i/2,i/2]}function z9(t,e,n){return e*(1-t)+n*t}I9.props={};var B9=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.padding,n=void 0===e?0:e,r=t.paddingX,i=void 0===r?n:r,a=t.paddingY,o=void 0===a?n:a,s=t.random,u=void 0===s?Math.random:s;return function(t,e){var n=e.encode,r=e.scale,a=r.x,s=r.y,c=g(pj(n,"x"),1)[0],l=g(pj(n,"y"),1)[0],f=F9(c,a,i),d=F9(l,s,o),h=t.map((function(){return z9.apply(void 0,[u()].concat(M(d)))})),p=t.map((function(){return z9.apply(void 0,[u()].concat(M(f)))}));return[t,vd({scale:{x:{padding:.5},y:{padding:.5}}},e,{encode:{dy:cj(h),dx:cj(p)}})]}};B9.props={};var G9=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.padding,n=void 0===e?0:e,r=t.random,i=void 0===r?Math.random:r;return function(t,e){var r=e.encode,a=e.scale.x,o=F9(g(pj(r,"x"),1)[0],a,n),s=t.map((function(){return z9.apply(void 0,[i()].concat(M(o)))}));return[t,vd({scale:{x:{padding:.5}}},e,{encode:{dx:cj(s)}})]}};G9.props={};var W9=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.padding,n=void 0===e?0:e,r=t.random,i=void 0===r?Math.random:r;return function(t,e){var r=e.encode,a=e.scale.y,o=F9(g(pj(r,"y"),1)[0],a,n),s=t.map((function(){return z9.apply(void 0,[i()].concat(M(o)))}));return[t,vd({scale:{y:{padding:.5}}},e,{encode:{dy:cj(s)}})]}};W9.props={};var V9=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).groupBy,e=void 0===t?"x":t;return function(t,n){for(var r=n.encode,i=(r.x,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(r,["x"])),a=Object.entries(i).filter((function(t){return g(t,1)[0].startsWith("y")})).map((function(t){var e=g(t,1)[0];return[e,pj(r,e)[0]]})),o=a.map((function(e){return[g(e,1)[0],new Array(t.length)]})),s=Z8(e,t,n),u=new Array(s.length),c=0;c<s.length;c++){var l=s[c].flatMap((function(t){return a.map((function(e){return+g(e,2)[1][t]}))})),f=g(EH(l),2),d=f[0],h=f[1];u[c]=(d+h)/2}for(var p=Math.max.apply(Math,u),v=0;v<s.length;v++){var y,m=p-u[v],b=nr(s[v]);try{for(b.s();!(y=b.n()).done;)for(var x=y.value,w=0;w<a.length;w++){var k=g(a[w],2)[1];g(o[w],2)[1][x]=+k[x]+m}}catch(t){b.e(t)}finally{b.f()}}return[t,vd({},n,{encode:Object.fromEntries(o.map((function(t){var e=g(t,2),n=e[0];return[n,cj(e[1],pj(r,n)[1])]})))})]}};V9.props={};var H9=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).groupBy,e=void 0===t?"x":t;return function(t,n){var r,i=n.encode,a=g(pj(i,"y"),1)[0],o=g(pj(i,"y1"),2),s=(o[0],o[1]),u=Z8(e,t,n),c=new Array(t.length),l=nr(u);try{for(l.s();!(r=l.n()).done;)for(var f=r.value,d=f.map((function(t){return+a[t]})),h=function(t){var e=f[t],n=Math.max.apply(Math,M(d.filter((function(e,n){return n!==t}))));c[e]=+a[e]>n?n:a[e]},p=0;p<f.length;p++)h(p)}catch(t){l.e(t)}finally{l.f()}return[t,vd({},n,{encode:{y1:cj(c,s)}})]}};H9.props={};var Y9=function(t){var e=t.groupBy,n=void 0===e?["x"]:e,r=t.reducer,i=void 0===r?function(t,e){return e[t[0]]}:r,a=t.orderBy,o=void 0===a?null:a,s=t.reverse,u=void 0!==s&&s,c=t.duration;return function(t,e){var r=e.encode,a=(Array.isArray(n)?n:[n]).map((function(t){return[t,pj(r,t)[0]]}));if(0===a.length)return[t,e];var s,l=[t],f=nr(a);try{var d=function(){for(var t=g(s.value,2)[1],e=[],n=0,r=l;n<r.length;n++){var i=r[n],a=Array.from(GV(i,(function(e){return t[e]})).values());e.push.apply(e,a)}l=e};for(f.s();!(s=f.n()).done;)d()}catch(t){f.e(t)}finally{f.f()}if(o){var h=g(pj(r,o),1)[0];h&&l.sort((function(t,e){return i(t,h)-i(e,h)})),u&&l.reverse()}for(var p=(c||3e3)/l.length,v=g(c?[hj(t,p)]:vj(r,"enterDuration",hj(t,p)),1)[0],y=g(vj(r,"enterDelay",hj(t,0)),1)[0],m=new Array(t.length),b=0,x=0;b<l.length;b++){var w,k=l[b],E=ZX(k,(function(t){return+v[t]})),O=nr(k);try{for(O.s();!(w=O.n()).done;){var S=w.value;m[S]=+y[S]+x}}catch(t){O.e(t)}finally{O.f()}x+=E}return[t,vd({},e,{encode:{enterDuration:fj(v),enterDelay:fj(m)}})]}};Y9.props={};var U9=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.groupBy,n=void 0===e?"x":e,r=t.basis,i=void 0===r?"max":r;return function(t,e){var r,a=e.encode,o=e.tooltip,s=(a.x,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(a,["x"])),u=Object.entries(s).filter((function(t){return g(t,1)[0].startsWith("y")})).map((function(t){var e=g(t,1)[0];return[e,pj(a,e)[0]]})),c=u.find((function(t){return"y"===g(t,1)[0]})),l=g(c,2)[1],f=u.map((function(e){return[g(e,1)[0],new Array(t.length)]})),d=Z8(n,t,e),h=function(t){if("function"==typeof t)return t;var e={min:function(t,e){return $X(t,(function(t){return e[+t]}))},max:function(t,e){return ZX(t,(function(t){return e[+t]}))},first:function(t,e){return e[t[0]]},last:function(t,e){return e[t[t.length-1]]},mean:function(t,e){return QJ(t,(function(t){return e[+t]}))},median:function(t,e){return w9(t,(function(t){return e[+t]}))},sum:function(t,e){return E9(t,(function(t){return e[+t]}))},deviation:function(t,e){return u9(t,(function(t){return e[+t]}))}};return e[t]||ZX}(i),p=nr(d);try{for(p.s();!(r=p.n()).done;){var v,y=r.value,m=h(y,l),b=nr(y);try{for(b.s();!(v=b.n()).done;)for(var x=v.value,w=0;w<u.length;w++){var k=g(u[w],2)[1];g(f[w],2)[1][x]=+k[x]/m}}catch(t){b.e(t)}finally{b.f()}}}catch(t){p.e(t)}finally{p.f()}var E=cH(o)||(null==o?void 0:o.items)&&0!==(null==o?void 0:o.items.length);return[t,vd({},e,Object.assign({encode:Object.fromEntries(f.map((function(t){var e=g(t,2),n=e[0];return[n,cj(e[1],pj(a,n)[1])]})))},!E&&a.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};function q9(t,e){return[t[0]]}function X9(t,e){return[t[t.length-1]]}function K9(t,e){return[t[p0(t,(function(t){return e[t]}))]]}function $9(t,e){return[t[ZJ(t,(function(t){return e[t]}))]]}U9.props={};var Z9=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.groupBy,n=void 0===e?"series":e,r=t.channel,i=t.selector;return function(t,e){var a=e.encode,o=Z8(n,t,e),s=g(pj(a,r),1)[0],u=function(t){return"function"==typeof t?t:{first:q9,last:X9,max:K9,min:$9}[t]||q9}(i);return[o.flatMap((function(t){return u(t,s)})),e]}};Z9.props={};var Q9=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.selector,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["selector"]);return Z9(Object.assign({channel:"x",selector:e},n))};Q9.props={};var J9=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.selector,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["selector"]);return Z9(Object.assign({channel:"y",selector:e},n))};J9.props={};var t7=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.channels,n=void 0===e?["x","y"]:e,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["channels"]);return L9(Object.assign(Object.assign({},r),{groupBy:function(t,e){return Z8(n,t,e)}}))};t7.props={};var e7=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t7(Object.assign(Object.assign({},t),{channels:["x","color","series"]}))};e7.props={};var n7=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t7(Object.assign(Object.assign({},t),{channels:["y","color","series"]}))};n7.props={};var r7=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t7(Object.assign(Object.assign({},t),{channels:["color"]}))};r7.props={};var i7=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n){var r,i,a,o=t.reverse,s=t.slice,u=t.channel,c=t.by,l=t.ordinal,f=void 0===l||l,d=t.reducer,h=n.encode,p=n.scale,v=(void 0===p?{}:p)[u].domain,y=g(pj(h,null!=c?c:u),1)[0],m=g(pj(h,u),1)[0],x=function(t,e,n){var r=e.by,i=e.reducer,a=void 0===i?"max":i,o=g(pj(n,void 0===r?t:r),1)[0];if("function"==typeof a)return function(t){return a(t,o)};if("max"===a)return function(t){return ZX(t,(function(t){return+o[t]}))};if("min"===a)return function(t){return $X(t,(function(t){return+o[t]}))};if("sum"===a)return function(t){return E9(t,(function(t){return+o[t]}))};if("median"===a)return function(t){return w9(t,(function(t){return+o[t]}))};if("mean"===a)return function(t){return QJ(t,(function(t){return+o[t]}))};if("first"===a)return function(t){return o[t[0]]};if("last"===a)return function(t){return o[t[t.length-1]]};throw new Error("Unknown reducer: ".concat(a))}(u,{by:c,reducer:d},h),w=function(t,e,n){if(!Array.isArray(n))return t;var r=new Set(n);return t.filter((function(t){return r.has(e[t])}))}(e,m,v),k=(r=w,a=function(t){return m[t]},(2!==(i=x).length?dQ(VV(r,i,a),(function(t,e){var n=g(t,2),r=n[0],i=n[1],a=g(e,2),o=a[0];return tQ(i,a[1])||tQ(r,o)})):dQ(GV(r,a),(function(t,e){var n=g(t,2),r=n[0],a=n[1],o=g(e,2),s=o[0],u=o[1];return i(a,u)||tQ(r,s)}))).map((function(t){return g(t,1)[0]}))),E=f?e:dQ(e,(function(t){return y[t]}));o&&(!f&&E.reverse(),k.reverse());var O="number"==typeof s?[0,s]:s,S=s?k.slice.apply(k,M(O)):k;return[E,vd(n,{scale:b({},u,{domain:S})})]}};i7.props={};var a7=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i7(Object.assign(Object.assign({},t),{channel:"x"}))};a7.props={};var o7=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i7(Object.assign(Object.assign({},t),{channel:"y"}))};o7.props={};var s7=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i7(Object.assign(Object.assign({},t),{channel:"color"}))};s7.props={};var u7=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.field,n=t.channel,r=void 0===n?"y":n,i=t.reducer,a=void 0===i?"sum":i;return function(t,n){var i=n.data,o=n.encode,s=g(pj(o,"x"),1)[0],u=e?function(t,e){return"string"==typeof e?t.map((function(t){return t[e]})):t.map(e)}(i,e):pj(o,r)[0],c=function(t,e){if("function"==typeof t)return function(n){return t(n,e)};if("sum"===t)return function(t){return E9(t,(function(t){return+e[t]}))};throw new Error("Unknown reducer: ".concat(t))}(a,u),l=HV(t,c,(function(t){return s[t]})).map((function(t){return t[1]}));return[t,vd({},n,{scale:{x:{flex:l}}})]}};function c7(t){var e=t.padding,n=void 0===e?0:e,r=t.direction,i=void 0===r?"col":r;return function(t,e,r){var a=t.length;if(0===a)return[];for(var o=r.innerWidth,s=r.innerHeight,u=s/o,c=Math.ceil(Math.sqrt(e/u)),l=o/c,f=Math.ceil(e/c),d=f*l;d>s;)l=o/(c+=1),d=(f=Math.ceil(e/c))*l;var h=s-f*l,p=f<=1?0:h/(f-1),v=g(f<=1?[(o-a*l)/(a-1),(s-l)/2]:[0,0],2),y=v[0],m=v[1];return t.map((function(t,e){var r=g(bH(t),4),a=r[0],o=r[1],s=r[2],u=r[3],d="col"===i?e%c:Math.floor(e/f),v="col"===i?Math.floor(e/c):e%f,b=(l-n)/s,x=(l-n)/u,w=(f-v-1)*l+h-o-p*v-m+.5*n;return"translate(".concat(d*l-a+y*d+.5*n,", ").concat(w,") scale(").concat(b,", ").concat(x,")")}))}}u7.props={};var l7=function(t){return function(e,n){return[e,vd({},n,{modifier:c7(t),axis:!1})]}};function f7(t,e,n,r){var i=t.length;if(r>=i||0===r)return t;var a,o,s,u=function(n){return 1*e[t[n]]},c=function(e){return 1*n[t[e]]},l=[],f=(i-2)/(r-2),d=0;l.push(d);for(var h=0;h<r-2;h++){for(var p=0,v=0,g=Math.floor((h+1)*f)+1,y=Math.floor((h+2)*f)+1,m=(y=Math.min(y,i))-g;g<y;g++)p+=u(g),v+=c(g);p/=m,v/=m;var b=Math.floor((h+0)*f)+1,x=Math.floor((h+1)*f)+1,w=[u(d),c(d)];for(a=o=-1;b<x;b++)(o=.5*Math.abs((w[0]-p)*(u(b)-w[1])-(w[0]-c(b))*(v-w[0])))>a&&(a=o,s=b);l.push(s),d=s}return l.push(i-1),l.map((function(e){return t[e]}))}l7.props={};var d7=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.strategy,n=void 0===e?"median":e,r=t.thresholds,i=void 0===r?2e3:r,a=t.groupBy,o=void 0===a?["series","color"]:a,s=function(t){if("function"==typeof t)return t;if("lttb"===t)return f7;var e={first:function(t){return[t[0]]},last:function(t){return[t[t.length-1]]},min:function(t,e,n){return[t[ZJ(t,(function(t){return n[t]}))]]},max:function(t,e,n){return[t[p0(t,(function(t){return n[t]}))]]},median:function(t,e,n){return[t[k9(t,(function(t){return n[t]}))]]}},n=e[t]||e.median;return function(t,e,r,i){var a=function(t,e){for(var n=t.length,r=[],i=0;i<n;)r.push(t.slice(i,i+=e));return r}(t,Math.max(1,Math.floor(t.length/i)));return a.flatMap((function(t){return n(t,e,r)}))}}(n);return function(t,e){var n=e.encode,r=Z8(o,t,e),a=g(pj(n,"x"),1)[0],u=g(pj(n,"y"),1)[0];return[r.flatMap((function(t){return s(t,a,u,i)})),e]}};d7.props={};var h7=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n){var r=n.encode,i=n.data,a=Object.entries(t).map((function(t){var e=g(t,2),n=e[0],i=e[1],a=g(pj(r,n),1)[0];if(!a)return null;var o=function(t){return"object"==typeof t?[t.value,t.ordinal]:[t,!0]}(i),s=g(o,2),u=s[0],c=s[1];if("function"==typeof u)return function(t){return u(a[t])};if(void 0===c||c){var l=Array.isArray(u)?u:[u];return 0===l.length?null:function(t){return l.includes(a[t])}}var f=g(u,2),d=f[0],h=f[1];return function(t){return a[t]>=d&&a[t]<=h}})).filter(rH),o=e.filter((function(t){return a.every((function(e){return e(t)}))})),s=o.map((function(t,e){return e}));if(0===a.length){var u=function(t){var e,n,r=t.encode,i=Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),{y:Object.assign(Object.assign({},t.encode.y),{value:[]})})}),a=null===(e=null==r?void 0:r.color)||void 0===e?void 0:e.field;if(!r||!a)return i;for(var o=0,s=Object.entries(r);o<s.length;o++){var u=g(s[o],2),c=u[0],l=u[1];"x"!==c&&"y"!==c||l.field!==a||(n=Object.assign(Object.assign({},n),b({},c,Object.assign(Object.assign({},l),{value:[]}))))}return n?Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),n)}):i}(n);return[e,u]}var c=Object.entries(r).map((function(t){var e=g(t,2),n=e[0],r=e[1];return[n,Object.assign(Object.assign({},r),{value:s.map((function(t){return r.value[o[t]]})).filter((function(t){return void 0!==t}))})]}));return[s,vd({},n,{encode:Object.fromEntries(c),data:o.map((function(t){return i[t]}))})]}};h7.props={};var p7={},v7={};function g7(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function y7(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function m7(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function b7(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],a=t.length,o=0,s=0,u=a<=0,c=!1;function l(){if(u)return v7;if(c)return c=!1,p7;var e,r,i=o;if(34===t.charCodeAt(i)){for(;o++<a&&34!==t.charCodeAt(o)||34===t.charCodeAt(++o););return(e=o)>=a?u=!0:10===(r=t.charCodeAt(o++))?c=!0:13===r&&(c=!0,10===t.charCodeAt(o)&&++o),t.slice(i+1,e-1).replace(/""/g,'"')}for(;o<a;){if(10===(r=t.charCodeAt(e=o++)))c=!0;else if(13===r)c=!0,10===t.charCodeAt(o)&&++o;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,a)}for(10===t.charCodeAt(a-1)&&--a,13===t.charCodeAt(a-1)&&--a;(r=l())!==v7;){for(var f=[];r!==p7&&r!==v7;)f.push(r),r=l();e&&null==(f=e(f,s++))||i.push(f)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))}function a(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?(r=(n=t).getUTCHours(),i=n.getUTCMinutes(),a=n.getUTCSeconds(),o=n.getUTCMilliseconds(),isNaN(n)?"Invalid Date":function(t){return t<0?"-"+m7(-t,6):t>9999?"+"+m7(t,6):m7(t,4)}(n.getUTCFullYear())+"-"+m7(n.getUTCMonth()+1,2)+"-"+m7(n.getUTCDate(),2)+(o?"T"+m7(r,2)+":"+m7(i,2)+":"+m7(a,2)+"."+m7(o,3)+"Z":a?"T"+m7(r,2)+":"+m7(i,2)+":"+m7(a,2)+"Z":i||r?"T"+m7(r,2)+":"+m7(i,2)+"Z":"")):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t;var n,r,i,a,o}return{parse:function(t,e){var n,i,a=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=g7(t);return function(r,i){return e(n(r),i,t)}}(t,e):g7(t)}));return a.columns=i||[],a},parseRows:r,format:function(e,n){return null==n&&(n=y7(e)),[n.map(o).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=y7(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}}function x7(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;w7&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}var w7=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),k7=function(t){var e=t.value,n=t.format,r=void 0===n?e.split(".").pop():n,i=t.delimiter,a=void 0===i?",":i,o=t.autoType,s=void 0===o||o;return function(){return t=void 0,n=void 0,i=void 0,o=Jn().mark((function t(){var n,i;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if(n=t.sent,"csv"!==r){t.next=10;break}return t.next=6,n.text();case 6:return i=t.sent,t.abrupt("return",b7(a).parse(i,s?x7:ZV));case 10:if("json"!==r){t.next=14;break}return t.next=13,n.json();case 13:return t.abrupt("return",t.sent);case 14:throw new Error("Unknown format: ".concat(r,"."));case 15:case"end":return t.stop()}}),t)})),new(i||(i=Promise))((function(e,r){function a(t){try{u(o.next(t))}catch(t){r(t)}}function s(t){try{u(o.throw(t))}catch(t){r(t)}}function u(t){t.done?e(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(a,s)}u((o=o.apply(t,n||[])).next())}));var t,n,i,o}};k7.props={};var E7=function(t){var e=t.value;return function(){return e}};E7.props={};var O7=function(t){var e,n=t.fields,r=(e=!0,(void 0===n?[]:n).map((function(t){if(Array.isArray(t)){var n=g(t,2),r=n[0],i=n[1];return[r,void 0===i?e:i]}return[t,e]})));return function(t){return M(t).sort((function(t,e){return r.reduce((function(n,r){var i=g(r,2),a=i[0],o=i[1];return 0!==n?n:void 0===o||o?t[a]<e[a]?-1:+(t[a]!==e[a]):t[a]>e[a]?-1:+(t[a]!==e[a])}),0)}))}};O7.props={};var S7=function(t){var e=t.callback;return function(t){return Array.isArray(t)?M(t).sort(e):t}};function M7(t){return null!=t&&!Number.isNaN(t)}S7.props={};var T7=function(t){var e=t.callback,n=void 0===e?M7:e;return function(t){return t.filter(n)}};T7.props={};var A7=function(t){var e=t.fields;return function(t){return t.map((function(t){return function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce((function(e,n){return n in t&&(e[n]=t[n]),e}),{})}(t,e)}))}};A7.props={};var P7=function(t){return function(e){return t&&(n=t,0!==Object.keys(n).length)?e.map((function(e){return Object.entries(e).reduce((function(e,n){var r=g(n,2),i=r[0],a=r[1];return e[t[i]||i]=a,e}),{})})):e;var n}};P7.props={};var N7=function(t){var e=t.fields,n=t.key,r=void 0===n?"key":n,i=t.value,a=void 0===i?"value":i;return function(t){return(n=e)&&0!==Object.keys(n).length?t.flatMap((function(t){return e.map((function(e){return Object.assign(Object.assign({},t),b(b({},r,e),a,t[e]))}))})):t;var n}};N7.props={};var C7=function(t){var e=t.start,n=t.end;return function(t){return t.slice(e,n)}};C7.props={};var _7=function(t){var e=t.callback,n=void 0===e?ZV:e;return function(t){return n(t)}};_7.props={};var L7=function(t){var e=t.callback,n=void 0===e?ZV:e;return function(t){return Array.isArray(t)?t.map(n):t}};function R7(t){return"string"==typeof t?function(e){return e[t]}:t}L7.props={};var j7=function(t){var e=t.join,n=t.on,r=t.select,i=void 0===r?[]:r,a=t.as,o=void 0===a?i:a,s=t.unknown,u=void 0===s?NaN:s,c=g(n,2),l=c[0],f=R7(c[1]),d=R7(l),h=VV(e,(function(t){return g(t,1)[0]}),(function(t){return f(t)}));return function(t){return t.map((function(t){var e=h.get(d(t));return Object.assign(Object.assign({},t),i.reduce((function(t,n,r){return t[o[r]]=e?e[n]:u,t}),{}))}))}};j7.props={};var D7=s(7549),I7=s.n(D7),F7=function(t){var e=t.field,n=t.groupBy,r=t.as,i=void 0===r?["y","size"]:r,a=t.min,o=t.max,s=t.size,u=void 0===s?10:s,c=t.width,l=g(i,2),f=l[0],d=l[1];return function(t){var r=Array.from(GV(t,(function(t){return n.map((function(e){return t[e]})).join("-")})).values());return r.map((function(t){var n=I7().create(t.map((function(t){return t[e]})),{min:a,max:o,size:u,width:c}),r=n.map((function(t){return t.x})),i=n.map((function(t){return t.y}));return Object.assign(Object.assign({},t[0]),b(b({},f,r),d,i))}))}};F7.props={};var z7=function(){return function(t){return console.log("G2 data section:",t),t}};z7.props={};function B7(t,e){return{set:function(n,r,i){if(void 0===e[n])return this;var a=r?r.call(null,e[n]):e[n];return i?i.call(null,a):"function"==typeof t[n]?t[n](a):t[n]=a,this},setAsync:function(n,r,i){return a=this,o=void 0,s=void 0,u=Jn().mark((function a(){var o;return Jn().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0!==e[n]){a.next=2;break}return a.abrupt("return",this);case 2:if(!r){a.next=8;break}return a.next=5,r.call(null,e[n]);case 5:a.t0=a.sent,a.next=9;break;case 8:a.t0=e[n];case 9:return o=a.t0,i?i.call(null,o):"function"==typeof t[n]?t[n](o):t[n]=o,a.abrupt("return",this);case 12:case"end":return a.stop()}}),a,this)})),new(s||(s=Promise))((function(t,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function r(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):function(t){return t instanceof s?t:new s((function(e){e(t)}))}(e.value).then(n,r)}i((u=u.apply(a,o||[])).next())}));var a,o,s,u}}}var G7=Math.PI/180,W7=2048;function V7(t){return t.text}function H7(){return"serif"}function Y7(){return"normal"}function U7(t){return t.value}function q7(){return 90*~~(2*Math.random())}function X7(){return 1}function K7(){}function $7(t,e,n,r){if(!e.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,2048/a,W7/a);var o=0,s=0,u=0,c=n.length;for(--r;++r<c;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font;var l=i.measureText(e.text+"m").width*a,f=e.size<<1;if(e.rotate){var d=Math.sin(e.rotate*G7),h=Math.cos(e.rotate*G7),p=l*h,v=l*d,g=f*h,y=f*d;l=Math.max(Math.abs(p+y),Math.abs(p-y))+31>>5<<5,f=~~Math.max(Math.abs(v+g),Math.abs(v-g))}else l=l+31>>5<<5;if(f>u&&(u=f),o+l>=2048&&(o=0,s+=u,u=0),s+f>=W7)break;i.translate((o+(l>>1))/a,(s+(f>>1))/a),e.rotate&&i.rotate(e.rotate*G7),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=l,e.height=f,e.xoff=o,e.yoff=s,e.x1=l>>1,e.y1=f>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=l}for(var m=i.getImageData(0,0,2048/a,W7/a).data,b=[];--r>=0;)if((e=n[r]).hasText){for(var x=e.width,w=x>>5,k=e.y1-e.y0,E=0;E<k*w;E++)b[E]=0;if(null==(o=e.xoff))return;s=e.yoff;for(var O=0,S=-1,M=0;M<k;M++){for(var T=0;T<x;T++){var A=w*M+(T>>5),P=m[2048*(s+M)+(o+T)<<2]?1<<31-T%32:0;b[A]|=P,O|=P}O?S=M:(e.y0++,k--,M--,s++)}e.y1=e.y0+S,e.sprite=b.slice(0,(e.y1-e.y0)*w)}}}function Z7(t,e,n){n>>=5;for(var r,i=t.sprite,a=t.width>>5,o=t.x-(a<<4),s=127&o,u=32-s,c=t.y1-t.y0,l=(t.y+t.y0)*n+(o>>5),f=0;f<c;f++){r=0;for(var d=0;d<=a;d++)if((r<<u|(d<a?(r=i[f*a+d])>>>s:0))&e[l+d])return!0;l+=n}return!1}function Q7(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function J7(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function ttt(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function ett(){return document.createElement("canvas")}function ntt(t){return"function"==typeof t?t:function(){return t}}var rtt={archimedean:J7,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}};function itt(){var t=[256,256],e=V7,n=H7,r=U7,i=Y7,a=q7,o=X7,s=J7,u=Math.random,c=K7,l=[],f=null,d=1/0,h=ett,p=Y7,v={};function y(e,n,r){for(var i,a,o,c=n.x,l=n.y,f=Math.sqrt(t[0]*t[0]+t[1]*t[1]),d=s(t),h=u()<.5?1:-1,p=-h;(i=d(p+=h))&&(a=~~i[0],o=~~i[1],!(Math.min(Math.abs(a),Math.abs(o))>=f));)if(n.x=c+a,n.y=l+o,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>t[0]||n.y+n.y1>t[1]||r&&Z7(n,e,t[0])||r&&(M=n,T=r,!(M.x+M.x1>T[0].x&&M.x+M.x0<T[1].x&&M.y+M.y1>T[0].y&&M.y+M.y0<T[1].y)))){for(var v=n.sprite,g=n.width>>5,y=t[0]>>5,m=n.x-(g<<4),b=127&m,x=32-b,w=n.y1-n.y0,k=void 0,E=(n.y+n.y0)*y+(m>>5),O=0;O<w;O++){k=0;for(var S=0;S<=g;S++)e[E+S]|=k<<x|(S<g?(k=v[O*g+S])>>>b:0);E+=y}return delete n.sprite,!0}var M,T;return!1}return v.start=function(){var s=g(t,2),m=s[0],b=s[1],x=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=2048/e,t.height=W7/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",n.textBaseline="middle",{context:n,ratio:e}}(h()),w=v.board?v.board:ttt((t[0]>>5)*t[1]),k=l.length,E=[],O=l.map((function(t,s,u){return t.text=e.call(this,t,s,u),t.font=n.call(this,t,s,u),t.style=p.call(this,t,s,u),t.weight=i.call(this,t,s,u),t.rotate=a.call(this,t,s,u),t.size=~~r.call(this,t,s,u),t.padding=o.call(this,t,s,u),t})).sort((function(t,e){return e.size-t.size})),S=-1,M=v.board?[{x:0,y:0},{x:m,y:b}]:void 0;function T(){for(var e=Date.now();Date.now()-e<d&&++S<k;){var n=O[S];n.x=m*(u()+.5)>>1,n.y=b*(u()+.5)>>1,$7(x,n,O,S),n.hasText&&y(w,n,M)&&(c.call(null,"word",{cloud:v,word:n}),E.push(n),M?v.hasImage||Q7(M,n):M=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=t[0]>>1,n.y-=t[1]>>1)}v._tags=E,v._bounds=M,S>=k&&(v.stop(),c.call(null,"end",{cloud:v,words:E,bounds:M}))}return f&&clearInterval(f),f=setInterval(T,0),T(),v},v.stop=function(){return f&&(clearInterval(f),f=null),v},v.createMask=function(e){var n=document.createElement("canvas"),r=g(t,2),i=r[0],a=r[1];if(i&&a){var o=i>>5,s=ttt((i>>5)*a);n.width=i,n.height=a;var u=n.getContext("2d");u.drawImage(e,0,0,e.width,e.height,0,0,i,a);for(var c=u.getImageData(0,0,i,a).data,l=0;l<a;l++)for(var f=0;f<i;f++){var d=o*l+(f>>5),h=l*i+f<<2,p=c[h]>=250&&c[h+1]>=250&&c[h+2]>=250?1<<31-f%32:0;s[d]|=p}v.board=s,v.hasImage=!0}},v.timeInterval=function(t){d=null==t?1/0:t},v.words=function(t){l=t},v.size=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t=[+e[0],+e[1]]},v.text=function(t){e=ntt(t)},v.font=function(t){n=ntt(t)},v.fontWeight=function(t){i=ntt(t)},v.rotate=function(t){a=ntt(t)},v.canvas=function(t){h=ntt(t)},v.spiral=function(t){s=rtt[t]||t},v.fontSize=function(t){r=ntt(t)},v.padding=function(t){o=ntt(t)},v.random=function(t){u=ntt(t)},v.on=function(t){c=ntt(t)},v}var att=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},ott={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return 30*(~~(6*Math.random())-3)}};function stt(t){return new Promise((function(e,n){if(t instanceof HTMLImageElement)e(t);else{if("string"==typeof t){var r=new Image;return r.crossOrigin="anonymous",r.src=t,r.onload=function(){return e(r)},void(r.onerror=function(){console.error("'image ".concat(t," load failed !!!'")),n()})}n()}}))}function utt(t,e){if("function"==typeof t)return t;if(Array.isArray(t)){var n=g(t,2),r=n[0],i=n[1];if(!e)return function(){return(i+r)/2};var a=g(e,2),o=a[0],s=a[1];return s===o?function(){return(i+r)/2}:function(t){var e=t.value;return(i-r)/(s-o)*(e-o)+r}}return function(){return t}}var ctt=function(t,e){return function(n){return r=void 0,i=void 0,a=void 0,o=Jn().mark((function r(){var i,a,o,s,u,c,l,f,d,h,p,v,y,m,b,x,w,k,E,O;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=Object.assign({},ott,t,{canvas:e.createCanvas}),a=itt(),r.next=4,B7(a,i).set("fontSize",(function(t){var e=n.map((function(t){return t.value}));return utt(t,[$X(e),ZX(e)])})).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").set("canvas").setAsync("imageMask",stt,a.createMask);case 4:return a.words(M(n)),o=a.start(),s=g(i.size,2),u=s[0],c=s[1],l=[{x:0,y:0},{x:u,y:c}],f=o._bounds,d=void 0===f?l:f,h=o._tags,p=o.hasImage,v=h.map((function(t){var e=t.x,n=t.y,r=t.font,i=att(t,["x","y","font"]);return Object.assign(Object.assign({},i),{x:e+u/2,y:n+c/2,fontFamily:r})})),y=g(d,2),m=y[0],b=m.x,x=m.y,w=y[1],k=w.x,E=w.y,O={text:"",value:0,opacity:0,fontSize:0},v.push(Object.assign(Object.assign({},O),{x:p?0:b,y:p?0:x}),Object.assign(Object.assign({},O),{x:p?u:k,y:p?c:E})),r.abrupt("return",v);case 14:case"end":return r.stop()}}),r)})),new(a||(a=Promise))((function(t,e){function n(t){try{u(o.next(t))}catch(t){e(t)}}function s(t){try{u(o.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof a?t:new a((function(e){e(t)}))}(e.value).then(n,s)}u((o=o.apply(r,i||[])).next())}));var r,i,a,o}};ctt.props={};var ltt=function(t){var e=t.field,n=void 0===e?"y":e,r=t.alpha,i=void 0===r?.6:r,a=t.as,o=void 0===a?n:a;return function(t){var e=t.map((function(t){return t[n]})),r=function(t,e){if(e<0||e>1)throw new Error("alpha must be between 0 and 1.");if(0===t.length)return[];var n,r=t[0],i=[],a=nr(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(null!=o){null==r&&(r=o);var s=r*e+(1-e)*o;i.push(s),r=s}else i.push(o),console.warn("EMA：The value is null or undefined",t)}}catch(t){a.e(t)}finally{a.f()}return i}(e,i);return t.map((function(t,e){return Object.assign(Object.assign({},t),b({},o,r[e]))}))}};function ftt(t){var e=t.min,n=t.max;return[[e[0],e[1]],[n[0],n[1]]]}function dtt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01,r=g(t,2),i=r[0],a=r[1],o=g(e,2),s=o[0],u=o[1];return i>=s[0]-n&&i<=u[0]+n&&a>=s[1]-n&&a<=u[1]+n}ltt.props={};var htt=function(t){var e=t.priority;return function(t){var n=[];return e&&t.sort(e),t.forEach((function(t){dJ(t);var e=t.getLocalBounds(),r=n.some((function(t){return function(t,e){var n=g(t,2),r=n[0],i=n[1],a=g(e,2),o=a[0],s=a[1];return r[0]<s[0]&&i[0]>o[0]&&r[1]<s[1]&&i[1]>o[1]}(ftt(e),ftt(t.getLocalBounds()))}));r?fJ(t):n.push(t)})),t}};function ptt(t,e){var n=g(t,2),r=n[0],i=n[1],a=g(e,2),o=a[0];return a[1]>r&&i>o}function vtt(){var t=new Map;return[function(e){return t.get(e)},function(e,n){return t.set(e,n)}]}function gtt(t){var e=t.cloneNode(!0),n=e.getElementById("connector");n&&e.removeChild(n);var r=e.getRenderBounds(),i=r.min,a=r.max;return e.destroy(),{min:i,max:a}}var ytt=function(t){var e=t.maxIterations,n=void 0===e?10:e,r=t.maxError,i=void 0===r?.1:r,a=t.padding,o=void 0===a?1:a;return function(t){var e=t.length;if(e<=1)return t;var r,a=g(vtt(),2),s=a[0],u=a[1],c=g(vtt(),2),l=c[0],f=c[1],d=g(vtt(),2),h=d[0],p=d[1],v=g(vtt(),2),y=v[0],m=v[1],b=nr(t);try{for(b.s();!(r=b.n()).done;){var x=r.value,w=gtt(x),k=w.min,E=w.max,O=g(k,2),S=O[0],M=O[1],T=g(E,2),A=T[0],P=T[1];u(x,M),f(x,M),p(x,P-M),m(x,[S,A])}}catch(t){b.e(t)}finally{b.f()}for(var N=0;N<n;N++){t.sort((function(t,e){return tQ(l(t),l(e))}));for(var C=0,_=0;_<e-1;_++){for(var L=t[_],R=_+1,j=void 0;(j=t[R])&&!ptt(y(L),y(j));)R+=1;if(j){var D=l(L),I=h(L),F=l(j),z=F-(D+I);if(z<o){var B=(o-z)/2;C=Math.max(C,B),f(L,D-B),f(j,F+B)}}}if(C<i)break}var G,W=nr(t);try{for(W.s();!(G=W.n()).done;){var V=G.value;V.style.y+=l(V)-s(V)}}catch(t){W.e(t)}finally{W.f()}return t}},mtt=function(){return function(t){return t.forEach((function(t){dJ(t);var e=t.attr("bounds"),n=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01,r=g(t,2),i=r[0],a=r[1];return!(dtt(i,e,n)&&dtt(a,e,n))}(ftt(t.getLocalBounds()),e);n&&fJ(t)})),t}};function btt(t){var e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function xtt(t,e,n){return.2126*btt(t)+.7152*btt(e)+.0722*btt(n)}function wtt(t,e){if(!t||!e||t===e)return 1;var n=t.r,r=t.g,i=t.b,a=e.r,o=e.g,s=e.b,u=xtt(n,r,i),c=xtt(a,o,s);return(Math.max(u,c)+.05)/(Math.min(u,c)+.05)}var ktt=function(t){var e=t.threshold,n=void 0===e?4.5:e,r=t.palette,i=void 0===r?["#000","#fff"]:r;return function(t){return t.forEach((function(t){var e=t.attr("dependentElement").parsedStyle.fill;wtt(t.parsedStyle.fill,e)<n&&t.attr("fill",function(t,e){return e[p0(e,(function(e){return wtt(t,function(t){return"object"==typeof t?t:BF(t)}(e))}))]}(e,i))})),t}},Ett=function(){return function(t,e){e.canvas;var n=e.layout;return t.forEach((function(t){dJ(t);var e,r,i,a,o,s,u,c,l,f,d,h,p,v,y,m,b,x,w=t.getRenderBounds(),k=w.max,E=w.min,O=g(k,2),S=O[0],M=O[1],T=g(E,2),A=(e=[[T[0],T[1]],[S,M]],r=[[n.x,n.y],[n.x+n.width,n.y+n.height]],i=g(r,2),a=g(i[0],2),o=a[0],s=a[1],u=g(i[1],2),c=u[0],l=u[1],f=g(e,2),d=g(f[0],2),h=d[0],p=d[1],v=g(f[1],2),y=v[0],m=v[1],b=0,x=0,h<o?b=o-h:y>c&&(b=c-y),p<s?x=s-p:m>l&&(x=l-m),[b,x]);t.style.connector&&t.style.connectorPoints&&(t.style.connectorPoints[0][0]-=A[0],t.style.connectorPoints[0][1]-=A[1]),t.style.x+=A[0],t.style.y+=A[1]})),t}};function Ott(){return{"data.fetch":k7,"data.inline":E7,"data.sortBy":O7,"data.sort":S7,"data.filter":T7,"data.pick":A7,"data.rename":P7,"data.fold":N7,"data.slice":C7,"data.custom":_7,"data.map":L7,"data.join":j7,"data.kde":F7,"data.log":z7,"data.wordCloud":ctt,"data.ema":ltt,"transform.stackY":o9,"transform.binX":D9,"transform.bin":j9,"transform.dodgeX":I9,"transform.jitter":B9,"transform.jitterX":G9,"transform.jitterY":W9,"transform.symmetryY":V9,"transform.diffY":H9,"transform.stackEnter":Y9,"transform.normalizeY":U9,"transform.select":Z9,"transform.selectX":Q9,"transform.selectY":J9,"transform.groupX":e7,"transform.groupY":n7,"transform.groupColor":r7,"transform.group":t7,"transform.sortX":a7,"transform.sortY":o7,"transform.sortColor":s7,"transform.flexX":u7,"transform.pack":l7,"transform.sample":d7,"transform.filter":h7,"coordinate.cartesian":XR,"coordinate.polar":$R,"coordinate.transpose":ZR,"coordinate.theta":QR,"coordinate.parallel":JR,"coordinate.fisheye":tj,"coordinate.radial":nj,"coordinate.radar":rj,"coordinate.helix":ij,"encode.constant":aj,"encode.field":oj,"encode.transform":sj,"encode.column":uj,"mark.interval":kY,"mark.rect":OY,"mark.line":fU,"mark.point":pq,"mark.text":Tq,"mark.cell":Nq,"mark.area":Bq,"mark.link":Jq,"mark.image":nX,"mark.polygon":sX,"mark.box":fX,"mark.vector":hX,"mark.lineX":mX,"mark.lineY":wX,"mark.connector":MX,"mark.range":NX,"mark.rangeX":LX,"mark.rangeY":DX,"mark.path":WX,"mark.shape":UX,"mark.density":KX,"mark.heatmap":aK,"mark.wordCloud":uK,"palette.category10":cK,"palette.category20":lK,"scale.linear":fK,"scale.ordinal":dK,"scale.band":hK,"scale.identity":TK,"scale.point":PK,"scale.time":b$,"scale.log":M$,"scale.pow":P$,"scale.sqrt":C$,"scale.threshold":L$,"scale.quantile":D$,"scale.quantize":F$,"scale.sequential":G$,"scale.constant":W$,"theme.classic":U$,"theme.classicDark":K$,"theme.academy":Z$,"theme.light":Y$,"theme.dark":X$,"component.axisX":_Z,"component.axisY":LZ,"component.legendCategory":IZ,"component.legendContinuous":XZ,"component.legends":KZ,"component.title":JZ,"component.sliderX":kQ,"component.sliderY":EQ,"component.scrollbarX":MQ,"component.scrollbarY":TQ,"animation.scaleInX":AQ,"animation.scaleOutX":PQ,"animation.scaleInY":NQ,"animation.scaleOutY":CQ,"animation.waveIn":_Q,"animation.fadeIn":LQ,"animation.fadeOut":RQ,"animation.zoomIn":jQ,"animation.zoomOut":DQ,"animation.pathIn":IQ,"animation.morphing":$Q,"animation.growInX":ZQ,"animation.growInY":QQ,"interaction.elementHighlight":zJ,"interaction.elementHighlightByX":BJ,"interaction.elementHighlightByColor":GJ,"interaction.elementSelect":VJ,"interaction.elementSelectByX":HJ,"interaction.elementSelectByColor":YJ,"interaction.fisheye":UJ,"interaction.chartIndex":$J,"interaction.tooltip":g6,"interaction.legendFilter":_6,"interaction.legendHighlight":L6,"interaction.brushHighlight":G6,"interaction.brushXHighlight":V6,"interaction.brushYHighlight":Y6,"interaction.brushAxisHighlight":r4,"interaction.brushFilter":o4,"interaction.brushXFilter":s4,"interaction.brushYFilter":u4,"interaction.sliderFilter":h4,"interaction.scrollbarFilter":v4,"interaction.poptip":x4,"interaction.treemapDrillDown":a8,"interaction.elementPointMove":b8,"composition.spaceLayer":x8,"composition.spaceFlex":k8,"composition.facetRect":D8,"composition.repeatMatrix":W8,"composition.facetCircle":X8,"composition.timingKeyframe":$8,"labelTransform.overlapHide":htt,"labelTransform.overlapDodgeY":ytt,"labelTransform.overflowHide":mtt,"labelTransform.contrastReverse":ktt,"labelTransform.exceedAdjust":Ett}}var Stt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Mtt(t,e){return $X(t,(function(t){return e[t]}))}function Ttt(t,e){return ZX(t,(function(t){return e[t]}))}function Att(t,e){var n=2.5*Ptt(t,e)-1.5*Ctt(t,e);return $X(t,(function(t){return e[t]>=n?e[t]:NaN}))}function Ptt(t,e){return x9(t,.25,(function(t){return e[t]}))}function Ntt(t,e){return x9(t,.5,(function(t){return e[t]}))}function Ctt(t,e){return x9(t,.75,(function(t){return e[t]}))}function _tt(t,e){var n=2.5*Ctt(t,e)-1.5*Ptt(t,e);return ZX(t,(function(t){return e[t]<=n?e[t]:NaN}))}function Ltt(){return function(t,e){var n=e.encode,r=n.y,i=n.x,a=r.value,o=i.value,s=Array.from(GV(t,(function(t){return o[+t]})).values()).flatMap((function(t){var e=Att(t,a),n=_tt(t,a);return t.filter((function(t){return a[t]<e||a[t]>n}))}));return[s,e]}}var Rtt=function(t){var e=t.data,n=t.encode,r=t.style,i=void 0===r?{}:r,a=t.tooltip,o=void 0===a?{}:a,s=(t.transform,t.animate),u=Stt(t,["data","encode","style","tooltip","transform","animate"]),c=i.point,l=void 0===c||c,f=Stt(i,["point"]),d=n.y,h={y:d,y1:d,y2:d,y3:d,y4:d},p={y1:Ptt,y2:Ntt,y3:Ctt},v=JJ(o,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),g=JJ(o,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!l)return Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:Mtt},p),{y4:Ttt})],encode:Object.assign(Object.assign({},n),h),style:f,tooltip:v},u);var y=iH(f,"box"),m=iH(f,"point");return[Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:Att},p),{y4:_tt})],encode:Object.assign(Object.assign({},n),h),style:y,tooltip:v,animate:n0(s,"box")},u),{type:"point",data:e,transform:[{type:Ltt}],encode:n,style:Object.assign({},m),tooltip:g,animate:n0(s,"point")}]};Rtt.props={};var jtt=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))/2},Dtt=function(t,e){if(e){var n=e.coordinate;if(null==n?void 0:n.getCenter){var r=n.getCenter();return function(n,i,a){var o=e.canvas.document,s=i.color,u=i.index,c=o.createElement("g",{}),l=jtt(n[0],n[1]),f=2*jtt(n[0],r),d=o.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M"].concat(M(n[0])),["A",l,l,0,1,0].concat(M(n[1])),["A",f+2*l,f+2*l,0,0,0].concat(M(n[2])),["A",l,l,0,1,0===u?0:1].concat(M(n[3])),["A",f,f,0,0,1].concat(M(n[0])),["Z"]]},a),Lw(t,["shape","last","first"])),{fill:s||a.color})});return c.appendChild(d),c}}}},Itt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Ftt={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-1.1*Math.PI,endAngle:.1*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},ztt={style:{shape:function(t,e){t.shape;var n=t.radius,r=Itt(t,["shape","radius"]),i=iH(r,"pointer"),a=iH(r,"pin"),o=i.shape,s=Itt(i,["shape"]),u=a.shape,c=Itt(a,["shape"]),l=e.coordinate,f=e.theme;return function(t,e){var i=t.map((function(t){return l.invert(t)})),a=function(t){var e=t.getOptions().transformations.find((function(t){return"polar"===t[0]}));return _h(e).slice(1)}(l),d=g(a,3),h=d[0],p=d[1],v=d[2],y=l.clone(),m=e.color,b=nj({startAngle:h,endAngle:p,innerRadius:v,outerRadius:n});b.push(["cartesian"]),y.update({transformations:b});var x=i.map((function(t){return y.map(t)})),w=g(IH(x),2),k=w[0],E=w[1],O=g(l.getCenter(),2),S=O[0],M=O[1],T=Object.assign(Object.assign({x1:k,y1:E,x2:S,y2:M,stroke:m},s),r),A=Object.assign(Object.assign({cx:S,cy:M,stroke:m},c),r),P=fH(new fW);return cH(o)||("function"==typeof o?P.append((function(){return o(x,e,y,f)})):P.append("line").call(NH,T).node()),cH(u)||("function"==typeof u?P.append((function(){return u(x,e,y,f)})):P.append("circle").call(NH,A).node()),P.node()}},lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},Btt={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},tooltip:!1};function Gtt(t,e){var n=e.target,r=e.total,i=t.content;return i?i(n,r):n.toString()}var Wtt=function(t){var e=t.data,n=void 0===e?{}:e,r=t.scale,i=void 0===r?{}:r,a=t.style,o=void 0===a?{}:a,s=t.animate,u=void 0===s?{}:s,c=(t.transform,Itt(t,["data","scale","style","animate","transform"])),l=function(t,e){var n=function(t){if(Oe(t)){var e=Math.max(0,Math.min(t,1));return{percent:e,target:e,total:1}}return t}(t),r=n.name,i=void 0===r?"score":r,a=n.target,o=n.total,s=n.percent,u=n.thresholds,c=void 0===u?[]:u,l=s||a,f=s?1:o,d=Object.assign({y:{domain:[0,f]}},e);return c.length?{targetData:[{x:i,y:l,color:"target"}],totalData:c.map((function(t,e){return{x:i,y:e>=1?t-c[e-1]:t,color:e}})),target:l,total:f,scale:d}:{targetData:[{x:i,y:l,color:"target"}],totalData:[{x:i,y:l,color:"target"},{x:i,y:f-l,color:"total"}],target:l,total:f,scale:d}}(n,i),f=l.targetData,d=l.totalData,h=l.target,p=l.total,v=l.scale,y=iH(o,"text"),m=y.tooltip,b=Itt(y,["tooltip"]),x=function(t,e){return Object.fromEntries(Object.entries(t).filter((function(t){var n=g(t,1)[0];return e.find((function(t){return n.startsWith(t)}))})))}(o,["pointer","pin"]),w=iH(o,"arc"),k=w.shape;return[vd({},Ftt,Object.assign({type:"interval",transform:[{type:"stackY"}],data:d,scale:v,style:"round"===k?Object.assign(Object.assign({},w),{shape:Dtt}):w,animate:"object"==typeof u?iH(u,"arc"):u},c)),vd({},Ftt,ztt,Object.assign({type:"point",data:f,scale:v,style:x,animate:"object"==typeof u?iH(u,"indicator"):u},c)),vd({},Btt,{style:Object.assign({text:Gtt(b,{target:h,total:p})},b),tooltip:m,animate:"object"==typeof u?iH(u,"text"):u})]};function Vtt(t,e,n){return t+(e-t)*n}function Htt(t,e,n,r){return 0===e?[[t+.5*n/Math.PI/2,r/2],[t+.5*n/Math.PI,r],[t+n/4,r]]:1===e?[[t+.5*n/Math.PI/2*(Math.PI-2),r],[t+.5*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:2===e?[[t+.5*n/Math.PI/2,-r/2],[t+.5*n/Math.PI,-r],[t+n/4,-r]]:[[t+.5*n/Math.PI/2*(Math.PI-2),-r],[t+.5*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function Ytt(t,e,n,r,i,a,o){for(var s=4*Math.ceil(2*t/n*4),u=[],c=r;c<2*-Math.PI;)c+=2*Math.PI;for(;c>0;)c-=2*Math.PI;var l=a-t+(c=c/Math.PI/2*n)-2*t;u.push(["M",l,e]);for(var f=0,d=0;d<s;++d){var h=Htt(d*n/4,d%4,n,i);u.push(["C",h[0][0]+l,-h[0][1]+e,h[1][0]+l,-h[1][1]+e,h[2][0]+l,-h[2][1]+e]),d===s-1&&(f=h[2][0])}return u.push(["L",f+l,o+t]),u.push(["L",l,o+t]),u.push(["Z"]),u}Wtt.props={};var Utt={pin:function(t,e,n){var r=4*n/3,i=Math.max(r,2*n),a=r/2,o=t,s=a+e-i/2,u=Math.asin(a/(.85*(i-a))),c=Math.sin(u)*a,l=Math.cos(u)*a,f=o-l,d=s+c,h=t,p=s+a/Math.sin(u);return"\n      M ".concat(f," ").concat(d,"\n      A ").concat(a," ").concat(a," 0 1 1 ").concat(f+2*l," ").concat(d,"\n      Q ").concat(h," ").concat(p," ").concat(t," ").concat(e+i/2,"\n      Q ").concat(h," ").concat(p," ").concat(f," ").concat(d,"\n      Z \n    ")},rect:function(t,e,n){var r=.618*n;return"\n      M ".concat(t-r," ").concat(e-n,"\n      L ").concat(t+r," ").concat(e-n,"\n      L ").concat(t+r," ").concat(e+n,"\n      L ").concat(t-r," ").concat(e+n,"\n      Z\n    ")},circle:function(t,e,n){return"\n      M ".concat(t," ").concat(e-n," \n      a ").concat(n," ").concat(n," 0 1 0 0 ").concat(2*n,"\n      a ").concat(n," ").concat(n," 0 1 0 0 ").concat(2*-n,"\n      Z\n    ")},diamond:function(t,e,n){return"\n      M ".concat(t," ").concat(e-n,"\n      L ").concat(t+n," ").concat(e,"\n      L ").concat(t," ").concat(e+n,"\n      L ").concat(t-n," ").concat(e,"\n      Z\n    ")},triangle:function(t,e,n){return"\n      M ".concat(t," ").concat(e-n,"\n      L ").concat(t+n," ").concat(e+n,"\n      L ").concat(t-n," ").concat(e+n,"\n      Z\n    ")}},qtt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Xtt=function(t,e){if(e){var n=e.coordinate,r=t.liquidOptions,i=t.styleOptions,a=r.liquidShape,o=r.percent,s=i.background,u=i.outline,c=void 0===u?{}:u,l=i.wave,f=void 0===l?{}:l,d=qtt(i,["background","outline","wave"]),h=c.border,p=void 0===h?2:h,v=c.distance,y=void 0===v?0:v,m=qtt(c,["border","distance"]),b=f.length,x=void 0===b?192:b,w=f.count,k=void 0===w?3:w;return function(t,r,i){var u=e.canvas.document,c=i.color,l=i.fillOpacity,f=Object.assign(Object.assign({fill:c},i),d),h=u.createElement("g",{}),v=g(n.getCenter(),2),b=v[0],w=v[1],E=n.getSize(),O=Math.min.apply(Math,M(E))/2,S=_n(a)?a:function(){return Utt[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"circle"]||Utt.circle}(a),T=S.apply(void 0,[b,w,O].concat(M(E)));if(Object.keys(s).length){var A=u.createElement("path",{style:Object.assign({d:T,fill:"#fff"},s)});h.appendChild(A)}if(o>0){var P=u.createElement("path",{style:{d:T}});h.appendChild(P),h.style.clipPath=P,function(t,e,n,r,i,a,o,s,u,c,l){for(var f=i.fill,d=i.fillOpacity,h=i.opacity,p=0;p<r;p++){var v=r<=1?1:p/(r-1),g=Ytt(s,o+s*n,u,0,s/40,t,e),y=l.createElement("path",{style:{d:g,fill:f,opacity:Vtt(.2,.9,v)*Number(h||d)}});a.appendChild(y);try{0;var m=[{transform:"translate(0, 0)"},{transform:"translate(".concat(2*u,", 0)")}];y.animate(m,{duration:2*Vtt(2500,5e3,v),iterations:1/0})}catch(t){console.warn("off-screen group animate error!")}}}(b,w,1-o,k,f,h,P.getBBox().y,2*O,x,0,u)}var N=u.createElement("path",{style:{d:T,fill:"transparent",lineWidth:p+2*y,stroke:"#fff"}}),C=u.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:T,stroke:c,strokeOpacity:l,lineWidth:p},f),m),{fill:"transparent"})});return h.appendChild(N),h.appendChild(C),h}}};Xtt.props={};var Ktt={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:Xtt},animate:{enter:{type:"fadeIn"}}},$tt={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},Ztt=function(t){var e=t.data,n=void 0===e?{}:e,r=t.style,i=void 0===r?{}:r,a=t.animate,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["data","style","animate"]),s=Math.max(0,Oe(n)?n:null==n?void 0:n.percent),u=[{percent:s,type:"liquid"}],c=Object.assign(Object.assign({},iH(i,"text")),iH(i,"content")),l=iH(i,"outline"),f=iH(i,"wave"),d=iH(i,"background");return[vd({},Ktt,Object.assign({type:"interval",data:u,style:{liquidOptions:{percent:s,liquidShape:null==i?void 0:i.shape},styleOptions:Object.assign(Object.assign({},i),{outline:l,wave:f,background:d})},animate:a},o)),vd({},$tt,{style:Object.assign({text:"".concat(kH(100*s)," %")},c),animate:a})]};Ztt.props={};var Qtt=s(7289);function Jtt(t,e){var n,r=function(t){for(var e=[],n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r)for(var i=ret(t[n],t[r]),a=0;a<i.length;++a){var o=i[a];o.parentIndex=[n,r],e.push(o)}return e}(t),i=r.filter((function(e){return function(t,e){for(var n=0;n<e.length;++n)if(eet(t,e[n])>e[n].radius+1e-10)return!1;return!0}(e,t)})),a=0,o=0,s=[];if(i.length>1){var u=function(t){for(var e={x:0,y:0},n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}(i);for(n=0;n<i.length;++n){var c=i[n];c.angle=Math.atan2(c.x-u.x,c.y-u.y)}i.sort((function(t,e){return e.angle-t.angle}));var l=i[i.length-1];for(n=0;n<i.length;++n){var f=i[n];o+=(l.x+f.x)*(f.y-l.y);for(var d={x:(f.x+l.x)/2,y:(f.y+l.y)/2},h=null,p=0;p<f.parentIndex.length;++p)if(l.parentIndex.indexOf(f.parentIndex[p])>-1){var v=t[f.parentIndex[p]],g=Math.atan2(f.x-v.x,f.y-v.y),y=Math.atan2(l.x-v.x,l.y-v.y),m=y-g;m<0&&(m+=2*Math.PI);var b=y-m/2,x=eet(d,{x:v.x+v.radius*Math.sin(b),y:v.y+v.radius*Math.cos(b)});x>2*v.radius&&(x=2*v.radius),(null===h||h.width>x)&&(h={circle:v,width:x,p1:f,p2:l})}null!==h&&(s.push(h),a+=tet(h.circle.radius,h.width),l=f)}}else{var w=t[0];for(n=1;n<t.length;++n)t[n].radius<w.radius&&(w=t[n]);var k=!1;for(n=0;n<t.length;++n)if(eet(t[n],w)>Math.abs(w.radius-t[n].radius)){k=!0;break}k?a=o=0:(a=w.radius*w.radius*Math.PI,s.push({circle:w,p1:{x:w.x,y:w.y+w.radius},p2:{x:w.x-1e-10,y:w.y+w.radius},width:2*w.radius}))}return o/=2,e&&(e.area=a+o,e.arcArea=a,e.polygonArea=o,e.arcs=s,e.innerPoints=i,e.intersectionPoints=r),a+o}function tet(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function eet(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function net(t,e,n){if(n>=t+e)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);var r=e-(n*n-t*t+e*e)/(2*n);return tet(t,t-(n*n-e*e+t*t)/(2*n))+tet(e,r)}function ret(t,e){var n=eet(t,e),r=t.radius,i=e.radius;if(n>=r+i||n<=Math.abs(r-i))return[];var a=(r*r-i*i+n*n)/(2*n),o=Math.sqrt(r*r-a*a),s=t.x+a*(e.x-t.x)/n,u=t.y+a*(e.y-t.y)/n,c=-(e.y-t.y)*(o/n),l=-(e.x-t.x)*(o/n);return[{x:s+c,y:u-l},{x:s-c,y:u+l}]}function iet(t,e,n){return Math.min(t,e)*Math.min(t,e)*Math.PI<=n+1e-10?Math.abs(t-e):(0,Qtt.bisect)((function(r){return net(t,e,r)-n}),0,t+e)}function aet(t,e){var n=function(t,e){for(var n,r=e&&e.lossFunction?e.lossFunction:oet,i={},a={},o=0;o<t.length;++o){var s=t[o];1==s.sets.length&&(n=s.sets[0],i[n]={x:1e10,y:1e10,rowid:Object.keys(i).length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},a[n]=[])}t=t.filter((function(t){return 2==t.sets.length}));for(var u=0;u<t.length;++u){var c=t[u],l=c.hasOwnProperty("weight")?c.weight:1,f=c.sets[0],d=c.sets[1];c.size+1e-10>=Math.min(i[f].size,i[d].size)&&(l=0),a[f].push({set:d,size:c.size,weight:l}),a[d].push({set:f,size:c.size,weight:l})}var h=[];for(n in a)if(a.hasOwnProperty(n)){for(var p=0,v=0;v<a[n].length;++v)p+=a[n][v].size*a[n][v].weight;h.push({set:n,size:p})}function g(t,e){return e.size-t.size}h.sort(g);var y={};function m(t){return t.set in y}function b(t,e){i[e].x=t.x,i[e].y=t.y,y[e]=!0}b({x:0,y:0},h[0].set);for(var x=1;x<h.length;++x){var w=h[x].set,k=a[w].filter(m);if(n=i[w],k.sort(g),0===k.length)throw"ERROR: missing pairwise overlap information";for(var E=[],O=0;O<k.length;++O){var S=i[k[O].set],M=iet(n.radius,S.radius,k[O].size);E.push({x:S.x+M,y:S.y}),E.push({x:S.x-M,y:S.y}),E.push({y:S.y+M,x:S.x}),E.push({y:S.y-M,x:S.x});for(var T=O+1;T<k.length;++T)for(var A=i[k[T].set],P=iet(n.radius,A.radius,k[T].size),N=ret({x:S.x,y:S.y,radius:M},{x:A.x,y:A.y,radius:P}),C=0;C<N.length;++C)E.push(N[C])}for(var _=1e50,L=E[0],R=0;R<E.length;++R){i[w].x=E[R].x,i[w].y=E[R].y;var j=r(i,t);j<_&&(_=j,L=E[R])}b(L,w)}return i}(t,e),r=e.lossFunction||oet;if(t.length>=8){var i=function(t,e){var n,r=(e=e||{}).restarts||10,i=[],a={};for(n=0;n<t.length;++n){var o=t[n];1==o.sets.length&&(a[o.sets[0]]=i.length,i.push(o))}var s=function(t,e,n){var r=(0,Qtt.zerosM)(e.length,e.length),i=(0,Qtt.zerosM)(e.length,e.length);return t.filter((function(t){return 2==t.sets.length})).map((function(t){var a=n[t.sets[0]],o=n[t.sets[1]],s=iet(Math.sqrt(e[a].size/Math.PI),Math.sqrt(e[o].size/Math.PI),t.size);r[a][o]=r[o][a]=s;var u=0;t.size+1e-10>=Math.min(e[a].size,e[o].size)?u=1:t.size<=1e-10&&(u=-1),i[a][o]=i[o][a]=u})),{distances:r,constraints:i}}(t,i,a),u=s.distances,c=s.constraints,l=(0,Qtt.norm2)(u.map(Qtt.norm2))/u.length;u=u.map((function(t){return t.map((function(t){return t/l}))}));var f,d,h=function(t,e){return function(t,e,n,r){var i,a=0;for(i=0;i<e.length;++i)e[i]=0;for(i=0;i<n.length;++i)for(var o=t[2*i],s=t[2*i+1],u=i+1;u<n.length;++u){var c=t[2*u],l=t[2*u+1],f=n[i][u],d=r[i][u],h=(c-o)*(c-o)+(l-s)*(l-s),p=Math.sqrt(h),v=h-f*f;d>0&&p<=f||d<0&&p>=f||(a+=2*v*v,e[2*i]+=4*v*(o-c),e[2*i+1]+=4*v*(s-l),e[2*u]+=4*v*(c-o),e[2*u+1]+=4*v*(l-s))}return a}(t,e,u,c)};for(n=0;n<r;++n){var p=(0,Qtt.zeros)(2*u.length).map(Math.random);d=(0,Qtt.conjugateGradient)(h,p,e),(!f||d.fx<f.fx)&&(f=d)}var v=f.x,g={};for(n=0;n<i.length;++n){var y=i[n];g[y.sets[0]]={x:v[2*n]*l,y:v[2*n+1]*l,radius:Math.sqrt(y.size/Math.PI)}}if(e.history)for(n=0;n<e.history.length;++n)(0,Qtt.scale)(e.history[n].x,l);return g}(t,e);r(i,t)+1e-8<r(n,t)&&(n=i)}return n}function oet(t,e){for(var n=0,r=0;r<e.length;++r){var i=e[r],a=void 0;if(1!=i.sets.length){if(2==i.sets.length){var o=t[i.sets[0]],s=t[i.sets[1]];a=net(o.radius,s.radius,eet(o,s))}else a=Jtt(i.sets.map((function(e){return t[e]})));n+=(i.hasOwnProperty("weight")?i.weight:1)*(a-i.size)*(a-i.size)}}return n}var set=function(t){var e=t.sets,n=void 0===e?"sets":e,r=t.size,i=void 0===r?"size":r,a=t.as,o=void 0===a?["key","path"]:a,s=t.padding,u=void 0===s?0:s,c=g(o,2),l=c[0],f=c[1];return function(t){var e=t.map((function(t){return Object.assign(Object.assign({},t),b({sets:t[n],size:t[i]},l,t.sets.join("&")))}));e.sort((function(t,e){return t.sets.length-e.sets.length}));var r,a=function(t,e){(e=e||{}).maxIterations=e.maxIterations||500;var n=e.initialLayout||aet,r=e.lossFunction||oet;t=function(t){t=t.slice();var e,n,r,i,a=[],o={};for(e=0;e<t.length;++e){var s=t[e];1==s.sets.length?a.push(s.sets[0]):2==s.sets.length&&(o[[r=s.sets[0],i=s.sets[1]]]=!0,o[[i,r]]=!0)}for(a.sort((function(t,e){return t>e?1:-1})),e=0;e<a.length;++e)for(r=a[e],n=e+1;n<a.length;++n)[r,i=a[n]]in o||t.push({sets:[r,i],size:0});return t}(t);var i,a=n(t,e),o=[],s=[];for(i in a)a.hasOwnProperty(i)&&(o.push(a[i].x),o.push(a[i].y),s.push(i));for(var u=(0,Qtt.nelderMead)((function(e){for(var n={},i=0;i<s.length;++i){var o=s[i];n[o]={x:e[2*i],y:e[2*i+1],radius:a[o].radius}}return r(n,t)}),o,e),c=u.x,l=0;l<s.length;++l)i=s[l],a[i].x=c[2*l],a[i].y=c[2*l+1];return a}(e);return e.map((function(t){var e=t[n];return Object.assign(Object.assign({},t),b({},f,(function(t){var n=t.width,i=t.height;r=r||function(t,e,n,r){var i=[],a=[];for(var o in t)t.hasOwnProperty(o)&&(a.push(o),i.push(t[o]));e-=2*r,n-=2*r;var s=function(t){var e=function(e){return{max:Math.max.apply(null,t.map((function(t){return t[e]+t.radius}))),min:Math.min.apply(null,t.map((function(t){return t[e]-t.radius})))}};return{xRange:e("x"),yRange:e("y")}}(i),u=s.xRange,c=s.yRange;if(u.max==u.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),t;for(var l=e/(u.max-u.min),f=n/(c.max-c.min),d=Math.min(f,l),h=(e-(u.max-u.min)*d)/2,p=(n-(c.max-c.min)*d)/2,v={},g=0;g<i.length;++g){var y=i[g];v[a[g]]={radius:d*y.radius,x:r+h+(y.x-u.min)*d,y:r+p+(y.y-c.min)*d}}return v}(a,n,i,u);var o=function(t){var e={};Jtt(t,e);var n=e.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return function(t,e,n){var r=[],i=t-n,a=e;return r.push("M",i,a),r.push("A",n,n,0,1,0,i+2*n,a),r.push("A",n,n,0,1,0,i,a),r.join(" ")}(r.x,r.y,r.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],a=0;a<n.length;++a){var o=n[a],s=o.circle.radius,u=o.width>s;i.push("\nA",s,s,0,u?1:0,1,o.p1.x,o.p1.y)}return i.join(" ")}(e.map((function(t){return r[t]})));return/[zZ]$/.test(o)||(o+=" Z"),o})))}))}};function uet(){return{"data.venn":set,"mark.boxplot":Rtt,"mark.gauge":Wtt,"mark.wordCloud":uK,"mark.liquid":Ztt}}set.props={};var cet={joint:!0},fet={type:"link",axis:!1,legend:!1,encode:{x:[function(t){return t.source.x},function(t){return t.target.x}],y:[function(t){return t.source.y},function(t){return t.target.y}]},style:{stroke:"#999",strokeOpacity:.6}},det={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},het={text:""},pet=function(t){var e=t.data,n=t.encode,r=void 0===n?{}:n,i=t.scale,a=t.style,o=void 0===a?{}:a,s=t.layout,u=void 0===s?{}:s,c=t.nodeLabels,l=void 0===c?[]:c,f=t.linkLabels,d=void 0===f?[]:f,h=t.animate,p=void 0===h?{}:h,v=t.tooltip,g=void 0===v?{}:v,y=r.nodeKey,m=void 0===y?function(t){return t.id}:y,b=r.linkKey,x=void 0===b?function(t){return t.id}:b,w=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(r,["nodeKey","linkKey"]),k=Object.assign({nodeKey:m,linkKey:x},w),E=iH(k,"node"),O=iH(k,"link"),S=bY(e,k),T=function(t,e,n){var r=t.nodes,i=t.links,a=e.joint,o=e.nodeStrength,s=e.linkStrength,u=(n.nodeKey,n.linkKey),c=void 0===u?function(t){return t.id}:u,l=Dx(),f=sx(i).id(yY(c));"function"==typeof o&&l.strength(o),"function"==typeof s&&f.strength(s);var d=jx(r).force("link",f).force("charge",l);a?d.force("center",Ix()):d.force("x",Wx()).force("y",Vx()),d.stop();for(var h=Math.ceil(Math.log(d.alphaMin())/Math.log(1-d.alphaDecay())),p=0;p<h;p++)d.tick();return{nodesData:r,linksData:i}}({links:S.links,nodes:S.nodes},vd({},cet,u),k),A=T.nodesData,P=T.linksData,N=JJ(g,"link",{items:[function(t){return{name:"source",value:yY(x)(t.source)}},function(t){return{name:"target",value:yY(x)(t.target)}}]}),C=JJ(g,"node",{items:[function(t){return{name:"key",value:yY(m)(t)}}]},!0);return[vd({},fet,{data:P,encode:O,labels:d,style:iH(o,"link"),tooltip:N,animate:n0(p,"link")}),vd({},det,{data:A,encode:Object.assign({},E),scale:i,style:iH(o,"node"),tooltip:C,labels:[Object.assign(Object.assign({},het),iH(o,"label"))].concat(M(l)),animate:n0(p,"link")})]};function vet(t,e){return t.parent===e.parent?1:2}function get(t){var e=t.children;return e?e[0]:t.t}function yet(t){var e=t.children;return e?e[e.length-1]:t.t}function met(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function bet(t,e,n){return t.a.parent===e.parent?t.a:n}function xet(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function wet(){var t=vet,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,a,o=new xet(t,0),s=[o];e=s.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=e.children[i]=new xet(r[i],i)),n.parent=e;return(o.parent=new xet(null,0)).children=[o],o}(i);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(o),r)i.eachBefore(s);else{var c=i,l=i,f=i;i.eachBefore((function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>f.depth&&(f=t)}));var d=c===l?1:t(c,l)/2,h=d-c.x,p=e/(l.x+d+h),v=n/(f.depth||1);i.eachBefore((function(t){t.x=(t.x+h)*p,t.y=t.depth*v}))}return i}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,s=n,u=a.parent.children[0],c=a.m,l=o.m,f=s.m,d=u.m;s=yet(s),a=get(a),s&&a;)u=get(u),(o=yet(o)).a=e,(i=s.z+f-a.z-c+t(s._,a._))>0&&(met(bet(s,e,r),e,i),c+=i,l+=i),f+=s.m,c+=a.m,d+=u.m,l+=o.m;s&&!yet(o)&&(o.t=s,o.m+=f-l),a&&!get(u)&&(u.t=a,u.m+=c-d,r=e)}return r}(e,i,e.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function ket(t,e){return t.parent===e.parent?1:2}function Eet(t,e){return t+e.x}function Oet(t,e){return Math.max(t,e.y)}function Met(){var t=ket,e=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Eet,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Oet,0)}(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=s.x-t(s,u)/2,l=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(l-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}pet.props={},xet.prototype=Object.create(L4.prototype);var Tet=function(t){return function(e){return function(n){var r=e.field,i=void 0===r?"value":r,a=e.nodeSize,o=e.separation,s=e.sortBy,u=e.as,c=g(void 0===u?["x","y"]:u,2),l=c[0],f=c[1],d=A4(n,(function(t){return t.children})).sum((function(t){return t[i]})).sort(s),h=t();h.size([1,1]),a&&h.nodeSize(a),o&&h.separation(o),h(d);var p=[];d.each((function(t){t[l]=t.x,t[f]=t.y,t.name=t.data.name,p.push(t)}));var v=d.links();return v.forEach((function(t){t[l]=[t.source[l],t.target[l]],t[f]=[t.source[f],t.target[f]]})),{nodes:p,edges:v}}}},Aet=function(t){return Tet(Met)(t)};Aet.props={};var Pet=function(t){return Tet(wet)(t)};Pet.props={};var Net={sortBy:function(t,e){return e.value-t.value}},Cet={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},_et={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},Let={text:"",fontSize:10},Ret=function(t){var e=t.data,n=t.encode,r=void 0===n?{}:n,i=t.scale,a=void 0===i?{}:i,o=t.style,s=void 0===o?{}:o,u=t.layout,c=void 0===u?{}:u,l=t.nodeLabels,f=void 0===l?[]:l,d=t.linkLabels,h=void 0===d?[]:d,p=t.animate,v=void 0===p?{}:p,g=t.tooltip,y=void 0===g?{}:g,m=null==r?void 0:r.value,b=Pet(Object.assign(Object.assign(Object.assign({},Net),c),{field:m}))(e),x=b.nodes,w=b.edges,k=JJ(y,"node",{title:"name",items:["value"]},!0),E=JJ(y,"link",{title:"",items:[function(t){return{name:"source",value:t.source.name}},function(t){return{name:"target",value:t.target.name}}]});return[vd({},_et,{data:w,encode:iH(r,"link"),scale:iH(a,"link"),labels:h,style:Object.assign({stroke:"#999"},iH(s,"link")),tooltip:E,animate:n0(v,"link")}),vd({},Cet,{data:x,scale:iH(a,"node"),encode:iH(r,"node"),labels:[Object.assign(Object.assign({},Let),iH(s,"label"))].concat(M(f)),style:Object.assign({},iH(s,"node")),tooltip:k,animate:n0(v,"node")})]};Ret.props={};var jet=4294967296;function Det(t,e){var n,r;if(zet(e,t))return[e];for(n=0;n<t.length;++n)if(Iet(e,t[n])&&zet(Get(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Iet(Get(t[n],t[r]),e)&&Iet(Get(t[n],e),t[r])&&Iet(Get(t[r],e),t[n])&&zet(Wet(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Iet(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Fet(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function zet(t,e){for(var n=0;n<e.length;++n)if(!Fet(t,e[n]))return!1;return!0}function Bet(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return Get(t[0],t[1]);case 3:return Wet(t[0],t[1],t[2])}var e}function Get(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,u=a-n,c=o-r,l=s-i,f=Math.sqrt(u*u+c*c);return{x:(n+a+u/f*l)/2,y:(r+o+c/f*l)/2,r:(f+i+s)/2}}function Wet(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,u=e.r,c=n.x,l=n.y,f=n.r,d=r-o,h=r-c,p=i-s,v=i-l,g=u-a,y=f-a,m=r*r+i*i-a*a,b=m-o*o-s*s+u*u,x=m-c*c-l*l+f*f,w=h*p-d*v,k=(p*x-v*b)/(2*w)-r,E=(v*g-p*y)/w,O=(h*b-d*x)/(2*w)-i,S=(d*y-h*g)/w,M=E*E+S*S-1,T=2*(a+k*E+O*S),A=k*k+O*O-a*a,P=-(Math.abs(M)>1e-6?(T+Math.sqrt(T*T-4*M*A))/(2*M):A/T);return{x:r+k+E*P,y:i+O+S*P,r:P}}function Vet(t,e,n){var r,i,a,o,s=t.x-e.x,u=t.y-e.y,c=s*s+u*u;c?(i=e.r+n.r,i*=i,o=t.r+n.r,i>(o*=o)?(r=(c+o-i)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),n.x=t.x-r*s-a*u,n.y=t.y-r*u+a*s):(r=(c+i-o)/(2*c),a=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-a*u,n.y=e.y+r*u+a*s)):(n.x=e.x+n.r,n.y=e.y)}function Het(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Yet(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function Uet(t){this._=t,this.next=null,this.previous=null}function qet(t,e){if(!(o=(n=t,t="object"==typeof n&&"length"in n?n:Array.from(n)).length))return 0;var n,r,i,a,o,s,u,c,l,f,d,h;if((r=t[0]).x=0,r.y=0,!(o>1))return r.r;if(i=t[1],r.x=-i.r,i.x=r.r,i.y=0,!(o>2))return r.r+i.r;Vet(i,r,a=t[2]),r=new Uet(r),i=new Uet(i),a=new Uet(a),r.next=a.previous=i,i.next=r.previous=a,a.next=i.previous=r;t:for(c=3;c<o;++c){Vet(r._,i._,a=t[c]),a=new Uet(a),l=i.next,f=r.previous,d=i._.r,h=r._.r;do{if(d<=h){if(Het(l._,a._)){i=l,r.next=i,i.previous=r,--c;continue t}d+=l._.r,l=l.next}else{if(Het(f._,a._)){(r=f).next=i,i.previous=r,--c;continue t}h+=f._.r,f=f.previous}}while(l!==f.next);for(a.previous=r,a.next=i,r.next=i.previous=i=a,s=Yet(r);(a=a.next)!==i;)(u=Yet(a))<s&&(r=a,s=u);i=r.next}for(r=[i._],a=i;(a=a.next)!==i;)r.push(a._);for(a=function(t,e){for(var n,r,i=0,a=(t=function(t,e){for(var n,r,i=t.length;i;)r=e()*i--|0,n=t[i],t[i]=t[r],t[r]=n;return t}(Array.from(t),e)).length,o=[];i<a;)n=t[i],r&&Fet(r,n)?++i:(r=Bet(o=Det(o,n)),i=0);return r}(r,e),c=0;c<o;++c)(r=t[c]).x-=a.x,r.y-=a.y;return a.r}function Xet(t){return Math.sqrt(t.value)}function Ket(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function $et(t,e,n){return function(r){if(i=r.children){var i,a,o,s=i.length,u=t(r)*e||0;if(u)for(a=0;a<s;++a)i[a].r+=u;if(o=qet(i,n),u)for(a=0;a<s;++a)i[a].r-=u;r.r=o+u}}}function Zet(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var Qet={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:function(t){return 2*t.r}},Jet={title:function(t){return t.data.name},items:[{field:"value"}]},tnt=function(t,e){var n=e.width,r=e.height,i=t.data,a=t.encode,o=void 0===a?{}:a,s=t.scale,u=void 0===s?{}:s,c=t.style,l=void 0===c?{}:c,f=t.layout,d=void 0===f?{}:f,h=t.labels,p=void 0===h?[]:h,v=t.tooltip,g=void 0===v?{}:v,y=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["data","encode","scale","style","layout","labels","tooltip"]),m=function(t,e,n){return{type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,t]},y:{domain:[0,e]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:n.color?void 0:function(t){return 0===t.height?"#ddd":"#fff"},stroke:n.color?void 0:function(t){return 0===t.height?"":"#000"}}}}(n,r,o),b=function(t,e,n){var r=n.value,i=fn(t)?z4().path(e.path)(t):A4(t);return r?i.sum((function(t){return yY(r)(t)})).sort(e.sort):i.count(),function(){var t=null,e=1,n=1,r=Z4;function i(i){var a=function(){var t=1;return function(){return(t=(1664525*t+1013904223)%jet)/jet}}();return i.x=e/2,i.y=n/2,t?i.eachBefore(Ket(t)).eachAfter($et(r,.5,a)).eachBefore(Zet(1)):i.eachBefore(Ket(Xet)).eachAfter($et(Z4,1,a)).eachAfter($et(r,i.r/Math.min(e,n),a)).eachBefore(Zet(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=E4(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Q4(+t),i):r},i}().size(e.size).padding(e.padding)(i),i.descendants()}(i,vd({},function(t,e){return{size:[t,e],padding:0,sort:function(t,e){return e.value-t.value}}}(n,r),d),vd({},m.encode,o)),x=iH(l,"label");return vd({},m,Object.assign(Object.assign({data:b,encode:o,scale:u,style:l,labels:[Object.assign(Object.assign({},Qet),x)].concat(M(p))},y),{tooltip:t0(g,Jet),axis:!1}))};function ent(t){return t.target.depth}function nnt(t,e){return t.sourceLinks.length?t.depth:e-1}function rnt(t){return function(){return t}}function int(t,e){return ont(t.source,e.source)||t.index-e.index}function ant(t,e){return ont(t.target,e.target)||t.index-e.index}function ont(t,e){return t.y0-e.y0}function snt(t){return t.value}function unt(t){return t.index}function cnt(t){return t.nodes}function lnt(t){return t.links}function fnt(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function dnt(t){var e,n=nr(t.nodes);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,a=i.y0,o=a,s=nr(i.sourceLinks);try{for(s.s();!(r=s.n()).done;){var u=r.value;u.y0=a+u.width/2,a+=u.width}}catch(t){s.e(t)}finally{s.f()}var c,l=nr(i.targetLinks);try{for(l.s();!(c=l.n()).done;){var f=c.value;f.y1=o+f.width/2,o+=f.width}}catch(t){l.e(t)}finally{l.f()}}}catch(t){n.e(t)}finally{n.f()}}tnt.props={};var hnt={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:function(t){return t.nodes},links:function(t){return t.links},nodeSort:void 0,linkSort:void 0,iterations:6},pnt={left:function(t){return t.depth},right:function(t,e){return e-1-t.height},center:function(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?$X(t.sourceLinks,ent)-1:0},justify:nnt},vnt=function(t){return function(e){var n=Object.assign({},hnt,t),r=n.nodeId,i=n.nodeSort,a=n.nodeAlign,o=n.nodeWidth,s=n.nodePadding,u=n.nodeDepth,c=n.nodes,l=n.links,f=n.linkSort,d=n.iterations,h=function(){var t,e,n,r,i=0,a=0,o=1,s=1,u=24,c=8,l=unt,f=nnt,d=cnt,h=lnt,p=6;function v(v){var m={nodes:d(v),links:h(v)};return function(t){var e=t.nodes,n=t.links;e.forEach((function(t,e){t.index=e,t.sourceLinks=[],t.targetLinks=[]}));var i=new Map(e.map((function(t){return[l(t),t]})));if(n.forEach((function(t,e){t.index=e;var n=t.source,r=t.target;"object"!=typeof n&&(n=t.source=fnt(i,n)),"object"!=typeof r&&(r=t.target=fnt(i,r)),n.sourceLinks.push(t),r.targetLinks.push(t)})),null!=r){var a,o=nr(e);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=s.sourceLinks,c=s.targetLinks;u.sort(r),c.sort(r)}}catch(t){o.e(t)}finally{o.f()}}}(m),function(t){var e,n=nr(t.nodes);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.value=void 0===r.fixedValue?Math.max(E9(r.sourceLinks,snt),E9(r.targetLinks,snt)):r.fixedValue}}catch(t){n.e(t)}finally{n.f()}}(m),function(t){for(var n=t.nodes,r=n.length,i=new Set(n),a=new Set,o=0;i.size;){if(i.forEach((function(t){t.depth=o;var e,n=nr(t.sourceLinks);try{for(n.s();!(e=n.n()).done;){var r=e.value.target;a.add(r)}}catch(t){n.e(t)}finally{n.f()}})),++o>r)throw new Error("circular link");i=a,a=new Set}if(e)for(var s,u=Math.max(ZX(n,(function(t){return t.depth}))+1,0),c=0;c<n.length;c++)(s=n[c]).depth=e.call(null,s,u)}(m),function(t){for(var e=t.nodes,n=e.length,r=new Set(e),i=new Set,a=0;r.size;){if(r.forEach((function(t){t.height=a;var e,n=nr(t.targetLinks);try{for(n.s();!(e=n.n()).done;){var r=e.value.source;i.add(r)}}catch(t){n.e(t)}finally{n.f()}})),++a>n)throw new Error("circular link");r=i,i=new Set}}(m),function(e){var r=function(t){var e,r=t.nodes,a=Math.max(ZX(r,(function(t){return t.depth}))+1,0),s=(o-i-u)/(a-1),c=new Array(a).fill(0).map((function(){return[]})),l=nr(r);try{for(l.s();!(e=l.n()).done;){var d=e.value,h=Math.max(0,Math.min(a-1,Math.floor(f.call(null,d,a))));d.layer=h,d.x0=i+h*s,d.x1=d.x0+u,c[h]?c[h].push(d):c[h]=[d]}}catch(t){l.e(t)}finally{l.f()}if(n){var p,v=nr(c);try{for(v.s();!(p=v.n()).done;)p.value.sort(n)}catch(t){v.e(t)}finally{v.f()}}return c}(e);t=Math.min(c,(s-a)/(ZX(r,(function(t){return t.length}))-1)),function(e){var n,r=$X(e,(function(e){return(s-a-(e.length-1)*t)/E9(e,snt)})),i=nr(e);try{for(i.s();!(n=i.n()).done;){var o,u=n.value,c=a,l=nr(u);try{for(l.s();!(o=l.n()).done;){var f=o.value;f.y0=c,f.y1=c+f.value*r,c=f.y1+t;var d,h=nr(f.sourceLinks);try{for(h.s();!(d=h.n()).done;){var p=d.value;p.width=p.value*r}}catch(t){h.e(t)}finally{h.f()}}}catch(t){l.e(t)}finally{l.f()}c=(s-c+t)/(u.length+1);for(var v=0;v<u.length;++v){var g=u[v];g.y0+=c*(v+1),g.y1+=c*(v+1)}k(u)}}catch(t){i.e(t)}finally{i.f()}}(r);for(var l=0;l<p;++l){var d=Math.pow(.99,l),h=Math.max(1-d,(l+1)/p);y(r,d,h),g(r,d,h)}}(m),dnt(m),m}function g(t,e,r){for(var i=1,a=t.length;i<a;++i){var o,s=t[i],u=nr(s);try{for(u.s();!(o=u.n()).done;){var c,l=o.value,f=0,d=0,h=nr(l.targetLinks);try{for(h.s();!(c=h.n()).done;){var p=c.value,v=p.source,g=p.value*(l.layer-v.layer);f+=E(v,l)*g,d+=g}}catch(t){h.e(t)}finally{h.f()}if(d>0){var y=(f/d-l.y0)*e;l.y0+=y,l.y1+=y,w(l)}}}catch(t){u.e(t)}finally{u.f()}void 0===n&&s.sort(ont),s.length&&m(s,r)}}function y(t,e,r){for(var i=t.length-2;i>=0;--i){var a,o=t[i],s=nr(o);try{for(s.s();!(a=s.n()).done;){var u,c=a.value,l=0,f=0,d=nr(c.sourceLinks);try{for(d.s();!(u=d.n()).done;){var h=u.value,p=h.target,v=h.value*(p.layer-c.layer);l+=O(c,p)*v,f+=v}}catch(t){d.e(t)}finally{d.f()}if(f>0){var g=(l/f-c.y0)*e;c.y0+=g,c.y1+=g,w(c)}}}catch(t){s.e(t)}finally{s.f()}void 0===n&&o.sort(ont),o.length&&m(o,r)}}function m(e,n){var r=e.length>>1,i=e[r];x(e,i.y0-t,r-1,n),b(e,i.y1+t,r+1,n),x(e,s,e.length-1,n),b(e,a,0,n)}function b(e,n,r,i){for(;r<e.length;++r){var a=e[r],o=(n-a.y0)*i;o>1e-6&&(a.y0+=o,a.y1+=o),n=a.y1+t}}function x(e,n,r,i){for(;r>=0;--r){var a=e[r],o=(a.y1-n)*i;o>1e-6&&(a.y0-=o,a.y1-=o),n=a.y0-t}}function w(t){var e=t.sourceLinks,n=t.targetLinks;if(void 0===r){var i,a=nr(n);try{for(a.s();!(i=a.n()).done;)i.value.source.sourceLinks.sort(ant)}catch(t){a.e(t)}finally{a.f()}var o,s=nr(e);try{for(s.s();!(o=s.n()).done;)o.value.target.targetLinks.sort(int)}catch(t){s.e(t)}finally{s.f()}}}function k(t){if(void 0===r){var e,n=nr(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=i.sourceLinks,o=i.targetLinks;a.sort(ant),o.sort(int)}}catch(t){n.e(t)}finally{n.f()}}}function E(e,n){var r,i=e.y0-(e.sourceLinks.length-1)*t/2,a=nr(e.sourceLinks);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.target,u=o.width;if(s===n)break;i+=u+t}}catch(t){a.e(t)}finally{a.f()}var c,l=nr(n.targetLinks);try{for(l.s();!(c=l.n()).done;){var f=c.value,d=f.source,h=f.width;if(d===e)break;i-=h}}catch(t){l.e(t)}finally{l.f()}return i}function O(e,n){var r,i=n.y0-(n.targetLinks.length-1)*t/2,a=nr(n.targetLinks);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.source,u=o.width;if(s===e)break;i+=u+t}}catch(t){a.e(t)}finally{a.f()}var c,l=nr(e.sourceLinks);try{for(l.s();!(c=l.n()).done;){var f=c.value,d=f.target,h=f.width;if(d===n)break;i-=h}}catch(t){l.e(t)}finally{l.f()}return i}return v.update=function(t){return dnt(t),t},v.nodeId=function(t){return arguments.length?(l="function"==typeof t?t:rnt(t),v):l},v.nodeAlign=function(t){return arguments.length?(f="function"==typeof t?t:rnt(t),v):f},v.nodeDepth=function(t){return arguments.length?(e=t,v):e},v.nodeSort=function(t){return arguments.length?(n=t,v):n},v.nodeWidth=function(t){return arguments.length?(u=+t,v):u},v.nodePadding=function(e){return arguments.length?(c=t=+e,v):c},v.nodes=function(t){return arguments.length?(d="function"==typeof t?t:rnt(t),v):d},v.links=function(t){return arguments.length?(h="function"==typeof t?t:rnt(t),v):h},v.linkSort=function(t){return arguments.length?(r=t,v):r},v.size=function(t){return arguments.length?(i=a=0,o=+t[0],s=+t[1],v):[o-i,s-a]},v.extent=function(t){return arguments.length?(i=+t[0][0],o=+t[1][0],a=+t[0][1],s=+t[1][1],v):[[i,a],[o,s]]},v.iterations=function(t){return arguments.length?(p=+t,v):p},v}().nodeSort(i).linkSort(f).links(l).nodes(c).nodeWidth(o).nodePadding(s).nodeDepth(u).nodeAlign(function(t){var e=typeof t;return"string"===e?pnt[t]||nnt:"function"===e?t:nnt}(a)).iterations(d).extent([[0,0],[1,1]]);"function"==typeof r&&h.nodeId(r);var p=h(e),v=p.nodes,g=p.links,y=v.map((function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1;return Object.assign(Object.assign({},t),{x:[e,n,n,e],y:[r,r,i,i]})})),m=g.map((function(t){var e=t.source,n=t.target,r=e.x1,i=n.x0,a=t.width/2;return Object.assign(Object.assign({},t),{x:[r,r,i,i],y:[t.y0+a,t.y0-a,t.y1+a,t.y1-a]})}));return{nodes:y,links:m}}};vnt.props={};var gnt={nodeId:function(t){return t.key},nodeWidth:.02,nodePadding:.02},ynt={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},mnt={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},bnt={textAlign:function(t){return t.x[0]<.5?"start":"end"},position:function(t){return t.x[0]<.5?"right":"left"},fontSize:10},xnt=function(t){var e=t.data,n=t.encode,r=void 0===n?{}:n,i=t.scale,a=t.style,o=void 0===a?{}:a,s=t.layout,u=void 0===s?{}:s,c=t.nodeLabels,l=void 0===c?[]:c,f=t.linkLabels,d=void 0===f?[]:f,h=t.animate,p=void 0===h?{}:h,v=t.tooltip,g=void 0===v?{}:v,y=t.interaction,m=bY(e,r),b=m.links,x=m.nodes,w=iH(r,"node"),k=iH(r,"link"),E=w.key,O=void 0===E?function(t){return t.key}:E,S=w.color,T=void 0===S?O:S,A=vnt(Object.assign(Object.assign(Object.assign({},gnt),{nodeId:yY(O)}),u))({links:b,nodes:x}),P=A.links,N=A.nodes,C=iH(o,"label"),_=C.text,L=void 0===_?O:_,R=C.spacing,j=void 0===R?5:R,D=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(C,["text","spacing"]),I=yY(O),F=JJ(g,"node",{title:I,items:[{field:"value"}]},!0),z=JJ(g,"link",{title:"",items:[function(t){return{name:"source",value:I(t.source)}},function(t){return{name:"target",value:I(t.target)}}]});return[vd({},ynt,{data:N,encode:Object.assign(Object.assign({},w),{color:T}),scale:i,style:iH(o,"node"),labels:[Object.assign(Object.assign(Object.assign({},bnt),{text:L,dx:function(t){return t.x[0]<.5?j:-j}}),D)].concat(M(l)),tooltip:F,animate:n0(p,"node"),axis:!1,interaction:y}),vd({},mnt,{data:P,encode:k,labels:d,style:Object.assign({fill:k.color?void 0:"#aaa",lineWidth:0},iH(o,"link")),tooltip:z,animate:n0(p,"link"),interaction:y})]};function wnt(t,e){return e.value-t.value}function knt(t,e){return e.frequency-t.frequency}function Ent(t,e){return"".concat(t.id).localeCompare("".concat(e.id))}function Ont(t,e){return"".concat(t.name).localeCompare("".concat(e.name))}xnt.props={};var Snt={y:0,thickness:.05,weight:!1,marginRatio:.1,id:function(t){return t.id},source:function(t){return t.source},target:function(t){return t.target},sourceWeight:function(t){return t.value||1},targetWeight:function(t){return t.value||1},sortBy:null};var Mnt=function(t){return function(e){return function(t){var e=Object.assign(Object.assign({},Snt),t),n=e.y,r=e.thickness,i=e.weight,a=e.marginRatio,o=e.id,s=e.source,u=e.target,l=e.sourceWeight,f=e.targetWeight,d=e.sortBy;return function(t){var e=t.nodes.map((function(t){return Object.assign({},t)})),h=t.edges.map((function(t){return Object.assign({},t)}));return function(t,e){e.forEach((function(t){t.source=s(t),t.target=u(t),t.sourceWeight=l(t),t.targetWeight=f(t)}));var n=GV(e,(function(t){return t.source})),r=GV(e,(function(t){return t.target}));t.forEach((function(t){t.id=o(t);var e=n.has(t.id)?n.get(t.id):[],i=r.has(t.id)?r.get(t.id):[];t.frequency=e.length+i.length,t.value=E9(e,(function(t){return t.sourceWeight}))+E9(i,(function(t){return t.targetWeight}))}))}(e,h),function(t){var e="function"==typeof d?d:c[d];e&&t.sort(e)}(e),function(t,e){var o=t.length;if(!o)throw eH("Invalid nodes: it's empty!");if(!i){var s=1/o;return t.forEach((function(t,e){t.x=(e+.5)*s,t.y=n})),{nodes:t,edges:e}}var u=a/(2*o),c=t.reduce((function(t,e){return t+e.value}),0);t.reduce((function(t,e){e.weight=e.value/c,e.width=e.weight*(1-a),e.height=r;var i=u+t,o=i+e.width,s=n-r/2,l=s+r;return e.x=[i,o,o,i],e.y=[s,s,l,l],t+e.width+2*u}),0)}(e,h),function(t,e){var r=new Map(t.map((function(t){return[t.id,t]})));if(!i)return e.forEach((function(t){var e=s(t),n=u(t),i=r.get(e),a=r.get(n);i&&a&&(t.x=[i.x,a.x],t.y=[i.y,a.y])})),{nodes:t,edges:e};e.forEach((function(t){t.x=[0,0,0,0],t.y=[n,n,n,n]}));var a=GV(e,(function(t){return t.source})),o=GV(e,(function(t){return t.target}));t.forEach((function(t){t.edges;var e=t.width,n=t.x,r=(t.y,t.value),i=t.id,s=a.get(i)||[],u=o.get(i)||[],c=0;s.map((function(t){var i=t.sourceWeight/r*e;t.x[0]=n[0]+c,t.x[1]=n[0]+c+i,c+=i})),u.forEach((function(t){var i=t.targetWeight/r*e;t.x[3]=n[0]+c,t.x[2]=n[0]+c+i,c+=i}))}))}(e,h),{nodes:e,edges:h}}}(t)(e)}};Mnt.props={};var Tnt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Ant={y:0,thickness:.05,marginRatio:.1,id:function(t){return t.key},source:function(t){return t.source},target:function(t){return t.target},sourceWeight:function(t){return t.value||1},targetWeight:function(t){return t.value||1},sortBy:null},Pnt={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},Nnt={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},Cnt={position:"outside",fontSize:10},_nt=function(t,e){var n=t.data,r=t.encode,i=void 0===r?{}:r,a=t.scale,o=t.style,s=void 0===o?{}:o,u=t.layout,c=void 0===u?{}:u,l=t.nodeLabels,f=void 0===l?[]:l,d=t.linkLabels,h=void 0===d?[]:d,p=t.animate,v=void 0===p?{}:p,g=t.tooltip,y=void 0===g?{}:g,m=bY(n,i),b=m.nodes,x=m.links,w=iH(i,"node"),k=iH(i,"link"),E=w.key,O=void 0===E?function(t){return t.key}:E,S=w.color,T=void 0===S?O:S,A=k.linkEncodeColor,P=void 0===A?function(t){return t.source}:A,N=c.nodeWidthRatio,C=void 0===N?Ant.thickness:N,_=c.nodePaddingRatio,L=void 0===_?Ant.marginRatio:_,R=Tnt(c,["nodeWidthRatio","nodePaddingRatio"]),j=Mnt(Object.assign(Object.assign(Object.assign(Object.assign({},Ant),{id:yY(O),thickness:C,marginRatio:L}),R),{weight:!0}))({nodes:b,edges:x}),D=j.nodes,I=j.edges,F=iH(s,"label"),z=F.text,B=void 0===z?O:z,G=Tnt(F,["text"]),W=JJ(y,"node",{title:"",items:[function(t){return{name:t.key,value:t.value}}]},!0),V=JJ(y,"link",{title:"",items:[function(t){return{name:"".concat(t.source," -> ").concat(t.target),value:t.value}}]}),H=e.height,Y=e.width,U=Math.min(H,Y);return[vd({},Nnt,{data:I,encode:Object.assign(Object.assign({},k),{color:P}),labels:h,style:Object.assign({fill:P?void 0:"#aaa"},iH(s,"link")),tooltip:V,animate:n0(v,"link")}),vd({},Pnt,{data:D,encode:Object.assign(Object.assign({},w),{color:T}),scale:a,style:iH(s,"node"),coordinate:{type:"polar",outerRadius:(U-20)/U,startAngle:2*-Math.PI,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},Cnt),{text:B}),G)].concat(M(f)),tooltip:W,animate:n0(v,"node"),axis:!1})]};_nt.props={};var Lnt={fontSize:10,text:function(t){return RZ(t.path)},position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:function(t){return t.x1-t.x0},pointerEvents:"none"},Rnt={title:function(t){var e,n;return null===(n=null===(e=t.path)||void 0===e?void 0:e.join)||void 0===n?void 0:n.call(e,".")},items:[{field:"value"}]},jnt={title:function(t){return RZ(t.path)},items:[{field:"value"}]},Dnt=function(t,e){var n=e.width,r=e.height,i=e.options,a=t.data,o=t.encode,s=void 0===o?{}:o,u=t.scale,c=t.style,l=void 0===c?{}:c,f=t.layout,d=void 0===f?{}:f,h=t.labels,p=void 0===h?[]:h,v=t.tooltip,y=void 0===v?{}:v,m=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["data","encode","scale","style","layout","labels","tooltip"]),b=ch(i,["interaction","treemapDrillDown"]),x=vd({},function(t,e){return{tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[t,e],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:function(t,e){return e.value-t.value},layer:0}}(n,r),d,{layer:b?function(t){return 1===t.depth}:d.layer}),w=g(e8(a,x,s),2),k=w[0],E=w[1],O=iH(l,"label");return vd({},function(t,e){return{type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:function(t){return t.path[1]}},scale:{x:{domain:[0,t],range:[0,1]},y:{domain:[0,e],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}}(n,r),Object.assign(Object.assign({data:k,scale:u,style:l,labels:[Object.assign(Object.assign({},Lnt),O)].concat(M(p))},m),{encode:s,tooltip:t0(y,Rnt),axis:!1}),b?{interaction:Object.assign(Object.assign({},m.interaction),{treemapDrillDown:b?Object.assign(Object.assign({},b),{originData:E,layout:x}):void 0}),encode:Object.assign({color:function(t){return RZ(t.path)}},s),tooltip:t0(y,jnt)}:{})};function Int(){return{"data.arc":Mnt,"data.cluster":Aet,"mark.forceGraph":pet,"mark.tree":Ret,"mark.pack":tnt,"mark.sankey":xnt,"mark.chord":_nt,"mark.treemap":Dnt}}Dnt.props={};const Fnt=function(t){return t};function znt(t,e){t&&Gnt.hasOwnProperty(t.type)&&Gnt[t.type](t,e)}var Bnt={Feature:function(t,e){znt(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)znt(n[r].geometry,e)}},Gnt={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Wnt(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Wnt(n[r],e,0)},Polygon:function(t,e){Vnt(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Vnt(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)znt(n[r],e)}};function Wnt(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Vnt(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Wnt(t[n],e,1);e.polygonEnd()}function Hnt(t,e){t&&Bnt.hasOwnProperty(t.type)?Bnt[t.type](t,e):znt(t,e)}var Ynt=function(){return O((function t(){k(this,t),this._partials=new Float64Array(32),this._n=0}),[{key:"add",value:function(t){for(var e=this._partials,n=0,r=0;r<this._n&&r<32;r++){var i=e[r],a=t+i,o=Math.abs(t)<Math.abs(i)?t-(a-i):i-(a-t);o&&(e[n++]=o),t=a}return e[n]=t,this._n=n+1,this}},{key:"valueOf",value:function(){var t,e,n,r=this._partials,i=this._n,a=0;if(i>0){for(a=r[--i];i>0&&(t=a,!(n=(e=r[--i])-((a=t+e)-t))););i>0&&(n<0&&r[i-1]<0||n>0&&r[i-1]>0)&&(e=2*n)==(t=a+e)-a&&(a=t)}return a}}])}(),Unt=1e-6,qnt=1e-12,Xnt=Math.PI,Knt=Xnt/2,$nt=Xnt/4,Znt=2*Xnt,Qnt=180/Xnt,Jnt=Xnt/180,trt=Math.abs,ert=Math.atan,nrt=Math.atan2,rrt=Math.cos,irt=Math.ceil,art=Math.exp,ort=(Math.floor,Math.hypot,Math.log),srt=Math.pow,urt=Math.sin,crt=Math.sign||function(t){return t>0?1:t<0?-1:0},lrt=Math.sqrt,frt=Math.tan;function drt(t){return t>1?0:t<-1?Xnt:Math.acos(t)}function hrt(t){return t>1?Knt:t<-1?-Knt:Math.asin(t)}function prt(){}var vrt,grt,yrt,mrt,brt=new Ynt,xrt=new Ynt,wrt={point:prt,lineStart:prt,lineEnd:prt,polygonStart:function(){wrt.lineStart=krt,wrt.lineEnd=Srt},polygonEnd:function(){wrt.lineStart=wrt.lineEnd=wrt.point=prt,brt.add(trt(xrt)),xrt=new Ynt},result:function(){var t=brt/2;return brt=new Ynt,t}};function krt(){wrt.point=Ert}function Ert(t,e){wrt.point=Ort,vrt=yrt=t,grt=mrt=e}function Ort(t,e){xrt.add(mrt*t-yrt*e),yrt=t,mrt=e}function Srt(){Ort(vrt,grt)}const Mrt=wrt;var Trt=1/0,Art=Trt,Prt=-Trt,Nrt=Prt,Crt={point:function(t,e){t<Trt&&(Trt=t),t>Prt&&(Prt=t),e<Art&&(Art=e),e>Nrt&&(Nrt=e)},lineStart:prt,lineEnd:prt,polygonStart:prt,polygonEnd:prt,result:function(){var t=[[Trt,Art],[Prt,Nrt]];return Prt=Nrt=-(Art=Trt=1/0),t}};const _rt=Crt;var Lrt,Rrt,jrt,Drt,Irt=0,Frt=0,zrt=0,Brt=0,Grt=0,Wrt=0,Vrt=0,Hrt=0,Yrt=0,Urt={point:qrt,lineStart:Xrt,lineEnd:Zrt,polygonStart:function(){Urt.lineStart=Qrt,Urt.lineEnd=Jrt},polygonEnd:function(){Urt.point=qrt,Urt.lineStart=Xrt,Urt.lineEnd=Zrt},result:function(){var t=Yrt?[Vrt/Yrt,Hrt/Yrt]:Wrt?[Brt/Wrt,Grt/Wrt]:zrt?[Irt/zrt,Frt/zrt]:[NaN,NaN];return Irt=Frt=zrt=Brt=Grt=Wrt=Vrt=Hrt=Yrt=0,t}};function qrt(t,e){Irt+=t,Frt+=e,++zrt}function Xrt(){Urt.point=Krt}function Krt(t,e){Urt.point=$rt,qrt(jrt=t,Drt=e)}function $rt(t,e){var n=t-jrt,r=e-Drt,i=lrt(n*n+r*r);Brt+=i*(jrt+t)/2,Grt+=i*(Drt+e)/2,Wrt+=i,qrt(jrt=t,Drt=e)}function Zrt(){Urt.point=qrt}function Qrt(){Urt.point=tit}function Jrt(){eit(Lrt,Rrt)}function tit(t,e){Urt.point=eit,qrt(Lrt=jrt=t,Rrt=Drt=e)}function eit(t,e){var n=t-jrt,r=e-Drt,i=lrt(n*n+r*r);Brt+=i*(jrt+t)/2,Grt+=i*(Drt+e)/2,Wrt+=i,Vrt+=(i=Drt*t-jrt*e)*(jrt+t),Hrt+=i*(Drt+e),Yrt+=3*i,qrt(jrt=t,Drt=e)}const nit=Urt;function rit(t){this._context=t}rit.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Znt)}},result:prt};var iit,ait,oit,sit,uit,cit=new Ynt,lit={point:prt,lineStart:function(){lit.point=fit},lineEnd:function(){iit&&dit(ait,oit),lit.point=prt},polygonStart:function(){iit=!0},polygonEnd:function(){iit=null},result:function(){var t=+cit;return cit=new Ynt,t}};function fit(t,e){lit.point=dit,ait=sit=t,oit=uit=e}function dit(t,e){sit-=t,uit-=e,cit.add(lrt(sit*sit+uit*uit)),sit=t,uit=e}const hit=lit;var pit,vit,git,yit,mit,bit,xit,wit,kit=function(){return O((function t(e){k(this,t),this._append=null==e?Eit:function(t){var e=Math.floor(t);if(!(e>=0))throw new RangeError("invalid digits: ".concat(t));if(e>15)return Eit;if(e!==mit){var n=Math.pow(10,e);mit=e,bit=function(t){var e=1;this._+=t[0];for(var r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}return bit}(e),this._radius=4.5,this._=""}),[{key:"pointRadius",value:function(t){return this._radius=+t,this}},{key:"polygonStart",value:function(){this._line=0}},{key:"polygonEnd",value:function(){this._line=NaN}},{key:"lineStart",value:function(){this._point=0}},{key:"lineEnd",value:function(){0===this._line&&(this._+="Z"),this._point=NaN}},{key:"point",value:function(t,e){switch(this._point){case 0:this._append(pit||(pit=mN(["M",",",""])),t,e),this._point=1;break;case 1:this._append(vit||(vit=mN(["L",",",""])),t,e);break;default:if(this._append(git||(git=mN(["M",",",""])),t,e),this._radius!==xit||this._append!==bit){var n=this._radius,r=this._;this._="",this._append(yit||(yit=mN(["m0,","a",","," 0 1,1 0,","a",","," 0 1,1 0,","z"])),n,n,n,-2*n,n,n,2*n),xit=n,bit=this._append,wit=this._,this._=r}this._+=wit}}},{key:"result",value:function(){var t=this._;return this._="",t.length?t:null}}])}();function Eit(t){var e=1;this._+=t[0];for(var n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Oit(t,e){var n,r,i=3,a=4.5;function o(t){return t&&("function"==typeof a&&r.pointRadius(+a.apply(this,arguments)),Hnt(t,n(r))),r.result()}return o.area=function(t){return Hnt(t,n(Mrt)),Mrt.result()},o.measure=function(t){return Hnt(t,n(hit)),hit.result()},o.bounds=function(t){return Hnt(t,n(_rt)),_rt.result()},o.centroid=function(t){return Hnt(t,n(nit)),nit.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,Fnt):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new kit(i)):new rit(e=t),"function"!=typeof a&&r.pointRadius(a),o):e},o.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(r.pointRadius(+t),+t),o):a},o.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{var n=Math.floor(t);if(!(n>=0))throw new RangeError("invalid digits: ".concat(t));i=n}return null===e&&(r=new kit(i)),o},o.projection(t).digits(i).context(e)}function Sit(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Mit(t,e,n){var r=Sit(t,e-Unt,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function Tit(t,e,n){var r=Sit(t,e-Unt,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Ait(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:prt,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Pit(t,e){return trt(t[0]-e[0])<Unt&&trt(t[1]-e[1])<Unt}function Nit(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Cit(t,e,n,r,i){var a,o,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(Pit(r,o)){if(!r[2]&&!o[2]){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);return void i.lineEnd()}o[0]+=2*Unt}s.push(n=new Nit(r,t,null,!0)),u.push(n.o=new Nit(r,null,n,!1)),s.push(n=new Nit(o,t,null,!1)),u.push(n.o=new Nit(o,null,n,!0))}})),s.length){for(u.sort(e),_it(s),_it(u),a=0,o=u.length;a<o;++a)u[a].e=n=!n;for(var c,l,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=c.length;a<o;++a)i.point((l=c[a])[0],l[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((l=c[a])[0],l[1]);else r(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}}function _it(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Lit(t){return[nrt(t[1],t[0]),hrt(t[2])]}function Rit(t){var e=t[0],n=t[1],r=rrt(n);return[r*rrt(e),r*urt(e),urt(n)]}function jit(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Dit(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Iit(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Fit(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function zit(t){var e=lrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Bit(t){return trt(t[0])<=Xnt?t[0]:crt(t[0])*((trt(t[0])+Xnt)%Znt-Xnt)}var Git=Jn().mark(Wit);function Wit(t){var e,n,r;return Jn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:e=nr(t),i.prev=1,e.s();case 3:if((n=e.n()).done){i.next=8;break}return r=n.value,i.delegateYield(r,"t0",6);case 6:i.next=3;break;case 8:i.next=13;break;case 10:i.prev=10,i.t1=i.catch(1),e.e(i.t1);case 13:return i.prev=13,e.f(),i.finish(13);case 16:case"end":return i.stop()}}),Git,null,[[1,10,13,16]])}function Vit(t){return Array.from(Wit(t))}function Hit(t,e,n,r){return function(i){var a,o,s,u=e(i),c=Ait(),l=e(c),f=!1,d={point:h,lineStart:v,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=m,d.lineEnd=b,o=[],a=[]},polygonEnd:function(){d.point=h,d.lineStart=v,d.lineEnd=g,o=Vit(o);var t=function(t,e){var n=Bit(e),r=e[1],i=urt(r),a=[urt(n),-rrt(n),0],o=0,s=0,u=new Ynt;1===i?r=Knt+Unt:-1===i&&(r=-Knt-Unt);for(var c=0,l=t.length;c<l;++c)if(d=(f=t[c]).length)for(var f,d,h=f[d-1],p=Bit(h),v=h[1]/2+$nt,g=urt(v),y=rrt(v),m=0;m<d;++m,p=x,g=k,y=E,h=b){var b=f[m],x=Bit(b),w=b[1]/2+$nt,k=urt(w),E=rrt(w),O=x-p,S=O>=0?1:-1,M=S*O,T=M>Xnt,A=g*k;if(u.add(nrt(A*S*urt(M),y*E+A*rrt(M))),o+=T?O+S*Znt:O,T^p>=n^x>=n){var P=Dit(Rit(h),Rit(b));zit(P);var N=Dit(a,P);zit(N);var C=(T^O>=0?-1:1)*hrt(N[2]);(r>C||r===C&&(P[0]||P[1]))&&(s+=T^O>=0?1:-1)}}return(o<-Unt||o<Unt&&u<-qnt)^1&s}(a,r);o.length?(f||(i.polygonStart(),f=!0),Cit(o,Uit,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function v(){d.point=p,u.lineStart()}function g(){d.point=h,u.lineEnd()}function y(t,e){s.push([t,e]),l.point(t,e)}function m(){l.lineStart(),s=[]}function b(){y(s[0][0],s[0][1]),l.lineEnd();var t,e,n,r,u=l.clean(),d=c.result(),h=d.length;if(s.pop(),a.push(s),s=null,h)if(1&u){if((e=(n=d[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else h>1&&2&u&&d.push(d.pop().concat(d.shift())),o.push(d.filter(Yit))}return d}}function Yit(t){return t.length>1}function Uit(t,e){return((t=t.x)[0]<0?t[1]-Knt-Unt:Knt-t[1])-((e=e.x)[0]<0?e[1]-Knt-Unt:Knt-e[1])}const qit=Hit((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Xnt:-Xnt,u=trt(a-n);trt(u-Xnt)<Unt?(t.point(n,r=(r+o)/2>0?Knt:-Knt),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&u>=Xnt&&(trt(n-i)<Unt&&(n-=i*Unt),trt(a-s)<Unt&&(a-=s*Unt),r=function(t,e,n,r){var i,a,o=urt(t-n);return trt(o)>Unt?ert((urt(e)*(a=rrt(r))*urt(n)-urt(r)*(i=rrt(e))*urt(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Knt,r.point(-Xnt,i),r.point(0,i),r.point(Xnt,i),r.point(Xnt,0),r.point(Xnt,-i),r.point(0,-i),r.point(-Xnt,-i),r.point(-Xnt,0),r.point(-Xnt,i);else if(trt(t[0]-e[0])>Unt){var a=t[0]<e[0]?Xnt:-Xnt;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}),[-Xnt,-Knt]);function Xit(t,e){(e=Rit(e))[0]-=t,zit(e);var n=drt(-e[1]);return((-e[2]<0?-n:n)+Znt-Unt)%Znt}var Kit=1e9,$it=-Kit;function Zit(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,s,c){var l=0,f=0;if(null==i||(l=o(i,s))!==(f=o(a,s))||u(i,a)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==f);else c.point(a[0],a[1])}function o(r,i){return trt(r[0]-t)<Unt?i>0?0:3:trt(r[0]-n)<Unt?i>0?2:1:trt(r[1]-e)<Unt?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var u,c,l,f,d,h,p,v,g,y,m,b=o,x=Ait(),w={point:k,lineStart:function(){w.point=E,c&&c.push(l=[]),y=!0,g=!1,p=v=NaN},lineEnd:function(){u&&(E(f,d),h&&g&&x.rejoin(),u.push(x.result())),w.point=k,g&&b.lineEnd()},polygonStart:function(){b=x,u=[],c=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var a,o,s=c[n],u=1,l=s.length,f=s[0],d=f[0],h=f[1];u<l;++u)a=d,o=h,d=(f=s[u])[0],h=f[1],o<=r?h>r&&(d-a)*(r-o)>(h-o)*(t-a)&&++e:h<=r&&(d-a)*(r-o)<(h-o)*(t-a)&&--e;return e}(),n=m&&e,i=(u=Vit(u)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&Cit(u,s,e,a,o),o.polygonEnd()),b=o,u=c=l=null}};function k(t,e){i(t,e)&&b.point(t,e)}function E(a,o){var s=i(a,o);if(c&&l.push([a,o]),y)f=a,d=o,h=s,y=!1,s&&(b.lineStart(),b.point(a,o));else if(s&&g)b.point(a,o);else{var u=[p=Math.max($it,Math.min(Kit,p)),v=Math.max($it,Math.min(Kit,v))],x=[a=Math.max($it,Math.min(Kit,a)),o=Math.max($it,Math.min(Kit,o))];!function(t,e,n,r,i,a){var o,s=t[0],u=t[1],c=0,l=1,f=e[0]-s,d=e[1]-u;if(o=n-s,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<l&&(l=o)}else if(f>0){if(o>l)return;o>c&&(c=o)}if(o=i-s,f||!(o<0)){if(o/=f,f<0){if(o>l)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<l&&(l=o)}if(o=r-u,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<l&&(l=o)}else if(d>0){if(o>l)return;o>c&&(c=o)}if(o=a-u,d||!(o<0)){if(o/=d,d<0){if(o>l)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<l&&(l=o)}return c>0&&(t[0]=s+c*f,t[1]=u+c*d),l<1&&(e[0]=s+l*f,e[1]=u+l*d),!0}}}}}(u,x,t,e,n,r)?s&&(b.lineStart(),b.point(a,o),m=!1):(g||(b.lineStart(),b.point(u[0],u[1])),b.point(x[0],x[1]),s||b.lineEnd(),m=!1)}p=a,v=o,g=s}return w}}function Qit(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Jit(t,e){return trt(t)>Xnt&&(t-=Math.round(t/Znt)*Znt),[t,e]}function tat(t,e,n){return(t%=Znt)?e||n?Qit(nat(t),rat(e,n)):nat(t):e||n?rat(e,n):Jit}function eat(t){return function(e,n){return trt(e+=t)>Xnt&&(e-=Math.round(e/Znt)*Znt),[e,n]}}function nat(t){var e=eat(t);return e.invert=eat(-t),e}function rat(t,e){var n=rrt(t),r=urt(t),i=rrt(e),a=urt(e);function o(t,e){var o=rrt(e),s=rrt(t)*o,u=urt(t)*o,c=urt(e),l=c*n+s*r;return[nrt(u*i-l*a,s*n-c*r),hrt(l*i+u*a)]}return o.invert=function(t,e){var o=rrt(e),s=rrt(t)*o,u=urt(t)*o,c=urt(e),l=c*i-u*a;return[nrt(u*i+c*a,s*n+l*r),hrt(l*n-s*r)]},o}function iat(t){return function(e){var n=new aat;for(var r in t)n[r]=t[r];return n.stream=e,n}}function aat(){}function oat(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Hnt(n,t.stream(_rt)),e(_rt.result()),null!=r&&t.clipExtent(r),t}function sat(t,e,n){return oat(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([o,s])}),n)}function uat(t,e,n){return sat(t,[[0,0],e],n)}function cat(t,e,n){return oat(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];t.scale(150*i).translate([a,o])}),n)}function lat(t,e,n){return oat(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([a,o])}),n)}Jit.invert=Jit,aat.prototype={constructor:aat,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var fat=16,dat=rrt(30*Jnt);function hat(t,e){return+e?function(t,e){function n(r,i,a,o,s,u,c,l,f,d,h,p,v,g){var y=c-r,m=l-i,b=y*y+m*m;if(b>4*e&&v--){var x=o+d,w=s+h,k=u+p,E=lrt(x*x+w*w+k*k),O=hrt(k/=E),S=trt(trt(k)-1)<Unt||trt(a-f)<Unt?(a+f)/2:nrt(w,x),M=t(S,O),T=M[0],A=M[1],P=T-r,N=A-i,C=m*P-y*N;(C*C/b>e||trt((y*P+m*N)/b-.5)>.3||o*d+s*h+u*p<dat)&&(n(r,i,a,o,s,u,T,A,S,x/=E,w/=E,k,v,g),g.point(T,A),n(T,A,S,x,w,k,c,l,f,d,h,p,v,g))}}return function(e){var r,i,a,o,s,u,c,l,f,d,h,p,v={point:g,lineStart:y,lineEnd:b,polygonStart:function(){e.polygonStart(),v.lineStart=x},polygonEnd:function(){e.polygonEnd(),v.lineStart=y}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){l=NaN,v.point=m,e.lineStart()}function m(r,i){var a=Rit([r,i]),o=t(r,i);n(l,f,c,d,h,p,l=o[0],f=o[1],c=r,d=a[0],h=a[1],p=a[2],fat,e),e.point(l,f)}function b(){v.point=g,e.lineEnd()}function x(){y(),v.point=w,v.lineEnd=k}function w(t,e){m(r=t,e),i=l,a=f,o=d,s=h,u=p,v.point=m}function k(){n(l,f,c,d,h,p,i,a,r,o,s,u,fat,e),v.lineEnd=b,b()}return v}}(t,e):function(t){return iat({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var pat=iat({point:function(t,e){this.stream.point(t*Jnt,e*Jnt)}});function vat(t,e,n,r,i,a){if(!a)return function(t,e,n,r,i){function a(a,o){return[e+t*(a*=r),n-t*(o*=i)]}return a.invert=function(a,o){return[(a-e)/t*r,(n-o)/t*i]},a}(t,e,n,r,i);var o=rrt(a),s=urt(a),u=o*t,c=s*t,l=o/t,f=s/t,d=(s*n-o*e)/t,h=(s*e+o*n)/t;function p(t,a){return[u*(t*=r)-c*(a*=i)+e,n-c*t-u*a]}return p.invert=function(t,e){return[r*(l*t-f*e+d),i*(h-f*t-l*e)]},p}function gat(t){return yat((function(){return t}))()}function yat(t){var e,n,r,i,a,o,s,u,c,l,f=150,d=480,h=250,p=0,v=0,g=0,y=0,m=0,b=0,x=1,w=1,k=null,E=qit,O=null,S=Fnt,M=.5;function T(t){return u(t[0]*Jnt,t[1]*Jnt)}function A(t){return(t=u.invert(t[0],t[1]))&&[t[0]*Qnt,t[1]*Qnt]}function P(){var t=vat(f,0,0,x,w,b).apply(null,e(p,v)),r=vat(f,d-t[0],h-t[1],x,w,b);return n=tat(g,y,m),s=Qit(e,r),u=Qit(n,s),o=hat(s,M),N()}function N(){return c=l=null,T}return T.stream=function(t){return c&&l===t?c:c=pat(function(t){return iat({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(E(o(S(l=t)))))},T.preclip=function(t){return arguments.length?(E=t,k=void 0,N()):E},T.postclip=function(t){return arguments.length?(S=t,O=r=i=a=null,N()):S},T.clipAngle=function(t){return arguments.length?(E=+t?function(t){var e=rrt(t),n=2*Jnt,r=e>0,i=trt(e)>Unt;function a(t,n){return rrt(t)*rrt(n)>e}function o(t,n,r){var i=[1,0,0],a=Dit(Rit(t),Rit(n)),o=jit(a,a),s=a[0],u=o-s*s;if(!u)return!r&&t;var c=e*o/u,l=-e*s/u,f=Dit(i,a),d=Fit(i,c);Iit(d,Fit(a,l));var h=f,p=jit(d,h),v=jit(h,h),g=p*p-v*(jit(d,d)-1);if(!(g<0)){var y=lrt(g),m=Fit(h,(-p-y)/v);if(Iit(m,d),m=Lit(m),!r)return m;var b,x=t[0],w=n[0],k=t[1],E=n[1];w<x&&(b=x,x=w,w=b);var O=w-x,S=trt(O-Xnt)<Unt;if(!S&&E<k&&(b=k,k=E,E=b),S||O<Unt?S?k+E>0^m[1]<(trt(m[0]-x)<Unt?k:E):k<=m[1]&&m[1]<=E:O>Xnt^(x<=m[0]&&m[0]<=w)){var M=Fit(h,(-p+y)/v);return Iit(M,d),[m,Lit(M)]}}}function s(e,n){var i=r?t:Xnt-t,a=0;return e<-i?a|=1:e>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return Hit(a,(function(t){var e,n,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(f,d){var h,p=[f,d],v=a(f,d),g=r?v?0:s(f,d):v?s(f+(f<0?Xnt:-Xnt),d):0;if(!e&&(c=u=v)&&t.lineStart(),v!==u&&(!(h=o(e,p))||Pit(e,h)||Pit(p,h))&&(p[2]=1),v!==u)l=0,v?(t.lineStart(),h=o(p,e),t.point(h[0],h[1])):(h=o(e,p),t.point(h[0],h[1],2),t.lineEnd()),e=h;else if(i&&e&&r^v){var y;g&n||!(y=o(p,e,!0))||(l=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1],3)))}!v||e&&Pit(e,p)||t.point(p[0],p[1]),e=p,u=v,n=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}}),(function(e,r,i,a){!function(t,e,n,r,i,a){if(n){var o=rrt(e),s=urt(e),u=r*n;null==i?(i=e+r*Znt,a=e-u/2):(i=Xit(o,i),a=Xit(o,a),(r>0?i<a:i>a)&&(i+=r*Znt));for(var c,l=i;r>0?l>a:l<a;l-=u)c=Lit([o,-s*rrt(l),-s*urt(l)]),t.point(c[0],c[1])}}(a,t,n,i,e,r)}),r?[0,-t]:[-Xnt,t-Xnt])}(k=t*Jnt):(k=null,qit),N()):k*Qnt},T.clipExtent=function(t){return arguments.length?(S=null==t?(O=r=i=a=null,Fnt):Zit(O=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),N()):null==O?null:[[O,r],[i,a]]},T.scale=function(t){return arguments.length?(f=+t,P()):f},T.translate=function(t){return arguments.length?(d=+t[0],h=+t[1],P()):[d,h]},T.center=function(t){return arguments.length?(p=t[0]%360*Jnt,v=t[1]%360*Jnt,P()):[p*Qnt,v*Qnt]},T.rotate=function(t){return arguments.length?(g=t[0]%360*Jnt,y=t[1]%360*Jnt,m=t.length>2?t[2]%360*Jnt:0,P()):[g*Qnt,y*Qnt,m*Qnt]},T.angle=function(t){return arguments.length?(b=t%360*Jnt,P()):b*Qnt},T.reflectX=function(t){return arguments.length?(x=t?-1:1,P()):x<0},T.reflectY=function(t){return arguments.length?(w=t?-1:1,P()):w<0},T.precision=function(t){return arguments.length?(o=hat(s,M=t*t),N()):lrt(M)},T.fitExtent=function(t,e){return sat(T,t,e)},T.fitSize=function(t,e){return uat(T,t,e)},T.fitWidth=function(t,e){return cat(T,t,e)},T.fitHeight=function(t,e){return lat(T,t,e)},function(){return e=t.apply(this,arguments),T.invert=e.invert&&A,P()}}function mat(t){var e=0,n=Xnt/3,r=yat(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Jnt,n=t[1]*Jnt):[e*Qnt,n*Qnt]},i}function bat(t,e){var n=urt(t),r=(n+urt(e))/2;if(trt(r)<Unt)return function(t){var e=rrt(t);function n(t,n){return[t*e,urt(n)/e]}return n.invert=function(t,n){return[t/e,hrt(n*e)]},n}(t);var i=1+n*(2*r-n),a=lrt(i)/r;function o(t,e){var n=lrt(i-2*r*urt(e))/r;return[n*urt(t*=r),a-n*rrt(t)]}return o.invert=function(t,e){var n=a-e,o=nrt(t,trt(n))*crt(n);return n*r<0&&(o-=Xnt*crt(t)*crt(n)),[o/r,hrt((i-(t*t+n*n)*r*r)/(2*r))]},o}function xat(){return mat(bat).scale(155.424).center([0,33.6442])}function wat(){return xat().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function kat(){var t,e,n,r,i,a,o=wat(),s=xat().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=xat().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){a=[t,e]}};function l(t){var e=t[0],o=t[1];return a=null,n.point(e,o),a||(r.point(e,o),a)||(i.point(e,o),a)}function f(){return t=e=null,l}return l.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:o).invert(t)},l.stream=function(n){return t&&e===n?t:t=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([o.stream(e=n),s.stream(n),u.stream(n)])},l.precision=function(t){return arguments.length?(o.precision(t),s.precision(t),u.precision(t),f()):o.precision()},l.scale=function(t){return arguments.length?(o.scale(t),s.scale(.35*t),u.scale(t),l.translate(o.translate())):o.scale()},l.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),a=+t[0],l=+t[1];return n=o.translate(t).clipExtent([[a-.455*e,l-.238*e],[a+.455*e,l+.238*e]]).stream(c),r=s.translate([a-.307*e,l+.201*e]).clipExtent([[a-.425*e+Unt,l+.12*e+Unt],[a-.214*e-Unt,l+.234*e-Unt]]).stream(c),i=u.translate([a-.205*e,l+.212*e]).clipExtent([[a-.214*e+Unt,l+.166*e+Unt],[a-.115*e-Unt,l+.234*e-Unt]]).stream(c),f()},l.fitExtent=function(t,e){return sat(l,t,e)},l.fitSize=function(t,e){return uat(l,t,e)},l.fitWidth=function(t,e){return cat(l,t,e)},l.fitHeight=function(t,e){return lat(l,t,e)},l.scale(1070)}function Eat(t){return function(e,n){var r=rrt(e),i=rrt(n),a=t(r*i);return a===1/0?[2,0]:[a*i*urt(e),a*urt(n)]}}function Oat(t){return function(e,n){var r=lrt(e*e+n*n),i=t(r),a=urt(i),o=rrt(i);return[nrt(e*a,r*o),hrt(r&&n*a/r)]}}var Sat=Eat((function(t){return lrt(2/(1+t))}));function Mat(){return gat(Sat).scale(124.75).clipAngle(179.999)}Sat.invert=Oat((function(t){return 2*hrt(t/2)}));var Tat=Eat((function(t){return(t=drt(t))&&t/urt(t)}));function Aat(){return gat(Tat).scale(79.4188).clipAngle(179.999)}function Pat(t,e){return[t,ort(frt((Knt+e)/2))]}function Nat(){return Cat(Pat).scale(961/Znt)}function Cat(t){var e,n,r,i=gat(t),a=i.center,o=i.scale,s=i.translate,u=i.clipExtent,c=null;function l(){var a=Xnt*o(),s=i(function(t){function e(e){return(e=t(e[0]*Jnt,e[1]*Jnt))[0]*=Qnt,e[1]*=Qnt,e}return t=tat(t[0]*Jnt,t[1]*Jnt,t.length>2?t[2]*Jnt:0),e.invert=function(e){return(e=t.invert(e[0]*Jnt,e[1]*Jnt))[0]*=Qnt,e[1]*=Qnt,e},e}(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:t===Pat?[[Math.max(s[0]-a,c),e],[Math.min(s[0]+a,n),r]]:[[c,Math.max(s[1]-a,e)],[n,Math.min(s[1]+a,r)]])}return i.scale=function(t){return arguments.length?(o(t),l()):o()},i.translate=function(t){return arguments.length?(s(t),l()):s()},i.center=function(t){return arguments.length?(a(t),l()):a()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),l()):null==c?null:[[c,e],[n,r]]},l()}function _at(t){return frt((Knt+t)/2)}function Lat(t,e){var n=rrt(t),r=t===e?urt(t):ort(n/rrt(e))/ort(_at(e)/_at(t)),i=n*srt(_at(t),r)/r;if(!r)return Pat;function a(t,e){i>0?e<-Knt+Unt&&(e=-Knt+Unt):e>Knt-Unt&&(e=Knt-Unt);var n=i/srt(_at(e),r);return[n*urt(r*t),i-n*rrt(r*t)]}return a.invert=function(t,e){var n=i-e,a=crt(r)*lrt(t*t+n*n),o=nrt(t,trt(n))*crt(n);return n*r<0&&(o-=Xnt*crt(t)*crt(n)),[o/r,2*ert(srt(i/a,1/r))-Knt]},a}function Rat(){return mat(Lat).scale(109.5).parallels([30,30])}function jat(t,e){return[t,e]}function Dat(){return gat(jat).scale(152.63)}function Iat(t,e){var n=rrt(t),r=t===e?urt(t):(n-rrt(e))/(e-t),i=n/r+t;if(trt(r)<Unt)return jat;function a(t,e){var n=i-e,a=r*t;return[n*urt(a),i-n*rrt(a)]}return a.invert=function(t,e){var n=i-e,a=nrt(t,trt(n))*crt(n);return n*r<0&&(a-=Xnt*crt(t)*crt(n)),[a/r,i-crt(r)*lrt(t*t+n*n)]},a}function Fat(){return mat(Iat).scale(131.154).center([0,13.9389])}Tat.invert=Oat((function(t){return t})),Pat.invert=function(t,e){return[t,2*ert(art(e))-Knt]},jat.invert=jat;var zat=1.340264,Bat=-.081106,Gat=893e-6,Wat=.003796,Vat=lrt(3)/2;function Hat(t,e){var n=hrt(Vat*urt(e)),r=n*n,i=r*r*r;return[t*rrt(n)/(Vat*(zat+3*Bat*r+i*(7*Gat+9*Wat*r))),n*(zat+Bat*r+i*(Gat+Wat*r))]}function Yat(){return gat(Hat).scale(177.158)}function Uat(t,e){var n=rrt(e),r=rrt(t)*n;return[n*urt(t)/r,urt(e)/r]}function qat(){return gat(Uat).scale(144.049).clipAngle(60)}function Xat(){var t,e,n,r,i,a,o,s=1,u=0,c=0,l=1,f=1,d=0,h=null,p=1,v=1,g=iat({point:function(t,e){var n=b([t,e]);this.stream.point(n[0],n[1])}}),y=Fnt;function m(){return p=s*l,v=s*f,a=o=null,b}function b(n){var r=n[0]*p,i=n[1]*v;if(d){var a=i*t-r*e;r=r*t+i*e,i=a}return[r+u,i+c]}return b.invert=function(n){var r=n[0]-u,i=n[1]-c;if(d){var a=i*t+r*e;r=r*t-i*e,i=a}return[r/p,i/v]},b.stream=function(t){return a&&o===t?a:a=g(y(o=t))},b.postclip=function(t){return arguments.length?(y=t,h=n=r=i=null,m()):y},b.clipExtent=function(t){return arguments.length?(y=null==t?(h=n=r=i=null,Fnt):Zit(h=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),m()):null==h?null:[[h,n],[r,i]]},b.scale=function(t){return arguments.length?(s=+t,m()):s},b.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],m()):[u,c]},b.angle=function(n){return arguments.length?(e=urt(d=n%360*Jnt),t=rrt(d),m()):d*Qnt},b.reflectX=function(t){return arguments.length?(l=t?-1:1,m()):l<0},b.reflectY=function(t){return arguments.length?(f=t?-1:1,m()):f<0},b.fitExtent=function(t,e){return sat(b,t,e)},b.fitSize=function(t,e){return uat(b,t,e)},b.fitWidth=function(t,e){return cat(b,t,e)},b.fitHeight=function(t,e){return lat(b,t,e)},b}function Kat(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function $at(){return gat(Kat).scale(175.295)}function Zat(t,e){return[rrt(e)*urt(t),urt(e)]}function Qat(){return gat(Zat).scale(249.5).clipAngle(90+Unt)}function Jat(t,e){var n=rrt(e),r=1+rrt(t)*n;return[n*urt(t)/r,urt(e)/r]}function tot(){return gat(Jat).scale(250).clipAngle(142)}function eot(t,e){return[ort(frt((Knt+e)/2)),-t]}function not(){var t=Cat(eot),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}Hat.invert=function(t,e){for(var n,r=e,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=n=(r*(zat+Bat*i+a*(Gat+Wat*i))-e)/(zat+3*Bat*i+a*(7*Gat+9*Wat*i)))*r)*i*i,!(trt(n)<qnt));++o);return[Vat*t*(zat+3*Bat*i+a*(7*Gat+9*Wat*i))/rrt(r),hrt(urt(r)/Vat)]},Uat.invert=Oat(ert),Kat.invert=function(t,e){var n,r=e,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-e)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(trt(n)>Unt&&--i>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]},Zat.invert=Oat(hrt),Jat.invert=Oat((function(t){return 2*ert(t)})),eot.invert=function(t,e){return[-e,2*ert(art(t))-Knt]};function rot(t){var e=t.data;if(Array.isArray(e))return Object.assign(Object.assign({},t),{data:{value:e}});var n=e.type;return"graticule10"===n?Object.assign(Object.assign({},t),{data:{value:[function(){var t,e,n,r,i,a,o,s,u,c,l,f,d=10,h=d,p=90,v=360,g=2.5;function y(){return{type:"MultiLineString",coordinates:m()}}function m(){return Sit(irt(r/p)*p,n,p).map(l).concat(Sit(irt(s/v)*v,o,v).map(f)).concat(Sit(irt(e/d)*d,t,d).filter((function(t){return trt(t%p)>Unt})).map(u)).concat(Sit(irt(a/h)*h,i,h).filter((function(t){return trt(t%v)>Unt})).map(c))}return y.lines=function(){return m().map((function(t){return{type:"LineString",coordinates:t}}))},y.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(f(o).slice(1),l(n).reverse().slice(1),f(s).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),y.precision(g)):[[r,s],[n,o]]},y.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),y.precision(g)):[[e,a],[t,i]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(p=+t[0],v=+t[1],y):[p,v]},y.stepMinor=function(t){return arguments.length?(d=+t[0],h=+t[1],y):[d,h]},y.precision=function(d){return arguments.length?(g=+d,u=Mit(a,i,90),c=Tit(e,t,g),l=Mit(s,o,90),f=Tit(r,n,g),y):g},y.extentMajor([[-180,-90+Unt],[180,90-Unt]]).extentMinor([[-180,-80-Unt],[180,80+Unt]])}()()]}}):"sphere"===n?Object.assign(Object.assign({},t),{sphere:!0,data:{value:[{type:"Sphere"}]}}):t}function iot(t){return"geoPath"===t.type}var aot=function(){return function(t){var e=t.children,n=t.coordinate,r=void 0===n?{}:n;if(!Array.isArray(e))return[];var i,a=r.type,o=void 0===a?"equalEarth":a,s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(r,["type"]),u=function(t){if("function"==typeof t)return t;var e="geo".concat(ll(t)),n=l[e];if(!n)throw new Error("Unknown coordinate: ".concat(t));return n}(o),c=e.map(rot);return[Object.assign(Object.assign({},t),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:function(){return[["custom",function(t,e,n,r){var a=u();(function(t,e,n,r){var i,a,o,s=r.outline,u=void 0===s?(o=(a=e.filter(iot)).find((function(t){return t.sphere})),o?{type:"Sphere"}:(i=a.filter((function(t){return!t.sphere})).flatMap((function(t){return t.data.value})),{type:"FeatureCollection",features:i.flatMap((function(t){return function(t){if(!t||!t.type)return null;var e={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"}[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featureCollection"===e?t:void 0:null}(t).features}))})):s,c=r.size,l=void 0===c?"fitExtent":c;"fitExtent"===l?function(t,e,n){var r=n.x,i=n.y,a=n.width,o=n.height;t.fitExtent([[r,i],[a,o]],e)}(t,u,n):"fitWidth"===l&&function(t,e,n){var r=n.width,i=n.height,a=g(Oit(t.fitWidth(r,e)).bounds(e),2),o=g(a[0],2),s=o[0],u=o[1],c=g(a[1],2),l=c[0],f=c[1],d=Math.ceil(f-u),h=Math.min(Math.ceil(l-s),d),p=t.scale()*(h-1)/h,v=g(t.translate(),2),y=v[0],m=v[1]+(i-d)/2;t.scale(p).translate([y,m]).precision(.2)}(t,u,n)})(a,c,{x:t,y:e,width:n,height:r},s),function(t,e){for(var n,r=0,i=Object.entries(e);r<i.length;r++){var a=g(i[r],2),o=a[0],s=a[1];null===(n=t[o])||void 0===n||n.call(t,s)}}(a,s),i=Oit(a);var o=new TM({domain:[t,t+n]}),l=new TM({domain:[e,e+r]});return{transform:function(t){return function(t){var e=a(t);if(!e)return[null,null];var n=g(e,2),r=n[0],i=n[1];return[o.map(r),l.map(i)]}(t)},untransform:function(t){return function(t){if(!t)return null;var e=g(t,2),n=e[0],r=e[1],i=[o.invert(n),l.invert(r)];return a.invert(i)}(t)}}}]]}},children:c.flatMap((function(t){return iot(t)?function(t){var e=t.style,n=t.tooltip,r=void 0===n?{}:n;return Object.assign(Object.assign({},t),{type:"path",tooltip:t0(r,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},e),{d:function(t){return i(t)||[]}})})}(t):t}))})]}};aot.props={};var oot=function(){return function(t){t.type;var e=t.data,n=t.scale,r=t.encode,i=t.style,a=t.animate,o=t.key,s=t.state,u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["type","data","scale","encode","style","animate","key","state"]);return[Object.assign(Object.assign({type:"geoView"},u),{children:[{type:"geoPath",key:"".concat(o,"-0"),data:{value:e},scale:n,encode:r,style:i,animate:a,state:s}]})]}};function sot(){return{"composition.geoView":aot,"composition.geoPath":oot}}function uot(){return Object.assign(Object.assign(Object.assign(Object.assign({},sot()),Int()),uet()),Ott())}function cot(t,e){return function(t){function n(t){return k(this,n),N(this,n,[Object.assign(Object.assign({},t),{lib:e})])}return _(n,t),O(n)}(t)}function lot(t,e){var n=e.cx,r=void 0===n?0:n,i=e.cy,a=void 0===i?0:i,o=e.r;t.arc(r,a,o,0,2*Math.PI,!1)}function fot(t,e){var n=e.cx,r=void 0===n?0:n,i=e.cy,a=void 0===i?0:i,o=e.rx,s=e.ry;if(t.ellipse)t.ellipse(r,a,o,s,0,0,2*Math.PI,!1);else{var u=o>s?o:s,c=o>s?1:o/s,l=o>s?s/o:1;t.save(),t.scale(c,l),t.arc(r,a,u,0,2*Math.PI)}}function dot(t,e){var n,r,i=e.x1,a=e.y1,o=e.x2,s=e.y2,u=e.markerStart,c=e.markerEnd,l=e.markerStartOffset,f=e.markerEndOffset,d=0,h=0,p=0,v=0,g=0;u&&eW(u)&&l&&(n=o-i,r=s-a,g=Math.atan2(r,n),d=Math.cos(g)*(l||0),h=Math.sin(g)*(l||0)),c&&eW(c)&&f&&(n=i-o,r=a-s,g=Math.atan2(r,n),p=Math.cos(g)*(f||0),v=Math.sin(g)*(f||0)),t.moveTo(i+d,a+h),t.lineTo(o+p,s+v)}function hot(t,e){var n,r,i=e.markerStart,a=e.markerEnd,o=e.markerStartOffset,s=e.markerEndOffset,u=e.d,c=u.absolutePath,l=u.segments,f=0,d=0,h=0,p=0,v=0;if(i&&eW(i)&&o){var y=g(i.parentNode.getStartTangent(),2),m=y[0],b=y[1];n=m[0]-b[0],r=m[1]-b[1],v=Math.atan2(r,n),f=Math.cos(v)*(o||0),d=Math.sin(v)*(o||0)}if(a&&eW(a)&&s){var x=g(a.parentNode.getEndTangent(),2),w=x[0],k=x[1];n=w[0]-k[0],r=w[1]-k[1],v=Math.atan2(r,n),h=Math.cos(v)*(s||0),p=Math.sin(v)*(s||0)}for(var E=0;E<c.length;E++){var O=c[E],S=O[0],M=c[E+1],T=0===E&&(0!==f||0!==d),A=(E===c.length-1||M&&("M"===M[0]||"Z"===M[0]))&&0!==h&&0!==p,P=g(T?[f,d]:[0,0],2),N=P[0],C=P[1],_=g(A?[h,p]:[0,0],2),L=_[0],R=_[1];switch(S){case"M":t.moveTo(O[1]+N,O[2]+C);break;case"L":t.lineTo(O[1]+L,O[2]+R);break;case"Q":t.quadraticCurveTo(O[1],O[2],O[3]+L,O[4]+R);break;case"C":t.bezierCurveTo(O[1],O[2],O[3],O[4],O[5]+L,O[6]+R);break;case"A":var j=l[E].arcParams,D=j.cx,I=j.cy,F=j.rx,z=j.ry,B=j.startAngle,G=j.endAngle,W=j.xRotation,V=j.sweepFlag;if(t.ellipse)t.ellipse(D,I,F,z,W,B,G,!!(1-V));else{var H=F>z?F:z,Y=F>z?1:F/z,U=F>z?z/F:1;t.translate(D,I),t.rotate(W),t.scale(Y,U),t.arc(0,0,H,B,G,!!(1-V)),t.scale(1/Y,1/U),t.rotate(-W),t.translate(-D,-I)}A&&t.lineTo(O[6]+h,O[7]+p);break;case"Z":t.closePath()}}}function pot(t,e){var n,r,i=e.markerStart,a=e.markerEnd,o=e.markerStartOffset,s=e.markerEndOffset,u=e.points.points,c=u.length,l=u[0][0],f=u[0][1],d=u[c-1][0],h=u[c-1][1],p=0,v=0,g=0,y=0,m=0;i&&eW(i)&&o&&(n=u[1][0]-u[0][0],r=u[1][1]-u[0][1],m=Math.atan2(r,n),p=Math.cos(m)*(o||0),v=Math.sin(m)*(o||0)),a&&eW(a)&&s&&(n=u[c-1][0]-u[0][0],r=u[c-1][1]-u[0][1],m=Math.atan2(r,n),g=Math.cos(m)*(s||0),y=Math.sin(m)*(s||0)),t.moveTo(l+(p||g),f+(v||y));for(var b=1;b<c-1;b++){var x=u[b];t.lineTo(x[0],x[1])}t.lineTo(d,h)}function vot(t,e){var n,r,i=e.markerStart,a=e.markerEnd,o=e.markerStartOffset,s=e.markerEndOffset,u=e.points.points,c=u.length,l=u[0][0],f=u[0][1],d=u[c-1][0],h=u[c-1][1],p=0,v=0,g=0,y=0,m=0;i&&eW(i)&&o&&(n=u[1][0]-u[0][0],r=u[1][1]-u[0][1],m=Math.atan2(r,n),p=Math.cos(m)*(o||0),v=Math.sin(m)*(o||0)),a&&eW(a)&&s&&(n=u[c-2][0]-u[c-1][0],r=u[c-2][1]-u[c-1][1],m=Math.atan2(r,n),g=Math.cos(m)*(s||0),y=Math.sin(m)*(s||0)),t.moveTo(l+p,f+v);for(var b=1;b<c-1;b++){var x=u[b];t.lineTo(x[0],x[1])}t.lineTo(d+g,h+y)}function got(t,e){var n=e.x,r=void 0===n?0:n,i=e.y,a=void 0===i?0:i,o=e.radius,s=e.width,u=e.height,c=s,l=u,f=o&&o.some((function(t){return 0!==t}));if(f){var d=s>0?1:-1,h=u>0?1:-1,p=d+h===0,v=o.map((function(t){return Ae(t,0,Math.min(Math.abs(c)/2,Math.abs(l)/2))})),y=g(v,4),m=y[0],b=y[1],x=y[2],w=y[3];t.moveTo(d*m+r,a),t.lineTo(c-d*b+r,a),0!==b&&t.arc(c-d*b+r,h*b+a,b,-h*Math.PI/2,d>0?0:Math.PI,p),t.lineTo(c+r,l-h*x+a),0!==x&&t.arc(c-d*x+r,l-h*x+a,x,d>0?0:Math.PI,h>0?Math.PI/2:1.5*Math.PI,p),t.lineTo(d*w+r,l+a),0!==w&&t.arc(d*w+r,l-h*w+a,w,h>0?Math.PI/2:-Math.PI/2,d>0?Math.PI:0,p),t.lineTo(r,h*m+a),0!==m&&t.arc(d*m+r,h*m+a,m,d>0?Math.PI:0,h>0?1.5*Math.PI:Math.PI/2,p)}else t.rect(r,a,c,l)}oot.props={};var yot=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).name="canvas-path-generator",t}return _(e,t),O(e,[{key:"init",value:function(){var t,e=(b(b(b(b(b(b(b(b(b(b(t={},RD.CIRCLE,lot),RD.ELLIPSE,fot),RD.RECT,got),RD.LINE,dot),RD.POLYLINE,vot),RD.POLYGON,pot),RD.PATH,hot),RD.TEXT,void 0),RD.GROUP,void 0),RD.IMAGE,void 0),b(b(b(t,RD.HTML,void 0),RD.MESH,void 0),RD.FRAGMENT,void 0));this.context.pathGeneratorFactory=e}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(DD),mot=D(),bot=D(),xot=D(),wot=ut(),kot=function(){function t(){var e=this;k(this,t),this.isHit=function(t,n,r,i){var a=e.context.pointInPathPickerFactory[t.nodeName];if(a){var o=vt(wot,r),s=Q(bot,G(xot,n[0],n[1],0),o);if(a(t,new XD(s[0],s[1]),i,e.isPointInPath,e.context,e.runtime))return!0}return!1},this.isPointInPath=function(t,n){var r=e.runtime.offscreenCanvasCreator.getOrCreateContext(e.context.config.offscreenCanvas),i=e.context.pathGeneratorFactory[t.nodeName];return i&&(r.beginPath(),i(r,t.parsedStyle),r.closePath()),r.isPointInPath(n.x,n.y)}}return O(t,[{key:"apply",value:function(e,n){var r,i=this,a=e.renderingService,o=e.renderingContext;this.context=e,this.runtime=n;var s=null===(r=o.root)||void 0===r?void 0:r.ownerDocument;a.hooks.pick.tapPromise(t.tag,function(){var t=er(Jn().mark((function t(e){return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.pick(s,e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a.hooks.pickSync.tap(t.tag,(function(t){return i.pick(s,t)}))}},{key:"pick",value:function(t,e){var n,r=e.topmost,i=e.position,a=i.x,o=i.y,s=G(mot,a,o,0),u=[],c=nr(t.elementsFromBBox(s[0],s[1],s[0],s[1]));try{for(c.s();!(n=c.n()).done;){var l=n.value,f=l.getWorldTransform();if(this.isHit(l,s,f,!1)){var d=gB(l);if(d){var h=d.parsedStyle.clipPath;if(this.isHit(h,s,h.getWorldTransform(),!0)){if(r)return e.picked=[l],e;u.push(l)}}else{if(r)return e.picked=[l],e;u.push(l)}}}}catch(t){c.e(t)}finally{c.f()}return e.picked=u,e}}])}();function Eot(t,e,n){var r=t.parsedStyle,i=r.cx,a=void 0===i?0:i,o=r.cy,s=void 0===o?0:o,u=r.r,c=r.fill,l=r.stroke,f=r.lineWidth,d=void 0===f?1:f,h=r.increasedLineWidthForHitTesting,p=void 0===h?0:h,v=r.pointerEvents,y=void 0===v?"auto":v,m=(d+p)/2,b=gD(a,s,e.x,e.y),x=g(wB(y,c,l),2),w=x[0],k=x[1];return w&&k||n?b<=u+m:w?b<=u:!!k&&b>=u-m&&b<=u+m}function Oot(t,e,n,r){return t/(n*n)+e/(r*r)}function Sot(t,e,n){var r=t.parsedStyle,i=r.cx,a=void 0===i?0:i,o=r.cy,s=void 0===o?0:o,u=r.rx,c=r.ry,l=r.fill,f=r.stroke,d=r.lineWidth,h=void 0===d?1:d,p=r.increasedLineWidthForHitTesting,v=void 0===p?0:p,y=r.pointerEvents,m=void 0===y?"auto":y,b=e.x,x=e.y,w=g(wB(m,l,f),2),k=w[0],E=w[1],O=(h+v)/2,S=(b-a)*(b-a),M=(x-s)*(x-s);return k&&E||n?Oot(S,M,u+O,c+O)<=1:k?Oot(S,M,u,c)<=1:!!E&&Oot(S,M,u-O,c-O)>=1&&Oot(S,M,u+O,c+O)<=1}function Mot(t,e,n,r,i,a){return i>=t&&i<=t+n&&a>=e&&a<=e+r}function Tot(t,e,n,r,i,a,o,s){var u=(Math.atan2(s-e,o-t)+2*Math.PI)%(2*Math.PI),c={x:t+n*Math.cos(u),y:e+n*Math.sin(u)};return gD(c.x,c.y,o,s)<=a/2}function Aot(t,e,n,r,i,a,o){var s=Math.min(t,n),u=Math.max(t,n),c=Math.min(e,r),l=Math.max(e,r),f=i/2;return a>=s-f&&a<=u+f&&o>=c-f&&o<=l+f&&function(t,e,n,r,i,a){var o=[n-t,r-e];if(Ee(o,[0,0]))return Math.sqrt((i-t)*(i-t)+(a-e)*(a-e));var s=[-o[1],o[0]];we(s,s);var u=[i-t,a-e];return Math.abs(ke(u,s))}(t,e,n,r,a,o)<=i/2}function Pot(t,e,n,r,i){var a=t.length;if(a<2)return!1;for(var o=0;o<a-1;o++)if(Aot(t[o][0],t[o][1],t[o+1][0],t[o+1][1],e,n,r))return!0;if(i){var s=t[0],u=t[a-1];if(Aot(s[0],s[1],u[0],u[1],e,n,r))return!0}return!1}function Not(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function Cot(t,e,n){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function _ot(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],s=t[(a+1)%i];if(Cot(o,s,[e,n]))return!0;Not(o[1]-n)>0!=Not(s[1]-n)>0&&Not(e-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Lot(t,e,n){for(var r=!1,i=0;i<t.length&&!(r=_ot(t[i],e,n));i++);return r}function Rot(t,e,n){var r=t.parsedStyle,i=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.lineWidth,c=void 0===u?1:u,l=r.increasedLineWidthForHitTesting,f=void 0===l?0:l,d=r.pointerEvents;return!(!g(wB(void 0===d?"auto":d,r.fill,r.stroke),2)[1]&&!n||!c)&&Aot(i,a,o,s,c+f,e.x,e.y)}function jot(t,e,n,r,i,a){var o=t.parsedStyle,s=o.lineWidth,u=void 0===s?1:s,c=o.increasedLineWidthForHitTesting,l=void 0===c?0:c,f=o.stroke,d=o.fill,h=o.d,p=o.pointerEvents,v=void 0===p?"auto":p,y=h.segments,m=h.hasArc,b=h.polylines,x=h.polygons,w=g(wB(v,(null==x?void 0:x.length)&&d,f),2),k=w[0],E=w[1],O=oz(t),S=!1;return k||n?S=m?r(t,e):Lot(x,e.x,e.y)||Lot(b,e.x,e.y):((E||n)&&(S=function(t,e,n,r,i){for(var a=!1,o=e/2,s=0;s<t.length;s++){var u=t[s],c=u.currentPoint,l=u.params,f=u.prePoint,d=u.box;if(!d||Mot(d.x-o,d.y-o,d.width+e,d.height+e,n,r))switch(u.command){case"L":case"Z":if(a=Aot(f[0],f[1],c[0],c[1],e,n,r))return!0;break;case"Q":if(a=CD(f[0],f[1],l[1],l[2],l[3],l[4],n,r)<=e/2)return!0;break;case"C":if(a=TD(f[0],f[1],l[1],l[2],l[3],l[4],l[5],l[6],n,r,i)<=e/2)return!0;break;case"A":u.cubicParams||(u.cubicParams=mn(f[0],f[1],l[1],l[2],l[3],l[4],l[5],l[6],l[7],void 0));for(var h=u.cubicParams,p=f,v=0;v<h.length;v+=6){var g=TD(p[0],p[1],h[v],h[v+1],h[v+2],h[v+3],h[v+4],h[v+5],n,r,i);if(p=[h[v+4],h[v+5]],a=g<=e/2)return!0}}}return a}(y,u+l,e.x,e.y,O)),S)}function Dot(t,e,n){var r=t.parsedStyle,i=r.stroke,a=r.fill,o=r.lineWidth,s=void 0===o?1:o,u=r.increasedLineWidthForHitTesting,c=void 0===u?0:u,l=r.points,f=r.pointerEvents,d=g(wB(void 0===f?"auto":f,a,i),2),h=d[0],p=!1;return(d[1]||n)&&(p=Pot(l.points,s+c,e.x,e.y,!0)),p||!h&&!n||(p=_ot(l.points,e.x,e.y)),p}function Iot(t,e,n){var r=t.parsedStyle,i=r.lineWidth,a=void 0===i?1:i,o=r.increasedLineWidthForHitTesting,s=void 0===o?0:o,u=r.points,c=r.pointerEvents;return!(!g(wB(void 0===c?"auto":c,r.fill,r.stroke),2)[1]&&!n||!a)&&Pot(u.points,a+s,e.x,e.y,!1)}function Fot(t,e,n,r,i){var a=t.parsedStyle,o=a.radius,s=a.fill,u=a.stroke,c=a.lineWidth,l=void 0===c?1:c,f=a.increasedLineWidthForHitTesting,d=void 0===f?0:f,h=a.x,p=void 0===h?0:h,v=a.y,y=void 0===v?0:v,m=a.width,b=a.height,x=a.pointerEvents,w=g(wB(void 0===x?"auto":x,s,u),2),k=w[0],E=w[1],O=o&&o.some((function(t){return 0!==t})),S=l+d;if(O){var M=!1;return(E||n)&&(M=function(t,e,n,r,i,a,o,s){var u=g(i,4),c=u[0],l=u[1],f=u[2],d=u[3];return Aot(t+c,e,t+n-l,e,a,o,s)||Aot(t+n,e+l,t+n,e+r-f,a,o,s)||Aot(t+n-f,e+r,t+d,e+r,a,o,s)||Aot(t,e+r-d,t,e+c,a,o,s)||Tot(t+n-l,e+l,l,Math.PI,Math.PI,a,o,s)||Tot(t+n-f,e+r-f,f,0,Math.PI,a,o,s)||Tot(t+d,e+r-d,d,Math.PI,Math.PI,a,o,s)||Tot(t+c,e+c,c,Math.PI,Math.PI,a,o,s)}(p,y,m,b,o.map((function(t){return Ae(t,0,Math.min(Math.abs(m)/2,Math.abs(b)/2))})),S,e.x,e.y)),M||!k&&!n||(M=r(t,e)),M}var T=S/2;return k&&E||n?Mot(p-T,y-T,m+T,b+T,e.x,e.y):k?Mot(p,y,m,b,e.x,e.y):!!E&&function(t,e,n,r,i,a,o){var s=i/2;return Mot(t-s,e-s,n,i,a,o)||Mot(t+n-s,e-s,i,r,a,o)||Mot(t+s,e+r-s,n,i,a,o)||Mot(t-s,e+s,i,r,a,o)}(p,y,m,b,S,e.x,e.y)}function zot(t,e,n,r,i,a){var o=t.parsedStyle,s=o.pointerEvents,u=void 0===s?"auto":s,c=o.x,l=void 0===c?0:c,f=o.y,d=void 0===f?0:f,h=o.width,p=o.height;if("non-transparent-pixel"===u){var v=i.config.offscreenCanvas,g=a.offscreenCanvasCreator.getOrCreateCanvas(v),y=a.offscreenCanvasCreator.getOrCreateContext(v,{willReadFrequently:!0});return g.width=h,g.height=p,i.defaultStyleRendererFactory[RD.IMAGE].render(y,w(w({},t.parsedStyle),{},{x:0,y:0}),t,void 0,void 0,void 0),y.getImageData(e.x-l,e.y-d,1,1).data.every((function(t){return 0!==t}))}return!0}function Bot(t,e,n,r){var i=t.getGeometryBounds();return e.x>=i.min[0]&&e.y>=i.min[1]&&e.x<=i.max[0]&&e.y<=i.max[1]}kot.tag="CanvasPicker";var Got=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).name="canvas-picker",t}return _(e,t),O(e,[{key:"init",value:function(){var t,e=(b(b(b(b(b(b(b(b(b(b(t={},RD.CIRCLE,Eot),RD.ELLIPSE,Sot),RD.RECT,Fot),RD.LINE,Rot),RD.POLYLINE,Iot),RD.POLYGON,Dot),RD.PATH,jot),RD.TEXT,Bot),RD.GROUP,null),RD.IMAGE,zot),b(b(t,RD.HTML,null),RD.MESH,null));this.context.pointInPathPickerFactory=e,this.addRenderingPlugin(new kot)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(DD),Wot=function(){return O((function t(){k(this,t),this.cacheStore=new Map}),[{key:"onRefAdded",value:function(t){}},{key:"has",value:function(t){return this.cacheStore.has(t)}},{key:"put",value:function(t,e,n){return!this.cacheStore.has(t)&&(this.cacheStore.set(t,{value:e,counter:new Set([n])}),this.onRefAdded(n),!0)}},{key:"get",value:function(t,e){var n=this.cacheStore.get(t);return n?(n.counter.has(e)||(n.counter.add(e),this.onRefAdded(e)),n.value):null}},{key:"update",value:function(t,e,n){var r=this.cacheStore.get(t);return!!r&&(r.value=w(w({},r.value),e),r.counter.has(n)||(r.counter.add(n),this.onRefAdded(n)),!0)}},{key:"release",value:function(t,e){var n=this.cacheStore.get(t);return!!n&&(n.counter.delete(e),n.counter.size<=0&&this.cacheStore.delete(t),!0)}},{key:"releaseRef",value:function(t){var e=this;Array.from(this.cacheStore.keys()).forEach((function(n){e.release(n,t)}))}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),Vot=[],Hot=[],Yot=function(){function t(){k(this,t)}return O(t,null,[{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.api;t.rafId&&(e.cancelAnimationFrame(t.rafId),t.rafId=null)}},{key:"executeTask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.api;Vot.length<=0&&Hot.length<=0||(Hot.forEach((function(t){return t()})),Hot=Vot.splice(0,t.TASK_NUM_PER_FRAME),t.rafId=e.requestAnimationFrame((function(){t.executeTask(e)})))}},{key:"sliceImage",value:function(e,n,r,i){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.api,s=e.naturalWidth||e.width,u=e.naturalHeight||e.height,c=n-a,l=r-a,f=Math.ceil(s/c),d=Math.ceil(u/l),h={tileSize:[n,r],gridSize:[d,f],tiles:Array(d).fill(null).map((function(){return Array(f).fill(null)}))},p=function(t){for(var a=function(a){Vot.push((function(){var f=a*c,d=t*l,p=[Math.min(n,s-f),Math.min(r,u-d)],v=p[0],g=p[1],y=o.createCanvas();y.width=n,y.height=r,y.getContext("2d").drawImage(e,f,d,v,g,0,0,v,g),h.tiles[t][a]={x:f,y:d,tileX:a,tileY:t,data:y},i()}))},d=0;d<f;d++)a(d)},v=0;v<d;v++)p(v);return t.stop(),t.executeTask(),h}}])}();Yot.TASK_NUM_PER_FRAME=10;var Uot=new Wot;Uot.onRefAdded=function(t){var e=this;t.addEventListener(bG.DESTROY,(function(){e.releaseRef(t)}),{once:!0})};var qot=function(){return O((function t(e,n){k(this,t),this.gradientCache={},this.patternCache={},this.context=e,this.runtime=n}),[{key:"getImageSync",value:function(t,e,n){var r=Te(t)?t:t.src;if(Uot.has(r)){var i=Uot.get(r,e);if(i.img.complete)return null==n||n(i),i}return this.getOrCreateImage(t,e).then((function(t){null==n||n(t)})).catch((function(t){console.error(t)})),null}},{key:"getOrCreateImage",value:function(t,e){var n=this,r=Te(t)?t:t.src;if(!Te(t)&&!Uot.has(r)){var i={img:t,size:[t.naturalWidth||t.width,t.naturalHeight||t.height],tileSize:Xot(t)};Uot.put(r,i,e)}if(Uot.has(r)){var a=Uot.get(r,e);return a.img.complete?Promise.resolve(a):new Promise((function(t,e){a.img.addEventListener("load",(function(){a.size=[a.img.naturalWidth||a.img.width,a.img.naturalHeight||a.img.height],a.tileSize=Xot(a.img),t(a)})),a.img.addEventListener("error",(function(t){e(t)}))}))}return new Promise((function(t,i){var a=n.context.config.createImage();if(a){var o={img:a,size:[0,0],tileSize:Xot(a)};Uot.put(r,o,e),a.onload=function(){o.size=[a.naturalWidth||a.width,a.naturalHeight||a.height],o.tileSize=Xot(o.img),t(o)},a.onerror=function(t){i(t)},a.crossOrigin="Anonymous",a.src=r}}))}},{key:"createDownSampledImage",value:(e=er(Jn().mark((function t(e,n){var r,i,a,o,s,u,c,l,f,d,h,p,v,y;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOrCreateImage(e,n);case 2:if(void 0===(r=t.sent).downSamplingRate){t.next=5;break}return t.abrupt("return",r);case 5:if(i=this.context.config.enableLargeImageOptimization,o=(a="boolean"==typeof i?{}:i).maxDownSampledImageSize,s=void 0===o?2048:o,u=a.downSamplingRateThreshold,c=void 0===u?.5:u,l=this.runtime.globalThis.createImageBitmap,f=g(r.size,2),d=f[0],h=f[1],p=r.img,v=Math.min((s+s)/(d+h),Math.max(.01,Math.min(c,.5))),y=w(w({},r),{},{downSamplingRate:v}),Uot.update(r.img.src,y,n),!l){t.next=25;break}return t.prev=14,t.next=17,l(r.img,{resizeWidth:d*v,resizeHeight:h*v});case 17:p=t.sent,t.next=23;break;case 20:t.prev=20,t.t0=t.catch(14),v=1;case 23:t.next=26;break;case 25:v=1;case 26:return y=w(w({},this.getImageSync(e,n)),{},{downSampled:p,downSamplingRate:v}),Uot.update(r.img.src,y,n),t.abrupt("return",y);case 29:case"end":return t.stop()}}),t,this,[[14,20]])}))),function(t,n){return e.apply(this,arguments)})},{key:"createImageTiles",value:(t=er(Jn().mark((function t(e,n,r,i){var a,o,s,u,c;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOrCreateImage(e,i);case 2:return a=t.sent,o=i.ownerDocument.defaultView,s=o.requestAnimationFrame,u=o.cancelAnimationFrame,Yot.api={requestAnimationFrame:s,cancelAnimationFrame:u,createCanvas:function(){return pG.createCanvas()}},c=w(w({},a),Yot.sliceImage(a.img,a.tileSize[0],a.tileSize[0],r)),Uot.update(a.img.src,c,i),t.abrupt("return",c);case 8:case"end":return t.stop()}}),t,this)}))),function(e,n,r,i){return t.apply(this,arguments)})},{key:"releaseImage",value:function(t,e){Uot.release(Te(t)?t:t.src,e)}},{key:"releaseImageRef",value:function(t){Uot.releaseRef(t)}},{key:"getOrCreatePatternSync",value:function(t,e,n,r,i,a,o){var s=this.generatePatternKey(e);if(s&&this.patternCache[s])return this.patternCache[s];var u,c=e.image,l=e.repetition,f=e.transform,d=!1;if(Te(c)){var h=this.getImageSync(c,t,o);u=null==h?void 0:h.img}else r?(u=r,d=!0):u=c;var p,v=u&&n.createPattern(u,l);return v&&(p=f?UB(Nz(f),new oW({})):ht(ut()),d&&xt(p,p,[1/i,1/i,1]),v.setTransform({a:p[0],b:p[1],c:p[4],d:p[5],e:p[12]+a[0],f:p[13]+a[1]})),s&&v&&(this.patternCache[s]=v),v}},{key:"getOrCreateGradient",value:function(t,e){var n=this.generateGradientKey(t),r=t.type,i=t.steps,a=t.min,o=t.width,s=t.height,u=t.angle,c=t.cx,l=t.cy,f=t.size;if(this.gradientCache[n])return this.gradientCache[n];var d=null;if(r===pF.LinearGradient){var h=function(t,e,n,r){var i=nI(r.value),a=0+e/2,o=0+n/2,s=Math.abs(e*Math.cos(i))+Math.abs(n*Math.sin(i));return{x1:t[0]+a-Math.cos(i)*s/2,y1:t[1]+o-Math.sin(i)*s/2,x2:t[0]+a+Math.cos(i)*s/2,y2:t[1]+o+Math.sin(i)*s/2}}(a,o,s,u),p=h.x1,v=h.y1,g=h.x2,y=h.y2;d=e.createLinearGradient(p,v,g,y)}else if(r===pF.RadialGradient){var m=function(t,e,n,r,i,a){var o=r.value,s=i.value;r.unit===iF.kPercentage&&(o=r.value/100*e),i.unit===iF.kPercentage&&(s=i.value/100*n);var u=Math.max(Se([0,0],[o,s]),Se([0,n],[o,s]),Se([e,n],[o,s]),Se([e,0],[o,s]));return a&&(a instanceof mF?u=a.value:a instanceof gF&&("closest-side"===a.value?u=Math.min(o,e-o,s,n-s):"farthest-side"===a.value?u=Math.max(o,e-o,s,n-s):"closest-corner"===a.value&&(u=Math.min(Se([0,0],[o,s]),Se([0,n],[o,s]),Se([e,n],[o,s]),Se([e,0],[o,s]))))),{x:o+t[0],y:s+t[1],r:u}}(a,o,s,c,l,f),b=m.x,x=m.y,w=m.r;d=e.createRadialGradient(b,x,0,b,x,w)}return d&&(i.forEach((function(t){var e,n=t.offset,r=t.color;n.unit===iF.kPercentage&&(null===(e=d)||void 0===e||e.addColorStop(n.value/100,r.toString()))})),this.gradientCache[n]=d),this.gradientCache[n]}},{key:"generateGradientKey",value:function(t){var e=t.type,n=t.min,r=t.width,i=t.height,a=t.steps,o=t.angle,s=t.cx,u=t.cy,c=t.size;return"gradient-".concat(e,"-").concat((null==o?void 0:o.toString())||0,"-").concat((null==s?void 0:s.toString())||0,"-").concat((null==u?void 0:u.toString())||0,"-").concat((null==c?void 0:c.toString())||0,"-").concat(n[0],"-").concat(n[1],"-").concat(r,"-").concat(i,"-").concat(a.map((function(t){var e=t.offset,n=t.color;return"".concat(e).concat(n)})).join("-"))}},{key:"generatePatternKey",value:function(t){var e=t.image,n=t.repetition;return Te(e)?"pattern-".concat(e,"-").concat(n):"rect"===e.nodeName?"pattern-".concat(e.entity,"-").concat(n):void 0}}]);var t,e}();function Xot(t){if(!t.complete)return[0,0];var e=t.naturalWidth||t.width,n=t.naturalHeight||t.height,r=256;return[256,512].forEach((function(t){Math.ceil(n/t)*Math.ceil(e/t)<1e3&&(r=t)})),[r,r]}qot.isSupportTile=!!pG.createCanvas();var Kot=function(){function t(){k(this,t)}return O(t,[{key:"apply",value:function(e){var n=e.renderingService,r=e.renderingContext,i=e.imagePool,a=r.root.ownerDocument.defaultView,o=function(t,e,n){var r=t.parsedStyle,i=r.width,a=r.height;i&&!a?t.setAttribute("height",n/e*i):!i&&a&&t.setAttribute("width",e/n*a)},s=function(t){var e=t.target,r=e.nodeName,a=e.attributes;if(r===RD.IMAGE){var s=a.src,u=a.keepAspectRatio;i.getImageSync(s,e,(function(t){var r=t.img,i=r.width,a=r.height;u&&o(e,i,a),e.renderable.dirty=!0,n.dirtify()}))}},u=function(t){var e=t.target,r=t.attrName,a=t.prevValue,s=t.newValue;e.nodeName===RD.IMAGE&&"src"===r&&(a!==s&&i.releaseImage(a,e),Te(s)&&i.getOrCreateImage(s,e).then((function(t){var r=t.img,i=r.width,a=r.height;e.attributes.keepAspectRatio&&o(e,i,a),e.renderable.dirty=!0,n.dirtify()})).catch((function(){})))};n.hooks.init.tap(t.tag,(function(){a.addEventListener(bG.MOUNTED,s),a.addEventListener(bG.ATTR_MODIFIED,u)})),n.hooks.destroy.tap(t.tag,(function(){a.removeEventListener(bG.MOUNTED,s),a.removeEventListener(bG.ATTR_MODIFIED,u)}))}}])}();Kot.tag="LoadImage";var $ot=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).name="image-loader",t}return _(e,t),O(e,[{key:"init",value:function(t){this.context.imagePool=new qot(this.context,t),this.addRenderingPlugin(new Kot)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(DD),Zot=Lp("renderState"),Qot=function(){function t(e){k(this,t),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,Zot,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=ut(),this.dprMatrix=ut(),this.tmpMat4=ut(),this.vec3a=D(),this.vec3b=D(),this.vec3c=D(),this.vec3d=D(),this.canvasRendererPluginOptions=e}return O(t,[{key:"apply",value:function(e,n){var r=this;this.context=e;var i=this.context,a=i.config,o=i.camera,s=i.renderingService,u=i.renderingContext,c=i.rBushRoot,l=i.pathGeneratorFactory,f=a.renderer.getConfig().enableRenderingOptimization;a.renderer.getConfig().enableDirtyCheck=!1,a.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=c,this.pathGeneratorFactory=l;var d=e.contextService,h=u.root.ownerDocument.defaultView,p=function(t){var e=t.target.rBushNode;e.aabb&&r.removedRBushNodeAABBs.push(e.aabb)},v=function(t){var e=t.target.rBushNode;e.aabb&&r.removedRBushNodeAABBs.push(e.aabb)};s.hooks.init.tap(t.tag,(function(){h.addEventListener(bG.UNMOUNTED,p),h.addEventListener(bG.CULLED,v);var t=d.getDPR(),e=a.width,n=a.height,i=d.getContext();r.clearRect(i,0,0,e*t,n*t,a.background)})),s.hooks.destroy.tap(t.tag,(function(){h.removeEventListener(bG.UNMOUNTED,p),h.removeEventListener(bG.CULLED,v),r.renderQueue=[],r.removedRBushNodeAABBs=[],Cp(r,Zot)[Zot]={restoreStack:[],prevObject:null,currentContext:null}})),s.hooks.beginFrame.tap(t.tag,(function(){var t,e=d.getContext(),n=d.getDPR(),i=a.width,o=a.height,u=r.canvasRendererPluginOptions,c=u.dirtyObjectNumThreshold,l=u.dirtyObjectRatioThreshold,f=s.getStats(),p=f.total,v=f.rendered,g=v/p;r.clearFullScreen=r.clearFullScreenLastFrame||!(null!==(t=h.context.renderingPlugins[1])&&void 0!==t&&t.isFirstTimeRenderingFinished)||s.disableDirtyRectangleRendering()||v>c&&g>l,e&&("function"==typeof e.resetTransform?e.resetTransform():e.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(e,0,0,i*n,o*n,a.background))}));var g=function(t,e){for(var i=[t];i.length>0;){var a,o=i.pop();o.isVisible()&&!o.isCulled()&&(f?r.renderDisplayObjectOptimized(o,e,r.context,Cp(r,Zot)[Zot],n):r.renderDisplayObject(o,e,r.context,Cp(r,Zot)[Zot],n));for(var s=(null===(a=o.sortable)||void 0===a||null===(a=a.sorted)||void 0===a?void 0:a.length)>0?o.sortable.sorted:o.childNodes,u=s.length-1;u>=0;u--)i.push(s[u])}};s.hooks.endFrame.tap(t.tag,(function(){if(0!==u.root.childNodes.length){f=a.renderer.getConfig().enableRenderingOptimization,Cp(r,Zot)[Zot]={restoreStack:[],prevObject:null,currentContext:Cp(r,Zot)[Zot].currentContext},Cp(r,Zot)[Zot].currentContext.clear(),r.clearFullScreenLastFrame=!1;var t=d.getContext(),e=d.getDPR();if(Mt(r.dprMatrix,[e,e,1]),mt(r.vpMatrix,r.dprMatrix,o.getOrthoMatrix()),r.clearFullScreen)f?(t.save(),g(u.root,t),t.restore()):g(u.root,t),r.removedRBushNodeAABBs=[];else{var i=r.safeMergeAABB.apply(r,[r.mergeDirtyAABBs(r.renderQueue)].concat(M(r.removedRBushNodeAABBs.map((function(t){var e=t.minX,n=t.minY,r=t.maxX,i=t.maxY,a=new HD;return a.setMinMax([e,n,0],[r,i,0]),a})))));if(r.removedRBushNodeAABBs=[],HD.isEmpty(i))return void(r.renderQueue=[]);var s=r.convertAABB2Rect(i),c=s.x,l=s.y,p=s.width,v=s.height,y=Q(r.vec3a,[c,l,0],r.vpMatrix),m=Q(r.vec3b,[c+p,l,0],r.vpMatrix),b=Q(r.vec3c,[c,l+v,0],r.vpMatrix),x=Q(r.vec3d,[c+p,l+v,0],r.vpMatrix),w=Math.min(y[0],m[0],x[0],b[0]),k=Math.min(y[1],m[1],x[1],b[1]),E=Math.max(y[0],m[0],x[0],b[0]),O=Math.max(y[1],m[1],x[1],b[1]),S=Math.floor(w),T=Math.floor(k),A=Math.ceil(E-w),P=Math.ceil(O-k);t.save(),r.clearRect(t,S,T,A,P,a.background),t.beginPath(),t.rect(S,T,A,P),t.clip(),t.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]),a.renderer.getConfig().enableDirtyRectangleRenderingDebug&&h.dispatchEvent(new cG(RW.DIRTY_RECTANGLE,{dirtyRect:{x:S,y:T,width:A,height:P}})),r.searchDirtyObjects(i).sort((function(t,e){return t.sortable.renderOrder-e.sortable.renderOrder})).forEach((function(e){e&&e.isVisible()&&!e.isCulled()&&r.renderDisplayObject(e,t,r.context,Cp(r,Zot)[Zot],n)})),t.restore(),r.renderQueue.forEach((function(t){r.saveDirtyAABB(t)})),r.renderQueue=[]}Cp(r,Zot)[Zot].restoreStack.forEach((function(){t.restore()})),Cp(r,Zot)[Zot].restoreStack=[]}else r.clearFullScreenLastFrame=!0})),s.hooks.render.tap(t.tag,(function(t){r.clearFullScreen||r.renderQueue.push(t)}))}},{key:"clearRect",value:function(t,e,n,r,i,a){t.clearRect(e,n,r,i),a&&(t.fillStyle=a,t.fillRect(e,n,r,i))}},{key:"renderDisplayObjectOptimized",value:function(t,e,n,r,i){var a=t.nodeName,o=!1,s=this.context.styleRendererFactory[a],u=this.pathGeneratorFactory[a],c=t.parsedStyle.clipPath;if(c){(!r.prevObject||!ee(c.getWorldTransform(),r.prevObject.getWorldTransform()))&&(this.applyWorldTransform(e,c),r.prevObject=null);var l=this.pathGeneratorFactory[c.nodeName];l&&(e.save(),o=!0,e.beginPath(),l(e,c.parsedStyle),e.closePath(),e.clip())}if(s){(!r.prevObject||!ee(t.getWorldTransform(),r.prevObject.getWorldTransform()))&&this.applyWorldTransform(e,t);var f=!r.prevObject;if(!f){var d=r.prevObject.nodeName;f=a===RD.TEXT?d!==RD.TEXT:a===RD.IMAGE?d!==RD.IMAGE:d===RD.TEXT||d===RD.IMAGE}s.applyStyleToContext(e,t,f,r),r.prevObject=t}u&&(e.beginPath(),u(e,t.parsedStyle),a!==RD.LINE&&a!==RD.PATH&&a!==RD.POLYLINE&&e.closePath()),s&&s.drawToContext(e,t,Cp(this,Zot)[Zot],this,i),o&&e.restore(),t.renderable.dirty=!1}},{key:"renderDisplayObject",value:function(t,e,n,r,i){var a=t.nodeName,o=r.restoreStack[r.restoreStack.length-1];!o||t.compareDocumentPosition(o)&dG.DOCUMENT_POSITION_CONTAINS||(e.restore(),r.restoreStack.pop());var s=this.context.styleRendererFactory[a],u=this.pathGeneratorFactory[a],c=t.parsedStyle.clipPath;if(c){this.applyWorldTransform(e,c);var l=this.pathGeneratorFactory[c.nodeName];l&&(e.save(),r.restoreStack.push(t),e.beginPath(),l(e,c.parsedStyle),e.closePath(),e.clip())}s&&(this.applyWorldTransform(e,t),e.save(),this.applyAttributesToContext(e,t)),u&&(e.beginPath(),u(e,t.parsedStyle),a!==RD.LINE&&a!==RD.PATH&&a!==RD.POLYLINE&&e.closePath()),s&&(s.render(e,t.parsedStyle,t,n,this,i),e.restore()),t.renderable.dirty=!1}},{key:"applyAttributesToContext",value:function(t,e){var n=e.parsedStyle,r=n.stroke,i=n.fill,a=n.opacity,o=n.lineDash,s=n.lineDashOffset;o&&t.setLineDash(o),Me(s)||(t.lineDashOffset=s),Me(a)||(t.globalAlpha*=a),Me(r)||Array.isArray(r)||r.isNone||(t.strokeStyle=e.attributes.stroke),Me(i)||Array.isArray(i)||i.isNone||(t.fillStyle=e.attributes.fill)}},{key:"convertAABB2Rect",value:function(t){var e=t.getMin(),n=t.getMax(),r=Math.floor(e[0]),i=Math.floor(e[1]);return{x:r,y:i,width:Math.ceil(n[0])-r,height:Math.ceil(n[1])-i}}},{key:"mergeDirtyAABBs",value:function(t){var e=new HD;return t.forEach((function(t){var n=t.getRenderBounds();e.add(n);var r=t.renderable.dirtyRenderBounds;r&&e.add(r)})),e}},{key:"searchDirtyObjects",value:function(t){var e=g(t.getMin(),2),n=e[0],r=e[1],i=g(t.getMax(),2),a=i[0],o=i[1];return this.rBush.search({minX:n,minY:r,maxX:a,maxY:o}).map((function(t){return t.displayObject}))}},{key:"saveDirtyAABB",value:function(t){var e=t.renderable;e.dirtyRenderBounds||(e.dirtyRenderBounds=new HD);var n=t.getRenderBounds();n&&e.dirtyRenderBounds.update(n.center,n.halfExtents)}},{key:"applyWorldTransform",value:function(t,e,n){n?(lt(this.tmpMat4,e.getLocalTransform()),mt(this.tmpMat4,n,this.tmpMat4),mt(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(lt(this.tmpMat4,e.getWorldTransform()),mt(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var t=new HD,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){t.add(e)})),t}}])}();function Jot(t,e,n,r,i,a,o){var s,u;if("rect"===t.image.nodeName){var c=t.image.parsedStyle,l=c.width,f=c.height;u=r.contextService.getDPR();var d=r.config.offscreenCanvas;(s=a.offscreenCanvasCreator.getOrCreateCanvas(d)).width=l*u,s.height=f*u;var h=a.offscreenCanvasCreator.getOrCreateContext(d),p={restoreStack:[],prevObject:null,currentContext:new Map};t.image.forEach((function(t){i.renderDisplayObject(t,h,r,p,a)})),p.restoreStack.forEach((function(){h.restore()}))}return o.getOrCreatePatternSync(e,t,n,s,u,e.getGeometryBounds().min,(function(){e.renderable.dirty=!0,r.renderingService.dirtify()}))}function tst(t,e,n,r){var i;if(t.type===pF.LinearGradient||t.type===pF.RadialGradient){var a=e.getGeometryBounds(),o=a&&2*a.halfExtents[0]||1,s=a&&2*a.halfExtents[1]||1,u=a&&a.min||[0,0];i=r.getOrCreateGradient(w(w({type:t.type},t.value),{},{min:u,width:o,height:s}),n)}return i}Qot.tag="CanvasRenderer";var est=["shadowBlur","shadowOffsetX","shadowOffsetY"],nst=["lineCap","lineJoin","miterLimit"],rst={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},ist={};function ast(t,e,n,r){var i=r.has(e)?r.get(e):rst[e];return i!==n&&("lineDash"===e?t.setLineDash(n):t[e]=n,r.set(e,n)),i}var ost=function(){return O((function t(e){k(this,t),this.imagePool=e}),[{key:"applyAttributesToContext",value:function(t,e){}},{key:"render",value:function(t,e,n,r,i,a){}},{key:"applyCommonStyleToContext",value:function(t,e,n,r){var i=n?ist:r.prevObject.parsedStyle,a=e.parsedStyle;(n||a.opacity!==i.opacity)&&ast(t,"globalAlpha",Me(a.opacity)?rst.globalAlpha:a.opacity,r.currentContext),(n||a.blend!==i.blend)&&ast(t,"globalCompositeOperation",Me(a.blend)?rst.globalCompositeOperation:a.blend,r.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(t,e,n,r){var i=n?ist:r.prevObject.parsedStyle,a=e.parsedStyle,o=a.lineWidth,s=void 0===o?rst.lineWidth:o,u=a.fill&&!a.fill.isNone;if(a.stroke&&!a.stroke.isNone&&s>0){(n||e.attributes.stroke!==r.prevObject.attributes.stroke)&&ast(t,"strokeStyle",Me(a.stroke)||Array.isArray(a.stroke)||a.stroke.isNone?rst.strokeStyle:e.attributes.stroke,r.currentContext),(n||a.lineWidth!==i.lineWidth)&&ast(t,"lineWidth",Me(a.lineWidth)?rst.lineWidth:a.lineWidth,r.currentContext),(n||a.lineDash!==i.lineDash)&&ast(t,"lineDash",a.lineDash||rst.lineDash,r.currentContext),(n||a.lineDashOffset!==i.lineDashOffset)&&ast(t,"lineDashOffset",Me(a.lineDashOffset)?rst.lineDashOffset:a.lineDashOffset,r.currentContext);for(var c=0;c<nst.length;c++){var l=nst[c];(n||a[l]!==i[l])&&ast(t,l,Me(a[l])?rst[l]:a[l],r.currentContext)}}u&&(n||e.attributes.fill!==r.prevObject.attributes.fill)&&ast(t,"fillStyle",Me(a.fill)||Array.isArray(a.fill)||a.fill.isNone?rst.fillStyle:e.attributes.fill,r.currentContext)}},{key:"applyStyleToContext",value:function(t,e,n,r){var i=e.nodeName;this.applyCommonStyleToContext(t,e,n,r),i===RD.IMAGE||this.applyStrokeFillStyleToContext(t,e,n,r)}},{key:"applyShadowAndFilterStyleToContext",value:function(t,e,n,r){var i=e.parsedStyle;if(n){ast(t,"shadowColor",i.shadowColor.toString(),r.currentContext);for(var a=0;a<est.length;a++){var o=est[a];ast(t,o,i[o]||rst[o],r.currentContext)}}i.filter&&i.filter.length&&ast(t,"filter",e.attributes.filter,r.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e){ast(t,"shadowColor",rst.shadowColor,r.currentContext);for(var a=0;a<est.length;a++){var o=est[a];ast(t,o,rst[o],r.currentContext)}}if(n)if(e&&i){var s=t.filter;!Me(s)&&s.indexOf("drop-shadow")>-1&&ast(t,"filter",s.replace(/drop-shadow\([^)]*\)/,"").trim()||rst.filter,r.currentContext)}else ast(t,"filter",rst.filter,r.currentContext)}},{key:"fillToContext",value:function(t,e,n,r,i){var a=this,o=e.parsedStyle,s=o.fill,u=o.fillRule,c=null;if(Array.isArray(s)&&s.length>0)s.forEach((function(r){var i=ast(t,"fillStyle",tst(r,e,t,a.imagePool),n.currentContext);c=null!=c?c:i,u?t.fill(u):t.fill()}));else{if(FF(s)){var l=Jot(s,e,t,e.ownerDocument.defaultView.context,r,i,this.imagePool);l&&(t.fillStyle=l,c=!0)}u?t.fill(u):t.fill()}null!==c&&ast(t,"fillStyle",c,n.currentContext)}},{key:"strokeToContext",value:function(t,e,n,r,i){var a=this,o=e.parsedStyle.stroke,s=null;if(Array.isArray(o)&&o.length>0)o.forEach((function(r){var i=ast(t,"strokeStyle",tst(r,e,t,a.imagePool),n.currentContext);s=null!=s?s:i,t.stroke()}));else{if(FF(o)){var u=Jot(o,e,t,e.ownerDocument.defaultView.context,r,i,this.imagePool);if(u){var c=ast(t,"strokeStyle",u,n.currentContext);s=null!=s?s:c}}t.stroke()}null!==s&&ast(t,"strokeStyle",s,n.currentContext)}},{key:"drawToContext",value:function(t,e,n,r,i){var a,o=e.nodeName,s=e.parsedStyle,u=s.opacity,c=void 0===u?rst.globalAlpha:u,l=s.fillOpacity,f=void 0===l?rst.fillOpacity:l,d=s.strokeOpacity,h=void 0===d?rst.strokeOpacity:d,p=s.lineWidth,v=void 0===p?rst.lineWidth:p,g=s.fill&&!s.fill.isNone,y=s.stroke&&!s.stroke.isNone&&v>0;if(g||y){var m=!Me(s.shadowColor)&&s.shadowBlur>0,b="inner"===s.shadowType,x=0===(null===(a=s.fill)||void 0===a?void 0:a.alpha),w=!(!s.filter||!s.filter.length),k=m&&y&&(o===RD.PATH||o===RD.LINE||o===RD.POLYLINE||x||b),E=null;if(g&&(k||this.applyShadowAndFilterStyleToContext(t,e,m,n),E=ast(t,"globalAlpha",c*f,n.currentContext),this.fillToContext(t,e,n,r,i),k||this.clearShadowAndFilterStyleForContext(t,m,w,n)),y){var O=!1,S=ast(t,"globalAlpha",c*h,n.currentContext);if(E=g?E:S,k&&(this.applyShadowAndFilterStyleToContext(t,e,m,n),O=!0,b)){var M=t.globalCompositeOperation;t.globalCompositeOperation="source-atop",this.strokeToContext(t,e,n,r,i),t.globalCompositeOperation=M,this.clearShadowAndFilterStyleForContext(t,m,w,n,!0)}this.strokeToContext(t,e,n,r,i),O&&this.clearShadowAndFilterStyleForContext(t,m,w,n)}null!==E&&ast(t,"globalAlpha",E,n.currentContext)}}}])}(),sst=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"render",value:function(t,e,n,r,i,a){var o=e.fill,s=e.fillRule,u=e.opacity,c=void 0===u?1:u,l=e.fillOpacity,f=void 0===l?1:l,d=e.stroke,h=e.strokeOpacity,p=void 0===h?1:h,v=e.lineWidth,g=void 0===v?1:v,y=e.lineCap,m=e.lineJoin,b=e.shadowType,x=e.shadowColor,w=e.shadowBlur,k=e.filter,E=e.miterLimit,O=o&&!o.isNone,S=d&&!d.isNone&&g>0,M=0===(null==o?void 0:o.alpha),T=!(!k||!k.length),A=!Me(x)&&w>0,P=n.nodeName,N="inner"===b,C=S&&A&&(P===RD.PATH||P===RD.LINE||P===RD.POLYLINE||M||N);O&&(t.globalAlpha=c*f,C||ust(n,t,A),cst(t,n,o,s,r,i,a,this.imagePool),C||this.clearShadowAndFilter(t,T,A)),S&&(t.globalAlpha=c*p,t.lineWidth=g,Me(E)||(t.miterLimit=E),Me(y)||(t.lineCap=y),Me(m)||(t.lineJoin=m),C&&(N&&(t.globalCompositeOperation="source-atop"),ust(n,t,!0),N&&(lst(t,n,d,r,i,a,this.imagePool),t.globalCompositeOperation=rst.globalCompositeOperation,this.clearShadowAndFilter(t,T,!0))),lst(t,n,d,r,i,a,this.imagePool))}},{key:"clearShadowAndFilter",value:function(t,e,n){if(n&&(t.shadowColor="transparent",t.shadowBlur=0),e){var r=t.filter;!Me(r)&&r.indexOf("drop-shadow")>-1&&(t.filter=r.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(ost);function ust(t,e,n){var r=t.parsedStyle,i=r.filter,a=r.shadowColor,o=r.shadowBlur,s=r.shadowOffsetX,u=r.shadowOffsetY;i&&i.length&&(e.filter=t.style.filter),n&&(e.shadowColor=a.toString(),e.shadowBlur=o||0,e.shadowOffsetX=s||0,e.shadowOffsetY=u||0)}function cst(t,e,n,r,i,a,o,s){var u=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Array.isArray(n)?n.forEach((function(n){t.fillStyle=tst(n,e,t,s),u||(r?t.fill(r):t.fill())})):(FF(n)&&(t.fillStyle=Jot(n,e,t,i,a,o,s)),u||(r?t.fill(r):t.fill()))}function lst(t,e,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Array.isArray(n)?n.forEach((function(n){t.strokeStyle=tst(n,e,t,o),s||t.stroke()})):(FF(n)&&(t.strokeStyle=Jot(n,e,t,r,i,a,o)),s||t.stroke())}var fst=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"renderDownSampled",value:function(t,e,n,r){var i=r.src,a=r.imageCache;a.downSampled?t.drawImage(a.downSampled,Math.floor(r.drawRect[0]),Math.floor(r.drawRect[1]),Math.ceil(r.drawRect[2]),Math.ceil(r.drawRect[3])):this.imagePool.createDownSampledImage(i,n).then((function(){n.ownerDocument&&(n.renderable.dirty=!0,n.ownerDocument.defaultView.context.renderingService.dirtify())})).catch((function(t){console.error(t)}))}},{key:"renderTile",value:function(t,e,n,r){var i=r.src,a=r.imageCache,o=r.imageRect,s=r.drawRect,u=a.size,c=t.getTransform(),l=c.a,f=c.b,d=c.c,h=c.d,p=c.e,v=c.f;if(t.resetTransform(),null!=a&&a.gridSize){for(var g=[u[0]/o[2],u[1]/o[3]],y=[a.tileSize[0]/g[0],a.tileSize[1]/g[1]],m=[Math.floor((s[0]-o[0])/y[0]),Math.ceil((s[0]+s[2]-o[0])/y[0])],b=m[0],x=m[1],w=[Math.floor((s[1]-o[1])/y[1]),Math.ceil((s[1]+s[3]-o[1])/y[1])],k=w[1],E=w[0];E<=k;E++)for(var O=b;O<=x;O++){var S=a.tiles[E][O];if(S){var M=[Math.floor(o[0]+S.tileX*y[0]),Math.floor(o[1]+S.tileY*y[1]),Math.ceil(y[0]),Math.ceil(y[1])];t.drawImage(S.data,M[0],M[1],M[2],M[3])}}t.setTransform(l,f,d,h,p,v)}else this.imagePool.createImageTiles(i,[],(function(){n.ownerDocument&&(n.renderable.dirty=!0,n.ownerDocument.defaultView.context.renderingService.dirtify())}),n).catch((function(t){console.error(t)}))}},{key:"render",value:function(t,n,r){var i=n.x,a=void 0===i?0:i,o=n.y,s=void 0===o?0:o,u=n.width,c=n.height,l=n.src,f=n.shadowColor,d=n.shadowBlur,h=this.imagePool.getImageSync(l,r),p=null==h?void 0:h.img,v=u,y=c;if(p){v||(v=p.width),y||(y=p.height),ust(r,t,!Me(f)&&d>0);try{var m=r.ownerDocument.defaultView.getContextService().getDomElement(),b=m.width,x=m.height,w=t.getTransform(),k=w.a,E=w.b,O=function(t,e){var n=Q(D(),[t[0],t[1],0],e),r=Q(D(),[t[0]+t[2],t[1],0],e),i=Q(D(),[t[0],t[1]+t[3],0],e),a=Q(D(),[t[0]+t[2],t[1]+t[3],0],e);return[Math.min(n[0],r[0],i[0],a[0]),Math.min(n[1],r[1],i[1],a[1]),Math.max(n[0],r[0],i[0],a[0])-Math.min(n[0],r[0],i[0],a[0]),Math.max(n[1],r[1],i[1],a[1])-Math.min(n[1],r[1],i[1],a[1])]}([a,s,v,y],ft(k,w.c,0,0,E,w.d,0,0,0,0,1,0,w.e,w.f,0,1)),S=function(t,e){var n=g(t,4),r=n[0],i=n[1],a=n[2],o=n[3],s=g(e,4),u=s[0],c=s[1],l=s[2],f=s[3],d=Math.max(r,u),h=Math.max(i,c),p=Math.min(r+a,u+l),v=Math.min(i+o,c+f);return p<=d||v<=h?null:[d,h,p-d,v-h]}([0,0,b,x],O);if(!S)return;if(!r.ownerDocument.defaultView.getConfig().enableLargeImageOptimization)return void e.renderFull(t,n,r,{image:p,drawRect:[a,s,v,y]});if(O[2]/h.size[0]<(h.downSamplingRate||.5))return void this.renderDownSampled(t,n,r,{src:l,imageCache:h,drawRect:[a,s,v,y]});if(!qot.isSupportTile)return void e.renderFull(t,n,r,{image:p,drawRect:[a,s,v,y]});this.renderTile(t,n,r,{src:l,imageCache:h,imageRect:O,drawRect:S})}catch(t){}}}},{key:"drawToContext",value:function(t,e,n,r,i){this.render(t,e.parsedStyle,e)}}],[{key:"renderFull",value:function(t,e,n,r){t.drawImage(r.image,Math.floor(r.drawRect[0]),Math.floor(r.drawRect[1]),Math.ceil(r.drawRect[2]),Math.ceil(r.drawRect[3]))}}])}(sst),dst=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"render",value:function(t,e,n,r,i,a){n.getBounds();var o=e.lineWidth,s=void 0===o?1:o,u=e.textAlign,c=void 0===u?"start":u,l=e.textBaseline,f=void 0===l?"alphabetic":l,d=e.lineJoin,h=void 0===d?"miter":d,p=e.miterLimit,v=void 0===p?10:p,g=e.letterSpacing,y=void 0===g?0:g,m=e.stroke,b=e.fill,x=e.fillRule,w=e.fillOpacity,k=void 0===w?1:w,E=e.strokeOpacity,O=void 0===E?1:E,S=e.opacity,M=void 0===S?1:S,T=e.metrics,A=e.x,P=void 0===A?0:A,N=e.y,C=void 0===N?0:N,_=e.dx,L=e.dy,R=e.shadowColor,j=e.shadowBlur,D=T.font,I=T.lines,F=T.height,z=T.lineHeight,B=T.lineMetrics;t.font=D,t.lineWidth=s,t.textAlign="middle"===c?"center":c;var G=f;"alphabetic"===G&&(G="bottom"),t.lineJoin=h,Me(v)||(t.miterLimit=v);var W=C;"middle"===f?W+=-F/2-z/2:"bottom"===f||"alphabetic"===f||"ideographic"===f?W+=-F:"top"!==f&&"hanging"!==f||(W+=-z);var V=P+(_||0);W+=L||0,1===I.length&&("bottom"===G?(G="middle",W-=.5*F):"top"===G&&(G="middle",W+=.5*F)),t.textBaseline=G,ust(n,t,!Me(R)&&j>0);for(var H=0;H<I.length;H++){var Y=s/2+V;W+=z,Me(m)||m.isNone||!s||this.drawLetterSpacing(t,n,I[H],B[H],c,Y,W,y,b,x,k,m,O,M,!0,r,i,a),Me(b)||this.drawLetterSpacing(t,n,I[H],B[H],c,Y,W,y,b,x,k,m,O,M,!1,r,i,a)}}},{key:"drawLetterSpacing",value:function(t,e,n,r,i,a,o,s,u,c,l,f,d,h,p,v,g,y){if(0!==s){var m=t.textAlign;t.textAlign="left";var b=a;"center"===i||"middle"===i?b=a-r.width/2:"right"!==i&&"end"!==i||(b=a-r.width);for(var x=Array.from(n),w=t.measureText(n).width,k=0,E=0;E<x.length;++E){var O=x[E];p?this.strokeText(t,e,O,b,o,f,d,v,g,y):this.fillText(t,e,O,b,o,u,c,l,h,v,g,y),b+=w-(k=t.measureText(n.substring(E+1)).width)+s,w=k}t.textAlign=m}else p?this.strokeText(t,e,n,a,o,f,d,v,g,y):this.fillText(t,e,n,a,o,u,c,l,h,v,g,y)}},{key:"fillText",value:function(t,e,n,r,i,a,o,s,u,c,l,f){var d;cst(t,e,a,o,c,l,f,this.imagePool,!0);var h=!Me(s)&&1!==s;h&&(d=t.globalAlpha,t.globalAlpha=s*u),t.fillText(n,r,i),h&&(t.globalAlpha=d)}},{key:"strokeText",value:function(t,e,n,r,i,a,o,s,u,c){var l;lst(t,e,a,s,u,c,this.imagePool,!0);var f=!Me(o)&&1!==o;f&&(l=t.globalAlpha,t.globalAlpha=o),t.strokeText(n,r,i),f&&(t.globalAlpha=l)}},{key:"drawToContext",value:function(t,e,n,r,i){this.render(t,e.parsedStyle,e,e.ownerDocument.defaultView.context,r,i)}}])}(sst),hst=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,e),(t=N(this,e)).name="canvas-renderer",t.options=n,t}return _(e,t),O(e,[{key:"init",value:function(){var t,e=w({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),n=this.context.imagePool,r=new sst(n),i=(b(b(b(b(b(b(b(b(b(b(t={},RD.CIRCLE,r),RD.ELLIPSE,r),RD.RECT,r),RD.IMAGE,new fst(n)),RD.TEXT,new dst(n)),RD.LINE,r),RD.POLYLINE,r),RD.POLYGON,r),RD.PATH,r),RD.GROUP,void 0),b(b(b(t,RD.HTML,void 0),RD.MESH,void 0),RD.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=i,this.context.styleRendererFactory=i,this.addRenderingPlugin(new Qot(e))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(DD),pst=function(){function t(){k(this,t)}return O(t,[{key:"apply",value:function(e,n){var r=this,i=e.renderingService,a=e.renderingContext,o=e.config;this.context=e;var s=a.root.ownerDocument.defaultView,u=function(t){i.hooks.pointerMove.call(t)},c=function(t){i.hooks.pointerUp.call(t)},l=function(t){i.hooks.pointerDown.call(t)},f=function(t){i.hooks.pointerOver.call(t)},d=function(t){i.hooks.pointerOut.call(t)},h=function(t){i.hooks.pointerCancel.call(t)},p=function(t){i.hooks.pointerWheel.call(t)},v=function(t){i.hooks.click.call(t)};i.hooks.init.tap(t.tag,(function(){var t=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(t.style.msContentZooming="none",t.style.msTouchAction="none"):s.supportsPointerEvents&&(t.style.touchAction="none"),s.supportsPointerEvents?function(t){n.globalThis.document.addEventListener("pointermove",u,!0),t.addEventListener("pointerdown",l,!0),t.addEventListener("pointerleave",d,!0),t.addEventListener("pointerover",f,!0),n.globalThis.addEventListener("pointerup",c,!0),n.globalThis.addEventListener("pointercancel",h,!0)}(t):function(t){n.globalThis.document.addEventListener("mousemove",u,!0),t.addEventListener("mousedown",l,!0),t.addEventListener("mouseout",d,!0),t.addEventListener("mouseover",f,!0),n.globalThis.addEventListener("mouseup",c,!0)}(t),s.supportsTouchEvents&&function(t){t.addEventListener("touchstart",l,!0),t.addEventListener("touchend",c,!0),t.addEventListener("touchmove",u,!0),t.addEventListener("touchcancel",h,!0)}(t),o.useNativeClickEvent&&t.addEventListener("click",v,!0),t.addEventListener("wheel",p,{passive:!0,capture:!0})})),i.hooks.destroy.tap(t.tag,(function(){var t=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(t.style.msContentZooming="",t.style.msTouchAction=""):s.supportsPointerEvents&&(t.style.touchAction=""),s.supportsPointerEvents?function(t){n.globalThis.document.removeEventListener("pointermove",u,!0),t.removeEventListener("pointerdown",l,!0),t.removeEventListener("pointerleave",d,!0),t.removeEventListener("pointerover",f,!0),n.globalThis.removeEventListener("pointerup",c,!0),n.globalThis.removeEventListener("pointercancel",h,!0)}(t):function(t){n.globalThis.document.removeEventListener("mousemove",u,!0),t.removeEventListener("mousedown",l,!0),t.removeEventListener("mouseout",d,!0),t.removeEventListener("mouseover",f,!0),n.globalThis.removeEventListener("mouseup",c,!0)}(t),s.supportsTouchEvents&&function(t){t.removeEventListener("touchstart",l,!0),t.removeEventListener("touchend",c,!0),t.removeEventListener("touchmove",u,!0),t.removeEventListener("touchcancel",h,!0)}(t),o.useNativeClickEvent&&t.removeEventListener("click",v,!0),t.removeEventListener("wheel",p,!0)}))}}])}();pst.tag="DOMInteraction";var vst=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).name="dom-interaction",t}return _(e,t),O(e,[{key:"init",value:function(){this.addRenderingPlugin(new pst)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(DD),gst=function(){function t(){k(this,t),this.displayObjectHTMLElementMap=new WeakMap}return O(t,[{key:"joinTransformMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return"matrix(".concat([t[0],t[1],t[4],t[5],t[12]+e[0],t[13]+e[1]].join(","),")")}},{key:"apply",value:function(e,n){var r=this,i=e.camera,a=e.renderingContext,o=e.renderingService;this.context=e;var s=a.root.ownerDocument.defaultView,u=s.context.eventService.nativeHTMLMap,c=function(t,e){e.style.transform=r.joinTransformMatrix(t.getWorldTransform(),t.getOrigin())},l=function(t){var e=t.target;if(e.nodeName===RD.HTML){r.$camera||(r.$camera=r.createCamera(i));var n=r.getOrCreateEl(e);r.$camera.appendChild(n),Object.keys(e.attributes).forEach((function(t){r.updateAttribute(t,e)})),c(e,n),u.set(n,e)}},f=function(t){var e=t.target;if(e.nodeName===RD.HTML&&r.$camera){var n=r.getOrCreateEl(e);n&&(n.remove(),u.delete(n))}},d=function(t){var e=t.target;if(e.nodeName===RD.HTML){var n=t.attrName;r.updateAttribute(n,e)}},h=function(t){var e=t.target;(e.nodeName===RD.FRAGMENT?e.childNodes:[e]).forEach((function(t){if(t.nodeName===RD.HTML){var e=r.getOrCreateEl(t);c(t,e)}}))},p=function(){if(r.$camera){var t=r.context.config,e=t.width,n=t.height;r.$camera.parentElement.style.width="".concat(e||0,"px"),r.$camera.parentElement.style.height="".concat(n||0,"px")}};o.hooks.init.tap(t.tag,(function(){s.addEventListener(RW.RESIZE,p),s.addEventListener(bG.MOUNTED,l),s.addEventListener(bG.UNMOUNTED,f),s.addEventListener(bG.ATTR_MODIFIED,d),s.addEventListener(bG.BOUNDS_CHANGED,h)})),o.hooks.endFrame.tap(t.tag,(function(){r.$camera&&a.renderReasons.has(vG.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))})),o.hooks.destroy.tap(t.tag,(function(){r.$camera&&r.$camera.remove(),s.removeEventListener(RW.RESIZE,p),s.removeEventListener(bG.MOUNTED,l),s.removeEventListener(bG.UNMOUNTED,f),s.removeEventListener(bG.ATTR_MODIFIED,d),s.removeEventListener(bG.BOUNDS_CHANGED,h)}))}},{key:"createCamera",value:function(t){var e=this.context.config,n=e.document,r=e.width,i=e.height,a=this.context.contextService.getDomElement(),o=a.parentNode;if(o){var s="g-canvas-camera",u=o.querySelector("#".concat(s));if(!u){var c=(n||document).createElement("div");c.style.overflow="hidden",c.style.pointerEvents="none",c.style.position="absolute",c.style.left="0px",c.style.top="0px",c.style.width="".concat(r||0,"px"),c.style.height="".concat(i||0,"px");var l=(n||document).createElement("div");u=l,l.id=s,l.style.position="absolute",l.style.left="".concat(a.offsetLeft||0,"px"),l.style.top="".concat(a.offsetTop||0,"px"),l.style.transformOrigin="left top",l.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),l.style.pointerEvents="none",l.style.width="100%",l.style.height="100%",c.appendChild(l),o.appendChild(c)}return u}return null}},{key:"getOrCreateEl",value:function(t){var e=this.context.config.document,n=this.displayObjectHTMLElementMap.get(t);return n||(n=(e||document).createElement("div"),t.parsedStyle.$el=n,this.displayObjectHTMLElementMap.set(t,n),t.id&&(n.id=t.id),t.name&&n.setAttribute("name",t.name),t.className&&(n.className=t.className),n.style.position="absolute",n.style["will-change"]="transform",n.style.transform=this.joinTransformMatrix(t.getWorldTransform(),t.getOrigin())),n}},{key:"updateAttribute",value:function(t,e){var n=this.getOrCreateEl(e);switch(t){case"innerHTML":var r=e.parsedStyle.innerHTML;Te(r)?n.innerHTML=r:(n.innerHTML="",n.appendChild(r));break;case"x":n.style.left="".concat(e.parsedStyle.x,"px");break;case"y":n.style.top="".concat(e.parsedStyle.y,"px");break;case"transformOrigin":var i=e.parsedStyle.transformOrigin;n.style["transform-origin"]="".concat(i[0].buildCSSText(null,null,"")," ").concat(i[1].buildCSSText(null,null,""));break;case"width":var a=e.parsedStyle.width;n.style.width=Oe(a)?"".concat(a,"px"):a.toString();break;case"height":var o=e.parsedStyle.height;n.style.height=Oe(o)?"".concat(o,"px"):o.toString();break;case"zIndex":var s=e.parsedStyle.zIndex;n.style["z-index"]="".concat(s);break;case"visibility":var u=e.parsedStyle.visibility;n.style.visibility=u;break;case"pointerEvents":var c=e.parsedStyle.pointerEvents,l=void 0===c?"auto":c;n.style.pointerEvents=l;break;case"opacity":var f=e.parsedStyle.opacity;n.style.opacity="".concat(f);break;case"fill":var d=e.parsedStyle.fill,h="";zF(d)?h=d.isNone?"transparent":e.getAttribute("fill"):Array.isArray(d)?h=e.getAttribute("fill"):FF(d),n.style.background=h;break;case"stroke":var p=e.parsedStyle.stroke,v="";zF(p)?v=p.isNone?"transparent":e.getAttribute("stroke"):Array.isArray(p)?v=e.getAttribute("stroke"):FF(p),n.style["border-color"]=v,n.style["border-style"]="solid";break;case"lineWidth":var g=e.parsedStyle.lineWidth;n.style["border-width"]="".concat(g||0,"px");break;case"lineDash":n.style["border-style"]="dashed";break;case"filter":var y=e.style.filter;n.style.filter=y;break;default:Me(e.style[t])||""===e.style[t]||(n.style[t]=e.style[t])}}}])}();gst.tag="HTMLRendering";var yst=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).name="html-renderer",t}return _(e,t),O(e,[{key:"init",value:function(){this.addRenderingPlugin(new gst)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(DD),mst=function(){return O((function t(e){k(this,t),this.renderingContext=e.renderingContext,this.canvasConfig=e.config}),[{key:"init",value:function(){var t=this.canvasConfig,e=t.container,n=t.canvas;if(n)this.$canvas=n,e&&n.parentElement!==e&&e.appendChild(n),this.$container=n.parentElement,this.canvasConfig.container=this.$container;else if(e&&(this.$container=Te(e)?document.getElementById(e):e,this.$container)){var r=document.createElement("canvas");this.$container.appendChild(r),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=r}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(t,e){var n=this.canvasConfig.devicePixelRatio;this.dpr=n,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*e,function(t,e,n){hB&&t.style&&(t.style.width=e+"px",t.style.height=n+"px")}(this.$canvas,t,e)),this.renderingContext.renderReasons.add(vG.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)}},{key:"toDataURL",value:(t=er(Jn().mark((function t(){var e,n,r,i=arguments;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=i.length>0&&void 0!==i[0]?i[0]:{}).type,r=e.encoderOptions,t.abrupt("return",this.context.canvas.toDataURL(n,r));case 3:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t}(),bst=function(t){function e(){var t;k(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=N(this,e,[].concat(r))).name="canvas-context-register",t}return _(e,t),O(e,[{key:"init",value:function(){this.context.ContextService=mst}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(DD),xst=function(t){function e(t){var n;return k(this,e),(n=N(this,e,[t])).registerPlugin(new bst),n.registerPlugin(new $ot),n.registerPlugin(new yot),n.registerPlugin(new hst),n.registerPlugin(new vst),n.registerPlugin(new Got),n.registerPlugin(new yst),n}return _(e,t),O(e)}(ID),wst=function(){function t(e){k(this,t),this.dragndropPluginOptions=e}return O(t,[{key:"apply",value:function(e){var n=this,r=e.renderingService,i=e.renderingContext.root.ownerDocument,a=i.defaultView,o=function(t){var e=t.target,r=e===i,o=r&&n.dragndropPluginOptions.isDocumentDraggable?i:e.closest&&e.closest("[draggable=true]");if(o){var s=!1,u=t.timeStamp,c=[t.clientX,t.clientY],l=null,f=[t.clientX,t.clientY],d=function(){var t=er(Jn().mark((function t(a){var d,h,p,v,g,y;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=8;break}if(d=a.timeStamp-u,h=Se([a.clientX,a.clientY],c),!(d<=n.dragndropPluginOptions.dragstartTimeThreshold||h<=n.dragndropPluginOptions.dragstartDistanceThreshold)){t.next=5;break}return t.abrupt("return");case 5:a.type="dragstart",o.dispatchEvent(a),s=!0;case 8:if(a.type="drag",a.dx=a.clientX-f[0],a.dy=a.clientY-f[1],o.dispatchEvent(a),f=[a.clientX,a.clientY],r){t.next=21;break}return p="pointer"===n.dragndropPluginOptions.overlap?[a.canvasX,a.canvasY]:e.getBounds().center,t.next=17,i.elementsFromPoint(p[0],p[1]);case 17:v=t.sent,g=v[v.indexOf(e)+1],y=(null==g?void 0:g.closest("[droppable=true]"))||(n.dragndropPluginOptions.isDocumentDroppable?i:null),l!==y&&(l&&(a.type="dragleave",a.target=l,l.dispatchEvent(a)),y&&(a.type="dragenter",a.target=y,y.dispatchEvent(a)),(l=y)&&(a.type="dragover",a.target=l,l.dispatchEvent(a)));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();a.addEventListener("pointermove",d);var h=function(t){if(s){t.detail={preventClick:!0};var e=t.clone();l&&(e.type="drop",e.target=l,l.dispatchEvent(e)),e.type="dragend",o.dispatchEvent(e),s=!1}a.removeEventListener("pointermove",d)};e.addEventListener("pointerup",h,{once:!0}),e.addEventListener("pointerupoutside",h,{once:!0})}};r.hooks.init.tap(t.tag,(function(){a.addEventListener("pointerdown",o)})),r.hooks.destroy.tap(t.tag,(function(){a.removeEventListener("pointerdown",o)}))}}])}();wst.tag="Dragndrop";var kst,Est,Ost=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,e),(t=N(this,e)).name="dragndrop",t.options=n,t}return _(e,t),O(e,[{key:"init",value:function(){this.addRenderingPlugin(new wst(w({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(t){Object.assign(this.plugins[0].dragndropPluginOptions,t)}}])}(DD),Sst={abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,round:Math.round,sqrt:Math.sqrt,pow:Math.pow},Mst=function(t){function e(t,n,r){var i;return k(this,e),(i=N(this,e,[t])).position=n,i.token=r,i.name="ExpressionError",i}return _(e,t),O(e)}(PM(Error));(Est=kst||(kst={}))[Est.STRING=0]="STRING",Est[Est.NUMBER=1]="NUMBER",Est[Est.BOOLEAN=2]="BOOLEAN",Est[Est.NULL=3]="NULL",Est[Est.IDENTIFIER=4]="IDENTIFIER",Est[Est.OPERATOR=5]="OPERATOR",Est[Est.FUNCTION=6]="FUNCTION",Est[Est.DOT=7]="DOT",Est[Est.BRACKET_LEFT=8]="BRACKET_LEFT",Est[Est.BRACKET_RIGHT=9]="BRACKET_RIGHT",Est[Est.PAREN_LEFT=10]="PAREN_LEFT",Est[Est.PAREN_RIGHT=11]="PAREN_RIGHT",Est[Est.COMMA=12]="COMMA",Est[Est.QUESTION=13]="QUESTION",Est[Est.COLON=14]="COLON",Est[Est.DOLLAR=15]="DOLLAR";var Tst,Ast,Pst=new Set([32,9,10,13]),Nst=new Set([43,45,42,47,37,33,38,124,61,60,62]),Cst=new Map([["true",kst.BOOLEAN],["false",kst.BOOLEAN],["null",kst.NULL]]),_st=new Map([["===",!0],["!==",!0],["<=",!0],[">=",!0],["&&",!0],["||",!0],["+",!0],["-",!0],["*",!0],["/",!0],["%",!0],["!",!0],["<",!0],[">",!0]]),Lst=new Map([[46,kst.DOT],[91,kst.BRACKET_LEFT],[93,kst.BRACKET_RIGHT],[40,kst.PAREN_LEFT],[41,kst.PAREN_RIGHT],[44,kst.COMMA],[63,kst.QUESTION],[58,kst.COLON],[36,kst.DOLLAR]]),Rst=new Map,jst=nr(Lst.entries());try{for(jst.s();!(Tst=jst.n()).done;){var Dst=g(Tst.value,2),Ist=Dst[0],Fst=Dst[1];Rst.set(Ist,{type:Fst,value:String.fromCharCode(Ist)})}}catch(t){jst.e(t)}finally{jst.f()}function zst(t){return t>=48&&t<=57}function Bst(t){return t>=97&&t<=122||t>=65&&t<=90||95===t}function Gst(t){return Bst(t)||zst(t)}function Wst(t){return Nst.has(t)}!function(t){t[t.Program=0]="Program",t[t.Literal=1]="Literal",t[t.Identifier=2]="Identifier",t[t.MemberExpression=3]="MemberExpression",t[t.CallExpression=4]="CallExpression",t[t.BinaryExpression=5]="BinaryExpression",t[t.UnaryExpression=6]="UnaryExpression",t[t.ConditionalExpression=7]="ConditionalExpression"}(Ast||(Ast={}));var Vst=new Map([["||",2],["&&",3],["===",4],["!==",4],[">",5],[">=",5],["<",5],["<=",5],["+",6],["-",6],["*",7],["/",7],["%",7],["!",8]]),Hst={type:Ast.Literal,value:null},Yst={type:Ast.Literal,value:!0},Ust={type:Ast.Literal,value:!1},qst=function(t){var e=0,n=t.length,r=function(){return e>=n?null:t[e]},i=function(){return t[e++]},a=function(t){var e=r();return null!==e&&e.type===t},o=function(t){return t.type===kst.OPERATOR?Vst.get(t.value)||-1:t.type===kst.DOT||t.type===kst.BRACKET_LEFT?9:t.type===kst.QUESTION?1:-1},s=function(t){var n,o;if(i().type===kst.DOT){if(!a(kst.IDENTIFIER)){var s=r();throw new Mst("Expected property name",e,s?s.value:"<end of input>")}var u=i();n={type:Ast.Identifier,name:u.value},o=!1}else{if(n=c(0),!a(kst.BRACKET_RIGHT)){var l=r();throw new Mst("Expected closing bracket",e,l?l.value:"<end of input>")}i(),o=!0}return{type:Ast.MemberExpression,object:t,property:n,computed:o}},u=function(){var t=r();if(!t)throw new Mst("Unexpected end of input",e,"<end of input>");if(t.type===kst.OPERATOR&&("!"===t.value||"-"===t.value)){i();var n=u();return{type:Ast.UnaryExpression,operator:t.value,argument:n,prefix:!0}}switch(t.type){case kst.NUMBER:return i(),{type:Ast.Literal,value:Number(t.value)};case kst.STRING:return i(),{type:Ast.Literal,value:t.value};case kst.BOOLEAN:return i(),"true"===t.value?Yst:Ust;case kst.NULL:return i(),Hst;case kst.IDENTIFIER:return i(),{type:Ast.Identifier,name:t.value};case kst.FUNCTION:return function(){var t=i(),n=[];if(!a(kst.PAREN_LEFT)){var o=r();throw new Mst("Expected opening parenthesis after function name",e,o?o.value:"<end of input>")}for(i();;){if(a(kst.PAREN_RIGHT)){i();break}if(!r()){var s=r();throw new Mst("Expected closing parenthesis",e,s?s.value:"<end of input>")}if(n.length>0){if(!a(kst.COMMA)){var u=r();throw new Mst("Expected comma between function arguments",e,u?u.value:"<end of input>")}i()}var l=c(0);n.push(l)}return{type:Ast.CallExpression,callee:{type:Ast.Identifier,name:t.value},arguments:n}}();case kst.PAREN_LEFT:i();var o=c(0);if(!a(kst.PAREN_RIGHT)){var s=r();throw new Mst("Expected closing parenthesis",e,s?s.value:"<end of input>")}return i(),o;default:throw new Mst("Unexpected token: ".concat(t.type),e,t.value)}},c=function(){for(var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f=u();e<n;){var d=t[e],h=o(d);if(h<=l)break;if(d.type!==kst.QUESTION)if(d.type!==kst.OPERATOR){if(d.type!==kst.DOT&&d.type!==kst.BRACKET_LEFT)break;f=s(f)}else{i();var p=c(h);f={type:Ast.BinaryExpression,operator:d.value,left:f,right:p}}else{i();var v=c(0);if(!a(kst.COLON)){var g=r();throw new Mst("Expected : in conditional expression",e,g?g.value:"<end of input>")}i();var y=c(0);f={type:Ast.ConditionalExpression,test:f,consequent:v,alternate:y}}}return f},l=c();return{type:Ast.Program,body:l}},Xst=function(t,e,n){var r=e;n&&(r=w(w({},e),{},{context:w(w({},e.context),n)}));var i=function(t){switch(t.type){case Ast.Literal:return function(t){return t.value}(t);case Ast.Identifier:return function(t){if(!(t.name in r.context))throw new Mst("Undefined variable: ".concat(t.name));return r.context[t.name]}(t);case Ast.MemberExpression:return function(t){var e=i(t.object);if(null==e)throw new Mst("Cannot access property of null or undefined");return e[t.computed?i(t.property):t.property.name]}(t);case Ast.CallExpression:return function(t){var e=r.functions[t.callee.name];if(!e)throw new Mst("Undefined function: ".concat(t.callee.name));return e.apply(void 0,M(t.arguments.map((function(t){return i(t)}))))}(t);case Ast.BinaryExpression:return function(t){if("&&"===t.operator){var e=i(t.left);return e?i(t.right):e}if("||"===t.operator)return i(t.left)||i(t.right);var n=i(t.left),r=i(t.right);switch(t.operator){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r;case"%":return n%r;case"===":return n===r;case"!==":return n!==r;case">":return n>r;case">=":return n>=r;case"<":return n<r;case"<=":return n<=r;default:throw new Mst("Unknown operator: ".concat(t.operator))}}(t);case Ast.UnaryExpression:return function(t){var e=i(t.argument);if(t.prefix)switch(t.operator){case"!":return!e;case"-":if("number"!=typeof e)throw new Mst("Cannot apply unary - to non-number: ".concat(e));return-e;default:throw new Mst("Unknown operator: ".concat(t.operator))}throw new Mst("Postfix operators are not supported: ".concat(t.operator))}(t);case Ast.ConditionalExpression:return function(t){var e=i(t.test);return i(e?t.consequent:t.alternate)}(t);default:throw new Mst("Evaluation error: Unsupported node type: ".concat(t.type))}};return i(t.body)};var Kst=function(t){return t};const $st=function(t,e){void 0===e&&(e=Kst);var n={};return Ln(t)&&!Me(t)&&Object.keys(t).forEach((function(r){n[r]=e(t[r],r)})),n};var Zst=["style","encode","labels","children"],Qst=JX((function(t){var e=function(t){var e=function(t){var e,n=t,r=n.length,i=new Array(Math.ceil(r/3)),a=0,o=0;function s(t){var e=o+1;o++;for(var i="",a=!1;o<r;){var s=n.charCodeAt(o);if(s===t)return a||(i=n.substring(e,o)),o++,{type:kst.STRING,value:i};92===s?(a||(i=n.substring(e,o),a=!0),o++,i+=n[o]):a&&(i+=n[o]),o++}throw new Mst("Unterminated string starting with ".concat(String.fromCharCode(t)),o,n.substring(Math.max(0,o-10),o))}function u(){var t=o;for(45===n.charCodeAt(o)&&o++;o<r&&zst(n.charCodeAt(o));)o++;if(o<r&&46===n.charCodeAt(o))for(o++;o<r&&zst(n.charCodeAt(o));)o++;var e=n.slice(t,o);return{type:kst.NUMBER,value:e}}function c(){var t=++o;if(o<r&&Bst(n.charCodeAt(o)))for(o++;o<r&&Gst(n.charCodeAt(o));)o++;var e=n.slice(t,o);return{type:kst.FUNCTION,value:e}}function l(){for(var t=o++;o<r&&Gst(n.charCodeAt(o));)o++;var e=n.slice(t,o),i=Cst.get(e);return i?{type:i,value:e}:{type:kst.IDENTIFIER,value:e}}function f(){if(o+2<r){var t=n.substring(o,o+3);if(_st.has(t))return o+=3,{type:kst.OPERATOR,value:t}}if(o+1<r){var e=n.substring(o,o+2);if(_st.has(e))return o+=2,{type:kst.OPERATOR,value:e}}var i=n[o];if(_st.has(i))return o++,{type:kst.OPERATOR,value:i};throw new Mst("Unknown operator at position ".concat(o,": ").concat(n.substring(o,o+1)),o,n.substring(Math.max(0,o-10),o))}for(;o<r;){var d=n.charCodeAt(o);if(e=d,Pst.has(e))o++;else{var h=Rst.get(d);if(h)i[a++]=h,o++;else if(34!==d&&39!==d)if(zst(d)||45===d&&o+1<r&&zst(n.charCodeAt(o+1)))i[a++]=u();else if(64!==d)if(Bst(d))i[a++]=l();else{if(!Wst(d))throw new Mst("Unexpected character: ".concat(n[o]),o,n.substring(Math.max(0,o-10),o));i[a++]=f()}else i[a++]=c();else i[a++]=s(d)}}return a===i.length?i:i.slice(0,a)}(t),n=qst(e),r=function(){return{context:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},functions:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}}({},Sst);return function(){return Xst(n,r,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}(t);return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Array.from({length:n.length},(function(t,e){return String.fromCharCode(97+e)})),a=Object.fromEntries(n.map((function(t,e){return[i[e],t]})));return e(Object.assign(Object.assign({},a),{global:Object.assign({},a)}))}}),(function(t){return t}),128);function Jst(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Array.isArray(t))return t.map((function(n,r){return Jst(t[r],e)}));if("object"==typeof t&&t)return $st(t,(function(t,n){return e&&Zst.includes(n)?Jst(t,"children"===n):e?t:Jst(t,!1)}));if("string"==typeof t){var n=t.trim();if(n.startsWith("{")&&n.endsWith("}"))return Qst(n.slice(1,-1))}return t}var tut=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]],eut={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},nut={threshold:"threshold",quantize:"quantize",quantile:"quantile"},rut={ordinal:"ordinal",band:"band",point:"point"},iut={constant:"constant"},aut=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function out(t,e,n,r,i){var a=g(G0("component",r),1)[0],o=t.scaleInstances,s=t.scale,u={bbox:t.bbox,library:r};return a(aut(t,["scaleInstances","scale","bbox"]))({coordinate:e,library:r,markState:i,scales:o,theme:n,value:u,scale:s})}function sut(t,e){var n=["left","right","bottom","top"],r=WV(t,(function(t){var e=t.type,r=t.position,i=t.group;return n.includes(r)?void 0===i?e.startsWith("legend")?"legend-".concat(r):Symbol("independent"):"independent"===i?Symbol("independent"):i:Symbol("independent")}));return r.flatMap((function(t){var n=g(t,2)[1];if(1===n.length)return n[0];if(void 0!==e){var r=n.filter((function(t){return void 0!==t.length})).map((function(t){return t.length})),i=E9(r);if(i>e)return n.forEach((function(t){return t.group=Symbol("independent")})),n;var a=(e-i)/(n.length-r.length);n.forEach((function(t){void 0===t.length&&(t.length=a)}))}var o=ZX(n,(function(t){return t.size})),s=ZX(n,(function(t){return t.order})),u=ZX(n,(function(t){return t.crossPadding}));return{type:"group",size:o,order:s,position:n[0].position,children:n,crossPadding:u}}))}function uut(t){var e=t.type;return"string"!=typeof e?null:e in eut?"continuous":e in rut?"discrete":e in nut?"distribution":e in iut?"constant":null}function cut(t){var e=m5(t,"polar");if(e.length){var n=e[e.length-1],r=KR(n);return[r.startAngle,r.endAngle]}var i=m5(t,"radial");if(i.length){var a=i[i.length-1],o=ej(a);return[o.startAngle,o.endAngle]}return[-Math.PI/2,Math.PI/2*3]}function lut(t,e,n,r,i,a,o){var s=g(cut(o),1)[0],u=[r.position||e,null!=s?s:n];return"string"==typeof t&&t.startsWith("axis")?function(t,e,n,r,i){var a=n[0].name;if("axisRadar"===t){var o=r.filter((function(t){return t.name.startsWith("position")})),s=function(t){var e=/position(\d*)/g.exec(t);return e?+e[1]:null}(a);if(a===o.slice(-1)[0].name||null===s)return[null,null];var u=g(cut(i),2),c=u[0];return["center",(u[1]-c)/(o.length-1)*s+c]}return"axisY"===t&&function(t){return m5(t,"parallel").length>0}(i)?x5(i)?["center","horizontal"]:["center","vertical"]:"axisLinear"===t?["center",g(cut(i),1)[0]]:"axisArc"===t?"inner"===e[0]?["inner",null]:["outer",null]:b5(i)||k5(i)?["center",null]:"axisX"===t&&function(t){return m5(t,"reflect").length>0}(i)||"axisX"===t&&function(t){return m5(t,"reflectY").length>0}(i)?["top",null]:e}(t,u,i,a,o):"string"==typeof t&&t.startsWith("legend")&&b5(o)&&"center"===r.position?["center","vertical"]:u}function fut(t,e,n,r,i,a){var o=t.type;if(["left","right","bottom","top"].includes(r)&&"string"==typeof o){var s=o;return(s.startsWith("axis")?gut:s.startsWith("group")?dut:s.startsWith("legendContinuous")?yut:"legendCategory"===s?mut:s.startsWith("slider")?vut:"title"===s?put:s.startsWith("scrollbar")?hut:function(){})(t,e,n,r,i,a)}}function dut(t,e,n,r,i,a){var o=t.children,s=ZX(o,(function(t){return t.crossPadding}));o.forEach((function(t){return t.crossPadding=s})),o.forEach((function(t){return fut(t,e,n,r,i,a)}));var u=ZX(o,(function(t){return t.size}));t.size=u,o.forEach((function(t){return t.size=u}))}function hut(t,e,n,r,i,a){var o=vd({},i.scrollbar,t).trackSize,s=void 0===o?6:o;t.size=s}function put(t,e,n,r,i,a){var o=vd({},i.title,t),s=o.title,u=o.subtitle,c=o.spacing,l=void 0===c?0:c,f=aut(o,["title","subtitle","spacing"]);if(s){var d=Out(s,iH(f,"title"));t.size=d.height}if(u){var h=Out(u,iH(f,"subtitle"));t.size+=l+h.height}}function vut(t,e,n,r,i,a){var o,s=(o=i.slider,vd({},o,t)),u=s.trackSize,c=s.handleIconSize,l=Math.max(u,2.4*c);t.size=l}function gut(t,e,n,r,i,a){var o;t.transform=t.transform||[{type:"hide"}];var s="left"===r||"right"===r,u=kut(t,r,i),c=u.tickLength,l=void 0===c?0:c,f=u.labelSpacing,d=void 0===f?0:f,h=u.titleSpacing,p=void 0===h?0:h,v=u.labelAutoRotate,y=aut(u,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),m=but(t,a),b=xut(y,m),x=l+d;if(b&&b.length){var w=ZX(b,(function(t){return t.width})),k=ZX(b,(function(t){return t.height}));if(s)t.size=w+x;else{var E=t.tickFilter,O=t.labelTransform;!function(t,e,n,r,i){var a=E9(e,(function(t){return t.width}));if(a>n)return!0;var o=t.clone();o.update({range:[0,n]});for(var s=Eut(t,i),u=s.map((function(t){return o.map(t)+function(t,e){return t.getBandWidth?t.getBandWidth(e)/2:0}(o,t)})),c=s.map((function(t,e){return e})),l=-r[0],f=n+r[1],d=function(t,e){var n=e.width;return[t-n/2,t+n/2]},h=0;h<c.length;h++){var p=g(d(u[h],e[h]),2),v=p[0],y=p[1];if(v<l||y>f)return!0;var m=u[h+1];if(m&&y>g(d(m,e[h+1]),1)[0])return!0}return!1}(m,b,e,n,E)||O||!1===v||null===v?(t.labelTransform=null!==(o=t.labelTransform)&&void 0!==o?o:"rotate(0)",t.size=k+x):(t.labelTransform="rotate(90)",t.size=w+x)}}else t.size=l;var S=wut(y);S&&(t.size+=s?p+S.width:p+S.height)}function yut(t,e,n,r,i,a){var o,s=(o=i.legendContinuous,vd({},o,t)),u=s.labelSpacing,c=void 0===u?0:u,l=s.titleSpacing,f=void 0===l?0:l,d=aut(s,["labelSpacing","titleSpacing"]),h="left"===r||"right"===r,p=iH(d,"ribbon").size,v=iH(d,"handleIcon").size,g=Math.max(p,2.4*v);t.size=g;var y=xut(d,but(t,a));if(y){var m=h?"width":"height",b=ZX(y,(function(t){return t[m]}));t.size+=b+c}var x=wut(d);x&&(h?t.size=Math.max(t.size,x.width):t.size+=f+x.height)}function mut(t,e,n,r,i,a){var o,s,u,c,l,f,d,h=(o=i.legendCategory,s=t.title,c=(u=g(Array.isArray(s)?[s,void 0]:[void 0,s],2))[0],l=u[1],vd({title:c},o,Object.assign(Object.assign({},t),{title:l}))),p=h.itemSpacing,v=h.itemMarkerSize,y=h.titleSpacing,m=h.rowPadding,b=h.colPadding,x=h.maxCols,w=void 0===x?1/0:x,k=h.maxRows,E=void 0===k?1/0:k,O=aut(h,["itemSpacing","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),S=t.cols,M=t.length,T=function(t){return Math.min(t,E)},A=function(t){return Math.min(t,w)},P="left"===r||"right"===r,N=void 0===M?e+(P?0:n[0]+n[1]):M,C=wut(O),_=xut(O,but(t,a),"itemLabel"),L=Math.max(_[0].height,v)+m,R=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return v+t+p[0]+e};P?function(){var e,n=-1/0,r=0,i=1,a=0,o=-1/0,s=-1/0,u=C?C.height:0,c=N-u,l=nr(_);try{for(l.s();!(e=l.n()).done;){var f=e.value.width,d=R(f,b);n=Math.max(n,d),r+L>c?(i++,o=Math.max(o,a),s=Math.max(s,r),a=1,r=L):(r+=L,a++)}}catch(t){l.e(t)}finally{l.f()}i<=1&&(o=a,s=r),t.size=n*A(i),t.length=s+u,vd(t,{cols:A(i),gridRow:o})}():"number"==typeof S?(f=Math.ceil(_.length/S),d=ZX(_,(function(t){return R(t.width)}))*S,t.size=L*T(f)-m,t.length=Math.min(d,N)):function(){var e,n=1,r=0,i=-1/0,a=nr(_);try{for(a.s();!(e=a.n()).done;){var o=e.value.width,s=R(o,b);r+s>N?(i=Math.max(i,r),r=s,n++):r+=s}}catch(t){a.e(t)}finally{a.f()}1===n&&(i=r),t.size=L*T(n)-m,t.length=i}(),C&&(P?t.size=Math.max(t.size,C.width):t.size+=y+C.height)}function but(t,e){var n=g(G0("scale",e),1)[0],r=t.scales,i=t.tickCount,a=t.tickMethod,o=r.find((function(t){return"constant"!==t.type&&"identity"!==t.type}));return void 0!==i&&(o.tickCount=i),void 0!==a&&(o.tickMethod=a),n(o)}function xut(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",r=t.labelFormatter,i=t.tickFilter,a=t.label,o=void 0===a||a,s=aut(t,["labelFormatter","tickFilter","label"]);if(!o)return null;var u=function(t,e,n){var r=Eut(t,n).map((function(t){return"number"==typeof t?kH(t):t})),i=e?"string"==typeof e?sZ(e):e:t.getFormatter?t.getFormatter():function(t){return"".concat(t)};return r.map(i)}(e,r,i),c=iH(s,n),l=u.map((function(t,e){return Object.fromEntries(Object.entries(c).map((function(n){var r=g(n,2),i=r[0],a=r[1];return[i,"function"==typeof a?a(t,e):a]})))})),f=u.map((function(t,e){return Out(t,l[e])})),d=l.some((function(t){return t.transform}));if(!d){var h=u.map((function(t,e){return e}));t.indexBBox=new Map(h.map((function(t){return[t,[u[t],f[t]]]})))}return f}function wut(t){var e,n=t.title,r=aut(t,["title"]);if(!1===(e=n)||null===e||void 0===n)return null;var i=iH(r,"title"),a=i.direction,o=i.transform,s=Array.isArray(n)?n.join(","):n;return"string"!=typeof s?null:Out(s,Object.assign(Object.assign({},i),{transform:o||("vertical"===a?"rotate(-90)":"")}))}function kut(t,e,n){var r=t.title,i=g(Array.isArray(r)?[r,void 0]:[void 0,r],2),a=i[0],o=i[1],s=n.axis,u=n["axis".concat(tH(e))];return vd({title:a},s,u,Object.assign(Object.assign({},t),{title:o}))}function Eut(t,e){var n=t.getTicks?t.getTicks():t.getOptions().domain;return e?n.filter(e):n}function Out(t,e){var n=function(t){return t instanceof oW?t:new SW({style:{text:"".concat(t)}})}(t),r=(e.filter,aut(e,["filter"]));return n.attr(Object.assign(Object.assign({},r),{visibility:"none"})),n.getBBox()}function Sut(t){var e=t.height,n=t.width,r=t.padding,i=void 0===r?0:r,a=t.paddingLeft,o=void 0===a?i:a,s=t.paddingRight,u=void 0===s?i:s,c=t.paddingTop,l=void 0===c?i:c,f=t.paddingBottom,d=void 0===f?i:f,h=t.margin,p=void 0===h?16:h,v=t.marginLeft,g=void 0===v?p:v,y=t.marginRight,m=void 0===y?p:y,b=t.marginTop,x=void 0===b?p:b,w=t.marginBottom,k=void 0===w?p:w,E=t.inset,O=void 0===E?0:E,S=t.insetLeft,M=void 0===S?O:S,T=t.insetRight,A=void 0===T?O:T,P=t.insetTop,N=void 0===P?O:P,C=t.insetBottom,_=void 0===C?O:C,L=function(t){return"auto"===t?20:t};return{width:n-L(o)-L(u)-g-m-M-A,height:e-L(l)-L(d)-x-k-N-_}}function Mut(t,e,n,r,i,a,o){var s,u=GV(t,(function(t){return t.position})),c=i.padding,l=void 0===c?a.padding:c,f=i.paddingLeft,d=void 0===f?l:f,h=i.paddingRight,p=void 0===h?l:h,v=i.paddingBottom,g=void 0===v?l:v,y=i.paddingTop,m={paddingBottom:g,paddingLeft:d,paddingTop:void 0===y?l:y,paddingRight:p},b=nr(r);try{var x=function(){var t=s.value,r="padding".concat(tH(BU(t))),i=u.get(t)||[],c=m[r],l=function(t){void 0===t.size&&(t.size=t.defaultSize)},f="bottom"===t||"top"===t,d=$X(i,(function(t){return t.order})),h=i.filter((function(t){return t.type.startsWith("axis")&&t.order==d}));if(h.length&&(h[0].crossPadding=0),"number"==typeof c)i.forEach(l),i.forEach((function(t){t.type.startsWith("axis")&&void 0===t.labelAutoHide&&(t.labelAutoHide=!0)}));else if(0===i.length)m[r]=0;else{var p=sut(i,f?e+n[0]+n[1]:e);p.forEach((function(r){r.size||("auto"!==c?function(t){"group"===t.type?(t.children.forEach(l),t.size=ZX(t.children,(function(t){return t.size}))):t.size=t.defaultSize}(r):(fut(r,e,n,t,a,o),l(r)))}));var v=p.reduce((function(t,e){var n=e.size,r=e.crossPadding;return t+n+(void 0===r?12:r)}),0);m[r]=v}};for(b.s();!(s=b.n()).done;)x()}catch(t){b.e(t)}finally{b.f()}return m}function Tut(t){var e=t.width,n=t.height,r=t.paddingLeft,i=t.paddingRight,a=t.paddingTop,o=t.paddingBottom,s=t.marginLeft,u=t.marginTop,c=t.marginBottom,l=t.marginRight,f=t.innerHeight,d=t.innerWidth,h=t.insetBottom,p=t.insetLeft,v=t.insetRight,g=t.insetTop,y=r+s,m=a+u,b=i+l,x=o+c,w=e-s-l,k=[y+p,m+g,d-p-v,f-g-h,"center",null,null];return{top:[y,0,d,m,"vertical",!0,tQ,s,w],right:[e-b,m,b,f,"horizontal",!1,tQ],bottom:[y,n-x,d,x,"vertical",!1,tQ,s,w],left:[0,m,y,f,"horizontal",!0,tQ],"top-left":[y,0,d,m,"vertical",!0,tQ],"top-right":[y,0,d,m,"vertical",!0,tQ],"bottom-left":[y,n-x,d,x,"vertical",!1,tQ],"bottom-right":[y,n-x,d,x,"vertical",!1,tQ],center:k,inner:k,outer:k}}var Aut=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))},Put=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Nut(t,e,n){var r;return Aut(this,void 0,void 0,Jn().mark((function i(){var a,o,s,u,c,l,f,d,h,p,v,y,m,b,x,w,k,E,O,S,T,A,P,N,C,_,L,R,j,D,I,F,z,B,G,W,V,H,Y,U,q,X,K,$,Z,Q,J,tt,et,nt,rt,it,at,ot,st,ut,ct,lt,ft=this;return Jn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=n.library,o=G0("composition",a),s=g(o,1),u=s[0],c=G0("interaction",a),l=g(c,1),f=l[0],d=new Set(Object.keys(a).map((function(t){var e;return null===(e=/mark\.(.*)/.exec(t))||void 0===e?void 0:e[1]})).filter(rH)),h=new Set(Object.keys(a).map((function(t){var e;return null===(e=/component\.(.*)/.exec(t))||void 0===e?void 0:e[1]})).filter(rH)),p=function(t){var e=t.type;if("function"==typeof e){var n=e.props,r=(void 0===n?{}:n).composite;if(void 0===r||r)return"mark"}return"string"!=typeof e?e:d.has(e)||h.has(e)?"mark":e},v=function(t){return"mark"===p(t)},y=function(t){return"standardView"===p(t)},m=function(t){var e=t.type;return"string"==typeof e&&!!h.has(e)},b=function(t){if(y(t))return[t];var e=p(t);return u({type:e,static:m(t)})(t)},x=[],w=new Map,k=new Map,E=[t],O=[];case 15:if(!E.length){i.next=54;break}if(S=E.shift(),!y(S)){i.next=42;break}if(!(T=k.get(S))){i.next=23;break}i.t0=zut(T,S,a),i.next=26;break;case 23:return i.next=25,Rut(S,n);case 25:i.t0=i.sent;case 26:if(A=i.t0,P=g(A,2),N=P[0],C=P[1],w.set(N,S),x.push(N),_=C.flatMap(b).map((function(t){return y5(t,a)})),E.push.apply(E,M(_)),!_.every(y)){i.next=40;break}return i.next=37,Promise.all(_.map((function(t){return Iut(t,n)})));case 37:for(M5(L=i.sent),R=0;R<_.length;R++)j=_[R],D=L[R],k.set(j,D);case 40:i.next=52;break;case 42:if(!v(S)){i.next=46;break}i.t1=S,i.next=49;break;case 46:return i.next=48,ect(S,n);case 48:i.t1=i.sent;case 49:I=i.t1,F=b(I),Array.isArray(F)?E.push.apply(E,M(F)):"function"==typeof F&&O.push(F());case 52:i.next=15;break;case 54:n.emitter.emit(I0.BEFORE_PAINT),z=new Map,B=new Map,G=[],e.selectAll(oct(nJ)).data(x,(function(t){return t.key})).join((function(t){return t.append("g").attr("className",nJ).attr("id",(function(t){return t.key})).call(Cut).each((function(t,e,r){But(t,fH(r),G,n),z.set(t,r)}))}),(function(t){return t.call(Cut).each((function(t,e,r){But(t,fH(r),G,n),B.set(t,r)}))}),(function(t){return t.each((function(t,e,n){var r,i=nr(n.nameInteraction.values());try{for(i.s();!(r=i.n()).done;)r.value.destroy()}catch(t){i.e(t)}finally{i.f()}})).remove()})),W=function(t,e,r){return Array.from(t.entries()).map((function(i){var a=g(i,2),o=a[0],s=a[1],u=r||new Map,c=w.get(o),l=_ut(fH(s),c,n);return{view:o,container:s,options:c,setState:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return u.set(t,e)},update:function(n,r){return Aut(ft,void 0,void 0,Jn().mark((function i(){var a,o;return Jn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=QV(Array.from(u.values())),o=a(c),i.next=4,l(o,n,(function(){fn(r)&&e(t,r,u)}));case 4:return i.abrupt("return",i.sent);case 5:case"end":return i.stop()}}),i)})))}}}))},V=function(){var t,e,r=arguments.length>1?arguments[1]:void 0,i=W(arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,V,arguments.length>2?arguments[2]:void 0),a=nr(i);try{for(a.s();!(e=a.n()).done;){var o=e.value,s=o.options,u=o.container.nameInteraction,c=tct(s);r&&(c=c.filter((function(t){return r.includes(t[0])})));var l,d=nr(c);try{for(d.s();!(l=d.n()).done;){var h=g(l.value,2),p=h[0],v=h[1],y=u.get(p);if(y&&(null===(t=y.destroy)||void 0===t||t.call(y)),v){var m=Fut(o.view,p,v,f)(o,i,n.emitter);u.set(p,{destroy:m})}}}catch(t){d.e(t)}finally{d.f()}}}catch(t){a.e(t)}finally{a.f()}},H=W(z,V),Y=nr(H);try{for(Y.s();!(U=Y.n()).done;){q=U.value,X=q.options,K=new Map,q.container.nameInteraction=K,$=nr(tct(X));try{for($.s();!(Z=$.n()).done;)Q=Z.value,J=g(Q,2),tt=J[0],(et=J[1])&&(nt=Fut(q.view,tt,et,f),rt=nt(q,H,n.emitter),K.set(tt,{destroy:rt}))}catch(t){$.e(t)}finally{$.f()}}}catch(t){Y.e(t)}finally{Y.f()}V(),it=t.width,at=t.height,ot=[],st=Jn().mark((function t(){var r,i;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=ct[ut],i=new Promise((function(t){return Aut(ft,void 0,void 0,Jn().mark((function i(){var a,o,s,u;return Jn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=nr(r),i.prev=1,a.s();case 3:if((o=a.n()).done){i.next=10;break}return s=o.value,u=Object.assign({width:it,height:at},s),i.next=8,Nut(u,e,n);case 8:i.next=3;break;case 10:i.next=15;break;case 12:i.prev=12,i.t0=i.catch(1),a.e(i.t0);case 15:return i.prev=15,a.f(),i.finish(15);case 18:t();case 19:case"end":return i.stop()}}),i,null,[[1,12,15,18]])})))})),ot.push(i);case 3:case"end":return t.stop()}}),t)})),ut=0,ct=O;case 69:if(!(ut<ct.length)){i.next=74;break}return i.delegateYield(st(),"t2",71);case 71:ut++,i.next=69;break;case 74:return n.views=x,null===(r=n.animations)||void 0===r||r.forEach((function(t){return null==t?void 0:t.cancel()})),n.animations=G,n.emitter.emit(I0.AFTER_PAINT),lt=G.filter(rH).map($ut).map((function(t){return t.finished})),i.abrupt("return",Promise.all([].concat(M(lt),ot)));case 80:case"end":return i.stop()}}),i)})))}function Cut(t){t.style("transform",(function(t){return"translate(".concat(t.layout.x,", ").concat(t.layout.y,")")}))}function _ut(t,e,n){var r=this,i=function(t){var e=g(G0("interaction",t),2)[1];return function(t){var n=g(t,2),r=n[0],i=n[1];try{return[r,e(r)]}catch(t){return[r,i.type]}}}(n.library),a=tct(e).map(i).filter((function(t){return t[1]&&t[1].props&&t[1].props.reapplyWhenUpdate})).map((function(t){return t[0]}));return function(e,i,o){return Aut(r,void 0,void 0,Jn().mark((function r(){var s,u,c,l,f,d,h,p,v;return Jn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=[],r.next=3,Rut(e,n);case 3:u=r.sent,c=g(u,2),l=c[0],f=c[1],But(l,t,s,n),d=nr(a.filter((function(t){return t!==i})));try{for(d.s();!(h=d.n()).done;)Lut(h.value,t,e,l,n)}catch(t){d.e(t)}finally{d.f()}p=nr(f);try{for(p.s();!(v=p.n()).done;)Nut(v.value,t,n)}catch(t){p.e(t)}finally{p.f()}return o(),r.abrupt("return",{options:e,view:l});case 14:case"end":return r.stop()}}),r)})))}}function Lut(t,e,n,r,i){var a,o=g(G0("interaction",i.library),1)[0],s=e.node().nameInteraction,u=tct(n).find((function(e){return g(e,1)[0]===t})),c=s.get(t);if(c&&(null===(a=c.destroy)||void 0===a||a.call(c),u[1])){var l=Fut(r,t,u[1],o),f={options:n,view:r,container:e.node(),update:function(t){return Promise.resolve(t)}},d=l(f,[],i.emitter);s.set(t,{destroy:d})}}function Rut(t,e){return Aut(this,void 0,void 0,Jn().mark((function n(){var r,i,a,o,s;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.library,n.next=3,Dut(t,e);case 3:return i=n.sent,a=jut(i),t.interaction=a.interaction,t.coordinate=a.coordinate,t.marks=[].concat(M(a.marks),M(a.components)),o=y5(a,r),n.next=11,Iut(o,e);case 11:return s=n.sent,n.abrupt("return",zut(s,o,r));case 13:case"end":return n.stop()}}),n)})))}function jut(t){var e=t.coordinate,n=void 0===e?{}:e,r=t.interaction,i=void 0===r?{}:r,a=t.style,o=void 0===a?{}:a,s=t.marks,u=Put(t,["coordinate","interaction","style","marks"]),c=s.map((function(t){return t.coordinate||{}})),l=s.map((function(t){return t.interaction||{}})),f=s.map((function(t){return t.viewStyle||{}})),d=[].concat(M(c),[n]).reduceRight((function(t,e){return vd(t,e)}),{}),h=[i].concat(M(l)).reduce((function(t,e){return vd(t,e)}),{}),p=[].concat(M(f),[o]).reduce((function(t,e){return vd(t,e)}),{});return Object.assign(Object.assign({},u),{marks:s,coordinate:d,interaction:h,style:p})}function Dut(t,e){return Aut(this,void 0,void 0,Jn().mark((function n(){var r,i,a,o,s,u,c,l,f,d,h,p,v,y,m;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.library,i=G0("mark",r),a=g(i,2),o=a[0],s=a[1],u=new Set(Object.keys(r).map((function(t){var e;return null===(e=/component\.(.*)/.exec(t))||void 0===e?void 0:e[1]})).filter(rH)),c=t.marks,l=[],f=[],d=M(c),h=Sut(t),p=h.width,v=h.height,y={options:t,width:p,height:v},m=Jn().mark((function t(){var n,r,i,a,c,h,p,v,m,b,x,w,k,E;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.splice(0,1),r=g(n,1),i=r[0],t.next=3,ect(i,e);case 3:if(a=t.sent,c=a.type,h=void 0===c?eH("G2Mark type is required."):c,p=a.key,!u.has(h)){t.next=9;break}f.push(a),t.next=22;break;case 9:if(v=s(h),m=v.props,void 0===(b=(void 0===m?{}:m).composite)||b){t.next=15;break}l.push(a),t.next=22;break;case 15:return x=a.data,w=Object.assign(Object.assign({},a),{data:x?Array.isArray(x)?x:x.value:x}),t.next=19,o(w,y);case 19:k=t.sent,E=Array.isArray(k)?k:[k],d.unshift.apply(d,M(E.map((function(t,e){return Object.assign(Object.assign({},t),{key:"".concat(p,"-").concat(e)})}))));case 22:case"end":return t.stop()}}),t)}));case 10:if(!d.length){n.next=14;break}return n.delegateYield(m(),"t0",12);case 12:n.next=10;break;case 14:return n.abrupt("return",Object.assign(Object.assign({},t),{marks:l,components:f}));case 15:case"end":return n.stop()}}),n)})))}function Iut(t,e){return Aut(this,void 0,void 0,Jn().mark((function n(){var r,i,a,o,s,u,c,l,f,d,h,p,v,y,m,b,x,w,k,E,O,S,M,T,A,P,N,C;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.library,i=G0("theme",r),a=g(i,1),o=a[0],s=G0("mark",r),u=g(s,2),c=u[1],l=t.theme,f=t.marks,d=t.coordinates,h=void 0===d?[]:d,p=o(Jut(l)),v=new Map,y=nr(f),n.prev=7,y.s();case 9:if((m=y.n()).done){n.next=19;break}return b=m.value,x=b.type,w=c(x),k=w.props,E=void 0===k?{}:k,n.next=15,Y0(b,E,e);case 15:(O=n.sent)&&(S=g(O,2),M=S[0],T=S[1],v.set(M,T));case 17:n.next=9;break;case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(7),y.e(n.t0);case 24:return n.prev=24,y.f(),n.finish(24);case 27:A=GV(Array.from(v.values()).flatMap((function(t){return t.channels})),(function(t){return t.scaleKey})),P=nr(A.values()),n.prev=29,C=Jn().mark((function t(){var e,n,i,a,o,s,u,c,l;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=N.value,n=e.reduce((function(t,e){var n=e.scale;return vd(t,n)}),{}),i=e[0].scaleKey,a=e[0].values,o=Array.from(new Set(a.map((function(t){return t.field})).filter(rH))),s=vd({guide:{title:0===o.length?void 0:o},field:o[0]},n),u=e[0].name,c=e.flatMap((function(t){return t.values.map((function(t){return t.value}))})),l=Object.assign(Object.assign({},E5(u,c,s,h,p,r)),{uid:Symbol("scale"),key:i}),e.forEach((function(t){return t.scale=l}));case 10:case"end":return t.stop()}}),t)})),P.s();case 32:if((N=P.n()).done){n.next=36;break}return n.delegateYield(C(),"t1",34);case 34:n.next=32;break;case 36:n.next=41;break;case 38:n.prev=38,n.t2=n.catch(29),P.e(n.t2);case 41:return n.prev=41,P.f(),n.finish(41);case 44:return n.abrupt("return",v);case 45:case"end":return n.stop()}}),n,null,[[7,21,24,27],[29,38,41,44]])})))}function Fut(t,e,n,r){var i=t.theme,a="string"==typeof e&&i[e]||{};return r(vd(a,Object.assign({type:e},n)))}function zut(t,e,n){var r,i=g(G0("mark",n),1)[0],a=g(G0("theme",n),1)[0],o=g(G0("labelTransform",n),1)[0],s=e.key,u=e.frame,c=void 0!==u&&u,l=e.theme,f=e.clip,d=e.style,h=void 0===d?{}:d,p=e.labelTransform,v=void 0===p?[]:p,y=a(Jut(l)),m=Array.from(t.values()),x=function(t,e){var n,r,i=e.components,a=void 0===i?[]:i,o=["scale","encode","axis","legend","data","transform"],s=Array.from(new Set(t.flatMap((function(t){return t.channels.map((function(t){return t.scale}))})))),u=new Map(s.map((function(t){return[t.name,t]}))),c=nr(a);try{for(c.s();!(r=c.n()).done;){var l,f=r.value,d=nr(T5(f));try{for(d.s();!(l=d.n()).done;){var h=l.value,p=u.get(h),v=(null===(n=f.scale)||void 0===n?void 0:n[h])||{},g=v.independent;if(!p||void 0!==g&&g){var y=Object.assign(Object.assign({},v),{expectedDomain:v.domain,name:h,guide:Lw(f,o)});s.push(y)}else{var m=p.guide,b="boolean"==typeof m?{}:m;p.guide=vd({},b,f),Object.assign(p,v)}}}catch(t){d.e(t)}finally{d.f()}}}catch(t){c.e(t)}finally{c.f()}return s}(m,e),w=function(t){return t.map((function(t){var e=vd(t,t.style);return delete e.style,e}))}(function(t,e,n){var r=e.coordinates,i=void 0===r?[]:r,a=e.title,o=g(G0("component",n),2)[1],s=t.filter((function(t){return null!==t.guide})),u=[],c=function(t,e,n){var r=g(G0("component",n),2)[1],i=t.coordinates;function a(t,e,n,a){var o=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return"x"===t?x5(n)?"".concat(e,"Y"):"".concat(e,"X"):"y"===t?x5(n)?"".concat(e,"X"):"".concat(e,"Y"):null}(e,t,i);if(a&&o){var s=r(o).props,u=s.defaultPosition,c=s.defaultSize,l=s.defaultOrder,f=g(s.defaultCrossPadding,1)[0];return Object.assign(Object.assign({position:u,defaultSize:c,order:l,type:o,crossPadding:f},a),{scales:[n]})}}return e.filter((function(t){return t.slider||t.scrollbar})).flatMap((function(t){var e=t.slider,n=t.scrollbar,r=t.name;return[a("slider",r,t,e),a("scrollbar",r,t,n)]})).filter((function(t){return!!t}))}(e,t,n);if(u.push.apply(u,M(c)),a){var l=o("title").props,f=l.defaultPosition,d=l.defaultOrientation,h=l.defaultOrder,p=l.defaultSize,v=l.defaultCrossPadding,y="string"==typeof a?{title:a}:a;u.push(Object.assign({type:"title",position:f,orientation:d,order:h,crossPadding:v[0],defaultSize:p},y))}var m=function(t,e){var n=t.filter((function(t){return function(t){if(!t||!t.type)return!1;if("function"==typeof t.type)return!0;var e=t.type,n=t.domain,r=t.range,i=t.interpolator,a=n&&n.length>0,o=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(e)&&a&&o)||!(!["sequential"].includes(e)||!a||!o&&!i)||!(!["constant","identity"].includes(e)||!o)}(t)}));return[].concat(M(function(t){var e=["shape","size","color","opacity"],n=t.filter((function(t){var n=t.type,r=t.name;return"string"==typeof n&&e.includes(r)&&!function(t,e){return"constant"===t&&"size"===e}(n,r)})),r=n.filter((function(t){return"constant"===t.type})),i=WV(n.filter((function(t){return"constant"!==t.type})),(function(t){return t.field?t.field:Symbol("independent")})).map((function(t){var e=g(t,2),n=e[0],i=e[1];return[n,[].concat(M(i),M(r))]})).filter((function(t){return g(t,2)[1].some((function(t){return"constant"!==t.type}))})),a=new Map(i);if(0===a.size)return[];var o=function(t){return t.sort((function(t,e){var n=g(t,1)[0],r=g(e,1)[0];return n.localeCompare(r)}))},s=Array.from(a).map((function(t){var e,n=function(t){if(1===t.length)return[t];for(var e=[],n=1;n<=t.length;n++)e.push.apply(e,M(PH(t,n)));return e}(g(t,2)[1]).sort((function(t,e){return e.length-t.length})),r=n.map((function(t){return{combination:t,option:t.map((function(t){return[t.name,uut(t)]}))}})),i=nr(r);try{for(i.s();!(e=i.n()).done;){var a=e.value,s=a.option,u=a.combination;if(!s.every((function(t){return"constant"===t[1]}))&&s.every((function(t){return"discrete"===t[1]||"constant"===t[1]})))return["legendCategory",u]}}catch(t){i.e(t)}finally{i.f()}var c,l=nr(tut);try{for(l.s();!(c=l.n()).done;){var f,d=g(c.value,2),h=d[0],p=d[1],v=nr(r);try{var y,m=function(){var t=f.value,e=t.option,n=t.combination;if(p.some((function(t){return pl(o(t),o(e))})))return{v:[h,n]}};for(v.s();!(f=v.n()).done;)if(y=m())return y.v}catch(t){v.e(t)}finally{v.f()}}}catch(t){l.e(t)}finally{l.f()}return null})).filter(rH);return s}(n)),M(function(t,e){return t.map((function(t){var n=t.name;if(function(t){return m5(t,"helix").length>0}(e)||w5(e))return null;if(x5(e)&&(b5(e)||k5(e)))return null;if(n.startsWith("x"))return b5(e)?["axisArc",[t]]:k5(e)?["axisLinear",[t]]:[x5(e)?"axisY":"axisX",[t]];if(n.startsWith("y"))return b5(e)?["axisLinear",[t]]:k5(e)?["axisArc",[t]]:[x5(e)?"axisX":"axisY",[t]];if(n.startsWith("z"))return["axisZ",[t]];if(n.startsWith("position")){if(function(t){return m5(t,"radar").length>0}(e))return["axisRadar",[t]];if(!b5(e))return["axisY",[t]]}return null})).filter(rH)}(n,e)))}(s,i);return m.forEach((function(t){var e,n=g(t,2),r=n[0],a=n[1],c=o(r).props,l=c.defaultPosition,f=c.defaultPlane,d=void 0===f?"xy":f,h=c.defaultOrientation,p=c.defaultSize,v=c.defaultOrder,y=c.defaultLength,m=c.defaultPadding,b=void 0===m?[0,0]:m,x=c.defaultCrossPadding,w=void 0===x?[0,0]:x,k=vd.apply(void 0,[{}].concat(M(a))),E=k.guide,O=k.field,S=nr(Array.isArray(E)?E:[E]);try{for(S.s();!(e=S.n()).done;){var T=e.value,A=g(lut(r,l,h,T,a,s,i),2),P=A[0],N=A[1];if(P||N){var C="left"===P||"right"===P,_=C?b[1]:b[0],L=C?w[1]:w[0],R=T.size,j=T.order,D=void 0===j?v:j,I=T.length,F=void 0===I?y:I,z=T.padding,B=void 0===z?_:z,G=T.crossPadding,W=void 0===G?L:G;u.push(Object.assign(Object.assign({title:O},T),{defaultSize:p,length:F,position:P,plane:d,orientation:N,padding:B,order:D,crossPadding:W,size:R,type:r,scales:a}))}}}catch(t){S.e(t)}finally{S.f()}})),u}(function(t,e,n){var r,i,a=nr(n.entries());try{for(a.s();!(i=a.n()).done;)if("cell"===g(i.value,1)[0].type)return t.filter((function(t){return"shape"!==t.name}))}catch(t){a.e(t)}finally{a.f()}if(1!==e.length||t.some((function(t){return"shape"===t.name})))return t;var o=e[0].defaultShape;if(!["point","line","rect","hollow"].includes(o))return t;var s=(null===(r=t.find((function(t){return"color"===t.name})))||void 0===r?void 0:r.field)||null,u={field:s,name:"shape",type:"constant",domain:[],range:[{point:"point",line:"hyphen",rect:"square",hollow:"hollow"}[o]]};return[].concat(M(t),[u])}(Array.from(x),m,t),e,n)),k=function(t,e,n,r){var i,a,o=function(t,e,n,r){var i=e.coordinates;if(!b5(i)&&!k5(i))return e;var a=t.filter((function(t){return"string"==typeof t.type&&t.type.startsWith("axis")}));if(0===a.length)return e;var o=a.map((function(t){return kut(t,"axisArc"===t.type?"arc":"linear",n)})),s=ZX(o,(function(t){var e;return null!==(e=t.labelSpacing)&&void 0!==e?e:0})),u=ZX(a.flatMap((function(t,e){return xut(o[e],but(t,r))})).filter(rH),(function(t){return t.height}))+s,c=a.flatMap((function(t,e){return wut(o[e])})).filter((function(t){return null!==t})),l=0===c.length?0:ZX(c,(function(t){return t.height})),f=e.inset,d=void 0===f?u:f,h=e.insetLeft,p=void 0===h?d:h,v=e.insetBottom,g=void 0===v?d:v,y=e.insetTop,m=void 0===y?d+l:y,b=e.insetRight,x=void 0===b?d:b;return Object.assign(Object.assign({},e),{insetLeft:p,insetBottom:g,insetTop:m,insetRight:x})}(t,e,n,r),s=o.width,u=o.height,c=o.depth,l=o.x,f=void 0===l?0:l,d=o.y,h=void 0===d?0:d,p=o.z,v=void 0===p?0:p,y=o.inset,m=void 0===y?null!==(i=n.inset)&&void 0!==i?i:0:y,b=o.insetLeft,x=void 0===b?m:b,w=o.insetTop,k=void 0===w?m:w,E=o.insetBottom,O=void 0===E?m:E,S=o.insetRight,M=void 0===S?m:S,T=o.margin,A=void 0===T?null!==(a=n.margin)&&void 0!==a?a:0:T,P=o.marginLeft,N=void 0===P?A:P,C=o.marginBottom,_=void 0===C?A:C,L=o.marginTop,R=void 0===L?A:L,j=o.marginRight,D=void 0===j?A:j,I=o.padding,F=void 0===I?n.padding:I,z=o.paddingBottom,B=void 0===z?F:z,G=o.paddingLeft,W=void 0===G?F:G,V=o.paddingRight,H=void 0===V?F:V,Y=o.paddingTop,U=void 0===Y?F:Y,q=function(t,n,r,i,a){if(0===e.marks.length)return[i,a];if(t-i-a-.25*t>0)return[i,a];var o=.75*t;return["auto"===n?o*i/(i+a):i,"auto"===r?o*a/(i+a):a]},X=function(t){return"auto"===t?20:null!=t?t:20},K=X(U),$=X(B),Z=Mut(t,u-K-$,[K+R,$+_],["left","right"],e,n,r),Q=s-N-D,J=g(q(Q,W,H,Z.paddingLeft,Z.paddingRight),2),tt=J[0],et=J[1],nt=Q-tt-et,rt=Mut(t,nt,[tt+N,et+D],["bottom","top"],e,n,r),it=rt.paddingTop,at=u-_-R,ot=g(q(at,B,U,rt.paddingBottom,it),2),st=ot[0],ut=ot[1];return{width:s,height:u,depth:c,insetLeft:x,insetTop:k,insetBottom:O,insetRight:M,innerWidth:nt,innerHeight:at-st-ut,paddingLeft:tt,paddingRight:et,paddingTop:ut,paddingBottom:st,marginLeft:N,marginBottom:_,marginTop:R,marginRight:D,x:f,y:h,z:v}}(w,e,y,n),E=function(t,e,n){var r,i=g(G0("coordinate",n),1)[0],a=t.innerHeight,o=t.innerWidth,s=t.insetLeft,u=t.insetTop,c=t.insetRight,l=t.insetBottom,f=e.coordinates,d=(r=void 0===f?[]:f).find((function(t){return"cartesian"===t.type||"cartesian3D"===t.type}))?r:[].concat(M(r),[{type:"cartesian"}]),h="cartesian3D"===d[0].type,p=Object.assign(Object.assign({},t),{x:s,y:u,width:o-s-c,height:a-l-u,transformations:d.flatMap(i)});return h?new v5(p):new d5(p)}(k,e,n),O=c?vd({mainLineWidth:1,mainStroke:"#000"},h):h;(function(t,e,n){var r,i=GV(t,(function(t){return"".concat(t.plane||"xy","-").concat(t.position)})),a=n.paddingLeft,o=n.paddingRight,s=n.paddingTop,u=n.paddingBottom,c=n.marginLeft,l=n.marginTop,f=n.marginBottom,d=n.marginRight,h=n.innerHeight,p=n.innerWidth,v=n.insetBottom,y=n.insetLeft,m=n.insetRight,x=n.insetTop,w=n.height,k=n.width,E=n.depth,O={xy:Tut({width:k,height:w,paddingLeft:a,paddingRight:o,paddingTop:s,paddingBottom:u,marginLeft:c,marginTop:l,marginBottom:f,marginRight:d,innerHeight:h,innerWidth:p,insetBottom:v,insetLeft:y,insetRight:m,insetTop:x}),yz:Tut({width:E,height:w,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:E,innerHeight:w,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:Tut({width:k,height:E,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:k,innerHeight:E,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})},S=nr(i.entries());try{var M=function(){var t=g(r.value,2),n=t[0],i=t[1],a=g(n.split("-"),2),o=a[0],s=a[1],u=O[o][s],c=g(AH(i,(function(t){return"string"==typeof t.type&&("center"===s||!(!t.type.startsWith("axis")||!["inner","outer"].includes(s)))})),2),l=c[0],f=c[1];l.length&&function(t,e,n,r){var i=g(AH(t,(function(t){return!("string"!=typeof t.type||!t.type.startsWith("axis"))})),2),a=i[0],o=i[1];(function(t,e,n,r){"center"===r?function(t){return fD(t)&&uD(t)}(e)?function(t,e,n){var r,i=g(n,4),a=i[0],o=i[1],s=i[2],u=i[3],c=nr(t);try{for(c.s();!(r=c.n()).done;){var l=r.value;l.bbox={x:a,y:o,width:s,height:u},l.radar={index:t.indexOf(l),count:t.length}}}catch(t){c.e(t)}finally{c.f()}}(t,0,n):uD(e)?function(t,e,n){var r,i=g(n,4),a=i[0],o=i[1],s=i[2],u=i[3],c=nr(t);try{for(c.s();!(r=c.n()).done;)r.value.bbox={x:a,y:o,width:s,height:u}}catch(t){c.e(t)}finally{c.f()}}(t,0,n):fD(e)&&function(t,e,n,r){"horizontal"===r?function(t,e,n){for(var r=g(n,3),i=r[0],a=r[1],o=r[2],s=new Array(t.length).fill(0),u=e.map(s).filter((function(t,e){return e%2==1})).map((function(t){return t+a})),c=0;c<t.length;c++){var l=t[c],f=u[c],d=u[c+1]-f;l.bbox={x:i,y:f,width:o,height:d}}}(t,e,n):"vertical"===r&&function(t,e,n){for(var r=g(n,4),i=r[0],a=r[1],o=r[3],s=new Array(t.length).fill(0),u=e.map(s).filter((function(t,e){return e%2==0})).map((function(t){return t+i})),c=0;c<t.length;c++){var l=t[c],f=u[c],d=u[c+1]-f;l.bbox={x:f,y:a,width:d,height:o}}}(t,e,n)}(t,e,n,t[0].orientation):"inner"===r?function(t,e,n){for(var r=g(n,4),i=r[0],a=r[1],o=r[3],s=g(e.getCenter(),2),u=s[0],c=s[1],l=g(pD(e),1)[0]*(o/2),f=u-l,d=c-l,h=0;h<t.length;h++)t[h].bbox={x:i+f,y:a+d,width:2*l,height:2*l}}(t,e,n):"outer"===r&&function(t,e,n){var r,i=g(n,4),a=i[0],o=i[1],s=i[2],u=i[3],c=nr(t);try{for(c.s();!(r=c.n()).done;)r.value.bbox={x:a,y:o,width:s,height:u}}catch(t){c.e(t)}finally{c.f()}}(t,0,n)})(a,e,n,r),function(t,e,n){if(0!==t.length)for(var r=g(n,4),i=r[0],a=r[1],o=r[2],s=r[3],u=s/2*g(pD(e),1)[0]/Math.sqrt(2),c=i+o/2,l=a+s/2,f=0;f<t.length;f++)t[f].bbox={x:c-u,y:l-u,width:2*u,height:2*u}}(o,e,n)}(l,e,u,s),f.length&&function(t,e,n){var r=g(n,9),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],l=r[6],f=r[7],d=r[8],h=g("vertical"===u?["y",a,"x",i,"height",s,"width",o]:["x",i,"y",a,"width",o,"height",s],8),p=h[0],v=h[1],y=h[2],m=h[3],x=h[4],w=h[5],k=h[6],E=h[7];t.sort((function(t,e){return null==l?void 0:l(t.order,e.order)}));for(var O=function(t){return"title"===t||"group"===t||t.startsWith("legend")},S=function(t,e,n){return void 0===n?e:O(t)?n:e},M=function(t,e,n){return void 0===n?e:O(t)?n:e},T=0,A=c?v+w:v;T<t.length;T++){var P=t[T],N=P.crossPadding,C=void 0===N?0:N,_=P.type,L=P.size;P.bbox=b(b(b(b({},p,c?A-L-C:A+C),y,M(_,m,f)),x,L),k,S(_,E,d)),A+=(L+C)*(c?-1:1)}var R,j=t.filter((function(t){return"group"===t.type})),D=nr(j);try{var I=function(){for(var t=R.value,e=t.bbox,n=t.children,r=e[k],i=r/n.length,a=n.reduce((function(t,e){var n;return(null===(n=e.layout)||void 0===n?void 0:n.justifyContent)||t}),"flex-start"),o=n.map((function(t,e){var r=t.length,a=void 0===r?i:r,o=t.padding,s=void 0===o?0:o;return a+(e===n.length-1?0:s)})),s=r-E9(o),u="flex-start"===a?0:"center"===a?s/2:s,c=0,l=e[y]+u;c<n.length;c++){var f=n[c],d=f.padding,h=void 0===d?0:d,v=c===n.length-1?0:h;f.bbox=b(b(b(b({},x,e[x]),p,e[p]),y,l),k,o[c]-v),vd(f,{layout:{justifyContent:a}}),l+=o[c]}};for(D.s();!(R=D.n()).done;)I()}catch(t){D.e(t)}finally{D.f()}}(i,0,u)};for(S.s();!(r=S.n()).done;)M()}catch(t){S.e(t)}finally{S.f()}})(sut(w),E,k),function(t){var e=t.find((function(t){return"axisX"===t.type})),n=t.find((function(t){return"axisY"===t.type})),r=t.find((function(t){return"axisZ"===t.type}));e&&n&&r&&(e.plane="xy",n.plane="xy",r.plane="yz",r.origin=[e.bbox.x,e.bbox.y,0],r.eulerAngles=[0,-90,0],r.bbox.x=e.bbox.x,r.bbox.y=e.bbox.y,t.push(Object.assign(Object.assign({},e),{plane:"xz",showLabel:!1,showTitle:!1,origin:[e.bbox.x,e.bbox.y,0],eulerAngles:[-90,0,0]})),t.push(Object.assign(Object.assign({},n),{plane:"yz",showLabel:!1,showTitle:!1,origin:[n.bbox.x+n.bbox.width,n.bbox.y,0],eulerAngles:[0,-90,0]})),t.push(Object.assign(Object.assign({},r),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]})))}(w);var S=new Map(Array.from(t.values()).flatMap((function(t){return t.channels.map((function(t){var e=t.scale;return[e.uid,S5(e,n)]}))})));!function(t,e){var n=Array.from(t.values()).flatMap((function(t){return t.channels})),r=HV(n,(function(t){return t.map((function(t){return e.get(t.scale.uid)}))}),(function(t){return t.name})).filter((function(t){var e=g(t,2)[1];return e.some((function(t){return"function"==typeof t.getOptions().groupTransform}))&&e.every((function(t){return t.getTicks}))})).map((function(t){return t[1]}));r.forEach((function(t){var e=t.map((function(t){return t.getOptions().groupTransform}))[0];e(t)}))}(t,S);var T,A={},P=nr(w);try{for(P.s();!(T=P.n()).done;){var N,C=T.value,_=C.scales,L=[],R=nr(void 0===_?[]:_);try{for(R.s();!(N=R.n()).done;){var j=N.value,D=j.name,I=j.uid,F=null!==(r=S.get(I))&&void 0!==r?r:S5(j,n);L.push(F),"y"===D&&F.update(Object.assign(Object.assign({},F.getOptions()),{xScale:A.x})),O5(A,b({},D,F))}}catch(t){R.e(t)}finally{R.f()}C.scaleInstances=L}}catch(t){P.e(t)}finally{P.f()}var z,B=[],G=nr(t.entries());try{var W=function(){var t=g(z.value,2),e=t[0],n=t[1],r=e.children,a=e.dataDomain,o=e.modifier,u=e.key,c=n.index,l=n.channels,f=n.tooltip,d=OH(Object.fromEntries(l.map((function(t){return[t.name,t.scale]}))),(function(t){var e=t.uid;return S.get(e)}));O5(A,d);var h=function(t,e){var n,r={},i=nr(t);try{var a=function(){var t,i=n.value,a=i.values,o=i.name,s=e[o],u=nr(a);try{for(u.s();!(t=u.n()).done;){var c=t.value,l=c.name,f=c.value;r[l]=f.map((function(t){return s.map(t)}))}}catch(t){u.e(t)}finally{u.f()}};for(i.s();!(n=i.n()).done;)a()}catch(t){i.e(t)}finally{i.f()}return r}(l,d),p=function(t){var e=g(t,3),n=e[0],r=e[1],i=e[2];if(i)return[n,r,i];for(var a=[],o=[],s=0;s<n.length;s++){var u=n[s],c=r[s];c.every((function(t){var e=g(t,2),n=e[0],r=e[1];return rH(n)&&rH(r)}))&&(a.push(u),o.push(c))}return[a,o]}(i(e)(c,d,h,E)),v=g(p,3),y=v[0],m=v[1],b=v[2],x=a||y.length,w=o?o(m,x,k):[],O=function(t){var e,n;return null===(n=null===(e=f.title)||void 0===e?void 0:e[t])||void 0===n?void 0:n.value},T=function(t){return f.items.map((function(e){return e[t]}))},P=y.map((function(t,e){for(var n=Object.assign({points:m[e],transform:w[e],index:t,markKey:u,viewKey:s},f&&{title:O(t),items:T(t)}),r=function(){var r=g(a[i],2),o=r[0],s=r[1];n[o]=s[t],b&&(n["series".concat(ll(o))]=b[e].map((function(t){return s[t]})))},i=0,a=Object.entries(h);i<a.length;i++)r();return b&&(n.seriesIndex=b[e]),b&&f&&(n.seriesItems=b[e].map((function(t){return T(t)})),n.seriesTitle=b[e].map((function(t){return O(t)}))),n}));n.data=P,n.index=y;var N=null==r?void 0:r(P,d,k);B.push.apply(B,M(N||[]))};for(G.s();!(z=G.n()).done;)W()}catch(t){G.e(t)}finally{G.f()}return[{layout:k,theme:y,coordinate:E,markState:t,key:s,clip:f,scale:A,style:O,components:w,labelTransform:QV(v.map(o))},B]}function But(t,e,n,r){return Aut(this,void 0,void 0,Jn().mark((function i(){var a,o,s,u,c,l,f,d,h,p,v,y,m,b,x,w,k,E,O,S,T,A,P,N,C,_,L,R,j,D,I,F,z;return Jn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=r.library,o=t.components,s=t.theme,u=t.layout,c=t.markState,l=t.coordinate,f=t.key,d=t.style,h=t.clip,p=t.scale,u.x,u.y,v=u.width,y=u.height,m=Put(u,["x","y","width","height"]),x=(b=["view","plot","main","content"]).map((function(t,e){return e})),w=["a","margin","padding","inset"],k=b.map((function(t){return aH(Object.assign({},s.view,d),t)})),E=w.map((function(t){return iH(m,t)})),O=function(t){return t.style("x",(function(t){return N[t].x})).style("y",(function(t){return N[t].y})).style("width",(function(t){return N[t].width})).style("height",(function(t){return N[t].height})).each((function(t,e,n){uct(fH(n),k[t])}))},S=0,T=0,A=v,P=y,N=x.map((function(t){var e=E[t],n=e.left,r=void 0===n?0:n,i=e.top,a=void 0===i?0:i,o=e.bottom,s=void 0===o?0:o,u=e.right;return{x:S+=r,y:T+=a,width:A-=r+(void 0===u?0:u),height:P-=a+s}})),e.selectAll(oct(oJ)).data(x.filter((function(t){return rH(k[t])})),(function(t){return b[t]})).join((function(t){return t.append("rect").attr("className",oJ).style("zIndex",-2).call(O)}),(function(t){return t.call(O)}),(function(t){return t.remove()})),C=Vut(c),_=!!C&&{duration:C[1]},L=nr(WV(o,(function(t){return"".concat(t.type,"-").concat(t.position)})));try{for(L.s();!(R=L.n()).done;)g(R.value,2)[1].forEach((function(t,e){return t.index=e}))}catch(t){L.e(t)}finally{L.f()}j=e.selectAll(oct(iJ)).data(o,(function(t){return"".concat(t.type,"-").concat(t.position,"-").concat(t.index)})).join((function(t){return t.append("g").style("zIndex",(function(t){return t.zIndex||-1})).attr("className",iJ).append((function(t){return out(vd({animate:_,scale:p},t),l,s,a,c)}))}),(function(t){return t.transition((function(t,e,n){var r=t.preserve;if(void 0===r||!r){var i=out(vd({animate:_,scale:p},t),l,s,a,c).attributes;return g(n.childNodes,1)[0].update(i,!1)}}))})).transitions(),n.push.apply(n,M(j.flat().filter(rH))),D=e.selectAll(oct(rJ)).data([u],(function(){return f})).join((function(t){return t.append("rect").style("zIndex",0).style("fill","transparent").attr("className",rJ).call(nct).call(act,Array.from(c.keys())).call(sct,h)}),(function(t){return t.call(act,Array.from(c.keys())).call((function(t){return C?rct(t,C):nct(t)})).call(sct,h)})).transitions(),n.push.apply(n,M(D.flat())),I=nr(c.entries()),i.prev=24,z=Jn().mark((function i(){var o,s,u,c,l,f,d,h,p,v,y,m,b,x;return Jn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:o=g(F.value,2),s=o[0],u=o[1],c=u.data,l=s.key,f=s.class,d=s.type,h=e.select("#".concat(l)),p=Uut(s,u,t,r),v=Kut(s,u,t,a),y=Zut(s,u,t,a),m=Qut(s,u,t,a),b=Hut(e,h,f,"element"),x=h.selectAll(oct(eJ)).selectFacetAll(b).data(c,(function(t){return t.key}),(function(t){return t.groupKey})).join((function(t){return t.append(p).attr("className",eJ).attr("markType",d).transition((function(t,e,n){return v(t,[n])}))}),(function(t){return t.call((function(t){var e,n,r=t.parent(),i=(e=function(t){var e=g(t.getBounds().min,2);return[e[0],e[1]]},n=new Map,function(t){if(n.has(t))return n.get(t);var r=e(t);return n.set(t,r),r});t.transition((function(t,e,n){Yut(n,r,i);var a=p(t,e),o=y(t,[n],[a]);return(null==o?void 0:o.length)||(n.nodeName===a.nodeName&&"g"!==a.nodeName?nH(n,a):(n.parentNode.replaceChild(a,n),a.className=eJ,a.markType=d,a.__data__=n.__data__)),o})).attr("markType",d).attr("className",eJ)}))}),(function(t){return t.each((function(t,e,n){n.__removed__=!0})).transition((function(t,e,n){return m(t,[n])})).remove()}),(function(t){return t.append(p).attr("className",eJ).attr("markType",d).transition((function(t,e,n){var r=n.__fromElements__,i=y(t,r,[n]);return new dH(r,null,n.parentNode).transition(i).remove(),i}))}),(function(t){return t.transition((function(t,e,n){var r=new dH([],n.__toData__,n.parentNode).append(p).attr("className",eJ).attr("markType",d).nodes();return y(t,[n],r)})).remove()})).transitions(),n.push.apply(n,M(x.flat()));case 11:case"end":return i.stop()}}),i)})),I.s();case 27:if((F=I.n()).done){i.next=31;break}return i.delegateYield(z(),"t0",29);case 29:i.next=27;break;case 31:i.next=36;break;case 33:i.prev=33,i.t1=i.catch(24),I.e(i.t1);case 36:return i.prev=36,I.f(),i.finish(36);case 39:Gut(t,e,0,a,r);case 40:case"end":return i.stop()}}),i,null,[[24,33,36,39]])})))}function Gut(t,e,n,r,i){var a,o=g(G0("labelTransform",r),1)[0],s=t.markState,u=t.labelTransform,c=e.select(oct(tJ)).node(),l=new Map,f=new Map,d=Array.from(s.entries()).flatMap((function(n){var a=g(n,2),o=a[0],s=a[1],u=o.labels,c=void 0===u?[]:u,d=o.key,h=function(t,e,n,r,i){var a=g(G0("shape",r),1)[0],o=t.data,s=t.encode,u=e.data,c=e.defaultLabelShape,l=u.map((function(t){return t.points})),f=OH(s,(function(t){return t.value})),d=n.theme,h=n.coordinate,p=Object.assign(Object.assign({},i),{document:W0(i),theme:d,coordinate:h});return function(t){var e=t.index,n=t.points,r=o[e],i=t.formatter,s=void 0===i?function(t){return"".concat(t)}:i,u=(t.transform,t.style),h=t.render,v=(t.selector,t.element),g=Put(t,["formatter","transform","style","render","selector","element"]),y=OH(Object.assign(Object.assign({},g),u),(function(t){return Wut(t,r,e,o,{channel:f,element:v})})),m=y.shape,b=void 0===m?c:m,x=y.text,w=Put(y,["shape","text"]),k="string"==typeof s?sZ(s):s,E=Object.assign(Object.assign({},w),{text:k(x,r,e,o),datum:r}),O=Object.assign({type:"label.".concat(b),render:h},w);return a(O,p)(n,E,qut(d,"label",b,"label"),l)}}(o,s,t,r,i),p=e.select("#".concat(d)).selectAll(oct(eJ)).nodes().filter((function(t){return!t.__removed__}));return c.flatMap((function(t,e){t.transform;var n=Put(t,["transform"]);return p.flatMap((function(r){var i=function(t,e,n){var r=n.__data__,i=r.seriesIndex,a=r.seriesKey,o=r.points,s=r.key,u=r.index,c=function(t){var e=t.cloneNode(),n=t.getAnimations();e.style.visibility="hidden",n.forEach((function(t){var n=t.effect.getKeyframes();e.attr(n[n.length-1])})),t.parentNode.appendChild(e);var r=e.getLocalBounds();return e.destroy(),[r.min,r.max]}(n);if(!i)return[Object.assign(Object.assign({},t),{key:"".concat(s,"-").concat(e),bounds:c,index:u,points:o,dependentElement:n})];var l=function(t){var e=t.selector;if(!e)return null;if("function"==typeof e)return e;if("first"===e)return function(t){return[t[0]]};if("last"===e)return function(t){return[t[t.length-1]]};throw new Error("Unknown selector: ".concat(e))}(t),f=i.map((function(r,i){return Object.assign(Object.assign({},t),{key:"".concat(a[i],"-").concat(e),bounds:[o[i]],index:r,points:o,dependentElement:n})}));return l?l(f):f}(n,e,r);return i.forEach((function(e){l.set(e,(function(t){return h(Object.assign(Object.assign({},t),{element:r}))})),f.set(e,t)})),i}))}))})),h=fH(c).selectAll(oct(aJ)).data(d,(function(t){return t.key})).join((function(t){return t.append((function(t){return l.get(t)(t)})).attr("className",aJ)}),(function(t){return t.each((function(t,e,n){nH(n,l.get(t)(t))}))}),(function(t){return t.remove()})).nodes(),p=GV(h,(function(t){return f.get(t.__data__)})),v=t.coordinate,y=t.layout,m={canvas:i.canvas,coordinate:v,layout:y},b=nr(p);try{for(b.s();!(a=b.n()).done;){var x=g(a.value,2),w=x[0],k=x[1],E=w.transform;QV((void 0===E?[]:E).map(o))(k,m)}}catch(t){b.e(t)}finally{b.f()}u&&u(h,m)}function Wut(t,e,n,r,i){return"function"==typeof t?t(e,n,r,i):"string"!=typeof t?t:uH(e)&&void 0!==e[t]?e[t]:t}function Vut(t){var e,n=-1/0,r=1/0,i=nr(t);try{for(i.s();!(e=i.n()).done;){var a,o=g(e.value,2),s=o[0],u=o[1],c=s.animate,l=void 0===c?{}:c,f=u.data,d=l.enter,h=void 0===d?{}:d,p=l.update,v=void 0===p?{}:p,y=l.exit,m=void 0===y?{}:y,b=v.type,x=v.duration,w=void 0===x?300:x,k=v.delay,E=void 0===k?0:k,O=h.type,S=h.duration,M=void 0===S?300:S,T=h.delay,A=void 0===T?0:T,P=m.type,N=m.duration,C=void 0===N?300:N,_=m.delay,L=void 0===_?0:_,R=nr(f);try{for(R.s();!(a=R.n()).done;){var j=a.value,D=j.updateType,I=void 0===D?b:D,F=j.updateDuration,z=void 0===F?w:F,B=j.updateDelay,G=void 0===B?E:B,W=j.enterType,V=void 0===W?O:W,H=j.enterDuration,Y=void 0===H?M:H,U=j.enterDelay,q=void 0===U?A:U,X=j.exitDuration,K=void 0===X?C:X,$=j.exitDelay,Z=void 0===$?L:$,Q=j.exitType,J=void 0===Q?P:Q;(void 0===I||I)&&(n=Math.max(n,z+G),r=Math.min(r,G)),(void 0===J||J)&&(n=Math.max(n,K+Z),r=Math.min(r,Z)),(void 0===V||V)&&(n=Math.max(n,Y+q),r=Math.min(r,q))}}catch(t){R.e(t)}finally{R.f()}}}catch(t){i.e(t)}finally{i.f()}return n===-1/0?null:[r,n-r]}function Hut(t,e,n,r){return t.node().parentElement.findAll((function(t){return void 0!==t.style.facet&&t.style.facet===n&&t!==e.node()})).flatMap((function(t){return t.getElementsByClassName(r)}))}function Yut(t,e,n){if(t.__facet__){var r=t.parentNode.parentNode,i=e.parentNode,a=g(n(r),2),o=a[0],s=a[1],u=g(n(i),2),c=u[0],l=u[1];!function(t,e){var n=t.style.transform,r=function(t){return"none"===t||void 0===t}(n)?"":n;t.style.transform="".concat(r," ").concat(e).trimStart()}(t,"translate(".concat(o-c,", ").concat(s-l,")")),e.append(t)}}function Uut(t,e,n,r){var i=g(G0("shape",r.library),1)[0],a=t.data,o=t.encode,s=e.defaultShape,u=e.data,c=e.shape,l=OH(o,(function(t){return t.value})),f=u.map((function(t){return t.points})),d=n.theme,h=n.coordinate,p=t.type,v=t.style,y=void 0===v?{}:v,m=Object.assign(Object.assign({},r),{document:W0(r),coordinate:h,theme:d});return function(e){var n=y.shape,r=void 0===n?s:n,o=e.shape,u=void 0===o?r:o,h=e.points,v=e.seriesIndex,g=e.index,b=Put(e,["shape","points","seriesIndex","index"]),x=Object.assign(Object.assign({},b),{index:g}),w=v?v.map((function(t){return a[t]})):a[g],k=v||g,E=OH(y,(function(t){return Wut(t,w,k,a,{channel:l})}));return(c[u]?c[u](E,m):i(Object.assign(Object.assign({},E),{type:ict(t,u)}),m))(h,x,qut(d,p,u,s),f)}}function qut(t,e,n,r){if("string"==typeof e){var i=t.color,a=t[e]||{},o=a[n]||a[r];return Object.assign({color:i},o)}}function Xut(t,e,n,r,i){var a,o,s=g(G0("shape",i),2)[1],u=g(G0("animation",i),1)[0],c=n.defaultShape,l=n.shape,f=r.theme,d=r.coordinate,h=ll(t),p="default".concat(h,"Animation"),v=((null===(a=l[c])||void 0===a?void 0:a.props)||s(ict(e,c)).props)[p],y=f[t],m=void 0===y?{}:y,b=(null===(o=e.animate)||void 0===o?void 0:o[t])||{},x={coordinate:d};return function(e,n,r){var i=e["".concat(t,"Type")],a=e["".concat(t,"Delay")],o=e["".concat(t,"Duration")],s=e["".concat(t,"Easing")],c=Object.assign({type:i||v},b);if(!c.type)return null;var l=u(c,x)(n,r,vd(m,{delay:a,duration:o,easing:s}));return(Array.isArray(l)?l:[l]).filter(Boolean)}}function Kut(t,e,n,r){return Xut("enter",t,e,n,r)}function $ut(t){return t.finished.then((function(){t.cancel()})),t}function Zut(t,e,n,r){return Xut("update",t,e,n,r)}function Qut(t,e,n,r){return Xut("exit",t,e,n,r)}function Jut(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("string"==typeof t)return{type:t};var e=t.type,n=void 0===e?"light":e,r=Put(t,["type"]);return Object.assign(Object.assign({},r),{type:n})}function tct(t){var e=t.interaction,n=void 0===e?{}:e;return Object.entries(vd({event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},n)).reverse()}function ect(t,e){return Aut(this,void 0,void 0,Jn().mark((function n(){var r,i,a,o,s;return Jn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.data,i=Put(t,["data"]),null!=r){n.next=3;break}return n.abrupt("return",t);case 3:return n.next=5,V5([],{data:r},e);case 5:return a=n.sent,o=g(a,2),s=o[1].data,n.abrupt("return",Object.assign({data:s},i));case 9:case"end":return n.stop()}}),n)})))}function nct(t){t.style("transform",(function(t){return"translate(".concat(t.paddingLeft+t.marginLeft,", ").concat(t.paddingTop+t.marginTop,")")})).style("width",(function(t){return t.innerWidth})).style("height",(function(t){return t.innerHeight}))}function rct(t,e){var n=g(e,2),r=n[0],i=n[1];t.transition((function(t,e,n){var a=n.style,o=a.transform,s=a.width,u=a.height,c=t.paddingLeft,l=t.paddingTop,f=t.innerWidth,d=t.innerHeight,h=t.marginLeft,p=t.marginTop,v=[{transform:o,width:s,height:u},{transform:"translate(".concat(c+h,", ").concat(l+p,")"),width:f,height:d}];return n.animate(v,{delay:r,duration:i,fill:"both"})}))}function ict(t,e){var n=t.type;return"string"==typeof e?"".concat(n,".").concat(e):e}function act(t,e){var n=function(t){return void 0!==t.class?"".concat(t.class):""};0!==t.nodes().length&&(t.selectAll(oct(JQ)).data(e,(function(t){return t.key})).join((function(t){return t.append("g").attr("className",JQ).attr("id",(function(t){return t.key})).style("facet",n).style("fill","transparent").style("zIndex",(function(t){var e;return null!==(e=t.zIndex)&&void 0!==e?e:0}))}),(function(t){return t.style("facet",n).style("fill","transparent").style("zIndex",(function(t){var e;return null!==(e=t.zIndex)&&void 0!==e?e:0}))}),(function(t){return t.remove()})),t.select(oct(tJ)).node()||t.append("g").attr("className",tJ).style("zIndex",0))}function oct(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.map((function(t){return".".concat(t)})).join("")}function sct(t,e){t.node()&&t.style("clipPath",(function(t){if(!e)return null;var n=t.paddingTop,r=t.paddingLeft,i=t.marginLeft,a=t.marginTop,o=t.innerWidth,s=t.innerHeight;return new EW({style:{x:r+i,y:n+a,width:o,height:s}})}))}function uct(t,e){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=g(r[n],2),a=i[0],o=i[1];t.style(a,o)}}function cct(t){var e=t.style,n=t.scale,r=t.type,i={},a=ch(e,"columnWidthRatio");return a&&"interval"===r&&(i.x=Object.assign(Object.assign({},null==n?void 0:n.x),{padding:1-a})),Object.assign(Object.assign({},t),{scale:Object.assign(Object.assign({},n),i)})}function lct(t){var e=function(t){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}}(cct)(t)}(t);return e.children&&Array.isArray(e.children)&&(e.children=e.children.map((function(t){return lct(t)}))),e}function fct(t){for(var e=vd({},t),n=new Map([[e,null]]),r=new Map([[null,-1]]),i=[e];i.length;){var a=i.shift();if(void 0===a.key){var o=n.get(a),s=r.get(a),u=null===o?"".concat(0):"".concat(o.key,"-").concat(s);a.key=u}var c=a.children,l=void 0===c?[]:c;if(Array.isArray(l))for(var f=0;f<l.length;f++){var d=vd({},l[f]);l[f]=d,n.set(d,a),r.set(d,f),i.push(d)}}return e}function dct(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){throw t},i=Jst(t),a=i.width,o=void 0===a?640:a,s=i.height,u=void 0===s?480:s,c=i.depth,l=void 0===c?0:c,f=fct(lct(i)),d=e.canvas,h=void 0===d?function(t,e){var n=new xst;return n.registerPlugin(new Ost),new BW({width:t,height:e,container:document.createElement("div"),renderer:n})}(o,u):d,p=e.emitter,v=void 0===p?new Ug:p;e.library,e.canvas=h,e.emitter=v;var y=h.getConfig(),m=y.width,b=y.height;m===o&&b===u||h.resize(o,u),v.emit(I0.BEFORE_RENDER);var x,w=fH(h.document.documentElement);return h.ready.then((function(){return Nut(Object.assign(Object.assign({},f),{width:o,height:u,depth:l}),w,e)})).then((function(){if(l){var t=g(h.document.documentElement.getPosition(),2),e=t[0],r=t[1];h.document.documentElement.setPosition(e,r,-l/2)}h.requestAnimationFrame((function(){h.requestAnimationFrame((function(){v.emit(I0.AFTER_RENDER),null==n||n()}))}))})).catch((function(t){null==r||r(t)})),"string"==typeof(x=h.getConfig().container)?document.getElementById(x):x}function hct(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){throw t},a=t.width,o=void 0===a?640:a,s=t.height,u=void 0===s?480:s,c=fct(t),l=n.group,f=void 0===l?new fW:l,d=n.emitter,h=void 0===d?new Ug:d;n.library,(null==f?void 0:f.parentElement)||eH("renderToMountedElement can't render chart to unmounted group.");var p=fH(f);return n.group=f,n.emitter=h,n.canvas=n.canvas||(null===(e=null==f?void 0:f.ownerDocument)||void 0===e?void 0:e.defaultView),h.emit(I0.BEFORE_RENDER),Nut(Object.assign(Object.assign({},c),{width:o,height:u}),p,n).then((function(){var t;null===(t=n.canvas)||void 0===t||t.requestAnimationFrame((function(){h.emit(I0.AFTER_RENDER),null==r||r()}))})).catch((function(t){null==i||i(t)})),f}function pct(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.canvas,i=e.emitter;r&&(function(t){var e=t.getRoot().querySelectorAll(".".concat(nJ));null==e||e.forEach((function(t){var e=t.nameInteraction,n=void 0===e?new Map:e;(null==n?void 0:n.size)>0&&Array.from(null==n?void 0:n.values()).forEach((function(t){null==t||t.destroy()}))}))}(r),n?r.destroy():r.destroyChildren()),i.off()}var vct=function(t){return t?parseInt(t):0};function gct(t,e){for(var n=[t];n.length;){var r=n.shift();e&&e(r);var i,a=nr(r.children||[]);try{for(a.s();!(i=a.n()).done;){var o=i.value;n.push(o)}}catch(t){a.e(t)}finally{a.f()}}}var yct=function(){return O((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;k(this,t),this.parentNode=null,this.children=[],this.index=0,this.type=n,this.value=e}),[{key:"map",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t})(this.value);return this.value=t,this}},{key:"attr",value:function(t,e){return 1===arguments.length?this.value[t]:this.map((function(n){return n[t]=e,n}))}},{key:"append",value:function(t){var e=new t({});return e.children=[],this.push(e),e}},{key:"push",value:function(t){return t.parentNode=this,t.index=this.children.length,this.children.push(t),this}},{key:"remove",value:function(){var t=this,e=this.parentNode;if(e){var n=e.children,r=n.findIndex((function(e){return e===t}));n.splice(r,1)}return this}},{key:"getNodeByKey",value:function(t){var e=null;return gct(this,(function(n){t===n.attr("key")&&(e=n)})),e}},{key:"getNodesByType",value:function(t){var e=[];return gct(this,(function(n){t===n.type&&e.push(n)})),e}},{key:"getNodeByType",value:function(t){var e=null;return gct(this,(function(n){e||t===n.type&&(e=n)})),e}},{key:"call",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this.map()].concat(n)),this}},{key:"getRoot",value:function(){for(var t=this;t&&t.parentNode;)t=t.parentNode;return t}}])}(),mct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},bct=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title","interaction"],xct="__remove__",wct="__callback__";function kct(t){return Object.assign(Object.assign({},t.value),{type:t.type})}function Ect(t,e){var n=t.width,r=t.height,i=t.autoFit,a=t.depth,o=void 0===a?0:a,s=640,u=480;if(i){var c=function(t){var e=getComputedStyle(t),n=t.clientWidth||vct(e.width),r=t.clientHeight||vct(e.height);return{width:n-(vct(e.paddingLeft)+vct(e.paddingRight)),height:r-(vct(e.paddingTop)+vct(e.paddingBottom))}}(e);s=c.width||s,u=c.height||u}return s=n||s,u=r||u,{width:Math.max(Oe(s)?s:1,1),height:Math.max(Oe(u)?u:1,1),depth:o}}function Oct(t,e,n,r,i){var a=t.type,o=e.type,s=void 0===o?n||a:o;if(function(t,e){return"function"!=typeof t&&new Set(Object.keys(e)).has(t)}(s,i)){var u,c=nr(bct);try{for(c.s();!(u=c.n()).done;){var l=u.value;void 0!==t.attr(l)&&void 0===e[l]&&(e[l]=t.attr(l))}}catch(t){c.e(t)}finally{c.f()}return e}if(function(t,e){return"function"==typeof t||new Set(Object.keys(e)).has(t)}(s,r)){var f,d={type:"view"},h=Object.assign({},e),p=nr(bct);try{for(p.s();!(f=p.n()).done;){var v=f.value;void 0!==h[v]&&(d[v]=h[v],delete h[v])}}catch(t){p.e(t)}finally{p.f()}return Object.assign(Object.assign({},d),{children:[h]})}return e}function Sct(t,e,n){if("function"==typeof t){var r=new yct;return r.value=t,r.type=wct,r}var i=t.type,a=(t.children,mct(t,["type","children"])),o=function(t,e,n){if("function"==typeof t)return e.mark;var r=Object.assign(Object.assign({},e),n)[t];if(!r)throw new Error("Unknown mark: ".concat(t,"."));return r}(i,e,n),s=new o;return s.value=a,s.type=i,s}function Mct(t,e){var n=e.type,r=(e.children,mct(e,["type","children"]));t.type===n||void 0===n?lH(t.value,r):"string"==typeof n&&(t.type=n,t.value=r)}function Tct(t,e,n,r){if(t)for(var i=[[t,e]];i.length;){var a=g(i.shift(),2),o=a[0],s=a[1],u=Sct(s,n,r);Array.isArray(o.children)&&o.push(u);var c=s.children;if(Array.isArray(c)){var l,f=nr(c);try{for(f.s();!(l=f.n()).done;){var d=l.value;i.push([u,d])}}catch(t){f.e(t)}finally{f.f()}}else"function"==typeof c&&i.push([u,c])}}function Act(t,e,n){var r=n.key,i=void 0===r?e:r;t.prototype[e]=function(t){return 0===arguments.length?this.attr(i):this.attr(i,t)}}function Pct(t,e,n){var r=n.key,i=void 0===r?e:r;t.prototype[e]=function(t){if(0===arguments.length)return this.attr(i);if(Array.isArray(t))return this.attr(i,t);var e=[].concat(M(this.attr(i)||[]),[t]);return this.attr(i,e)}}function Nct(t,e,n){var r=n.key,i=void 0===r?e:r;t.prototype[e]=function(t,e){if(0===arguments.length)return this.attr(i);if(1===arguments.length&&"string"!=typeof t)return this.attr(i,t);var n=this.attr(i)||{};return n[t]=1===arguments.length||e,this.attr(i,n)}}function Cct(t,e,n){t.prototype[e]=function(t){if(0===arguments.length)return this.attr(e);if(Array.isArray(t))return this.attr(e,{items:t});if(uH(t)&&(void 0!==t.title||void 0!==t.items))return this.attr(e,t);if(null===t||!1===t)return this.attr(e,t);var n=this.attr(e)||{},r=n.items,i=void 0===r?[]:r;return i.push(t),n.items=i,this.attr(e,n)}}function _ct(t,e,n){var r=n.ctor;t.prototype[e]=function(t){var n=this.append(r);return"mark"===e&&(n.type=t),n}}function Lct(t,e,n){var r=n.ctor;t.prototype[e]=function(){return this.type=null,this.append(r)}}function Rct(t){return function(e){for(var n=0,r=Object.entries(t);n<r.length;n++){var i=g(r[n],2),a=i[0],o=i[1],s=o.type;"value"===s?Act(e,a,o):"array"===s?Pct(e,a,o):"object"===s?Nct(e,a,o):"node"===s?_ct(e,a,o):"container"===s?Lct(e,a,o):"mix"===s&&Cct(e,a)}return e}}function jct(t){return Object.fromEntries(Object.entries(t).map((function(t){var e=g(t,2);return[e[0],{type:"node",ctor:e[1]}]})))}var Dct={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},Ict=Object.assign(Object.assign({},Dct),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),Fct=Object.assign(Object.assign({},Dct),{labelTransform:{type:"array"}}),zct=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"changeData",value:function(t){var e,n=this.getRoot();if(n)return this.attr("data",t),(null===(e=this.children)||void 0===e?void 0:e.length)&&this.children.forEach((function(e){e.attr("data",t)})),null==n?void 0:n.render()}},{key:"getView",value:function(){var t=this,e=this.getRoot().getContext().views;if(null==e?void 0:e.length)return e.find((function(e){return e.key===t._key}))}},{key:"getScale",value:function(){var t;return null===(t=this.getView())||void 0===t?void 0:t.scale}},{key:"getScaleByChannel",value:function(t){var e=this.getScale();if(e)return e[t]}},{key:"getCoordinate",value:function(){var t;return null===(t=this.getView())||void 0===t?void 0:t.coordinate}},{key:"getTheme",value:function(){var t;return null===(t=this.getView())||void 0===t?void 0:t.theme}},{key:"getGroup",value:function(){var t=this._key;if(t)return this.getRoot().getContext().canvas.getRoot().getElementById(t)}},{key:"show",value:function(){var t=this.getGroup();t&&!t.isVisible()&&dJ(t)}},{key:"hide",value:function(){var t=this.getGroup();t&&t.isVisible()&&fJ(t)}}])}(yct);zct=function(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([Rct(Fct)],zct);var Bct=function(t){function e(){return k(this,e),N(this,e,arguments)}return _(e,t),O(e,[{key:"changeData",value:function(t){var e=this.getRoot();if(e)return this.attr("data",t),null==e?void 0:e.render()}},{key:"getMark",value:function(){var t,e=this,n=null===(t=this.getRoot())||void 0===t?void 0:t.getView();if(n){var r=n.markState,i=Array.from(r.keys()).find((function(t){return t.key===e.attr("key")}));return r.get(i)}}},{key:"getScale",value:function(){var t,e=null===(t=this.getRoot())||void 0===t?void 0:t.getView();if(e)return null==e?void 0:e.scale}},{key:"getScaleByChannel",value:function(t){var e,n,r=null===(e=this.getRoot())||void 0===e?void 0:e.getView();if(r)return null===(n=null==r?void 0:r.scale)||void 0===n?void 0:n[t]}},{key:"getGroup",value:function(){var t=this.attr("key");if(t)return this.getRoot().getContext().canvas.getRoot().getElementById(t)}}])}(yct);Bct=function(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([Rct(Ict)],Bct);var Gct={};function Wct(t,e){var n,r;t.startsWith("symbol.")?(n=t.split(".").pop(),r=e,zU.set(n,r)):Object.assign(Gct,b({},t,e))}var Vct=function(t){function e(t){var n;k(this,e);var r=t.container,i=t.canvas,a=t.renderer,o=t.plugins,s=t.lib,u=t.createCanvas,c=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["container","canvas","renderer","plugins","lib","createCanvas"]);return(n=N(this,e,[c,"view"]))._hasBindAutoFit=!1,n._rendering=!1,n._trailing=!1,n._trailingResolve=null,n._trailingReject=null,n._previousDefinedType=null,n._onResize=Gg((function(){n.forceFit()}),300),n._renderer=a||new xst,n._plugins=o||[],n._container=function(t){if(void 0===t){var e=document.createElement("div");return e[xct]=!0,e}return"string"==typeof t?document.getElementById(t):t}(r),n._emitter=new Ug,n._context={library:Object.assign(Object.assign({},s),Gct),emitter:n._emitter,canvas:i,createCanvas:u},n._create(),n}return _(e,t),O(e,[{key:"render",value:function(){var t=this;if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._bindAutoFit(),this._rendering=!0;var e=new Promise((function(e,n){return dct(t._computedOptions(),t._context,t._createResolve(e),t._createReject(n))})),n=function(){var t,e;return[new Promise((function(n,r){e=n,t=r})),e,t]}(),r=g(n,3),i=r[0],a=r[1],o=r[2];return e.then(a).catch(o).then((function(){return t._renderTrailing()})),i}},{key:"options",value:function(t){if(0===arguments.length)return function(t){var e=function(t){if(null!==t.type)return t;var e,n=t.children[t.children.length-1],r=nr(bct);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.attr(i,t.attr(i))}}catch(t){r.e(t)}finally{r.f()}return n}(t),n=[e],r=new Map;for(r.set(e,kct(e));n.length;){var i,a=n.pop(),o=r.get(a),s=a.children,u=nr(void 0===s?[]:s);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(c.type===wct)o.children=c.value;else{var l=kct(c),f=o.children,d=void 0===f?[]:f;d.push(l),n.push(c),r.set(c,l),o.children=d}}}catch(t){u.e(t)}finally{u.f()}}return r.get(e)}(this);var e=t.type;return e&&(this._previousDefinedType=e),function(t,e,n,r,i){for(var a=[[null,t,Oct(t,e,n,r,i)]];a.length;){var o=g(a.shift(),3),s=o[0],u=o[1],c=o[2];if(u)if(c){Mct(u,c);var l=c.children,f=u.children;if(Array.isArray(l)&&Array.isArray(f))for(var d=Math.max(l.length,f.length),h=0;h<d;h++){var p=l[h],v=f[h];a.push([u,v,p])}else"function"==typeof l&&a.push([u,null,l])}else u.remove();else Tct(s,c,r,i)}}(this,t,this._previousDefinedType,this._marks,this._compositions),this}},{key:"getContainer",value:function(){return this._container}},{key:"getContext",value:function(){return this._context}},{key:"on",value:function(t,e,n){return this._emitter.on(t,e,n),this}},{key:"once",value:function(t,e){return this._emitter.once(t,e),this}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=this._emitter).emit.apply(e,[t].concat(r)),this}},{key:"off",value:function(t,e){return this._emitter.off(t,e),this}},{key:"clear",value:function(){var t=this.options();this.emit(I0.BEFORE_CLEAR),this._reset(),pct(t,this._context,!1),this.emit(I0.AFTER_CLEAR)}},{key:"destroy",value:function(){var t,e,n=this.options();this.emit(I0.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),pct(n,this._context,!0),this._container[xct]&&((e=(t=this._container).parentNode)&&e.removeChild(t)),this.emit(I0.AFTER_DESTROY)}},{key:"forceFit",value:function(){var t=this;this.options.autoFit=!0;var e=Ect(this.options(),this._container),n=e.width,r=e.height;if(n===this._width&&r===this._height)return Promise.resolve(this);this.emit(I0.BEFORE_CHANGE_SIZE);var i=this.render();return i.then((function(){t.emit(I0.AFTER_CHANGE_SIZE)})),i}},{key:"changeSize",value:function(t,e){var n=this;if(t===this._width&&e===this._height)return Promise.resolve(this);this.emit(I0.BEFORE_CHANGE_SIZE),this.attr("width",t),this.attr("height",e);var r=this.render();return r.then((function(){n.emit(I0.AFTER_CHANGE_SIZE)})),r}},{key:"_create",value:function(){var t=this,e=this._context.library,n=["mark.mark"].concat(M(Object.keys(e).filter((function(t){return t.startsWith("mark.")||"component.axisX"===t||"component.axisY"===t||"component.legends"===t}))));this._marks={};var r,i=nr(n);try{var a=function(){var e=r.value.split(".").pop(),n=function(t){function n(){return k(this,n),N(this,n,[{},e])}return _(n,t),O(n)}(Bct);t._marks[e]=n,t[e]=function(t){var r=this.append(n);return"mark"===e&&(r.type=t),r}};for(i.s();!(r=i.n()).done;)a()}catch(t){i.e(t)}finally{i.f()}var o=["composition.view"].concat(M(Object.keys(e).filter((function(t){return t.startsWith("composition.")&&"composition.mark"!==t}))));this._compositions=Object.fromEntries(o.map((function(e){var n=e.split(".").pop(),r=function(t){function e(){return k(this,e),N(this,e,[{},n])}return _(e,t),O(e)}(zct);return r=function(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([Rct(jct(t._marks))],r),[n,r]})));for(var s=0,u=Object.values(this._compositions);s<u.length;s++){var c=u[s];Rct(jct(this._compositions))(c)}var l,f=nr(o);try{var d=function(){var e=l.value.split(".").pop();t[e]=function(){var t=this._compositions[e];return this.type=null,this.append(t)}};for(f.s();!(l=f.n()).done;)d()}catch(t){f.e(t)}finally{f.f()}}},{key:"_reset",value:function(){var t=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter((function(e){var n=g(e,1)[0];return n.startsWith("margin")||n.startsWith("padding")||n.startsWith("inset")||t.includes(n)}))),this.children=[]}},{key:"_renderTrailing",value:function(){var t=this;this._trailing&&(this._trailing=!1,this.render().then((function(){var e=t._trailingResolve.bind(t);t._trailingResolve=null,e(t)})).catch((function(e){var n=t._trailingReject.bind(t);t._trailingReject=null,n(e)})))}},{key:"_createResolve",value:function(t){var e=this;return function(){e._rendering=!1,t(e)}}},{key:"_createReject",value:function(t){var e=this;return function(n){e._rendering=!1,t(n)}}},{key:"_computedOptions",value:function(){var t=this.options(),e=t.key,n=void 0===e?"G2_CHART_KEY":e,r=Ect(t,this._container),i=r.width,a=r.height,o=r.depth;return this._width=i,this._height=a,this._key=n,Object.assign(Object.assign({key:this._key},t),{width:i,height:a,depth:o})}},{key:"_createCanvas",value:function(){var t=this,e=Ect(this.options(),this._container),n=e.width,r=e.height;this._plugins.push(new Ost),this._plugins.forEach((function(e){return t._renderer.registerPlugin(e)})),this._context.canvas=new BW({container:this._container,width:n,height:r,renderer:this._renderer})}},{key:"_addToTrailing",value:function(){var t,e=this;return null===(t=this._trailingResolve)||void 0===t||t.call(this,this),this._trailing=!0,new Promise((function(t,n){e._trailingResolve=t,e._trailingReject=n}))}},{key:"_bindAutoFit",value:function(){var t=this.options().autoFit;this._hasBindAutoFit?t||this._unbindAutoFit():t&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}},{key:"_unbindAutoFit",value:function(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}])}(zct);function Hct(t){var e=t.type;return"string"==typeof e&&["stackY","dodgeX","groupX"].includes(e)}var Yct=function(t){return function(e,n,r){var i=n.encode,a=n.transform;if((void 0===a?[]:a).some(Hct))return[e,n];var o=i.x,s=i.y;if(void 0===o||void 0===s)return[e,n];var u=t.series;return o9({groupBy:u?["x","series"]:"x"})(e,n,r)}};Yct.props={};var Uct=function(){return function(t,e){return void 0!==e.encode.z?[t,e]:[t,vd({},e,{encode:{z:lj(hj(t,0))},scale:{z:{guide:null}}})]}};Uct.props={};var qct,Xct,Kct=Object.assign({},uot()),$ct=cot(Vct,Kct),Zct=gN.version||"",Qct="__rc_react_root__";try{if(parseInt(Zct.split(".")[0],10)>=18){var Jct=s(4629);qct=Jct.createRoot}else{var tlt=s(6003);Xct=tlt.render,tlt.unmountComponentAtNode}}catch(Est){}var elt=new Map;"undefined"!=typeof document&&elt.set("tooltip",document.createElement("div"));var nlt,rlt=function(t){var e=t.loadingTemplate,n=t.theme,r=void 0===n?"light":n,i=yN().useRef(null);return yN().useEffect((function(){!e&&i.current&&function(t){if("undefined"==typeof document)return"loading";var e=t.attachShadow({mode:"open"}),n=document.createElement("div"),r=document.createElement("style");r.innerHTML=".loading {\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: 80px;\n  }\n  .loading div {\n    position: absolute;\n    top: 33px;\n    width: 13px;\n    height: 13px;\n    border-radius: 50%;\n    background: #ccc;\n    animation-timing-function: cubic-bezier(0, 1, 1, 0);\n  }\n  .loading div:nth-child(1) {\n    left: 8px;\n    animation: loading1 0.6s infinite;\n  }\n  .loading div:nth-child(2) {\n    left: 8px;\n    animation: loading2 0.6s infinite;\n  }\n  .loading div:nth-child(3) {\n    left: 32px;\n    animation: loading2 0.6s infinite;\n  }\n  .loading div:nth-child(4) {\n    left: 56px;\n    animation: loading3 0.6s infinite;\n  }\n  @keyframes loading1 {\n    0% {\n      transform: scale(0);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n  @keyframes loading3 {\n    0% {\n      transform: scale(1);\n    }\n    100% {\n      transform: scale(0);\n    }\n  }\n  @keyframes loading2 {\n    0% {\n      transform: translate(0, 0);\n    }\n    100% {\n      transform: translate(24px, 0);\n    }\n  }\n  ",n.classList.add("loading"),n.innerHTML="<div></div><div></div><div></div><div></div>",e.appendChild(r),e.appendChild(n)}(i.current)}),[]),yN().createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"dark"===r?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},e||yN().createElement("div",{ref:i}))},ilt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),alt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={hasError:!1},e.renderError=function(t){var n=e.props.errorTemplate;return"function"==typeof n?n(t):n||yN().createElement("h5",null,"组件出错了，请核查后重试： ",t.message)},e}return ilt(e,t),e.getDerivedStateFromError=function(t){return{hasError:!0,error:t}},e.getDerivedStateFromProps=function(t,e){return e.children!==t.children?{children:t.children,hasError:!1,error:void 0}:null},e.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):yN().createElement(gN.Fragment,null,this.props.children)},e}(yN().Component),olt=(0,vN.memoize)((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=void 0===r?"sans-serif":r,a=e.fontWeight,o=e.fontStyle,s=e.fontVariant,u=(nlt||(nlt=document.createElement("canvas").getContext("2d")),nlt);return u.font=[o,a,s,"".concat(n,"px"),i].join(" "),u.measureText((0,vN.isString)(t)?t:"")}),(function(t,e){return void 0===e&&(e={}),function(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([t],(0,vN.values)(e),!0).join("")})),slt=function(t,e){return void 0===e&&(e={}),olt(t,e).width},ult=function(){return ult=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ult.apply(this,arguments)};function clt(t,e){var n=(0,gN.useRef)(null),r=(0,gN.useRef)(null),i=(0,gN.useRef)(null),a=e.onReady,o=e.onEvent,s=function(t,e){var n;void 0===t&&(t="image/png");var r=null===(n=i.current)||void 0===n?void 0:n.getElementsByTagName("canvas")[0];return null==r?void 0:r.toDataURL(t,e)},u=function(t,e,n){void 0===t&&(t="download"),void 0===e&&(e="image/png");var r=t;-1===t.indexOf(".")&&(r="".concat(t,".").concat(e.split("/")[1]));var i=s(e,n),a=document.createElement("a");return a.href=i,a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a),a=null,r},c=function(t,e){void 0===e&&(e=!1);var n=Object.keys(t),r=e;n.forEach((function(n){var i,a=t[n];"tooltip"===n&&(r=!0),(0,vN.isFunction)(a)&&(i="".concat(a),/react|\.jsx|children:\[\(|return\s+[A-Za-z0-9].createElement\((?!['"][g|circle|ellipse|image|rect|line|polyline|polygon|text|path|html|mesh]['"])([^\)])*,/i.test(i))?t[n]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(t,e){void 0===e&&(e=!1);var n=null;if(e)n=elt.get("tooltip");else if(n=document.createElement("div"),null==t?void 0:t.key){var r=elt.get(t.key);r?n=r:elt.set(t.key,n)}return function(t,e){qct?function(t,e){e[Qct]||(e[Qct]=qct(e)),e[Qct].render(t)}(t,e):function(t,e){if(!Xct)throw new Error("ReactDOM.render is not available in this React version");Xct(t,e)}(t,e)}(t,n),n}(a.apply(void 0,t),r)}:(0,vN.isArray)(a)?a.forEach((function(t){c(t,r)})):(0,vN.isObject)(a)?c(a,r):r=e}))};return(0,gN.useEffect)((function(){n.current&&!(0,vN.isEqual)(r.current,e)&&(r.current=(0,vN.cloneDeep)(e),c(e),n.current.update(e),n.current.render())}),[e]),(0,gN.useEffect)((function(){if(!i.current)return function(){return null};r.current||(r.current=(0,vN.cloneDeep)(e)),c(e);var l=new t(i.current,ult({},e));l.toDataURL=s,l.downloadImage=u,l.render(),n.current=l,a&&a(l);var f=function(t){o&&o(l,t)};return l.on("*",f),function(){n.current&&(n.current.destroy(),n.current.off("*",f),n.current=void 0)}}),[]),{chart:n,container:i}}function llt(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}var flt={field:"value",size:[1,1],round:!1,padding:0,sort:function(t,e){return e.value-t.value},as:["x","y"],ignoreParentValue:!0},dlt="childNodeCount",hlt="Invalid field: it must be a string!";function plt(t,e){var n,r,i,a,o=(r={},i=flt,a=e,i&&llt(r,i),a&&llt(r,a),e=r).as;if(!fn(o)||2!==o.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=function(t){var e=t.field,n=t.fields;if(Te(e))return e;if(fn(e))return console.warn(hlt),e[0];if(console.warn("".concat(hlt," will try to get fields instead.")),Te(n))return n;if(fn(n)&&n.length)return n[0];throw new TypeError(hlt)}(e)}catch(t){console.warn(t)}var s=function(t){return function(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(function(t,e){return function(r){r.children&&V4(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(e,a)),r&&i.eachBefore($4),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}().size(e.size).round(e.round).padding(e.padding)(A4(t).sum((function(t){return pK(t.children)?e.ignoreParentValue?0:t[n]-_w(t.children,(function(t,e){return t+e[n]}),0):t[n]})).sort(e.sort))}(t),u=o[0],c=o[1];return s.each((function(t){var e,n;t[u]=[t.x0,t.x1,t.x1,t.x0],t[c]=[t.y1,t.y1,t.y0,t.y0],t.name=t.name||(null===(e=t.data)||void 0===e?void 0:e.name)||(null===(n=t.data)||void 0===n?void 0:n.label),t.data.name=t.name,["x0","x1","y0","y1"].forEach((function(e){-1===o.indexOf(e)&&delete t[e]}))})),function(t){var e,n,r=[];return t&&t.each?t.each((function(t){var i,a;t.parent!==e?(e=t.parent,n=0):n+=1;var o=Mv(((null===(i=t.ancestors)||void 0===i?void 0:i.call(t))||[]).map((function(t){return r.find((function(e){return e.name===t.name}))||t})),(function(e){var n=e.depth;return n>0&&n<t.depth}));t.nodeAncestor=o,t[dlt]=(null===(a=t.children)||void 0===a?void 0:a.length)||0,t.nodeIndex=n,r.push(t)})):t&&t.eachNode&&t.eachNode((function(t){r.push(t)})),r}(s)}var vlt="sunburst",glt="markType",ylt="path",mlt="ancestor-node",blt={id:vlt,encode:{x:"x",y:"y",key:ylt,color:mlt,value:"value"},axis:{x:!1,y:!1},style:b(b(b(b(b(b({},glt,vlt),"stroke","#fff"),"lineWidth",.5),"fillOpacity","fillOpacity"),dlt,dlt),"depth","depth"),state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},xlt=function(t){var e=t.encode,n=t.data,r=void 0===n?[]:n,i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["encode","data"]),a=Object.assign(Object.assign({},i.coordinate),{innerRadius:Math.max(ch(i,["coordinate","innerRadius"],.2),1e-5)}),o=Object.assign(Object.assign({},blt.encode),e),s=o.value,u=function(t){var e=t.data,n=t.encode,r=n.color,i=n.value,a=plt(e,{field:i,type:"hierarchy.".concat("partition"),as:["x","y"]}),o=[];return a.forEach((function(t){var e,n,a,s;if(0===t.depth)return null;for(var u=t.data.name,c=[u],l=Object.assign({},t);l.depth>1;)u="".concat(null===(e=l.parent.data)||void 0===e?void 0:e.name," / ").concat(u),c.unshift(null===(n=l.parent.data)||void 0===n?void 0:n.name),l=l.parent;var f=Object.assign(Object.assign(Object.assign({},vv(t.data,[i])),b(b({},ylt,u),mlt,l.data.name)),t);r&&r!==mlt&&(f[r]=t.data[r]||(null===(s=null===(a=t.parent)||void 0===a?void 0:a.data)||void 0===s?void 0:s[r])),o.push(f)})),o.map((function(t){var e=t.x.slice(0,2),n=[t.y[2],t.y[0]];return e[0]===e[1]&&(n[0]=n[1]=(t.y[2]+t.y[0])/2),Object.assign(Object.assign({},t),{x:e,y:n,fillOpacity:Math.pow(.85,t.depth)})}))}({encode:o,data:r});return[vd({},blt,Object.assign(Object.assign({type:"rect",data:u,encode:o,tooltip:{title:"path",items:[function(t){return{name:s,value:t[s]}}]}},i),{coordinate:a}))]};xlt.props={};var wlt={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};var klt=function(){return klt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},klt.apply(this,arguments)},Elt=cot(Vct,klt(klt({},uot()),{"interaction.drillDown":function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.breadCrumb,r=void 0===n?{}:n,i=e.isFixedColor,a=void 0!==i&&i,o=vd({},wlt,r);return function(e){var n=e.update,r=e.setState,i=e.container,s=e.view,u=e.options,c=i.ownerDocument,l=function(t){return fH(t).select(".".concat(rJ)).node()}(i),f=u.marks.find((function(t){return t.id===vlt})),d=f.state,h=c.createElement("g");l.appendChild(h);var p=function(e,i){return u=t,f=void 0,d=void 0,v=Jn().mark((function t(){var u,f,d,v,g,y,m;return Jn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h.removeChildren(),e&&(u=c.createElement("text",{style:Object.assign({x:0,text:o.rootText,depth:0},o.style)}),h.appendChild(u),f="",d=null==e?void 0:e.split(" / "),v=o.style.y,g=h.getBBox().width,y=l.getBBox().width,m=d.map((function(t,e){var n=c.createElement("text",{style:Object.assign(Object.assign({x:g,text:" / "},o.style),{y:v})});h.appendChild(n),g+=n.getBBox().width,f="".concat(f).concat(t," / ");var r=c.createElement("text",{name:f.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:t,x:g,depth:e+1},o.style),{y:v})});return h.appendChild(r),(g+=r.getBBox().width)>y&&(v=h.getBBox().height,g=0,n.attr({x:g,y:v}),g+=n.getBBox().width,r.attr({x:g,y:v}),g+=r.getBBox().width),r})),[u].concat(M(m)).forEach((function(t,e){if(e!==m.length){var n=Object.assign({},t.attributes);t.attr("cursor","pointer"),t.addEventListener("mouseenter",(function(){t.attr(o.active)})),t.addEventListener("mouseleave",(function(){t.attr(n)})),t.addEventListener("click",(function(){p(t.name,ch(t,["style","depth"]))}))}}))),r("drillDown",(function(t){var n=t.marks.map((function(t){if(t.id!==vlt&&"rect"!==t.type)return t;var n=t.data,r=Object.fromEntries(["color"].map((function(t){return[t,{domain:s.scale[t].getOptions().domain}]}))),o=n.filter((function(t){var n=t.path;return a||(t[mlt]=n.split(" / ")[i]),!e||new RegExp("^".concat(e,".+")).test(n)}));return vd({},t,a?{data:o,scale:r}:{data:o})}));return Object.assign(Object.assign({},t),{marks:n})})),t.next=5,n();case 5:case"end":return t.stop()}}),t)})),new(d||(d=Promise))((function(t,e){function n(t){try{i(v.next(t))}catch(t){e(t)}}function r(t){try{i(v.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):function(t){return t instanceof d?t:new d((function(e){e(t)}))}(e.value).then(n,r)}i((v=v.apply(u,f||[])).next())}));var u,f,d,v},v=function(t){var e=t.target;if(ch(e,["style",glt])===vlt&&"rect"===ch(e,["markType"])&&ch(e,["style",dlt])){var n=ch(e,["__data__","key"]),r=ch(e,["style","depth"]);e.style.cursor="pointer",p(n,r)}};l.addEventListener("click",v);var g=w4(Object.assign(Object.assign({},d.active),d.inactive)),y=function(){var t=function(t){return t.querySelectorAll(".element").filter((function(t){return ch(t,["style",glt])===vlt}))}(l);t.forEach((function(t){var e=ch(t,["style",dlt]);if("pointer"!==ch(t,["style","cursor"])&&e){t.style.cursor="pointer";var n=vv(t.attributes,g);t.addEventListener("mouseenter",(function(){t.attr(d.active)})),t.addEventListener("mouseleave",(function(){t.attr(vd(n,d.inactive))}))}}))};return l.addEventListener("mousemove",y),function(){h.remove(),l.removeEventListener("click",v),l.removeEventListener("mousemove",y)}}},"mark.sunburst":xlt})),Olt=function(){return Olt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Olt.apply(this,arguments)},Slt=["renderer"],Mlt=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction"],Tlt="__transform__",Alt=function(t,e){return(0,vN.isBoolean)(e)?{type:t,available:e}:Olt({type:t},e)},Plt={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",sizeField:"encode.size",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",fontSizeField:"encode.fontSize",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(t){return Alt("stackY",t)}},normalize:{target:"transform",value:function(t){return Alt("normalizeY",t)}},percent:{target:"transform",value:function(t){return Alt("normalizeY",t)}},group:{target:"transform",value:function(t){return Alt("dodgeX",t)}},sort:{target:"transform",value:function(t){return Alt("sortX",t)}},symmetry:{target:"transform",value:function(t){return Alt("symmetryY",t)}},diff:{target:"transform",value:function(t){return Alt("diffY",t)}},meta:{target:"scale",value:function(t){return t}},label:{target:"labels",value:function(t){return t}},shape:"style.shape",connectNulls:{target:"style",value:function(t){return(0,vN.isBoolean)(t)?{connect:t}:t}}},Nlt=["xField","yField","seriesField","colorField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],Clt=[{key:"annotations",extend_keys:[]},{key:"line",type:"line",extend_keys:Nlt},{key:"point",type:"point",extend_keys:Nlt},{key:"area",type:"area",extend_keys:Nlt}],_lt=[{key:"transform",callback:function(t,e,n){var r;t[e]=t[e]||[];var i=n.available,a=void 0===i||i,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(n,["available"]);if(a)t[e].push(Olt(((r={})[Tlt]=!0,r),o));else{var s=t[e].indexOf((function(t){return t.type===n.type}));-1!==s&&t[e].splice(s,1)}}},{key:"labels",callback:function(t,e,n){var r;n&&!(0,vN.isArray)(n)?(n.text||(n.text=t.yField),t[e]=t[e]||[],t[e].push(Olt(((r={})[Tlt]=!0,r),n))):t[e]=n||[]}}],Llt=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],Rlt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jlt=function(){return jlt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},jlt.apply(this,arguments)},Dlt=function(t){function e(e){void 0===e&&(e={});var n=e.style,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["style"]);return t.call(this,jlt({style:jlt({fill:"#eee"},n)},r))||this}return Rlt(e,t),e}(xW),Ilt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Flt=function(){return Flt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Flt.apply(this,arguments)},zlt=function(t){function e(e){void 0===e&&(e={});var n=e.style,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["style"]);return t.call(this,Flt({style:Flt({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},n)},r))||this}return Ilt(e,t),e}(SW),Blt=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},Glt=function(t,e){if((0,vN.isArray)(e))return e},Wlt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return vN.mergeWith.apply(void 0,Blt(Blt([],t,!1),[Glt],!1))},Vlt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hlt=function(t){function e(e,n,r){var i=t.call(this,{style:Wlt(r,n)})||this;return i.chart=e,i}return Vlt(e,t),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this)},e.prototype.disconnectedCallback=function(){},e.prototype.attributeChangedCallback=function(t){},e.prototype.update=function(t,e){var n;return this.attr(Wlt({},this.attributes,t||{})),null===(n=this.render)||void 0===n?void 0:n.call(this,this.attributes,this,e)},e.prototype.clear=function(){this.removeChildren()},e.prototype.getElementsLayout=function(){var t=this.chart.getContext().canvas.document.getElementsByClassName("element"),e=[];return t.forEach((function(t){var n=t.getBBox(),r=n.x,i=n.y,a=n.width,o=n.height,s=t.__data__;e.push({bbox:n,x:r,y:i,width:a,height:o,key:s.key,data:s})})),e},e.prototype.bindEvents=function(t,e){},e}(cW),Ylt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ult=function(){return Ult=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ult.apply(this,arguments)},qlt=function(t){function e(n,r){return t.call(this,n,r,{type:e.tag})||this}return Ylt(e,t),e.prototype.getConversionTagLayout=function(){var t="vertical"===this.direction,e=this.getElementsLayout(),n=e[0],r=n.x,i=n.y,a=n.height,o=n.width,s=n.data,u=["items",0,"value"],c=(0,vN.get)(s,u),l=t?e[1].y-i-a:e[1].x-r-o,f=[],d=this.attributes,h=d.size,p=void 0===h?40:h,v=d.arrowSize,g=void 0===v?20:v,y=d.spacing,m=void 0===y?4:y;return e.forEach((function(e,n){if(n>0){var r=e.x,i=e.y,a=e.height,o=e.width,s=e.data,d=e.key,h=(0,vN.get)(s,u),v=p/2;if(t){var y=r+o/2,b=i;f.push({points:[[y+v,b-l+m],[y+v,b-g-m],[y,b-m],[y-v,b-g-m],[y-v,b-l+m]],center:[y,b-l/2-m],width:l,value:[c,h],key:d})}else y=r,b=i+a/2,f.push({points:[[r-l+m,b-v],[r-g-m,b-v],[y-m,b],[r-g-m,b+v],[r-l+m,b+v]],center:[y-l/2-m,b],width:l,value:[c,h],key:d});c=h}})),f},e.prototype.render=function(){this.setDirection(),this.drawConversionTag()},e.prototype.setDirection=function(){var t=this.chart.getCoordinate(),e=(0,vN.get)(t,"options.transformations"),n="horizontal";e.forEach((function(t){t.includes("transpose")&&(n="vertical")})),this.direction=n},e.prototype.drawConversionTag=function(){var t=this,e=this.getConversionTagLayout(),n=this.attributes,r=n.style,i=n.text,a=i.style,o=i.formatter;e.forEach((function(e){var n=e.points,i=e.center,s=e.value,u=e.key,c=s[0],l=s[1],f=i[0],d=i[1],h=new Dlt({style:Ult({points:n,fill:"#eee"},r),id:"polygon-".concat(u)}),p=new zlt({style:Ult({x:f,y:d,text:(0,vN.isFunction)(o)?o(c,l):(l/c*100).toFixed(2)+"%"},a),id:"text-".concat(u)});t.appendChild(h),t.appendChild(p)}))},e.prototype.update=function(){var t=this;this.getConversionTagLayout().forEach((function(e){var n=e.points,r=e.center,i=e.key,a=r[0],o=r[1],s=t.getElementById("polygon-".concat(i)),u=t.getElementById("text-".concat(i));s.setAttribute("points",n),u.setAttribute("x",a),u.setAttribute("y",o)}))},e.tag="ConversionTag",e}(Hlt),Xlt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Klt=function(){return Klt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Klt.apply(this,arguments)},$lt=function(t){function e(n,r){return t.call(this,n,r,{type:e.tag})||this}return Xlt(e,t),e.prototype.render=function(){this.drawText()},e.prototype.getBidirectionalBarAxisTextLayout=function(){var t="vertical"===this.attributes.layout,e=this.getElementsLayout(),n=t?(0,vN.uniqBy)(e,"x"):(0,vN.uniqBy)(e,"y"),r=["title"],i=[],a=this.chart.getContext().views,o=(0,vN.get)(a,[0,"layout"]),s=o.width,u=o.height;return n.forEach((function(e){var n=e.x,a=e.y,o=e.height,c=e.width,l=e.data,f=e.key,d=(0,vN.get)(l,r);t?i.push({x:n+c/2,y:u,text:d,key:f}):i.push({x:s,y:a+o/2,text:d,key:f})})),(0,vN.uniqBy)(i,"text").length!==i.length&&(i=Object.values((0,vN.groupBy)(i,"text")).map((function(e){var n,r=e.reduce((function(e,n){return e+(t?n.x:n.y)}),0);return Klt(Klt({},e[0]),((n={})[t?"x":"y"]=r/e.length,n))}))),i},e.prototype.transformLabelStyle=function(t){var e={},n=/^label[A-Z]/;return Object.keys(t).forEach((function(r){n.test(r)&&(e[r.replace("label","").replace(/^[A-Z]/,(function(t){return t.toLowerCase()}))]=t[r])})),e},e.prototype.drawText=function(){var t=this,e=this.getBidirectionalBarAxisTextLayout(),n=this.attributes,r=n.layout,i=n.labelFormatter,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(n,["layout","labelFormatter"]);e.forEach((function(e){var n=e.x,o=e.y,s=e.text,u=e.key,c=new zlt({style:Klt({x:n,y:o,text:(0,vN.isFunction)(i)?i(s):s,wordWrap:!0,wordWrapWidth:"horizontal"===r?64:120,maxLines:2,textOverflow:"ellipsis"},t.transformLabelStyle(a)),id:"text-".concat(u)});t.appendChild(c)}))},e.prototype.destroy=function(){this.clear()},e.prototype.update=function(){this.destroy(),this.drawText()},e.tag="BidirectionalBarAxisText",e}(Hlt),Zlt={ConversionTag:qlt,BidirectionalBarAxisText:$lt},Qlt=function(){function t(t,e){this.container=new Map,this.chart=t,this.config=e,this.init()}return t.prototype.init=function(){var t=this;Llt.forEach((function(e){var n,r=e.key,i=e.shape,a=t.config[r];if(a){var o=new Zlt[i](t.chart,a);t.chart.getContext().canvas.appendChild(o),t.container.set(r,o)}else null===(n=t.container.get(r))||void 0===n||n.clear()}))},t.prototype.update=function(){var t=this;this.container.size&&Llt.forEach((function(e){var n=e.key,r=t.container.get(n);null==r||r.update()}))},t}(),Jlt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tft=function(){return tft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},tft.apply(this,arguments)},eft="data-chart-source-type",nft=function(t){function e(e,n){var r=t.call(this)||this;return r.container="string"==typeof e?document.getElementById(e):e,r.options=r.mergeOption(n),r.createG2(),r.bindEvents(),r}return Jlt(e,t),e.prototype.getChartOptions=function(){return tft(tft({},(0,vN.pick)(this.options,Slt)),{container:this.container})},e.prototype.getSpecOptions=function(){return"base"===this.type||this.__skipDelCustomKeys__?tft(tft({},this.options),this.getChartOptions()):this.options},e.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new Elt(this.getChartOptions()),this.container.setAttribute(eft,"Ant Design Charts")},e.prototype.bindEvents=function(){var t=this;this.chart&&this.chart.on("*",(function(e){(null==e?void 0:e.type)&&t.emit(e.type,e)}))},e.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0}},e.prototype.getDefaultOptions=function(){},e.prototype.render=function(){var t=this;"base"!==this.type&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then((function(){t.annotation=new Qlt(t.chart,t.options)})),this.bindSizeSensor()},e.prototype.update=function(t){this.options=this.mergeOption(t)},e.prototype.mergeOption=function(t){return Wlt({},this.getBaseOptions(),this.getDefaultOptions(),t)},e.prototype.changeData=function(t){this.chart.changeData(t)},e.prototype.changeSize=function(t,e){this.chart.changeSize(t,e)},e.prototype.destroy=function(){this.chart.destroy(),this.off(),this.container.removeAttribute(eft)},e.prototype.execAdaptor=function(){this.getSchemaAdaptor()({chart:this.chart,options:this.options})},e.prototype.triggerResize=function(){this.chart.forceFit()},e.prototype.bindSizeSensor=function(){var t=this,e=this.options.autoFit;(void 0===e||e)&&this.chart.on(I0.AFTER_CHANGE_SIZE,(function(){t.annotation.update()}))},e}(Ug),rft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ift=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="base",e}return rft(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return function(t){return t}},e}(nft),aft=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},oft=function(){return oft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},oft.apply(this,arguments)},sft=function(t){var e=function(t){var e=t.options,n=e.children;return(void 0===n?[]:n).forEach((function(t){Object.keys(t).forEach((function(e){(0,vN.isArray)(t[e])&&"data"!==e&&(t[e]=t[e].filter((function(t){return!t[Tlt]})))}))})),e}(t),n=e.children,r=void 0===n?[]:n,i=(0,vN.omit)(e,[].concat(Mlt,Clt.map((function(t){return t.key})))),a=function(t){Object.keys(t).forEach((function(e){if(t[e]){var n=Clt.find((function(t){return t.key===e}));if(n){var i=n.type,a=n.extend_keys;if(i){var s=t[e].tooltip;r.push(o(Wlt({},(0,vN.pick)(t,a),{type:i},t[e],{tooltip:s||!1})))}else(0,vN.isArray)(t[e])&&t[e].forEach((function(t){r.push(o(oft({tooltip:!1},t)))}))}}}))},o=function(t){return a(t),Object.keys(Plt).forEach((function(e){var n=Plt[e];if(!(0,vN.isUndefined)(t[e]))if((0,vN.isObject)(n)){var r=n.value,i=n.target,a=r(t[e]);!function(t,e,n){var r=function(t){var e;return null===(e=_lt.find((function(e){return e.key===t})))||void 0===e?void 0:e.callback}(e);r?r(t,e,n):t[e]=Wlt({},t[e],n)}(t,i,a)}else(0,vN.set)(t,n,t[e])})),t};return r.forEach((function(t){var e=Wlt({},i,t);o(Wlt(t,e))})),a(e),function(t){var e=t.children,n=void 0===e?[]:e,r=Object.keys(Plt).concat(Clt.map((function(t){return t.key})));r.forEach((function(e){delete t[e]})),n.forEach((function(t){Object.keys(t).forEach((function(e){r.includes(e)&&delete t[e]}))})),Object.keys(t).forEach((function(e){aft(aft([],Mlt,!0),Llt.map((function(t){return t.key})),!0).includes(e)||delete t[e]}))}(e),t},uft=function(){return uft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},uft.apply(this,arguments)};function cft(t){var e=t.options,n=e.stack,r=e.tooltip,i=e.xField;if(!n)return t;var a=Clt.map((function(t){return t.type})).filter((function(t){return!!t})),o=!1;return a.forEach((function(t){e[t]&&(o=!0,(0,vN.set)(e,[t,"stack"],uft({y1:"y"},"object"==typeof n?n:{})))})),!o||(0,vN.isBoolean)(r)||r||(0,vN.set)(e,"tooltip",{title:i,items:[{channel:"y"}]}),t}function lft(t){return(0,vN.flow)(cft)(t)}function fft(t){return(0,vN.flow)(lft,sft)(t)}var dft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="area",e}return dft(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return fft},e}(nft),pft=function(){return pft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pft.apply(this,arguments)};function vft(t){return(0,vN.flow)((function(t){var e=t.options;(0,vN.get)(e,"children.length")>1&&(0,vN.set)(e,"children",[{type:"interval"}]);var n=e.scale,r=e.markBackground,i=e.data,a=e.children,o=e.yField,s=(0,vN.get)(n,"y.domain",[]);if(r&&s.length&&(0,vN.isArray)(i)){var u="domainMax",c=i.map((function(t){var e;return pft(pft({originData:pft({},t)},(0,vN.omit)(t,o)),((e={})[u]=s[s.length-1],e))}));a.unshift(pft({type:"interval",data:c,yField:u,tooltip:!1,style:{fill:"#eee"},label:!1},r))}return t}),lft,sft)(t)}var gft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Wct("shape.interval.bar25D",(function(t,e){return function(n){var r=t.fill,i=void 0===r?"#2888FF":r,a=t.stroke,o=t.fillOpacity,s=void 0===o?1:o,u=t.strokeOpacity,c=void 0===u?.2:u,l=t.pitch,f=void 0===l?8:l,d=n[0],h=n[1],p=n[2],v=n[3],g=(h[1]-d[1])/2,y=e.document,m=y.createElement("g",{}),b=y.createElement("polygon",{style:{points:[d,[d[0]-f,d[1]+g],[p[0]-f,d[1]+g],v],fill:i,fillOpacity:s,stroke:a,strokeOpacity:c,inset:30}}),x=y.createElement("polygon",{style:{points:[[d[0]-f,d[1]+g],h,p,[p[0]-f,d[1]+g]],fill:i,fillOpacity:s,stroke:a,strokeOpacity:c}}),w=y.createElement("polygon",{style:{points:[d,[d[0]-f,d[1]+g],h,[d[0]+f,d[1]+g]],fill:i,fillOpacity:s-.2}});return m.appendChild(b),m.appendChild(x),m.appendChild(w),m}}));var yft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="Bar",e}return gft(e,t),e.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return vft},e}(nft),mft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Wct("shape.interval.column25D",(function(t,e){return function(n){var r=t.fill,i=void 0===r?"#2888FF":r,a=t.stroke,o=t.fillOpacity,s=void 0===o?1:o,u=t.strokeOpacity,c=void 0===u?.2:u,l=t.pitch,f=void 0===l?8:l,d=(n[1][0]-n[0][0])/2+n[0][0],h=e.document,p=h.createElement("g",{}),v=h.createElement("polygon",{style:{points:[[n[0][0],n[0][1]],[d,n[1][1]+f],[d,n[3][1]+f],[n[3][0],n[3][1]]],fill:i,fillOpacity:s,stroke:a,strokeOpacity:c,inset:30}}),g=h.createElement("polygon",{style:{points:[[d,n[1][1]+f],[n[1][0],n[1][1]],[n[2][0],n[2][1]],[d,n[2][1]+f]],fill:i,fillOpacity:s,stroke:a,strokeOpacity:c}}),y=h.createElement("polygon",{style:{points:[[n[0][0],n[0][1]],[d,n[1][1]-f],[n[1][0],n[1][1]],[d,n[1][1]+f]],fill:i,fillOpacity:s-.2}});return p.appendChild(g),p.appendChild(v),p.appendChild(y),p}}));var bft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="column",e}return mft(e,t),e.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return vft},e}(nft);function xft(t){return(0,vN.flow)((function(t){var e=t.options,n=e.children,r=void 0===n?[]:n;return e.legend?(r.forEach((function(t){if(!(0,vN.get)(t,"colorField")){var e=(0,vN.get)(t,"yField");(0,vN.set)(t,"colorField",(function(){return e}))}})),t):t}),(function(t){var e=t.options,n=e.annotations,r=void 0===n?[]:n,i=e.children,a=void 0===i?[]:i,o=e.scale,s=!1;return(0,vN.get)(o,"y.key")||a.forEach((function(t,e){if(!(0,vN.get)(t,"scale.y.key")){var n="child".concat(e,"Scale");(0,vN.set)(t,"scale.y.key",n);var i=t.annotations,a=void 0===i?[]:i;a.length>0&&((0,vN.set)(t,"scale.y.independent",!1),a.forEach((function(t){(0,vN.set)(t,"scale.y.key",n)}))),!s&&r.length>0&&void 0===(0,vN.get)(t,"scale.y.independent")&&(s=!0,(0,vN.set)(t,"scale.y.independent",!1),r.forEach((function(t){(0,vN.set)(t,"scale.y.key",n)})))}})),t}),lft,sft)(t)}var wft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="DualAxes",e}return wft(e,t),e.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return xft},e}(nft);function Eft(t){return(0,vN.flow)((function(t){var e=t.options,n=e.xField;return e.colorField||(0,vN.set)(e,"colorField",n),t}),(function(t){var e=t.options,n=e.compareField,r=e.transform,i=e.isTransposed,a=void 0===i||i,o=e.coordinate;return r||(n?(0,vN.set)(e,"transform",[]):(0,vN.set)(e,"transform",[{type:"symmetryY"}])),!o&&a&&(0,vN.set)(e,"coordinate",{transform:[{type:"transpose"}]}),t}),(function(t){var e=t.options,n=e.compareField,r=e.seriesField,i=e.data,a=e.children,o=e.yField,s=e.isTransposed,u=void 0===s||s;if(n||r){var c=Object.values((0,vN.groupBy)(i,(function(t){return t[n||r]})));a[0].data=c[0],a.push({type:"interval",data:c[1],yField:function(t){return-t[o]}}),delete e.compareField,delete e.data}return r&&((0,vN.set)(e,"type","spaceFlex"),(0,vN.set)(e,"ratio",[1,1]),(0,vN.set)(e,"direction",u?"row":"col"),delete e.seriesField),t}),(function(t){var e=t.options,n=e.tooltip,r=e.xField,i=e.yField;return n||(0,vN.set)(e,"tooltip",{title:!1,items:[function(t){return{name:t[r],value:t[i]}}]}),t}),lft,sft)(t)}var Oft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="column",e}return Oft(e,t),e.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Eft},e}(nft);function Mft(t){return(0,vN.flow)(lft,sft)(t)}var Tft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Aft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e}return Tft(e,t),e.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Mft},e}(nft);function Pft(t){switch(typeof t){case"function":return t;case"string":return function(e){return(0,vN.get)(e,[t])};default:return function(){return t}}}var Nft=function(){return Nft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Nft.apply(this,arguments)};function Cft(t){return(0,vN.flow)((function(t){var e=t.options,n=e.angleField,r=e.data,i=e.label,a=e.tooltip,o=Pft(e.colorField);if((0,vN.isArray)(r)&&r.length>0&&0===r.reduce((function(t,e){return t+e[n]}),0)){var s=r.map((function(t){var e;return Nft(Nft({},t),((e={})[n]=1,e))}));(0,vN.set)(e,"data",s),i&&(0,vN.set)(e,"label",Nft(Nft({},i),{formatter:function(){return 0}})),!1!==a&&((0,vN.isFunction)(a)?(0,vN.set)(e,"tooltip",(function(t,e,r){var i;return a(Nft(Nft({},t),((i={})[n]=0,i)),e,r.map((function(t){var e;return Nft(Nft({},t),((e={})[n]=0,e))})))})):(0,vN.set)(e,"tooltip",Nft(Nft({},a),{items:[function(t,e,n){return{name:o(t,e,n),value:0}}]})))}return t}),sft)(t)}var _ft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pie",e}return _ft(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Cft},e}(nft);function Rft(t){return(0,vN.flow)(lft,sft)(t)}var jft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="scatter",e}return jft(e,t),e.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Rft},e}(nft);function Ift(t){return(0,vN.flow)((function(t){return(0,vN.set)(t,"options.coordinate",{type:(0,vN.get)(t,"options.coordinateType","polar")}),t}),sft)(t)}var Fft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="radar",e}return Fft(e,t),e.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Ift},e}(nft),Bft=function(){return Bft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Bft.apply(this,arguments)};function Gft(t){return(0,vN.flow)((function(t){var e=t.options,n=e.data,r=e.yField;return t.options.data=(0,vN.map)(n,(function(t){var e=t&&Bft({},t);if(Array.isArray(r)&&e){var n=r[0],i=r[1],a=r[2],o=r[3];e.trend=e[n]<=e[i]?"up":"down",e["__stock-range__"]=[e[n],e[i],e[a],e[o]]}return e})),t}),(function(t){var e=t.options,n=e.xField,r=e.yField,i=e.fallingFill,a=e.risingFill,o=r[0],s=r[1],u=r[2],c=r[3],l=Pft(n);return t.options.children=(0,vN.map)(t.options.children,(function(t,e){var n=0===e;return Bft(Bft({},t),{tooltip:{title:function(t,e,n){var r=l(t,e,n);return r instanceof Date?r.toLocaleString():r},items:[{field:u},{field:c},{field:o},{field:s}]},encode:Bft(Bft({},t.encode||{}),{y:n?[u,c]:[o,s],color:function(t){return Math.sign(t[s]-t[o])}}),style:Bft(Bft({},t.style||{}),{lineWidth:n?1:10})})})),delete e.yField,t.options.legend={color:!1},i&&(0,vN.set)(t,"options.scale.color.range[0]",i),a&&(0,vN.set)(t,"options.scale.color.range[2]",a),t}),sft)(t)}var Wft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vft=["#26a69a","#999999","#ef5350"],Hft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="stock",e}return Wft(e,t),e.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:Vft},y:{nice:!0}},children:[{type:"link"},{type:"link"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Gft},e}(nft);function Yft(t){return(0,vN.flow)(lft,sft)(t)}var Uft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="TinyLine",e}return Uft(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],animate:{enter:{type:"growInX",duration:500}},padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Yft},e}(nft);function Xft(t){return(0,vN.flow)(lft,sft)(t)}var Kft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$ft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="TinyArea",e}return Kft(e,t),e.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Xft},e}(nft);function Zft(t){return(0,vN.flow)(lft,sft)(t)}var Qft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="TinyColumn",e}return Qft(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Zft},e}(nft),tdt=function(){return tdt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},tdt.apply(this,arguments)};function edt(t){return(0,vN.flow)((function(t){var e=t.options,n=e.percent,r=e.color,i=void 0===r?[]:r;if(!n)return t;var a={scale:{color:{range:i.length?i:[]}},data:[1,n]};return Object.assign(e,tdt({},a)),t}),lft,sft)(t)}var ndt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="TinyProgress",e}return ndt(e,t),e.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(t){return t},color:function(t,e){return e}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return edt},e}(nft),idt=function(){return idt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},idt.apply(this,arguments)};function adt(t){return(0,vN.flow)((function(t){var e=t.options.radius,n=void 0===e?.8:e;return(0,vN.set)(t,"options.coordinate.innerRadius",n),t}),(function(t){var e=t.options,n=e.percent,r=e.color,i=void 0===r?[]:r;if(!n)return t;var a={scale:{color:{range:i.length?i:[]}},data:[1,n]};return Object.assign(e,idt({},a)),t}),lft,sft)(t)}var odt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="TinyRing",e}return odt(e,t),e.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(t){return t},color:function(t,e){return e}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return adt},e}(nft);function udt(t){return(0,vN.flow)(sft)(t)}var cdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ldt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rose",e}return cdt(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return udt},e}(nft),fdt="__start__",ddt="__end__",hdt="__waterfall_value__",pdt=function(){return pdt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pdt.apply(this,arguments)};function vdt(t){return(0,vN.flow)((function(t){var e=t.options,n=e.data,r=void 0===n?[]:n,i=e.yField;return r.length?(r.reduce((function(t,e,n){var a,o=Pft(i),s=o(e,n,r);if(0===n||e.isTotal)e[fdt]=0,e[ddt]=s,e[hdt]=s;else{var u=null!==(a=t[ddt])&&void 0!==a?a:o(t,n,r);e[fdt]=u,e[ddt]=u+s,e[hdt]=t[ddt]}return e}),[]),Object.assign(e,{yField:[fdt,ddt]}),t):t}),(function(t){var e=t.options,n=e.data,r=void 0===n?[]:n,i=e.xField,a=e.children,o=e.linkStyle,s=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([],r,!0);return s.reduce((function(t,e,n){return n>0&&(e.x1=t[i],e.x2=e[i],e.y1=t[ddt]),e}),[]),s.shift(),a.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:s,style:pdt({stroke:"#697474"},o),label:!1,tooltip:!1}),t}),lft,sft)(t)}var gdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ydt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="waterfall",e}return gdt(e,t),e.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:hdt,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return vdt},e}(nft);function mdt(t){return(0,vN.flow)((function(t){var e=t.options,n=e.data,r=e.binNumber,i=e.binWidth,a=e.children,o=e.channel,s=void 0===o?"count":o,u=(0,vN.get)(a,"[0].transform[0]",{});return(0,vN.isNumber)(i)?((0,vN.assign)(u,{thresholds:(0,vN.ceil)((0,vN.divide)(n.length,i)),y:s}),t):(0,vN.isNumber)(r)?((0,vN.assign)(u,{thresholds:r,y:s}),t):t}),lft,sft)(t)}var bdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="Histogram",e}return bdt(e,t),e.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return mdt},e}(nft);function wdt(t){return(0,vN.flow)((function(t){var e=t.options,n=e.tooltip,r=void 0===n?{}:n,i=e.colorField,a=e.sizeField;return r&&!r.field&&(r.field=i||a),t}),(function(t){var e=t.options,n=e.mark,r=e.children;return n&&(r[0].type=n),t}),lft,sft)(t)}var kdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Edt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="heatmap",e}return kdt(e,t),e.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return wdt},e}(nft);function Odt(t){return(0,vN.flow)((function(t){var e=t.options.boxType,n=void 0===e?"box":e;return t.options.children[0].type=n,t}),lft,sft)(t)}var Sdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="box",e}return Sdt(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Odt},e}(nft);function Tdt(t){return(0,vN.flow)((function(t){var e=t.options,n=e.data,r=[{type:"custom",callback:function(t){return{links:t}}}];if((0,vN.isArray)(n))n.length>0?(0,vN.set)(e,"data",{value:n,transform:r}):delete e.children;else if("fetch"===(0,vN.get)(n,"type")&&(0,vN.get)(n,"value")){var i=(0,vN.get)(n,"transform");(0,vN.isArray)(i)?(0,vN.set)(n,"transform",i.concat(r)):(0,vN.set)(n,"transform",r)}return t}),lft,sft)(t)}var Adt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="sankey",e}return Adt(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Tdt},e}(nft);function Ndt(t){!function(t){var e=t.options.layout,n=void 0===e?"horizontal":e;t.options.coordinate.transform="horizontal"!==n?void 0:[{type:"transpose"}]}(t);var e=t.options.layout,n=void 0===e?"horizontal":e;return t.options.children.forEach((function(t){var e;(null===(e=null==t?void 0:t.coordinate)||void 0===e?void 0:e.transform)&&(t.coordinate.transform="horizontal"!==n?void 0:[{type:"transpose"}])})),t}var Cdt=function(){return Cdt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Cdt.apply(this,arguments)},_dt=["#f0efff","#5B8FF9","#3D76DD"];function Ldt(t,e,n,r){void 0===r&&(r=!0);var i=0,a=!1,o=(0,vN.map)(t,(function(t){var o,s,u=(0,vN.get)(t,[e]);if((0,vN.isNil)(u))return[];if((0,vN.isString)(u)){var c=Number(u);return isNaN(c)?[]:((o={})[n]=t[n],o[e]=c,o)}return(0,vN.isArray)(u)?(a=!0,i=Math.max(i,u.length),(0,vN.map)(r?u.sort((function(t,e){return e-t})):u,(function(r,i){var a;return(a={})[n]=t[n],a[e]=r,a.index=i,a}))):(i=Math.max(1,i),(s={})[n]=t[n],s[e]=u,s)})).flat();return a?[o.map((function(t){return Cdt({index:0},t)})),i]:[o,i]}function Rdt(t,e){return new Array(t).fill("").map((function(t,n){return(0,vN.isArray)(e)?e[n%e.length]:e}))}function jdt(t){return(0,vN.flow)((function(t){var e=t.options,n=e.color,r=e.rangeField,i=void 0===r?"ranges":r,a=e.measureField,o=void 0===a?"measures":a,s=e.targetField,u=void 0===s?"targets":s,c=e.xField,l=void 0===c?"title":c,f=e.mapField,d=e.data,h=Ldt(d,i,l),p=h[0],v=h[1],g=Ldt(d,o,l,!1),y=g[0],m=g[1],b=Ldt(d,u,l,!1),x=b[0],w=b[1],k=(0,vN.get)(n,[i],_dt[0]),E=(0,vN.get)(n,[o],_dt[1]),O=(0,vN.get)(n,[u],_dt[2]),S=[Rdt(v,k),Rdt(m,E),Rdt(w,O)].flat();return t.options.children=(0,vN.map)(t.options.children,(function(t,e){var n=[p,y,x][e],r=[i,o,u][e];return Cdt(Cdt({},t),{data:n,encode:Cdt(Cdt({},t.encode||{}),{x:l,y:r,color:function(t){var e=t.index,n=(0,vN.isNumber)(e)?"".concat(r,"_").concat(e):r;return f?(0,vN.get)(f,[r,e],n):n}}),style:Cdt(Cdt({},t.style||{}),{zIndex:function(t){return-t[r]}}),labels:0!==e?(0,vN.map)(t.labels,(function(t){return Cdt(Cdt({},t),{text:r})})):void 0})})),t.options.scale.color.range=S,t.options.legend.color.itemMarker=function(t){return f&&(0,vN.includes)(null==f?void 0:f[u],t)||(null==t?void 0:t.replace(/\_\d$/,""))===u?"line":"square"},t}),(function(t){var e=t.options.layout;return"horizontal"!==(void 0===e?"horizontal":e)&&(0,vN.set)(t,"options.children[2].shapeField","hyphen"),t}),(function(t){var e=t.options,n=e.range,r=void 0===n?{}:n,i=e.measure,a=void 0===i?{}:i,o=e.target,s=void 0===o?{}:o,u=e.children;return t.options.children=[r,a,s].map((function(t,e){return Wlt(u[e],t)})),t}),Ndt,sft)(t)}var Ddt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Idt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="bullet",e}return Ddt(e,t),e.getDefaultOptions=function(){return{type:"view",scale:{color:{range:_dt}},legend:{color:{itemMarker:function(t){return"target"===t?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return jdt},e}(nft);function Fdt(t){return(0,vN.flow)((function(t){var e=t.options.data;return t.options.data={value:e},t}),lft,sft)(t)}var zdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="Gauge",e}return zdt(e,t),e.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Fdt},e}(nft);function Gdt(t){return(0,vN.flow)((function(t){var e=t.options.percent;return(0,vN.isNumber)(e)&&((0,vN.set)(t,"options.data",e),delete t.options.percent),t}),lft,sft)(t)}var Wdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="Liquid",e}return Wdt(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Gdt},e}(nft);function Hdt(t){return(0,vN.flow)(lft,sft)(t)}var Ydt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Udt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="WordCloud",e}return Ydt(e,t),e.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Hdt},e}(nft);function qdt(t){return(0,vN.flow)((function(t){var e=t.options,n=e.data;return n&&(0,vN.set)(e,"data",{value:n}),t}),lft,sft)(t)}var Xdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="treemap",e}return Xdt(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return qdt},e}(nft),$dt=function(){return $dt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},$dt.apply(this,arguments)};function Zdt(t){return(0,vN.flow)((function(t){var e=t.options,n=e.startAngle,r=e.maxAngle,i=e.coordinate,a=(0,vN.isNumber)(n)?n/(2*Math.PI)*360:-90,o=(0,vN.isNumber)(r)?(Number(r)+a)/180*Math.PI:Math.PI;return(0,vN.set)(t,["options","coordinate"],$dt($dt({},i),{endAngle:o,startAngle:null!=n?n:-Math.PI/2})),t}),(function(t){var e=t.options,n=e.tooltip,r=e.xField,i=e.yField,a=Pft(r),o=Pft(i);return n||(0,vN.set)(e,"tooltip",{title:!1,items:[function(t,e,n){return{name:a(t,e,n),value:o(t,e,n)}}]}),t}),(function(t){var e=t.options,n=e.markBackground,r=e.children,i=e.scale,a=e.coordinate,o=e.xField,s=(0,vN.get)(i,"y.domain",[]);return n&&r.unshift($dt({type:"interval",xField:o,yField:s[s.length-1],colorField:n.color,scale:{color:{type:"identity"}},style:{fillOpacity:n.opacity,fill:n.color?void 0:"#e0e4ee"},coordinate:$dt($dt({},a),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},n)),t}),lft,sft)(t)}var Qdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="radial",e}return Qdt(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Zdt},e}(nft);function tht(t){return(0,vN.flow)(sft)(t)}var eht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="CirclePacking",e}return eht(e,t),e.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return tht},e}(nft),rht=function(){return rht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},rht.apply(this,arguments)};function iht(t){return(0,vN.flow)((function(t){var e=t.options,n=e.xField,r=e.yField,i=e.seriesField,a=e.children,o=null==a?void 0:a.map((function(t){return rht(rht({},t),{xField:n,yField:r,seriesField:i,colorField:i,data:"density"===t.type?{transform:[{type:"kde",field:r,groupBy:[n,i]}]}:t.data})})).filter((function(t){return"density"!==e.violinType||"density"===t.type}));return(0,vN.set)(e,"children",o),"polar"===e.violinType&&(0,vN.set)(e,"coordinate",{type:"polar"}),(0,vN.set)(e,"violinType",void 0),t}),lft,sft)(t)}var aht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="violin",e}return aht(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return iht},e}(nft),sht=function(){return sht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},sht.apply(this,arguments)};function uht(t){return(0,vN.flow)((function(t){var e=t.options,n=e.yField;return e.children.forEach((function(t,e){(0,vN.set)(t,"yField",n[e])})),t}),(function(t){var e=t.options,n=e.yField,r=e.children,i=e.data;if((0,vN.isPlainObject)(i))return t;var a=(0,vN.isArray)((0,vN.get)(i,[0]))?i:[i,i];return r.forEach((function(t,e){(0,vN.set)(t,"data",function(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([],a[e].map((function(t){return sht({groupKey:n[e]},t)})),!0))})),t}),(function(t){var e=t.options,n=e.yField,r=n[0],i=n[1];return e.tooltip||(0,vN.set)(e,"tooltip",{items:[{field:r,value:r},{field:i,value:i}]}),t}),(function(t){var e=t.options,n=e.children,r=e.layout,i=e.coordinate.transform,a=e.paddingBottom,o=void 0===a?48:a,s=e.paddingLeft,u=void 0===s?48:s,c=e.axis;(0,vN.set)(e,"axisText",sht(sht({},(null==c?void 0:c.x)||{}),{layout:r}));var l=n[0],f=n[1];if("vertical"===r)(0,vN.set)(e,"direction","col"),(0,vN.set)(e,"paddingLeft",u),(0,vN.set)(e,"coordinate.transform",i.filter((function(t){return"transpose"!==t.type}))),(0,vN.set)(l,"paddingBottom",16),(0,vN.set)(f,"paddingTop",16),(0,vN.set)(f,"axis.x.position","top"),(0,vN.set)(f,"scale.y.range",[0,1]);else{(0,vN.set)(e,"paddingBottom",o),(0,vN.set)(l,"scale.y.range",[0,1]);var d=l.paddingRight,h=void 0===d?32:d,p=f.paddingLeft,v=void 0===p?32:p;(0,vN.set)(l,"paddingRight",h),(0,vN.set)(l,"axis.x.position","right"),(0,vN.set)(f,"paddingLeft",v)}return t}),lft,sft)(t)}var cht,lht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="BidirectionalBar",e}return lht(e,t),e.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return uht},e}(nft);function dht(t){return(0,vN.flow)((function(t){var e=t.options,n=e.data,r=e.setsField,i=e.sizeField;return(0,vN.isArray)(n)&&((0,vN.set)(e,"data",{type:"inline",value:n,transform:[{type:"venn",sets:r,size:i,as:[cht.color,cht.d]}]}),(0,vN.set)(e,"colorField",r),(0,vN.set)(e,["children","0","encode","d"],cht.d)),(0,vN.set)(t,"options",(0,vN.omit)(e,["sizeField","setsField"])),t}),sft)(t)}!function(t){t.color="key",t.d="path"}(cht||(cht={}));var hht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="venn",e}return hht(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:cht.color,d:cht.d}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return dht},e}(nft);function vht(t){return(0,vN.flow)((function(t){return t}),sft)(t)}var ght=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="Sunburst",e}return ght(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return vht},e}(nft),mht={Base:ift,Line:Aft,Column:bft,Pie:Lft,Area:hft,Bar:yft,DualAxes:kft,Funnel:Sft,Scatter:Dft,Radar:zft,Rose:ldt,Stock:Hft,TinyLine:qft,TinyArea:$ft,TinyColumn:Jft,TinyProgress:rdt,TinyRing:sdt,Waterfall:ydt,Histogram:xdt,Heatmap:Edt,Box:Mdt,Sankey:Pdt,Bullet:Idt,Gauge:Bdt,Liquid:Vdt,WordCloud:Udt,Treemap:Kdt,RadialBar:Jdt,CirclePacking:nht,Violin:oht,BidirectionalBar:fht,Venn:pht,Mix:kft,Sunburst:yht},bht=function(){return bht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},bht.apply(this,arguments)},xht=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},wht=(0,gN.forwardRef)((function(t,e){var n=t.chartType,r=void 0===n?"Base":n,i=xht(t,["chartType"]),a=i.containerStyle,o=void 0===a?{height:"inherit",flex:1}:a,s=i.containerAttributes,u=void 0===s?{}:s,c=i.className,l=i.loading,f=i.loadingTemplate,d=i.errorTemplate,h=xht(i,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate"]),p=clt(mht[r],h),v=p.chart,g=p.container;return(0,gN.useImperativeHandle)(e,(function(){return v.current}),[v.current]),yN().createElement(alt,{errorTemplate:d},l&&yN().createElement(rlt,{loadingTemplate:f}),yN().createElement("div",bht({className:c,style:o,ref:g},u)))})),kht=function(){return kht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},kht.apply(this,arguments)};const Eht=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,kht({},t,{chartType:"Area",ref:e}))}));var Oht=function(){return Oht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Oht.apply(this,arguments)};const Sht=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Oht({},t,{chartType:"Bar",ref:e}))}));var Mht=function(){return Mht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Mht.apply(this,arguments)};const Tht=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Mht({},t,{chartType:"Column",ref:e}))}));var Aht=function(){return Aht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Aht.apply(this,arguments)};const Pht=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Aht({},t,{chartType:"DualAxes",ref:e}))}));var Nht=function(){return Nht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Nht.apply(this,arguments)};const Cht=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Nht({},t,{chartType:"Funnel",ref:e}))}));var _ht=function(){return _ht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},_ht.apply(this,arguments)};const Lht=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,_ht({},t,{chartType:"Line",ref:e}))}));var Rht=function(){return Rht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Rht.apply(this,arguments)};const jht=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Rht({},t,{chartType:"Pie",ref:e}))}));var Dht=function(){return Dht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Dht.apply(this,arguments)};const Iht=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Dht({},t,{chartType:"Scatter",ref:e}))}));var Fht=function(){return Fht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Fht.apply(this,arguments)};const zht=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Fht({},t,{chartType:"Radar",ref:e}))}));var Bht=function(){return Bht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Bht.apply(this,arguments)};const Ght=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Bht({},t,{chartType:"TinyLine",ref:e}))}));var Wht=function(){return Wht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Wht.apply(this,arguments)};const Vht=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Wht({},t,{chartType:"TinyArea",ref:e}))}));var Hht=function(){return Hht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Hht.apply(this,arguments)};const Yht=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Hht({},t,{chartType:"TinyColumn",ref:e}))}));var Uht=function(){return Uht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Uht.apply(this,arguments)},qht=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Uht({},t,{chartType:"TinyProgress",ref:e}))})),Xht=function(){return Xht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Xht.apply(this,arguments)},Kht={Line:Ght,Area:Vht,Column:Yht,Progress:qht,Ring:(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Xht({},t,{chartType:"TinyRing",ref:e}))}))},$ht=function(){return $ht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},$ht.apply(this,arguments)};const Zht=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,$ht({},t,{chartType:"Rose",ref:e}))}));var Qht=function(){return Qht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Qht.apply(this,arguments)};const Jht=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Qht({},t,{chartType:"Waterfall",ref:e}))}));var tpt=function(){return tpt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},tpt.apply(this,arguments)};const ept=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,tpt({},t,{chartType:"Histogram",ref:e}))}));var npt=function(){return npt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},npt.apply(this,arguments)};const rpt=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,npt({},t,{chartType:"Heatmap",ref:e}))}));var ipt=function(){return ipt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ipt.apply(this,arguments)};const apt=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,ipt({},t,{chartType:"Box",ref:e}))}));var opt=function(){return opt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},opt.apply(this,arguments)};const spt=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,opt({},t,{chartType:"Sankey",ref:e}))}));var upt=function(){return upt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},upt.apply(this,arguments)};const cpt=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,upt({},t,{chartType:"Stock",ref:e}))}));var lpt=function(){return lpt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},lpt.apply(this,arguments)};const fpt=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,lpt({},t,{chartType:"Bullet",ref:e}))}));var dpt=function(){return dpt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},dpt.apply(this,arguments)};const hpt=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,dpt({},t,{chartType:"Gauge",ref:e}))}));var ppt=function(){return ppt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ppt.apply(this,arguments)};const vpt=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,ppt({},t,{chartType:"Liquid",ref:e}))}));var gpt=function(){return gpt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},gpt.apply(this,arguments)};const ypt=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,gpt({},t,{chartType:"WordCloud",ref:e}))}));var mpt=function(){return mpt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},mpt.apply(this,arguments)};const bpt=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,mpt({},t,{chartType:"Treemap",ref:e}))}));var xpt=function(){return xpt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},xpt.apply(this,arguments)};const wpt=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,xpt({},t,{chartType:"RadialBar",ref:e}))}));var kpt=function(){return kpt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},kpt.apply(this,arguments)};const Ept=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,kpt({},t,{chartType:"CirclePacking",ref:e}))}));var Opt=function(){return Opt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Opt.apply(this,arguments)};const Spt=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Opt({},t,{chartType:"Violin",ref:e}))}));var Mpt=function(){return Mpt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Mpt.apply(this,arguments)};const Tpt=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Mpt({},t,{chartType:"BidirectionalBar",ref:e}))}));var Apt=function(){return Apt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Apt.apply(this,arguments)};const Ppt=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Apt({},t,{chartType:"Venn",ref:e}))}));var Npt=function(){return Npt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Npt.apply(this,arguments)};const Cpt=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,Npt({},t,{chartType:"Mix",ref:e}))}));var _pt=function(){return _pt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},_pt.apply(this,arguments)};const Lpt=(0,gN.forwardRef)((function(t,e){return yN().createElement(wht,_pt({},t,{chartType:"Sunburst",ref:e}))}))})(),u})()));
//# sourceMappingURL=charts.min.js.map