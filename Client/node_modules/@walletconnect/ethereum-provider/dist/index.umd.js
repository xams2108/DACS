(function($r,jt){typeof exports=="object"&&typeof module<"u"?jt(exports):typeof define=="function"&&define.amd?define(["exports"],jt):($r=typeof globalThis<"u"?globalThis:$r||self,jt($r["@walletconnect/ethereum-provider"]={}))})(this,function($r){"use strict";var jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Pl(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}),r}var It={exports:{}},Kn=typeof Reflect=="object"?Reflect:null,Gf=Kn&&typeof Kn.apply=="function"?Kn.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},Pa;Kn&&typeof Kn.ownKeys=="function"?Pa=Kn.ownKeys:Object.getOwnPropertySymbols?Pa=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Pa=function(e){return Object.getOwnPropertyNames(e)};function $y(t){console&&console.warn&&console.warn(t)}var Zf=Number.isNaN||function(e){return e!==e};function be(){be.init.call(this)}It.exports=be,It.exports.once=Py,be.EventEmitter=be,be.prototype._events=void 0,be.prototype._eventsCount=0,be.prototype._maxListeners=void 0;var Yf=10;function Oa(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(be,"defaultMaxListeners",{enumerable:!0,get:function(){return Yf},set:function(t){if(typeof t!="number"||t<0||Zf(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Yf=t}}),be.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},be.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Zf(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Jf(t){return t._maxListeners===void 0?be.defaultMaxListeners:t._maxListeners}be.prototype.getMaxListeners=function(){return Jf(this)},be.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=e==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")Gf(c,this,r);else for(var l=c.length,u=r0(c,l),i=0;i<l;++i)Gf(u[i],this,r);return!0};function Qf(t,e,r,i){var n,s,o;if(Oa(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),n=Jf(t),n>0&&o.length>n&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,$y(a)}return t}be.prototype.addListener=function(e,r){return Qf(this,e,r,!1)},be.prototype.on=be.prototype.addListener,be.prototype.prependListener=function(e,r){return Qf(this,e,r,!0)};function Iy(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Xf(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=Iy.bind(i);return n.listener=r,i.wrapFn=n,n}be.prototype.once=function(e,r){return Oa(r),this.on(e,Xf(this,e,r)),this},be.prototype.prependOnceListener=function(e,r){return Oa(r),this.prependListener(e,Xf(this,e,r)),this},be.prototype.removeListener=function(e,r){var i,n,s,o,a;if(Oa(r),n=this._events,n===void 0)return this;if(i=n[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===r||i[o].listener===r){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():Sy(i,s),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},be.prototype.off=be.prototype.removeListener,be.prototype.removeAllListeners=function(e){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(n=0;n<s.length;++n)o=s[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(e,r[n]);return this};function e0(t,e,r){var i=t._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?Ay(n):r0(n,n.length)}be.prototype.listeners=function(e){return e0(this,e,!0)},be.prototype.rawListeners=function(e){return e0(this,e,!1)},be.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):t0.call(t,e)},be.prototype.listenerCount=t0;function t0(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}be.prototype.eventNames=function(){return this._eventsCount>0?Pa(this._events):[]};function r0(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function Sy(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Ay(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Py(t,e){return new Promise(function(r,i){function n(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",n),r([].slice.call(arguments))}i0(t,e,s,{once:!0}),e!=="error"&&Oy(t,n,{once:!0})})}function Oy(t,e,r){typeof t.on=="function"&&i0(t,"error",e,r)}function i0(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(s){i.once&&t.removeEventListener(e,n),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var n0=function(t,e,r){if(r||arguments.length===2)for(var i=0,n=e.length,s;i<n;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))},Cy=function(){function t(e,r,i){this.name=e,this.version=r,this.os=i,this.type="browser"}return t}(),Dy=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),My=function(){function t(e,r,i,n){this.name=e,this.version=r,this.os=i,this.bot=n,this.type="bot-device"}return t}(),Ty=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Ry=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Ny=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,By=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,s0=3,Ly=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Ny]],o0=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Fy(t){return t?a0(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ry:typeof navigator<"u"?a0(navigator.userAgent):ky()}function Uy(t){return t!==""&&Ly.reduce(function(e,r){var i=r[0],n=r[1];if(e)return e;var s=n.exec(t);return!!s&&[i,s]},!1)}function a0(t){var e=Uy(t);if(!e)return null;var r=e[0],i=e[1];if(r==="searchbot")return new Ty;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<s0&&(n=n0(n0([],n,!0),qy(s0-n.length),!0)):n=[];var s=n.join("."),o=jy(t),a=By.exec(t);return a&&a[1]?new My(r,s,o,a[1]):new Cy(r,s,o)}function jy(t){for(var e=0,r=o0.length;e<r;e++){var i=o0[e],n=i[0],s=i[1],o=s.exec(t);if(o)return n}return null}function ky(){var t=typeof process<"u"&&process.version;return t?new Dy(process.version.slice(1)):null}function qy(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var z={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Ol=function(t,e){return Ol=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Ol(t,e)};function zy(t,e){Ol(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Cl=function(){return Cl=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Cl.apply(this,arguments)};function Hy(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function Wy(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}function Vy(t,e){return function(r,i){e(r,i,t)}}function Ky(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Gy(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):n(u.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}function Zy(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=l[0]&2?n.return:l[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,l[1])).done)return s;switch(n=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],n=0}finally{i=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Yy(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}function Jy(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Dl(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c0(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,s=[],o;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function Qy(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c0(arguments[e]));return t}function Xy(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function ho(t){return this instanceof ho?(this.v=t,this):new ho(t)}function ew(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),n,s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(p){i[p]&&(n[p]=function(m){return new Promise(function(v,w){s.push([p,m,v,w])>1||a(p,m)})})}function a(p,m){try{c(i[p](m))}catch(v){d(s[0][3],v)}}function c(p){p.value instanceof ho?Promise.resolve(p.value.v).then(l,u):d(s[0][2],p)}function l(p){a("next",p)}function u(p){a("throw",p)}function d(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function tw(t){var e,r;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=t[n]?function(o){return(r=!r)?{value:ho(t[n](o)),done:n==="return"}:s?s(o):o}:s}}function rw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Dl=="function"?Dl(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),n(a,c,o.done,o.value)})}}function n(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function iw(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function nw(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function sw(t){return t&&t.__esModule?t:{default:t}}function ow(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function aw(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var cw=Object.freeze({__proto__:null,__extends:zy,get __assign(){return Cl},__rest:Hy,__decorate:Wy,__param:Vy,__metadata:Ky,__awaiter:Gy,__generator:Zy,__createBinding:Yy,__exportStar:Jy,__values:Dl,__read:c0,__spread:Qy,__spreadArrays:Xy,__await:ho,__asyncGenerator:ew,__asyncDelegator:tw,__asyncValues:rw,__makeTemplateObject:iw,__importStar:nw,__importDefault:sw,__classPrivateFieldGet:ow,__classPrivateFieldSet:aw}),Ca=Pl(cw),Ml={},fo={},l0;function lw(){if(l0)return fo;l0=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return fo.delay=t,fo}var an={},Tl={},cn={},u0;function uw(){return u0||(u0=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.ONE_THOUSAND=cn.ONE_HUNDRED=void 0,cn.ONE_HUNDRED=100,cn.ONE_THOUSAND=1e3),cn}var Rl={},h0;function hw(){return h0||(h0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Rl)),Rl}var d0;function f0(){return d0||(d0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ca;e.__exportStar(uw(),t),e.__exportStar(hw(),t)}(Tl)),Tl}var p0;function dw(){if(p0)return an;p0=1,Object.defineProperty(an,"__esModule",{value:!0}),an.fromMiliseconds=an.toMiliseconds=void 0;const t=f0();function e(i){return i*t.ONE_THOUSAND}an.toMiliseconds=e;function r(i){return Math.floor(i/t.ONE_THOUSAND)}return an.fromMiliseconds=r,an}var g0;function fw(){return g0||(g0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ca;e.__exportStar(lw(),t),e.__exportStar(dw(),t)}(Ml)),Ml}var Gn={},b0;function pw(){if(b0)return Gn;b0=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const i=this.get(r);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const n=Date.now()-i.started;this.timestamps.set(r,{started:i.started,elapsed:n})}get(r){const i=this.timestamps.get(r);if(typeof i>"u")throw new Error(`No timestamp found for label: ${r}`);return i}elapsed(r){const i=this.get(r);return i.elapsed||Date.now()-i.started}}return Gn.Watch=t,Gn.default=t,Gn}var Nl={},po={},m0;function gw(){if(m0)return po;m0=1,Object.defineProperty(po,"__esModule",{value:!0}),po.IWatch=void 0;class t{}return po.IWatch=t,po}var v0;function bw(){return v0||(v0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Ca.__exportStar(gw(),t)}(Nl)),Nl}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ca;e.__exportStar(fw(),t),e.__exportStar(pw(),t),e.__exportStar(bw(),t),e.__exportStar(f0(),t)})(z);var _e={};Object.defineProperty(_e,"__esModule",{value:!0}),_e.getLocalStorage=_e.getLocalStorageOrThrow=_e.getCrypto=_e.getCryptoOrThrow=y0=_e.getLocation=_e.getLocationOrThrow=Bl=_e.getNavigator=_e.getNavigatorOrThrow=go=_e.getDocument=_e.getDocumentOrThrow=_e.getFromWindowOrThrow=_e.getFromWindow=void 0;function ln(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}_e.getFromWindow=ln;function Zn(t){const e=ln(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}_e.getFromWindowOrThrow=Zn;function mw(){return Zn("document")}_e.getDocumentOrThrow=mw;function vw(){return ln("document")}var go=_e.getDocument=vw;function yw(){return Zn("navigator")}_e.getNavigatorOrThrow=yw;function ww(){return ln("navigator")}var Bl=_e.getNavigator=ww;function _w(){return Zn("location")}_e.getLocationOrThrow=_w;function Ew(){return ln("location")}var y0=_e.getLocation=Ew;function xw(){return Zn("crypto")}_e.getCryptoOrThrow=xw;function $w(){return ln("crypto")}_e.getCrypto=$w;function Iw(){return Zn("localStorage")}_e.getLocalStorageOrThrow=Iw;function Sw(){return ln("localStorage")}_e.getLocalStorage=Sw;var Ll={};Object.defineProperty(Ll,"__esModule",{value:!0});var w0=Ll.getWindowMetadata=void 0;const _0=_e;function Aw(){let t,e;try{t=_0.getDocumentOrThrow(),e=_0.getLocationOrThrow()}catch{return null}function r(){const d=t.getElementsByTagName("link"),p=[];for(let m=0;m<d.length;m++){const v=d[m],w=v.getAttribute("rel");if(w&&w.toLowerCase().indexOf("icon")>-1){const S=v.getAttribute("href");if(S)if(S.toLowerCase().indexOf("https:")===-1&&S.toLowerCase().indexOf("http:")===-1&&S.indexOf("//")!==0){let x=e.protocol+"//"+e.host;if(S.indexOf("/")===0)x+=S;else{const A=e.pathname.split("/");A.pop();const C=A.join("/");x+=C+"/"+S}p.push(x)}else if(S.indexOf("//")===0){const x=e.protocol+S;p.push(x)}else p.push(S)}}return p}function i(...d){const p=t.getElementsByTagName("meta");for(let m=0;m<p.length;m++){const v=p[m],w=["itemprop","property","name"].map(S=>v.getAttribute(S)).filter(S=>S?d.includes(S):!1);if(w.length&&w){const S=v.getAttribute("content");if(S)return S}}return""}function n(){let d=i("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function s(){return i("description","og:description","twitter:description","keywords")}const o=n(),a=s(),c=e.origin,l=r();return{description:a,url:c,icons:l,name:o}}w0=Ll.getWindowMetadata=Aw;function bo(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function E0(t){return bo(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const x0="2.23.2";let Fl={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${x0}`};class un extends Error{constructor(e,r={}){const i=r.cause instanceof un?r.cause.details:r.cause?.message?r.cause.message:r.details,n=r.cause instanceof un&&r.cause.docsPath||r.docsPath,s=Fl.getDocsUrl?.({...r,docsPath:n}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...i?[`Details: ${i}`]:[],...Fl.version?[`Version: ${Fl.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=i,this.docsPath=n,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=x0}walk(e){return $0(this,e)}}function $0(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?$0(t.cause,e):e?null:t}class I0 extends un{constructor({size:e,targetSize:r,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function Yn(t,{dir:e,size:r=32}={}){return typeof t=="string"?Pw(t,{dir:e,size:r}):Ow(t,{dir:e,size:r})}function Pw(t,{dir:e,size:r=32}={}){if(r===null)return t;const i=t.replace("0x","");if(i.length>r*2)throw new I0({size:Math.ceil(i.length/2),targetSize:r,type:"hex"});return`0x${i[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function Ow(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new I0({size:t.length,targetSize:r,type:"bytes"});const i=new Uint8Array(r);for(let n=0;n<r;n++){const s=e==="right";i[s?n:r-n-1]=t[s?n:t.length-n-1]}return i}class Cw extends un{constructor({max:e,min:r,signed:i,size:n,value:s}){super(`Number "${s}" is not in safe ${n?`${n*8}-bit ${i?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class Dw extends un{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Jn(t,{size:e}){if(E0(t)>e)throw new Dw({givenSize:E0(t),maxSize:e})}function Ul(t,e={}){const{signed:r}=e;e.size&&Jn(t,{size:e.size});const i=BigInt(t);if(!r)return i;const n=(t.length-2)/2,s=(1n<<BigInt(n)*8n-1n)-1n;return i<=s?i:i-BigInt(`0x${"f".padStart(n*2,"f")}`)-1n}function Mw(t,e={}){return Number(Ul(t,e))}const Tw=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function jl(t,e={}){return typeof t=="number"||typeof t=="bigint"?A0(t,e):typeof t=="string"?Bw(t,e):typeof t=="boolean"?Rw(t,e):S0(t,e)}function Rw(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(Jn(r,{size:e.size}),Yn(r,{size:e.size})):r}function S0(t,e={}){let r="";for(let n=0;n<t.length;n++)r+=Tw[t[n]];const i=`0x${r}`;return typeof e.size=="number"?(Jn(i,{size:e.size}),Yn(i,{dir:"right",size:e.size})):i}function A0(t,e={}){const{signed:r,size:i}=e,n=BigInt(t);let s;i?r?s=(1n<<BigInt(i)*8n-1n)-1n:s=2n**(BigInt(i)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&n>s||n<o){const c=typeof t=="bigint"?"n":"";throw new Cw({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:i,value:`${t}${c}`})}const a=`0x${(r&&n<0?(1n<<BigInt(i*8))+BigInt(n):n).toString(16)}`;return i?Yn(a,{size:i}):a}const Nw=new TextEncoder;function Bw(t,e={}){const r=Nw.encode(t);return S0(r,e)}const Lw=new TextEncoder;function Fw(t,e={}){return typeof t=="number"||typeof t=="bigint"?jw(t,e):typeof t=="boolean"?Uw(t,e):bo(t)?O0(t,e):C0(t,e)}function Uw(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(Jn(r,{size:e.size}),Yn(r,{size:e.size})):r}const li={zero:48,nine:57,A:65,F:70,a:97,f:102};function P0(t){if(t>=li.zero&&t<=li.nine)return t-li.zero;if(t>=li.A&&t<=li.F)return t-(li.A-10);if(t>=li.a&&t<=li.f)return t-(li.a-10)}function O0(t,e={}){let r=t;e.size&&(Jn(r,{size:e.size}),r=Yn(r,{dir:"right",size:e.size}));let i=r.slice(2);i.length%2&&(i=`0${i}`);const n=i.length/2,s=new Uint8Array(n);for(let o=0,a=0;o<n;o++){const c=P0(i.charCodeAt(a++)),l=P0(i.charCodeAt(a++));if(c===void 0||l===void 0)throw new un(`Invalid byte sequence ("${i[a-2]}${i[a-1]}" in "${i}").`);s[o]=c*16+l}return s}function jw(t,e){const r=A0(t,e);return O0(r)}function C0(t,e={}){const r=Lw.encode(t);return typeof e.size=="number"?(Jn(r,{size:e.size}),Yn(r,{dir:"right",size:e.size})):r}function Da(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function kw(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function mo(t,...e){if(!kw(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function qw(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Da(t.outputLen),Da(t.blockLen)}function Qn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function D0(t,e){mo(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Ma=BigInt(2**32-1),M0=BigInt(32);function zw(t,e=!1){return e?{h:Number(t&Ma),l:Number(t>>M0&Ma)}:{h:Number(t>>M0&Ma)|0,l:Number(t&Ma)|0}}function Hw(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let n=0;n<t.length;n++){const{h:s,l:o}=zw(t[n],e);[r[n],i[n]]=[s,o]}return[r,i]}const Ww=(t,e,r)=>t<<r|e>>>32-r,Vw=(t,e,r)=>e<<r|t>>>32-r,Kw=(t,e,r)=>e<<r-32|t>>>64-r,Gw=(t,e,r)=>t<<r-32|e>>>64-r,Xn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Zw(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function kl(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Nr(t,e){return t<<32-e|t>>>e}const T0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Yw(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function R0(t){for(let e=0;e<t.length;e++)t[e]=Yw(t[e])}function Jw(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Ta(t){return typeof t=="string"&&(t=Jw(t)),mo(t),t}function Qw(...t){let e=0;for(let i=0;i<t.length;i++){const n=t[i];mo(n),e+=n.length}const r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){const s=t[i];r.set(s,n),n+=s.length}return r}class ql{clone(){return this._cloneInto()}}function N0(t){const e=i=>t().update(Ta(i)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function B0(t=32){if(Xn&&typeof Xn.getRandomValues=="function")return Xn.getRandomValues(new Uint8Array(t));if(Xn&&typeof Xn.randomBytes=="function")return Xn.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const L0=[],F0=[],U0=[],Xw=BigInt(0),vo=BigInt(1),e3=BigInt(2),t3=BigInt(7),r3=BigInt(256),i3=BigInt(113);for(let t=0,e=vo,r=1,i=0;t<24;t++){[r,i]=[i,(2*r+3*i)%5],L0.push(2*(5*i+r)),F0.push((t+1)*(t+2)/2%64);let n=Xw;for(let s=0;s<7;s++)e=(e<<vo^(e>>t3)*i3)%r3,e&e3&&(n^=vo<<(vo<<BigInt(s))-vo);U0.push(n)}const[n3,s3]=Hw(U0,!0),j0=(t,e,r)=>r>32?Kw(t,e,r):Ww(t,e,r),k0=(t,e,r)=>r>32?Gw(t,e,r):Vw(t,e,r);function o3(t,e=24){const r=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],d=j0(l,u,1)^r[a],p=k0(l,u,1)^r[a+1];for(let m=0;m<50;m+=10)t[o+m]^=d,t[o+m+1]^=p}let n=t[2],s=t[3];for(let o=0;o<24;o++){const a=F0[o],c=j0(n,s,a),l=k0(n,s,a),u=L0[o];n=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=n3[i],t[1]^=s3[i]}r.fill(0)}class zl extends ql{constructor(e,r,i,n=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=i,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Da(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Zw(this.state)}keccak(){T0||R0(this.state32),o3(this.state32,this.rounds),T0||R0(this.state32),this.posOut=0,this.pos=0}update(e){Qn(this);const{blockLen:r,state:i}=this;e=Ta(e);const n=e.length;for(let s=0;s<n;){const o=Math.min(r-this.pos,n-s);for(let a=0;a<o;a++)i[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:i,blockLen:n}=this;e[i]^=r,(r&128)!==0&&i===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){Qn(this,!1),mo(e),this.finish();const r=this.state,{blockLen:i}=this;for(let n=0,s=e.length;n<s;){this.posOut>=i&&this.keccak();const o=Math.min(i-this.posOut,s-n);e.set(r.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Da(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(D0(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:i,outputLen:n,rounds:s,enableXOF:o}=this;return e||(e=new zl(r,i,n,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=i,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}const q0=((t,e,r)=>N0(()=>new zl(e,t,r)))(1,136,256/8);function z0(t,e){const r=e||"hex",i=q0(bo(t,{strict:!1})?Fw(t):t);return r==="bytes"?i:jl(i)}class H0 extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const i=this.keys().next().value;i&&this.delete(i)}return this}}const Hl=new H0(8192);function a3(t,e){if(Hl.has(`${t}.${e}`))return Hl.get(`${t}.${e}`);const r=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),i=z0(C0(r),"bytes"),n=(e?r.substring(`${e}0x`.length):r).split("");for(let o=0;o<40;o+=2)i[o>>1]>>4>=8&&n[o]&&(n[o]=n[o].toUpperCase()),(i[o>>1]&15)>=8&&n[o+1]&&(n[o+1]=n[o+1].toUpperCase());const s=`0x${n.join("")}`;return Hl.set(`${t}.${e}`,s),s}function c3(t){const e=z0(`0x${t.substring(4)}`).substring(26);return a3(`0x${e}`)}async function l3({hash:t,signature:e}){const r=bo(t)?t:jl(t),{secp256k1:i}=await Promise.resolve().then(function(){return z4});return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:p}=e,m=Number(p??d),v=W0(m);return new i.Signature(Ul(l),Ul(u)).addRecoveryBit(v)}const o=bo(e)?e:jl(e),a=Mw(`0x${o.slice(130)}`),c=W0(a);return i.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function W0(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function u3({hash:t,signature:e}){return c3(await l3({hash:t,signature:e}))}function h3(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,l=i?0:4;t.setUint32(e+c,o,i),t.setUint32(e+l,a,i)}function d3(t,e,r){return t&e^~t&r}function f3(t,e,r){return t&e^t&r^e&r}class p3 extends ql{constructor(e,r,i,n){super(),this.blockLen=e,this.outputLen=r,this.padOffset=i,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=kl(this.buffer)}update(e){Qn(this);const{view:r,buffer:i,blockLen:n}=this;e=Ta(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(n-this.pos,s-o);if(a===n){const c=kl(e);for(;n<=s-o;o+=n)this.process(c,o);continue}i.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Qn(this),D0(e,this),this.finished=!0;const{buffer:r,view:i,blockLen:n,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(i,0),o=0);for(let d=o;d<n;d++)r[d]=0;h3(i,n-8,BigInt(this.length*8),s),this.process(i,0);const a=kl(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:i,length:n,finished:s,destroyed:o,pos:a}=this;return e.length=n,e.pos=a,e.finished=s,e.destroyed=o,n%r&&e.buffer.set(i),e}}const g3=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ai=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Pi=new Uint32Array(64);class b3 extends p3{constructor(){super(64,32,8,!1),this.A=Ai[0]|0,this.B=Ai[1]|0,this.C=Ai[2]|0,this.D=Ai[3]|0,this.E=Ai[4]|0,this.F=Ai[5]|0,this.G=Ai[6]|0,this.H=Ai[7]|0}get(){const{A:e,B:r,C:i,D:n,E:s,F:o,G:a,H:c}=this;return[e,r,i,n,s,o,a,c]}set(e,r,i,n,s,o,a,c){this.A=e|0,this.B=r|0,this.C=i|0,this.D=n|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)Pi[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const p=Pi[d-15],m=Pi[d-2],v=Nr(p,7)^Nr(p,18)^p>>>3,w=Nr(m,17)^Nr(m,19)^m>>>10;Pi[d]=w+Pi[d-7]+v+Pi[d-16]|0}let{A:i,B:n,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const p=Nr(a,6)^Nr(a,11)^Nr(a,25),m=u+p+d3(a,c,l)+g3[d]+Pi[d]|0,w=(Nr(i,2)^Nr(i,13)^Nr(i,22))+f3(i,n,s)|0;u=l,l=c,c=a,a=o+m|0,o=s,s=n,n=i,i=m+w|0}i=i+this.A|0,n=n+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(i,n,s,o,a,c,l,u)}roundClean(){Pi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ra=N0(()=>new b3);new H0(128);const m3=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),V0=new Uint8Array(new Array(16).fill(0).map((t,e)=>e)),v3=V0.map(t=>(9*t+5)%16);let y3=[V0],w3=[v3];for(let t=0;t<4;t++)for(let e of[y3,w3])e.push(e[t].map(r=>m3[r]));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Na=BigInt(0),Ba=BigInt(1),_3=BigInt(2);function hn(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Br(t){if(!hn(t))throw new Error("Uint8Array expected")}function es(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const E3=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ts(t){Br(t);let e="";for(let r=0;r<t.length;r++)e+=E3[t[r]];return e}function rs(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Wl(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Na:BigInt("0x"+t)}const ui={_0:48,_9:57,A:65,F:70,a:97,f:102};function K0(t){if(t>=ui._0&&t<=ui._9)return t-ui._0;if(t>=ui.A&&t<=ui.F)return t-(ui.A-10);if(t>=ui.a&&t<=ui.f)return t-(ui.a-10)}function is(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(r);for(let n=0,s=0;n<r;n++,s+=2){const o=K0(t.charCodeAt(s)),a=K0(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}i[n]=o*16+a}return i}function Lr(t){return Wl(ts(t))}function Vl(t){return Br(t),Wl(ts(Uint8Array.from(t).reverse()))}function Oi(t,e){return is(t.toString(16).padStart(e*2,"0"))}function Kl(t,e){return Oi(t,e).reverse()}function x3(t){return is(rs(t))}function Rt(t,e,r){let i;if(typeof e=="string")try{i=is(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(hn(e))i=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const n=i.length;if(typeof r=="number"&&n!==r)throw new Error(t+" of length "+r+" expected, got "+n);return i}function rr(...t){let e=0;for(let i=0;i<t.length;i++){const n=t[i];Br(n),e+=n.length}const r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){const s=t[i];r.set(s,n),n+=s.length}return r}function $3(t,e){if(t.length!==e.length)return!1;let r=0;for(let i=0;i<t.length;i++)r|=t[i]^e[i];return r===0}function La(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const Gl=t=>typeof t=="bigint"&&Na<=t;function ns(t,e,r){return Gl(t)&&Gl(e)&&Gl(r)&&e<=t&&t<r}function Ci(t,e,r,i){if(!ns(e,r,i))throw new Error("expected valid "+t+": "+r+" <= n < "+i+", got "+e)}function G0(t){let e;for(e=0;t>Na;t>>=Ba,e+=1);return e}function I3(t,e){return t>>BigInt(e)&Ba}function S3(t,e,r){return t|(r?Ba:Na)<<BigInt(e)}const Zl=t=>(_3<<BigInt(t-1))-Ba,Yl=t=>new Uint8Array(t),Z0=t=>Uint8Array.from(t);function Y0(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let i=Yl(t),n=Yl(t),s=0;const o=()=>{i.fill(1),n.fill(0),s=0},a=(...d)=>r(n,i,...d),c=(d=Yl())=>{n=a(Z0([0]),d),i=a(),d.length!==0&&(n=a(Z0([1]),d),i=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const p=[];for(;d<e;){i=a();const m=i.slice();p.push(m),d+=i.length}return rr(...p)};return(d,p)=>{o(),c(d);let m;for(;!(m=p(l()));)c();return o(),m}}const A3={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||hn(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function ss(t,e,r={}){const i=(n,s,o)=>{const a=A3[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[n];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(n)+" is invalid. Expected "+s+", got "+c)};for(const[n,s]of Object.entries(e))i(n,s,!1);for(const[n,s]of Object.entries(r))i(n,s,!0);return t}const P3=()=>{throw new Error("not implemented")};function Jl(t){const e=new WeakMap;return(r,...i)=>{const n=e.get(r);if(n!==void 0)return n;const s=t(r,...i);return e.set(r,s),s}}var O3=Object.freeze({__proto__:null,isBytes:hn,abytes:Br,abool:es,bytesToHex:ts,numberToHexUnpadded:rs,hexToNumber:Wl,hexToBytes:is,bytesToNumberBE:Lr,bytesToNumberLE:Vl,numberToBytesBE:Oi,numberToBytesLE:Kl,numberToVarBytesBE:x3,ensureBytes:Rt,concatBytes:rr,equalBytes:$3,utf8ToBytes:La,inRange:ns,aInRange:Ci,bitLen:G0,bitGet:I3,bitSet:S3,bitMask:Zl,createHmacDrbg:Y0,validateObject:ss,notImplemented:P3,memoized:Jl});const C3="0.1.1";function D3(){return C3}class kt extends Error{constructor(e,r={}){const i=(()=>{if(r.cause instanceof kt){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause?.message?r.cause.message:r.details})(),n=r.cause instanceof kt&&r.cause.docsPath||r.docsPath,o=`https://oxlib.sh${n??""}`,a=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...i||n?["",i?`Details: ${i}`:void 0,n?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${D3()}`}),this.cause=r.cause,this.details=i,this.docs=o,this.docsPath=n,this.shortMessage=e}walk(e){return J0(this,e)}}function J0(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?J0(t.cause,e):e?null:t}function M3(t,e){if(ep(t)>e)throw new j3({givenSize:ep(t),maxSize:e})}const hi={zero:48,nine:57,A:65,F:70,a:97,f:102};function Q0(t){if(t>=hi.zero&&t<=hi.nine)return t-hi.zero;if(t>=hi.A&&t<=hi.F)return t-(hi.A-10);if(t>=hi.a&&t<=hi.f)return t-(hi.a-10)}function T3(t,e={}){const{dir:r,size:i=32}=e;if(i===0)return t;if(t.length>i)throw new k3({size:t.length,targetSize:i,type:"Bytes"});const n=new Uint8Array(i);for(let s=0;s<i;s++){const o=r==="right";n[o?s:i-s-1]=t[o?s:t.length-s-1]}return n}function Ql(t,e){if(eu(t)>e)throw new G3({givenSize:eu(t),maxSize:e})}function X0(t,e={}){const{dir:r,size:i=32}=e;if(i===0)return t;const n=t.replace("0x","");if(n.length>i*2)throw new Z3({size:Math.ceil(n.length/2),targetSize:i,type:"Hex"});return`0x${n[r==="right"?"padEnd":"padStart"](i*2,"0")}`}const R3=new TextEncoder;function N3(t){return t instanceof Uint8Array?t:typeof t=="string"?L3(t):B3(t)}function B3(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function L3(t,e={}){const{size:r}=e;let i=t;r&&(Ql(t,r),i=Xl(t,r));let n=i.slice(2);n.length%2&&(n=`0${n}`);const s=n.length/2,o=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const l=Q0(n.charCodeAt(c++)),u=Q0(n.charCodeAt(c++));if(l===void 0||u===void 0)throw new kt(`Invalid byte sequence ("${n[c-2]}${n[c-1]}" in "${n}").`);o[a]=l*16+u}return o}function F3(t,e={}){const{size:r}=e,i=R3.encode(t);return typeof r=="number"?(M3(i,r),U3(i,r)):i}function U3(t,e){return T3(t,{dir:"right",size:e})}function ep(t){return t.length}class j3 extends kt{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class k3 extends kt{constructor({size:e,targetSize:r,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}const q3=new TextEncoder,z3=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function tp(...t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function H3(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(Ql(r,e.size),Fa(r,e.size)):r}function rp(t,e={}){let r="";for(let n=0;n<t.length;n++)r+=z3[t[n]];const i=`0x${r}`;return typeof e.size=="number"?(Ql(i,e.size),Xl(i,e.size)):i}function W3(t,e={}){const{signed:r,size:i}=e,n=BigInt(t);let s;i?r?s=(1n<<BigInt(i)*8n-1n)-1n:s=2n**(BigInt(i)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&n>s||n<o){const l=typeof t=="bigint"?"n":"";throw new K3({max:s?`${s}${l}`:void 0,min:`${o}${l}`,signed:r,size:i,value:`${t}${l}`})}const c=`0x${(r&&n<0?(1n<<BigInt(i*8))+BigInt(n):n).toString(16)}`;return i?Fa(c,i):c}function V3(t,e={}){return rp(q3.encode(t),e)}function Fa(t,e){return X0(t,{dir:"left",size:e})}function Xl(t,e){return X0(t,{dir:"right",size:e})}function eu(t){return Math.ceil((t.length-2)/2)}class K3 extends kt{constructor({max:e,min:r,signed:i,size:n,value:s}){super(`Number \`${s}\` is not in safe${n?` ${n*8}-bit`:""}${i?" signed":" unsigned"} integer range ${e?`(\`${r}\` to \`${e}\`)`:`(above \`${r}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class G3 extends kt{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class Z3 extends kt{constructor({size:e,targetSize:r,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function Y3(t,e={}){const{as:r=typeof t=="string"?"Hex":"Bytes"}=e,i=q0(N3(t));return r==="Bytes"?i:rp(i)}class J3 extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const i=this.keys().next().value;i&&this.delete(i)}return this}}const tu={checksum:new J3(8192)}.checksum,Q3=/^0x[a-fA-F0-9]{40}$/;function ip(t,e={}){const{strict:r=!0}=e;if(!Q3.test(t))throw new np({address:t,cause:new e4});if(r){if(t.toLowerCase()===t)return;if(X3(t)!==t)throw new np({address:t,cause:new t4})}}function X3(t){if(tu.has(t))return tu.get(t);ip(t,{strict:!1});const e=t.substring(2).toLowerCase(),r=Y3(F3(e),{as:"Bytes"}),i=e.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&i[s]&&(i[s]=i[s].toUpperCase()),(r[s>>1]&15)>=8&&i[s+1]&&(i[s+1]=i[s+1].toUpperCase());const n=`0x${i.join("")}`;return tu.set(t,n),n}class np extends kt{constructor({address:e,cause:r}){super(`Address "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class e4 extends kt{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class t4 extends kt{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const r4=/^(.*)\[([0-9]*)\]$/,i4=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,n4=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function ru(t,e){if(t.length!==e.length)throw new o4({expectedLength:t.length,givenLength:e.length});const r=[];for(let i=0;i<t.length;i++){const n=t[i],s=e[i];r.push(ru.encode(n,s))}return tp(...r)}(function(t){function e(r,i,n=!1){if(r==="address"){const c=i;return ip(c),Fa(c.toLowerCase(),n?32:0)}if(r==="string")return V3(i);if(r==="bytes")return i;if(r==="bool")return Fa(H3(i),n?32:1);const s=r.match(n4);if(s){const[c,l,u="256"]=s,d=Number.parseInt(u)/8;return W3(i,{size:n?32:d,signed:l==="int"})}const o=r.match(i4);if(o){const[c,l]=o;if(Number.parseInt(l)!==(i.length-2)/2)throw new s4({expectedSize:Number.parseInt(l),value:i});return Xl(i,n?32:0)}const a=r.match(r4);if(a&&Array.isArray(i)){const[c,l]=a,u=[];for(let d=0;d<i.length;d++)u.push(e(l,i[d],!0));return u.length===0?"0x":tp(...u)}throw new a4(r)}t.encode=e})(ru||(ru={}));class s4 extends kt{constructor({expectedSize:e,value:r}){super(`Size of bytes "${r}" (bytes${eu(r)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class o4 extends kt{constructor({expectedLength:e,givenLength:r}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${r}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class a4 extends kt{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class sp extends ql{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,qw(e);const i=Ta(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,s=new Uint8Array(n);s.set(i.length>n?e.create().update(i).digest():i);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Qn(this),this.iHash.update(e),this}digestInto(e){Qn(this),mo(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:i,finished:n,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=n,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const op=(t,e,r)=>new sp(t,e).update(r).digest();op.create=(t,e)=>new sp(t,e);const pt=BigInt(0),Fe=BigInt(1),dn=BigInt(2),c4=BigInt(3),iu=BigInt(4),ap=BigInt(5),cp=BigInt(8);function gt(t,e){const r=t%e;return r>=pt?r:e+r}function l4(t,e,r){if(e<pt)throw new Error("invalid exponent, negatives unsupported");if(r<=pt)throw new Error("invalid modulus");if(r===Fe)return pt;let i=Fe;for(;e>pt;)e&Fe&&(i=i*t%r),t=t*t%r,e>>=Fe;return i}function dr(t,e,r){let i=t;for(;e-- >pt;)i*=i,i%=r;return i}function nu(t,e){if(t===pt)throw new Error("invert: expected non-zero number");if(e<=pt)throw new Error("invert: expected positive modulus, got "+e);let r=gt(t,e),i=e,n=pt,s=Fe;for(;r!==pt;){const a=i/r,c=i%r,l=n-s*a;i=r,r=c,n=s,s=l}if(i!==Fe)throw new Error("invert: does not exist");return gt(n,e)}function u4(t){const e=(t-Fe)/dn;let r,i,n;for(r=t-Fe,i=0;r%dn===pt;r/=dn,i++);for(n=dn;n<t&&l4(n,e,t)!==t-Fe;n++)if(n>1e3)throw new Error("Cannot find square root: likely non-prime P");if(i===1){const o=(t+Fe)/iu;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(r+Fe)/dn;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=i,u=a.pow(a.mul(a.ONE,n),r),d=a.pow(c,s),p=a.pow(c,r);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let m=1;for(let w=a.sqr(p);m<l&&!a.eql(w,a.ONE);m++)w=a.sqr(w);const v=a.pow(u,Fe<<BigInt(l-m-1));u=a.sqr(v),d=a.mul(d,v),p=a.mul(p,u),l=m}return d}}function h4(t){if(t%iu===c4){const e=(t+Fe)/iu;return function(i,n){const s=i.pow(n,e);if(!i.eql(i.sqr(s),n))throw new Error("Cannot find square root");return s}}if(t%cp===ap){const e=(t-ap)/cp;return function(i,n){const s=i.mul(n,dn),o=i.pow(s,e),a=i.mul(n,o),c=i.mul(i.mul(a,dn),o),l=i.mul(a,i.sub(c,i.ONE));if(!i.eql(i.sqr(l),n))throw new Error("Cannot find square root");return l}}return u4(t)}const d4=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lp(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=d4.reduce((i,n)=>(i[n]="function",i),e);return ss(t,r)}function f4(t,e,r){if(r<pt)throw new Error("invalid exponent, negatives unsupported");if(r===pt)return t.ONE;if(r===Fe)return e;let i=t.ONE,n=e;for(;r>pt;)r&Fe&&(i=t.mul(i,n)),n=t.sqr(n),r>>=Fe;return i}function p4(t,e){const r=new Array(e.length),i=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),n=t.inv(i);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),n),r}function up(t,e){const r=e!==void 0?e:t.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function hp(t,e,r=!1,i={}){if(t<=pt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:n,nByteLength:s}=up(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:n,BYTES:s,MASK:Zl(n),ZERO:pt,ONE:Fe,create:c=>gt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return pt<=c&&c<t},is0:c=>c===pt,isOdd:c=>(c&Fe)===Fe,neg:c=>gt(-c,t),eql:(c,l)=>c===l,sqr:c=>gt(c*c,t),add:(c,l)=>gt(c+l,t),sub:(c,l)=>gt(c-l,t),mul:(c,l)=>gt(c*l,t),pow:(c,l)=>f4(a,c,l),div:(c,l)=>gt(c*nu(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>nu(c,t),sqrt:i.sqrt||(c=>(o||(o=h4(t)),o(a,c))),invertBatch:c=>p4(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?Kl(c,s):Oi(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?Vl(c):Lr(c)}});return Object.freeze(a)}function dp(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function fp(t){const e=dp(t);return e+Math.ceil(e/2)}function g4(t,e,r=!1){const i=t.length,n=dp(e),s=fp(e);if(i<16||i<s||i>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+i);const o=r?Vl(t):Lr(t),a=gt(o,e-Fe)+Fe;return r?Kl(a,n):Oi(a,n)}const pp=BigInt(0),Ua=BigInt(1);function su(t,e){const r=e.negate();return t?r:e}function gp(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function ou(t,e){gp(t,e);const r=Math.ceil(e/t)+1,i=2**(t-1);return{windows:r,windowSize:i}}function b4(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,i)=>{if(!(r instanceof e))throw new Error("invalid point at index "+i)})}function m4(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,i)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+i)})}const au=new WeakMap,bp=new WeakMap;function cu(t){return bp.get(t)||1}function v4(t,e){return{constTimeNegate:su,hasPrecomputes(r){return cu(r)!==1},unsafeLadder(r,i,n=t.ZERO){let s=r;for(;i>pp;)i&Ua&&(n=n.add(s)),s=s.double(),i>>=Ua;return n},precomputeWindow(r,i){const{windows:n,windowSize:s}=ou(i,e),o=[];let a=r,c=a;for(let l=0;l<n;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,i,n){const{windows:s,windowSize:o}=ou(r,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**r-1),u=2**r,d=BigInt(r);for(let p=0;p<s;p++){const m=p*o;let v=Number(n&l);n>>=d,v>o&&(v-=u,n+=Ua);const w=m,S=m+Math.abs(v)-1,x=p%2!==0,A=v<0;v===0?c=c.add(su(x,i[w])):a=a.add(su(A,i[S]))}return{p:a,f:c}},wNAFUnsafe(r,i,n,s=t.ZERO){const{windows:o,windowSize:a}=ou(r,e),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let d=0;d<o;d++){const p=d*a;if(n===pp)break;let m=Number(n&c);if(n>>=u,m>a&&(m-=l,n+=Ua),m===0)continue;let v=i[p+Math.abs(m)-1];m<0&&(v=v.negate()),s=s.add(v)}return s},getPrecomputes(r,i,n){let s=au.get(i);return s||(s=this.precomputeWindow(i,r),r!==1&&au.set(i,n(s))),s},wNAFCached(r,i,n){const s=cu(r);return this.wNAF(s,this.getPrecomputes(s,r,n),i)},wNAFCachedUnsafe(r,i,n,s){const o=cu(r);return o===1?this.unsafeLadder(r,i,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,n),i,s)},setWindowSize(r,i){gp(i,e),bp.set(r,i),au.delete(r)}}}function y4(t,e,r,i){if(b4(r,t),m4(i,e),r.length!==i.length)throw new Error("arrays of points and scalars must have equal length");const n=t.ZERO,s=G0(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(n),l=Math.floor((e.BITS-1)/o)*o;let u=n;for(let d=l;d>=0;d-=o){c.fill(n);for(let m=0;m<i.length;m++){const v=i[m],w=Number(v>>BigInt(d)&BigInt(a));c[w]=c[w].add(r[m])}let p=n;for(let m=c.length-1,v=n;m>0;m--)v=v.add(c[m]),p=p.add(v);if(u=u.add(p),d!==0)for(let m=0;m<o;m++)u=u.double()}return u}function mp(t){return lp(t.Fp),ss(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...up(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function vp(t){t.lowS!==void 0&&es("lowS",t.lowS),t.prehash!==void 0&&es("prehash",t.prehash)}function w4(t){const e=mp(t);ss(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:i,a:n}=e;if(r){if(!i.eql(n,i.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:_4,hexToBytes:E4}=O3;class x4 extends Error{constructor(e=""){super(e)}}const di={Err:x4,_tlv:{encode:(t,e)=>{const{Err:r}=di;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const i=e.length/2,n=rs(i);if(n.length/2&128)throw new r("tlv.encode: long form length too big");const s=i>127?rs(n.length/2|128):"";return rs(t)+s+n+e},decode(t,e){const{Err:r}=di;let i=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[i++]!==t)throw new r("tlv.decode: wrong tlv");const n=e[i++],s=!!(n&128);let o=0;if(!s)o=n;else{const c=n&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const l=e.subarray(i,i+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(i+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(i,i+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(i+o)}}},_int:{encode(t){const{Err:e}=di;if(t<Ir)throw new e("integer: negative integers are not allowed");let r=rs(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=di;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return _4(t)}},toSig(t){const{Err:e,_int:r,_tlv:i}=di,n=typeof t=="string"?E4(t):t;Br(n);const{v:s,l:o}=i.decode(48,n);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=i.decode(2,s),{v:l,l:u}=i.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=di,i=e.encode(2,r.encode(t.r)),n=e.encode(2,r.encode(t.s)),s=i+n;return e.encode(48,s)}},Ir=BigInt(0),me=BigInt(1),Di=BigInt(2),ja=BigInt(3),yp=BigInt(4);function $4(t){const e=w4(t),{Fp:r}=e,i=hp(e.n,e.nBitLength),n=e.toBytes||((w,S,x)=>{const A=S.toAffine();return rr(Uint8Array.from([4]),r.toBytes(A.x),r.toBytes(A.y))}),s=e.fromBytes||(w=>{const S=w.subarray(1),x=r.fromBytes(S.subarray(0,r.BYTES)),A=r.fromBytes(S.subarray(r.BYTES,2*r.BYTES));return{x,y:A}});function o(w){const{a:S,b:x}=e,A=r.sqr(w),C=r.mul(A,w);return r.add(r.add(C,r.mul(w,S)),x)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(w){return ns(w,me,e.n)}function c(w){const{allowedPrivateKeyLengths:S,nByteLength:x,wrapPrivateKey:A,n:C}=e;if(S&&typeof w!="bigint"){if(hn(w)&&(w=ts(w)),typeof w!="string"||!S.includes(w.length))throw new Error("invalid private key");w=w.padStart(x*2,"0")}let D;try{D=typeof w=="bigint"?w:Lr(Rt("private key",w,x))}catch{throw new Error("invalid private key, expected hex or "+x+" bytes, got "+typeof w)}return A&&(D=gt(D,C)),Ci("private key",D,me,C),D}function l(w){if(!(w instanceof p))throw new Error("ProjectivePoint expected")}const u=Jl((w,S)=>{const{px:x,py:A,pz:C}=w;if(r.eql(C,r.ONE))return{x,y:A};const D=w.is0();S==null&&(S=D?r.ONE:r.inv(C));const T=r.mul(x,S),N=r.mul(A,S),R=r.mul(C,S);if(D)return{x:r.ZERO,y:r.ZERO};if(!r.eql(R,r.ONE))throw new Error("invZ was invalid");return{x:T,y:N}}),d=Jl(w=>{if(w.is0()){if(e.allowInfinityPoint&&!r.is0(w.py))return;throw new Error("bad point: ZERO")}const{x:S,y:x}=w.toAffine();if(!r.isValid(S)||!r.isValid(x))throw new Error("bad point: x or y not FE");const A=r.sqr(x),C=o(S);if(!r.eql(A,C))throw new Error("bad point: equation left != right");if(!w.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(S,x,A){if(this.px=S,this.py=x,this.pz=A,S==null||!r.isValid(S))throw new Error("x required");if(x==null||!r.isValid(x))throw new Error("y required");if(A==null||!r.isValid(A))throw new Error("z required");Object.freeze(this)}static fromAffine(S){const{x,y:A}=S||{};if(!S||!r.isValid(x)||!r.isValid(A))throw new Error("invalid affine point");if(S instanceof p)throw new Error("projective point not allowed");const C=D=>r.eql(D,r.ZERO);return C(x)&&C(A)?p.ZERO:new p(x,A,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){const x=r.invertBatch(S.map(A=>A.pz));return S.map((A,C)=>A.toAffine(x[C])).map(p.fromAffine)}static fromHex(S){const x=p.fromAffine(s(Rt("pointHex",S)));return x.assertValidity(),x}static fromPrivateKey(S){return p.BASE.multiply(c(S))}static msm(S,x){return y4(p,i,S,x)}_setWindowSize(S){v.setWindowSize(this,S)}assertValidity(){d(this)}hasEvenY(){const{y:S}=this.toAffine();if(r.isOdd)return!r.isOdd(S);throw new Error("Field doesn't support isOdd")}equals(S){l(S);const{px:x,py:A,pz:C}=this,{px:D,py:T,pz:N}=S,R=r.eql(r.mul(x,N),r.mul(D,C)),B=r.eql(r.mul(A,N),r.mul(T,C));return R&&B}negate(){return new p(this.px,r.neg(this.py),this.pz)}double(){const{a:S,b:x}=e,A=r.mul(x,ja),{px:C,py:D,pz:T}=this;let N=r.ZERO,R=r.ZERO,B=r.ZERO,M=r.mul(C,C),U=r.mul(D,D),$=r.mul(T,T),h=r.mul(C,D);return h=r.add(h,h),B=r.mul(C,T),B=r.add(B,B),N=r.mul(S,B),R=r.mul(A,$),R=r.add(N,R),N=r.sub(U,R),R=r.add(U,R),R=r.mul(N,R),N=r.mul(h,N),B=r.mul(A,B),$=r.mul(S,$),h=r.sub(M,$),h=r.mul(S,h),h=r.add(h,B),B=r.add(M,M),M=r.add(B,M),M=r.add(M,$),M=r.mul(M,h),R=r.add(R,M),$=r.mul(D,T),$=r.add($,$),M=r.mul($,h),N=r.sub(N,M),B=r.mul($,U),B=r.add(B,B),B=r.add(B,B),new p(N,R,B)}add(S){l(S);const{px:x,py:A,pz:C}=this,{px:D,py:T,pz:N}=S;let R=r.ZERO,B=r.ZERO,M=r.ZERO;const U=e.a,$=r.mul(e.b,ja);let h=r.mul(x,D),b=r.mul(A,T),_=r.mul(C,N),g=r.add(x,A),y=r.add(D,T);g=r.mul(g,y),y=r.add(h,b),g=r.sub(g,y),y=r.add(x,C);let I=r.add(D,N);return y=r.mul(y,I),I=r.add(h,_),y=r.sub(y,I),I=r.add(A,C),R=r.add(T,N),I=r.mul(I,R),R=r.add(b,_),I=r.sub(I,R),M=r.mul(U,y),R=r.mul($,_),M=r.add(R,M),R=r.sub(b,M),M=r.add(b,M),B=r.mul(R,M),b=r.add(h,h),b=r.add(b,h),_=r.mul(U,_),y=r.mul($,y),b=r.add(b,_),_=r.sub(h,_),_=r.mul(U,_),y=r.add(y,_),h=r.mul(b,y),B=r.add(B,h),h=r.mul(I,y),R=r.mul(g,R),R=r.sub(R,h),h=r.mul(g,b),M=r.mul(I,M),M=r.add(M,h),new p(R,B,M)}subtract(S){return this.add(S.negate())}is0(){return this.equals(p.ZERO)}wNAF(S){return v.wNAFCached(this,S,p.normalizeZ)}multiplyUnsafe(S){const{endo:x,n:A}=e;Ci("scalar",S,Ir,A);const C=p.ZERO;if(S===Ir)return C;if(this.is0()||S===me)return this;if(!x||v.hasPrecomputes(this))return v.wNAFCachedUnsafe(this,S,p.normalizeZ);let{k1neg:D,k1:T,k2neg:N,k2:R}=x.splitScalar(S),B=C,M=C,U=this;for(;T>Ir||R>Ir;)T&me&&(B=B.add(U)),R&me&&(M=M.add(U)),U=U.double(),T>>=me,R>>=me;return D&&(B=B.negate()),N&&(M=M.negate()),M=new p(r.mul(M.px,x.beta),M.py,M.pz),B.add(M)}multiply(S){const{endo:x,n:A}=e;Ci("scalar",S,me,A);let C,D;if(x){const{k1neg:T,k1:N,k2neg:R,k2:B}=x.splitScalar(S);let{p:M,f:U}=this.wNAF(N),{p:$,f:h}=this.wNAF(B);M=v.constTimeNegate(T,M),$=v.constTimeNegate(R,$),$=new p(r.mul($.px,x.beta),$.py,$.pz),C=M.add($),D=U.add(h)}else{const{p:T,f:N}=this.wNAF(S);C=T,D=N}return p.normalizeZ([C,D])[0]}multiplyAndAddUnsafe(S,x,A){const C=p.BASE,D=(N,R)=>R===Ir||R===me||!N.equals(C)?N.multiplyUnsafe(R):N.multiply(R),T=D(this,x).add(D(S,A));return T.is0()?void 0:T}toAffine(S){return u(this,S)}isTorsionFree(){const{h:S,isTorsionFree:x}=e;if(S===me)return!0;if(x)return x(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:S,clearCofactor:x}=e;return S===me?this:x?x(p,this):this.multiplyUnsafe(e.h)}toRawBytes(S=!0){return es("isCompressed",S),this.assertValidity(),n(p,this,S)}toHex(S=!0){return es("isCompressed",S),ts(this.toRawBytes(S))}}p.BASE=new p(e.Gx,e.Gy,r.ONE),p.ZERO=new p(r.ZERO,r.ONE,r.ZERO);const m=e.nBitLength,v=v4(p,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function I4(t){const e=mp(t);return ss(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function S4(t){const e=I4(t),{Fp:r,n:i}=e,n=r.BYTES+1,s=2*r.BYTES+1;function o(_){return gt(_,i)}function a(_){return nu(_,i)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=$4({...e,toBytes(_,g,y){const I=g.toAffine(),O=r.toBytes(I.x),E=rr;return es("isCompressed",y),y?E(Uint8Array.from([g.hasEvenY()?2:3]),O):E(Uint8Array.from([4]),O,r.toBytes(I.y))},fromBytes(_){const g=_.length,y=_[0],I=_.subarray(1);if(g===n&&(y===2||y===3)){const O=Lr(I);if(!ns(O,me,r.ORDER))throw new Error("Point is not on curve");const E=u(O);let f;try{f=r.sqrt(E)}catch(j){const L=j instanceof Error?": "+j.message:"";throw new Error("Point is not on curve"+L)}const P=(f&me)===me;return(y&1)===1!==P&&(f=r.neg(f)),{x:O,y:f}}else if(g===s&&y===4){const O=r.fromBytes(I.subarray(0,r.BYTES)),E=r.fromBytes(I.subarray(r.BYTES,2*r.BYTES));return{x:O,y:E}}else{const O=n,E=s;throw new Error("invalid Point, expected length of "+O+", or uncompressed "+E+", got "+g)}}}),p=_=>ts(Oi(_,e.nByteLength));function m(_){const g=i>>me;return _>g}function v(_){return m(_)?o(-_):_}const w=(_,g,y)=>Lr(_.slice(g,y));class S{constructor(g,y,I){this.r=g,this.s=y,this.recovery=I,this.assertValidity()}static fromCompact(g){const y=e.nByteLength;return g=Rt("compactSignature",g,y*2),new S(w(g,0,y),w(g,y,2*y))}static fromDER(g){const{r:y,s:I}=di.toSig(Rt("DER",g));return new S(y,I)}assertValidity(){Ci("r",this.r,me,i),Ci("s",this.s,me,i)}addRecoveryBit(g){return new S(this.r,this.s,g)}recoverPublicKey(g){const{r:y,s:I,recovery:O}=this,E=N(Rt("msgHash",g));if(O==null||![0,1,2,3].includes(O))throw new Error("recovery id invalid");const f=O===2||O===3?y+e.n:y;if(f>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const P=(O&1)===0?"02":"03",F=c.fromHex(P+p(f)),j=a(f),L=o(-E*j),q=o(I*j),K=c.BASE.multiplyAndAddUnsafe(F,L,q);if(!K)throw new Error("point at infinify");return K.assertValidity(),K}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return is(this.toDERHex())}toDERHex(){return di.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return is(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const x={isValidPrivateKey(_){try{return l(_),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const _=fp(e.n);return g4(e.randomBytes(_),e.n)},precompute(_=8,g=c.BASE){return g._setWindowSize(_),g.multiply(BigInt(3)),g}};function A(_,g=!0){return c.fromPrivateKey(_).toRawBytes(g)}function C(_){const g=hn(_),y=typeof _=="string",I=(g||y)&&_.length;return g?I===n||I===s:y?I===2*n||I===2*s:_ instanceof c}function D(_,g,y=!0){if(C(_))throw new Error("first arg must be private key");if(!C(g))throw new Error("second arg must be public key");return c.fromHex(g).multiply(l(_)).toRawBytes(y)}const T=e.bits2int||function(_){if(_.length>8192)throw new Error("input is too large");const g=Lr(_),y=_.length*8-e.nBitLength;return y>0?g>>BigInt(y):g},N=e.bits2int_modN||function(_){return o(T(_))},R=Zl(e.nBitLength);function B(_){return Ci("num < 2^"+e.nBitLength,_,Ir,R),Oi(_,e.nByteLength)}function M(_,g,y=U){if(["recovered","canonical"].some(te=>te in y))throw new Error("sign() legacy options not supported");const{hash:I,randomBytes:O}=e;let{lowS:E,prehash:f,extraEntropy:P}=y;E==null&&(E=!0),_=Rt("msgHash",_),vp(y),f&&(_=Rt("prehashed msgHash",I(_)));const F=N(_),j=l(g),L=[B(j),B(F)];if(P!=null&&P!==!1){const te=P===!0?O(r.BYTES):P;L.push(Rt("extraEntropy",te))}const q=rr(...L),K=F;function Z(te){const G=T(te);if(!d(G))return;const Q=a(G),ze=c.BASE.multiply(G).toAffine(),ie=o(ze.x);if(ie===Ir)return;const de=o(Q*o(K+ie*j));if(de===Ir)return;let Ut=(ze.x===ie?0:2)|Number(ze.y&me),we=de;return E&&m(de)&&(we=v(de),Ut^=1),new S(ie,we,Ut)}return{seed:q,k2sig:Z}}const U={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function h(_,g,y=U){const{seed:I,k2sig:O}=M(_,g,y),E=e;return Y0(E.hash.outputLen,E.nByteLength,E.hmac)(I,O)}c.BASE._setWindowSize(8);function b(_,g,y,I=$){const O=_;g=Rt("msgHash",g),y=Rt("publicKey",y);const{lowS:E,prehash:f,format:P}=I;if(vp(I),"strict"in I)throw new Error("options.strict was renamed to lowS");if(P!==void 0&&P!=="compact"&&P!=="der")throw new Error("format must be compact or der");const F=typeof O=="string"||hn(O),j=!F&&!P&&typeof O=="object"&&O!==null&&typeof O.r=="bigint"&&typeof O.s=="bigint";if(!F&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let L,q;try{if(j&&(L=new S(O.r,O.s)),F){try{P!=="compact"&&(L=S.fromDER(O))}catch(Ut){if(!(Ut instanceof di.Err))throw Ut}!L&&P!=="der"&&(L=S.fromCompact(O))}q=c.fromHex(y)}catch{return!1}if(!L||E&&L.hasHighS())return!1;f&&(g=e.hash(g));const{r:K,s:Z}=L,te=N(g),G=a(Z),Q=o(te*G),ze=o(K*G),ie=c.BASE.multiplyAndAddUnsafe(q,Q,ze)?.toAffine();return ie?o(ie.x)===K:!1}return{CURVE:e,getPublicKey:A,getSharedSecret:D,sign:h,verify:b,ProjectivePoint:c,Signature:S,utils:x}}function A4(t,e){const r=t.ORDER;let i=Ir;for(let v=r-me;v%Di===Ir;v/=Di)i+=me;const n=i,s=Di<<n-me-me,o=s*Di,a=(r-me)/o,c=(a-me)/Di,l=o-me,u=s,d=t.pow(e,a),p=t.pow(e,(a+me)/Di);let m=(v,w)=>{let S=d,x=t.pow(w,l),A=t.sqr(x);A=t.mul(A,w);let C=t.mul(v,A);C=t.pow(C,c),C=t.mul(C,x),x=t.mul(C,w),A=t.mul(C,v);let D=t.mul(A,x);C=t.pow(D,u);let T=t.eql(C,t.ONE);x=t.mul(A,p),C=t.mul(D,S),A=t.cmov(x,A,T),D=t.cmov(C,D,T);for(let N=n;N>me;N--){let R=N-Di;R=Di<<R-me;let B=t.pow(D,R);const M=t.eql(B,t.ONE);x=t.mul(A,S),S=t.mul(S,S),B=t.mul(D,S),A=t.cmov(x,A,M),D=t.cmov(B,D,M)}return{isValid:T,value:A}};if(t.ORDER%yp===ja){const v=(t.ORDER-ja)/yp,w=t.sqrt(t.neg(e));m=(S,x)=>{let A=t.sqr(x);const C=t.mul(S,x);A=t.mul(A,C);let D=t.pow(A,v);D=t.mul(D,C);const T=t.mul(D,w),N=t.mul(t.sqr(D),x),R=t.eql(N,S);let B=t.cmov(T,D,R);return{isValid:R,value:B}}}return m}function P4(t,e){if(lp(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=A4(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return i=>{let n,s,o,a,c,l,u,d;n=t.sqr(i),n=t.mul(n,e.Z),s=t.sqr(n),s=t.add(s,n),o=t.add(s,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),a=t.mul(a,e.A),s=t.sqr(o),l=t.sqr(a),c=t.mul(l,e.A),s=t.add(s,c),s=t.mul(s,o),l=t.mul(l,a),c=t.mul(l,e.B),s=t.add(s,c),u=t.mul(n,o);const{isValid:p,value:m}=r(s,l);d=t.mul(n,i),d=t.mul(d,m),u=t.cmov(u,o,p),d=t.cmov(d,m,p);const v=t.isOdd(i)===t.isOdd(d);return d=t.cmov(t.neg(d),d,v),u=t.div(u,a),{x:u,y:d}}}function O4(t){return{hash:t,hmac:(e,...r)=>op(t,e,Qw(...r)),randomBytes:B0}}function C4(t,e){const r=i=>S4({...t,...O4(i)});return{...r(e),create:r}}const D4=Lr;function Mi(t,e){if(yo(t),yo(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const r=Array.from({length:e}).fill(0);for(let i=e-1;i>=0;i--)r[i]=t&255,t>>>=8;return new Uint8Array(r)}function M4(t,e){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t[i]^e[i];return r}function yo(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function T4(t,e,r,i){Br(t),Br(e),yo(r),e.length>255&&(e=i(rr(La("H2C-OVERSIZE-DST-"),e)));const{outputLen:n,blockLen:s}=i,o=Math.ceil(r/n);if(r>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=rr(e,Mi(e.length,1)),c=Mi(0,s),l=Mi(r,2),u=new Array(o),d=i(rr(c,t,l,Mi(0,1),a));u[0]=i(rr(d,Mi(1,1),a));for(let m=1;m<=o;m++){const v=[M4(d,u[m-1]),Mi(m+1,1),a];u[m]=i(rr(...v))}return rr(...u).slice(0,r)}function R4(t,e,r,i,n){if(Br(t),Br(e),yo(r),e.length>255){const s=Math.ceil(2*i/8);e=n.create({dkLen:s}).update(La("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return n.create({dkLen:r}).update(t).update(Mi(r,2)).update(e).update(Mi(e.length,1)).digest()}function wp(t,e,r){ss(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:i,k:n,m:s,hash:o,expand:a,DST:c}=r;Br(t),yo(e);const l=typeof c=="string"?La(c):c,u=i.toString(2).length,d=Math.ceil((u+n)/8),p=e*s*d;let m;if(a==="xmd")m=T4(t,l,p,o);else if(a==="xof")m=R4(t,l,p,n,o);else if(a==="_internal_pass")m=t;else throw new Error('expand must be "xmd" or "xof"');const v=new Array(e);for(let w=0;w<e;w++){const S=new Array(s);for(let x=0;x<s;x++){const A=d*(x+w*s),C=m.subarray(A,A+d);S[x]=gt(D4(C),i)}v[w]=S}return v}function N4(t,e){const r=e.map(i=>Array.from(i).reverse());return(i,n)=>{const[s,o,a,c]=r.map(l=>l.reduce((u,d)=>t.add(t.mul(u,i),d)));return i=t.div(s,o),n=t.mul(n,t.div(a,c)),{x:i,y:n}}}function B4(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(i,n){const s=wp(i,2,{...r,DST:r.DST,...n}),o=t.fromAffine(e(s[0])),a=t.fromAffine(e(s[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(i,n){const s=wp(i,1,{...r,DST:r.encodeDST,...n}),o=t.fromAffine(e(s[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(i){if(!Array.isArray(i))throw new Error("mapToCurve: expected array of bigints");for(const s of i)if(typeof s!="bigint")throw new Error("mapToCurve: expected array of bigints");const n=t.fromAffine(e(i)).clearCofactor();return n.assertValidity(),n}}}const wo=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ka=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_o=BigInt(1),qa=BigInt(2),_p=(t,e)=>(t+e/qa)/e;function Ep(t){const e=wo,r=BigInt(3),i=BigInt(6),n=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=dr(u,r,e)*u%e,p=dr(d,r,e)*u%e,m=dr(p,qa,e)*l%e,v=dr(m,n,e)*m%e,w=dr(v,s,e)*v%e,S=dr(w,a,e)*w%e,x=dr(S,c,e)*S%e,A=dr(x,a,e)*w%e,C=dr(A,r,e)*u%e,D=dr(C,o,e)*v%e,T=dr(D,i,e)*l%e,N=dr(T,qa,e);if(!Ti.eql(Ti.sqr(N),t))throw new Error("Cannot find square root");return N}const Ti=hp(wo,void 0,void 0,{sqrt:Ep}),Eo=C4({a:BigInt(0),b:BigInt(7),Fp:Ti,n:ka,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=ka,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-_o*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=_p(s*t,e),c=_p(-i*t,e);let l=gt(t-a*r-c*n,e),u=gt(-a*i-c*s,e);const d=l>o,p=u>o;if(d&&(l=e-l),p&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:p,k2:u}}}},Ra),xp=BigInt(0),$p={};function za(t,...e){let r=$p[t];if(r===void 0){const i=Ra(Uint8Array.from(t,n=>n.charCodeAt(0)));r=rr(i,i),$p[t]=r}return Ra(rr(r,...e))}const lu=t=>t.toRawBytes(!0).slice(1),uu=t=>Oi(t,32),hu=t=>gt(t,wo),xo=t=>gt(t,ka),du=Eo.ProjectivePoint,L4=(t,e,r)=>du.BASE.multiplyAndAddUnsafe(t,e,r);function fu(t){let e=Eo.utils.normPrivateKeyToScalar(t),r=du.fromPrivateKey(e);return{scalar:r.hasEvenY()?e:xo(-e),bytes:lu(r)}}function Ip(t){Ci("x",t,_o,wo);const e=hu(t*t),r=hu(e*t+BigInt(7));let i=Ep(r);i%qa!==xp&&(i=hu(-i));const n=new du(t,i,_o);return n.assertValidity(),n}const os=Lr;function Sp(...t){return xo(os(za("BIP0340/challenge",...t)))}function F4(t){return fu(t).bytes}function U4(t,e,r=B0(32)){const i=Rt("message",t),{bytes:n,scalar:s}=fu(e),o=Rt("auxRand",r,32),a=uu(s^os(za("BIP0340/aux",o))),c=za("BIP0340/nonce",a,n,i),l=xo(os(c));if(l===xp)throw new Error("sign failed: k is zero");const{bytes:u,scalar:d}=fu(l),p=Sp(u,n,i),m=new Uint8Array(64);if(m.set(u,0),m.set(uu(xo(d+p*s)),32),!Ap(m,i,n))throw new Error("sign: Invalid signature produced");return m}function Ap(t,e,r){const i=Rt("signature",t,64),n=Rt("message",e),s=Rt("publicKey",r,32);try{const o=Ip(os(s)),a=os(i.subarray(0,32));if(!ns(a,_o,wo))return!1;const c=os(i.subarray(32,64));if(!ns(c,_o,ka))return!1;const l=Sp(uu(a),lu(o),n),u=L4(o,c,xo(-l));return!(!u||!u.hasEvenY()||u.toAffine().x!==a)}catch{return!1}}const j4={getPublicKey:F4,sign:U4,verify:Ap,utils:{randomPrivateKey:Eo.utils.randomPrivateKey,lift_x:Ip,pointToBytes:lu,numberToBytesBE:Oi,bytesToNumberBE:Lr,taggedHash:za,mod:gt}},k4=N4(Ti,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),q4=P4(Ti,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Ti.create(BigInt("-11"))}),Pp=B4(Eo.ProjectivePoint,t=>{const{x:e,y:r}=q4(Ti.create(t[0]));return k4(e,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Ti.ORDER,m:1,k:128,expand:"xmd",hash:Ra});var z4=Object.freeze({__proto__:null,secp256k1:Eo,schnorr:j4,hashToCurve:Pp.hashToCurve,encodeToCurve:Pp.encodeToCurve});function H4(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const r=t.length,i=t.charAt(0),n=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,p=0;const m=l.length;for(;p!==m&&l[p]===0;)p++,u++;const v=(m-p)*s+1>>>0,w=new Uint8Array(v);for(;p!==m;){let A=l[p],C=0;for(let D=v-1;(A!==0||C<d)&&D!==-1;D--,C++)A+=256*w[D]>>>0,w[D]=A%r>>>0,A=A/r>>>0;if(A!==0)throw new Error("Non-zero carry");d=C,p++}let S=v-d;for(;S!==v&&w[S]===0;)S++;let x=i.repeat(u);for(;S<v;++S)x+=t.charAt(w[S]);return x}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,p=0;for(;l[u]===i;)d++,u++;const m=(l.length-u)*n+1>>>0,v=new Uint8Array(m);for(;l[u];){let A=e[l.charCodeAt(u)];if(A===255)return;let C=0;for(let D=m-1;(A!==0||C<p)&&D!==-1;D--,C++)A+=r*v[D]>>>0,v[D]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");p=C,u++}let w=m-p;for(;w!==m&&v[w]===0;)w++;const S=new Uint8Array(d+(m-w));let x=d;for(;w!==m;)S[x++]=v[w++];return S}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var W4="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",V4=H4(W4);const K4=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),G4=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(i,n)=>typeof n=="string"&&n.match(/^\d+n$/)?BigInt(n.substring(0,n.length-1)):n)};function fn(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return G4(t)}catch{return t}}function fi(t){return typeof t=="string"?t:K4(t)||""}function Z4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Op(t,...e){if(!Z4(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Cp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Y4(t,e){Op(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const as=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pu=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function J4(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Dp(t){return typeof t=="string"&&(t=J4(t)),Op(t),t}class Q4{clone(){return this._cloneInto()}}function X4(t){const e=i=>t().update(Dp(i)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Mp(t=32){if(as&&typeof as.getRandomValues=="function")return as.getRandomValues(new Uint8Array(t));if(as&&typeof as.randomBytes=="function")return as.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function e5(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,l=i?0:4;t.setUint32(e+c,o,i),t.setUint32(e+l,a,i)}class t5 extends Q4{constructor(e,r,i,n){super(),this.blockLen=e,this.outputLen=r,this.padOffset=i,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=pu(this.buffer)}update(e){Cp(this);const{view:r,buffer:i,blockLen:n}=this;e=Dp(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(n-this.pos,s-o);if(a===n){const c=pu(e);for(;n<=s-o;o+=n)this.process(c,o);continue}i.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Cp(this),Y4(e,this),this.finished=!0;const{buffer:r,view:i,blockLen:n,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(i,0),o=0);for(let d=o;d<n;d++)r[d]=0;e5(i,n-8,BigInt(this.length*8),s),this.process(i,0);const a=pu(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:i,length:n,finished:s,destroyed:o,pos:a}=this;return e.length=n,e.pos=a,e.finished=s,e.destroyed=o,n%r&&e.buffer.set(i),e}}const Ha=BigInt(2**32-1),gu=BigInt(32);function Tp(t,e=!1){return e?{h:Number(t&Ha),l:Number(t>>gu&Ha)}:{h:Number(t>>gu&Ha)|0,l:Number(t&Ha)|0}}function r5(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let n=0;n<t.length;n++){const{h:s,l:o}=Tp(t[n],e);[r[n],i[n]]=[s,o]}return[r,i]}const i5=(t,e)=>BigInt(t>>>0)<<gu|BigInt(e>>>0),n5=(t,e,r)=>t>>>r,s5=(t,e,r)=>t<<32-r|e>>>r,o5=(t,e,r)=>t>>>r|e<<32-r,a5=(t,e,r)=>t<<32-r|e>>>r,c5=(t,e,r)=>t<<64-r|e>>>r-32,l5=(t,e,r)=>t>>>r-32|e<<64-r,u5=(t,e)=>e,h5=(t,e)=>t,d5=(t,e,r)=>t<<r|e>>>32-r,f5=(t,e,r)=>e<<r|t>>>32-r,p5=(t,e,r)=>e<<r-32|t>>>64-r,g5=(t,e,r)=>t<<r-32|e>>>64-r;function b5(t,e,r,i){const n=(e>>>0)+(i>>>0);return{h:t+r+(n/2**32|0)|0,l:n|0}}const m5=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),v5=(t,e,r,i)=>e+r+i+(t/2**32|0)|0,y5=(t,e,r,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0),w5=(t,e,r,i,n)=>e+r+i+n+(t/2**32|0)|0,_5=(t,e,r,i,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0)+(n>>>0),E5=(t,e,r,i,n,s)=>e+r+i+n+s+(t/2**32|0)|0,X={fromBig:Tp,split:r5,toBig:i5,shrSH:n5,shrSL:s5,rotrSH:o5,rotrSL:a5,rotrBH:c5,rotrBL:l5,rotr32H:u5,rotr32L:h5,rotlSH:d5,rotlSL:f5,rotlBH:p5,rotlBL:g5,add:b5,add3L:m5,add3H:v5,add4L:y5,add4H:w5,add5H:E5,add5L:_5},[x5,$5]=X.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ri=new Uint32Array(80),Ni=new Uint32Array(80);class I5 extends t5{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:i,Bl:n,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:p,Gh:m,Gl:v,Hh:w,Hl:S}=this;return[e,r,i,n,s,o,a,c,l,u,d,p,m,v,w,S]}set(e,r,i,n,s,o,a,c,l,u,d,p,m,v,w,S){this.Ah=e|0,this.Al=r|0,this.Bh=i|0,this.Bl=n|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=p|0,this.Gh=m|0,this.Gl=v|0,this.Hh=w|0,this.Hl=S|0}process(e,r){for(let C=0;C<16;C++,r+=4)Ri[C]=e.getUint32(r),Ni[C]=e.getUint32(r+=4);for(let C=16;C<80;C++){const D=Ri[C-15]|0,T=Ni[C-15]|0,N=X.rotrSH(D,T,1)^X.rotrSH(D,T,8)^X.shrSH(D,T,7),R=X.rotrSL(D,T,1)^X.rotrSL(D,T,8)^X.shrSL(D,T,7),B=Ri[C-2]|0,M=Ni[C-2]|0,U=X.rotrSH(B,M,19)^X.rotrBH(B,M,61)^X.shrSH(B,M,6),$=X.rotrSL(B,M,19)^X.rotrBL(B,M,61)^X.shrSL(B,M,6),h=X.add4L(R,$,Ni[C-7],Ni[C-16]),b=X.add4H(h,N,U,Ri[C-7],Ri[C-16]);Ri[C]=b|0,Ni[C]=h|0}let{Ah:i,Al:n,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:p,Fh:m,Fl:v,Gh:w,Gl:S,Hh:x,Hl:A}=this;for(let C=0;C<80;C++){const D=X.rotrSH(d,p,14)^X.rotrSH(d,p,18)^X.rotrBH(d,p,41),T=X.rotrSL(d,p,14)^X.rotrSL(d,p,18)^X.rotrBL(d,p,41),N=d&m^~d&w,R=p&v^~p&S,B=X.add5L(A,T,R,$5[C],Ni[C]),M=X.add5H(B,x,D,N,x5[C],Ri[C]),U=B|0,$=X.rotrSH(i,n,28)^X.rotrBH(i,n,34)^X.rotrBH(i,n,39),h=X.rotrSL(i,n,28)^X.rotrBL(i,n,34)^X.rotrBL(i,n,39),b=i&s^i&a^s&a,_=n&o^n&c^o&c;x=w|0,A=S|0,w=m|0,S=v|0,m=d|0,v=p|0,{h:d,l:p}=X.add(l|0,u|0,M|0,U|0),l=a|0,u=c|0,a=s|0,c=o|0,s=i|0,o=n|0;const g=X.add3L(U,h,_);i=X.add3H(g,M,$,b),n=g|0}({h:i,l:n}=X.add(this.Ah|0,this.Al|0,i|0,n|0)),{h:s,l:o}=X.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=X.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=X.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:p}=X.add(this.Eh|0,this.El|0,d|0,p|0),{h:m,l:v}=X.add(this.Fh|0,this.Fl|0,m|0,v|0),{h:w,l:S}=X.add(this.Gh|0,this.Gl|0,w|0,S|0),{h:x,l:A}=X.add(this.Hh|0,this.Hl|0,x|0,A|0),this.set(i,n,s,o,a,c,l,u,d,p,m,v,w,S,x,A)}roundClean(){Ri.fill(0),Ni.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const S5=X4(()=>new I5);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bu=BigInt(0),Rp=BigInt(1),A5=BigInt(2);function mu(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function vu(t){if(!mu(t))throw new Error("Uint8Array expected")}function yu(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const P5=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function wu(t){vu(t);let e="";for(let r=0;r<t.length;r++)e+=P5[t[r]];return e}function Np(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?bu:BigInt("0x"+t)}const pi={_0:48,_9:57,A:65,F:70,a:97,f:102};function Bp(t){if(t>=pi._0&&t<=pi._9)return t-pi._0;if(t>=pi.A&&t<=pi.F)return t-(pi.A-10);if(t>=pi.a&&t<=pi.f)return t-(pi.a-10)}function Lp(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(r);for(let n=0,s=0;n<r;n++,s+=2){const o=Bp(t.charCodeAt(s)),a=Bp(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}i[n]=o*16+a}return i}function O5(t){return Np(wu(t))}function Wa(t){return vu(t),Np(wu(Uint8Array.from(t).reverse()))}function Fp(t,e){return Lp(t.toString(16).padStart(e*2,"0"))}function _u(t,e){return Fp(t,e).reverse()}function gi(t,e,r){let i;if(typeof e=="string")try{i=Lp(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(mu(e))i=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const n=i.length;if(typeof r=="number"&&n!==r)throw new Error(t+" of length "+r+" expected, got "+n);return i}function Up(...t){let e=0;for(let i=0;i<t.length;i++){const n=t[i];vu(n),e+=n.length}const r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){const s=t[i];r.set(s,n),n+=s.length}return r}const Eu=t=>typeof t=="bigint"&&bu<=t;function C5(t,e,r){return Eu(t)&&Eu(e)&&Eu(r)&&e<=t&&t<r}function $o(t,e,r,i){if(!C5(e,r,i))throw new Error("expected valid "+t+": "+r+" <= n < "+i+", got "+e)}function D5(t){let e;for(e=0;t>bu;t>>=Rp,e+=1);return e}const M5=t=>(A5<<BigInt(t-1))-Rp,T5={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||mu(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function xu(t,e,r={}){const i=(n,s,o)=>{const a=T5[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[n];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(n)+" is invalid. Expected "+s+", got "+c)};for(const[n,s]of Object.entries(e))i(n,s,!1);for(const[n,s]of Object.entries(r))i(n,s,!0);return t}function jp(t){const e=new WeakMap;return(r,...i)=>{const n=e.get(r);if(n!==void 0)return n;const s=t(r,...i);return e.set(r,s),s}}const bt=BigInt(0),Ue=BigInt(1),pn=BigInt(2),R5=BigInt(3),$u=BigInt(4),kp=BigInt(5),qp=BigInt(8);function ht(t,e){const r=t%e;return r>=bt?r:e+r}function N5(t,e,r){if(e<bt)throw new Error("invalid exponent, negatives unsupported");if(r<=bt)throw new Error("invalid modulus");if(r===Ue)return bt;let i=Ue;for(;e>bt;)e&Ue&&(i=i*t%r),t=t*t%r,e>>=Ue;return i}function Fr(t,e,r){let i=t;for(;e-- >bt;)i*=i,i%=r;return i}function zp(t,e){if(t===bt)throw new Error("invert: expected non-zero number");if(e<=bt)throw new Error("invert: expected positive modulus, got "+e);let r=ht(t,e),i=e,n=bt,s=Ue;for(;r!==bt;){const o=i/r,a=i%r,c=n-s*o;i=r,r=a,n=s,s=c}if(i!==Ue)throw new Error("invert: does not exist");return ht(n,e)}function B5(t){const e=(t-Ue)/pn;let r,i,n;for(r=t-Ue,i=0;r%pn===bt;r/=pn,i++);for(n=pn;n<t&&N5(n,e,t)!==t-Ue;n++)if(n>1e3)throw new Error("Cannot find square root: likely non-prime P");if(i===1){const o=(t+Ue)/$u;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(r+Ue)/pn;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=i,l=o.pow(o.mul(o.ONE,n),r),u=o.pow(a,s),d=o.pow(a,r);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let p=1;for(let v=o.sqr(d);p<c&&!o.eql(v,o.ONE);p++)v=o.sqr(v);const m=o.pow(l,Ue<<BigInt(c-p-1));l=o.sqr(m),u=o.mul(u,m),d=o.mul(d,l),c=p}return u}}function L5(t){if(t%$u===R5){const e=(t+Ue)/$u;return function(r,i){const n=r.pow(i,e);if(!r.eql(r.sqr(n),i))throw new Error("Cannot find square root");return n}}if(t%qp===kp){const e=(t-kp)/qp;return function(r,i){const n=r.mul(i,pn),s=r.pow(n,e),o=r.mul(i,s),a=r.mul(r.mul(o,pn),s),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return B5(t)}const F5=(t,e)=>(ht(t,e)&Ue)===Ue,U5=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function j5(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=U5.reduce((i,n)=>(i[n]="function",i),e);return xu(t,r)}function k5(t,e,r){if(r<bt)throw new Error("invalid exponent, negatives unsupported");if(r===bt)return t.ONE;if(r===Ue)return e;let i=t.ONE,n=e;for(;r>bt;)r&Ue&&(i=t.mul(i,n)),n=t.sqr(n),r>>=Ue;return i}function q5(t,e){const r=new Array(e.length),i=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),n=t.inv(i);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),n),r}function Hp(t,e){const r=e!==void 0?e:t.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function Wp(t,e,r=!1,i={}){if(t<=bt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:n,nByteLength:s}=Hp(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:n,BYTES:s,MASK:M5(n),ZERO:bt,ONE:Ue,create:c=>ht(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return bt<=c&&c<t},is0:c=>c===bt,isOdd:c=>(c&Ue)===Ue,neg:c=>ht(-c,t),eql:(c,l)=>c===l,sqr:c=>ht(c*c,t),add:(c,l)=>ht(c+l,t),sub:(c,l)=>ht(c-l,t),mul:(c,l)=>ht(c*l,t),pow:(c,l)=>k5(a,c,l),div:(c,l)=>ht(c*zp(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>zp(c,t),sqrt:i.sqrt||(c=>(o||(o=L5(t)),o(a,c))),invertBatch:c=>q5(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?_u(c,s):Fp(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?Wa(c):O5(c)}});return Object.freeze(a)}const Vp=BigInt(0),Va=BigInt(1);function Iu(t,e){const r=e.negate();return t?r:e}function Kp(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Su(t,e){Kp(t,e);const r=Math.ceil(e/t)+1,i=2**(t-1);return{windows:r,windowSize:i}}function z5(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,i)=>{if(!(r instanceof e))throw new Error("invalid point at index "+i)})}function H5(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,i)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+i)})}const Au=new WeakMap,Gp=new WeakMap;function Pu(t){return Gp.get(t)||1}function W5(t,e){return{constTimeNegate:Iu,hasPrecomputes(r){return Pu(r)!==1},unsafeLadder(r,i,n=t.ZERO){let s=r;for(;i>Vp;)i&Va&&(n=n.add(s)),s=s.double(),i>>=Va;return n},precomputeWindow(r,i){const{windows:n,windowSize:s}=Su(i,e),o=[];let a=r,c=a;for(let l=0;l<n;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,i,n){const{windows:s,windowSize:o}=Su(r,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**r-1),u=2**r,d=BigInt(r);for(let p=0;p<s;p++){const m=p*o;let v=Number(n&l);n>>=d,v>o&&(v-=u,n+=Va);const w=m,S=m+Math.abs(v)-1,x=p%2!==0,A=v<0;v===0?c=c.add(Iu(x,i[w])):a=a.add(Iu(A,i[S]))}return{p:a,f:c}},wNAFUnsafe(r,i,n,s=t.ZERO){const{windows:o,windowSize:a}=Su(r,e),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let d=0;d<o;d++){const p=d*a;if(n===Vp)break;let m=Number(n&c);if(n>>=u,m>a&&(m-=l,n+=Va),m===0)continue;let v=i[p+Math.abs(m)-1];m<0&&(v=v.negate()),s=s.add(v)}return s},getPrecomputes(r,i,n){let s=Au.get(i);return s||(s=this.precomputeWindow(i,r),r!==1&&Au.set(i,n(s))),s},wNAFCached(r,i,n){const s=Pu(r);return this.wNAF(s,this.getPrecomputes(s,r,n),i)},wNAFCachedUnsafe(r,i,n,s){const o=Pu(r);return o===1?this.unsafeLadder(r,i,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,n),i,s)},setWindowSize(r,i){Kp(i,e),Gp.set(r,i),Au.delete(r)}}}function V5(t,e,r,i){if(z5(r,t),H5(i,e),r.length!==i.length)throw new Error("arrays of points and scalars must have equal length");const n=t.ZERO,s=D5(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(n),l=Math.floor((e.BITS-1)/o)*o;let u=n;for(let d=l;d>=0;d-=o){c.fill(n);for(let m=0;m<i.length;m++){const v=i[m],w=Number(v>>BigInt(d)&BigInt(a));c[w]=c[w].add(r[m])}let p=n;for(let m=c.length-1,v=n;m>0;m--)v=v.add(c[m]),p=p.add(v);if(u=u.add(p),d!==0)for(let m=0;m<o;m++)u=u.double()}return u}function K5(t){return j5(t.Fp),xu(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Hp(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Sr=BigInt(0),Kt=BigInt(1),Ka=BigInt(2),G5=BigInt(8),Z5={zip215:!0};function Y5(t){const e=K5(t);return xu(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function J5(t){const e=Y5(t),{Fp:r,n:i,prehash:n,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=Ka<<BigInt(a*8)-Kt,u=r.create,d=Wp(e.n,e.nBitLength),p=e.uvRatio||((g,y)=>{try{return{isValid:!0,value:r.sqrt(g*r.inv(y))}}catch{return{isValid:!1,value:Sr}}}),m=e.adjustScalarBytes||(g=>g),v=e.domain||((g,y,I)=>{if(yu("phflag",I),y.length||I)throw new Error("Contexts/pre-hash are not supported");return g});function w(g,y){$o("coordinate "+g,y,Sr,l)}function S(g){if(!(g instanceof C))throw new Error("ExtendedPoint expected")}const x=jp((g,y)=>{const{ex:I,ey:O,ez:E}=g,f=g.is0();y==null&&(y=f?G5:r.inv(E));const P=u(I*y),F=u(O*y),j=u(E*y);if(f)return{x:Sr,y:Kt};if(j!==Kt)throw new Error("invZ was invalid");return{x:P,y:F}}),A=jp(g=>{const{a:y,d:I}=e;if(g.is0())throw new Error("bad point: ZERO");const{ex:O,ey:E,ez:f,et:P}=g,F=u(O*O),j=u(E*E),L=u(f*f),q=u(L*L),K=u(F*y),Z=u(L*u(K+j)),te=u(q+u(I*u(F*j)));if(Z!==te)throw new Error("bad point: equation left != right (1)");const G=u(O*E),Q=u(f*P);if(G!==Q)throw new Error("bad point: equation left != right (2)");return!0});class C{constructor(y,I,O,E){this.ex=y,this.ey=I,this.ez=O,this.et=E,w("x",y),w("y",I),w("z",O),w("t",E),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(y){if(y instanceof C)throw new Error("extended point not allowed");const{x:I,y:O}=y||{};return w("x",I),w("y",O),new C(I,O,Kt,u(I*O))}static normalizeZ(y){const I=r.invertBatch(y.map(O=>O.ez));return y.map((O,E)=>O.toAffine(I[E])).map(C.fromAffine)}static msm(y,I){return V5(C,d,y,I)}_setWindowSize(y){N.setWindowSize(this,y)}assertValidity(){A(this)}equals(y){S(y);const{ex:I,ey:O,ez:E}=this,{ex:f,ey:P,ez:F}=y,j=u(I*F),L=u(f*E),q=u(O*F),K=u(P*E);return j===L&&q===K}is0(){return this.equals(C.ZERO)}negate(){return new C(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:y}=e,{ex:I,ey:O,ez:E}=this,f=u(I*I),P=u(O*O),F=u(Ka*u(E*E)),j=u(y*f),L=I+O,q=u(u(L*L)-f-P),K=j+P,Z=K-F,te=j-P,G=u(q*Z),Q=u(K*te),ze=u(q*te),ie=u(Z*K);return new C(G,Q,ie,ze)}add(y){S(y);const{a:I,d:O}=e,{ex:E,ey:f,ez:P,et:F}=this,{ex:j,ey:L,ez:q,et:K}=y;if(I===BigInt(-1)){const Ae=u((f-E)*(L+j)),Ia=u((f+E)*(L-j)),Ie=u(Ia-Ae);if(Ie===Sr)return this.double();const Pe=u(P*Ka*K),Sa=u(F*Ka*q),Oe=Sa+Pe,Ce=Ia+Ae,Aa=Sa-Pe,Ne=u(Oe*Ie),Be=u(Ce*Aa),Al=u(Oe*Aa),Le=u(Ie*Ce);return new C(Ne,Be,Le,Al)}const Z=u(E*j),te=u(f*L),G=u(F*O*K),Q=u(P*q),ze=u((E+f)*(j+L)-Z-te),ie=Q-G,de=Q+G,Ut=u(te-I*Z),we=u(ze*ie),Te=u(de*Ut),Sl=u(ze*Ut),Re=u(ie*de);return new C(we,Te,Re,Sl)}subtract(y){return this.add(y.negate())}wNAF(y){return N.wNAFCached(this,y,C.normalizeZ)}multiply(y){const I=y;$o("scalar",I,Kt,i);const{p:O,f:E}=this.wNAF(I);return C.normalizeZ([O,E])[0]}multiplyUnsafe(y,I=C.ZERO){const O=y;return $o("scalar",O,Sr,i),O===Sr?T:this.is0()||O===Kt?this:N.wNAFCachedUnsafe(this,O,C.normalizeZ,I)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return N.unsafeLadder(this,i).is0()}toAffine(y){return x(this,y)}clearCofactor(){const{h:y}=e;return y===Kt?this:this.multiplyUnsafe(y)}static fromHex(y,I=!1){const{d:O,a:E}=e,f=r.BYTES;y=gi("pointHex",y,f),yu("zip215",I);const P=y.slice(),F=y[f-1];P[f-1]=F&-129;const j=Wa(P),L=I?l:r.ORDER;$o("pointHex.y",j,Sr,L);const q=u(j*j),K=u(q-Kt),Z=u(O*q-E);let{isValid:te,value:G}=p(K,Z);if(!te)throw new Error("Point.fromHex: invalid y coordinate");const Q=(G&Kt)===Kt,ze=(F&128)!==0;if(!I&&G===Sr&&ze)throw new Error("Point.fromHex: x=0 and x_0=1");return ze!==Q&&(G=u(-G)),C.fromAffine({x:G,y:j})}static fromPrivateKey(y){return M(y).point}toRawBytes(){const{x:y,y:I}=this.toAffine(),O=_u(I,r.BYTES);return O[O.length-1]|=y&Kt?128:0,O}toHex(){return wu(this.toRawBytes())}}C.BASE=new C(e.Gx,e.Gy,Kt,u(e.Gx*e.Gy)),C.ZERO=new C(Sr,Kt,Kt,Sr);const{BASE:D,ZERO:T}=C,N=W5(C,a*8);function R(g){return ht(g,i)}function B(g){return R(Wa(g))}function M(g){const y=r.BYTES;g=gi("private key",g,y);const I=gi("hashed private key",s(g),2*y),O=m(I.slice(0,y)),E=I.slice(y,2*y),f=B(O),P=D.multiply(f),F=P.toRawBytes();return{head:O,prefix:E,scalar:f,point:P,pointBytes:F}}function U(g){return M(g).pointBytes}function $(g=new Uint8Array,...y){const I=Up(...y);return B(s(v(I,gi("context",g),!!n)))}function h(g,y,I={}){g=gi("message",g),n&&(g=n(g));const{prefix:O,scalar:E,pointBytes:f}=M(y),P=$(I.context,O,g),F=D.multiply(P).toRawBytes(),j=$(I.context,F,f,g),L=R(P+j*E);$o("signature.s",L,Sr,i);const q=Up(F,_u(L,r.BYTES));return gi("result",q,r.BYTES*2)}const b=Z5;function _(g,y,I,O=b){const{context:E,zip215:f}=O,P=r.BYTES;g=gi("signature",g,2*P),y=gi("message",y),I=gi("publicKey",I,P),f!==void 0&&yu("zip215",f),n&&(y=n(y));const F=Wa(g.slice(P,2*P));let j,L,q;try{j=C.fromHex(I,f),L=C.fromHex(g.slice(0,P),f),q=D.multiplyUnsafe(F)}catch{return!1}if(!f&&j.isSmallOrder())return!1;const K=$(E,L.toRawBytes(),j.toRawBytes(),y);return L.add(j.multiplyUnsafe(K)).subtract(q).clearCofactor().equals(C.ZERO)}return D._setWindowSize(8),{CURVE:e,getPublicKey:U,sign:h,verify:_,ExtendedPoint:C,utils:{getExtendedPublicKey:M,randomPrivateKey:()=>o(r.BYTES),precompute(g=8,y=C.BASE){return y._setWindowSize(g),y.multiply(BigInt(3)),y}}}}BigInt(0),BigInt(1);const Ou=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Zp=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Q5=BigInt(1),Yp=BigInt(2);BigInt(3);const X5=BigInt(5),e6=BigInt(8);function t6(t){const e=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=Ou,o=t*t%s*t%s,a=Fr(o,Yp,s)*o%s,c=Fr(a,Q5,s)*t%s,l=Fr(c,X5,s)*c%s,u=Fr(l,e,s)*l%s,d=Fr(u,r,s)*u%s,p=Fr(d,i,s)*d%s,m=Fr(p,n,s)*p%s,v=Fr(m,n,s)*p%s,w=Fr(v,e,s)*l%s;return{pow_p_5_8:Fr(w,Yp,s)*t%s,b2:o}}function r6(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function i6(t,e){const r=Ou,i=ht(e*e*e,r),n=ht(i*i*e,r),s=t6(t*n).pow_p_5_8;let o=ht(t*i*s,r);const a=ht(e*o*o,r),c=o,l=ht(o*Zp,r),u=a===t,d=a===ht(-t,r),p=a===ht(-t*Zp,r);return u&&(o=c),(d||p)&&(o=l),F5(o,r)&&(o=ht(-o,r)),{isValid:u||d,value:o}}const n6=Wp(Ou,void 0,!0),s6={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:n6,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:e6,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:S5,randomBytes:Mp,adjustScalarBytes:r6,uvRatio:i6},Jp=J5(s6),o6="EdDSA",a6="JWT",Ga=".",Za="base64url",Qp="utf8",Xp="utf8",c6=":",l6="did",u6="key",e1="base58btc",h6="z",d6="K36",f6=32;function Cu(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function t1(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Cu(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function r1(t,e){e||(e=t.reduce((n,s)=>n+s.length,0));const r=t1(e);let i=0;for(const n of t)r.set(n,i),i+=n.length;return Cu(r)}function p6(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var w=0,S=0,x=0,A=v.length;x!==A&&v[x]===0;)x++,w++;for(var C=(A-x)*u+1>>>0,D=new Uint8Array(C);x!==A;){for(var T=v[x],N=0,R=C-1;(T!==0||N<S)&&R!==-1;R--,N++)T+=256*D[R]>>>0,D[R]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");S=N,x++}for(var B=C-S;B!==C&&D[B]===0;)B++;for(var M=c.repeat(w);B<C;++B)M+=t.charAt(D[B]);return M}function p(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var w=0;if(v[w]!==" "){for(var S=0,x=0;v[w]===c;)S++,w++;for(var A=(v.length-w)*l+1>>>0,C=new Uint8Array(A);v[w];){var D=r[v.charCodeAt(w)];if(D===255)return;for(var T=0,N=A-1;(D!==0||T<x)&&N!==-1;N--,T++)D+=a*C[N]>>>0,C[N]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");x=T,w++}if(v[w]!==" "){for(var R=A-x;R!==A&&C[R]===0;)R++;for(var B=new Uint8Array(S+(A-R)),M=S;R!==A;)B[M++]=C[R++];return B}}}function m(v){var w=p(v);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:p,decode:m}}var g6=p6,b6=g6;const i1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},m6=t=>new TextEncoder().encode(t),v6=t=>new TextDecoder().decode(t);class y6{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class w6{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return n1(this,e)}}class _6{constructor(e){this.decoders=e}or(e){return n1(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const n1=(t,e)=>new _6({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class E6{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new y6(e,r,i),this.decoder=new w6(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ya=({name:t,prefix:e,encode:r,decode:i})=>new E6(t,e,r,i),Io=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:n}=b6(r,e);return Ya({prefix:t,name:e,encode:i,decode:s=>i1(n(s))})},x6=(t,e,r,i)=>{const n={};for(let u=0;u<e.length;++u)n[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=n[t[u]];if(d===void 0)throw new SyntaxError(`Non-${i} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},$6=(t,e,r)=>{const i=e[e.length-1]==="=",n=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},St=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>Ya({prefix:e,name:t,encode(n){return $6(n,i,r)},decode(n){return x6(n,i,r,t)}}),I6=Ya({prefix:"\0",name:"identity",encode:t=>v6(t),decode:t=>m6(t)});var S6=Object.freeze({__proto__:null,identity:I6});const A6=St({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var P6=Object.freeze({__proto__:null,base2:A6});const O6=St({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var C6=Object.freeze({__proto__:null,base8:O6});const D6=Io({prefix:"9",name:"base10",alphabet:"0123456789"});var M6=Object.freeze({__proto__:null,base10:D6});const T6=St({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),R6=St({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var N6=Object.freeze({__proto__:null,base16:T6,base16upper:R6});const B6=St({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),L6=St({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),F6=St({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),U6=St({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),j6=St({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),k6=St({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),q6=St({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),z6=St({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),H6=St({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var W6=Object.freeze({__proto__:null,base32:B6,base32upper:L6,base32pad:F6,base32padupper:U6,base32hex:j6,base32hexupper:k6,base32hexpad:q6,base32hexpadupper:z6,base32z:H6});const V6=Io({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),K6=Io({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var G6=Object.freeze({__proto__:null,base36:V6,base36upper:K6});const Z6=Io({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Y6=Io({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var J6=Object.freeze({__proto__:null,base58btc:Z6,base58flickr:Y6});const Q6=St({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),X6=St({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),e8=St({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),t8=St({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var r8=Object.freeze({__proto__:null,base64:Q6,base64pad:X6,base64url:e8,base64urlpad:t8});const s1=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),i8=s1.reduce((t,e,r)=>(t[r]=e,t),[]),n8=s1.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function s8(t){return t.reduce((e,r)=>(e+=i8[r],e),"")}function o8(t){const e=[];for(const r of t){const i=n8[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const a8=Ya({prefix:"\u{1F680}",name:"base256emoji",encode:s8,decode:o8});var c8=Object.freeze({__proto__:null,base256emoji:a8}),l8=a1,o1=128,u8=127,h8=~u8,d8=Math.pow(2,31);function a1(t,e,r){e=e||[],r=r||0;for(var i=r;t>=d8;)e[r++]=t&255|o1,t/=128;for(;t&h8;)e[r++]=t&255|o1,t>>>=7;return e[r]=t|0,a1.bytes=r-i+1,e}var f8=Du,p8=128,c1=127;function Du(t,i){var r=0,i=i||0,n=0,s=i,o,a=t.length;do{if(s>=a)throw Du.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=n<28?(o&c1)<<n:(o&c1)*Math.pow(2,n),n+=7}while(o>=p8);return Du.bytes=s-i,r}var g8=Math.pow(2,7),b8=Math.pow(2,14),m8=Math.pow(2,21),v8=Math.pow(2,28),y8=Math.pow(2,35),w8=Math.pow(2,42),_8=Math.pow(2,49),E8=Math.pow(2,56),x8=Math.pow(2,63),$8=function(t){return t<g8?1:t<b8?2:t<m8?3:t<v8?4:t<y8?5:t<w8?6:t<_8?7:t<E8?8:t<x8?9:10},I8={encode:l8,decode:f8,encodingLength:$8},l1=I8;const u1=(t,e,r=0)=>(l1.encode(t,e,r),e),h1=t=>l1.encodingLength(t),Mu=(t,e)=>{const r=e.byteLength,i=h1(t),n=i+h1(r),s=new Uint8Array(n+r);return u1(t,s,0),u1(r,s,i),s.set(e,n),new S8(t,r,e,s)};class S8{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}const d1=({name:t,code:e,encode:r})=>new A8(t,e,r);class A8{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Mu(this.code,r):r.then(i=>Mu(this.code,i))}else throw Error("Unknown type, must be binary type")}}const f1=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),P8=d1({name:"sha2-256",code:18,encode:f1("SHA-256")}),O8=d1({name:"sha2-512",code:19,encode:f1("SHA-512")});var C8=Object.freeze({__proto__:null,sha256:P8,sha512:O8});const p1=0,D8="identity",g1=i1;var M8=Object.freeze({__proto__:null,identity:{code:p1,name:D8,encode:g1,digest:t=>Mu(p1,g1(t))}});new TextEncoder,new TextDecoder;const b1={...S6,...P6,...C6,...M6,...N6,...W6,...G6,...J6,...r8,...c8};({...C8,...M8});function m1(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const v1=m1("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Tu=m1("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=t1(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),y1={utf8:v1,"utf-8":v1,hex:b1.base16,latin1:Tu,ascii:Tu,binary:Tu,...b1};function Ja(t,e="utf8"){const r=y1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function cs(t,e="utf8"){const r=y1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Cu(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function w1(t){return fn(Ja(cs(t,Za),Qp))}function Qa(t){return Ja(cs(fi(t),Qp),Za)}function _1(t){const e=cs(d6,e1),r=h6+Ja(r1([e,t]),e1);return[l6,u6,r].join(c6)}function T8(t){return Ja(t,Za)}function R8(t){return cs(t,Za)}function N8(t){return cs([Qa(t.header),Qa(t.payload)].join(Ga),Xp)}function B8(t){return[Qa(t.header),Qa(t.payload),T8(t.signature)].join(Ga)}function Ru(t){const e=t.split(Ga),r=w1(e[0]),i=w1(e[1]),n=R8(e[2]),s=cs(e.slice(0,2).join(Ga),Xp);return{header:r,payload:i,signature:n,data:s}}function E1(t=Mp(f6)){const e=Jp.getPublicKey(t);return{secretKey:r1([t,e]),publicKey:e}}async function L8(t,e,r,i,n=z.fromMiliseconds(Date.now())){const s={alg:o6,typ:a6},o=_1(i.publicKey),a=n+r,c={iss:o,sub:t,aud:e,iat:n,exp:a},l=N8({header:s,payload:c}),u=Jp.sign(l,i.secretKey.slice(0,32));return B8({header:s,payload:c,signature:u})}function x1(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Nu(t,e){e||(e=t.reduce((n,s)=>n+s.length,0));const r=x1(e);let i=0;for(const n of t)r.set(n,i),i+=n.length;return r}function F8(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var w=0,S=0,x=0,A=v.length;x!==A&&v[x]===0;)x++,w++;for(var C=(A-x)*u+1>>>0,D=new Uint8Array(C);x!==A;){for(var T=v[x],N=0,R=C-1;(T!==0||N<S)&&R!==-1;R--,N++)T+=256*D[R]>>>0,D[R]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");S=N,x++}for(var B=C-S;B!==C&&D[B]===0;)B++;for(var M=c.repeat(w);B<C;++B)M+=t.charAt(D[B]);return M}function p(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var w=0;if(v[w]!==" "){for(var S=0,x=0;v[w]===c;)S++,w++;for(var A=(v.length-w)*l+1>>>0,C=new Uint8Array(A);v[w];){var D=r[v.charCodeAt(w)];if(D===255)return;for(var T=0,N=A-1;(D!==0||T<x)&&N!==-1;N--,T++)D+=a*C[N]>>>0,C[N]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");x=T,w++}if(v[w]!==" "){for(var R=A-x;R!==A&&C[R]===0;)R++;for(var B=new Uint8Array(S+(A-R)),M=S;R!==A;)B[M++]=C[R++];return B}}}function m(v){var w=p(v);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:p,decode:m}}var U8=F8,j8=U8;const $1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},k8=t=>new TextEncoder().encode(t),q8=t=>new TextDecoder().decode(t);class z8{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class H8{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return I1(this,e)}}class W8{constructor(e){this.decoders=e}or(e){return I1(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const I1=(t,e)=>new W8({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class V8{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new z8(e,r,i),this.decoder=new H8(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Xa=({name:t,prefix:e,encode:r,decode:i})=>new V8(t,e,r,i),So=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:n}=j8(r,e);return Xa({prefix:t,name:e,encode:i,decode:s=>$1(n(s))})},K8=(t,e,r,i)=>{const n={};for(let u=0;u<e.length;++u)n[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=n[t[u]];if(d===void 0)throw new SyntaxError(`Non-${i} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},G8=(t,e,r)=>{const i=e[e.length-1]==="=",n=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},At=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>Xa({prefix:e,name:t,encode(n){return G8(n,i,r)},decode(n){return K8(n,i,r,t)}}),Z8=Xa({prefix:"\0",name:"identity",encode:t=>q8(t),decode:t=>k8(t)});var Y8=Object.freeze({__proto__:null,identity:Z8});const J8=At({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Q8=Object.freeze({__proto__:null,base2:J8});const X8=At({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var e7=Object.freeze({__proto__:null,base8:X8});const t7=So({prefix:"9",name:"base10",alphabet:"0123456789"});var r7=Object.freeze({__proto__:null,base10:t7});const i7=At({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),n7=At({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var s7=Object.freeze({__proto__:null,base16:i7,base16upper:n7});const o7=At({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),a7=At({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),c7=At({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),l7=At({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),u7=At({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),h7=At({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),d7=At({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),f7=At({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),p7=At({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var g7=Object.freeze({__proto__:null,base32:o7,base32upper:a7,base32pad:c7,base32padupper:l7,base32hex:u7,base32hexupper:h7,base32hexpad:d7,base32hexpadupper:f7,base32z:p7});const b7=So({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),m7=So({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var v7=Object.freeze({__proto__:null,base36:b7,base36upper:m7});const y7=So({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),w7=So({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var _7=Object.freeze({__proto__:null,base58btc:y7,base58flickr:w7});const E7=At({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),x7=At({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$7=At({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),I7=At({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var S7=Object.freeze({__proto__:null,base64:E7,base64pad:x7,base64url:$7,base64urlpad:I7});const S1=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),A7=S1.reduce((t,e,r)=>(t[r]=e,t),[]),P7=S1.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function O7(t){return t.reduce((e,r)=>(e+=A7[r],e),"")}function C7(t){const e=[];for(const r of t){const i=P7[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const D7=Xa({prefix:"\u{1F680}",name:"base256emoji",encode:O7,decode:C7});var M7=Object.freeze({__proto__:null,base256emoji:D7}),T7=P1,A1=128,R7=127,N7=~R7,B7=Math.pow(2,31);function P1(t,e,r){e=e||[],r=r||0;for(var i=r;t>=B7;)e[r++]=t&255|A1,t/=128;for(;t&N7;)e[r++]=t&255|A1,t>>>=7;return e[r]=t|0,P1.bytes=r-i+1,e}var L7=Bu,F7=128,O1=127;function Bu(t,i){var r=0,i=i||0,n=0,s=i,o,a=t.length;do{if(s>=a)throw Bu.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=n<28?(o&O1)<<n:(o&O1)*Math.pow(2,n),n+=7}while(o>=F7);return Bu.bytes=s-i,r}var U7=Math.pow(2,7),j7=Math.pow(2,14),k7=Math.pow(2,21),q7=Math.pow(2,28),z7=Math.pow(2,35),H7=Math.pow(2,42),W7=Math.pow(2,49),V7=Math.pow(2,56),K7=Math.pow(2,63),G7=function(t){return t<U7?1:t<j7?2:t<k7?3:t<q7?4:t<z7?5:t<H7?6:t<W7?7:t<V7?8:t<K7?9:10},Z7={encode:T7,decode:L7,encodingLength:G7},C1=Z7;const D1=(t,e,r=0)=>(C1.encode(t,e,r),e),M1=t=>C1.encodingLength(t),Lu=(t,e)=>{const r=e.byteLength,i=M1(t),n=i+M1(r),s=new Uint8Array(n+r);return D1(t,s,0),D1(r,s,i),s.set(e,n),new Y7(t,r,e,s)};class Y7{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}const T1=({name:t,code:e,encode:r})=>new J7(t,e,r);class J7{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Lu(this.code,r):r.then(i=>Lu(this.code,i))}else throw Error("Unknown type, must be binary type")}}const R1=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Q7=T1({name:"sha2-256",code:18,encode:R1("SHA-256")}),X7=T1({name:"sha2-512",code:19,encode:R1("SHA-512")});var e9=Object.freeze({__proto__:null,sha256:Q7,sha512:X7});const N1=0,t9="identity",B1=$1;var r9=Object.freeze({__proto__:null,identity:{code:N1,name:t9,encode:B1,digest:t=>Lu(N1,B1(t))}});new TextEncoder,new TextDecoder;const L1={...Y8,...Q8,...e7,...r7,...s7,...g7,...v7,..._7,...S7,...M7};({...e9,...r9});function F1(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const U1=F1("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Fu=F1("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=x1(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),j1={utf8:U1,"utf-8":U1,hex:L1.base16,latin1:Fu,ascii:Fu,binary:Fu,...L1};function fr(t,e="utf8"){const r=j1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function qt(t,e="utf8"){const r=j1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var k1={},i9="elliptic",n9="6.6.1",s9="EC cryptography",o9="lib/elliptic.js",a9=["lib"],c9={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},l9={type:"git",url:"git@github.com:indutny/elliptic"},u9=["EC","Elliptic","curve","Cryptography"],h9="Fedor Indutny <fedor@indutny.com>",d9="MIT",f9={url:"https://github.com/indutny/elliptic/issues"},p9="https://github.com/indutny/elliptic",g9={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},b9={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},m9={name:i9,version:n9,description:s9,main:o9,files:a9,scripts:c9,repository:l9,keywords:u9,author:h9,license:d9,bugs:f9,homepage:p9,devDependencies:g9,dependencies:b9},ir={},Ur={exports:{}},v9={},y9=Object.freeze({__proto__:null,default:v9}),q1=Pl(y9);(function(t){(function(e,r){function i($,h){if(!$)throw new Error(h||"Assertion failed")}function n($,h){$.super_=h;var b=function(){};b.prototype=h.prototype,$.prototype=new b,$.prototype.constructor=$}function s($,h,b){if(s.isBN($))return $;this.negative=0,this.words=null,this.length=0,this.red=null,$!==null&&((h==="le"||h==="be")&&(b=h,h=10),this._init($||0,h||10,b||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=q1.Buffer}catch{}s.isBN=function(h){return h instanceof s?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===s.wordSize&&Array.isArray(h.words)},s.max=function(h,b){return h.cmp(b)>0?h:b},s.min=function(h,b){return h.cmp(b)<0?h:b},s.prototype._init=function(h,b,_){if(typeof h=="number")return this._initNumber(h,b,_);if(typeof h=="object")return this._initArray(h,b,_);b==="hex"&&(b=16),i(b===(b|0)&&b>=2&&b<=36),h=h.toString().replace(/\s+/g,"");var g=0;h[0]==="-"&&(g++,this.negative=1),g<h.length&&(b===16?this._parseHex(h,g,_):(this._parseBase(h,b,g),_==="le"&&this._initArray(this.toArray(),b,_)))},s.prototype._initNumber=function(h,b,_){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(i(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),_==="le"&&this._initArray(this.toArray(),b,_)},s.prototype._initArray=function(h,b,_){if(i(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var y,I,O=0;if(_==="be")for(g=h.length-1,y=0;g>=0;g-=3)I=h[g]|h[g-1]<<8|h[g-2]<<16,this.words[y]|=I<<O&67108863,this.words[y+1]=I>>>26-O&67108863,O+=24,O>=26&&(O-=26,y++);else if(_==="le")for(g=0,y=0;g<h.length;g+=3)I=h[g]|h[g+1]<<8|h[g+2]<<16,this.words[y]|=I<<O&67108863,this.words[y+1]=I>>>26-O&67108863,O+=24,O>=26&&(O-=26,y++);return this.strip()};function a($,h){var b=$.charCodeAt(h);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function c($,h,b){var _=a($,b);return b-1>=h&&(_|=a($,b-1)<<4),_}s.prototype._parseHex=function(h,b,_){this.length=Math.ceil((h.length-b)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var y=0,I=0,O;if(_==="be")for(g=h.length-1;g>=b;g-=2)O=c(h,b,g)<<y,this.words[I]|=O&67108863,y>=18?(y-=18,I+=1,this.words[I]|=O>>>26):y+=8;else{var E=h.length-b;for(g=E%2===0?b+1:b;g<h.length;g+=2)O=c(h,b,g)<<y,this.words[I]|=O&67108863,y>=18?(y-=18,I+=1,this.words[I]|=O>>>26):y+=8}this.strip()};function l($,h,b,_){for(var g=0,y=Math.min($.length,b),I=h;I<y;I++){var O=$.charCodeAt(I)-48;g*=_,O>=49?g+=O-49+10:O>=17?g+=O-17+10:g+=O}return g}s.prototype._parseBase=function(h,b,_){this.words=[0],this.length=1;for(var g=0,y=1;y<=67108863;y*=b)g++;g--,y=y/b|0;for(var I=h.length-_,O=I%g,E=Math.min(I,I-O)+_,f=0,P=_;P<E;P+=g)f=l(h,P,P+g,b),this.imuln(y),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(O!==0){var F=1;for(f=l(h,P,h.length,b),P=0;P<O;P++)F*=b;this.imuln(F),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this.strip()},s.prototype.copy=function(h){h.words=new Array(this.length);for(var b=0;b<this.length;b++)h.words[b]=this.words[b];h.length=this.length,h.negative=this.negative,h.red=this.red},s.prototype.clone=function(){var h=new s(null);return this.copy(h),h},s.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(h,b){h=h||10,b=b|0||1;var _;if(h===16||h==="hex"){_="";for(var g=0,y=0,I=0;I<this.length;I++){var O=this.words[I],E=((O<<g|y)&16777215).toString(16);y=O>>>24-g&16777215,g+=2,g>=26&&(g-=26,I--),y!==0||I!==this.length-1?_=u[6-E.length]+E+_:_=E+_}for(y!==0&&(_=y.toString(16)+_);_.length%b!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}if(h===(h|0)&&h>=2&&h<=36){var f=d[h],P=p[h];_="";var F=this.clone();for(F.negative=0;!F.isZero();){var j=F.modn(P).toString(h);F=F.idivn(P),F.isZero()?_=j+_:_=u[f-j.length]+j+_}for(this.isZero()&&(_="0"+_);_.length%b!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(h,b){return i(typeof o<"u"),this.toArrayLike(o,h,b)},s.prototype.toArray=function(h,b){return this.toArrayLike(Array,h,b)},s.prototype.toArrayLike=function(h,b,_){var g=this.byteLength(),y=_||Math.max(1,g);i(g<=y,"byte array longer than desired length"),i(y>0,"Requested array length <= 0"),this.strip();var I=b==="le",O=new h(y),E,f,P=this.clone();if(I){for(f=0;!P.isZero();f++)E=P.andln(255),P.iushrn(8),O[f]=E;for(;f<y;f++)O[f]=0}else{for(f=0;f<y-g;f++)O[f]=0;for(f=0;!P.isZero();f++)E=P.andln(255),P.iushrn(8),O[y-f-1]=E}return O},Math.clz32?s.prototype._countBits=function(h){return 32-Math.clz32(h)}:s.prototype._countBits=function(h){var b=h,_=0;return b>=4096&&(_+=13,b>>>=13),b>=64&&(_+=7,b>>>=7),b>=8&&(_+=4,b>>>=4),b>=2&&(_+=2,b>>>=2),_+b},s.prototype._zeroBits=function(h){if(h===0)return 26;var b=h,_=0;return(b&8191)===0&&(_+=13,b>>>=13),(b&127)===0&&(_+=7,b>>>=7),(b&15)===0&&(_+=4,b>>>=4),(b&3)===0&&(_+=2,b>>>=2),(b&1)===0&&_++,_},s.prototype.bitLength=function(){var h=this.words[this.length-1],b=this._countBits(h);return(this.length-1)*26+b};function m($){for(var h=new Array($.bitLength()),b=0;b<h.length;b++){var _=b/26|0,g=b%26;h[b]=($.words[_]&1<<g)>>>g}return h}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,b=0;b<this.length;b++){var _=this._zeroBits(this.words[b]);if(h+=_,_!==26)break}return h},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},s.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var b=0;b<h.length;b++)this.words[b]=this.words[b]|h.words[b];return this.strip()},s.prototype.ior=function(h){return i((this.negative|h.negative)===0),this.iuor(h)},s.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},s.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},s.prototype.iuand=function(h){var b;this.length>h.length?b=h:b=this;for(var _=0;_<b.length;_++)this.words[_]=this.words[_]&h.words[_];return this.length=b.length,this.strip()},s.prototype.iand=function(h){return i((this.negative|h.negative)===0),this.iuand(h)},s.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},s.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},s.prototype.iuxor=function(h){var b,_;this.length>h.length?(b=this,_=h):(b=h,_=this);for(var g=0;g<_.length;g++)this.words[g]=b.words[g]^_.words[g];if(this!==b)for(;g<b.length;g++)this.words[g]=b.words[g];return this.length=b.length,this.strip()},s.prototype.ixor=function(h){return i((this.negative|h.negative)===0),this.iuxor(h)},s.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},s.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},s.prototype.inotn=function(h){i(typeof h=="number"&&h>=0);var b=Math.ceil(h/26)|0,_=h%26;this._expand(b),_>0&&b--;for(var g=0;g<b;g++)this.words[g]=~this.words[g]&67108863;return _>0&&(this.words[g]=~this.words[g]&67108863>>26-_),this.strip()},s.prototype.notn=function(h){return this.clone().inotn(h)},s.prototype.setn=function(h,b){i(typeof h=="number"&&h>=0);var _=h/26|0,g=h%26;return this._expand(_+1),b?this.words[_]=this.words[_]|1<<g:this.words[_]=this.words[_]&~(1<<g),this.strip()},s.prototype.iadd=function(h){var b;if(this.negative!==0&&h.negative===0)return this.negative=0,b=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,b=this.isub(h),h.negative=1,b._normSign();var _,g;this.length>h.length?(_=this,g=h):(_=h,g=this);for(var y=0,I=0;I<g.length;I++)b=(_.words[I]|0)+(g.words[I]|0)+y,this.words[I]=b&67108863,y=b>>>26;for(;y!==0&&I<_.length;I++)b=(_.words[I]|0)+y,this.words[I]=b&67108863,y=b>>>26;if(this.length=_.length,y!==0)this.words[this.length]=y,this.length++;else if(_!==this)for(;I<_.length;I++)this.words[I]=_.words[I];return this},s.prototype.add=function(h){var b;return h.negative!==0&&this.negative===0?(h.negative=0,b=this.sub(h),h.negative^=1,b):h.negative===0&&this.negative!==0?(this.negative=0,b=h.sub(this),this.negative=1,b):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},s.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var b=this.iadd(h);return h.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var _=this.cmp(h);if(_===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,y;_>0?(g=this,y=h):(g=h,y=this);for(var I=0,O=0;O<y.length;O++)b=(g.words[O]|0)-(y.words[O]|0)+I,I=b>>26,this.words[O]=b&67108863;for(;I!==0&&O<g.length;O++)b=(g.words[O]|0)+I,I=b>>26,this.words[O]=b&67108863;if(I===0&&O<g.length&&g!==this)for(;O<g.length;O++)this.words[O]=g.words[O];return this.length=Math.max(this.length,O),g!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(h){return this.clone().isub(h)};function v($,h,b){b.negative=h.negative^$.negative;var _=$.length+h.length|0;b.length=_,_=_-1|0;var g=$.words[0]|0,y=h.words[0]|0,I=g*y,O=I&67108863,E=I/67108864|0;b.words[0]=O;for(var f=1;f<_;f++){for(var P=E>>>26,F=E&67108863,j=Math.min(f,h.length-1),L=Math.max(0,f-$.length+1);L<=j;L++){var q=f-L|0;g=$.words[q]|0,y=h.words[L]|0,I=g*y+F,P+=I/67108864|0,F=I&67108863}b.words[f]=F|0,E=P|0}return E!==0?b.words[f]=E|0:b.length--,b.strip()}var w=function(h,b,_){var g=h.words,y=b.words,I=_.words,O=0,E,f,P,F=g[0]|0,j=F&8191,L=F>>>13,q=g[1]|0,K=q&8191,Z=q>>>13,te=g[2]|0,G=te&8191,Q=te>>>13,ze=g[3]|0,ie=ze&8191,de=ze>>>13,Ut=g[4]|0,we=Ut&8191,Te=Ut>>>13,Sl=g[5]|0,Re=Sl&8191,Ae=Sl>>>13,Ia=g[6]|0,Ie=Ia&8191,Pe=Ia>>>13,Sa=g[7]|0,Oe=Sa&8191,Ce=Sa>>>13,Aa=g[8]|0,Ne=Aa&8191,Be=Aa>>>13,Al=g[9]|0,Le=Al&8191,He=Al>>>13,fy=y[0]|0,We=fy&8191,Ve=fy>>>13,py=y[1]|0,Ke=py&8191,Ge=py>>>13,gy=y[2]|0,Ze=gy&8191,Ye=gy>>>13,by=y[3]|0,Je=by&8191,Qe=by>>>13,my=y[4]|0,Xe=my&8191,et=my>>>13,vy=y[5]|0,tt=vy&8191,rt=vy>>>13,yy=y[6]|0,it=yy&8191,nt=yy>>>13,wy=y[7]|0,st=wy&8191,ot=wy>>>13,_y=y[8]|0,at=_y&8191,ct=_y>>>13,Ey=y[9]|0,lt=Ey&8191,ut=Ey>>>13;_.negative=h.negative^b.negative,_.length=19,E=Math.imul(j,We),f=Math.imul(j,Ve),f=f+Math.imul(L,We)|0,P=Math.imul(L,Ve);var Of=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(Of>>>26)|0,Of&=67108863,E=Math.imul(K,We),f=Math.imul(K,Ve),f=f+Math.imul(Z,We)|0,P=Math.imul(Z,Ve),E=E+Math.imul(j,Ke)|0,f=f+Math.imul(j,Ge)|0,f=f+Math.imul(L,Ke)|0,P=P+Math.imul(L,Ge)|0;var Cf=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(Cf>>>26)|0,Cf&=67108863,E=Math.imul(G,We),f=Math.imul(G,Ve),f=f+Math.imul(Q,We)|0,P=Math.imul(Q,Ve),E=E+Math.imul(K,Ke)|0,f=f+Math.imul(K,Ge)|0,f=f+Math.imul(Z,Ke)|0,P=P+Math.imul(Z,Ge)|0,E=E+Math.imul(j,Ze)|0,f=f+Math.imul(j,Ye)|0,f=f+Math.imul(L,Ze)|0,P=P+Math.imul(L,Ye)|0;var Df=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(Df>>>26)|0,Df&=67108863,E=Math.imul(ie,We),f=Math.imul(ie,Ve),f=f+Math.imul(de,We)|0,P=Math.imul(de,Ve),E=E+Math.imul(G,Ke)|0,f=f+Math.imul(G,Ge)|0,f=f+Math.imul(Q,Ke)|0,P=P+Math.imul(Q,Ge)|0,E=E+Math.imul(K,Ze)|0,f=f+Math.imul(K,Ye)|0,f=f+Math.imul(Z,Ze)|0,P=P+Math.imul(Z,Ye)|0,E=E+Math.imul(j,Je)|0,f=f+Math.imul(j,Qe)|0,f=f+Math.imul(L,Je)|0,P=P+Math.imul(L,Qe)|0;var Mf=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(Mf>>>26)|0,Mf&=67108863,E=Math.imul(we,We),f=Math.imul(we,Ve),f=f+Math.imul(Te,We)|0,P=Math.imul(Te,Ve),E=E+Math.imul(ie,Ke)|0,f=f+Math.imul(ie,Ge)|0,f=f+Math.imul(de,Ke)|0,P=P+Math.imul(de,Ge)|0,E=E+Math.imul(G,Ze)|0,f=f+Math.imul(G,Ye)|0,f=f+Math.imul(Q,Ze)|0,P=P+Math.imul(Q,Ye)|0,E=E+Math.imul(K,Je)|0,f=f+Math.imul(K,Qe)|0,f=f+Math.imul(Z,Je)|0,P=P+Math.imul(Z,Qe)|0,E=E+Math.imul(j,Xe)|0,f=f+Math.imul(j,et)|0,f=f+Math.imul(L,Xe)|0,P=P+Math.imul(L,et)|0;var Tf=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(Tf>>>26)|0,Tf&=67108863,E=Math.imul(Re,We),f=Math.imul(Re,Ve),f=f+Math.imul(Ae,We)|0,P=Math.imul(Ae,Ve),E=E+Math.imul(we,Ke)|0,f=f+Math.imul(we,Ge)|0,f=f+Math.imul(Te,Ke)|0,P=P+Math.imul(Te,Ge)|0,E=E+Math.imul(ie,Ze)|0,f=f+Math.imul(ie,Ye)|0,f=f+Math.imul(de,Ze)|0,P=P+Math.imul(de,Ye)|0,E=E+Math.imul(G,Je)|0,f=f+Math.imul(G,Qe)|0,f=f+Math.imul(Q,Je)|0,P=P+Math.imul(Q,Qe)|0,E=E+Math.imul(K,Xe)|0,f=f+Math.imul(K,et)|0,f=f+Math.imul(Z,Xe)|0,P=P+Math.imul(Z,et)|0,E=E+Math.imul(j,tt)|0,f=f+Math.imul(j,rt)|0,f=f+Math.imul(L,tt)|0,P=P+Math.imul(L,rt)|0;var Rf=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(Rf>>>26)|0,Rf&=67108863,E=Math.imul(Ie,We),f=Math.imul(Ie,Ve),f=f+Math.imul(Pe,We)|0,P=Math.imul(Pe,Ve),E=E+Math.imul(Re,Ke)|0,f=f+Math.imul(Re,Ge)|0,f=f+Math.imul(Ae,Ke)|0,P=P+Math.imul(Ae,Ge)|0,E=E+Math.imul(we,Ze)|0,f=f+Math.imul(we,Ye)|0,f=f+Math.imul(Te,Ze)|0,P=P+Math.imul(Te,Ye)|0,E=E+Math.imul(ie,Je)|0,f=f+Math.imul(ie,Qe)|0,f=f+Math.imul(de,Je)|0,P=P+Math.imul(de,Qe)|0,E=E+Math.imul(G,Xe)|0,f=f+Math.imul(G,et)|0,f=f+Math.imul(Q,Xe)|0,P=P+Math.imul(Q,et)|0,E=E+Math.imul(K,tt)|0,f=f+Math.imul(K,rt)|0,f=f+Math.imul(Z,tt)|0,P=P+Math.imul(Z,rt)|0,E=E+Math.imul(j,it)|0,f=f+Math.imul(j,nt)|0,f=f+Math.imul(L,it)|0,P=P+Math.imul(L,nt)|0;var Nf=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(Nf>>>26)|0,Nf&=67108863,E=Math.imul(Oe,We),f=Math.imul(Oe,Ve),f=f+Math.imul(Ce,We)|0,P=Math.imul(Ce,Ve),E=E+Math.imul(Ie,Ke)|0,f=f+Math.imul(Ie,Ge)|0,f=f+Math.imul(Pe,Ke)|0,P=P+Math.imul(Pe,Ge)|0,E=E+Math.imul(Re,Ze)|0,f=f+Math.imul(Re,Ye)|0,f=f+Math.imul(Ae,Ze)|0,P=P+Math.imul(Ae,Ye)|0,E=E+Math.imul(we,Je)|0,f=f+Math.imul(we,Qe)|0,f=f+Math.imul(Te,Je)|0,P=P+Math.imul(Te,Qe)|0,E=E+Math.imul(ie,Xe)|0,f=f+Math.imul(ie,et)|0,f=f+Math.imul(de,Xe)|0,P=P+Math.imul(de,et)|0,E=E+Math.imul(G,tt)|0,f=f+Math.imul(G,rt)|0,f=f+Math.imul(Q,tt)|0,P=P+Math.imul(Q,rt)|0,E=E+Math.imul(K,it)|0,f=f+Math.imul(K,nt)|0,f=f+Math.imul(Z,it)|0,P=P+Math.imul(Z,nt)|0,E=E+Math.imul(j,st)|0,f=f+Math.imul(j,ot)|0,f=f+Math.imul(L,st)|0,P=P+Math.imul(L,ot)|0;var Bf=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(Bf>>>26)|0,Bf&=67108863,E=Math.imul(Ne,We),f=Math.imul(Ne,Ve),f=f+Math.imul(Be,We)|0,P=Math.imul(Be,Ve),E=E+Math.imul(Oe,Ke)|0,f=f+Math.imul(Oe,Ge)|0,f=f+Math.imul(Ce,Ke)|0,P=P+Math.imul(Ce,Ge)|0,E=E+Math.imul(Ie,Ze)|0,f=f+Math.imul(Ie,Ye)|0,f=f+Math.imul(Pe,Ze)|0,P=P+Math.imul(Pe,Ye)|0,E=E+Math.imul(Re,Je)|0,f=f+Math.imul(Re,Qe)|0,f=f+Math.imul(Ae,Je)|0,P=P+Math.imul(Ae,Qe)|0,E=E+Math.imul(we,Xe)|0,f=f+Math.imul(we,et)|0,f=f+Math.imul(Te,Xe)|0,P=P+Math.imul(Te,et)|0,E=E+Math.imul(ie,tt)|0,f=f+Math.imul(ie,rt)|0,f=f+Math.imul(de,tt)|0,P=P+Math.imul(de,rt)|0,E=E+Math.imul(G,it)|0,f=f+Math.imul(G,nt)|0,f=f+Math.imul(Q,it)|0,P=P+Math.imul(Q,nt)|0,E=E+Math.imul(K,st)|0,f=f+Math.imul(K,ot)|0,f=f+Math.imul(Z,st)|0,P=P+Math.imul(Z,ot)|0,E=E+Math.imul(j,at)|0,f=f+Math.imul(j,ct)|0,f=f+Math.imul(L,at)|0,P=P+Math.imul(L,ct)|0;var Lf=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(Lf>>>26)|0,Lf&=67108863,E=Math.imul(Le,We),f=Math.imul(Le,Ve),f=f+Math.imul(He,We)|0,P=Math.imul(He,Ve),E=E+Math.imul(Ne,Ke)|0,f=f+Math.imul(Ne,Ge)|0,f=f+Math.imul(Be,Ke)|0,P=P+Math.imul(Be,Ge)|0,E=E+Math.imul(Oe,Ze)|0,f=f+Math.imul(Oe,Ye)|0,f=f+Math.imul(Ce,Ze)|0,P=P+Math.imul(Ce,Ye)|0,E=E+Math.imul(Ie,Je)|0,f=f+Math.imul(Ie,Qe)|0,f=f+Math.imul(Pe,Je)|0,P=P+Math.imul(Pe,Qe)|0,E=E+Math.imul(Re,Xe)|0,f=f+Math.imul(Re,et)|0,f=f+Math.imul(Ae,Xe)|0,P=P+Math.imul(Ae,et)|0,E=E+Math.imul(we,tt)|0,f=f+Math.imul(we,rt)|0,f=f+Math.imul(Te,tt)|0,P=P+Math.imul(Te,rt)|0,E=E+Math.imul(ie,it)|0,f=f+Math.imul(ie,nt)|0,f=f+Math.imul(de,it)|0,P=P+Math.imul(de,nt)|0,E=E+Math.imul(G,st)|0,f=f+Math.imul(G,ot)|0,f=f+Math.imul(Q,st)|0,P=P+Math.imul(Q,ot)|0,E=E+Math.imul(K,at)|0,f=f+Math.imul(K,ct)|0,f=f+Math.imul(Z,at)|0,P=P+Math.imul(Z,ct)|0,E=E+Math.imul(j,lt)|0,f=f+Math.imul(j,ut)|0,f=f+Math.imul(L,lt)|0,P=P+Math.imul(L,ut)|0;var Ff=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(Ff>>>26)|0,Ff&=67108863,E=Math.imul(Le,Ke),f=Math.imul(Le,Ge),f=f+Math.imul(He,Ke)|0,P=Math.imul(He,Ge),E=E+Math.imul(Ne,Ze)|0,f=f+Math.imul(Ne,Ye)|0,f=f+Math.imul(Be,Ze)|0,P=P+Math.imul(Be,Ye)|0,E=E+Math.imul(Oe,Je)|0,f=f+Math.imul(Oe,Qe)|0,f=f+Math.imul(Ce,Je)|0,P=P+Math.imul(Ce,Qe)|0,E=E+Math.imul(Ie,Xe)|0,f=f+Math.imul(Ie,et)|0,f=f+Math.imul(Pe,Xe)|0,P=P+Math.imul(Pe,et)|0,E=E+Math.imul(Re,tt)|0,f=f+Math.imul(Re,rt)|0,f=f+Math.imul(Ae,tt)|0,P=P+Math.imul(Ae,rt)|0,E=E+Math.imul(we,it)|0,f=f+Math.imul(we,nt)|0,f=f+Math.imul(Te,it)|0,P=P+Math.imul(Te,nt)|0,E=E+Math.imul(ie,st)|0,f=f+Math.imul(ie,ot)|0,f=f+Math.imul(de,st)|0,P=P+Math.imul(de,ot)|0,E=E+Math.imul(G,at)|0,f=f+Math.imul(G,ct)|0,f=f+Math.imul(Q,at)|0,P=P+Math.imul(Q,ct)|0,E=E+Math.imul(K,lt)|0,f=f+Math.imul(K,ut)|0,f=f+Math.imul(Z,lt)|0,P=P+Math.imul(Z,ut)|0;var Uf=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(Uf>>>26)|0,Uf&=67108863,E=Math.imul(Le,Ze),f=Math.imul(Le,Ye),f=f+Math.imul(He,Ze)|0,P=Math.imul(He,Ye),E=E+Math.imul(Ne,Je)|0,f=f+Math.imul(Ne,Qe)|0,f=f+Math.imul(Be,Je)|0,P=P+Math.imul(Be,Qe)|0,E=E+Math.imul(Oe,Xe)|0,f=f+Math.imul(Oe,et)|0,f=f+Math.imul(Ce,Xe)|0,P=P+Math.imul(Ce,et)|0,E=E+Math.imul(Ie,tt)|0,f=f+Math.imul(Ie,rt)|0,f=f+Math.imul(Pe,tt)|0,P=P+Math.imul(Pe,rt)|0,E=E+Math.imul(Re,it)|0,f=f+Math.imul(Re,nt)|0,f=f+Math.imul(Ae,it)|0,P=P+Math.imul(Ae,nt)|0,E=E+Math.imul(we,st)|0,f=f+Math.imul(we,ot)|0,f=f+Math.imul(Te,st)|0,P=P+Math.imul(Te,ot)|0,E=E+Math.imul(ie,at)|0,f=f+Math.imul(ie,ct)|0,f=f+Math.imul(de,at)|0,P=P+Math.imul(de,ct)|0,E=E+Math.imul(G,lt)|0,f=f+Math.imul(G,ut)|0,f=f+Math.imul(Q,lt)|0,P=P+Math.imul(Q,ut)|0;var jf=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(jf>>>26)|0,jf&=67108863,E=Math.imul(Le,Je),f=Math.imul(Le,Qe),f=f+Math.imul(He,Je)|0,P=Math.imul(He,Qe),E=E+Math.imul(Ne,Xe)|0,f=f+Math.imul(Ne,et)|0,f=f+Math.imul(Be,Xe)|0,P=P+Math.imul(Be,et)|0,E=E+Math.imul(Oe,tt)|0,f=f+Math.imul(Oe,rt)|0,f=f+Math.imul(Ce,tt)|0,P=P+Math.imul(Ce,rt)|0,E=E+Math.imul(Ie,it)|0,f=f+Math.imul(Ie,nt)|0,f=f+Math.imul(Pe,it)|0,P=P+Math.imul(Pe,nt)|0,E=E+Math.imul(Re,st)|0,f=f+Math.imul(Re,ot)|0,f=f+Math.imul(Ae,st)|0,P=P+Math.imul(Ae,ot)|0,E=E+Math.imul(we,at)|0,f=f+Math.imul(we,ct)|0,f=f+Math.imul(Te,at)|0,P=P+Math.imul(Te,ct)|0,E=E+Math.imul(ie,lt)|0,f=f+Math.imul(ie,ut)|0,f=f+Math.imul(de,lt)|0,P=P+Math.imul(de,ut)|0;var kf=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(kf>>>26)|0,kf&=67108863,E=Math.imul(Le,Xe),f=Math.imul(Le,et),f=f+Math.imul(He,Xe)|0,P=Math.imul(He,et),E=E+Math.imul(Ne,tt)|0,f=f+Math.imul(Ne,rt)|0,f=f+Math.imul(Be,tt)|0,P=P+Math.imul(Be,rt)|0,E=E+Math.imul(Oe,it)|0,f=f+Math.imul(Oe,nt)|0,f=f+Math.imul(Ce,it)|0,P=P+Math.imul(Ce,nt)|0,E=E+Math.imul(Ie,st)|0,f=f+Math.imul(Ie,ot)|0,f=f+Math.imul(Pe,st)|0,P=P+Math.imul(Pe,ot)|0,E=E+Math.imul(Re,at)|0,f=f+Math.imul(Re,ct)|0,f=f+Math.imul(Ae,at)|0,P=P+Math.imul(Ae,ct)|0,E=E+Math.imul(we,lt)|0,f=f+Math.imul(we,ut)|0,f=f+Math.imul(Te,lt)|0,P=P+Math.imul(Te,ut)|0;var qf=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(qf>>>26)|0,qf&=67108863,E=Math.imul(Le,tt),f=Math.imul(Le,rt),f=f+Math.imul(He,tt)|0,P=Math.imul(He,rt),E=E+Math.imul(Ne,it)|0,f=f+Math.imul(Ne,nt)|0,f=f+Math.imul(Be,it)|0,P=P+Math.imul(Be,nt)|0,E=E+Math.imul(Oe,st)|0,f=f+Math.imul(Oe,ot)|0,f=f+Math.imul(Ce,st)|0,P=P+Math.imul(Ce,ot)|0,E=E+Math.imul(Ie,at)|0,f=f+Math.imul(Ie,ct)|0,f=f+Math.imul(Pe,at)|0,P=P+Math.imul(Pe,ct)|0,E=E+Math.imul(Re,lt)|0,f=f+Math.imul(Re,ut)|0,f=f+Math.imul(Ae,lt)|0,P=P+Math.imul(Ae,ut)|0;var zf=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(zf>>>26)|0,zf&=67108863,E=Math.imul(Le,it),f=Math.imul(Le,nt),f=f+Math.imul(He,it)|0,P=Math.imul(He,nt),E=E+Math.imul(Ne,st)|0,f=f+Math.imul(Ne,ot)|0,f=f+Math.imul(Be,st)|0,P=P+Math.imul(Be,ot)|0,E=E+Math.imul(Oe,at)|0,f=f+Math.imul(Oe,ct)|0,f=f+Math.imul(Ce,at)|0,P=P+Math.imul(Ce,ct)|0,E=E+Math.imul(Ie,lt)|0,f=f+Math.imul(Ie,ut)|0,f=f+Math.imul(Pe,lt)|0,P=P+Math.imul(Pe,ut)|0;var Hf=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(Hf>>>26)|0,Hf&=67108863,E=Math.imul(Le,st),f=Math.imul(Le,ot),f=f+Math.imul(He,st)|0,P=Math.imul(He,ot),E=E+Math.imul(Ne,at)|0,f=f+Math.imul(Ne,ct)|0,f=f+Math.imul(Be,at)|0,P=P+Math.imul(Be,ct)|0,E=E+Math.imul(Oe,lt)|0,f=f+Math.imul(Oe,ut)|0,f=f+Math.imul(Ce,lt)|0,P=P+Math.imul(Ce,ut)|0;var Wf=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(Wf>>>26)|0,Wf&=67108863,E=Math.imul(Le,at),f=Math.imul(Le,ct),f=f+Math.imul(He,at)|0,P=Math.imul(He,ct),E=E+Math.imul(Ne,lt)|0,f=f+Math.imul(Ne,ut)|0,f=f+Math.imul(Be,lt)|0,P=P+Math.imul(Be,ut)|0;var Vf=(O+E|0)+((f&8191)<<13)|0;O=(P+(f>>>13)|0)+(Vf>>>26)|0,Vf&=67108863,E=Math.imul(Le,lt),f=Math.imul(Le,ut),f=f+Math.imul(He,lt)|0,P=Math.imul(He,ut);var Kf=(O+E|0)+((f&8191)<<13)|0;return O=(P+(f>>>13)|0)+(Kf>>>26)|0,Kf&=67108863,I[0]=Of,I[1]=Cf,I[2]=Df,I[3]=Mf,I[4]=Tf,I[5]=Rf,I[6]=Nf,I[7]=Bf,I[8]=Lf,I[9]=Ff,I[10]=Uf,I[11]=jf,I[12]=kf,I[13]=qf,I[14]=zf,I[15]=Hf,I[16]=Wf,I[17]=Vf,I[18]=Kf,O!==0&&(I[19]=O,_.length++),_};Math.imul||(w=v);function S($,h,b){b.negative=h.negative^$.negative,b.length=$.length+h.length;for(var _=0,g=0,y=0;y<b.length-1;y++){var I=g;g=0;for(var O=_&67108863,E=Math.min(y,h.length-1),f=Math.max(0,y-$.length+1);f<=E;f++){var P=y-f,F=$.words[P]|0,j=h.words[f]|0,L=F*j,q=L&67108863;I=I+(L/67108864|0)|0,q=q+O|0,O=q&67108863,I=I+(q>>>26)|0,g+=I>>>26,I&=67108863}b.words[y]=O,_=I,I=g}return _!==0?b.words[y]=_:b.length--,b.strip()}function x($,h,b){var _=new A;return _.mulp($,h,b)}s.prototype.mulTo=function(h,b){var _,g=this.length+h.length;return this.length===10&&h.length===10?_=w(this,h,b):g<63?_=v(this,h,b):g<1024?_=S(this,h,b):_=x(this,h,b),_};function A($,h){this.x=$,this.y=h}A.prototype.makeRBT=function(h){for(var b=new Array(h),_=s.prototype._countBits(h)-1,g=0;g<h;g++)b[g]=this.revBin(g,_,h);return b},A.prototype.revBin=function(h,b,_){if(h===0||h===_-1)return h;for(var g=0,y=0;y<b;y++)g|=(h&1)<<b-y-1,h>>=1;return g},A.prototype.permute=function(h,b,_,g,y,I){for(var O=0;O<I;O++)g[O]=b[h[O]],y[O]=_[h[O]]},A.prototype.transform=function(h,b,_,g,y,I){this.permute(I,h,b,_,g,y);for(var O=1;O<y;O<<=1)for(var E=O<<1,f=Math.cos(2*Math.PI/E),P=Math.sin(2*Math.PI/E),F=0;F<y;F+=E)for(var j=f,L=P,q=0;q<O;q++){var K=_[F+q],Z=g[F+q],te=_[F+q+O],G=g[F+q+O],Q=j*te-L*G;G=j*G+L*te,te=Q,_[F+q]=K+te,g[F+q]=Z+G,_[F+q+O]=K-te,g[F+q+O]=Z-G,q!==E&&(Q=f*j-P*L,L=f*L+P*j,j=Q)}},A.prototype.guessLen13b=function(h,b){var _=Math.max(b,h)|1,g=_&1,y=0;for(_=_/2|0;_;_=_>>>1)y++;return 1<<y+1+g},A.prototype.conjugate=function(h,b,_){if(!(_<=1))for(var g=0;g<_/2;g++){var y=h[g];h[g]=h[_-g-1],h[_-g-1]=y,y=b[g],b[g]=-b[_-g-1],b[_-g-1]=-y}},A.prototype.normalize13b=function(h,b){for(var _=0,g=0;g<b/2;g++){var y=Math.round(h[2*g+1]/b)*8192+Math.round(h[2*g]/b)+_;h[g]=y&67108863,y<67108864?_=0:_=y/67108864|0}return h},A.prototype.convert13b=function(h,b,_,g){for(var y=0,I=0;I<b;I++)y=y+(h[I]|0),_[2*I]=y&8191,y=y>>>13,_[2*I+1]=y&8191,y=y>>>13;for(I=2*b;I<g;++I)_[I]=0;i(y===0),i((y&-8192)===0)},A.prototype.stub=function(h){for(var b=new Array(h),_=0;_<h;_++)b[_]=0;return b},A.prototype.mulp=function(h,b,_){var g=2*this.guessLen13b(h.length,b.length),y=this.makeRBT(g),I=this.stub(g),O=new Array(g),E=new Array(g),f=new Array(g),P=new Array(g),F=new Array(g),j=new Array(g),L=_.words;L.length=g,this.convert13b(h.words,h.length,O,g),this.convert13b(b.words,b.length,P,g),this.transform(O,I,E,f,g,y),this.transform(P,I,F,j,g,y);for(var q=0;q<g;q++){var K=E[q]*F[q]-f[q]*j[q];f[q]=E[q]*j[q]+f[q]*F[q],E[q]=K}return this.conjugate(E,f,g),this.transform(E,f,L,I,g,y),this.conjugate(L,I,g),this.normalize13b(L,g),_.negative=h.negative^b.negative,_.length=h.length+b.length,_.strip()},s.prototype.mul=function(h){var b=new s(null);return b.words=new Array(this.length+h.length),this.mulTo(h,b)},s.prototype.mulf=function(h){var b=new s(null);return b.words=new Array(this.length+h.length),x(this,h,b)},s.prototype.imul=function(h){return this.clone().mulTo(h,this)},s.prototype.imuln=function(h){i(typeof h=="number"),i(h<67108864);for(var b=0,_=0;_<this.length;_++){var g=(this.words[_]|0)*h,y=(g&67108863)+(b&67108863);b>>=26,b+=g/67108864|0,b+=y>>>26,this.words[_]=y&67108863}return b!==0&&(this.words[_]=b,this.length++),this},s.prototype.muln=function(h){return this.clone().imuln(h)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(h){var b=m(h);if(b.length===0)return new s(1);for(var _=this,g=0;g<b.length&&b[g]===0;g++,_=_.sqr());if(++g<b.length)for(var y=_.sqr();g<b.length;g++,y=y.sqr())b[g]!==0&&(_=_.mul(y));return _},s.prototype.iushln=function(h){i(typeof h=="number"&&h>=0);var b=h%26,_=(h-b)/26,g=67108863>>>26-b<<26-b,y;if(b!==0){var I=0;for(y=0;y<this.length;y++){var O=this.words[y]&g,E=(this.words[y]|0)-O<<b;this.words[y]=E|I,I=O>>>26-b}I&&(this.words[y]=I,this.length++)}if(_!==0){for(y=this.length-1;y>=0;y--)this.words[y+_]=this.words[y];for(y=0;y<_;y++)this.words[y]=0;this.length+=_}return this.strip()},s.prototype.ishln=function(h){return i(this.negative===0),this.iushln(h)},s.prototype.iushrn=function(h,b,_){i(typeof h=="number"&&h>=0);var g;b?g=(b-b%26)/26:g=0;var y=h%26,I=Math.min((h-y)/26,this.length),O=67108863^67108863>>>y<<y,E=_;if(g-=I,g=Math.max(0,g),E){for(var f=0;f<I;f++)E.words[f]=this.words[f];E.length=I}if(I!==0)if(this.length>I)for(this.length-=I,f=0;f<this.length;f++)this.words[f]=this.words[f+I];else this.words[0]=0,this.length=1;var P=0;for(f=this.length-1;f>=0&&(P!==0||f>=g);f--){var F=this.words[f]|0;this.words[f]=P<<26-y|F>>>y,P=F&O}return E&&P!==0&&(E.words[E.length++]=P),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(h,b,_){return i(this.negative===0),this.iushrn(h,b,_)},s.prototype.shln=function(h){return this.clone().ishln(h)},s.prototype.ushln=function(h){return this.clone().iushln(h)},s.prototype.shrn=function(h){return this.clone().ishrn(h)},s.prototype.ushrn=function(h){return this.clone().iushrn(h)},s.prototype.testn=function(h){i(typeof h=="number"&&h>=0);var b=h%26,_=(h-b)/26,g=1<<b;if(this.length<=_)return!1;var y=this.words[_];return!!(y&g)},s.prototype.imaskn=function(h){i(typeof h=="number"&&h>=0);var b=h%26,_=(h-b)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=_)return this;if(b!==0&&_++,this.length=Math.min(_,this.length),b!==0){var g=67108863^67108863>>>b<<b;this.words[this.length-1]&=g}return this.strip()},s.prototype.maskn=function(h){return this.clone().imaskn(h)},s.prototype.iaddn=function(h){return i(typeof h=="number"),i(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},s.prototype._iaddn=function(h){this.words[0]+=h;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},s.prototype.isubn=function(h){if(i(typeof h=="number"),i(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},s.prototype.addn=function(h){return this.clone().iaddn(h)},s.prototype.subn=function(h){return this.clone().isubn(h)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(h,b,_){var g=h.length+_,y;this._expand(g);var I,O=0;for(y=0;y<h.length;y++){I=(this.words[y+_]|0)+O;var E=(h.words[y]|0)*b;I-=E&67108863,O=(I>>26)-(E/67108864|0),this.words[y+_]=I&67108863}for(;y<this.length-_;y++)I=(this.words[y+_]|0)+O,O=I>>26,this.words[y+_]=I&67108863;if(O===0)return this.strip();for(i(O===-1),O=0,y=0;y<this.length;y++)I=-(this.words[y]|0)+O,O=I>>26,this.words[y]=I&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(h,b){var _=this.length-h.length,g=this.clone(),y=h,I=y.words[y.length-1]|0,O=this._countBits(I);_=26-O,_!==0&&(y=y.ushln(_),g.iushln(_),I=y.words[y.length-1]|0);var E=g.length-y.length,f;if(b!=="mod"){f=new s(null),f.length=E+1,f.words=new Array(f.length);for(var P=0;P<f.length;P++)f.words[P]=0}var F=g.clone()._ishlnsubmul(y,1,E);F.negative===0&&(g=F,f&&(f.words[E]=1));for(var j=E-1;j>=0;j--){var L=(g.words[y.length+j]|0)*67108864+(g.words[y.length+j-1]|0);for(L=Math.min(L/I|0,67108863),g._ishlnsubmul(y,L,j);g.negative!==0;)L--,g.negative=0,g._ishlnsubmul(y,1,j),g.isZero()||(g.negative^=1);f&&(f.words[j]=L)}return f&&f.strip(),g.strip(),b!=="div"&&_!==0&&g.iushrn(_),{div:f||null,mod:g}},s.prototype.divmod=function(h,b,_){if(i(!h.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var g,y,I;return this.negative!==0&&h.negative===0?(I=this.neg().divmod(h,b),b!=="mod"&&(g=I.div.neg()),b!=="div"&&(y=I.mod.neg(),_&&y.negative!==0&&y.iadd(h)),{div:g,mod:y}):this.negative===0&&h.negative!==0?(I=this.divmod(h.neg(),b),b!=="mod"&&(g=I.div.neg()),{div:g,mod:I.mod}):(this.negative&h.negative)!==0?(I=this.neg().divmod(h.neg(),b),b!=="div"&&(y=I.mod.neg(),_&&y.negative!==0&&y.isub(h)),{div:I.div,mod:y}):h.length>this.length||this.cmp(h)<0?{div:new s(0),mod:this}:h.length===1?b==="div"?{div:this.divn(h.words[0]),mod:null}:b==="mod"?{div:null,mod:new s(this.modn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new s(this.modn(h.words[0]))}:this._wordDiv(h,b)},s.prototype.div=function(h){return this.divmod(h,"div",!1).div},s.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},s.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},s.prototype.divRound=function(h){var b=this.divmod(h);if(b.mod.isZero())return b.div;var _=b.div.negative!==0?b.mod.isub(h):b.mod,g=h.ushrn(1),y=h.andln(1),I=_.cmp(g);return I<0||y===1&&I===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},s.prototype.modn=function(h){i(h<=67108863);for(var b=(1<<26)%h,_=0,g=this.length-1;g>=0;g--)_=(b*_+(this.words[g]|0))%h;return _},s.prototype.idivn=function(h){i(h<=67108863);for(var b=0,_=this.length-1;_>=0;_--){var g=(this.words[_]|0)+b*67108864;this.words[_]=g/h|0,b=g%h}return this.strip()},s.prototype.divn=function(h){return this.clone().idivn(h)},s.prototype.egcd=function(h){i(h.negative===0),i(!h.isZero());var b=this,_=h.clone();b.negative!==0?b=b.umod(h):b=b.clone();for(var g=new s(1),y=new s(0),I=new s(0),O=new s(1),E=0;b.isEven()&&_.isEven();)b.iushrn(1),_.iushrn(1),++E;for(var f=_.clone(),P=b.clone();!b.isZero();){for(var F=0,j=1;(b.words[0]&j)===0&&F<26;++F,j<<=1);if(F>0)for(b.iushrn(F);F-- >0;)(g.isOdd()||y.isOdd())&&(g.iadd(f),y.isub(P)),g.iushrn(1),y.iushrn(1);for(var L=0,q=1;(_.words[0]&q)===0&&L<26;++L,q<<=1);if(L>0)for(_.iushrn(L);L-- >0;)(I.isOdd()||O.isOdd())&&(I.iadd(f),O.isub(P)),I.iushrn(1),O.iushrn(1);b.cmp(_)>=0?(b.isub(_),g.isub(I),y.isub(O)):(_.isub(b),I.isub(g),O.isub(y))}return{a:I,b:O,gcd:_.iushln(E)}},s.prototype._invmp=function(h){i(h.negative===0),i(!h.isZero());var b=this,_=h.clone();b.negative!==0?b=b.umod(h):b=b.clone();for(var g=new s(1),y=new s(0),I=_.clone();b.cmpn(1)>0&&_.cmpn(1)>0;){for(var O=0,E=1;(b.words[0]&E)===0&&O<26;++O,E<<=1);if(O>0)for(b.iushrn(O);O-- >0;)g.isOdd()&&g.iadd(I),g.iushrn(1);for(var f=0,P=1;(_.words[0]&P)===0&&f<26;++f,P<<=1);if(f>0)for(_.iushrn(f);f-- >0;)y.isOdd()&&y.iadd(I),y.iushrn(1);b.cmp(_)>=0?(b.isub(_),g.isub(y)):(_.isub(b),y.isub(g))}var F;return b.cmpn(1)===0?F=g:F=y,F.cmpn(0)<0&&F.iadd(h),F},s.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var b=this.clone(),_=h.clone();b.negative=0,_.negative=0;for(var g=0;b.isEven()&&_.isEven();g++)b.iushrn(1),_.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;_.isEven();)_.iushrn(1);var y=b.cmp(_);if(y<0){var I=b;b=_,_=I}else if(y===0||_.cmpn(1)===0)break;b.isub(_)}while(!0);return _.iushln(g)},s.prototype.invm=function(h){return this.egcd(h).a.umod(h)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(h){return this.words[0]&h},s.prototype.bincn=function(h){i(typeof h=="number");var b=h%26,_=(h-b)/26,g=1<<b;if(this.length<=_)return this._expand(_+1),this.words[_]|=g,this;for(var y=g,I=_;y!==0&&I<this.length;I++){var O=this.words[I]|0;O+=y,y=O>>>26,O&=67108863,this.words[I]=O}return y!==0&&(this.words[I]=y,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(h){var b=h<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var _;if(this.length>1)_=1;else{b&&(h=-h),i(h<=67108863,"Number is too big");var g=this.words[0]|0;_=g===h?0:g<h?-1:1}return this.negative!==0?-_|0:_},s.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var b=this.ucmp(h);return this.negative!==0?-b|0:b},s.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var b=0,_=this.length-1;_>=0;_--){var g=this.words[_]|0,y=h.words[_]|0;if(g!==y){g<y?b=-1:g>y&&(b=1);break}}return b},s.prototype.gtn=function(h){return this.cmpn(h)===1},s.prototype.gt=function(h){return this.cmp(h)===1},s.prototype.gten=function(h){return this.cmpn(h)>=0},s.prototype.gte=function(h){return this.cmp(h)>=0},s.prototype.ltn=function(h){return this.cmpn(h)===-1},s.prototype.lt=function(h){return this.cmp(h)===-1},s.prototype.lten=function(h){return this.cmpn(h)<=0},s.prototype.lte=function(h){return this.cmp(h)<=0},s.prototype.eqn=function(h){return this.cmpn(h)===0},s.prototype.eq=function(h){return this.cmp(h)===0},s.red=function(h){return new M(h)},s.prototype.toRed=function(h){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(h){return this.red=h,this},s.prototype.forceRed=function(h){return i(!this.red,"Already a number in reduction context"),this._forceRed(h)},s.prototype.redAdd=function(h){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},s.prototype.redIAdd=function(h){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},s.prototype.redSub=function(h){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},s.prototype.redISub=function(h){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},s.prototype.redShl=function(h){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},s.prototype.redMul=function(h){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},s.prototype.redIMul=function(h){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(h){return i(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var C={k256:null,p224:null,p192:null,p25519:null};function D($,h){this.name=$,this.p=new s(h,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}D.prototype._tmp=function(){var h=new s(null);return h.words=new Array(Math.ceil(this.n/13)),h},D.prototype.ireduce=function(h){var b=h,_;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),_=b.bitLength();while(_>this.n);var g=_<this.n?-1:b.ucmp(this.p);return g===0?(b.words[0]=0,b.length=1):g>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},D.prototype.split=function(h,b){h.iushrn(this.n,0,b)},D.prototype.imulK=function(h){return h.imul(this.k)};function T(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(T,D),T.prototype.split=function(h,b){for(var _=4194303,g=Math.min(h.length,9),y=0;y<g;y++)b.words[y]=h.words[y];if(b.length=g,h.length<=9){h.words[0]=0,h.length=1;return}var I=h.words[9];for(b.words[b.length++]=I&_,y=10;y<h.length;y++){var O=h.words[y]|0;h.words[y-10]=(O&_)<<4|I>>>22,I=O}I>>>=22,h.words[y-10]=I,I===0&&h.length>10?h.length-=10:h.length-=9},T.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var b=0,_=0;_<h.length;_++){var g=h.words[_]|0;b+=g*977,h.words[_]=b&67108863,b=g*64+(b/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function N(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(N,D);function R(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(R,D);function B(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(B,D),B.prototype.imulK=function(h){for(var b=0,_=0;_<h.length;_++){var g=(h.words[_]|0)*19+b,y=g&67108863;g>>>=26,h.words[_]=y,b=g}return b!==0&&(h.words[h.length++]=b),h},s._prime=function(h){if(C[h])return C[h];var b;if(h==="k256")b=new T;else if(h==="p224")b=new N;else if(h==="p192")b=new R;else if(h==="p25519")b=new B;else throw new Error("Unknown prime "+h);return C[h]=b,b};function M($){if(typeof $=="string"){var h=s._prime($);this.m=h.p,this.prime=h}else i($.gtn(1),"modulus must be greater than 1"),this.m=$,this.prime=null}M.prototype._verify1=function(h){i(h.negative===0,"red works only with positives"),i(h.red,"red works only with red numbers")},M.prototype._verify2=function(h,b){i((h.negative|b.negative)===0,"red works only with positives"),i(h.red&&h.red===b.red,"red works only with red numbers")},M.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):h.umod(this.m)._forceRed(this)},M.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},M.prototype.add=function(h,b){this._verify2(h,b);var _=h.add(b);return _.cmp(this.m)>=0&&_.isub(this.m),_._forceRed(this)},M.prototype.iadd=function(h,b){this._verify2(h,b);var _=h.iadd(b);return _.cmp(this.m)>=0&&_.isub(this.m),_},M.prototype.sub=function(h,b){this._verify2(h,b);var _=h.sub(b);return _.cmpn(0)<0&&_.iadd(this.m),_._forceRed(this)},M.prototype.isub=function(h,b){this._verify2(h,b);var _=h.isub(b);return _.cmpn(0)<0&&_.iadd(this.m),_},M.prototype.shl=function(h,b){return this._verify1(h),this.imod(h.ushln(b))},M.prototype.imul=function(h,b){return this._verify2(h,b),this.imod(h.imul(b))},M.prototype.mul=function(h,b){return this._verify2(h,b),this.imod(h.mul(b))},M.prototype.isqr=function(h){return this.imul(h,h.clone())},M.prototype.sqr=function(h){return this.mul(h,h)},M.prototype.sqrt=function(h){if(h.isZero())return h.clone();var b=this.m.andln(3);if(i(b%2===1),b===3){var _=this.m.add(new s(1)).iushrn(2);return this.pow(h,_)}for(var g=this.m.subn(1),y=0;!g.isZero()&&g.andln(1)===0;)y++,g.iushrn(1);i(!g.isZero());var I=new s(1).toRed(this),O=I.redNeg(),E=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new s(2*f*f).toRed(this);this.pow(f,E).cmp(O)!==0;)f.redIAdd(O);for(var P=this.pow(f,g),F=this.pow(h,g.addn(1).iushrn(1)),j=this.pow(h,g),L=y;j.cmp(I)!==0;){for(var q=j,K=0;q.cmp(I)!==0;K++)q=q.redSqr();i(K<L);var Z=this.pow(P,new s(1).iushln(L-K-1));F=F.redMul(Z),P=Z.redSqr(),j=j.redMul(P),L=K}return F},M.prototype.invm=function(h){var b=h._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},M.prototype.pow=function(h,b){if(b.isZero())return new s(1).toRed(this);if(b.cmpn(1)===0)return h.clone();var _=4,g=new Array(1<<_);g[0]=new s(1).toRed(this),g[1]=h;for(var y=2;y<g.length;y++)g[y]=this.mul(g[y-1],h);var I=g[0],O=0,E=0,f=b.bitLength()%26;for(f===0&&(f=26),y=b.length-1;y>=0;y--){for(var P=b.words[y],F=f-1;F>=0;F--){var j=P>>F&1;if(I!==g[0]&&(I=this.sqr(I)),j===0&&O===0){E=0;continue}O<<=1,O|=j,E++,!(E!==_&&(y!==0||F!==0))&&(I=this.mul(I,g[O]),E=0,O=0)}f=26}return I},M.prototype.convertTo=function(h){var b=h.umod(this.m);return b===h?b.clone():b},M.prototype.convertFrom=function(h){var b=h.clone();return b.red=null,b},s.mont=function(h){return new U(h)};function U($){M.call(this,$),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(U,M),U.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},U.prototype.convertFrom=function(h){var b=this.imod(h.mul(this.rinv));return b.red=null,b},U.prototype.imul=function(h,b){if(h.isZero()||b.isZero())return h.words[0]=0,h.length=1,h;var _=h.imul(b),g=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=_.isub(g).iushrn(this.shift),I=y;return y.cmp(this.m)>=0?I=y.isub(this.m):y.cmpn(0)<0&&(I=y.iadd(this.m)),I._forceRed(this)},U.prototype.mul=function(h,b){if(h.isZero()||b.isZero())return new s(0)._forceRed(this);var _=h.mul(b),g=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=_.isub(g).iushrn(this.shift),I=y;return y.cmp(this.m)>=0?I=y.isub(this.m):y.cmpn(0)<0&&(I=y.iadd(this.m)),I._forceRed(this)},U.prototype.invm=function(h){var b=this.imod(h._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(t,jt)})(Ur);var gn=z1;function z1(t,e){if(!t)throw new Error(e||"Assertion failed")}z1.equal=function(e,r,i){if(e!=r)throw new Error(i||"Assertion failed: "+e+" != "+r)};var Uu={};(function(t){var e=t;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var c=0;c<s.length;c++)a[c]=s[c]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var c=0;c<s.length;c+=2)a.push(parseInt(s[c]+s[c+1],16))}else for(var c=0;c<s.length;c++){var l=s.charCodeAt(c),u=l>>8,d=l&255;u?a.push(u,d):a.push(d)}return a}e.toArray=r;function i(s){return s.length===1?"0"+s:s}e.zero2=i;function n(s){for(var o="",a=0;a<s.length;a++)o+=i(s[a].toString(16));return o}e.toHex=n,e.encode=function(o,a){return a==="hex"?n(o):o}})(Uu),function(t){var e=t,r=Ur.exports,i=gn,n=Uu;e.assert=i,e.toArray=n.toArray,e.zero2=n.zero2,e.toHex=n.toHex,e.encode=n.encode;function s(u,d,p){var m=new Array(Math.max(u.bitLength(),p)+1),v;for(v=0;v<m.length;v+=1)m[v]=0;var w=1<<d+1,S=u.clone();for(v=0;v<m.length;v++){var x,A=S.andln(w-1);S.isOdd()?(A>(w>>1)-1?x=(w>>1)-A:x=A,S.isubn(x)):x=0,m[v]=x,S.iushrn(1)}return m}e.getNAF=s;function o(u,d){var p=[[],[]];u=u.clone(),d=d.clone();for(var m=0,v=0,w;u.cmpn(-m)>0||d.cmpn(-v)>0;){var S=u.andln(3)+m&3,x=d.andln(3)+v&3;S===3&&(S=-1),x===3&&(x=-1);var A;(S&1)===0?A=0:(w=u.andln(7)+m&7,(w===3||w===5)&&x===2?A=-S:A=S),p[0].push(A);var C;(x&1)===0?C=0:(w=d.andln(7)+v&7,(w===3||w===5)&&S===2?C=-x:C=x),p[1].push(C),2*m===A+1&&(m=1-m),2*v===C+1&&(v=1-v),u.iushrn(1),d.iushrn(1)}return p}e.getJSF=o;function a(u,d,p){var m="_"+d;u.prototype[d]=function(){return this[m]!==void 0?this[m]:this[m]=p.call(this)}}e.cachedProperty=a;function c(u){return typeof u=="string"?e.toArray(u,"hex"):u}e.parseBytes=c;function l(u){return new r(u,"hex","le")}e.intFromLE=l}(ir);var ec={exports:{}},ju;ec.exports=function(e){return ju||(ju=new Bi(null)),ju.generate(e)};function Bi(t){this.rand=t}if(ec.exports.Rand=Bi,Bi.prototype.generate=function(e){return this._rand(e)},Bi.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),i=0;i<r.length;i++)r[i]=this.rand.getByte();return r},typeof self=="object")self.crypto&&self.crypto.getRandomValues?Bi.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?Bi.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(Bi.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var H1=q1;if(typeof H1.randomBytes!="function")throw new Error("Not supported");Bi.prototype._rand=function(e){return H1.randomBytes(e)}}catch{}var ku={},bn=Ur.exports,Ao=ir,tc=Ao.getNAF,w9=Ao.getJSF,rc=Ao.assert;function Li(t,e){this.type=t,this.p=new bn(e.p,16),this.red=e.prime?bn.red(e.prime):bn.mont(this.p),this.zero=new bn(0).toRed(this.red),this.one=new bn(1).toRed(this.red),this.two=new bn(2).toRed(this.red),this.n=e.n&&new bn(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ic=Li;Li.prototype.point=function(){throw new Error("Not implemented")},Li.prototype.validate=function(){throw new Error("Not implemented")},Li.prototype._fixedNafMul=function(e,r){rc(e.precomputed);var i=e._getDoubles(),n=tc(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<n.length;a+=i.step){c=0;for(var l=a+i.step-1;l>=a;l--)c=(c<<1)+n[l];o.push(c)}for(var u=this.jpoint(null,null,null),d=this.jpoint(null,null,null),p=s;p>0;p--){for(a=0;a<o.length;a++)c=o[a],c===p?d=d.mixedAdd(i.points[a]):c===-p&&(d=d.mixedAdd(i.points[a].neg()));u=u.add(d)}return u.toP()},Li.prototype._wnafMul=function(e,r){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var s=n.points,o=tc(r,i,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&o[c]===0;c--)l++;if(c>=0&&l++,a=a.dblp(l),c<0)break;var u=o[c];rc(u!==0),e.type==="affine"?u>0?a=a.mixedAdd(s[u-1>>1]):a=a.mixedAdd(s[-u-1>>1].neg()):u>0?a=a.add(s[u-1>>1]):a=a.add(s[-u-1>>1].neg())}return e.type==="affine"?a.toP():a},Li.prototype._wnafMulAdd=function(e,r,i,n,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,l=0,u,d,p;for(u=0;u<n;u++){p=r[u];var m=p._getNAFPoints(e);o[u]=m.wnd,a[u]=m.points}for(u=n-1;u>=1;u-=2){var v=u-1,w=u;if(o[v]!==1||o[w]!==1){c[v]=tc(i[v],o[v],this._bitLength),c[w]=tc(i[w],o[w],this._bitLength),l=Math.max(c[v].length,l),l=Math.max(c[w].length,l);continue}var S=[r[v],null,null,r[w]];r[v].y.cmp(r[w].y)===0?(S[1]=r[v].add(r[w]),S[2]=r[v].toJ().mixedAdd(r[w].neg())):r[v].y.cmp(r[w].y.redNeg())===0?(S[1]=r[v].toJ().mixedAdd(r[w]),S[2]=r[v].add(r[w].neg())):(S[1]=r[v].toJ().mixedAdd(r[w]),S[2]=r[v].toJ().mixedAdd(r[w].neg()));var x=[-3,-1,-5,-7,0,7,5,1,3],A=w9(i[v],i[w]);for(l=Math.max(A[0].length,l),c[v]=new Array(l),c[w]=new Array(l),d=0;d<l;d++){var C=A[0][d]|0,D=A[1][d]|0;c[v][d]=x[(C+1)*3+(D+1)],c[w][d]=0,a[v]=S}}var T=this.jpoint(null,null,null),N=this._wnafT4;for(u=l;u>=0;u--){for(var R=0;u>=0;){var B=!0;for(d=0;d<n;d++)N[d]=c[d][u]|0,N[d]!==0&&(B=!1);if(!B)break;R++,u--}if(u>=0&&R++,T=T.dblp(R),u<0)break;for(d=0;d<n;d++){var M=N[d];M!==0&&(M>0?p=a[d][M-1>>1]:M<0&&(p=a[d][-M-1>>1].neg()),p.type==="affine"?T=T.mixedAdd(p):T=T.add(p))}}for(u=0;u<n;u++)a[u]=null;return s?T:T.toP()};function pr(t,e){this.curve=t,this.type=e,this.precomputed=null}Li.BasePoint=pr,pr.prototype.eq=function(){throw new Error("Not implemented")},pr.prototype.validate=function(){return this.curve.validate(this)},Li.prototype.decodePoint=function(e,r){e=Ao.toArray(e,r);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?rc(e[e.length-1]%2===0):e[0]===7&&rc(e[e.length-1]%2===1);var n=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return n}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")},pr.prototype.encodeCompressed=function(e){return this.encode(e,!0)},pr.prototype._encode=function(e){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))},pr.prototype.encode=function(e,r){return Ao.encode(this._encode(r),e)},pr.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this},pr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1},pr.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)n=n.dbl();i.push(n)}return{step:e,points:i}},pr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<e)-1,n=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(n);return{wnd:e,points:r}},pr.prototype._getBeta=function(){return null},pr.prototype.dblp=function(e){for(var r=this,i=0;i<e;i++)r=r.dbl();return r};var ls={exports:{}};typeof Object.create=="function"?ls.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ls.exports=function(e,r){if(r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}};var _9=ir,De=Ur.exports,qu=ls.exports,us=ic,E9=_9.assert;function gr(t){us.call(this,"short",t),this.a=new De(t.a,16).toRed(this.red),this.b=new De(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}qu(gr,us);var x9=gr;gr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(e.beta)r=new De(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1],r=r.toRed(this.red)}if(e.lambda)i=new De(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],E9(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new De(a.a,16),b:new De(a.b,16)}}):o=this._getEndoBasis(i),{beta:r,lambda:i,basis:o}}},gr.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:De.mont(e),i=new De(2).toRed(r).redInvm(),n=i.redNeg(),s=new De(3).toRed(r).redNeg().redSqrt().redMul(i),o=n.redAdd(s).fromRed(),a=n.redSub(s).fromRed();return[o,a]},gr.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,n=this.n.clone(),s=new De(1),o=new De(0),a=new De(0),c=new De(1),l,u,d,p,m,v,w,S=0,x,A;i.cmpn(0)!==0;){var C=n.div(i);x=n.sub(C.mul(i)),A=a.sub(C.mul(s));var D=c.sub(C.mul(o));if(!d&&x.cmp(r)<0)l=w.neg(),u=s,d=x.neg(),p=A;else if(d&&++S===2)break;w=x,n=i,i=x,a=s,s=A,c=o,o=D}m=x.neg(),v=A;var T=d.sqr().add(p.sqr()),N=m.sqr().add(v.sqr());return N.cmp(T)>=0&&(m=l,v=u),d.negative&&(d=d.neg(),p=p.neg()),m.negative&&(m=m.neg(),v=v.neg()),[{a:d,b:p},{a:m,b:v}]},gr.prototype._endoSplit=function(e){var r=this.endo.basis,i=r[0],n=r[1],s=n.b.mul(e).divRound(this.n),o=i.b.neg().mul(e).divRound(this.n),a=s.mul(i.a),c=o.mul(n.a),l=s.mul(i.b),u=o.mul(n.b),d=e.sub(a).sub(c),p=l.add(u).neg();return{k1:d,k2:p}},gr.prototype.pointFromX=function(e,r){e=new De(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=n.fromRed().isOdd();return(r&&!s||!r&&s)&&(n=n.redNeg()),this.point(e,n)},gr.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,i=e.y,n=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0},gr.prototype._endoWnafMulAdd=function(e,r,i){for(var n=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],l=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),n[o*2]=c,n[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var u=this._wnafMulAdd(1,n,s,o*2,i),d=0;d<o*2;d++)n[d]=null,s[d]=null;return u};function mt(t,e,r,i){us.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new De(e,16),this.y=new De(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}qu(mt,us.BasePoint),gr.prototype.point=function(e,r,i){return new mt(this,e,r,i)},gr.prototype.pointFromJSON=function(e,r){return mt.fromJSON(this,e,r)},mt.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,n=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return r}},mt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},mt.fromJSON=function(e,r,i){typeof r=="string"&&(r=JSON.parse(r));var n=e.point(r[0],r[1],i);if(!r[2])return n;function s(a){return e.point(a[0],a[1],i)}var o=r[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(s))}},n},mt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},mt.prototype.isInfinity=function(){return this.inf},mt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(e.x),n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)},mt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},mt.prototype.getX=function(){return this.x.fromRed()},mt.prototype.getY=function(){return this.y.fromRed()},mt.prototype.mul=function(e){return e=new De(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},mt.prototype.mulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)},mt.prototype.jmulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)},mt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)},mt.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,n=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r},mt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Pt(t,e,r,i){us.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new De(0)):(this.x=new De(e,16),this.y=new De(r,16),this.z=new De(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}qu(Pt,us.BasePoint),gr.prototype.jpoint=function(e,r,i){return new Pt(this,e,r,i)},Pt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),i=this.x.redMul(r),n=this.y.redMul(r).redMul(e);return this.curve.point(i,n)},Pt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Pt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(r),s=e.x.redMul(i),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(i.redMul(this.z)),c=n.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),d=u.redMul(c),p=n.redMul(u),m=l.redSqr().redIAdd(d).redISub(p).redISub(p),v=l.redMul(p.redISub(m)).redISub(o.redMul(d)),w=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(m,v,w)},Pt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),i=this.x,n=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=i.redSub(n),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),u=l.redMul(a),d=i.redMul(l),p=c.redSqr().redIAdd(u).redISub(d).redISub(d),m=c.redMul(d.redISub(p)).redISub(s.redMul(u)),v=this.z.redMul(a);return this.curve.jpoint(p,m,v)},Pt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<e;r++)i=i.dbl();return i}var n=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,l=c.redSqr().redSqr(),u=a.redAdd(a);for(r=0;r<e;r++){var d=o.redSqr(),p=u.redSqr(),m=p.redSqr(),v=d.redAdd(d).redIAdd(d).redIAdd(n.redMul(l)),w=o.redMul(p),S=v.redSqr().redISub(w.redAdd(w)),x=w.redISub(S),A=v.redMul(x);A=A.redIAdd(A).redISub(m);var C=u.redMul(c);r+1<e&&(l=l.redMul(m)),o=S,c=C,u=A}return this.curve.jpoint(o,u.redMul(s),c)},Pt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Pt.prototype._zeroDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var c=n.redAdd(n).redIAdd(n),l=c.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=l,r=c.redMul(a.redISub(l)).redISub(u),i=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),p=this.y.redSqr(),m=p.redSqr(),v=this.x.redAdd(p).redSqr().redISub(d).redISub(m);v=v.redIAdd(v);var w=d.redAdd(d).redIAdd(d),S=w.redSqr(),x=m.redIAdd(m);x=x.redIAdd(x),x=x.redIAdd(x),e=S.redISub(v).redISub(v),r=w.redMul(v.redISub(e)).redISub(x),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,r,i)},Pt.prototype._threeDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var c=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),l=c.redSqr().redISub(a).redISub(a);e=l;var u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),r=c.redMul(a.redISub(l)).redISub(u),i=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),p=this.y.redSqr(),m=this.x.redMul(p),v=this.x.redSub(d).redMul(this.x.redAdd(d));v=v.redAdd(v).redIAdd(v);var w=m.redIAdd(m);w=w.redIAdd(w);var S=w.redAdd(w);e=v.redSqr().redISub(S),i=this.y.redAdd(this.z).redSqr().redISub(p).redISub(d);var x=p.redSqr();x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x),r=v.redMul(w.redISub(e)).redISub(x)}return this.curve.jpoint(e,r,i)},Pt.prototype._dbl=function(){var e=this.curve.a,r=this.x,i=this.y,n=this.z,s=n.redSqr().redSqr(),o=r.redSqr(),a=i.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=r.redAdd(r);l=l.redIAdd(l);var u=l.redMul(a),d=c.redSqr().redISub(u.redAdd(u)),p=u.redISub(d),m=a.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var v=c.redMul(p).redISub(m),w=i.redAdd(i).redMul(n);return this.curve.jpoint(d,v,w)},Pt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),n=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(n);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var u=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(l),d=r.redMul(u);d=d.redIAdd(d),d=d.redIAdd(d);var p=this.x.redMul(c).redISub(d);p=p.redIAdd(p),p=p.redIAdd(p);var m=this.y.redMul(u.redMul(l.redISub(u)).redISub(a.redMul(c)));m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var v=this.z.redAdd(a).redSqr().redISub(i).redISub(c);return this.curve.jpoint(p,m,v)},Pt.prototype.mul=function(e,r){return e=new De(e,r),this.curve._wnafMul(this,e)},Pt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var n=r.redMul(this.z),s=i.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(n)).cmpn(0)===0},Pt.prototype.eqXToP=function(e){var r=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var n=e.clone(),s=this.curve.redN.redMul(r);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}},Pt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Pt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var hs=Ur.exports,W1=ls.exports,nc=ic,$9=ir;function ds(t){nc.call(this,"mont",t),this.a=new hs(t.a,16).toRed(this.red),this.b=new hs(t.b,16).toRed(this.red),this.i4=new hs(4).toRed(this.red).redInvm(),this.two=new hs(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}W1(ds,nc);var I9=ds;ds.prototype.validate=function(e){var r=e.normalize().x,i=r.redSqr(),n=i.redMul(r).redAdd(i.redMul(this.a)).redAdd(r),s=n.redSqrt();return s.redSqr().cmp(n)===0};function vt(t,e,r){nc.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new hs(e,16),this.z=new hs(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}W1(vt,nc.BasePoint),ds.prototype.decodePoint=function(e,r){return this.point($9.toArray(e,r),1)},ds.prototype.point=function(e,r){return new vt(this,e,r)},ds.prototype.pointFromJSON=function(e){return vt.fromJSON(this,e)},vt.prototype.precompute=function(){},vt.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},vt.fromJSON=function(e,r){return new vt(e,r[0],r[1]||e.one)},vt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},vt.prototype.isInfinity=function(){return this.z.cmpn(0)===0},vt.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),i=this.x.redSub(this.z),n=i.redSqr(),s=r.redSub(n),o=r.redMul(n),a=s.redMul(n.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)},vt.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},vt.prototype.diffAdd=function(e,r){var i=this.x.redAdd(this.z),n=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(i),c=s.redMul(n),l=r.z.redMul(a.redAdd(c).redSqr()),u=r.x.redMul(a.redISub(c).redSqr());return this.curve.point(l,u)},vt.prototype.mul=function(e){for(var r=e.clone(),i=this,n=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(i=i.diffAdd(n,s),n=n.dbl()):(n=i.diffAdd(n,s),i=i.dbl());return n},vt.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},vt.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},vt.prototype.eq=function(e){return this.getX().cmp(e.getX())===0},vt.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},vt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var S9=ir,bi=Ur.exports,V1=ls.exports,sc=ic,A9=S9.assert;function jr(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,sc.call(this,"edwards",t),this.a=new bi(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new bi(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new bi(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),A9(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}V1(jr,sc);var P9=jr;jr.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},jr.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},jr.prototype.jpoint=function(e,r,i,n){return this.point(e,r,i,n)},jr.prototype.pointFromX=function(e,r){e=new bi(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),o=n.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var c=a.fromRed().isOdd();return(r&&!c||!r&&c)&&(a=a.redNeg()),this.point(e,a)},jr.prototype.pointFromY=function(e,r){e=new bi(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=i.redSub(this.c2),s=i.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)},jr.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),i=e.y.redSqr(),n=r.redMul(this.a).redAdd(i),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(i)));return n.cmp(s)===0};function Ee(t,e,r,i,n){sc.BasePoint.call(this,t,"projective"),e===null&&r===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new bi(e,16),this.y=new bi(r,16),this.z=i?new bi(i,16):this.curve.one,this.t=n&&new bi(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}V1(Ee,sc.BasePoint),jr.prototype.pointFromJSON=function(e){return Ee.fromJSON(this,e)},jr.prototype.point=function(e,r,i,n){return new Ee(this,e,r,i,n)},Ee.fromJSON=function(e,r){return new Ee(e,r[0],r[1],r[2])},Ee.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Ee.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},Ee.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var n=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=n.redAdd(r),a=o.redSub(i),c=n.redSub(r),l=s.redMul(a),u=o.redMul(c),d=s.redMul(c),p=a.redMul(o);return this.curve.point(l,u,p,d)},Ee.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),i=this.y.redSqr(),n,s,o,a,c,l;if(this.curve.twisted){a=this.curve._mulA(r);var u=a.redAdd(i);this.zOne?(n=e.redSub(r).redSub(i).redMul(u.redSub(this.curve.two)),s=u.redMul(a.redSub(i)),o=u.redSqr().redSub(u).redSub(u)):(c=this.z.redSqr(),l=u.redSub(c).redISub(c),n=e.redSub(r).redISub(i).redMul(l),s=u.redMul(a.redSub(i)),o=u.redMul(l))}else a=r.redAdd(i),c=this.curve._mulC(this.z).redSqr(),l=a.redSub(c).redSub(c),n=this.curve._mulC(e.redISub(a)).redMul(l),s=this.curve._mulC(a).redMul(r.redISub(i)),o=a.redMul(l);return this.curve.point(n,s,o)},Ee.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Ee.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=i.redSub(r),a=s.redSub(n),c=s.redAdd(n),l=i.redAdd(r),u=o.redMul(a),d=c.redMul(l),p=o.redMul(l),m=a.redMul(c);return this.curve.point(u,d,m,p)},Ee.prototype._projAdd=function(e){var r=this.z.redMul(e.z),i=r.redSqr(),n=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(n).redMul(s),a=i.redSub(o),c=i.redAdd(o),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(n).redISub(s),u=r.redMul(a).redMul(l),d,p;return this.curve.twisted?(d=r.redMul(c).redMul(s.redSub(this.curve._mulA(n))),p=a.redMul(c)):(d=r.redMul(c).redMul(s.redSub(n)),p=this.curve._mulC(a).redMul(c)),this.curve.point(u,d,p)},Ee.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},Ee.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},Ee.prototype.mulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!1)},Ee.prototype.jmulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!0)},Ee.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},Ee.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Ee.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Ee.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Ee.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0},Ee.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),n=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),this.x.cmp(r)===0)return!0}},Ee.prototype.toP=Ee.prototype.normalize,Ee.prototype.mixedAdd=Ee.prototype.add,function(t){var e=t;e.base=ic,e.short=x9,e.mont=I9,e.edwards=P9}(ku);var oc={},ac={},re={},O9=gn,C9=ls.exports;re.inherits=C9;function D9(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function M9(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var i=0,n=0;n<t.length;n++){var s=t.charCodeAt(n);s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=s&63|128):D9(t,n)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=s&63|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=s&63|128)}else for(n=0;n<t.length;n++)r[n]=t[n]|0;return r}re.toArray=M9;function T9(t){for(var e="",r=0;r<t.length;r++)e+=G1(t[r].toString(16));return e}re.toHex=T9;function K1(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}re.htonl=K1;function R9(t,e){for(var r="",i=0;i<t.length;i++){var n=t[i];e==="little"&&(n=K1(n)),r+=Z1(n.toString(16))}return r}re.toHex32=R9;function G1(t){return t.length===1?"0"+t:t}re.zero2=G1;function Z1(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}re.zero8=Z1;function N9(t,e,r,i){var n=r-e;O9(n%4===0);for(var s=new Array(n/4),o=0,a=e;o<s.length;o++,a+=4){var c;i==="big"?c=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:c=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=c>>>0}return s}re.join32=N9;function B9(t,e){for(var r=new Array(t.length*4),i=0,n=0;i<t.length;i++,n+=4){var s=t[i];e==="big"?(r[n]=s>>>24,r[n+1]=s>>>16&255,r[n+2]=s>>>8&255,r[n+3]=s&255):(r[n+3]=s>>>24,r[n+2]=s>>>16&255,r[n+1]=s>>>8&255,r[n]=s&255)}return r}re.split32=B9;function L9(t,e){return t>>>e|t<<32-e}re.rotr32=L9;function F9(t,e){return t<<e|t>>>32-e}re.rotl32=F9;function U9(t,e){return t+e>>>0}re.sum32=U9;function j9(t,e,r){return t+e+r>>>0}re.sum32_3=j9;function k9(t,e,r,i){return t+e+r+i>>>0}re.sum32_4=k9;function q9(t,e,r,i,n){return t+e+r+i+n>>>0}re.sum32_5=q9;function z9(t,e,r,i){var n=t[e],s=t[e+1],o=i+s>>>0,a=(o<i?1:0)+r+n;t[e]=a>>>0,t[e+1]=o}re.sum64=z9;function H9(t,e,r,i){var n=e+i>>>0,s=(n<e?1:0)+t+r;return s>>>0}re.sum64_hi=H9;function W9(t,e,r,i){var n=e+i;return n>>>0}re.sum64_lo=W9;function V9(t,e,r,i,n,s,o,a){var c=0,l=e;l=l+i>>>0,c+=l<e?1:0,l=l+s>>>0,c+=l<s?1:0,l=l+a>>>0,c+=l<a?1:0;var u=t+r+n+o+c;return u>>>0}re.sum64_4_hi=V9;function K9(t,e,r,i,n,s,o,a){var c=e+i+s+a;return c>>>0}re.sum64_4_lo=K9;function G9(t,e,r,i,n,s,o,a,c,l){var u=0,d=e;d=d+i>>>0,u+=d<e?1:0,d=d+s>>>0,u+=d<s?1:0,d=d+a>>>0,u+=d<a?1:0,d=d+l>>>0,u+=d<l?1:0;var p=t+r+n+o+c+u;return p>>>0}re.sum64_5_hi=G9;function Z9(t,e,r,i,n,s,o,a,c,l){var u=e+i+s+a+l;return u>>>0}re.sum64_5_lo=Z9;function Y9(t,e,r){var i=e<<32-r|t>>>r;return i>>>0}re.rotr64_hi=Y9;function J9(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}re.rotr64_lo=J9;function Q9(t,e,r){return t>>>r}re.shr64_hi=Q9;function X9(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}re.shr64_lo=X9;var fs={},Y1=re,e_=gn;function cc(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}fs.BlockHash=cc,cc.prototype.update=function(e,r){if(e=Y1.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var i=e.length%this._delta8;this.pending=e.slice(e.length-i,e.length),this.pending.length===0&&(this.pending=null),e=Y1.join32(e,0,e.length-i,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},cc.prototype.digest=function(e){return this.update(this._pad()),e_(this.pending===null),this._digest(e)},cc.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,i=r-(e+this.padLength)%r,n=new Array(i+this.padLength);n[0]=128;for(var s=1;s<i;s++)n[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)n[s++]=0;n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=e>>>24&255,n[s++]=e>>>16&255,n[s++]=e>>>8&255,n[s++]=e&255}else for(n[s++]=e&255,n[s++]=e>>>8&255,n[s++]=e>>>16&255,n[s++]=e>>>24&255,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,o=8;o<this.padLength;o++)n[s++]=0;return n};var ps={},kr={},t_=re,qr=t_.rotr32;function r_(t,e,r,i){if(t===0)return J1(e,r,i);if(t===1||t===3)return X1(e,r,i);if(t===2)return Q1(e,r,i)}kr.ft_1=r_;function J1(t,e,r){return t&e^~t&r}kr.ch32=J1;function Q1(t,e,r){return t&e^t&r^e&r}kr.maj32=Q1;function X1(t,e,r){return t^e^r}kr.p32=X1;function i_(t){return qr(t,2)^qr(t,13)^qr(t,22)}kr.s0_256=i_;function n_(t){return qr(t,6)^qr(t,11)^qr(t,25)}kr.s1_256=n_;function s_(t){return qr(t,7)^qr(t,18)^t>>>3}kr.g0_256=s_;function o_(t){return qr(t,17)^qr(t,19)^t>>>10}kr.g1_256=o_;var gs=re,a_=fs,c_=kr,zu=gs.rotl32,Po=gs.sum32,l_=gs.sum32_5,u_=c_.ft_1,eg=a_.BlockHash,h_=[1518500249,1859775393,2400959708,3395469782];function zr(){if(!(this instanceof zr))return new zr;eg.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}gs.inherits(zr,eg);var d_=zr;zr.blockSize=512,zr.outSize=160,zr.hmacStrength=80,zr.padLength=64,zr.prototype._update=function(e,r){for(var i=this.W,n=0;n<16;n++)i[n]=e[r+n];for(;n<i.length;n++)i[n]=zu(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4];for(n=0;n<i.length;n++){var u=~~(n/20),d=l_(zu(s,5),u_(u,o,a,c),l,i[n],h_[u]);l=c,c=a,a=zu(o,30),o=s,s=d}this.h[0]=Po(this.h[0],s),this.h[1]=Po(this.h[1],o),this.h[2]=Po(this.h[2],a),this.h[3]=Po(this.h[3],c),this.h[4]=Po(this.h[4],l)},zr.prototype._digest=function(e){return e==="hex"?gs.toHex32(this.h,"big"):gs.split32(this.h,"big")};var bs=re,f_=fs,ms=kr,p_=gn,Ar=bs.sum32,g_=bs.sum32_4,b_=bs.sum32_5,m_=ms.ch32,v_=ms.maj32,y_=ms.s0_256,w_=ms.s1_256,__=ms.g0_256,E_=ms.g1_256,tg=f_.BlockHash,x_=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Hr(){if(!(this instanceof Hr))return new Hr;tg.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=x_,this.W=new Array(64)}bs.inherits(Hr,tg);var rg=Hr;Hr.blockSize=512,Hr.outSize=256,Hr.hmacStrength=192,Hr.padLength=64,Hr.prototype._update=function(e,r){for(var i=this.W,n=0;n<16;n++)i[n]=e[r+n];for(;n<i.length;n++)i[n]=g_(E_(i[n-2]),i[n-7],__(i[n-15]),i[n-16]);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4],u=this.h[5],d=this.h[6],p=this.h[7];for(p_(this.k.length===i.length),n=0;n<i.length;n++){var m=b_(p,w_(l),m_(l,u,d),this.k[n],i[n]),v=Ar(y_(s),v_(s,o,a));p=d,d=u,u=l,l=Ar(c,m),c=a,a=o,o=s,s=Ar(m,v)}this.h[0]=Ar(this.h[0],s),this.h[1]=Ar(this.h[1],o),this.h[2]=Ar(this.h[2],a),this.h[3]=Ar(this.h[3],c),this.h[4]=Ar(this.h[4],l),this.h[5]=Ar(this.h[5],u),this.h[6]=Ar(this.h[6],d),this.h[7]=Ar(this.h[7],p)},Hr.prototype._digest=function(e){return e==="hex"?bs.toHex32(this.h,"big"):bs.split32(this.h,"big")};var Hu=re,ig=rg;function mi(){if(!(this instanceof mi))return new mi;ig.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Hu.inherits(mi,ig);var $_=mi;mi.blockSize=512,mi.outSize=224,mi.hmacStrength=192,mi.padLength=64,mi.prototype._digest=function(e){return e==="hex"?Hu.toHex32(this.h.slice(0,7),"big"):Hu.split32(this.h.slice(0,7),"big")};var Gt=re,I_=fs,S_=gn,Wr=Gt.rotr64_hi,Vr=Gt.rotr64_lo,ng=Gt.shr64_hi,sg=Gt.shr64_lo,Fi=Gt.sum64,Wu=Gt.sum64_hi,Vu=Gt.sum64_lo,A_=Gt.sum64_4_hi,P_=Gt.sum64_4_lo,O_=Gt.sum64_5_hi,C_=Gt.sum64_5_lo,og=I_.BlockHash,D_=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Pr(){if(!(this instanceof Pr))return new Pr;og.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=D_,this.W=new Array(160)}Gt.inherits(Pr,og);var ag=Pr;Pr.blockSize=1024,Pr.outSize=512,Pr.hmacStrength=192,Pr.padLength=128,Pr.prototype._prepareBlock=function(e,r){for(var i=this.W,n=0;n<32;n++)i[n]=e[r+n];for(;n<i.length;n+=2){var s=q_(i[n-4],i[n-3]),o=z_(i[n-4],i[n-3]),a=i[n-14],c=i[n-13],l=j_(i[n-30],i[n-29]),u=k_(i[n-30],i[n-29]),d=i[n-32],p=i[n-31];i[n]=A_(s,o,a,c,l,u,d,p),i[n+1]=P_(s,o,a,c,l,u,d,p)}},Pr.prototype._update=function(e,r){this._prepareBlock(e,r);var i=this.W,n=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],l=this.h[5],u=this.h[6],d=this.h[7],p=this.h[8],m=this.h[9],v=this.h[10],w=this.h[11],S=this.h[12],x=this.h[13],A=this.h[14],C=this.h[15];S_(this.k.length===i.length);for(var D=0;D<i.length;D+=2){var T=A,N=C,R=F_(p,m),B=U_(p,m),M=M_(p,m,v,w,S),U=T_(p,m,v,w,S,x),$=this.k[D],h=this.k[D+1],b=i[D],_=i[D+1],g=O_(T,N,R,B,M,U,$,h,b,_),y=C_(T,N,R,B,M,U,$,h,b,_);T=B_(n,s),N=L_(n,s),R=R_(n,s,o,a,c),B=N_(n,s,o,a,c,l);var I=Wu(T,N,R,B),O=Vu(T,N,R,B);A=S,C=x,S=v,x=w,v=p,w=m,p=Wu(u,d,g,y),m=Vu(d,d,g,y),u=c,d=l,c=o,l=a,o=n,a=s,n=Wu(g,y,I,O),s=Vu(g,y,I,O)}Fi(this.h,0,n,s),Fi(this.h,2,o,a),Fi(this.h,4,c,l),Fi(this.h,6,u,d),Fi(this.h,8,p,m),Fi(this.h,10,v,w),Fi(this.h,12,S,x),Fi(this.h,14,A,C)},Pr.prototype._digest=function(e){return e==="hex"?Gt.toHex32(this.h,"big"):Gt.split32(this.h,"big")};function M_(t,e,r,i,n){var s=t&r^~t&n;return s<0&&(s+=4294967296),s}function T_(t,e,r,i,n,s){var o=e&i^~e&s;return o<0&&(o+=4294967296),o}function R_(t,e,r,i,n){var s=t&r^t&n^r&n;return s<0&&(s+=4294967296),s}function N_(t,e,r,i,n,s){var o=e&i^e&s^i&s;return o<0&&(o+=4294967296),o}function B_(t,e){var r=Wr(t,e,28),i=Wr(e,t,2),n=Wr(e,t,7),s=r^i^n;return s<0&&(s+=4294967296),s}function L_(t,e){var r=Vr(t,e,28),i=Vr(e,t,2),n=Vr(e,t,7),s=r^i^n;return s<0&&(s+=4294967296),s}function F_(t,e){var r=Wr(t,e,14),i=Wr(t,e,18),n=Wr(e,t,9),s=r^i^n;return s<0&&(s+=4294967296),s}function U_(t,e){var r=Vr(t,e,14),i=Vr(t,e,18),n=Vr(e,t,9),s=r^i^n;return s<0&&(s+=4294967296),s}function j_(t,e){var r=Wr(t,e,1),i=Wr(t,e,8),n=ng(t,e,7),s=r^i^n;return s<0&&(s+=4294967296),s}function k_(t,e){var r=Vr(t,e,1),i=Vr(t,e,8),n=sg(t,e,7),s=r^i^n;return s<0&&(s+=4294967296),s}function q_(t,e){var r=Wr(t,e,19),i=Wr(e,t,29),n=ng(t,e,6),s=r^i^n;return s<0&&(s+=4294967296),s}function z_(t,e){var r=Vr(t,e,19),i=Vr(e,t,29),n=sg(t,e,6),s=r^i^n;return s<0&&(s+=4294967296),s}var Ku=re,cg=ag;function vi(){if(!(this instanceof vi))return new vi;cg.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Ku.inherits(vi,cg);var H_=vi;vi.blockSize=1024,vi.outSize=384,vi.hmacStrength=192,vi.padLength=128,vi.prototype._digest=function(e){return e==="hex"?Ku.toHex32(this.h.slice(0,12),"big"):Ku.split32(this.h.slice(0,12),"big")},ps.sha1=d_,ps.sha224=$_,ps.sha256=rg,ps.sha384=H_,ps.sha512=ag;var lg={},mn=re,W_=fs,lc=mn.rotl32,ug=mn.sum32,Oo=mn.sum32_3,hg=mn.sum32_4,dg=W_.BlockHash;function Kr(){if(!(this instanceof Kr))return new Kr;dg.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}mn.inherits(Kr,dg),lg.ripemd160=Kr,Kr.blockSize=512,Kr.outSize=160,Kr.hmacStrength=192,Kr.padLength=64,Kr.prototype._update=function(e,r){for(var i=this.h[0],n=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=i,l=n,u=s,d=o,p=a,m=0;m<80;m++){var v=ug(lc(hg(i,fg(m,n,s,o),e[G_[m]+r],V_(m)),Y_[m]),a);i=a,a=o,o=lc(s,10),s=n,n=v,v=ug(lc(hg(c,fg(79-m,l,u,d),e[Z_[m]+r],K_(m)),J_[m]),p),c=p,p=d,d=lc(u,10),u=l,l=v}v=Oo(this.h[1],s,d),this.h[1]=Oo(this.h[2],o,p),this.h[2]=Oo(this.h[3],a,c),this.h[3]=Oo(this.h[4],i,l),this.h[4]=Oo(this.h[0],n,u),this.h[0]=v},Kr.prototype._digest=function(e){return e==="hex"?mn.toHex32(this.h,"little"):mn.split32(this.h,"little")};function fg(t,e,r,i){return t<=15?e^r^i:t<=31?e&r|~e&i:t<=47?(e|~r)^i:t<=63?e&i|r&~i:e^(r|~i)}function V_(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function K_(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var G_=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Z_=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Y_=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],J_=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Q_=re,X_=gn;function vs(t,e,r){if(!(this instanceof vs))return new vs(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(Q_.toArray(e,r))}var eE=vs;vs.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),X_(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)},vs.prototype.update=function(e,r){return this.inner.update(e,r),this},vs.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(t){var e=t;e.utils=re,e.common=fs,e.sha=ps,e.ripemd=lg,e.hmac=eE,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(ac);var Gu,pg;function tE(){return pg||(pg=1,Gu={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Gu}(function(t){var e=t,r=ac,i=ku,n=ir,s=n.assert;function o(l){l.type==="short"?this.curve=new i.short(l):l.type==="edwards"?this.curve=new i.edwards(l):this.curve=new i.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function a(l,u){Object.defineProperty(e,l,{configurable:!0,enumerable:!0,get:function(){var d=new o(u);return Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:d}),d}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=tE()}catch{c=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})})(oc);var rE=ac,vn=Uu,gg=gn;function Ui(t){if(!(this instanceof Ui))return new Ui(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=vn.toArray(t.entropy,t.entropyEnc||"hex"),r=vn.toArray(t.nonce,t.nonceEnc||"hex"),i=vn.toArray(t.pers,t.persEnc||"hex");gg(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,i)}var iE=Ui;Ui.prototype._init=function(e,r,i){var n=e.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Ui.prototype._hmac=function(){return new rE.hmac(this.hash,this.K)},Ui.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Ui.prototype.reseed=function(e,r,i,n){typeof r!="string"&&(n=i,i=r,r=null),e=vn.toArray(e,r),i=vn.toArray(i,n),gg(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1},Ui.prototype.generate=function(e,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(n=i,i=r,r=null),i&&(i=vn.toArray(i,n||"hex"),this._update(i));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(i),this._reseed++,vn.encode(o,r)};var nE=Ur.exports,sE=ir,Zu=sE.assert;function Nt(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var oE=Nt;Nt.fromPublic=function(e,r,i){return r instanceof Nt?r:new Nt(e,{pub:r,pubEnc:i})},Nt.fromPrivate=function(e,r,i){return r instanceof Nt?r:new Nt(e,{priv:r,privEnc:i})},Nt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Nt.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub},Nt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv},Nt.prototype._importPrivate=function(e,r){this.priv=new nE(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)},Nt.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Zu(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Zu(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)},Nt.prototype.derive=function(e){return e.validate()||Zu(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Nt.prototype.sign=function(e,r,i){return this.ec.sign(e,this,r,i)},Nt.prototype.verify=function(e,r,i){return this.ec.verify(e,r,this,void 0,i)},Nt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var uc=Ur.exports,Yu=ir,aE=Yu.assert;function hc(t,e){if(t instanceof hc)return t;this._importDER(t,e)||(aE(t.r&&t.s,"Signature without r or s"),this.r=new uc(t.r,16),this.s=new uc(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var cE=hc;function lE(){this.place=0}function Ju(t,e){var r=t[e.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4||t[e.place]===0)return!1;for(var n=0,s=0,o=e.place;s<i;s++,o++)n<<=8,n|=t[o],n>>>=0;return n<=127?!1:(e.place=o,n)}function bg(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}hc.prototype._importDER=function(e,r){e=Yu.toArray(e,r);var i=new lE;if(e[i.place++]!==48)return!1;var n=Ju(e,i);if(n===!1||n+i.place!==e.length||e[i.place++]!==2)return!1;var s=Ju(e,i);if(s===!1||(e[i.place]&128)!==0)return!1;var o=e.slice(i.place,s+i.place);if(i.place+=s,e[i.place++]!==2)return!1;var a=Ju(e,i);if(a===!1||e.length!==a+i.place||(e[i.place]&128)!==0)return!1;var c=e.slice(i.place,a+i.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new uc(o),this.s=new uc(c),this.recoveryParam=null,!0};function Qu(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}hc.prototype.toDER=function(e){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=bg(r),i=bg(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];Qu(n,r.length),n=n.concat(r),n.push(2),Qu(n,i.length);var s=n.concat(i),o=[48];return Qu(o,s.length),o=o.concat(s),Yu.encode(o,e)};var Or=Ur.exports,mg=iE,uE=ir,Xu=oc,hE=ec.exports,yn=uE.assert,eh=oE,dc=cE;function br(t){if(!(this instanceof br))return new br(t);typeof t=="string"&&(yn(Object.prototype.hasOwnProperty.call(Xu,t),"Unknown curve "+t),t=Xu[t]),t instanceof Xu.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var dE=br;br.prototype.keyPair=function(e){return new eh(this,e)},br.prototype.keyFromPrivate=function(e,r){return eh.fromPrivate(this,e,r)},br.prototype.keyFromPublic=function(e,r){return eh.fromPublic(this,e,r)},br.prototype.genKeyPair=function(e){e||(e={});for(var r=new mg({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||hE(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new Or(2));;){var s=new Or(r.generate(i));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}},br.prototype._truncateToN=function(e,r,i){var n;if(Or.isBN(e)||typeof e=="number")e=new Or(e,16),n=e.byteLength();else if(typeof e=="object")n=e.length,e=new Or(e,16);else{var s=e.toString();n=s.length+1>>>1,e=new Or(s,16)}typeof i!="number"&&(i=n*8);var o=i-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e},br.prototype.sign=function(e,r,i,n){if(typeof i=="object"&&(n=i,i=null),n||(n={}),typeof e!="string"&&typeof e!="number"&&!Or.isBN(e)){yn(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),yn(e.length>>>0===e.length);for(var s=0;s<e.length;s++)yn((e[s]&255)===e[s])}r=this.keyFromPrivate(r,i),e=this._truncateToN(e,!1,n.msgBitLength),yn(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),a=r.getPrivate().toArray("be",o),c=e.toArray("be",o);yn(new Or(c).eq(e),"Can not sign message");for(var l=new mg({hash:this.hash,entropy:a,nonce:c,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new Or(1)),d=0;;d++){var p=n.k?n.k(d):new Or(l.generate(this.n.byteLength()));if(p=this._truncateToN(p,!0),!(p.cmpn(1)<=0||p.cmp(u)>=0)){var m=this.g.mul(p);if(!m.isInfinity()){var v=m.getX(),w=v.umod(this.n);if(w.cmpn(0)!==0){var S=p.invm(this.n).mul(w.mul(r.getPrivate()).iadd(e));if(S=S.umod(this.n),S.cmpn(0)!==0){var x=(m.getY().isOdd()?1:0)|(v.cmp(w)!==0?2:0);return n.canonical&&S.cmp(this.nh)>0&&(S=this.n.sub(S),x^=1),new dc({r:w,s:S,recoveryParam:x})}}}}}},br.prototype.verify=function(e,r,i,n,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),i=this.keyFromPublic(i,n),r=new dc(r,"hex");var o=r.r,a=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var c=a.invm(this.n),l=c.mul(e).umod(this.n),u=c.mul(o).umod(this.n),d;return this.curve._maxwellTrick?(d=this.g.jmulAdd(l,i.getPublic(),u),d.isInfinity()?!1:d.eqXToP(o)):(d=this.g.mulAdd(l,i.getPublic(),u),d.isInfinity()?!1:d.getX().umod(this.n).cmp(o)===0)},br.prototype.recoverPubKey=function(t,e,r,i){yn((3&r)===r,"The recovery param is more than two bits"),e=new dc(e,i);var n=this.n,s=new Or(t),o=e.r,a=e.s,c=r&1,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var u=e.r.invm(n),d=n.sub(s).mul(u).umod(n),p=a.mul(u).umod(n);return this.g.mulAdd(d,o,p)},br.prototype.getKeyRecoveryParam=function(t,e,r,i){if(e=new dc(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch{continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")};var Co=ir,vg=Co.assert,yg=Co.parseBytes,ys=Co.cachedProperty;function yt(t,e){this.eddsa=t,this._secret=yg(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=yg(e.pub)}yt.fromPublic=function(e,r){return r instanceof yt?r:new yt(e,{pub:r})},yt.fromSecret=function(e,r){return r instanceof yt?r:new yt(e,{secret:r})},yt.prototype.secret=function(){return this._secret},ys(yt,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),ys(yt,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),ys(yt,"privBytes",function(){var e=this.eddsa,r=this.hash(),i=e.encodingLength-1,n=r.slice(0,e.encodingLength);return n[0]&=248,n[i]&=127,n[i]|=64,n}),ys(yt,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),ys(yt,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),ys(yt,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),yt.prototype.sign=function(e){return vg(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},yt.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)},yt.prototype.getSecret=function(e){return vg(this._secret,"KeyPair is public only"),Co.encode(this.secret(),e)},yt.prototype.getPublic=function(e){return Co.encode(this.pubBytes(),e)};var fE=yt,pE=Ur.exports,fc=ir,wg=fc.assert,pc=fc.cachedProperty,gE=fc.parseBytes;function wn(t,e){this.eddsa=t,typeof e!="object"&&(e=gE(e)),Array.isArray(e)&&(wg(e.length===t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),wg(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof pE&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}pc(wn,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),pc(wn,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),pc(wn,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),pc(wn,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),wn.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},wn.prototype.toHex=function(){return fc.encode(this.toBytes(),"hex").toUpperCase()};var bE=wn,mE=ac,vE=oc,ws=ir,yE=ws.assert,_g=ws.parseBytes,Eg=fE,xg=bE;function Zt(t){if(yE(t==="ed25519","only tested with ed25519 so far"),!(this instanceof Zt))return new Zt(t);t=vE[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=mE.sha512}var wE=Zt;Zt.prototype.sign=function(e,r){e=_g(e);var i=this.keyFromSecret(r),n=this.hashInt(i.messagePrefix(),e),s=this.g.mul(n),o=this.encodePoint(s),a=this.hashInt(o,i.pubBytes(),e).mul(i.priv()),c=n.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:o})},Zt.prototype.verify=function(e,r,i){if(e=_g(e),r=this.makeSignature(r),r.S().gte(r.eddsa.curve.n)||r.S().isNeg())return!1;var n=this.keyFromPublic(i),s=this.hashInt(r.Rencoded(),n.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(n.pub().mul(s));return a.eq(o)},Zt.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return ws.intFromLE(e.digest()).umod(this.curve.n)},Zt.prototype.keyFromPublic=function(e){return Eg.fromPublic(this,e)},Zt.prototype.keyFromSecret=function(e){return Eg.fromSecret(this,e)},Zt.prototype.makeSignature=function(e){return e instanceof xg?e:new xg(this,e)},Zt.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r},Zt.prototype.decodePoint=function(e){e=ws.parseBytes(e);var r=e.length-1,i=e.slice(0,r).concat(e[r]&-129),n=(e[r]&128)!==0,s=ws.intFromLE(i);return this.curve.pointFromY(s,n)},Zt.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},Zt.prototype.decodeInt=function(e){return ws.intFromLE(e)},Zt.prototype.isPoint=function(e){return e instanceof this.pointClass},function(t){var e=t;e.version=m9.version,e.utils=ir,e.rand=ec.exports,e.curve=ku,e.curves=oc,e.ec=dE,e.eddsa=wE}(k1);const _E={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var EE=Object.defineProperty,$g=Object.getOwnPropertySymbols,xE=Object.prototype.hasOwnProperty,$E=Object.prototype.propertyIsEnumerable,Ig=(t,e,r)=>e in t?EE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,IE=(t,e)=>{for(var r in e||(e={}))xE.call(e,r)&&Ig(t,r,e[r]);if($g)for(var r of $g(e))$E.call(e,r)&&Ig(t,r,e[r]);return t};const SE=":";function _s(t){const[e,r]=t.split(SE);return{namespace:e,reference:r}}function Sg(t,e=[]){const r=[];return Object.keys(t).forEach(i=>{if(e.length&&!e.includes(i))return;const n=t[i];r.push(...n.accounts)}),r}function Ag(t,e){return t.includes(":")?[t]:e.chains||[]}const AE="ReactNative",nr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},PE="js";function gc(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ji(){return!go()&&!!Bl()&&navigator.product===AE}function OE(){return ji()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function CE(){return ji()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Do(){return!gc()&&!!Bl()&&!!go()}function Mo(){return ji()?nr.reactNative:gc()?nr.node:Do()?nr.browser:nr.unknown}function Pg(){var t;try{return ji()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function DE(t,e){const r=new URLSearchParams(t);for(const i of Object.keys(e).sort())if(e.hasOwnProperty(i)){const n=e[i];n!==void 0&&r.set(i,n)}return r.toString()}function Og(){return w0()||{name:"",description:"",url:"",icons:[""]}}function ME(){if(Mo()===nr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:i}=global.Platform;return[r,i].join("-")}const t=Fy();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function TE(){var t;const e=Mo();return e===nr.browser?[e,((t=y0())==null?void 0:t.host)||"unknown"].join(":"):e}function Cg(t,e,r){const i=ME(),n=TE();return[[t,e].join("-"),[PE,r].join("-"),i,n].join("/")}function RE({protocol:t,version:e,relayUrl:r,sdkVersion:i,auth:n,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=r.split("?"),u=Cg(t,e,i),d={auth:n,ua:u,projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},p=DE(l[1]||"",d);return l[0]+"?"+p}function _n(t,e){return t.filter(r=>e.includes(r)).length===t.length}function th(t){return Object.fromEntries(t.entries())}function rh(t){return new Map(Object.entries(t))}function En(t=z.FIVE_MINUTES,e){const r=z.toMiliseconds(t||z.FIVE_MINUTES);let i,n,s,o;return{resolve:a=>{s&&i&&(clearTimeout(s),i(a),o=Promise.resolve(a))},reject:a=>{s&&n&&(clearTimeout(s),n(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},r),i=a,n=c})}}function ki(t,e,r){return new Promise(async(i,n)=>{const s=setTimeout(()=>n(new Error(r)),e);try{const o=await t;i(o)}catch(o){n(o)}clearTimeout(s)})}function Dg(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function NE(t){return Dg("topic",t)}function BE(t){return Dg("id",t)}function Mg(t){const[e,r]=t.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")i.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return i}function dt(t,e){return z.fromMiliseconds((e||Date.now())+z.toMiliseconds(t))}function qi(t){return Date.now()>=z.toMiliseconds(t)}function fe(t,e){return`${t}${e?`:${e}`:""}`}function bc(t=[],e=[]){return[...new Set([...t,...e])]}async function LE({id:t,topic:e,wcDeepLink:r}){var i;try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r,s=n?.href;if(typeof s!="string")return;const o=FE(s,t,e),a=Mo();if(a===nr.browser){if(!((i=go())!=null&&i.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}UE(o)}else a===nr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(n){console.error(n)}}function FE(t,e,r){const i=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let n=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";n=`${n}${s}${zE(i,!0)}`}else n=`${n}/wc?${i}`;return n}function UE(t){let e="_self";qE()?e="_top":(kE()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function jE(t,e){let r="";try{if(Do()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(i){console.error(i)}return r}function Tg(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),i=r.indexOf(e);return r[i+2]}function Rg(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function ih(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function kE(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function qE(){try{return window.self!==window.top}catch{return!1}}function zE(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function Ng(t){return Buffer.from(t,"base64").toString("utf-8")}function HE(t){return new Promise(e=>setTimeout(e,t))}function To(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function WE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function mc(t,...e){if(!WE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function nh(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");To(t.outputLen),To(t.blockLen)}function Es(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Bg(t,e){mc(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const vc=BigInt(2**32-1),Lg=BigInt(32);function VE(t,e=!1){return e?{h:Number(t&vc),l:Number(t>>Lg&vc)}:{h:Number(t>>Lg&vc)|0,l:Number(t&vc)|0}}function KE(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let n=0;n<t.length;n++){const{h:s,l:o}=VE(t[n],e);[r[n],i[n]]=[s,o]}return[r,i]}const GE=(t,e,r)=>t<<r|e>>>32-r,ZE=(t,e,r)=>e<<r|t>>>32-r,YE=(t,e,r)=>e<<r-32|t>>>64-r,JE=(t,e,r)=>t<<r-32|e>>>64-r,xs=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function QE(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function sh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Gr(t,e){return t<<32-e|t>>>e}const Fg=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function XE(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Ug(t){for(let e=0;e<t.length;e++)t[e]=XE(t[e])}function ex(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function $s(t){return typeof t=="string"&&(t=ex(t)),mc(t),t}class oh{clone(){return this._cloneInto()}}function jg(t){const e=i=>t().update($s(i)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Ro(t=32){if(xs&&typeof xs.getRandomValues=="function")return xs.getRandomValues(new Uint8Array(t));if(xs&&typeof xs.randomBytes=="function")return xs.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const kg=[],qg=[],zg=[],tx=BigInt(0),No=BigInt(1),rx=BigInt(2),ix=BigInt(7),nx=BigInt(256),sx=BigInt(113);for(let t=0,e=No,r=1,i=0;t<24;t++){[r,i]=[i,(2*r+3*i)%5],kg.push(2*(5*i+r)),qg.push((t+1)*(t+2)/2%64);let n=tx;for(let s=0;s<7;s++)e=(e<<No^(e>>ix)*sx)%nx,e&rx&&(n^=No<<(No<<BigInt(s))-No);zg.push(n)}const[ox,ax]=KE(zg,!0),Hg=(t,e,r)=>r>32?YE(t,e,r):GE(t,e,r),Wg=(t,e,r)=>r>32?JE(t,e,r):ZE(t,e,r);function cx(t,e=24){const r=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],d=Hg(l,u,1)^r[a],p=Wg(l,u,1)^r[a+1];for(let m=0;m<50;m+=10)t[o+m]^=d,t[o+m+1]^=p}let n=t[2],s=t[3];for(let o=0;o<24;o++){const a=qg[o],c=Hg(n,s,a),l=Wg(n,s,a),u=kg[o];n=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=ox[i],t[1]^=ax[i]}r.fill(0)}class ah extends oh{constructor(e,r,i,n=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=i,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,To(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=QE(this.state)}keccak(){Fg||Ug(this.state32),cx(this.state32,this.rounds),Fg||Ug(this.state32),this.posOut=0,this.pos=0}update(e){Es(this);const{blockLen:r,state:i}=this;e=$s(e);const n=e.length;for(let s=0;s<n;){const o=Math.min(r-this.pos,n-s);for(let a=0;a<o;a++)i[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:i,blockLen:n}=this;e[i]^=r,(r&128)!==0&&i===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){Es(this,!1),mc(e),this.finish();const r=this.state,{blockLen:i}=this;for(let n=0,s=e.length;n<s;){this.posOut>=i&&this.keccak();const o=Math.min(i-this.posOut,s-n);e.set(r.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return To(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Bg(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:i,outputLen:n,rounds:s,enableXOF:o}=this;return e||(e=new ah(r,i,n,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=i,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}const lx=(t,e,r)=>jg(()=>new ah(e,t,r)),ux=lx(1,136,256/8),hx="https://rpc.walletconnect.org/v1";function Vg(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(ux(r)).toString("hex")}async function dx(t,e,r,i,n,s){switch(r.t){case"eip191":return await fx(t,e,r.s);case"eip1271":return await px(t,e,r.s,i,n,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function fx(t,e,r){return(await u3({hash:Vg(e),signature:r})).toLowerCase()===t.toLowerCase()}async function px(t,e,r,i,n,s){const o=_s(i);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=r.substring(2),d=Vg(e).substring(2),p=a+d+c+l+u,m=await fetch(`${s||hx}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:gx(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:p},"latest"]})}),{result:v}=await m.json();return v?v.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function gx(){return Date.now()+Math.floor(Math.random()*1e3)}function bx(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const i=r[0];if(i===0)throw new Error("No signatures found");const n=1+i*64;if(r.length<n)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return V4.encode(s)}var mx=Object.defineProperty,vx=Object.defineProperties,yx=Object.getOwnPropertyDescriptors,Kg=Object.getOwnPropertySymbols,wx=Object.prototype.hasOwnProperty,_x=Object.prototype.propertyIsEnumerable,Gg=(t,e,r)=>e in t?mx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ex=(t,e)=>{for(var r in e||(e={}))wx.call(e,r)&&Gg(t,r,e[r]);if(Kg)for(var r of Kg(e))_x.call(e,r)&&Gg(t,r,e[r]);return t},xx=(t,e)=>vx(t,yx(e));const $x="did:pkh:",ch=t=>t?.split(":"),Ix=t=>{const e=t&&ch(t);if(e)return t.includes($x)?e[3]:e[1]},lh=t=>{const e=t&&ch(t);if(e)return e[2]+":"+e[3]},yc=t=>{const e=t&&ch(t);if(e)return e.pop()};async function Zg(t){const{cacao:e,projectId:r}=t,{s:i,p:n}=e,s=Yg(n,n.iss),o=yc(n.iss);return await dx(o,s,i,lh(n.iss),r)}const Yg=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,i=yc(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let n=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${Ix(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,p=t.requestId?`Request ID: ${t.requestId}`:void 0,m=t.resources?`Resources:${t.resources.map(w=>`
- ${w}`).join("")}`:void 0,v=wc(t.resources);if(v){const w=Bo(v);n=Rx(n,w)}return[r,i,"",n,"",s,o,a,c,l,u,d,p,m].filter(w=>w!=null).join(`
`)};function Sx(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Ax(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function xn(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const i=t.att[r];if(Array.isArray(i))throw new Error(`Resource must be an object: ${r}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(i).forEach(n=>{const s=i[n];if(!Array.isArray(s))throw new Error(`Ability limits ${n} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${n} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${n}) must be an array of objects, found: ${o}`)})})})}function Px(t,e,r,i={}){return r?.sort((n,s)=>n.localeCompare(s)),{att:{[t]:Ox(e,r,i)}}}function Ox(t,e,r={}){e=e?.sort((n,s)=>n.localeCompare(s));const i=e.map(n=>({[`${t}/${n}`]:[r]}));return Object.assign({},...i)}function Jg(t){return xn(t),`urn:recap:${Sx(t).replace(/=/g,"")}`}function Bo(t){const e=Ax(t.replace("urn:recap:",""));return xn(e),e}function Cx(t,e,r){const i=Px(t,e,r);return Jg(i)}function Dx(t){return t&&t.includes("urn:recap:")}function Mx(t,e){const r=Bo(t),i=Bo(e),n=Tx(r,i);return Jg(n)}function Tx(t,e){xn(t),xn(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((n,s)=>n.localeCompare(s)),i={att:{}};return r.forEach(n=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[n])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[n])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;i.att[n]=xx(Ex({},i.att[n]),{[a]:((c=t.att[n])==null?void 0:c[a])||((l=e.att[n])==null?void 0:l[a])})})}),i}function Rx(t="",e){xn(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const i=[];let n=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,p)=>d.action.localeCompare(p.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(n++,`(${n}) '${d}': '${l[d].join("', '")}' for '${a}'.`));i.push(u.join(", ").replace(".,","."))});const s=i.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function Qg(t){var e;const r=Bo(t);xn(r);const i=(e=r.att)==null?void 0:e.eip155;return i?Object.keys(i).map(n=>n.split("/")[1]):[]}function Xg(t){const e=Bo(t);xn(e);const r=[];return Object.values(e.att).forEach(i=>{Object.values(i).forEach(n=>{var s;(s=n?.[0])!=null&&s.chains&&r.push(n[0].chains)})}),[...new Set(r.flat())]}function wc(t){if(!t)return;const e=t?.[t.length-1];return Dx(e)?e:void 0}function uh(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function eb(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function sr(t,...e){if(!eb(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function tb(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Nx(t,e){sr(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function rb(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const zi=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Bx=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);if(!(new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68))throw new Error("Non little-endian hardware is not supported");function Lx(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function hh(t){if(typeof t=="string")t=Lx(t);else if(eb(t))t=dh(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Fx(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Ux(t,e){if(t.length!==e.length)return!1;let r=0;for(let i=0;i<t.length;i++)r|=t[i]^e[i];return r===0}const jx=(t,e)=>{function r(i,...n){if(sr(i),t.nonceLength!==void 0){const l=n[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?sr(l):sr(l,t.nonceLength)}const s=t.tagLength;s&&n[1]!==void 0&&sr(n[1]);const o=e(i,...n),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");sr(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,sr(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(sr(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(r,t),r};function ib(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!kx(e))throw new Error("invalid output, must be aligned");return e}function nb(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,l=i?0:4;t.setUint32(e+c,o,i),t.setUint32(e+l,a,i)}function kx(t){return t.byteOffset%4===0}function dh(t){return Uint8Array.from(t)}function Is(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const sb=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),qx=sb("expand 16-byte k"),zx=sb("expand 32-byte k"),Hx=zi(qx),Wx=zi(zx);function ce(t,e){return t<<e|t>>>32-e}function fh(t){return t.byteOffset%4===0}const _c=64,Vx=16,ob=2**32-1,ab=new Uint32Array;function Kx(t,e,r,i,n,s,o,a){const c=n.length,l=new Uint8Array(_c),u=zi(l),d=fh(n)&&fh(s),p=d?zi(n):ab,m=d?zi(s):ab;for(let v=0;v<c;o++){if(t(e,r,i,u,o,a),o>=ob)throw new Error("arx: counter overflow");const w=Math.min(_c,c-v);if(d&&w===_c){const S=v/4;if(v%4!==0)throw new Error("arx: invalid block position");for(let x=0,A;x<Vx;x++)A=S+x,m[A]=p[A]^u[x];v+=_c;continue}for(let S=0,x;S<w;S++)x=v+S,s[x]=n[x]^l[S];v+=w}}function Gx(t,e){const{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:o}=Fx({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return uh(n),uh(o),rb(s),rb(r),(a,c,l,u,d=0)=>{sr(a),sr(c),sr(l);const p=l.length;if(u===void 0&&(u=new Uint8Array(p)),sr(u),uh(d),d<0||d>=ob)throw new Error("arx: counter overflow");if(u.length<p)throw new Error(`arx: output (${u.length}) is shorter than data (${p})`);const m=[];let v=a.length,w,S;if(v===32)m.push(w=dh(a)),S=Wx;else if(v===16&&r)w=new Uint8Array(32),w.set(a),w.set(a,16),S=Hx,m.push(w);else throw new Error(`arx: invalid 32-byte key, got length=${v}`);fh(c)||m.push(c=dh(c));const x=zi(w);if(i){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");i(S,x,zi(c.subarray(0,16)),x),c=c.subarray(16)}const A=16-n;if(A!==c.length)throw new Error(`arx: nonce must be ${A} or 16 bytes`);if(A!==12){const D=new Uint8Array(12);D.set(c,s?0:12-c.length),c=D,m.push(c)}const C=zi(c);return Kx(t,S,x,C,l,u,d,o),Is(...m),u}}const Ot=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Zx{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=hh(e),sr(e,32);const r=Ot(e,0),i=Ot(e,2),n=Ot(e,4),s=Ot(e,6),o=Ot(e,8),a=Ot(e,10),c=Ot(e,12),l=Ot(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|i<<3)&8191,this.r[2]=(i>>>10|n<<6)&7939,this.r[3]=(n>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Ot(e,16+2*u)}process(e,r,i=!1){const n=i?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],p=o[5],m=o[6],v=o[7],w=o[8],S=o[9],x=Ot(e,r+0),A=Ot(e,r+2),C=Ot(e,r+4),D=Ot(e,r+6),T=Ot(e,r+8),N=Ot(e,r+10),R=Ot(e,r+12),B=Ot(e,r+14);let M=s[0]+(x&8191),U=s[1]+((x>>>13|A<<3)&8191),$=s[2]+((A>>>10|C<<6)&8191),h=s[3]+((C>>>7|D<<9)&8191),b=s[4]+((D>>>4|T<<12)&8191),_=s[5]+(T>>>1&8191),g=s[6]+((T>>>14|N<<2)&8191),y=s[7]+((N>>>11|R<<5)&8191),I=s[8]+((R>>>8|B<<8)&8191),O=s[9]+(B>>>5|n),E=0,f=E+M*a+U*(5*S)+$*(5*w)+h*(5*v)+b*(5*m);E=f>>>13,f&=8191,f+=_*(5*p)+g*(5*d)+y*(5*u)+I*(5*l)+O*(5*c),E+=f>>>13,f&=8191;let P=E+M*c+U*a+$*(5*S)+h*(5*w)+b*(5*v);E=P>>>13,P&=8191,P+=_*(5*m)+g*(5*p)+y*(5*d)+I*(5*u)+O*(5*l),E+=P>>>13,P&=8191;let F=E+M*l+U*c+$*a+h*(5*S)+b*(5*w);E=F>>>13,F&=8191,F+=_*(5*v)+g*(5*m)+y*(5*p)+I*(5*d)+O*(5*u),E+=F>>>13,F&=8191;let j=E+M*u+U*l+$*c+h*a+b*(5*S);E=j>>>13,j&=8191,j+=_*(5*w)+g*(5*v)+y*(5*m)+I*(5*p)+O*(5*d),E+=j>>>13,j&=8191;let L=E+M*d+U*u+$*l+h*c+b*a;E=L>>>13,L&=8191,L+=_*(5*S)+g*(5*w)+y*(5*v)+I*(5*m)+O*(5*p),E+=L>>>13,L&=8191;let q=E+M*p+U*d+$*u+h*l+b*c;E=q>>>13,q&=8191,q+=_*a+g*(5*S)+y*(5*w)+I*(5*v)+O*(5*m),E+=q>>>13,q&=8191;let K=E+M*m+U*p+$*d+h*u+b*l;E=K>>>13,K&=8191,K+=_*c+g*a+y*(5*S)+I*(5*w)+O*(5*v),E+=K>>>13,K&=8191;let Z=E+M*v+U*m+$*p+h*d+b*u;E=Z>>>13,Z&=8191,Z+=_*l+g*c+y*a+I*(5*S)+O*(5*w),E+=Z>>>13,Z&=8191;let te=E+M*w+U*v+$*m+h*p+b*d;E=te>>>13,te&=8191,te+=_*u+g*l+y*c+I*a+O*(5*S),E+=te>>>13,te&=8191;let G=E+M*S+U*w+$*v+h*m+b*p;E=G>>>13,G&=8191,G+=_*d+g*u+y*l+I*c+O*a,E+=G>>>13,G&=8191,E=(E<<2)+E|0,E=E+f|0,f=E&8191,E=E>>>13,P+=E,s[0]=f,s[1]=P,s[2]=F,s[3]=j,s[4]=L,s[5]=q,s[6]=K,s[7]=Z,s[8]=te,s[9]=G}finalize(){const{h:e,pad:r}=this,i=new Uint16Array(10);let n=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=n,n=e[a]>>>13,e[a]&=8191;e[0]+=n*5,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,i[0]=e[0]+5,n=i[0]>>>13,i[0]&=8191;for(let a=1;a<10;a++)i[a]=e[a]+n,n=i[a]>>>13,i[a]&=8191;i[9]-=8192;let s=(n^1)-1;for(let a=0;a<10;a++)i[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|i[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;Is(i)}update(e){tb(this);const{buffer:r,blockLen:i}=this;e=hh(e);const n=e.length;for(let s=0;s<n;){const o=Math.min(i-this.pos,n-s);if(o===i){for(;i<=n-s;s+=i)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Is(this.h,this.r,this.buffer,this.pad)}digestInto(e){tb(this),Nx(e,this),this.finished=!0;const{buffer:r,h:i}=this;let{pos:n}=this;if(n){for(r[n++]=1;n<16;n++)r[n]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=i[o]>>>0,e[s++]=i[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const i=e.slice(0,r);return this.destroy(),i}}function Yx(t){const e=(i,n)=>t(n).update(hh(i)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=i=>t(i),e}const Jx=Yx(t=>new Zx(t));function Qx(t,e,r,i,n,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],p=e[2],m=e[3],v=e[4],w=e[5],S=e[6],x=e[7],A=n,C=r[0],D=r[1],T=r[2],N=o,R=a,B=c,M=l,U=u,$=d,h=p,b=m,_=v,g=w,y=S,I=x,O=A,E=C,f=D,P=T;for(let j=0;j<s;j+=2)N=N+U|0,O=ce(O^N,16),_=_+O|0,U=ce(U^_,12),N=N+U|0,O=ce(O^N,8),_=_+O|0,U=ce(U^_,7),R=R+$|0,E=ce(E^R,16),g=g+E|0,$=ce($^g,12),R=R+$|0,E=ce(E^R,8),g=g+E|0,$=ce($^g,7),B=B+h|0,f=ce(f^B,16),y=y+f|0,h=ce(h^y,12),B=B+h|0,f=ce(f^B,8),y=y+f|0,h=ce(h^y,7),M=M+b|0,P=ce(P^M,16),I=I+P|0,b=ce(b^I,12),M=M+b|0,P=ce(P^M,8),I=I+P|0,b=ce(b^I,7),N=N+$|0,P=ce(P^N,16),y=y+P|0,$=ce($^y,12),N=N+$|0,P=ce(P^N,8),y=y+P|0,$=ce($^y,7),R=R+h|0,O=ce(O^R,16),I=I+O|0,h=ce(h^I,12),R=R+h|0,O=ce(O^R,8),I=I+O|0,h=ce(h^I,7),B=B+b|0,E=ce(E^B,16),_=_+E|0,b=ce(b^_,12),B=B+b|0,E=ce(E^B,8),_=_+E|0,b=ce(b^_,7),M=M+U|0,f=ce(f^M,16),g=g+f|0,U=ce(U^g,12),M=M+U|0,f=ce(f^M,8),g=g+f|0,U=ce(U^g,7);let F=0;i[F++]=o+N|0,i[F++]=a+R|0,i[F++]=c+B|0,i[F++]=l+M|0,i[F++]=u+U|0,i[F++]=d+$|0,i[F++]=p+h|0,i[F++]=m+b|0,i[F++]=v+_|0,i[F++]=w+g|0,i[F++]=S+y|0,i[F++]=x+I|0,i[F++]=A+O|0,i[F++]=C+E|0,i[F++]=D+f|0,i[F++]=T+P|0}const Xx=Gx(Qx,{counterRight:!1,counterLength:4,allowShortKeys:!1}),e$=new Uint8Array(16),cb=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(e$.subarray(r))},t$=new Uint8Array(32);function lb(t,e,r,i,n){const s=t(e,r,t$),o=Jx.create(s);n&&cb(o,n),cb(o,i);const a=new Uint8Array(16),c=Bx(a);nb(c,0,BigInt(n?n.length:0),!0),nb(c,8,BigInt(i.length),!0),o.update(a);const l=o.digest();return Is(s,a),l}const r$=t=>(e,r,i)=>({encrypt(n,s){const o=n.length;s=ib(o+16,s,!1),s.set(n);const a=s.subarray(0,-16);t(e,r,a,a,1);const c=lb(t,e,r,a,i);return s.set(c,o),Is(c),s},decrypt(n,s){s=ib(n.length-16,s,!1);const o=n.subarray(0,-16),a=n.subarray(-16),c=lb(t,e,r,o,i);if(!Ux(a,c))throw new Error("invalid tag");return s.set(n.subarray(0,-16)),t(e,r,s,s,1),Is(c),s}}),ub=jx({blockSize:64,nonceLength:12,tagLength:16},r$(Xx));class hb extends oh{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,nh(e);const i=$s(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,s=new Uint8Array(n);s.set(i.length>n?e.create().update(i).digest():i);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Es(this),this.iHash.update(e),this}digestInto(e){Es(this),mc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:i,finished:n,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=n,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ph=(t,e,r)=>new hb(t,e).update(r).digest();ph.create=(t,e)=>new hb(t,e);function i$(t,e,r){return nh(t),r===void 0&&(r=new Uint8Array(t.outputLen)),ph(t,$s(r),$s(e))}const gh=new Uint8Array([0]),db=new Uint8Array;function n$(t,e,r,i=32){if(nh(t),To(i),i>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const n=Math.ceil(i/t.outputLen);r===void 0&&(r=db);const s=new Uint8Array(n*t.outputLen),o=ph.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<n;l++)gh[0]=l+1,a.update(l===0?db:c).update(r).update(gh).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),gh.fill(0),s.slice(0,i)}const s$=(t,e,r,i,n)=>n$(t,i$(t,e,r),i,n);function o$(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,l=i?0:4;t.setUint32(e+c,o,i),t.setUint32(e+l,a,i)}function a$(t,e,r){return t&e^~t&r}function c$(t,e,r){return t&e^t&r^e&r}class l$ extends oh{constructor(e,r,i,n){super(),this.blockLen=e,this.outputLen=r,this.padOffset=i,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=sh(this.buffer)}update(e){Es(this);const{view:r,buffer:i,blockLen:n}=this;e=$s(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(n-this.pos,s-o);if(a===n){const c=sh(e);for(;n<=s-o;o+=n)this.process(c,o);continue}i.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Es(this),Bg(e,this),this.finished=!0;const{buffer:r,view:i,blockLen:n,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(i,0),o=0);for(let d=o;d<n;d++)r[d]=0;o$(i,n-8,BigInt(this.length*8),s),this.process(i,0);const a=sh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:i,length:n,finished:s,destroyed:o,pos:a}=this;return e.length=n,e.pos=a,e.finished=s,e.destroyed=o,n%r&&e.buffer.set(i),e}}const u$=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Hi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Wi=new Uint32Array(64);class h$ extends l${constructor(){super(64,32,8,!1),this.A=Hi[0]|0,this.B=Hi[1]|0,this.C=Hi[2]|0,this.D=Hi[3]|0,this.E=Hi[4]|0,this.F=Hi[5]|0,this.G=Hi[6]|0,this.H=Hi[7]|0}get(){const{A:e,B:r,C:i,D:n,E:s,F:o,G:a,H:c}=this;return[e,r,i,n,s,o,a,c]}set(e,r,i,n,s,o,a,c){this.A=e|0,this.B=r|0,this.C=i|0,this.D=n|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)Wi[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const p=Wi[d-15],m=Wi[d-2],v=Gr(p,7)^Gr(p,18)^p>>>3,w=Gr(m,17)^Gr(m,19)^m>>>10;Wi[d]=w+Wi[d-7]+v+Wi[d-16]|0}let{A:i,B:n,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const p=Gr(a,6)^Gr(a,11)^Gr(a,25),m=u+p+a$(a,c,l)+u$[d]+Wi[d]|0,v=(Gr(i,2)^Gr(i,13)^Gr(i,22))+c$(i,n,s)|0;u=l,l=c,c=a,a=o+m|0,o=s,s=n,n=i,i=m+v|0}i=i+this.A|0,n=n+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(i,n,s,o,a,c,l,u)}roundClean(){Wi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ec=jg(()=>new h$);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fb=BigInt(0);function bh(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function pb(t){if(!bh(t))throw new Error("Uint8Array expected")}const d$=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function f$(t){pb(t);let e="";for(let r=0;r<t.length;r++)e+=d$[t[r]];return e}function p$(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?fb:BigInt("0x"+t)}const yi={_0:48,_9:57,A:65,F:70,a:97,f:102};function gb(t){if(t>=yi._0&&t<=yi._9)return t-yi._0;if(t>=yi.A&&t<=yi.F)return t-(yi.A-10);if(t>=yi.a&&t<=yi.f)return t-(yi.a-10)}function bb(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(r);for(let n=0,s=0;n<r;n++,s+=2){const o=gb(t.charCodeAt(s)),a=gb(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}i[n]=o*16+a}return i}function mb(t){return pb(t),p$(f$(Uint8Array.from(t).reverse()))}function g$(t,e){return bb(t.toString(16).padStart(e*2,"0"))}function b$(t,e){return g$(t,e).reverse()}function vb(t,e,r){let i;if(typeof e=="string")try{i=bb(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(bh(e))i=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const n=i.length;if(typeof r=="number"&&n!==r)throw new Error(t+" of length "+r+" expected, got "+n);return i}const mh=t=>typeof t=="bigint"&&fb<=t;function m$(t,e,r){return mh(t)&&mh(e)&&mh(r)&&e<=t&&t<r}function yb(t,e,r,i){if(!m$(e,r,i))throw new Error("expected valid "+t+": "+r+" <= n < "+i+", got "+e)}const v$={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||bh(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function y$(t,e,r={}){const i=(n,s,o)=>{const a=v$[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[n];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(n)+" is invalid. Expected "+s+", got "+c)};for(const[n,s]of Object.entries(e))i(n,s,!1);for(const[n,s]of Object.entries(r))i(n,s,!0);return t}const Ss=BigInt(0),xc=BigInt(1);function wb(t,e){const r=t%e;return r>=Ss?r:e+r}function w$(t,e,r){if(e<Ss)throw new Error("invalid exponent, negatives unsupported");if(r<=Ss)throw new Error("invalid modulus");if(r===xc)return Ss;let i=xc;for(;e>Ss;)e&xc&&(i=i*t%r),t=t*t%r,e>>=xc;return i}function Cr(t,e,r){let i=t;for(;e-- >Ss;)i*=i,i%=r;return i}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const As=BigInt(0),vh=BigInt(1);function _$(t){return y$(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze(IE({},t))}function E$(t){const e=_$(t),{P:r}=e,i=A=>wb(A,r),n=e.montgomeryBits,s=Math.ceil(n/8),o=e.nByteLength,a=e.adjustScalarBytes||(A=>A),c=e.powPminus2||(A=>w$(A,r-BigInt(2),r));function l(A,C,D){const T=i(A*(C-D));return C=i(C-T),D=i(D+T),[C,D]}const u=(e.a-BigInt(2))/BigInt(4);function d(A,C){yb("u",A,As,r),yb("scalar",C,As,r);const D=C,T=A;let N=vh,R=As,B=A,M=vh,U=As,$;for(let b=BigInt(n-1);b>=As;b--){const _=D>>b&vh;U^=_,$=l(U,N,B),N=$[0],B=$[1],$=l(U,R,M),R=$[0],M=$[1],U=_;const g=N+R,y=i(g*g),I=N-R,O=i(I*I),E=y-O,f=B+M,P=B-M,F=i(P*g),j=i(f*I),L=F+j,q=F-j;B=i(L*L),M=i(T*i(q*q)),N=i(y*O),R=i(E*(y+i(u*E)))}$=l(U,N,B),N=$[0],B=$[1],$=l(U,R,M),R=$[0],M=$[1];const h=c(R);return i(N*h)}function p(A){return b$(i(A),s)}function m(A){const C=vb("u coordinate",A,s);return o===32&&(C[31]&=127),mb(C)}function v(A){const C=vb("scalar",A),D=C.length;if(D!==s&&D!==o){let T=""+s+" or "+o;throw new Error("invalid scalar, expected "+T+" bytes, got "+D)}return mb(a(C))}function w(A,C){const D=m(C),T=v(A),N=d(D,T);if(N===As)throw new Error("invalid private or public key received");return p(N)}const S=p(e.Gu);function x(A){return w(A,S)}return{scalarMult:w,scalarMultBase:x,getSharedSecret:(A,C)=>w(A,C),getPublicKey:A=>x(A),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:S}}const yh=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const x$=BigInt(1),_b=BigInt(2),$$=BigInt(3),I$=BigInt(5);BigInt(8);function S$(t){const e=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=yh,o=t*t%s*t%s,a=Cr(o,_b,s)*o%s,c=Cr(a,x$,s)*t%s,l=Cr(c,I$,s)*c%s,u=Cr(l,e,s)*l%s,d=Cr(u,r,s)*u%s,p=Cr(d,i,s)*d%s,m=Cr(p,n,s)*p%s,v=Cr(m,n,s)*p%s,w=Cr(v,e,s)*l%s;return{pow_p_5_8:Cr(w,_b,s)*t%s,b2:o}}function A$(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const wh=E$({P:yh,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=yh,{pow_p_5_8:r,b2:i}=S$(t);return wb(Cr(r,$$,e)*i,e)},adjustScalarBytes:A$,randomBytes:Ro}),Eb="base10",Bt="base16",Vi="base64pad",Lo="base64url",Fo="utf8",xb=0,wi=1,Uo=2,P$=0,$b=1,jo=12,_h=32;function O$(){const t=wh.utils.randomPrivateKey(),e=wh.getPublicKey(t);return{privateKey:qt(t,Bt),publicKey:qt(e,Bt)}}function Eh(){const t=Ro(_h);return qt(t,Bt)}function C$(t,e){const r=wh.getSharedSecret(fr(t,Bt),fr(e,Bt)),i=s$(Ec,r,void 0,void 0,_h);return qt(i,Bt)}function $c(t){const e=Ec(fr(t,Bt));return qt(e,Bt)}function Zr(t){const e=Ec(fr(t,Fo));return qt(e,Bt)}function Ib(t){return fr(`${t}`,Eb)}function $n(t){return Number(qt(t,Eb))}function D$(t){const e=Ib(typeof t.type<"u"?t.type:xb);if($n(e)===wi&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?fr(t.senderPublicKey,Bt):void 0,i=typeof t.iv<"u"?fr(t.iv,Bt):Ro(jo),n=fr(t.symKey,Bt),s=ub(n,i).encrypt(fr(t.message,Fo));return Sb({type:e,sealed:s,iv:i,senderPublicKey:r,encoding:t.encoding})}function M$(t){const e=fr(t.symKey,Bt),{sealed:r,iv:i}=ko(t),n=ub(e,i).decrypt(r);if(n===null)throw new Error("Failed to decrypt");return qt(n,Fo)}function T$(t,e){const r=Ib(Uo),i=Ro(jo),n=fr(t,Fo);return Sb({type:r,sealed:n,iv:i,encoding:e})}function R$(t,e){const{sealed:r}=ko({encoded:t,encoding:e});return qt(r,Fo)}function Sb(t){const{encoding:e=Vi}=t;if($n(t.type)===Uo)return qt(Nu([t.type,t.sealed]),e);if($n(t.type)===wi){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return qt(Nu([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return qt(Nu([t.type,t.iv,t.sealed]),e)}function ko(t){const{encoded:e,encoding:r=Vi}=t,i=fr(e,r),n=i.slice(P$,$b),s=$b;if($n(n)===wi){const l=s+_h,u=l+jo,d=i.slice(s,l),p=i.slice(l,u),m=i.slice(u);return{type:n,sealed:m,iv:p,senderPublicKey:d}}if($n(n)===Uo){const l=i.slice(s),u=Ro(jo);return{type:n,sealed:l,iv:u}}const o=s+jo,a=i.slice(s,o),c=i.slice(o);return{type:n,sealed:c,iv:a}}function N$(t,e){const r=ko({encoded:t,encoding:e?.encoding});return Ab({type:$n(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?qt(r.senderPublicKey,Bt):void 0,receiverPublicKey:e?.receiverPublicKey})}function Ab(t){const e=t?.type||xb;if(e===wi){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function Pb(t){return t.type===wi&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function Ob(t){return t.type===Uo}function B$(t){return new k1.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function L$(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function F$(t){return Buffer.from(L$(t),"base64")}function U$(t,e){const[r,i,n]=t.split("."),s=F$(n);if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),c=`${r}.${i}`,l=Ec(c),u=B$(e),d=qt(l,Bt);if(!u.verify(d,{r:o,s:a}))throw new Error("Invalid signature");return Ru(t).payload}const j$="irn";function Ic(t){return t?.relay||{protocol:j$}}function qo(t){const e=_E[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function k$(t,e="-"){const r={},i="relay"+e;return Object.keys(t).forEach(n=>{if(n.startsWith(i)){const s=n.replace(i,""),o=t[n];r[s]=o}}),r}function Cb(t){if(!t.includes("wc:")){const l=Ng(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,i=t.substring(0,e),n=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:i,topic:q$(n[0]),version:parseInt(n[1],10),symKey:a.symKey,relay:k$(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function q$(t){return t.startsWith("//")?t.substring(2):t}function z$(t,e="-"){const r="relay",i={};return Object.keys(t).forEach(n=>{const s=n,o=r+e+s;t[s]&&(i[o]=t[s])}),i}function Db(t){const e=new URLSearchParams,r=z$(t.relay);Object.keys(r).sort().forEach(n=>{e.set(n,r[n])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const i=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${i}`}function Sc(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function Ps(t){const e=[];return t.forEach(r=>{const[i,n]=r.split(":");e.push(`${i}:${n}`)}),e}function H$(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Ps(r.accounts))}),e}function W$(t,e){const r=[];return Object.values(t).forEach(i=>{Ps(i.accounts).includes(e)&&r.push(...i.methods)}),r}function V$(t,e){const r=[];return Object.values(t).forEach(i=>{Ps(i.accounts).includes(e)&&r.push(...i.events)}),r}function xh(t){return t.includes(":")}function zo(t){return xh(t)?t.split(":")[0]:t}function K$(t){const e={};return t?.forEach(r=>{var i;const[n,s]=r.split(":");e[n]||(e[n]={accounts:[],chains:[],events:[],methods:[]}),e[n].accounts.push(r),(i=e[n].chains)==null||i.push(`${n}:${s}`)}),e}function Mb(t,e){e=e.map(i=>i.replace("did:pkh:",""));const r=K$(e);for(const[i,n]of Object.entries(r))n.methods?n.methods=bc(n.methods,t):n.methods=t,n.events=["chainChanged","accountsChanged"];return r}const G$={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Z$={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function H(t,e){const{message:r,code:i}=Z$[t];return{message:e?`${r} ${e}`:r,code:i}}function ge(t,e){const{message:r,code:i}=G$[t];return{message:e?`${r} ${e}`:r,code:i}}function Yr(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Ho(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ct(t){return typeof t>"u"}function ke(t,e){return e&&Ct(t)?!0:typeof t=="string"&&!!t.trim().length}function $h(t,e){return e&&Ct(t)?!0:typeof t=="number"&&!isNaN(t)}function Y$(t,e){const{requiredNamespaces:r}=e,i=Object.keys(t.namespaces),n=Object.keys(r);let s=!0;return _n(n,i)?(i.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Ps(a),d=r[o];(!_n(Ag(o,d),u)||!_n(d.methods,c)||!_n(d.events,l))&&(s=!1)}),s):!1}function Ac(t){return ke(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function J$(t){if(ke(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Ac(r)}}return!1}function Q$(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(ke(t,!1)){if(e(t))return!0;const r=Ng(t);return e(r)}}catch{}return!1}function X$(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function eI(t){return t?.topic}function tI(t,e){let r=null;return ke(t?.publicKey,!1)||(r=H("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function Tb(t){let e=!0;return Yr(t)?t.length&&(e=t.every(r=>ke(r,!1))):e=!1,e}function rI(t,e,r){let i=null;return Yr(e)&&e.length?e.forEach(n=>{i||Ac(n)||(i=ge("UNSUPPORTED_CHAINS",`${r}, chain ${n} should be a string and conform to "namespace:chainId" format`))}):Ac(t)||(i=ge("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function iI(t,e,r){let i=null;return Object.entries(t).forEach(([n,s])=>{if(i)return;const o=rI(n,Ag(n,s),`${e} ${r}`);o&&(i=o)}),i}function nI(t,e){let r=null;return Yr(t)?t.forEach(i=>{r||J$(i)||(r=ge("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):r=ge("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function sI(t,e){let r=null;return Object.values(t).forEach(i=>{if(r)return;const n=nI(i?.accounts,`${e} namespace`);n&&(r=n)}),r}function oI(t,e){let r=null;return Tb(t?.methods)?Tb(t?.events)||(r=ge("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=ge("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Rb(t,e){let r=null;return Object.values(t).forEach(i=>{if(r)return;const n=oI(i,`${e}, namespace`);n&&(r=n)}),r}function aI(t,e,r){let i=null;if(t&&Ho(t)){const n=Rb(t,e);n&&(i=n);const s=iI(t,e,r);s&&(i=s)}else i=H("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return i}function Ih(t,e){let r=null;if(t&&Ho(t)){const i=Rb(t,e);i&&(r=i);const n=sI(t,e);n&&(r=n)}else r=H("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function Nb(t){return ke(t.protocol,!0)}function cI(t,e){let r=!1;return e&&!t?r=!0:t&&Yr(t)&&t.length&&t.forEach(i=>{r=Nb(i)}),r}function lI(t){return typeof t=="number"}function Yt(t){return typeof t<"u"&&typeof t!==null}function uI(t){return!(!t||typeof t!="object"||!t.code||!$h(t.code,!1)||!t.message||!ke(t.message,!1))}function hI(t){return!(Ct(t)||!ke(t.method,!1))}function dI(t){return!(Ct(t)||Ct(t.result)&&Ct(t.error)||!$h(t.id,!1)||!ke(t.jsonrpc,!1))}function fI(t){return!(Ct(t)||!ke(t.name,!1))}function Bb(t,e){return!(!Ac(e)||!H$(t).includes(e))}function pI(t,e,r){return ke(r,!1)?W$(t,e).includes(r):!1}function gI(t,e,r){return ke(r,!1)?V$(t,e).includes(r):!1}function Lb(t,e,r){let i=null;const n=bI(t),s=mI(e),o=Object.keys(n),a=Object.keys(s),c=Fb(Object.keys(t)),l=Fb(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(i=H("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),_n(o,a)||(i=H("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||i)return;const p=Ps(e[d].accounts);p.includes(d)||(i=H("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${p.toString()}`))}),o.forEach(d=>{i||(_n(n[d].methods,s[d].methods)?_n(n[d].events,s[d].events)||(i=H("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${d}`)):i=H("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${d}`))}),i}function bI(t){const e={};return Object.keys(t).forEach(r=>{var i;r.includes(":")?e[r]=t[r]:(i=t[r].chains)==null||i.forEach(n=>{e[n]={methods:t[r].methods,events:t[r].events}})}),e}function Fb(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function mI(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const i=Ps(t[r].accounts);i?.forEach(n=>{e[n]={accounts:t[r].accounts.filter(s=>s.includes(`${n}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function vI(t,e){return $h(t,!1)&&t<=e.max&&t>=e.min}function Ub(){const t=Mo();return new Promise(e=>{switch(t){case nr.browser:e(yI());break;case nr.reactNative:e(wI());break;case nr.node:e(_I());break;default:e(!0)}})}function yI(){return Do()&&navigator?.onLine}async function wI(){if(ji()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t?.isConnected}return!0}function _I(){return!0}function EI(t){switch(Mo()){case nr.browser:xI(t);break;case nr.reactNative:$I(t);break}}function xI(t){!ji()&&Do()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function $I(t){ji()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}const Sh={};class Wo{static get(e){return Sh[e]}static set(e,r){Sh[e]=r}static delete(e){delete Sh[e]}}class In{}class II extends In{constructor(e){super()}}const jb=z.FIVE_SECONDS,Os={pulse:"heartbeat_pulse"};class Ah extends II{constructor(e){super(e),this.events=new It.exports.EventEmitter,this.interval=jb,this.interval=e?.interval||jb}static async init(e){const r=new Ah(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),z.toMiliseconds(this.interval))}pulse(){this.events.emit(Os.pulse)}}const SI=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,AI=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,PI=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function OI(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){CI(t);return}return e}function CI(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Pc(t,e={}){if(typeof t!="string")return t;const r=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!PI.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(SI.test(t)||AI.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,OI)}return JSON.parse(t)}catch(i){if(e.strict)throw i;return t}}function DI(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function wt(t,...e){try{return DI(t(...e))}catch(r){return Promise.reject(r)}}function MI(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function TI(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Oc(t){if(MI(t))return String(t);if(TI(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Oc(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Ph="base64:";function RI(t){return typeof t=="string"?t:Ph+LI(t)}function NI(t){return typeof t!="string"||!t.startsWith(Ph)?t:BI(t.slice(Ph.length))}function BI(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function LI(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Jt(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function FI(...t){return Jt(t.join(":"))}function Cc(t){return t=Jt(t),t?t+":":""}function CF(t){return t}const UI="memory",jI=()=>{const t=new Map;return{name:UI,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function kI(t={}){const e={mounts:{"":t.driver||jI()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},i=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),n=(l,u)=>{if(e.watching){u=Jt(u);for(const d of e.watchListeners)d(l,u)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await kb(e.mounts[l],n,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const p=new Map,m=v=>{let w=p.get(v.base);return w||(w={driver:v.driver,base:v.base,items:[]},p.set(v.base,w)),w};for(const v of l){const w=typeof v=="string",S=Jt(w?v:v.key),x=w?void 0:v.value,A=w||!v.options?u:{...u,...v.options},C=r(S);m(C).items.push({key:S,value:x,relativeKey:C.relativeKey,options:A})}return Promise.all([...p.values()].map(v=>d(v))).then(v=>v.flat())},c={hasItem(l,u={}){l=Jt(l);const{relativeKey:d,driver:p}=r(l);return wt(p.hasItem,d,u)},getItem(l,u={}){l=Jt(l);const{relativeKey:d,driver:p}=r(l);return wt(p.getItem,d,u).then(m=>Pc(m))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?wt(d.driver.getItems,d.items.map(p=>({key:p.relativeKey,options:p.options})),u).then(p=>p.map(m=>({key:FI(d.base,m.key),value:Pc(m.value)}))):Promise.all(d.items.map(p=>wt(d.driver.getItem,p.relativeKey,p.options).then(m=>({key:p.key,value:Pc(m)})))))},getItemRaw(l,u={}){l=Jt(l);const{relativeKey:d,driver:p}=r(l);return p.getItemRaw?wt(p.getItemRaw,d,u):wt(p.getItem,d,u).then(m=>NI(m))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Jt(l);const{relativeKey:p,driver:m}=r(l);m.setItem&&(await wt(m.setItem,p,Oc(u),d),m.watch||n("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return wt(d.driver.setItems,d.items.map(p=>({key:p.relativeKey,value:Oc(p.value),options:p.options})),u);d.driver.setItem&&await Promise.all(d.items.map(p=>wt(d.driver.setItem,p.relativeKey,Oc(p.value),p.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Jt(l);const{relativeKey:p,driver:m}=r(l);if(m.setItemRaw)await wt(m.setItemRaw,p,u,d);else if(m.setItem)await wt(m.setItem,p,RI(u),d);else return;m.watch||n("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Jt(l);const{relativeKey:d,driver:p}=r(l);p.removeItem&&(await wt(p.removeItem,d,u),(u.removeMeta||u.removeMata)&&await wt(p.removeItem,d+"$",u),p.watch||n("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Jt(l);const{relativeKey:d,driver:p}=r(l),m=Object.create(null);if(p.getMeta&&Object.assign(m,await wt(p.getMeta,d,u)),!u.nativeOnly){const v=await wt(p.getItem,d+"$",u).then(w=>Pc(w));v&&typeof v=="object"&&(typeof v.atime=="string"&&(v.atime=new Date(v.atime)),typeof v.mtime=="string"&&(v.mtime=new Date(v.mtime)),Object.assign(m,v))}return m},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){l=Cc(l);const d=i(l,!0);let p=[];const m=[];for(const v of d){const w=await wt(v.driver.getKeys,v.relativeBase,u);for(const S of w){const x=v.mountpoint+Jt(S);p.some(A=>x.startsWith(A))||m.push(x)}p=[v.mountpoint,...p.filter(S=>!S.startsWith(v.mountpoint))]}return l?m.filter(v=>v.startsWith(l)&&v[v.length-1]!=="$"):m.filter(v=>v[v.length-1]!=="$")},async clear(l,u={}){l=Cc(l),await Promise.all(i(l,!1).map(async d=>{if(d.driver.clear)return wt(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const p=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(p.map(m=>d.driver.removeItem(m,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>qb(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=Cc(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,p)=>p.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(kb(u,n,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){l=Cc(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l]?.(),delete e.unwatch[l]),u&&await qb(e.mounts[l]),e.mountpoints=e.mountpoints.filter(d=>d!==l),delete e.mounts[l])},getMount(l=""){l=Jt(l)+":";const u=r(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Jt(l),i(l,u.parents).map(p=>({driver:p.driver,base:p.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function kb(t,e,r){return t.watch?t.watch((i,n)=>e(i,r+n)):()=>{}}async function qb(t){typeof t.dispose=="function"&&await wt(t.dispose)}function Sn(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function zb(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const i=Sn(r);return(n,s)=>i.then(o=>s(o.transaction(e,n).objectStore(e)))}let Oh;function Vo(){return Oh||(Oh=zb("keyval-store","keyval")),Oh}function Hb(t,e=Vo()){return e("readonly",r=>Sn(r.get(t)))}function qI(t,e,r=Vo()){return r("readwrite",i=>(i.put(e,t),Sn(i.transaction)))}function zI(t,e=Vo()){return e("readwrite",r=>(r.delete(t),Sn(r.transaction)))}function HI(t=Vo()){return t("readwrite",e=>(e.clear(),Sn(e.transaction)))}function WI(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Sn(t.transaction)}function VI(t=Vo()){return t("readonly",e=>{if(e.getAllKeys)return Sn(e.getAllKeys());const r=[];return WI(e,i=>r.push(i.key)).then(()=>r)})}const KI="idb-keyval";var GI=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=n=>e+n;let i;return t.dbName&&t.storeName&&(i=zb(t.dbName,t.storeName)),{name:KI,options:t,async hasItem(n){return!(typeof await Hb(r(n),i)>"u")},async getItem(n){return await Hb(r(n),i)??null},setItem(n,s){return qI(r(n),s,i)},removeItem(n){return zI(r(n),i)},getKeys(){return VI(i)},clear(){return HI(i)}}};const ZI="WALLET_CONNECT_V2_INDEXED_DB",YI="keyvaluestorage";class JI{constructor(){this.indexedDb=kI({driver:GI({dbName:ZI,storeName:YI})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,fi(r))}async removeItem(e){await this.indexedDb.removeItem(e)}}var Ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dc={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,i){this[r]=String(i)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(i){r[i]=void 0,delete r[i]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Ch<"u"&&Ch.localStorage?Dc.exports=Ch.localStorage:typeof window<"u"&&window.localStorage?Dc.exports=window.localStorage:Dc.exports=new e})();function QI(t){var e;return[t[0],fn((e=t[1])!=null?e:"")]}class XI{constructor(){this.localStorage=Dc.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(QI)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return fn(r)}async setItem(e,r){this.localStorage.setItem(e,fi(r))}async removeItem(e){this.localStorage.removeItem(e)}}const eS="wc_storage_version",Wb=1,tS=async(t,e,r)=>{const i=eS,n=await e.getItem(i);if(n&&n>=Wb){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(i,Wb),r(e),rS(t,o)},rS=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};class iS{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new XI;this.storage=e;try{const r=new JI;tS(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}}function nS(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var sS=oS;function oS(t,e,r){var i=r&&r.stringify||nS,n=1;if(typeof t=="object"&&t!==null){var s=e.length+n;if(s===1)return t;var o=new Array(s);o[0]=i(t);for(var a=1;a<s;a++)o[a]=i(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-n,d=-1,p=t&&t.length||0,m=0;m<p;){if(t.charCodeAt(m)===37&&m+1<p){switch(d=d>-1?d:0,t.charCodeAt(m+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<m&&(l+=t.slice(d,m)),l+=Number(e[u]),d=m+2,m++;break;case 105:if(u>=c||e[u]==null)break;d<m&&(l+=t.slice(d,m)),l+=Math.floor(Number(e[u])),d=m+2,m++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<m&&(l+=t.slice(d,m));var v=typeof e[u];if(v==="string"){l+="'"+e[u]+"'",d=m+2,m++;break}if(v==="function"){l+=e[u].name||"<anonymous>",d=m+2,m++;break}l+=i(e[u]),d=m+2,m++;break;case 115:if(u>=c)break;d<m&&(l+=t.slice(d,m)),l+=String(e[u]),d=m+2,m++;break;case 37:d<m&&(l+=t.slice(d,m)),l+="%",d=m+2,m++,u--;break}++u}++m}return d===-1?t:(d<p&&(l+=t.slice(d)),l)}const Vb=sS;var Jr=Qr;const Ko=bS().console||{},aS={mapHttpRequest:Tc,mapHttpResponse:Tc,wrapRequestSerializer:Mh,wrapResponseSerializer:Mh,wrapErrorSerializer:Mh,req:Tc,res:Tc,err:dS};function cS(t,e){return Array.isArray(t)?t.filter(function(i){return i!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Qr(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||Ko;t.browser.write&&(t.browser.asObject=!0);const i=t.serializers||{},n=cS(t.browser.serialize,i);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(r);c.log||(c.log=Go),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:p});const l={transmit:e,serialize:n,asObject:t.browser.asObject,levels:o,timestamp:fS(t)};c.levels=Qr.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Go,c.serializers=i,c._serialize=n,c._stdErrSerialize=s,c.child=m,e&&(c._logEvent=Dh());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function p(v){if(v!=="silent"&&!this.levels.values[v])throw Error("unknown level "+v);this._level=v,Cs(l,c,"error","log"),Cs(l,c,"fatal","error"),Cs(l,c,"warn","error"),Cs(l,c,"info","log"),Cs(l,c,"debug","log"),Cs(l,c,"trace","log")}function m(v,w){if(!v)throw new Error("missing bindings for child Pino");w=w||{},n&&v.serializers&&(w.serializers=v.serializers);const S=w.serializers;if(n&&S){var x=Object.assign({},i,S),A=t.browser.serialize===!0?Object.keys(x):n;delete v.serializers,Mc([v],A,x,this._stdErrSerialize)}function C(D){this._childLevel=(D._childLevel|0)+1,this.error=Ds(D,v,"error"),this.fatal=Ds(D,v,"fatal"),this.warn=Ds(D,v,"warn"),this.info=Ds(D,v,"info"),this.debug=Ds(D,v,"debug"),this.trace=Ds(D,v,"trace"),x&&(this.serializers=x,this._serialize=A),e&&(this._logEvent=Dh([].concat(D._logEvent.bindings,v)))}return C.prototype=this,new C(this)}return c}Qr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},Qr.stdSerializers=aS,Qr.stdTimeFunctions=Object.assign({},{nullTime:Kb,epochTime:Gb,unixTime:pS,isoTime:gS});function Cs(t,e,r,i){const n=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?Go:n[r]?n[r]:Ko[r]||Ko[i]||Go,lS(t,e,r)}function lS(t,e,r){!t.transmit&&e[r]===Go||(e[r]=function(i){return function(){const s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Ko?Ko:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&Mc(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?i.call(a,uS(this,r,o,s)):i.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Qr.levels.values[l],d=Qr.levels.values[r];if(d<u)return;hS(this,{ts:s,methodLevel:r,methodValue:d,transmitLevel:l,transmitValue:Qr.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[r]))}function uS(t,e,r,i){t._serialize&&Mc(r,t._serialize,t.serializers,t._stdErrSerialize);const n=r.slice();let s=n[0];const o={};i&&(o.time=i),o.level=Qr.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof n[0]=="object";)Object.assign(o,n.shift());s=n.length?Vb(n.shift(),n):void 0}else typeof s=="string"&&(s=Vb(n.shift(),n));return s!==void 0&&(o.msg=s),o}function Mc(t,e,r,i){for(const n in t)if(i&&t[n]instanceof Error)t[n]=Qr.stdSerializers.err(t[n]);else if(typeof t[n]=="object"&&!Array.isArray(t[n]))for(const s in t[n])e&&e.indexOf(s)>-1&&s in r&&(t[n][s]=r[s](t[n][s]))}function Ds(t,e,r){return function(){const i=new Array(1+arguments.length);i[0]=e;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return t[r].apply(this,i)}}function hS(t,e,r){const i=e.send,n=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;Mc(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=n,t._logEvent.messages=r.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,i(s,t._logEvent,a),t._logEvent=Dh(c)}function Dh(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function dS(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function fS(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Kb:Gb}function Tc(){return{}}function Mh(t){return t}function Go(){}function Kb(){return!1}function Gb(){return Date.now()}function pS(){return Math.round(Date.now()/1e3)}function gS(){return new Date(Date.now()).toISOString()}function bS(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const mS={level:"info"},Zo="custom_context",Th=1e3*1024;class vS{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class Zb{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new vS(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}}class Yb{constructor(e,r=Th){this.level=e??"error",this.levelValue=Jr.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new Zb(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===Jr.levels.values.error?console.error(e):r===Jr.levels.values.warn?console.warn(e):r===Jr.levels.values.debug?console.debug(e):r===Jr.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(fi({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new Zb(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(fi({extraMetadata:e})),new Blob(r,{type:"application/json"})}}class yS{constructor(e,r=Th){this.baseChunkLogger=new Yb(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),i=document.createElement("a");i.href=r,i.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}}class wS{constructor(e,r=Th){this.baseChunkLogger=new Yb(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var _S=Object.defineProperty,ES=Object.defineProperties,xS=Object.getOwnPropertyDescriptors,Jb=Object.getOwnPropertySymbols,$S=Object.prototype.hasOwnProperty,IS=Object.prototype.propertyIsEnumerable,Qb=(t,e,r)=>e in t?_S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Rc=(t,e)=>{for(var r in e||(e={}))$S.call(e,r)&&Qb(t,r,e[r]);if(Jb)for(var r of Jb(e))IS.call(e,r)&&Qb(t,r,e[r]);return t},Nc=(t,e)=>ES(t,xS(e));function Bc(t){return Nc(Rc({},t),{level:t?.level||mS.level})}function SS(t,e=Zo){return t[e]||""}function AS(t,e,r=Zo){return t[r]=e,t}function Qt(t,e=Zo){let r="";return typeof t.bindings>"u"?r=SS(t,e):r=t.bindings().context||"",r}function PS(t,e,r=Zo){const i=Qt(t,r);return i.trim()?`${i}/${e}`:e}function zt(t,e,r=Zo){const i=PS(t,e,r),n=t.child({context:i});return AS(n,i,r)}function OS(t){var e,r;const i=new yS((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Jr(Nc(Rc({},t.opts),{level:"trace",browser:Nc(Rc({},(r=t.opts)==null?void 0:r.browser),{write:n=>i.write(n)})})),chunkLoggerController:i}}function CS(t){var e;const r=new wS((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Jr(Nc(Rc({},t.opts),{level:"trace"})),chunkLoggerController:r}}function DS(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?OS(t):CS(t)}var MS=Object.defineProperty,TS=(t,e,r)=>e in t?MS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xb=(t,e,r)=>TS(t,typeof e!="symbol"?e+"":e,r);class RS extends In{constructor(e){super(),this.opts=e,Xb(this,"protocol","wc"),Xb(this,"version",2)}}var NS=Object.defineProperty,BS=(t,e,r)=>e in t?NS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,LS=(t,e,r)=>BS(t,typeof e!="symbol"?e+"":e,r);class FS extends In{constructor(e,r){super(),this.core=e,this.logger=r,LS(this,"records",new Map)}}class US{constructor(e,r){this.logger=e,this.core=r}}class jS extends In{constructor(e,r){super(),this.relayer=e,this.logger=r}}class kS extends In{constructor(e){super()}}class qS{constructor(e,r,i,n){this.core=e,this.logger=r,this.name=i}}class zS extends In{constructor(e,r){super(),this.relayer=e,this.logger=r}}class HS extends In{constructor(e,r){super(),this.core=e,this.logger=r}}class WS{constructor(e,r,i){this.core=e,this.logger=r,this.store=i}}class VS{constructor(e,r){this.projectId=e,this.logger=r}}class KS{constructor(e,r,i){this.core=e,this.logger=r,this.telemetryEnabled=i}}var GS=Object.defineProperty,ZS=(t,e,r)=>e in t?GS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,em=(t,e,r)=>ZS(t,typeof e!="symbol"?e+"":e,r);class YS{constructor(e){this.opts=e,em(this,"protocol","wc"),em(this,"version",2)}}class JS{constructor(e){this.client=e}}const QS="PARSE_ERROR",XS="INVALID_REQUEST",eA="METHOD_NOT_FOUND",tA="INVALID_PARAMS",tm="INTERNAL_ERROR",Rh="SERVER_ERROR",rA=[-32700,-32600,-32601,-32602,-32603],Yo={[QS]:{code:-32700,message:"Parse error"},[XS]:{code:-32600,message:"Invalid Request"},[eA]:{code:-32601,message:"Method not found"},[tA]:{code:-32602,message:"Invalid params"},[tm]:{code:-32603,message:"Internal error"},[Rh]:{code:-32e3,message:"Server error"}},rm=Rh;function iA(t){return rA.includes(t)}function im(t){return Object.keys(Yo).includes(t)?Yo[t]:Yo[rm]}function nA(t){const e=Object.values(Yo).find(r=>r.code===t);return e||Yo[rm]}function nm(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var sm={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Nh=function(t,e){return Nh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Nh(t,e)};function sA(t,e){Nh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Bh=function(){return Bh=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Bh.apply(this,arguments)};function oA(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function aA(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}function cA(t,e){return function(r,i){e(r,i,t)}}function lA(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function uA(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):n(u.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}function hA(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=l[0]&2?n.return:l[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,l[1])).done)return s;switch(n=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],n=0}finally{i=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function dA(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}function fA(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Lh(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function om(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,s=[],o;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function pA(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(om(arguments[e]));return t}function gA(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function Jo(t){return this instanceof Jo?(this.v=t,this):new Jo(t)}function bA(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),n,s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(p){i[p]&&(n[p]=function(m){return new Promise(function(v,w){s.push([p,m,v,w])>1||a(p,m)})})}function a(p,m){try{c(i[p](m))}catch(v){d(s[0][3],v)}}function c(p){p.value instanceof Jo?Promise.resolve(p.value.v).then(l,u):d(s[0][2],p)}function l(p){a("next",p)}function u(p){a("throw",p)}function d(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function mA(t){var e,r;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=t[n]?function(o){return(r=!r)?{value:Jo(t[n](o)),done:n==="return"}:s?s(o):o}:s}}function vA(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Lh=="function"?Lh(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),n(a,c,o.done,o.value)})}}function n(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function yA(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function wA(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function _A(t){return t&&t.__esModule?t:{default:t}}function EA(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function xA(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var $A=Object.freeze({__proto__:null,__extends:sA,get __assign(){return Bh},__rest:oA,__decorate:aA,__param:cA,__metadata:lA,__awaiter:uA,__generator:hA,__createBinding:dA,__exportStar:fA,__values:Lh,__read:om,__spread:pA,__spreadArrays:gA,__await:Jo,__asyncGenerator:bA,__asyncDelegator:mA,__asyncValues:vA,__makeTemplateObject:yA,__importStar:wA,__importDefault:_A,__classPrivateFieldGet:EA,__classPrivateFieldSet:xA}),IA=Pl($A),_i={},am;function SA(){if(am)return _i;am=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.isBrowserCryptoAvailable=_i.getSubtleCrypto=_i.getBrowerCrypto=void 0;function t(){return jt?.crypto||jt?.msCrypto||{}}_i.getBrowerCrypto=t;function e(){const i=t();return i.subtle||i.webkitSubtle}_i.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return _i.isBrowserCryptoAvailable=r,_i}var Ei={},cm;function AA(){if(cm)return Ei;cm=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.isBrowser=Ei.isNode=Ei.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Ei.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Ei.isNode=e;function r(){return!t()&&!e()}return Ei.isBrowser=r,Ei}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=IA;e.__exportStar(SA(),t),e.__exportStar(AA(),t)})(sm);function Xr(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function An(t=6){return BigInt(Xr(t))}function Ki(t,e,r){return{id:r||Xr(),jsonrpc:"2.0",method:t,params:e}}function Lc(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Fc(t,e,r){return{id:t,jsonrpc:"2.0",error:PA(e,r)}}function PA(t,e){return typeof t>"u"?im(tm):(typeof t=="string"&&(t=Object.assign(Object.assign({},im(Rh)),{message:t})),typeof e<"u"&&(t.data=e),iA(t.code)&&(t=nA(t.code)),t)}class OA{}class CA extends OA{constructor(){super()}}class DA extends CA{constructor(e){super()}}const MA="^https?:",TA="^wss?:";function RA(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function lm(t,e){const r=RA(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function um(t){return lm(t,MA)}function hm(t){return lm(t,TA)}function NA(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function dm(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Fh(t){return dm(t)&&"method"in t}function Uc(t){return dm(t)&&(ei(t)||mr(t))}function ei(t){return"result"in t}function mr(t){return"error"in t}class vr extends DA{constructor(e){super(e),this.events=new It.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Ki(e.method,e.params||[],e.id||An().toString()),r)}async requestStrict(e,r){return new Promise(async(i,n)=>{if(!this.connection.connected)try{await this.open()}catch(s){n(s)}this.events.on(`${e.id}`,s=>{mr(s)?n(s.error):i(s.result)});try{await this.connection.send(e,r)}catch(s){n(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Uc(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const BA=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),LA=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",fm=t=>t.split("?")[0],pm=10,FA=BA();class UA{constructor(e){if(this.url=e,this.events=new It.exports.EventEmitter,this.registering=!1,!hm(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(fi(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!hm(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((i,n)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),n(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return n(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,i)=>{const n=sm.isReactNative()?void 0:{rejectUnauthorized:!NA(e)},s=new FA(e,[],n);LA()?s.onerror=o=>{const a=o;i(this.emitError(a.error))}:s.on("error",o=>{i(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?fn(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const i=this.parseError(r),n=i.message||i.toString(),s=Fc(e,n);this.events.emit("payload",s)}parseError(e,r=this.url){return nm(e,fm(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>pm&&this.events.setMaxListeners(pm)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${fm(this.url)}`));return this.events.emit("register_error",r),r}}var jA=Object.defineProperty,gm=Object.getOwnPropertySymbols,kA=Object.prototype.hasOwnProperty,qA=Object.prototype.propertyIsEnumerable,bm=(t,e,r)=>e in t?jA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ht=(t,e)=>{for(var r in e||(e={}))kA.call(e,r)&&bm(t,r,e[r]);if(gm)for(var r of gm(e))qA.call(e,r)&&bm(t,r,e[r]);return t};const mm="wc",vm=2,jc="core",ti=`${mm}@2:${jc}:`,zA={name:jc,logger:"error"},HA={database:":memory:"},WA="crypto",ym="client_ed25519_seed",VA=z.ONE_DAY,KA="keychain",GA="0.3",ZA="messages",YA="0.3",wm=z.SIX_HOURS,JA="publisher",_m="irn",QA="error",Em="wss://relay.walletconnect.org",XA="relayer",_t={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},eP="_subscription",yr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},tP=.1,Uh="2.19.1",$e={link_mode:"link_mode",relay:"relay"},kc={inbound:"inbound",outbound:"outbound"},rP="0.3",iP="WALLETCONNECT_CLIENT_ID",xm="WALLETCONNECT_LINK_MODE_APPS",or={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},nP="subscription",sP="0.3",oP="pairing",aP="0.3",Qo={wc_pairingDelete:{req:{ttl:z.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:z.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:z.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:z.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:z.ONE_DAY,prompt:!1,tag:0},res:{ttl:z.ONE_DAY,prompt:!1,tag:0}}},Pn={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Dr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},cP="history",lP="0.3",uP="expirer",wr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},hP="0.3",dP="verify-api",fP="https://verify.walletconnect.com",$m="https://verify.walletconnect.org",Xo=$m,pP=`${Xo}/v3`,gP=[fP,$m],bP="echo",mP="https://echo.walletconnect.com",ri={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},xi={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Mr={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},On={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Cn={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},ea={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},vP=.1,yP="event-client",wP=86400,_P="https://pulse.walletconnect.org/batch";function EP(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var w=0,S=0,x=0,A=v.length;x!==A&&v[x]===0;)x++,w++;for(var C=(A-x)*u+1>>>0,D=new Uint8Array(C);x!==A;){for(var T=v[x],N=0,R=C-1;(T!==0||N<S)&&R!==-1;R--,N++)T+=256*D[R]>>>0,D[R]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");S=N,x++}for(var B=C-S;B!==C&&D[B]===0;)B++;for(var M=c.repeat(w);B<C;++B)M+=t.charAt(D[B]);return M}function p(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var w=0;if(v[w]!==" "){for(var S=0,x=0;v[w]===c;)S++,w++;for(var A=(v.length-w)*l+1>>>0,C=new Uint8Array(A);v[w];){var D=r[v.charCodeAt(w)];if(D===255)return;for(var T=0,N=A-1;(D!==0||T<x)&&N!==-1;N--,T++)D+=a*C[N]>>>0,C[N]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");x=T,w++}if(v[w]!==" "){for(var R=A-x;R!==A&&C[R]===0;)R++;for(var B=new Uint8Array(S+(A-R)),M=S;R!==A;)B[M++]=C[R++];return B}}}function m(v){var w=p(v);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:p,decode:m}}var xP=EP,$P=xP;const Im=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},IP=t=>new TextEncoder().encode(t),SP=t=>new TextDecoder().decode(t);class AP{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class PP{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Sm(this,e)}}class OP{constructor(e){this.decoders=e}or(e){return Sm(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Sm=(t,e)=>new OP(Ht(Ht({},t.decoders||{[t.prefix]:t}),e.decoders||{[e.prefix]:e}));class CP{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new AP(e,r,i),this.decoder=new PP(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const qc=({name:t,prefix:e,encode:r,decode:i})=>new CP(t,e,r,i),ta=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:n}=$P(r,e);return qc({prefix:t,name:e,encode:i,decode:s=>Im(n(s))})},DP=(t,e,r,i)=>{const n={};for(let u=0;u<e.length;++u)n[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=n[t[u]];if(d===void 0)throw new SyntaxError(`Non-${i} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},MP=(t,e,r)=>{const i=e[e.length-1]==="=",n=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},Dt=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>qc({prefix:e,name:t,encode(n){return MP(n,i,r)},decode(n){return DP(n,i,r,t)}}),TP=qc({prefix:"\0",name:"identity",encode:t=>SP(t),decode:t=>IP(t)});var RP=Object.freeze({__proto__:null,identity:TP});const NP=Dt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var BP=Object.freeze({__proto__:null,base2:NP});const LP=Dt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var FP=Object.freeze({__proto__:null,base8:LP});const UP=ta({prefix:"9",name:"base10",alphabet:"0123456789"});var jP=Object.freeze({__proto__:null,base10:UP});const kP=Dt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),qP=Dt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var zP=Object.freeze({__proto__:null,base16:kP,base16upper:qP});const HP=Dt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),WP=Dt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),VP=Dt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),KP=Dt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),GP=Dt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ZP=Dt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),YP=Dt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),JP=Dt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),QP=Dt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var XP=Object.freeze({__proto__:null,base32:HP,base32upper:WP,base32pad:VP,base32padupper:KP,base32hex:GP,base32hexupper:ZP,base32hexpad:YP,base32hexpadupper:JP,base32z:QP});const eO=ta({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tO=ta({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var rO=Object.freeze({__proto__:null,base36:eO,base36upper:tO});const iO=ta({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),nO=ta({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var sO=Object.freeze({__proto__:null,base58btc:iO,base58flickr:nO});const oO=Dt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),aO=Dt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),cO=Dt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),lO=Dt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var uO=Object.freeze({__proto__:null,base64:oO,base64pad:aO,base64url:cO,base64urlpad:lO});const Am=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),hO=Am.reduce((t,e,r)=>(t[r]=e,t),[]),dO=Am.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function fO(t){return t.reduce((e,r)=>(e+=hO[r],e),"")}function pO(t){const e=[];for(const r of t){const i=dO[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const gO=qc({prefix:"\u{1F680}",name:"base256emoji",encode:fO,decode:pO});var bO=Object.freeze({__proto__:null,base256emoji:gO}),mO=Om,Pm=128,vO=127,yO=~vO,wO=Math.pow(2,31);function Om(t,e,r){e=e||[],r=r||0;for(var i=r;t>=wO;)e[r++]=t&255|Pm,t/=128;for(;t&yO;)e[r++]=t&255|Pm,t>>>=7;return e[r]=t|0,Om.bytes=r-i+1,e}var _O=jh,EO=128,Cm=127;function jh(t,i){var r=0,i=i||0,n=0,s=i,o,a=t.length;do{if(s>=a)throw jh.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=n<28?(o&Cm)<<n:(o&Cm)*Math.pow(2,n),n+=7}while(o>=EO);return jh.bytes=s-i,r}var xO=Math.pow(2,7),$O=Math.pow(2,14),IO=Math.pow(2,21),SO=Math.pow(2,28),AO=Math.pow(2,35),PO=Math.pow(2,42),OO=Math.pow(2,49),CO=Math.pow(2,56),DO=Math.pow(2,63),MO=function(t){return t<xO?1:t<$O?2:t<IO?3:t<SO?4:t<AO?5:t<PO?6:t<OO?7:t<CO?8:t<DO?9:10},TO={encode:mO,decode:_O,encodingLength:MO},Dm=TO;const Mm=(t,e,r=0)=>(Dm.encode(t,e,r),e),Tm=t=>Dm.encodingLength(t),kh=(t,e)=>{const r=e.byteLength,i=Tm(t),n=i+Tm(r),s=new Uint8Array(n+r);return Mm(t,s,0),Mm(r,s,i),s.set(e,n),new RO(t,r,e,s)};class RO{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}const Rm=({name:t,code:e,encode:r})=>new NO(t,e,r);class NO{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?kh(this.code,r):r.then(i=>kh(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Nm=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),BO=Rm({name:"sha2-256",code:18,encode:Nm("SHA-256")}),LO=Rm({name:"sha2-512",code:19,encode:Nm("SHA-512")});var FO=Object.freeze({__proto__:null,sha256:BO,sha512:LO});const Bm=0,UO="identity",Lm=Im;var jO=Object.freeze({__proto__:null,identity:{code:Bm,name:UO,encode:Lm,digest:t=>kh(Bm,Lm(t))}});new TextEncoder,new TextDecoder;const Fm=Ht(Ht(Ht(Ht(Ht(Ht(Ht(Ht(Ht(Ht({},RP),BP),FP),jP),zP),XP),rO),sO),uO),bO);Ht(Ht({},FO),jO);function kO(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Um(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const jm=Um("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),qh=Um("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=kO(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),qO=Ht({utf8:jm,"utf-8":jm,hex:Fm.base16,latin1:qh,ascii:qh,binary:qh},Fm);function zO(t,e="utf8"){const r=qO[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var HO=Object.defineProperty,WO=(t,e,r)=>e in t?HO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ii=(t,e,r)=>WO(t,typeof e!="symbol"?e+"":e,r);class VO{constructor(e,r){this.core=e,this.logger=r,ii(this,"keychain",new Map),ii(this,"name",KA),ii(this,"version",GA),ii(this,"initialized",!1),ii(this,"storagePrefix",ti),ii(this,"init",async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}}),ii(this,"has",i=>(this.isInitialized(),this.keychain.has(i))),ii(this,"set",async(i,n)=>{this.isInitialized(),this.keychain.set(i,n),await this.persist()}),ii(this,"get",i=>{this.isInitialized();const n=this.keychain.get(i);if(typeof n>"u"){const{message:s}=H("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(s)}return n}),ii(this,"del",async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()}),this.core=e,this.logger=zt(r,this.name)}get context(){return Qt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,th(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?rh(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=H("NOT_INITIALIZED",this.name);throw new Error(e)}}}var KO=Object.defineProperty,GO=(t,e,r)=>e in t?KO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Mt=(t,e,r)=>GO(t,typeof e!="symbol"?e+"":e,r);class ZO{constructor(e,r,i){this.core=e,this.logger=r,Mt(this,"name",WA),Mt(this,"keychain"),Mt(this,"randomSessionIdentifier",Eh()),Mt(this,"initialized",!1),Mt(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Mt(this,"hasKeys",n=>(this.isInitialized(),this.keychain.has(n))),Mt(this,"getClientId",async()=>{this.isInitialized();const n=await this.getClientSeed(),s=E1(n);return _1(s.publicKey)}),Mt(this,"generateKeyPair",()=>{this.isInitialized();const n=O$();return this.setPrivateKey(n.publicKey,n.privateKey)}),Mt(this,"signJWT",async n=>{this.isInitialized();const s=await this.getClientSeed(),o=E1(s),a=this.randomSessionIdentifier;return await L8(a,n,VA,o)}),Mt(this,"generateSharedKey",(n,s,o)=>{this.isInitialized();const a=this.getPrivateKey(n),c=C$(a,s);return this.setSymKey(c,o)}),Mt(this,"setSymKey",async(n,s)=>{this.isInitialized();const o=s||$c(n);return await this.keychain.set(o,n),o}),Mt(this,"deleteKeyPair",async n=>{this.isInitialized(),await this.keychain.del(n)}),Mt(this,"deleteSymKey",async n=>{this.isInitialized(),await this.keychain.del(n)}),Mt(this,"encode",async(n,s,o)=>{this.isInitialized();const a=Ab(o),c=fi(s);if(Ob(a))return T$(c,o?.encoding);if(Pb(a)){const p=a.senderPublicKey,m=a.receiverPublicKey;n=await this.generateSharedKey(p,m)}const l=this.getSymKey(n),{type:u,senderPublicKey:d}=a;return D$({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o?.encoding})}),Mt(this,"decode",async(n,s,o)=>{this.isInitialized();const a=N$(s,o);if(Ob(a)){const c=R$(s,o?.encoding);return fn(c)}if(Pb(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;n=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(n),l=M$({symKey:c,encoded:s,encoding:o?.encoding});return fn(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${n}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Mt(this,"getPayloadType",(n,s=Vi)=>{const o=ko({encoded:n,encoding:s});return $n(o.type)}),Mt(this,"getPayloadSenderPublicKey",(n,s=Vi)=>{const o=ko({encoded:n,encoding:s});return o.senderPublicKey?qt(o.senderPublicKey,Bt):void 0}),this.core=e,this.logger=zt(r,this.name),this.keychain=i||new VO(this.core,this.logger)}get context(){return Qt(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(ym)}catch{e=Eh(),await this.keychain.set(ym,e)}return zO(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=H("NOT_INITIALIZED",this.name);throw new Error(e)}}}var YO=Object.defineProperty,JO=Object.defineProperties,QO=Object.getOwnPropertyDescriptors,km=Object.getOwnPropertySymbols,XO=Object.prototype.hasOwnProperty,eC=Object.prototype.propertyIsEnumerable,zh=(t,e,r)=>e in t?YO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tC=(t,e)=>{for(var r in e||(e={}))XO.call(e,r)&&zh(t,r,e[r]);if(km)for(var r of km(e))eC.call(e,r)&&zh(t,r,e[r]);return t},rC=(t,e)=>JO(t,QO(e)),ar=(t,e,r)=>zh(t,typeof e!="symbol"?e+"":e,r);class iC extends US{constructor(e,r){super(e,r),this.logger=e,this.core=r,ar(this,"messages",new Map),ar(this,"messagesWithoutClientAck",new Map),ar(this,"name",ZA),ar(this,"version",YA),ar(this,"initialized",!1),ar(this,"storagePrefix",ti),ar(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i);const n=await this.getRelayerMessagesWithoutClientAck();typeof n<"u"&&(this.messagesWithoutClientAck=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}}),ar(this,"set",async(i,n,s)=>{this.isInitialized();const o=Zr(n);let a=this.messages.get(i);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=n,this.messages.set(i,a),s===kc.inbound){const c=this.messagesWithoutClientAck.get(i)||{};this.messagesWithoutClientAck.set(i,rC(tC({},c),{[o]:n}))}return await this.persist(),o}),ar(this,"get",i=>{this.isInitialized();let n=this.messages.get(i);return typeof n>"u"&&(n={}),n}),ar(this,"getWithoutAck",i=>{this.isInitialized();const n={};for(const s of i){const o=this.messagesWithoutClientAck.get(s)||{};n[s]=Object.values(o)}return n}),ar(this,"has",(i,n)=>{this.isInitialized();const s=this.get(i),o=Zr(n);return typeof s[o]<"u"}),ar(this,"ack",async(i,n)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(i);if(typeof s>"u")return;const o=Zr(n);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(i):this.messagesWithoutClientAck.set(i,s),await this.persist()}),ar(this,"del",async i=>{this.isInitialized(),this.messages.delete(i),this.messagesWithoutClientAck.delete(i),await this.persist()}),this.logger=zt(e,this.name),this.core=r}get context(){return Qt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,th(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,th(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?rh(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?rh(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=H("NOT_INITIALIZED",this.name);throw new Error(e)}}}var nC=Object.defineProperty,sC=Object.defineProperties,oC=Object.getOwnPropertyDescriptors,qm=Object.getOwnPropertySymbols,aC=Object.prototype.hasOwnProperty,cC=Object.prototype.propertyIsEnumerable,Hh=(t,e,r)=>e in t?nC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zc=(t,e)=>{for(var r in e||(e={}))aC.call(e,r)&&Hh(t,r,e[r]);if(qm)for(var r of qm(e))cC.call(e,r)&&Hh(t,r,e[r]);return t},Wh=(t,e)=>sC(t,oC(e)),Tr=(t,e,r)=>Hh(t,typeof e!="symbol"?e+"":e,r);class lC extends jS{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Tr(this,"events",new It.exports.EventEmitter),Tr(this,"name",JA),Tr(this,"queue",new Map),Tr(this,"publishTimeout",z.toMiliseconds(z.ONE_MINUTE)),Tr(this,"initialPublishTimeout",z.toMiliseconds(z.ONE_SECOND*15)),Tr(this,"needsTransportRestart",!1),Tr(this,"publish",async(i,n,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:n,opts:s}});const a=s?.ttl||wm,c=Ic(s),l=s?.prompt||!1,u=s?.tag||0,d=s?.id||An().toString(),p={topic:i,message:n,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:s?.attestation,tvf:s?.tvf}},m=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const v=new Promise(async w=>{const S=({id:A})=>{p.opts.id===A&&(this.removeRequestFromQueue(A),this.relayer.events.removeListener(_t.publish,S),w(p))};this.relayer.events.on(_t.publish,S);const x=ki(new Promise((A,C)=>{this.rpcPublish({topic:i,message:n,ttl:a,prompt:l,tag:u,id:d,attestation:s?.attestation,tvf:s?.tvf}).then(A).catch(D=>{this.logger.warn(D,D?.message),C(D)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await x,this.events.removeListener(_t.publish,S)}catch(A){this.queue.set(d,Wh(zc({},p),{attempt:1})),this.logger.warn(A,A?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:i,message:n,opts:s}}),await ki(v,this.publishTimeout,m)}catch(v){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(v),(o=s?.internal)!=null&&o.throwOnFailedPublish)throw v}finally{this.queue.delete(d)}}),Tr(this,"on",(i,n)=>{this.events.on(i,n)}),Tr(this,"once",(i,n)=>{this.events.once(i,n)}),Tr(this,"off",(i,n)=>{this.events.off(i,n)}),Tr(this,"removeListener",(i,n)=>{this.events.removeListener(i,n)}),this.relayer=e,this.logger=zt(r,this.name),this.registerEventListeners()}get context(){return Qt(this.logger)}async rpcPublish(e){var r,i,n,s;const{topic:o,message:a,ttl:c=wm,prompt:l,tag:u,id:d,attestation:p,tvf:m}=e,v={method:qo(Ic().protocol).publish,params:zc({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:p},m),id:d};Ct((r=v.params)==null?void 0:r.prompt)&&((i=v.params)==null||delete i.prompt),Ct((n=v.params)==null?void 0:n.tag)&&((s=v.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:v});const w=await this.relayer.request(v);return this.relayer.events.emit(_t.publish,e),this.logger.debug("Successfully Published Payload"),w}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const i=e.attempt+1;this.queue.set(r,Wh(zc({},e),{attempt:i}));const{topic:n,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${i}`),await this.rpcPublish(Wh(zc({},e),{topic:n,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Os.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(_t.connection_stalled);return}this.checkQueue()}),this.relayer.on(_t.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var uC=Object.defineProperty,hC=(t,e,r)=>e in t?uC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ms=(t,e,r)=>hC(t,typeof e!="symbol"?e+"":e,r);class dC{constructor(){Ms(this,"map",new Map),Ms(this,"set",(e,r)=>{const i=this.get(e);this.exists(e,r)||this.map.set(e,[...i,r])}),Ms(this,"get",e=>this.map.get(e)||[]),Ms(this,"exists",(e,r)=>this.get(e).includes(r)),Ms(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,r))return;const n=i.filter(s=>s!==r);if(!n.length){this.map.delete(e);return}this.map.set(e,n)}),Ms(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var fC=Object.defineProperty,pC=Object.defineProperties,gC=Object.getOwnPropertyDescriptors,zm=Object.getOwnPropertySymbols,bC=Object.prototype.hasOwnProperty,mC=Object.prototype.propertyIsEnumerable,Vh=(t,e,r)=>e in t?fC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ra=(t,e)=>{for(var r in e||(e={}))bC.call(e,r)&&Vh(t,r,e[r]);if(zm)for(var r of zm(e))mC.call(e,r)&&Vh(t,r,e[r]);return t},Kh=(t,e)=>pC(t,gC(e)),ve=(t,e,r)=>Vh(t,typeof e!="symbol"?e+"":e,r);class vC extends zS{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,ve(this,"subscriptions",new Map),ve(this,"topicMap",new dC),ve(this,"events",new It.exports.EventEmitter),ve(this,"name",nP),ve(this,"version",sP),ve(this,"pending",new Map),ve(this,"cached",[]),ve(this,"initialized",!1),ve(this,"storagePrefix",ti),ve(this,"subscribeTimeout",z.toMiliseconds(z.ONE_MINUTE)),ve(this,"initialSubscribeTimeout",z.toMiliseconds(z.ONE_SECOND*15)),ve(this,"clientId"),ve(this,"batchSubscribeTopicsLimit",500),ve(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),ve(this,"subscribe",async(i,n)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}});try{const s=Ic(n),o={topic:i,relay:s,transportType:n?.transportType};this.pending.set(i,o);const a=await this.rpcSubscribe(i,s,n);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),ve(this,"unsubscribe",async(i,n)=>{this.isInitialized(),typeof n?.id<"u"?await this.unsubscribeById(i,n.id,n):await this.unsubscribeByTopic(i,n)}),ve(this,"isSubscribed",i=>new Promise(n=>{n(this.topicMap.topics.includes(i))})),ve(this,"isKnownTopic",i=>new Promise(n=>{n(this.topicMap.topics.includes(i)||this.pending.has(i)||this.cached.some(s=>s.topic===i))})),ve(this,"on",(i,n)=>{this.events.on(i,n)}),ve(this,"once",(i,n)=>{this.events.once(i,n)}),ve(this,"off",(i,n)=>{this.events.off(i,n)}),ve(this,"removeListener",(i,n)=>{this.events.removeListener(i,n)}),ve(this,"start",async()=>{await this.onConnect()}),ve(this,"stop",async()=>{await this.onDisconnect()}),ve(this,"restart",async()=>{await this.restore(),await this.onRestart()}),ve(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const i=[];this.pending.forEach(n=>{i.push(n)}),await this.batchSubscribe(i)}),ve(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Os.pulse,async()=>{await this.checkPending()}),this.events.on(or.created,async i=>{const n=or.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:i}),await this.persist()}),this.events.on(or.deleted,async i=>{const n=or.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:i}),await this.persist()})}),this.relayer=e,this.logger=zt(r,this.name),this.clientId=""}get context(){return Qt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let i=!1;try{i=this.getSubscription(e).topic===r}catch{}return i}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const i=this.topicMap.get(e);await Promise.all(i.map(async n=>await this.unsubscribeById(e,n,r)))}async unsubscribeById(e,r,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}});try{const n=Ic(i);await this.restartToComplete({topic:e,id:r,relay:n}),await this.rpcUnsubscribe(e,r,n);const s=ge("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}})}catch(n){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(n),n}}async rpcSubscribe(e,r,i){var n;(!i||i?.transportType===$e.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const s={method:qo(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(n=i?.internal)==null?void 0:n.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if(i?.transportType===$e.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},z.toMiliseconds(z.ONE_SECOND)),a;const c=new Promise(async u=>{const d=p=>{p.topic===e&&(this.events.removeListener(or.created,d),u(p.id))};this.events.on(or.created,d);try{const p=await ki(new Promise((m,v)=>{this.relayer.request(s).catch(w=>{this.logger.warn(w,w?.message),v(w)}).then(m)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(or.created,d),u(p)}catch{}}),l=await ki(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(_t.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,i={method:qo(r.protocol).batchSubscribe,params:{topics:e.map(n=>n.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await ki(new Promise(n=>{this.relayer.request(i).catch(s=>this.logger.warn(s)).then(n)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(_t.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,i={method:qo(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let n;try{n=await await ki(new Promise((s,o)=>{this.relayer.request(i).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(_t.connection_stalled)}return n}rpcUnsubscribe(e,r,i){const n={method:qo(i.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,r){this.setSubscription(e,Kh(ra({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,ra({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,i){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,ra({},r)),this.topicMap.set(r.topic,e),this.events.emit(or.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:i}=H("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(or.deleted,Kh(ra({},i),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(or.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let i=0;i<r;i++){const n=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(or.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=H("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>Kh(ra({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await HE(z.toMiliseconds(z.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=H("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Zr(e+await this.getClientId())}}var yC=Object.defineProperty,Hm=Object.getOwnPropertySymbols,wC=Object.prototype.hasOwnProperty,_C=Object.prototype.propertyIsEnumerable,Gh=(t,e,r)=>e in t?yC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Wm=(t,e)=>{for(var r in e||(e={}))wC.call(e,r)&&Gh(t,r,e[r]);if(Hm)for(var r of Hm(e))_C.call(e,r)&&Gh(t,r,e[r]);return t},le=(t,e,r)=>Gh(t,typeof e!="symbol"?e+"":e,r);class EC extends kS{constructor(e){super(e),le(this,"protocol","wc"),le(this,"version",2),le(this,"core"),le(this,"logger"),le(this,"events",new It.exports.EventEmitter),le(this,"provider"),le(this,"messages"),le(this,"subscriber"),le(this,"publisher"),le(this,"name",XA),le(this,"transportExplicitlyClosed",!1),le(this,"initialized",!1),le(this,"connectionAttemptInProgress",!1),le(this,"relayUrl"),le(this,"projectId"),le(this,"packageName"),le(this,"bundleId"),le(this,"hasExperiencedNetworkDisruption",!1),le(this,"pingTimeout"),le(this,"heartBeatTimeout",z.toMiliseconds(z.THIRTY_SECONDS+z.FIVE_SECONDS)),le(this,"reconnectTimeout"),le(this,"connectPromise"),le(this,"reconnectInProgress",!1),le(this,"requestsInFlight",[]),le(this,"connectTimeout",z.toMiliseconds(z.ONE_SECOND*15)),le(this,"request",async r=>{var i,n;this.logger.debug("Publishing Request Payload");const s=r.id||An().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(i=r.params)==null?void 0:i.topic},"relayer.request - publishing...");const o=`${s}:${((n=r.params)==null?void 0:n.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),le(this,"resetPingTimeout",()=>{gc()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,i,n,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(n=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null?void 0:n.terminate)==null||s.call(n)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),le(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),le(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \u{1F6DC}"),this.startPingTimeout(),this.events.emit(_t.connect)}),le(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \u{1F6D1}"),this.requestsInFlight=[],this.onProviderDisconnect()}),le(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(_t.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),le(this,"registerProviderListeners",()=>{this.provider.on(yr.payload,this.onPayloadHandler),this.provider.on(yr.connect,this.onConnectHandler),this.provider.on(yr.disconnect,this.onDisconnectHandler),this.provider.on(yr.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?zt(e.logger,this.name):Jr(Bc({level:e.logger||QA})),this.messages=new iC(this.logger,e.core),this.subscriber=new vC(this,this.logger),this.publisher=new lC(this,this.logger),this.relayUrl=e?.relayUrl||Em,this.projectId=e.projectId,OE()?this.packageName=Pg():CE()&&(this.bundleId=Pg()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return Qt(this.logger)}get connected(){var e,r,i;return((i=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===1||!1}get connecting(){var e,r,i;return((i=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,i){this.isInitialized(),await this.publisher.publish(e,r,i),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:$e.relay},kc.outbound)}async subscribe(e,r){var i,n,s;this.isInitialized(),(!(r!=null&&r.transportType)||r?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((i=r?.internal)==null?void 0:i.throwOnFailedPublish)>"u"?!0:(n=r?.internal)==null?void 0:n.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(or.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(or.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,Wm({internal:{throwOnFailedPublish:o}},r)).catch(p=>{o&&d(p)})||a,u()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await ki(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,i)=>{await this.connect(e).then(r).catch(i).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Ub())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((i,n)=>i.publishedAt-n.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const i of r)try{await this.onMessageEvent(i)}catch(n){this.logger.warn(n,"Error while processing batch message event: "+n?.message)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:i}=e;if(!r.sessionExists){const n=dt(z.FIVE_MINUTES),s={topic:i,expiry:n,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(i,s)}this.events.emit(_t.message,e),await this.recordMessageEvent(e,kc.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(i,n)=>{const s=()=>{n(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(yr.disconnect,s),await ki(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{n(o)}).finally(()=>{this.provider.off(yr.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(yr.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(yr.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,i()})}catch(i){await this.subscriber.stop();const n=i;this.logger.warn({},n.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(i=>setTimeout(i,z.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,i,n,s;if(gc())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(n=(i=this.provider)==null?void 0:i.connection)==null?void 0:n.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new vr(new UA(RE({sdkVersion:Uh,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:i,message:n}=e;await this.messages.set(i,n,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:i}=e;if(!i||i.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const n=this.messages.has(r,i);return n&&this.logger.warn(`Ignoring duplicate message: ${i}`),n}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Fh(e)){if(!e.method.endsWith(eP))return;const r=e.params,{topic:i,message:n,publishedAt:s,attestation:o}=r.data,a={topic:i,message:n,publishedAt:s,transportType:$e.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Wm({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Uc(e)&&this.events.emit(_t.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,kc.inbound),this.events.emit(_t.message,e))}async acknowledgePayload(e){const r=Lc(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(yr.payload,this.onPayloadHandler),this.provider.off(yr.connect,this.onConnectHandler),this.provider.off(yr.disconnect,this.onDisconnectHandler),this.provider.off(yr.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Ub();EI(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(i=>this.logger.error(i,i?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(_t.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},z.toMiliseconds(tP)))))}isInitialized(){if(!this.initialized){const{message:e}=H("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function xC(){}function Vm(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Km(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Gm(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const $C="[object RegExp]",IC="[object String]",SC="[object Number]",AC="[object Boolean]",Zm="[object Arguments]",PC="[object Symbol]",OC="[object Date]",CC="[object Map]",DC="[object Set]",MC="[object Array]",TC="[object Function]",RC="[object ArrayBuffer]",Zh="[object Object]",NC="[object Error]",BC="[object DataView]",LC="[object Uint8Array]",FC="[object Uint8ClampedArray]",UC="[object Uint16Array]",jC="[object Uint32Array]",kC="[object BigUint64Array]",qC="[object Int8Array]",zC="[object Int16Array]",HC="[object Int32Array]",WC="[object BigInt64Array]",VC="[object Float32Array]",KC="[object Float64Array]";function GC(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function ZC(t,e,r){return ia(t,e,void 0,void 0,void 0,void 0,r)}function ia(t,e,r,i,n,s,o){const a=o(t,e,r,i,n,s);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return na(t,e,s,o)}return na(t,e,s,o)}function na(t,e,r,i){if(Object.is(t,e))return!0;let n=Gm(t),s=Gm(e);if(n===Zm&&(n=Zh),s===Zm&&(s=Zh),n!==s)return!1;switch(n){case IC:return t.toString()===e.toString();case SC:{const c=t.valueOf(),l=e.valueOf();return GC(c,l)}case AC:case OC:case PC:return Object.is(t.valueOf(),e.valueOf());case $C:return t.source===e.source&&t.flags===e.flags;case TC:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(n){case CC:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!ia(l,e.get(c),c,t,e,r,i))return!1;return!0}case DC:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],p=l.findIndex(m=>ia(d,m,void 0,t,e,r,i));if(p===-1)return!1;l.splice(p,1)}return!0}case MC:case LC:case FC:case UC:case jC:case kC:case qC:case zC:case HC:case WC:case VC:case KC:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!ia(t[c],e[c],c,t,e,r,i))return!1;return!0}case RC:return t.byteLength!==e.byteLength?!1:na(new Uint8Array(t),new Uint8Array(e),r,i);case BC:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:na(new Uint8Array(t),new Uint8Array(e),r,i);case NC:return t.name===e.name&&t.message===e.message;case Zh:{if(!(na(t.constructor,e.constructor,r,i)||Vm(t)&&Vm(e)))return!1;const c=[...Object.keys(t),...Km(t)],l=[...Object.keys(e),...Km(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],p=t[d];if(!Object.hasOwn(e,d))return!1;const m=e[d];if(!ia(p,m,d,t,e,r,i))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function YC(t,e){return ZC(t,e,xC)}var JC=Object.defineProperty,Ym=Object.getOwnPropertySymbols,QC=Object.prototype.hasOwnProperty,XC=Object.prototype.propertyIsEnumerable,Yh=(t,e,r)=>e in t?JC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Jm=(t,e)=>{for(var r in e||(e={}))QC.call(e,r)&&Yh(t,r,e[r]);if(Ym)for(var r of Ym(e))XC.call(e,r)&&Yh(t,r,e[r]);return t},Xt=(t,e,r)=>Yh(t,typeof e!="symbol"?e+"":e,r);class Dn extends qS{constructor(e,r,i,n=ti,s=void 0){super(e,r,i,n),this.core=e,this.logger=r,this.name=i,Xt(this,"map",new Map),Xt(this,"version",rP),Xt(this,"cached",[]),Xt(this,"initialized",!1),Xt(this,"getKey"),Xt(this,"storagePrefix",ti),Xt(this,"recentlyDeleted",[]),Xt(this,"recentlyDeletedLimit",200),Xt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ct(o)?this.map.set(this.getKey(o),o):X$(o)?this.map.set(o.id,o):eI(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Xt(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Xt(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Xt(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>YC(a[c],o[c]))):this.values)),Xt(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Jm(Jm({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Xt(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=zt(r,this.name),this.storagePrefix=n,this.getKey=s}get context(){return Qt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:n}=H("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}const{message:i}=H("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=H("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=H("NOT_INITIALIZED",this.name);throw new Error(e)}}}var eD=Object.defineProperty,tD=(t,e,r)=>e in t?eD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ne=(t,e,r)=>tD(t,typeof e!="symbol"?e+"":e,r);class rD{constructor(e,r){this.core=e,this.logger=r,ne(this,"name",oP),ne(this,"version",aP),ne(this,"events",new It.exports),ne(this,"pairings"),ne(this,"initialized",!1),ne(this,"storagePrefix",ti),ne(this,"ignoredPayloadTypes",[wi]),ne(this,"registeredMethods",[]),ne(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),ne(this,"register",({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]}),ne(this,"create",async i=>{this.isInitialized();const n=Eh(),s=await this.core.crypto.setSymKey(n),o=dt(z.FIVE_MINUTES),a={protocol:_m},c={topic:s,expiry:o,relay:a,active:!1,methods:i?.methods},l=Db({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:n,relay:a,expiryTimestamp:o,methods:i?.methods});return this.events.emit(Pn.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:i?.transportType}),{topic:s,uri:l}}),ne(this,"pair",async i=>{this.isInitialized();const n=this.core.eventClient.createEvent({properties:{topic:i?.uri,trace:[ri.pairing_started]}});this.isValidPair(i,n);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=Cb(i.uri);n.props.properties.topic=s,n.addTrace(ri.pairing_uri_validation_success),n.addTrace(ri.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),n.addTrace(ri.existing_pairing),u.active)throw n.setError(xi.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);n.addTrace(ri.pairing_not_expired)}const d=c||dt(z.FIVE_MINUTES),p={topic:s,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(s,d),await this.pairings.set(s,p),n.addTrace(ri.store_new_pairing),i.activatePairing&&await this.activate({topic:s}),this.events.emit(Pn.create,p),n.addTrace(ri.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),n.addTrace(ri.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{n.setError(xi.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(m){throw n.setError(xi.subscribe_pairing_topic_failure),m}return n.addTrace(ri.subscribe_pairing_topic_success),p}),ne(this,"activate",async({topic:i})=>{this.isInitialized();const n=dt(z.FIVE_MINUTES);this.core.expirer.set(i,n),await this.pairings.update(i,{active:!0,expiry:n})}),ne(this,"ping",async i=>{this.isInitialized(),await this.isValidPing(i),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:n}=i;if(this.pairings.keys.includes(n)){const s=await this.sendRequest(n,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=En();this.events.once(fe("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),ne(this,"updateExpiry",async({topic:i,expiry:n})=>{this.isInitialized(),await this.pairings.update(i,{expiry:n})}),ne(this,"updateMetadata",async({topic:i,metadata:n})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:n})}),ne(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),ne(this,"disconnect",async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:n}=i;this.pairings.keys.includes(n)&&(await this.sendRequest(n,"wc_pairingDelete",ge("USER_DISCONNECTED")),await this.deletePairing(n))}),ne(this,"formatUriFromPairing",i=>{this.isInitialized();const{topic:n,relay:s,expiry:o,methods:a}=i,c=this.core.crypto.keychain.get(n);return Db({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),ne(this,"sendRequest",async(i,n,s)=>{const o=Ki(n,s),a=await this.core.crypto.encode(i,o),c=Qo[n].req;return this.core.history.set(i,o),this.core.relayer.publish(i,a,c),o.id}),ne(this,"sendResult",async(i,n,s)=>{const o=Lc(i,s),a=await this.core.crypto.encode(n,o),c=(await this.core.history.get(n,i)).request.method,l=Qo[c].res;await this.core.relayer.publish(n,a,l),await this.core.history.resolve(o)}),ne(this,"sendError",async(i,n,s)=>{const o=Fc(i,s),a=await this.core.crypto.encode(n,o),c=(await this.core.history.get(n,i)).request.method,l=Qo[c]?Qo[c].res:Qo.unregistered_method.res;await this.core.relayer.publish(n,a,l),await this.core.history.resolve(o)}),ne(this,"deletePairing",async(i,n)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,ge("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),n?Promise.resolve():this.core.expirer.del(i)])}),ne(this,"cleanup",async()=>{const i=this.pairings.getAll().filter(n=>qi(n.expiry));await Promise.all(i.map(n=>this.deletePairing(n.topic)))}),ne(this,"onRelayEventRequest",async i=>{const{topic:n,payload:s}=i;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(n,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(n,s);default:return await this.onUnknownRpcMethodRequest(n,s)}}),ne(this,"onRelayEventResponse",async i=>{const{topic:n,payload:s}=i,o=(await this.core.history.get(n,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(n,s);default:return this.onUnknownRpcMethodResponse(o)}}),ne(this,"onPairingPingRequest",async(i,n)=>{const{id:s}=n;try{this.isValidPing({topic:i}),await this.sendResult(s,i,!0),this.events.emit(Pn.ping,{id:s,topic:i})}catch(o){await this.sendError(s,i,o),this.logger.error(o)}}),ne(this,"onPairingPingResponse",(i,n)=>{const{id:s}=n;setTimeout(()=>{ei(n)?this.events.emit(fe("pairing_ping",s),{}):mr(n)&&this.events.emit(fe("pairing_ping",s),{error:n.error})},500)}),ne(this,"onPairingDeleteRequest",async(i,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(Pn.delete,{id:s,topic:i})}catch(o){await this.sendError(s,i,o),this.logger.error(o)}}),ne(this,"onUnknownRpcMethodRequest",async(i,n)=>{const{id:s,method:o}=n;try{if(this.registeredMethods.includes(o))return;const a=ge("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,i,a),this.logger.error(a)}catch(a){await this.sendError(s,i,a),this.logger.error(a)}}),ne(this,"onUnknownRpcMethodResponse",i=>{this.registeredMethods.includes(i)||this.logger.error(ge("WC_METHOD_UNSUPPORTED",i))}),ne(this,"isValidPair",(i,n)=>{var s;if(!Yt(i)){const{message:a}=H("MISSING_OR_INVALID",`pair() params: ${i}`);throw n.setError(xi.malformed_pairing_uri),new Error(a)}if(!Q$(i.uri)){const{message:a}=H("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw n.setError(xi.malformed_pairing_uri),new Error(a)}const o=Cb(i?.uri);if(!((s=o?.relay)!=null&&s.protocol)){const{message:a}=H("MISSING_OR_INVALID","pair() uri#relay-protocol");throw n.setError(xi.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=H("MISSING_OR_INVALID","pair() uri#symKey");throw n.setError(xi.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&z.toMiliseconds(o?.expiryTimestamp)<Date.now()){n.setError(xi.pairing_expired);const{message:a}=H("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),ne(this,"isValidPing",async i=>{if(!Yt(i)){const{message:s}=H("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(s)}const{topic:n}=i;await this.isValidPairingTopic(n)}),ne(this,"isValidDisconnect",async i=>{if(!Yt(i)){const{message:s}=H("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(s)}const{topic:n}=i;await this.isValidPairingTopic(n)}),ne(this,"isValidPairingTopic",async i=>{if(!ke(i,!1)){const{message:n}=H("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(n)}if(!this.pairings.keys.includes(i)){const{message:n}=H("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(n)}if(qi(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:n}=H("EXPIRED",`pairing topic: ${i}`);throw new Error(n)}}),this.core=e,this.logger=zt(r,this.name),this.pairings=new Dn(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Qt(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=H("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(_t.message,async e=>{const{topic:r,message:i,transportType:n}=e;if(this.pairings.keys.includes(r)&&n!==$e.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))try{const s=await this.core.crypto.decode(r,i);Fh(s)?(this.core.history.set(r,s),await this.onRelayEventRequest({topic:r,payload:s})):Uc(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id)),await this.core.relayer.messages.ack(r,i)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(wr.expired,async e=>{const{topic:r}=Mg(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Pn.expire,{topic:r}))})}}var iD=Object.defineProperty,nD=(t,e,r)=>e in t?iD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tt=(t,e,r)=>nD(t,typeof e!="symbol"?e+"":e,r);class sD extends FS{constructor(e,r){super(e,r),this.core=e,this.logger=r,Tt(this,"records",new Map),Tt(this,"events",new It.exports.EventEmitter),Tt(this,"name",cP),Tt(this,"version",lP),Tt(this,"cached",[]),Tt(this,"initialized",!1),Tt(this,"storagePrefix",ti),Tt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Tt(this,"set",(i,n,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:n,chainId:s}),this.records.has(n.id))return;const o={id:n.id,topic:i,request:{method:n.method,params:n.params||null},chainId:s,expiry:dt(z.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Dr.created,o)}),Tt(this,"resolve",async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const n=await this.getRecord(i.id);typeof n.response>"u"&&(n.response=mr(i)?{error:i.error}:{result:i.result},this.records.set(n.id,n),this.persist(),this.events.emit(Dr.updated,n))}),Tt(this,"get",async(i,n)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:n}),await this.getRecord(n))),Tt(this,"delete",(i,n)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:n}),this.values.forEach(s=>{if(s.topic===i){if(typeof n<"u"&&s.id!==n)return;this.records.delete(s.id),this.events.emit(Dr.deleted,s)}}),this.persist()}),Tt(this,"exists",async(i,n)=>(this.isInitialized(),this.records.has(n)?(await this.getRecord(n)).topic===i:!1)),Tt(this,"on",(i,n)=>{this.events.on(i,n)}),Tt(this,"once",(i,n)=>{this.events.once(i,n)}),Tt(this,"off",(i,n)=>{this.events.off(i,n)}),Tt(this,"removeListener",(i,n)=>{this.events.removeListener(i,n)}),this.logger=zt(r,this.name)}get context(){return Qt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const i={topic:r.topic,request:Ki(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:i}=H("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Dr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=H("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Dr.created,e=>{const r=Dr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Dr.updated,e=>{const r=Dr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Dr.deleted,e=>{const r=Dr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(Os.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{z.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(Dr.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=H("NOT_INITIALIZED",this.name);throw new Error(e)}}}var oD=Object.defineProperty,aD=(t,e,r)=>e in t?oD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Lt=(t,e,r)=>aD(t,typeof e!="symbol"?e+"":e,r);class cD extends HS{constructor(e,r){super(e,r),this.core=e,this.logger=r,Lt(this,"expirations",new Map),Lt(this,"events",new It.exports.EventEmitter),Lt(this,"name",uP),Lt(this,"version",hP),Lt(this,"cached",[]),Lt(this,"initialized",!1),Lt(this,"storagePrefix",ti),Lt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Lt(this,"has",i=>{try{const n=this.formatTarget(i);return typeof this.getExpiration(n)<"u"}catch{return!1}}),Lt(this,"set",(i,n)=>{this.isInitialized();const s=this.formatTarget(i),o={target:s,expiry:n};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(wr.created,{target:s,expiration:o})}),Lt(this,"get",i=>{this.isInitialized();const n=this.formatTarget(i);return this.getExpiration(n)}),Lt(this,"del",i=>{if(this.isInitialized(),this.has(i)){const n=this.formatTarget(i),s=this.getExpiration(n);this.expirations.delete(n),this.events.emit(wr.deleted,{target:n,expiration:s})}}),Lt(this,"on",(i,n)=>{this.events.on(i,n)}),Lt(this,"once",(i,n)=>{this.events.once(i,n)}),Lt(this,"off",(i,n)=>{this.events.off(i,n)}),Lt(this,"removeListener",(i,n)=>{this.events.removeListener(i,n)}),this.logger=zt(r,this.name)}get context(){return Qt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return NE(e);if(typeof e=="number")return BE(e);const{message:r}=H("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(wr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=H("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:i}=H("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(i),new Error(i)}return r}checkExpiry(e,r){const{expiry:i}=r;z.toMiliseconds(i)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(wr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Os.pulse,()=>this.checkExpirations()),this.events.on(wr.created,e=>{const r=wr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(wr.expired,e=>{const r=wr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(wr.deleted,e=>{const r=wr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=H("NOT_INITIALIZED",this.name);throw new Error(e)}}}var lD=Object.defineProperty,uD=(t,e,r)=>e in t?lD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qe=(t,e,r)=>uD(t,typeof e!="symbol"?e+"":e,r);class hD extends WS{constructor(e,r,i){super(e,r,i),this.core=e,this.logger=r,this.store=i,qe(this,"name",dP),qe(this,"abortController"),qe(this,"isDevEnv"),qe(this,"verifyUrlV3",pP),qe(this,"storagePrefix",ti),qe(this,"version",vm),qe(this,"publicKey"),qe(this,"fetchPromise"),qe(this,"init",async()=>{var n;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&z.toMiliseconds((n=this.publicKey)==null?void 0:n.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),qe(this,"register",async n=>{if(!Do()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=n,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=go(),u=this.startAbortTimer(z.ONE_SECOND*5),d=await new Promise((p,m)=>{const v=()=>{window.removeEventListener("message",S),l.body.removeChild(w),m("attestation aborted")};this.abortController.signal.addEventListener("abort",v);const w=l.createElement("iframe");w.src=c,w.style.display="none",w.addEventListener("error",v,{signal:this.abortController.signal});const S=x=>{if(x.data&&typeof x.data=="string")try{const A=JSON.parse(x.data);if(A.type==="verify_attestation"){if(Ru(A.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(w),this.abortController.signal.removeEventListener("abort",v),window.removeEventListener("message",S),p(A.attestation===null?"":A.attestation)}}catch(A){this.logger.warn(A)}};l.body.appendChild(w),window.addEventListener("message",S,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),qe(this,"resolve",async n=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=n;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(Ru(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(n?.verifyUrl);return this.fetchAttestation(o,c)}),qe(this,"fetchAttestation",async(n,s)=>{this.logger.debug(`resolving attestation: ${n} from url: ${s}`);const o=this.startAbortTimer(z.ONE_SECOND*5),a=await fetch(`${s}/attestation/${n}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),qe(this,"getVerifyUrl",n=>{let s=n||Xo;return gP.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Xo}`),s=Xo),s}),qe(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const n=this.startAbortTimer(z.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(n),await s.json()}catch(n){this.logger.warn(n)}}),qe(this,"persistPublicKey",async n=>{this.logger.debug("persisting public key to local storage",n),await this.store.setItem(this.storeKey,n),this.publicKey=n}),qe(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),qe(this,"isValidJwtAttestation",async n=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(n,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(n,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),qe(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),qe(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const n=await this.fetchPromise;return this.fetchPromise=void 0,n}),qe(this,"validateAttestation",(n,s)=>{const o=U$(n,s.publicKey),a={hasExpired:z.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=zt(r,this.name),this.abortController=new AbortController,this.isDevEnv=ih(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Qt(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),z.toMiliseconds(e))}}var dD=Object.defineProperty,fD=(t,e,r)=>e in t?dD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qm=(t,e,r)=>fD(t,typeof e!="symbol"?e+"":e,r);class pD extends VS{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,Qm(this,"context",bP),Qm(this,"registerDeviceToken",async i=>{const{clientId:n,token:s,notificationType:o,enableEncrypted:a=!1}=i,c=`${mP}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:n,type:o,token:s,always_raw:a})})}),this.logger=zt(r,this.context)}}var gD=Object.defineProperty,Xm=Object.getOwnPropertySymbols,bD=Object.prototype.hasOwnProperty,mD=Object.prototype.propertyIsEnumerable,Jh=(t,e,r)=>e in t?gD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,sa=(t,e)=>{for(var r in e||(e={}))bD.call(e,r)&&Jh(t,r,e[r]);if(Xm)for(var r of Xm(e))mD.call(e,r)&&Jh(t,r,e[r]);return t},Et=(t,e,r)=>Jh(t,typeof e!="symbol"?e+"":e,r);class vD extends KS{constructor(e,r,i=!0){super(e,r,i),this.core=e,this.logger=r,Et(this,"context",yP),Et(this,"storagePrefix",ti),Et(this,"storageVersion",vP),Et(this,"events",new Map),Et(this,"shouldPersist",!1),Et(this,"init",async()=>{if(!ih())try{const n={eventId:Rg(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Cg(this.core.relayer.protocol,this.core.relayer.version,Uh)}}};await this.sendEvent([n])}catch(n){this.logger.warn(n)}}),Et(this,"createEvent",n=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=n,l=Rg(),u=this.core.projectId||"",d=Date.now(),p=sa({eventId:l,timestamp:d,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,p),this.shouldPersist=!0),p}),Et(this,"getEvent",n=>{const{eventId:s,topic:o}=n;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return sa(sa({},a),this.setMethods(a.eventId))}),Et(this,"deleteEvent",n=>{const{eventId:s}=n;this.events.delete(s),this.shouldPersist=!0}),Et(this,"setEventListeners",()=>{this.core.heartbeat.on(Os.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(n=>{z.fromMiliseconds(Date.now())-z.fromMiliseconds(n.timestamp)>wP&&(this.events.delete(n.eventId),this.shouldPersist=!0)})})}),Et(this,"setMethods",n=>({addTrace:s=>this.addTrace(n,s),setError:s=>this.setError(n,s)})),Et(this,"addTrace",(n,s)=>{const o=this.events.get(n);o&&(o.props.properties.trace.push(s),this.events.set(n,o),this.shouldPersist=!0)}),Et(this,"setError",(n,s)=>{const o=this.events.get(n);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(n,o),this.shouldPersist=!0)}),Et(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Et(this,"restore",async()=>{try{const n=await this.core.storage.getItem(this.storageKey)||[];if(!n.length)return;n.forEach(s=>{this.events.set(s.eventId,sa(sa({},s),this.setMethods(s.eventId)))})}catch(n){this.logger.warn(n)}}),Et(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const n=[];for(const[s,o]of this.events)o.props.type&&n.push(o);if(n.length!==0)try{if((await this.sendEvent(n)).ok)for(const s of n)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),Et(this,"sendEvent",async n=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${_P}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Uh}${s}`,{method:"POST",body:JSON.stringify(n)})}),Et(this,"getAppDomain",()=>Og().url),this.logger=zt(r,this.context),this.telemetryEnabled=i,i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var yD=Object.defineProperty,e2=Object.getOwnPropertySymbols,wD=Object.prototype.hasOwnProperty,_D=Object.prototype.propertyIsEnumerable,Qh=(t,e,r)=>e in t?yD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,t2=(t,e)=>{for(var r in e||(e={}))wD.call(e,r)&&Qh(t,r,e[r]);if(e2)for(var r of e2(e))_D.call(e,r)&&Qh(t,r,e[r]);return t},xe=(t,e,r)=>Qh(t,typeof e!="symbol"?e+"":e,r);class Xh extends RS{constructor(e){var r;super(e),xe(this,"protocol",mm),xe(this,"version",vm),xe(this,"name",jc),xe(this,"relayUrl"),xe(this,"projectId"),xe(this,"customStoragePrefix"),xe(this,"events",new It.exports.EventEmitter),xe(this,"logger"),xe(this,"heartbeat"),xe(this,"relayer"),xe(this,"crypto"),xe(this,"storage"),xe(this,"history"),xe(this,"expirer"),xe(this,"pairing"),xe(this,"verify"),xe(this,"echoClient"),xe(this,"linkModeSupportedApps"),xe(this,"eventClient"),xe(this,"initialized",!1),xe(this,"logChunkController"),xe(this,"on",(o,a)=>this.events.on(o,a)),xe(this,"once",(o,a)=>this.events.once(o,a)),xe(this,"off",(o,a)=>this.events.off(o,a)),xe(this,"removeListener",(o,a)=>this.events.removeListener(o,a)),xe(this,"dispatchEnvelope",({topic:o,message:a,sessionExists:c})=>{if(!o||!a)return;const l={topic:o,message:a,publishedAt:Date.now(),transportType:$e.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:c})}),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Em,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=Bc({level:typeof e?.logger=="string"&&e.logger?e.logger:zA.logger,name:jc}),{logger:n,chunkLoggerController:s}=DS({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,a;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((a=this.logChunkController)==null||a.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=zt(n,this.name),this.heartbeat=new Ah,this.crypto=new ZO(this,this.logger,e?.keychain),this.history=new sD(this,this.logger),this.expirer=new cD(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new iS(t2(t2({},HA),e?.storageOptions)),this.relayer=new EC({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new rD(this,this.logger),this.verify=new hD(this,this.logger,this.storage),this.echoClient=new pD(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new vD(this,this.logger,e?.telemetryEnabled)}static async init(e){const r=new Xh(e);await r.initialize();const i=await r.crypto.getClientId();return await r.storage.setItem(iP,i),r}get context(){return Qt(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(xm,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(xm)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const ED=Xh,r2="wc",i2=2,n2="client",ed=`${r2}@${i2}:${n2}:`,td={name:n2,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},s2="WALLETCONNECT_DEEPLINK_CHOICE",xD="proposal",o2="Proposal expired",$D="session",Ts=z.SEVEN_DAYS,ID="engine",xt={wc_sessionPropose:{req:{ttl:z.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:z.ONE_DAY,prompt:!1,tag:1104},res:{ttl:z.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:z.ONE_DAY,prompt:!1,tag:1106},res:{ttl:z.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:z.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:z.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:z.ONE_DAY,prompt:!1,tag:1112},res:{ttl:z.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:z.ONE_DAY,prompt:!1,tag:1114},res:{ttl:z.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:z.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:z.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1119}}},rd={min:z.FIVE_MINUTES,max:z.SEVEN_DAYS},ni={idle:"IDLE",active:"ACTIVE"},a2={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},SD="request",AD=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],PD="wc",OD="auth",CD="authKeys",DD="pairingTopics",MD="requests",Hc=`${PD}@${1.5}:${OD}:`,Wc=`${Hc}:PUB_KEY`;var TD=Object.defineProperty,RD=Object.defineProperties,ND=Object.getOwnPropertyDescriptors,c2=Object.getOwnPropertySymbols,BD=Object.prototype.hasOwnProperty,LD=Object.prototype.propertyIsEnumerable,id=(t,e,r)=>e in t?TD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ye=(t,e)=>{for(var r in e||(e={}))BD.call(e,r)&&id(t,r,e[r]);if(c2)for(var r of c2(e))LD.call(e,r)&&id(t,r,e[r]);return t},Wt=(t,e)=>RD(t,ND(e)),k=(t,e,r)=>id(t,typeof e!="symbol"?e+"":e,r);class FD extends JS{constructor(e){super(e),k(this,"name",ID),k(this,"events",new It.exports),k(this,"initialized",!1),k(this,"requestQueue",{state:ni.idle,queue:[]}),k(this,"sessionRequestQueue",{state:ni.idle,queue:[]}),k(this,"requestQueueDelay",z.ONE_SECOND),k(this,"expectedPairingMethodMap",new Map),k(this,"recentlyDeletedMap",new Map),k(this,"recentlyDeletedLimit",200),k(this,"relayMessageCache",[]),k(this,"pendingSessions",new Map),k(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(xt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},z.toMiliseconds(this.requestQueueDelay)))}),k(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const i=Wt(ye({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=i;let u=n,d,p=!1;try{if(u){const N=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),p=N.active}}catch(N){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),N}if(!u||!p){const{topic:N,uri:R}=await this.client.core.pairing.create();u=N,d=R}if(!u){const{message:N}=H("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(N)}const m=await this.client.core.crypto.generateKeyPair(),v=xt.wc_sessionPropose.req.ttl||z.FIVE_MINUTES,w=dt(v),S=Wt(ye(ye({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:_m}],proposer:{publicKey:m,metadata:this.client.metadata},expiryTimestamp:w,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Xr()}),x=fe("session_connect",S.id),{reject:A,resolve:C,done:D}=En(v,o2),T=({id:N})=>{N===S.id&&(this.client.events.off("proposal_expire",T),this.pendingSessions.delete(S.id),this.events.emit(x,{error:{message:o2,code:0}}))};return this.client.events.on("proposal_expire",T),this.events.once(x,({error:N,session:R})=>{this.client.events.off("proposal_expire",T),N?A(N):R&&C(R)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:S,throwOnFailedPublish:!0,clientRpcId:S.id}),await this.setProposal(S.id,S),{uri:d,approval:D}}),k(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(i){throw this.client.logger.error("pair() failed"),i}}),k(this,"approve",async r=>{var i,n,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(i=r?.id)==null?void 0:i.toString(),trace:[Mr.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(M){throw o.setError(On.no_internet_connection),M}try{await this.isValidProposalId(r?.id)}catch(M){throw this.client.logger.error(`approve() -> proposal.get(${r?.id}) failed`),o.setError(On.proposal_not_found),M}try{await this.isValidApprove(r)}catch(M){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(On.session_approve_namespace_validation_failure),M}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:p}=r,m=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:v,proposer:w,requiredNamespaces:S,optionalNamespaces:x}=m;let A=(n=this.client.core.eventClient)==null?void 0:n.getEvent({topic:v});A||(A=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:Mr.session_approve_started,properties:{topic:v,trace:[Mr.session_approve_started,Mr.session_namespaces_validation_success]}}));const C=await this.client.core.crypto.generateKeyPair(),D=w.publicKey,T=await this.client.core.crypto.generateSharedKey(C,D),N=ye(ye(ye({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:C,metadata:this.client.metadata},expiry:dt(Ts)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),p&&{sessionConfig:p}),R=$e.relay;A.addTrace(Mr.subscribing_session_topic);try{await this.client.core.relayer.subscribe(T,{transportType:R})}catch(M){throw A.setError(On.subscribe_session_topic_failure),M}A.addTrace(Mr.subscribe_session_topic_success);const B=Wt(ye({},N),{topic:T,requiredNamespaces:S,optionalNamespaces:x,pairingTopic:v,acknowledged:!1,self:N.controller,peer:{publicKey:w.publicKey,metadata:w.metadata},controller:C,transportType:$e.relay});await this.client.session.set(T,B),A.addTrace(Mr.store_session);try{A.addTrace(Mr.publishing_session_settle),await this.sendRequest({topic:T,method:"wc_sessionSettle",params:N,throwOnFailedPublish:!0}).catch(M=>{throw A?.setError(On.session_settle_publish_failure),M}),A.addTrace(Mr.session_settle_publish_success),A.addTrace(Mr.publishing_session_approve),await this.sendResult({id:a,topic:v,result:{relay:{protocol:c??"irn"},responderPublicKey:C},throwOnFailedPublish:!0}).catch(M=>{throw A?.setError(On.session_approve_publish_failure),M}),A.addTrace(Mr.session_approve_publish_success)}catch(M){throw this.client.logger.error(M),this.client.session.delete(T,ge("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(T),M}return this.client.core.eventClient.deleteEvent({eventId:A.eventId}),await this.client.core.pairing.updateMetadata({topic:v,metadata:w.metadata}),await this.client.proposal.delete(a,ge("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:v}),await this.setExpiry(T,dt(Ts)),{topic:T,acknowledged:()=>Promise.resolve(this.client.session.get(T))}}),k(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:i,reason:n}=r;let s;try{s=this.client.proposal.get(i).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),o}s&&(await this.sendError({id:i,topic:s,error:n,rpcOpts:xt.wc_sessionPropose.reject}),await this.client.proposal.delete(i,ge("USER_DISCONNECTED")))}),k(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:i,namespaces:n}=r,{done:s,resolve:o,reject:a}=En(),c=Xr(),l=An().toString(),u=this.client.session.get(i).namespaces;return this.events.once(fe("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(i,{namespaces:n}),await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:n},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(i,{namespaces:u}),a(d)}),{acknowledged:s}}),k(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:i}=r,n=Xr(),{done:s,resolve:o,reject:a}=En();return this.events.once(fe("session_extend",n),({error:c})=>{c?a(c):o()}),await this.setExpiry(i,dt(Ts)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:n,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),k(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(x){throw this.client.logger.error("request() -> isValidRequest() failed"),x}const{chainId:i,request:n,topic:s,expiry:o=xt.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);a?.transportType===$e.relay&&await this.confirmOnlineStateOrThrow();const c=Xr(),l=An().toString(),{done:u,resolve:d,reject:p}=En(o,"Request expired. Please try again.");this.events.once(fe("session_request",c),({error:x,result:A})=>{x?p(x):d(A)});const m="wc_sessionRequest",v=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(v)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:m,params:{request:Wt(ye({},n),{expiryTimestamp:dt(o)}),chainId:i},expiry:o,throwOnFailedPublish:!0,appLink:v}).catch(x=>p(x)),this.client.events.emit("session_request_sent",{topic:s,request:n,chainId:i,id:c}),await u();const w={request:Wt(ye({},n),{expiryTimestamp:dt(o)}),chainId:i},S=this.shouldSetTVF(m,w);return await Promise.all([new Promise(async x=>{await this.sendRequest(ye({clientRpcId:c,relayRpcId:l,topic:s,method:m,params:w,expiry:o,throwOnFailedPublish:!0},S&&{tvf:this.getTVFParams(c,w)})).catch(A=>p(A)),this.client.events.emit("session_request_sent",{topic:s,request:n,chainId:i,id:c}),x()}),new Promise(async x=>{var A;if(!((A=a.sessionConfig)!=null&&A.disableDeepLink)){const C=await jE(this.client.core.storage,s2);await LE({id:c,topic:s,wcDeepLink:C})}x()}),u()]).then(x=>x[2])}),k(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:i,response:n}=r,{id:s}=n,o=this.client.session.get(i);o.transportType===$e.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);ei(n)?await this.sendResult({id:s,topic:i,result:n.result,throwOnFailedPublish:!0,appLink:a}):mr(n)&&await this.sendError({id:s,topic:i,error:n.error,appLink:a}),this.cleanupAfterResponse(r)}),k(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(n){throw this.client.logger.error("ping() -> isValidPing() failed"),n}const{topic:i}=r;if(this.client.session.keys.includes(i)){const n=Xr(),s=An().toString(),{done:o,resolve:a,reject:c}=En();this.events.once(fe("session_ping",n),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:n,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(i)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:i}))}),k(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:i,event:n,chainId:s}=r,o=An().toString(),a=Xr();await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:n,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),k(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:i}=r;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:ge("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{const{message:n}=H("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(n)}}),k(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(i=>Y$(i,r)))),k(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),k(this,"authenticate",async(r,i)=>{var n;this.isInitialized(),this.isValidAuthenticate(r);const s=i&&this.client.core.linkModeSupportedApps.includes(i)&&((n=this.client.metadata.redirect)==null?void 0:n.linkMode),o=s?$e.link_mode:$e.relay;o===$e.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:p,exp:m,nbf:v,methods:w=[],expiry:S}=r,x=[...r.resources||[]],{topic:A,uri:C}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:A,uri:C}});const D=await this.client.core.crypto.generateKeyPair(),T=$c(D);if(await Promise.all([this.client.auth.authKeys.set(Wc,{responseTopic:T,publicKey:D}),this.client.auth.pairingTopics.set(T,{topic:T,pairingTopic:A})]),await this.client.core.relayer.subscribe(T,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${A}`),w.length>0){const{namespace:E}=_s(a[0]);let f=Cx(E,"request",w);wc(x)&&(f=Mx(f,x.pop())),x.push(f)}const N=S&&S>xt.wc_sessionAuthenticate.req.ttl?S:xt.wc_sessionAuthenticate.req.ttl,R={authPayload:{type:p??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:m,nbf:v,resources:x},requester:{publicKey:D,metadata:this.client.metadata},expiryTimestamp:dt(N)},B={eip155:{chains:a,methods:[...new Set(["personal_sign",...w])],events:["chainChanged","accountsChanged"]}},M={requiredNamespaces:{},optionalNamespaces:B,relays:[{protocol:"irn"}],pairingTopic:A,proposer:{publicKey:D,metadata:this.client.metadata},expiryTimestamp:dt(xt.wc_sessionPropose.req.ttl),id:Xr()},{done:U,resolve:$,reject:h}=En(N,"Request expired"),b=Xr(),_=fe("session_connect",M.id),g=fe("session_request",b),y=async({error:E,session:f})=>{this.events.off(g,I),E?h(E):f&&$({session:f})},I=async E=>{var f,P,F;if(await this.deletePendingAuthRequest(b,{message:"fulfilled",code:0}),E.error){const G=ge("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return E.error.code===G.code?void 0:(this.events.off(_,y),h(E.error.message))}await this.deleteProposal(M.id),this.events.off(_,y);const{cacaos:j,responder:L}=E.result,q=[],K=[];for(const G of j){await Zg({cacao:G,projectId:this.client.core.projectId})||(this.client.logger.error(G,"Signature verification failed"),h(ge("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Q}=G,ze=wc(Q.resources),ie=[lh(Q.iss)],de=yc(Q.iss);if(ze){const Ut=Qg(ze),we=Xg(ze);q.push(...Ut),ie.push(...we)}for(const Ut of ie)K.push(`${Ut}:${de}`)}const Z=await this.client.core.crypto.generateSharedKey(D,L.publicKey);let te;q.length>0&&(te={topic:Z,acknowledged:!0,self:{publicKey:D,metadata:this.client.metadata},peer:L,controller:L.publicKey,expiry:dt(Ts),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:A,namespaces:Mb([...new Set(q)],[...new Set(K)]),transportType:o},await this.client.core.relayer.subscribe(Z,{transportType:o}),await this.client.session.set(Z,te),A&&await this.client.core.pairing.updateMetadata({topic:A,metadata:L.metadata}),te=this.client.session.get(Z)),(f=this.client.metadata.redirect)!=null&&f.linkMode&&(P=L.metadata.redirect)!=null&&P.linkMode&&(F=L.metadata.redirect)!=null&&F.universal&&i&&(this.client.core.addLinkModeSupportedApp(L.metadata.redirect.universal),this.client.session.update(Z,{transportType:$e.link_mode})),$({auths:j,session:te})};this.events.once(_,y),this.events.once(g,I);let O;try{if(s){const E=Ki("wc_sessionAuthenticate",R,b);this.client.core.history.set(A,E);const f=await this.client.core.crypto.encode("",E,{type:Uo,encoding:Lo});O=Sc(i,A,f)}else await Promise.all([this.sendRequest({topic:A,method:"wc_sessionAuthenticate",params:R,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:b}),this.sendRequest({topic:A,method:"wc_sessionPropose",params:M,expiry:xt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:M.id})])}catch(E){throw this.events.off(_,y),this.events.off(g,I),E}return await this.setProposal(M.id,M),await this.setAuthRequest(b,{request:Wt(ye({},R),{verifyContext:{}}),pairingTopic:A,transportType:o}),{uri:O??C,response:U}}),k(this,"approveSessionAuthenticate",async r=>{const{id:i,auths:n}=r,s=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:[Cn.authenticated_session_approve_started]}});try{this.isInitialized()}catch(S){throw s.setError(ea.no_internet_connection),S}const o=this.getPendingAuthRequest(i);if(!o)throw s.setError(ea.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${i}`);const a=o.transportType||$e.relay;a===$e.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=$c(c),d={type:wi,receiverPublicKey:c,senderPublicKey:l},p=[],m=[];for(const S of n){if(!await Zg({cacao:S,projectId:this.client.core.projectId})){s.setError(ea.invalid_cacao);const T=ge("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:u,error:T,encodeOpts:d}),new Error(T.message)}s.addTrace(Cn.cacaos_verified);const{p:x}=S,A=wc(x.resources),C=[lh(x.iss)],D=yc(x.iss);if(A){const T=Qg(A),N=Xg(A);p.push(...T),C.push(...N)}for(const T of C)m.push(`${T}:${D}`)}const v=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(Cn.create_authenticated_session_topic);let w;if(p?.length>0){w={topic:v,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:dt(Ts),authentication:n,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Mb([...new Set(p)],[...new Set(m)]),transportType:a},s.addTrace(Cn.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(v,{transportType:a})}catch(S){throw s.setError(ea.subscribe_authenticated_session_topic_failure),S}s.addTrace(Cn.subscribe_authenticated_session_topic_success),await this.client.session.set(v,w),s.addTrace(Cn.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(Cn.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:i,result:{cacaos:n,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(S){throw s.setError(ea.authenticated_session_approve_publish_failure),S}return await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:w}}),k(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:i,reason:n}=r,s=this.getPendingAuthRequest(i);if(!s)throw new Error(`Could not find pending auth request with id ${i}`);s.transportType===$e.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=$c(o),l={type:wi,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:i,topic:c,error:n,encodeOpts:l,rpcOpts:xt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(i,{message:"rejected",code:0}),await this.client.proposal.delete(i,ge("USER_DISCONNECTED"))}),k(this,"formatAuthMessage",r=>{this.isInitialized();const{request:i,iss:n}=r;return Yg(i,n)}),k(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),k(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const i=this.client.core.pairing.pairings.get(r.pairingTopic),n=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==i.topic});if(n.length===0)return;this.client.logger.info(`Cleaning up ${n.length} duplicate pairing(s)`),await Promise.all(n.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}}),k(this,"deleteSession",async r=>{var i;const{topic:n,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(n);await this.client.core.relayer.unsubscribe(n),await this.client.session.delete(n,ge("USER_DISCONNECTED")),this.addToRecentlyDeleted(n,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(n)&&await this.client.core.crypto.deleteSymKey(n),s||this.client.core.expirer.del(n),this.client.core.storage.removeItem(s2).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===n&&this.deletePendingSessionRequest(l.id,ge("USER_DISCONNECTED"))}),n===((i=this.sessionRequestQueue.queue[0])==null?void 0:i.topic)&&(this.sessionRequestQueue.state=ni.idle),o&&this.client.events.emit("session_delete",{id:a,topic:n})}),k(this,"deleteProposal",async(r,i)=>{if(i)try{const n=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:n.pairingTopic});s?.setError(On.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,ge("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),k(this,"deletePendingSessionRequest",async(r,i,n=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,i),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),n&&(this.sessionRequestQueue.state=ni.idle,this.client.events.emit("session_request_expire",{id:r}))}),k(this,"deletePendingAuthRequest",async(r,i,n=!1)=>{await Promise.all([this.client.auth.requests.delete(r,i),n?Promise.resolve():this.client.core.expirer.del(r)])}),k(this,"setExpiry",async(r,i)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,i),await this.client.session.update(r,{expiry:i}))}),k(this,"setProposal",async(r,i)=>{this.client.core.expirer.set(r,dt(xt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,i)}),k(this,"setAuthRequest",async(r,i)=>{const{request:n,pairingTopic:s,transportType:o=$e.relay}=i;this.client.core.expirer.set(r,n.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:n.authPayload,requester:n.requester,expiryTimestamp:n.expiryTimestamp,id:r,pairingTopic:s,verifyContext:n.verifyContext,transportType:o})}),k(this,"setPendingSessionRequest",async r=>{const{id:i,topic:n,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||dt(xt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,a),await this.client.pendingRequest.set(i,{id:i,topic:n,params:s,verifyContext:o})}),k(this,"sendRequest",async r=>{const{topic:i,method:n,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=r,p=Ki(n,s,c);let m;const v=!!u;try{const x=v?Lo:Vi;m=await this.client.core.crypto.encode(i,p,{encoding:x})}catch(x){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),x}let w;if(AD.includes(n)){const x=Zr(JSON.stringify(p)),A=Zr(m);w=await this.client.core.verify.register({id:A,decryptedId:x})}const S=xt[n].req;if(S.attestation=w,o&&(S.ttl=o),a&&(S.id=a),this.client.core.history.set(i,p),v){const x=Sc(u,i,m);await global.Linking.openURL(x,this.client.name)}else{const x=xt[n].req;o&&(x.ttl=o),a&&(x.id=a),x.tvf=Wt(ye({},d),{correlationId:p.id}),l?(x.internal=Wt(ye({},x.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,m,x)):this.client.core.relayer.publish(i,m,x).catch(A=>this.client.logger.error(A))}return p.id}),k(this,"sendResult",async r=>{const{id:i,topic:n,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,l=Lc(i,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const v=d?Lo:Vi;u=await this.client.core.crypto.encode(n,l,Wt(ye({},a||{}),{encoding:v}))}catch(v){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${n} failed`),v}let p,m;try{p=await this.client.core.history.get(n,i);const v=p.request;try{this.shouldSetTVF(v.method,v.params)&&(m=this.getTVFParams(i,v.params,s))}catch(w){this.client.logger.warn("sendResult() -> getTVFParams() failed",w)}}catch(v){throw this.client.logger.error(`sendResult() -> history.get(${n}, ${i}) failed`),v}if(d){const v=Sc(c,n,u);await global.Linking.openURL(v,this.client.name)}else{const v=p.request.method,w=xt[v].res;w.tvf=Wt(ye({},m),{correlationId:i}),o?(w.internal=Wt(ye({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,u,w)):this.client.core.relayer.publish(n,u,w).catch(S=>this.client.logger.error(S))}await this.client.core.history.resolve(l)}),k(this,"sendError",async r=>{const{id:i,topic:n,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=r,l=Fc(i,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const m=d?Lo:Vi;u=await this.client.core.crypto.encode(n,l,Wt(ye({},o||{}),{encoding:m}))}catch(m){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${n} failed`),m}let p;try{p=await this.client.core.history.get(n,i)}catch(m){throw this.client.logger.error(`sendError() -> history.get(${n}, ${i}) failed`),m}if(d){const m=Sc(c,n,u);await global.Linking.openURL(m,this.client.name)}else{const m=p.request.method,v=a||xt[m].res;this.client.core.relayer.publish(n,u,v)}await this.client.core.history.resolve(l)}),k(this,"cleanup",async()=>{const r=[],i=[];this.client.session.getAll().forEach(n=>{let s=!1;qi(n.expiry)&&(s=!0),this.client.core.crypto.keychain.has(n.topic)||(s=!0),s&&r.push(n.topic)}),this.client.proposal.getAll().forEach(n=>{qi(n.expiryTimestamp)&&i.push(n.id)}),await Promise.all([...r.map(n=>this.deleteSession({topic:n})),...i.map(n=>this.deleteProposal(n))])}),k(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),k(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),k(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ni.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ni.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=ni.idle}),k(this,"processRequest",async r=>{const{topic:i,payload:n,attestation:s,transportType:o,encryptedId:a}=r,c=n.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:i,payload:n,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(i,n);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(i,n);case"wc_sessionExtend":return await this.onSessionExtendRequest(i,n);case"wc_sessionPing":return await this.onSessionPingRequest(i,n);case"wc_sessionDelete":return await this.onSessionDeleteRequest(i,n);case"wc_sessionRequest":return await this.onSessionRequest({topic:i,payload:n,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(i,n);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:i,payload:n,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),k(this,"onRelayEventResponse",async r=>{const{topic:i,payload:n,transportType:s}=r,o=(await this.client.core.history.get(i,n.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(i,n,s);case"wc_sessionSettle":return this.onSessionSettleResponse(i,n);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,n);case"wc_sessionExtend":return this.onSessionExtendResponse(i,n);case"wc_sessionPing":return this.onSessionPingResponse(i,n);case"wc_sessionRequest":return this.onSessionRequestResponse(i,n);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,n);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),k(this,"onRelayEventUnknownPayload",r=>{const{topic:i}=r,{message:n}=H("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(n)}),k(this,"shouldIgnorePairingRequest",r=>{const{topic:i,requestMethod:n}=r,s=this.expectedPairingMethodMap.get(i);return!s||s.includes(n)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),k(this,"onSessionProposeRequest",async r=>{const{topic:i,payload:n,attestation:s,encryptedId:o}=r,{params:a,id:c}=n;try{const l=this.client.core.eventClient.getEvent({topic:i});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l?.setError(xi.proposal_listener_not_found)),this.isValidConnect(ye({},n.params));const u=a.expiryTimestamp||dt(xt.wc_sessionPropose.req.ttl),d=ye({id:c,pairingTopic:i,expiryTimestamp:u},a);await this.setProposal(c,d);const p=await this.getVerifyContext({attestationId:s,hash:Zr(JSON.stringify(n)),encryptedId:o,metadata:d.proposer.metadata});l?.addTrace(ri.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:p})}catch(l){await this.sendError({id:c,topic:i,error:l,rpcOpts:xt.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),k(this,"onSessionProposeResponse",async(r,i,n)=>{const{id:s}=i;if(ei(i)){const{result:o}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:r,proposalId:s,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:n});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else if(mr(i)){await this.client.proposal.delete(s,ge("USER_DISCONNECTED"));const o=fe("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:i.error})}}),k(this,"onSessionSettleRequest",async(r,i)=>{const{id:n,params:s}=i;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:p}=i.params,m=[...this.pendingSessions.values()].find(S=>S.sessionTopic===r);if(!m)return this.client.logger.error(`Pending session not found for topic ${r}`);const v=this.client.proposal.get(m.proposalId),w=Wt(ye(ye(ye({topic:r,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:m.pairingTopic,requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces,controller:a.publicKey,self:{publicKey:m.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),p&&{sessionConfig:p}),{transportType:$e.relay});await this.client.session.set(w.topic,w),await this.setExpiry(w.topic,w.expiry),await this.client.core.pairing.updateMetadata({topic:m.pairingTopic,metadata:w.peer.metadata}),this.client.events.emit("session_connect",{session:w}),this.events.emit(fe("session_connect",m.proposalId),{session:w}),this.pendingSessions.delete(m.proposalId),this.deleteProposal(m.proposalId,!1),this.cleanupDuplicatePairings(w),await this.sendResult({id:i.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:n,topic:r,error:o}),this.client.logger.error(o)}}),k(this,"onSessionSettleResponse",async(r,i)=>{const{id:n}=i;ei(i)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(fe("session_approve",n),{})):mr(i)&&(await this.client.session.delete(r,ge("USER_DISCONNECTED")),this.events.emit(fe("session_approve",n),{error:i.error}))}),k(this,"onSessionUpdateRequest",async(r,i)=>{const{params:n,id:s}=i;try{const o=`${r}_session_update`,a=Wo.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:ge("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ye({topic:r},n));try{Wo.set(o,s),await this.client.session.update(r,{namespaces:n.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(c){throw Wo.delete(o),c}this.client.events.emit("session_update",{id:s,topic:r,params:n})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),k(this,"isRequestOutOfSync",(r,i)=>i.toString().slice(0,-3)<r.toString().slice(0,-3)),k(this,"onSessionUpdateResponse",(r,i)=>{const{id:n}=i,s=fe("session_update",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);ei(i)?this.events.emit(fe("session_update",n),{}):mr(i)&&this.events.emit(fe("session_update",n),{error:i.error})}),k(this,"onSessionExtendRequest",async(r,i)=>{const{id:n}=i;try{this.isValidExtend({topic:r}),await this.setExpiry(r,dt(Ts)),await this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:n,topic:r})}catch(s){await this.sendError({id:n,topic:r,error:s}),this.client.logger.error(s)}}),k(this,"onSessionExtendResponse",(r,i)=>{const{id:n}=i,s=fe("session_extend",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);ei(i)?this.events.emit(fe("session_extend",n),{}):mr(i)&&this.events.emit(fe("session_extend",n),{error:i.error})}),k(this,"onSessionPingRequest",async(r,i)=>{const{id:n}=i;try{this.isValidPing({topic:r}),await this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:n,topic:r})}catch(s){await this.sendError({id:n,topic:r,error:s}),this.client.logger.error(s)}}),k(this,"onSessionPingResponse",(r,i)=>{const{id:n}=i,s=fe("session_ping",n);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);ei(i)?this.events.emit(fe("session_ping",n),{}):mr(i)&&this.events.emit(fe("session_ping",n),{error:i.error})},500)}),k(this,"onSessionDeleteRequest",async(r,i)=>{const{id:n}=i;try{this.isValidDisconnect({topic:r,reason:i.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(_t.publish,async()=>{s(await this.deleteSession({topic:r,id:n}))})}),this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:ge("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),k(this,"onSessionRequest",async r=>{var i,n,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=r,{id:d,params:p}=a;try{await this.isValidRequest(ye({topic:o},p));const m=this.client.session.get(o),v=await this.getVerifyContext({attestationId:c,hash:Zr(JSON.stringify(Ki("wc_sessionRequest",p,d))),encryptedId:l,metadata:m.peer.metadata,transportType:u}),w={id:d,topic:o,params:p,verifyContext:v};await this.setPendingSessionRequest(w),u===$e.link_mode&&(i=m.peer.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp((n=m.peer.metadata.redirect)==null?void 0:n.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(w):(this.addSessionRequestToSessionRequestQueue(w),this.processSessionRequestQueue())}catch(m){await this.sendError({id:d,topic:o,error:m}),this.client.logger.error(m)}}),k(this,"onSessionRequestResponse",(r,i)=>{const{id:n}=i,s=fe("session_request",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);ei(i)?this.events.emit(fe("session_request",n),{result:i.result}):mr(i)&&this.events.emit(fe("session_request",n),{error:i.error})}),k(this,"onSessionEventRequest",async(r,i)=>{const{id:n,params:s}=i;try{const o=`${r}_session_event_${s.event.name}`,a=Wo.get(o);if(a&&this.isRequestOutOfSync(a,n)){this.client.logger.info(`Discarding out of sync request - ${n}`);return}this.isValidEmit(ye({topic:r},s)),this.client.events.emit("session_event",{id:n,topic:r,params:s}),Wo.set(o,n)}catch(o){await this.sendError({id:n,topic:r,error:o}),this.client.logger.error(o)}}),k(this,"onSessionAuthenticateResponse",(r,i)=>{const{id:n}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:i}),ei(i)?this.events.emit(fe("session_request",n),{result:i.result}):mr(i)&&this.events.emit(fe("session_request",n),{error:i.error})}),k(this,"onSessionAuthenticateRequest",async r=>{var i;const{topic:n,payload:s,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:l,authPayload:u,expiryTimestamp:d}=s.params,p=await this.getVerifyContext({attestationId:o,hash:Zr(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),m={requester:l,pairingTopic:n,id:s.id,authPayload:u,verifyContext:p,expiryTimestamp:d};await this.setAuthRequest(s.id,{request:m,pairingTopic:n,transportType:c}),c===$e.link_mode&&(i=l.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:n,params:s.params,id:s.id,verifyContext:p})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),p=this.getAppLinkIfEnabled(s.params.requester.metadata,c),m={type:wi,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:s.id,topic:n,error:l,encodeOpts:m,rpcOpts:xt.wc_sessionAuthenticate.autoReject,appLink:p})}}),k(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),k(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ni.idle,this.processSessionRequestQueue()},z.toMiliseconds(this.requestQueueDelay))}),k(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:i})=>{const n=this.client.core.history.pending;n.length>0&&n.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=fe("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(fe("session_request",s.request.id),{error:i})})}),k(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ni.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ni.active,this.emitSessionRequest(r)}catch(i){this.client.logger.error(i)}}),k(this,"emitSessionRequest",r=>{this.client.events.emit("session_request",r)}),k(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const i=this.client.proposal.getAll().find(n=>n.pairingTopic===r.topic);i&&this.onSessionProposeRequest({topic:r.topic,payload:Ki("wc_sessionPropose",Wt(ye({},i),{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties,scopedProperties:i.scopedProperties}),i.id)})}),k(this,"isValidConnect",async r=>{if(!Yt(r)){const{message:l}=H("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(l)}const{pairingTopic:i,requiredNamespaces:n,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=r;if(Ct(i)||await this.isValidPairingTopic(i),!cI(c,!0)){const{message:l}=H("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Ct(n)&&Ho(n)!==0&&this.validateNamespaces(n,"requiredNamespaces"),!Ct(s)&&Ho(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Ct(o)||this.validateSessionProps(o,"sessionProperties"),!Ct(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(n||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),k(this,"validateNamespaces",(r,i)=>{const n=aI(r,"connect()",i);if(n)throw new Error(n.message)}),k(this,"isValidApprove",async r=>{if(!Yt(r))throw new Error(H("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:i,namespaces:n,relayProtocol:s,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(i),await this.isValidProposalId(i);const c=this.client.proposal.get(i),l=Ih(n,"approve()");if(l)throw new Error(l.message);const u=Lb(c.requiredNamespaces,n,"approve()");if(u)throw new Error(u.message);if(!ke(s,!0)){const{message:d}=H("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}if(Ct(o)||this.validateSessionProps(o,"sessionProperties"),!Ct(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(n));if(!Object.keys(a).every(p=>d.has(p)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),k(this,"isValidReject",async r=>{if(!Yt(r)){const{message:s}=H("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:i,reason:n}=r;if(this.checkRecentlyDeleted(i),await this.isValidProposalId(i),!uI(n)){const{message:s}=H("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(n)}`);throw new Error(s)}}),k(this,"isValidSessionSettleRequest",r=>{if(!Yt(r)){const{message:l}=H("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:i,controller:n,namespaces:s,expiry:o}=r;if(!Nb(i)){const{message:l}=H("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=tI(n,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Ih(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(qi(o)){const{message:l}=H("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),k(this,"isValidUpdate",async r=>{if(!Yt(r)){const{message:c}=H("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:i,namespaces:n}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const s=this.client.session.get(i),o=Ih(n,"update()");if(o)throw new Error(o.message);const a=Lb(s.requiredNamespaces,n,"update()");if(a)throw new Error(a.message)}),k(this,"isValidExtend",async r=>{if(!Yt(r)){const{message:n}=H("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(n)}const{topic:i}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i)}),k(this,"isValidRequest",async r=>{if(!Yt(r)){const{message:c}=H("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:i,request:n,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const{namespaces:a}=this.client.session.get(i);if(!Bb(a,s)){const{message:c}=H("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!hI(n)){const{message:c}=H("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw new Error(c)}if(!pI(a,s,n.method)){const{message:c}=H("MISSING_OR_INVALID",`request() method: ${n.method}`);throw new Error(c)}if(o&&!vI(o,rd)){const{message:c}=H("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${rd.min} and ${rd.max}`);throw new Error(c)}}),k(this,"isValidRespond",async r=>{var i;if(!Yt(r)){const{message:o}=H("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:n,response:s}=r;try{await this.isValidSessionTopic(n)}catch(o){throw(i=r?.response)!=null&&i.id&&this.cleanupAfterResponse(r),o}if(!dI(s)){const{message:o}=H("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),k(this,"isValidPing",async r=>{if(!Yt(r)){const{message:n}=H("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)}),k(this,"isValidEmit",async r=>{if(!Yt(r)){const{message:a}=H("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:i,event:n,chainId:s}=r;await this.isValidSessionTopic(i);const{namespaces:o}=this.client.session.get(i);if(!Bb(o,s)){const{message:a}=H("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!fI(n)){const{message:a}=H("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(a)}if(!gI(o,s,n.name)){const{message:a}=H("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(a)}}),k(this,"isValidDisconnect",async r=>{if(!Yt(r)){const{message:n}=H("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)}),k(this,"isValidAuthenticate",r=>{const{chains:i,uri:n,domain:s,nonce:o}=r;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!ke(n,!1))throw new Error("uri is required parameter");if(!ke(s,!1))throw new Error("domain is required parameter");if(!ke(o,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(c=>_s(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=_s(i[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),k(this,"getVerifyContext",async r=>{const{attestationId:i,hash:n,encryptedId:s,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||Xo,validation:"UNKNOWN",origin:o.url||""}};try{if(a===$e.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:i,hash:n,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),k(this,"validateSessionProps",(r,i)=>{Object.values(r).forEach((n,s)=>{if(n==null){const{message:o}=H("MISSING_OR_INVALID",`${i} must contain an existing value for each key. Received: ${n} for key ${Object.keys(r)[s]}`);throw new Error(o)}})}),k(this,"getPendingAuthRequest",r=>{const i=this.client.auth.requests.get(r);return typeof i=="object"?i:void 0}),k(this,"addToRecentlyDeleted",(r,i)=>{if(this.recentlyDeletedMap.set(r,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let n=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(n++>=s)break;this.recentlyDeletedMap.delete(o)}}}),k(this,"checkRecentlyDeleted",r=>{const i=this.recentlyDeletedMap.get(r);if(i){const{message:n}=H("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${r}`);throw new Error(n)}}),k(this,"isLinkModeEnabled",(r,i)=>{var n,s,o,a,c,l,u,d,p;return!r||i!==$e.link_mode?!1:((s=(n=this.client.metadata)==null?void 0:n.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=r?.redirect)==null?void 0:u.universal)!==void 0&&((d=r?.redirect)==null?void 0:d.universal)!==""&&((p=r?.redirect)==null?void 0:p.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),k(this,"getAppLinkIfEnabled",(r,i)=>{var n;return this.isLinkModeEnabled(r,i)?(n=r?.redirect)==null?void 0:n.universal:void 0}),k(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const i=Tg(r,"topic")||"",n=decodeURIComponent(Tg(r,"wc_ev")||""),s=this.client.session.keys.includes(i);s&&this.client.session.update(i,{transportType:$e.link_mode}),this.client.core.dispatchEnvelope({topic:i,message:n,sessionExists:s})}),k(this,"registerLinkModeListeners",async()=>{var r;if(ih()||ji()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const i=global==null?void 0:global.Linking;if(typeof i<"u"){i.addEventListener("url",this.handleLinkModeMessage,this.client.name);const n=await i.getInitialURL();n&&setTimeout(()=>{this.handleLinkModeMessage({url:n})},50)}}}),k(this,"shouldSetTVF",(r,i)=>{if(!i||r!=="wc_sessionRequest")return!1;const{request:n}=i;return Object.keys(a2).includes(n.method)}),k(this,"getTVFParams",(r,i,n)=>{var s,o;try{const a=i.request.method,c=this.extractTxHashesFromResult(a,n);return Wt(ye({correlationId:r,rpcMethods:[a],chainId:i.chainId},this.isValidContractData(i.request.params)&&{contractAddresses:[(o=(s=i.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),k(this,"isValidContractData",r=>{var i;if(!r)return!1;try{const n=r?.data||((i=r?.[0])==null?void 0:i.data);if(!n.startsWith("0x"))return!1;const s=n.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),k(this,"extractTxHashesFromResult",(r,i)=>{try{const n=a2[r];if(typeof i=="string")return[i];const s=i[n.key];if(Yr(s))return r==="solana_signAllTransactions"?s.map(o=>bx(o)):s;if(typeof s=="string")return[s]}catch(n){this.client.logger.warn("Error extracting tx hashes from result",n)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[i,n]of Object.entries(r))for(const s of n)try{await this.onProviderMessageEvent({topic:i,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${i}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=H("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(_t.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:i,attestation:n,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Wc)?this.client.auth.authKeys.get(Wc):{responseTopic:void 0,publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,i,{receiverPublicKey:o,encoding:s===$e.link_mode?Lo:Vi});Fh(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:n,transportType:s,encryptedId:Zr(i)})):Uc(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(r,i)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(wr.expired,async e=>{const{topic:r,id:i}=Mg(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,H("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,H("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(Pn.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Pn.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!ke(e,!1)){const{message:r}=H("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=H("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(qi(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=H("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!ke(e,!1)){const{message:r}=H("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=H("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(qi(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=H("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=H("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(ke(e,!1)){const{message:r}=H("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=H("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!lI(e)){const{message:r}=H("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=H("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(qi(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=H("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class UD extends Dn{constructor(e,r){super(e,r,xD,ed),this.core=e,this.logger=r}}class jD extends Dn{constructor(e,r){super(e,r,$D,ed),this.core=e,this.logger=r}}class kD extends Dn{constructor(e,r){super(e,r,SD,ed,i=>i.id),this.core=e,this.logger=r}}class qD extends Dn{constructor(e,r){super(e,r,CD,Hc,()=>Wc),this.core=e,this.logger=r}}class zD extends Dn{constructor(e,r){super(e,r,DD,Hc),this.core=e,this.logger=r}}class HD extends Dn{constructor(e,r){super(e,r,MD,Hc,i=>i.id),this.core=e,this.logger=r}}var WD=Object.defineProperty,VD=(t,e,r)=>e in t?WD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nd=(t,e,r)=>VD(t,typeof e!="symbol"?e+"":e,r);class KD{constructor(e,r){this.core=e,this.logger=r,nd(this,"authKeys"),nd(this,"pairingTopics"),nd(this,"requests"),this.authKeys=new qD(this.core,this.logger),this.pairingTopics=new zD(this.core,this.logger),this.requests=new HD(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var GD=Object.defineProperty,ZD=(t,e,r)=>e in t?GD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,se=(t,e,r)=>ZD(t,typeof e!="symbol"?e+"":e,r);class sd extends YS{constructor(e){super(e),se(this,"protocol",r2),se(this,"version",i2),se(this,"name",td.name),se(this,"metadata"),se(this,"core"),se(this,"logger"),se(this,"events",new It.exports.EventEmitter),se(this,"engine"),se(this,"session"),se(this,"proposal"),se(this,"pendingRequest"),se(this,"auth"),se(this,"signConfig"),se(this,"on",(i,n)=>this.events.on(i,n)),se(this,"once",(i,n)=>this.events.once(i,n)),se(this,"off",(i,n)=>this.events.off(i,n)),se(this,"removeListener",(i,n)=>this.events.removeListener(i,n)),se(this,"removeAllListeners",i=>this.events.removeAllListeners(i)),se(this,"connect",async i=>{try{return await this.engine.connect(i)}catch(n){throw this.logger.error(n.message),n}}),se(this,"pair",async i=>{try{return await this.engine.pair(i)}catch(n){throw this.logger.error(n.message),n}}),se(this,"approve",async i=>{try{return await this.engine.approve(i)}catch(n){throw this.logger.error(n.message),n}}),se(this,"reject",async i=>{try{return await this.engine.reject(i)}catch(n){throw this.logger.error(n.message),n}}),se(this,"update",async i=>{try{return await this.engine.update(i)}catch(n){throw this.logger.error(n.message),n}}),se(this,"extend",async i=>{try{return await this.engine.extend(i)}catch(n){throw this.logger.error(n.message),n}}),se(this,"request",async i=>{try{return await this.engine.request(i)}catch(n){throw this.logger.error(n.message),n}}),se(this,"respond",async i=>{try{return await this.engine.respond(i)}catch(n){throw this.logger.error(n.message),n}}),se(this,"ping",async i=>{try{return await this.engine.ping(i)}catch(n){throw this.logger.error(n.message),n}}),se(this,"emit",async i=>{try{return await this.engine.emit(i)}catch(n){throw this.logger.error(n.message),n}}),se(this,"disconnect",async i=>{try{return await this.engine.disconnect(i)}catch(n){throw this.logger.error(n.message),n}}),se(this,"find",i=>{try{return this.engine.find(i)}catch(n){throw this.logger.error(n.message),n}}),se(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}}),se(this,"authenticate",async(i,n)=>{try{return await this.engine.authenticate(i,n)}catch(s){throw this.logger.error(s.message),s}}),se(this,"formatAuthMessage",i=>{try{return this.engine.formatAuthMessage(i)}catch(n){throw this.logger.error(n.message),n}}),se(this,"approveSessionAuthenticate",async i=>{try{return await this.engine.approveSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}}),se(this,"rejectSessionAuthenticate",async i=>{try{return await this.engine.rejectSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}}),this.name=e?.name||td.name,this.metadata=e?.metadata||Og(),this.signConfig=e?.signConfig;const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Jr(Bc({level:e?.logger||td.logger}));this.core=e?.core||new ED(e),this.logger=zt(r,this.name),this.session=new jD(this.core,this.logger),this.proposal=new UD(this.core,this.logger),this.pendingRequest=new kD(this.core,this.logger),this.engine=new FD(this),this.auth=new KD(this.core,this.logger)}static async init(e){const r=new sd(e);return await r.initialize(),r}get context(){return Qt(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},z.toMiliseconds(z.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var od={exports:{}};(function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof jt<"u"&&jt,i=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof jt<"u"&&jt||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(g){return g&&DataView.prototype.isPrototypeOf(g)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(g){return g&&u.indexOf(Object.prototype.toString.call(g))>-1};function p(g){if(typeof g!="string"&&(g=String(g)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(g)||g==="")throw new TypeError('Invalid character in header field name: "'+g+'"');return g.toLowerCase()}function m(g){return typeof g!="string"&&(g=String(g)),g}function v(g){var y={next:function(){var I=g.shift();return{done:I===void 0,value:I}}};return c.iterable&&(y[Symbol.iterator]=function(){return y}),y}function w(g){this.map={},g instanceof w?g.forEach(function(y,I){this.append(I,y)},this):Array.isArray(g)?g.forEach(function(y){if(y.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+y.length);this.append(y[0],y[1])},this):g&&Object.getOwnPropertyNames(g).forEach(function(y){this.append(y,g[y])},this)}w.prototype.append=function(g,y){g=p(g),y=m(y);var I=this.map[g];this.map[g]=I?I+", "+y:y},w.prototype.delete=function(g){delete this.map[p(g)]},w.prototype.get=function(g){return g=p(g),this.has(g)?this.map[g]:null},w.prototype.has=function(g){return this.map.hasOwnProperty(p(g))},w.prototype.set=function(g,y){this.map[p(g)]=m(y)},w.prototype.forEach=function(g,y){for(var I in this.map)this.map.hasOwnProperty(I)&&g.call(y,this.map[I],I,this)},w.prototype.keys=function(){var g=[];return this.forEach(function(y,I){g.push(I)}),v(g)},w.prototype.values=function(){var g=[];return this.forEach(function(y){g.push(y)}),v(g)},w.prototype.entries=function(){var g=[];return this.forEach(function(y,I){g.push([I,y])}),v(g)},c.iterable&&(w.prototype[Symbol.iterator]=w.prototype.entries);function S(g){if(!g._noBody){if(g.bodyUsed)return Promise.reject(new TypeError("Already read"));g.bodyUsed=!0}}function x(g){return new Promise(function(y,I){g.onload=function(){y(g.result)},g.onerror=function(){I(g.error)}})}function A(g){var y=new FileReader,I=x(y);return y.readAsArrayBuffer(g),I}function C(g){var y=new FileReader,I=x(y),O=/charset=([A-Za-z0-9_-]+)/.exec(g.type),E=O?O[1]:"utf-8";return y.readAsText(g,E),I}function D(g){for(var y=new Uint8Array(g),I=new Array(y.length),O=0;O<y.length;O++)I[O]=String.fromCharCode(y[O]);return I.join("")}function T(g){if(g.slice)return g.slice(0);var y=new Uint8Array(g.byteLength);return y.set(new Uint8Array(g)),y.buffer}function N(){return this.bodyUsed=!1,this._initBody=function(g){this.bodyUsed=this.bodyUsed,this._bodyInit=g,g?typeof g=="string"?this._bodyText=g:c.blob&&Blob.prototype.isPrototypeOf(g)?this._bodyBlob=g:c.formData&&FormData.prototype.isPrototypeOf(g)?this._bodyFormData=g:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)?this._bodyText=g.toString():c.arrayBuffer&&c.blob&&l(g)?(this._bodyArrayBuffer=T(g.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(g)||d(g))?this._bodyArrayBuffer=T(g):this._bodyText=g=Object.prototype.toString.call(g):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof g=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var g=S(this);if(g)return g;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var g=S(this);return g||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(A);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var g=S(this);if(g)return g;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(D(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(U)}),this.json=function(){return this.text().then(JSON.parse)},this}var R=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function B(g){var y=g.toUpperCase();return R.indexOf(y)>-1?y:g}function M(g,y){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');y=y||{};var I=y.body;if(g instanceof M){if(g.bodyUsed)throw new TypeError("Already read");this.url=g.url,this.credentials=g.credentials,y.headers||(this.headers=new w(g.headers)),this.method=g.method,this.mode=g.mode,this.signal=g.signal,!I&&g._bodyInit!=null&&(I=g._bodyInit,g.bodyUsed=!0)}else this.url=String(g);if(this.credentials=y.credentials||this.credentials||"same-origin",(y.headers||!this.headers)&&(this.headers=new w(y.headers)),this.method=B(y.method||this.method||"GET"),this.mode=y.mode||this.mode||null,this.signal=y.signal||this.signal||function(){if("AbortController"in a){var f=new AbortController;return f.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&I)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(I),(this.method==="GET"||this.method==="HEAD")&&(y.cache==="no-store"||y.cache==="no-cache")){var O=/([?&])_=[^&]*/;if(O.test(this.url))this.url=this.url.replace(O,"$1_="+new Date().getTime());else{var E=/\?/;this.url+=(E.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function U(g){var y=new FormData;return g.trim().split("&").forEach(function(I){if(I){var O=I.split("="),E=O.shift().replace(/\+/g," "),f=O.join("=").replace(/\+/g," ");y.append(decodeURIComponent(E),decodeURIComponent(f))}}),y}function $(g){var y=new w,I=g.replace(/\r?\n[\t ]+/g," ");return I.split("\r").map(function(O){return O.indexOf(`
`)===0?O.substr(1,O.length):O}).forEach(function(O){var E=O.split(":"),f=E.shift().trim();if(f){var P=E.join(":").trim();try{y.append(f,P)}catch(F){console.warn("Response "+F.message)}}}),y}N.call(M.prototype);function h(g,y){if(!(this instanceof h))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(y||(y={}),this.type="default",this.status=y.status===void 0?200:y.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=y.statusText===void 0?"":""+y.statusText,this.headers=new w(y.headers),this.url=y.url||"",this._initBody(g)}N.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},h.error=function(){var g=new h(null,{status:200,statusText:""});return g.ok=!1,g.status=0,g.type="error",g};var b=[301,302,303,307,308];h.redirect=function(g,y){if(b.indexOf(y)===-1)throw new RangeError("Invalid status code");return new h(null,{status:y,headers:{location:g}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(y,I){this.message=y,this.name=I;var O=Error(y);this.stack=O.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function _(g,y){return new Promise(function(I,O){var E=new M(g,y);if(E.signal&&E.signal.aborted)return O(new o.DOMException("Aborted","AbortError"));var f=new XMLHttpRequest;function P(){f.abort()}f.onload=function(){var L={statusText:f.statusText,headers:$(f.getAllResponseHeaders()||"")};E.url.indexOf("file://")===0&&(f.status<200||f.status>599)?L.status=200:L.status=f.status,L.url="responseURL"in f?f.responseURL:L.headers.get("X-Request-URL");var q="response"in f?f.response:f.responseText;setTimeout(function(){I(new h(q,L))},0)},f.onerror=function(){setTimeout(function(){O(new TypeError("Network request failed"))},0)},f.ontimeout=function(){setTimeout(function(){O(new TypeError("Network request timed out"))},0)},f.onabort=function(){setTimeout(function(){O(new o.DOMException("Aborted","AbortError"))},0)};function F(L){try{return L===""&&a.location.href?a.location.href:L}catch{return L}}if(f.open(E.method,F(E.url),!0),E.credentials==="include"?f.withCredentials=!0:E.credentials==="omit"&&(f.withCredentials=!1),"responseType"in f&&(c.blob?f.responseType="blob":c.arrayBuffer&&(f.responseType="arraybuffer")),y&&typeof y.headers=="object"&&!(y.headers instanceof w||a.Headers&&y.headers instanceof a.Headers)){var j=[];Object.getOwnPropertyNames(y.headers).forEach(function(L){j.push(p(L)),f.setRequestHeader(L,m(y.headers[L]))}),E.headers.forEach(function(L,q){j.indexOf(q)===-1&&f.setRequestHeader(q,L)})}else E.headers.forEach(function(L,q){f.setRequestHeader(q,L)});E.signal&&(E.signal.addEventListener("abort",P),f.onreadystatechange=function(){f.readyState===4&&E.signal.removeEventListener("abort",P)}),f.send(typeof E._bodyInit>"u"?null:E._bodyInit)})}return _.polyfill=!0,a.fetch||(a.fetch=_,a.Headers=w,a.Request=M,a.Response=h),o.Headers=w,o.Request=M,o.Response=h,o.fetch=_,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var n=r.fetch?r:i;e=n.fetch,e.default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,t.exports=e})(od,od.exports);var l2=xy(od.exports),YD=Object.defineProperty,JD=Object.defineProperties,QD=Object.getOwnPropertyDescriptors,u2=Object.getOwnPropertySymbols,XD=Object.prototype.hasOwnProperty,eM=Object.prototype.propertyIsEnumerable,h2=(t,e,r)=>e in t?YD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,d2=(t,e)=>{for(var r in e||(e={}))XD.call(e,r)&&h2(t,r,e[r]);if(u2)for(var r of u2(e))eM.call(e,r)&&h2(t,r,e[r]);return t},f2=(t,e)=>JD(t,QD(e));const tM={Accept:"application/json","Content-Type":"application/json"},rM="POST",p2={headers:tM,method:rM},g2=10;class Rr{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new It.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!um(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=fi(e),i=await(await l2(this.url,f2(d2({},p2),{body:r}))).json();this.onPayload({data:i})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!um(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((i,n)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),n(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return n(new Error("HTTP connection is missing or invalid"));i()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=fi({id:1,jsonrpc:"2.0",method:"test",params:[]});await l2(e,f2(d2({},p2),{body:r}))}this.onOpen()}catch(r){const i=this.parseError(r);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?fn(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const i=this.parseError(r),n=i.message||i.toString(),s=Fc(e,n);this.events.emit("payload",s)}parseError(e,r=this.url){return nm(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>g2&&this.events.setMaxListeners(g2)}}var iM=Object.defineProperty,b2=Object.getOwnPropertySymbols,nM=Object.prototype.hasOwnProperty,sM=Object.prototype.propertyIsEnumerable,m2=(t,e,r)=>e in t?iM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,v2=(t,e)=>{for(var r in e||(e={}))nM.call(e,r)&&m2(t,r,e[r]);if(b2)for(var r of b2(e))sM.call(e,r)&&m2(t,r,e[r]);return t};const y2="error",oM="wss://relay.walletconnect.org",aM="wc",cM="universal_provider",Vc=`${aM}@2:${cM}:`,w2="https://rpc.walletconnect.org/v1/",Rs="generic",lM=`${w2}bundler`,_r={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function uM(){}function ad(t){return t==null||typeof t!="object"&&typeof t!="function"}function cd(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function hM(t){if(ad(t))return t;if(Array.isArray(t)||cd(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const i=new r(t);return i.lastIndex=t.lastIndex,i}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const i=new r(t.message);return i.stack=t.stack,i.name=t.name,i.cause=t.cause,i}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const i=Object.create(e);return Object.assign(i,t)}return t}function _2(t){return typeof t=="object"&&t!==null}function E2(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function x2(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const dM="[object RegExp]",$2="[object String]",I2="[object Number]",S2="[object Boolean]",A2="[object Arguments]",fM="[object Symbol]",pM="[object Date]",gM="[object Map]",bM="[object Set]",mM="[object Array]",vM="[object ArrayBuffer]",yM="[object Object]",wM="[object DataView]",_M="[object Uint8Array]",EM="[object Uint8ClampedArray]",xM="[object Uint16Array]",$M="[object Uint32Array]",IM="[object Int8Array]",SM="[object Int16Array]",AM="[object Int32Array]",PM="[object Float32Array]",OM="[object Float64Array]";function CM(t,e){return Ns(t,void 0,t,new Map,e)}function Ns(t,e,r,i=new Map,n=void 0){const s=n?.(t,e,r,i);if(s!=null)return s;if(ad(t))return t;if(i.has(t))return i.get(t);if(Array.isArray(t)){const o=new Array(t.length);i.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ns(t[a],a,r,i,n);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;i.set(t,o);for(const[a,c]of t)o.set(a,Ns(c,a,r,i,n));return o}if(t instanceof Set){const o=new Set;i.set(t,o);for(const a of t)o.add(Ns(a,void 0,r,i,n));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(cd(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);i.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ns(t[a],a,r,i,n);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return i.set(t,o),Mn(o,t,r,i,n),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return i.set(t,o),Mn(o,t,r,i,n),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return i.set(t,o),Mn(o,t,r,i,n),o}if(t instanceof Error){const o=new t.constructor;return i.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Mn(o,t,r,i,n),o}if(typeof t=="object"&&DM(t)){const o=Object.create(Object.getPrototypeOf(t));return i.set(t,o),Mn(o,t,r,i,n),o}return t}function Mn(t,e,r=t,i,n){const s=[...Object.keys(e),...E2(e)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Ns(e[a],a,r,i,n))}}function DM(t){switch(x2(t)){case A2:case mM:case vM:case wM:case S2:case pM:case PM:case OM:case IM:case SM:case AM:case gM:case I2:case yM:case dM:case bM:case $2:case fM:case _M:case EM:case xM:case $M:return!0;default:return!1}}function MM(t,e){return CM(t,(r,i,n,s)=>{const o=e?.(r,i,n,s);if(o!=null)return o;if(typeof t=="object")switch(Object.prototype.toString.call(t)){case I2:case $2:case S2:{const a=new t.constructor(t?.valueOf());return Mn(a,t),a}case A2:{const a={};return Mn(a,t),a.length=t.length,a[Symbol.iterator]=t[Symbol.iterator],a}default:return}})}function P2(t){return MM(t)}function O2(t){return t!==null&&typeof t=="object"&&x2(t)==="[object Arguments]"}function TM(t){return cd(t)}function RM(t){var e;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const i=t[Symbol.toStringTag];return i==null||!((e=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&e.writable)?!1:t.toString()===`[object ${i}]`}let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}function NM(t,...e){const r=e.slice(0,-1),i=e[e.length-1];let n=t;for(let s=0;s<r.length;s++){const o=r[s];n=ld(n,o,i,new Map)}return n}function ld(t,e,r,i){var n;if(ad(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(i.has(e))return hM(i.get(e));if(i.set(e,t),Array.isArray(e)){e=e.slice();for(let o=0;o<e.length;o++)e[o]=(n=e[o])!=null?n:void 0}const s=[...Object.keys(e),...E2(e)];for(let o=0;o<s.length;o++){const a=s[o];let c=e[a],l=t[a];if(O2(c)&&(c=v2({},c)),O2(l)&&(l=v2({},l)),typeof Buffer<"u"&&Buffer.isBuffer(c)&&(c=P2(c)),Array.isArray(c))if(typeof l=="object"&&l!=null){const d=[],p=Reflect.ownKeys(l);for(let m=0;m<p.length;m++){const v=p[m];d[v]=l[v]}l=d}else l=[];const u=r(l,c,a,t,e,i);u!=null?t[a]=u:Array.isArray(c)||_2(l)&&_2(c)?t[a]=ld(l,c,r,i):l==null&&RM(c)?t[a]=ld({},c,r,i):l==null&&TM(c)?t[a]=P2(c):(l===void 0||c!==void 0)&&(t[a]=c)}return t}function BM(t,...e){return NM(t,...e,uM)}var LM=Object.defineProperty,FM=Object.defineProperties,UM=Object.getOwnPropertyDescriptors,C2=Object.getOwnPropertySymbols,jM=Object.prototype.hasOwnProperty,kM=Object.prototype.propertyIsEnumerable,D2=(t,e,r)=>e in t?LM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Kc=(t,e)=>{for(var r in e||(e={}))jM.call(e,r)&&D2(t,r,e[r]);if(C2)for(var r of C2(e))kM.call(e,r)&&D2(t,r,e[r]);return t},qM=(t,e)=>FM(t,UM(e));function cr(t,e,r){var i;const n=_s(t);return((i=e.rpcMap)==null?void 0:i[n.reference])||`${w2}?chainId=${n.namespace}:${n.reference}&projectId=${r}`}function Tn(t){return t.includes(":")?t.split(":")[1]:t}function M2(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function zM(t,e){const r=Object.keys(e.namespaces).filter(n=>n.includes(t));if(!r.length)return[];const i=[];return r.forEach(n=>{const s=e.namespaces[n].accounts;i.push(...s)}),i}function ud(t={},e={}){const r=T2(t),i=T2(e);return BM(r,i)}function T2(t){var e,r,i,n;const s={};if(!Ho(t))return s;for(const[o,a]of Object.entries(t)){const c=xh(o)?[o]:a.chains,l=a.methods||[],u=a.events||[],d=a.rpcMap||{},p=zo(o);s[p]=qM(Kc(Kc({},s[p]),a),{chains:bc(c,(e=s[p])==null?void 0:e.chains),methods:bc(l,(r=s[p])==null?void 0:r.methods),events:bc(u,(i=s[p])==null?void 0:i.events),rpcMap:Kc(Kc({},d),(n=s[p])==null?void 0:n.rpcMap)})}return s}function HM(t){return t.includes(":")?t.split(":")[2]:t}function R2(t){const e={};for(const[r,i]of Object.entries(t)){const n=i.methods||[],s=i.events||[],o=i.accounts||[],a=xh(r)?[r]:i.chains?i.chains:M2(i.accounts);e[r]={chains:a,methods:n,events:s,accounts:o}}return e}function hd(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const N2={},ue=t=>N2[t],dd=(t,e)=>{N2[t]=e};var WM=Object.defineProperty,VM=(t,e,r)=>e in t?WM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bs=(t,e,r)=>VM(t,typeof e!="symbol"?e+"":e,r);class KM{constructor(e){Bs(this,"name","polkadot"),Bs(this,"client"),Bs(this,"httpProviders"),Bs(this,"events"),Bs(this,"namespace"),Bs(this,"chainId"),this.namespace=e.namespace,this.events=ue("events"),this.client=ue("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(_r.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;const n=Tn(r);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||cr(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vr(new Rr(i,ue("disableProviderPing")))}}var GM=Object.defineProperty,ZM=Object.defineProperties,YM=Object.getOwnPropertyDescriptors,B2=Object.getOwnPropertySymbols,JM=Object.prototype.hasOwnProperty,QM=Object.prototype.propertyIsEnumerable,fd=(t,e,r)=>e in t?GM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,L2=(t,e)=>{for(var r in e||(e={}))JM.call(e,r)&&fd(t,r,e[r]);if(B2)for(var r of B2(e))QM.call(e,r)&&fd(t,r,e[r]);return t},F2=(t,e)=>ZM(t,YM(e)),Ls=(t,e,r)=>fd(t,typeof e!="symbol"?e+"":e,r);class XM{constructor(e){Ls(this,"name","eip155"),Ls(this,"client"),Ls(this,"chainId"),Ls(this,"namespace"),Ls(this,"httpProviders"),Ls(this,"events"),this.namespace=e.namespace,this.events=ue("events"),this.client=ue("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(_r.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const i=r||cr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vr(new Rr(i,ue("disableProviderPing")))}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;const n=parseInt(Tn(r));e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,i;let n=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";n=n.startsWith("0x")?n:`0x${n}`;const s=parseInt(n,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:n}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,i,n;const s=(i=(r=e.request)==null?void 0:r.params)==null?void 0:i[0];if(!s)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((n=o?.sessionProperties)==null?void 0:n.capabilities)||{};if(a!=null&&a[s])return a?.[s];const c=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:F2(L2({},o.sessionProperties||{}),{capabilities:F2(L2({},a||{}),{[s]:c})})})}catch(l){console.warn("Failed to update session with capabilities",l)}return c}async getCallStatus(e){var r,i;const n=this.client.session.get(e.topic),s=(r=n.sessionProperties)==null?void 0:r.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(i=n.sessionProperties)==null?void 0:i.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var i;const n=new URL(e),s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ki("eth_getUserOperationReceipt",[(i=r.request.params)==null?void 0:i[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${lM}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var eT=Object.defineProperty,tT=(t,e,r)=>e in t?eT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fs=(t,e,r)=>tT(t,typeof e!="symbol"?e+"":e,r);class rT{constructor(e){Fs(this,"name","solana"),Fs(this,"client"),Fs(this,"httpProviders"),Fs(this,"events"),Fs(this,"namespace"),Fs(this,"chainId"),this.namespace=e.namespace,this.events=ue("events"),this.client=ue("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(_r.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;const n=Tn(r);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||cr(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vr(new Rr(i,ue("disableProviderPing")))}}var iT=Object.defineProperty,nT=(t,e,r)=>e in t?iT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Us=(t,e,r)=>nT(t,typeof e!="symbol"?e+"":e,r);class sT{constructor(e){Us(this,"name","cosmos"),Us(this,"client"),Us(this,"httpProviders"),Us(this,"events"),Us(this,"namespace"),Us(this,"chainId"),this.namespace=e.namespace,this.events=ue("events"),this.client=ue("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(_r.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;const n=Tn(r);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||cr(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vr(new Rr(i,ue("disableProviderPing")))}}var oT=Object.defineProperty,aT=(t,e,r)=>e in t?oT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,js=(t,e,r)=>aT(t,typeof e!="symbol"?e+"":e,r);class cT{constructor(e){js(this,"name","algorand"),js(this,"client"),js(this,"httpProviders"),js(this,"events"),js(this,"namespace"),js(this,"chainId"),this.namespace=e.namespace,this.events=ue("events"),this.client=ue("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const i=r||cr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(_r.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;e[r]=this.createHttpProvider(r,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||cr(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new vr(new Rr(i,ue("disableProviderPing")))}}var lT=Object.defineProperty,uT=(t,e,r)=>e in t?lT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ks=(t,e,r)=>uT(t,typeof e!="symbol"?e+"":e,r);class hT{constructor(e){ks(this,"name","cip34"),ks(this,"client"),ks(this,"httpProviders"),ks(this,"events"),ks(this,"namespace"),ks(this,"chainId"),this.namespace=e.namespace,this.events=ue("events"),this.client=ue("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(_r.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const i=this.getCardanoRPCUrl(r),n=Tn(r);e[n]=this.createHttpProvider(n,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vr(new Rr(i,ue("disableProviderPing")))}}var dT=Object.defineProperty,fT=(t,e,r)=>e in t?dT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qs=(t,e,r)=>fT(t,typeof e!="symbol"?e+"":e,r);class pT{constructor(e){qs(this,"name","elrond"),qs(this,"client"),qs(this,"httpProviders"),qs(this,"events"),qs(this,"namespace"),qs(this,"chainId"),this.namespace=e.namespace,this.events=ue("events"),this.client=ue("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(_r.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;const n=Tn(r);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||cr(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vr(new Rr(i,ue("disableProviderPing")))}}var gT=Object.defineProperty,bT=(t,e,r)=>e in t?gT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zs=(t,e,r)=>bT(t,typeof e!="symbol"?e+"":e,r);class mT{constructor(e){zs(this,"name","multiversx"),zs(this,"client"),zs(this,"httpProviders"),zs(this,"events"),zs(this,"namespace"),zs(this,"chainId"),this.namespace=e.namespace,this.events=ue("events"),this.client=ue("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(_r.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;const n=Tn(r);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||cr(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vr(new Rr(i,ue("disableProviderPing")))}}var vT=Object.defineProperty,yT=(t,e,r)=>e in t?vT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Hs=(t,e,r)=>yT(t,typeof e!="symbol"?e+"":e,r);class wT{constructor(e){Hs(this,"name","near"),Hs(this,"client"),Hs(this,"httpProviders"),Hs(this,"events"),Hs(this,"namespace"),Hs(this,"chainId"),this.namespace=e.namespace,this.events=ue("events"),this.client=ue("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const i=r||cr(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(_r.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;e[r]=this.createHttpProvider(r,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||cr(e,this.namespace);return typeof i>"u"?void 0:new vr(new Rr(i,ue("disableProviderPing")))}}var _T=Object.defineProperty,ET=(t,e,r)=>e in t?_T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ws=(t,e,r)=>ET(t,typeof e!="symbol"?e+"":e,r);class xT{constructor(e){Ws(this,"name","tezos"),Ws(this,"client"),Ws(this,"httpProviders"),Ws(this,"events"),Ws(this,"namespace"),Ws(this,"chainId"),this.namespace=e.namespace,this.events=ue("events"),this.client=ue("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const i=r||cr(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(_r.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||cr(e,this.namespace);return typeof i>"u"?void 0:new vr(new Rr(i))}}var $T=Object.defineProperty,IT=(t,e,r)=>e in t?$T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vs=(t,e,r)=>IT(t,typeof e!="symbol"?e+"":e,r);class ST{constructor(e){Vs(this,"name",Rs),Vs(this,"client"),Vs(this,"httpProviders"),Vs(this,"events"),Vs(this,"namespace"),Vs(this,"chainId"),this.namespace=e.namespace,this.events=ue("events"),this.client=ue("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(_r.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const i={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(n=>{const s=_s(n);i[`${s.namespace}:${s.reference}`]=this.createHttpProvider(n)}),i}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||cr(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new vr(new Rr(i,ue("disableProviderPing")))}}var AT=Object.defineProperty,PT=Object.defineProperties,OT=Object.getOwnPropertyDescriptors,U2=Object.getOwnPropertySymbols,CT=Object.prototype.hasOwnProperty,DT=Object.prototype.propertyIsEnumerable,pd=(t,e,r)=>e in t?AT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Gc=(t,e)=>{for(var r in e||(e={}))CT.call(e,r)&&pd(t,r,e[r]);if(U2)for(var r of U2(e))DT.call(e,r)&&pd(t,r,e[r]);return t},gd=(t,e)=>PT(t,OT(e)),Er=(t,e,r)=>pd(t,typeof e!="symbol"?e+"":e,r);class bd{constructor(e){Er(this,"client"),Er(this,"namespaces"),Er(this,"optionalNamespaces"),Er(this,"sessionProperties"),Er(this,"scopedProperties"),Er(this,"events",new It.exports),Er(this,"rpcProviders",{}),Er(this,"session"),Er(this,"providerOpts"),Er(this,"logger"),Er(this,"uri"),Er(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Jr(Bc({level:e?.logger||y2})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const r=new bd(e);return await r.initialize(),r}async request(e,r,i){const[n,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:Gc({},e),chainId:`${n}:${s}`,topic:this.session.topic,expiry:i})}sendAsync(e,r,i,n){const s=new Date().getTime();this.request(e,i,n).then(o=>r(null,Lc(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:ge("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:i,response:n}=await this.client.authenticate(e,r);i&&(this.uri=i,this.events.emit("display_uri",i));const s=await n();if(this.session=s.session,this.session){const o=R2(this.session.namespaces);this.namespaces=ud(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const n=await i();this.session=n;const s=R2(n.namespaces);return this.namespaces=ud(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[i,n]=this.validateChain(e),s=this.getProvider(i);s.name===Rs?s.setDefaultChain(`${i}:${n}`,r):s.setDefaultChain(n,r)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Yr(r)){for(const i of r)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await sd.init({core:this.providerOpts.core,logger:this.providerOpts.logger||y2,relayUrl:this.providerOpts.relayUrl||oM,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(i){throw this.logger.error("Failed to get session",i),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const i=this.client.session.getAll();this.session=i[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>zo(r)))];dd("client",this.client),dd("events",this.events),dd("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const i=zM(r,this.session),n=M2(i),s=ud(this.namespaces,this.optionalNamespaces),o=gd(Gc({},s[r]),{accounts:i,chains:n});switch(r){case"eip155":this.rpcProviders[r]=new XM({namespace:o});break;case"algorand":this.rpcProviders[r]=new cT({namespace:o});break;case"solana":this.rpcProviders[r]=new rT({namespace:o});break;case"cosmos":this.rpcProviders[r]=new sT({namespace:o});break;case"polkadot":this.rpcProviders[r]=new KM({namespace:o});break;case"cip34":this.rpcProviders[r]=new hT({namespace:o});break;case"elrond":this.rpcProviders[r]=new pT({namespace:o});break;case"multiversx":this.rpcProviders[r]=new mT({namespace:o});break;case"near":this.rpcProviders[r]=new wT({namespace:o});break;case"tezos":this.rpcProviders[r]=new xT({namespace:o});break;default:this.rpcProviders[Rs]?this.rpcProviders[Rs].updateNamespace(o):this.rpcProviders[Rs]=new ST({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:i}=e;i===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:i,topic:n}=e;if(n!==((r=this.session)==null?void 0:r.topic))return;const{event:s}=i;if(s.name==="accountsChanged"){const o=s.data;o&&Yr(o)&&this.events.emit("accountsChanged",o.map(HM))}else if(s.name==="chainChanged"){const o=i.chainId,a=i.event.data,c=zo(o),l=hd(o)!==hd(a)?`${c}:${hd(a)}`:o;this.onChainChanged(l)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var i,n;if(e!==((i=this.session)==null?void 0:i.topic))return;const{namespaces:s}=r,o=(n=this.client)==null?void 0:n.session.get(e);this.session=gd(Gc({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",gd(Gc({},ge("USER_DISCONNECTED")),{data:e.topic})))}),this.on(_r.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Rs]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:i,sessionProperties:n,scopedProperties:s}=e;r&&Object.keys(r).length&&(this.namespaces=r),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=n,this.scopedProperties=s}validateChain(e){const[r,i]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,i];if(r&&!Object.keys(this.namespaces||{}).map(o=>zo(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&i)return[r,i];const n=zo(Object.keys(this.namespaces)[0]),s=this.rpcProviders[n].getDefaultChain();return[n,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,r=!1){if(!this.namespaces)return;const[i,n]=this.validateChain(e);n&&(r||this.getProvider(i).setDefaultChain(n),this.namespaces[i]?this.namespaces[i].defaultChain=n:this.namespaces[`${i}:${n}`]?this.namespaces[`${i}:${n}`].defaultChain=n:this.namespaces[`${i}:${n}`]={defaultChain:n},this.events.emit("chainChanged",n),await this.persist("namespaces",this.namespaces))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var i;const n=((i=this.session)==null?void 0:i.topic)||"";await this.client.core.storage.setItem(`${Vc}/${e}${n}`,r)}async getFromStore(e){var r;const i=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${Vc}/${e}${i}`)}async deleteFromStore(e){var r;const i=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${Vc}/${e}${i}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const i of r)i.startsWith(Vc)&&await this.client.core.storage.removeItem(i)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}}const MT=bd,TT="wc",RT="ethereum_provider",NT=`${TT}@2:${RT}:`,BT="https://rpc.walletconnect.org/v1/",Zc=["eth_sendTransaction","personal_sign"],j2=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],Yc=["chainChanged","accountsChanged"],k2=["chainChanged","accountsChanged","message","disconnect","connect"];var LT=Object.defineProperty,FT=Object.defineProperties,UT=Object.getOwnPropertyDescriptors,q2=Object.getOwnPropertySymbols,jT=Object.prototype.hasOwnProperty,kT=Object.prototype.propertyIsEnumerable,md=(t,e,r)=>e in t?LT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ks=(t,e)=>{for(var r in e||(e={}))jT.call(e,r)&&md(t,r,e[r]);if(q2)for(var r of q2(e))kT.call(e,r)&&md(t,r,e[r]);return t},vd=(t,e)=>FT(t,UT(e)),lr=(t,e,r)=>md(t,typeof e!="symbol"?e+"":e,r);function Jc(t){return Number(t[0].split(":")[1])}function Qc(t){return`0x${t.toString(16)}`}function qT(t){const{chains:e,optionalChains:r,methods:i,optionalMethods:n,events:s,optionalEvents:o,rpcMap:a}=t;if(!Yr(e))throw new Error("Invalid chains");const c={chains:e,methods:i||Zc,events:s||Yc,rpcMap:Ks({},e.length?{[Jc(e)]:a[Jc(e)]}:{})},l=s?.filter(m=>!Yc.includes(m)),u=i?.filter(m=>!Zc.includes(m));if(!r&&!o&&!n&&!(l!=null&&l.length)&&!(u!=null&&u.length))return{required:e.length?c:void 0};const d=l?.length&&u?.length||!r,p={chains:[...new Set(d?c.chains.concat(r||[]):r)],methods:[...new Set(c.methods.concat(n!=null&&n.length?n:j2))],events:[...new Set(c.events.concat(o!=null&&o.length?o:k2))],rpcMap:a};return{required:e.length?c:void 0,optional:r.length?p:void 0}}class Xc{constructor(){lr(this,"events",new It.exports.EventEmitter),lr(this,"namespace","eip155"),lr(this,"accounts",[]),lr(this,"signer"),lr(this,"chainId",1),lr(this,"modal"),lr(this,"rpc"),lr(this,"STORAGE_KEY",NT),lr(this,"on",(e,r)=>(this.events.on(e,r),this)),lr(this,"once",(e,r)=>(this.events.once(e,r),this)),lr(this,"removeListener",(e,r)=>(this.events.removeListener(e,r),this)),lr(this,"off",(e,r)=>(this.events.off(e,r),this)),lr(this,"parseAccount",e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e),this.signer={},this.rpc={}}static async init(e){const r=new Xc;return await r.initialize(e),r}async request(e,r){return await this.signer.request(e,this.formatChainId(this.chainId),r)}sendAsync(e,r,i){this.signer.sendAsync(e,r,this.formatChainId(this.chainId),i)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:i}=qT(this.rpc);try{const n=await new Promise(async(o,a)=>{var c;this.rpc.showQrModal&&((c=this.modal)==null||c.subscribeModal(u=>{!u.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),a(new Error("Connection request reset. Please try again.")))}));const l=e!=null&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(vd(Ks({namespaces:Ks({},r&&{[this.namespace]:r})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e?.pairingTopic,scopedProperties:l})).then(u=>{o(u)}).catch(u=>{a(new Error(u.message))})});if(!n)return;const s=Sg(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:s),this.setAccounts(s),this.events.emit("connect",{chainId:Qc(this.chainId)})}catch(n){throw this.signer.logger.error(n),n}finally{this.modal&&this.modal.closeModal()}}async authenticate(e,r){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e?.chains});try{const i=await new Promise(async(s,o)=>{var a;this.rpc.showQrModal&&((a=this.modal)==null||a.subscribeModal(c=>{!c.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),o(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(vd(Ks({},e),{chains:this.rpc.chains}),r).then(c=>{s(c)}).catch(c=>{o(new Error(c.message))})}),n=i.session;if(n){const s=Sg(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:s),this.setAccounts(s),this.events.emit("connect",{chainId:Qc(this.chainId)})}return i}catch(i){throw this.signer.logger.error(i),i}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:r}=e,{event:i}=r;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const r=parseInt(e);this.chainId=r,this.events.emit("chainChanged",Qc(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",vd(Ks({},ge("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var r,i;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(i=this.modal)==null||i.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const r=e.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Qc(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const r=this.parseChainId(e);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(e){const[r,i,n]=e.split(":");return{chainId:`${r}:${i}`,address:n}}setAccounts(e){this.accounts=e.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var r,i;const n=(r=e?.chains)!=null?r:[],s=(i=e?.optionalChains)!=null?i:[],o=n.concat(s);if(!o.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const a=n.length?e?.methods||Zc:[],c=n.length?e?.events||Yc:[],l=e?.optionalMethods||[],u=e?.optionalEvents||[],d=e?.rpcMap||this.buildRpcMap(o,e.projectId),p=e?.qrModalOptions||void 0;return{chains:n?.map(m=>this.formatChainId(m)),optionalChains:s.map(m=>this.formatChainId(m)),methods:a,events:c,optionalMethods:l,optionalEvents:u,rpcMap:d,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:p,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,r){const i={};return e.forEach(n=>{i[n]=this.getRpcUrl(n,r)}),i}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Jc(this.rpc.chains):Jc(this.rpc.optionalChains),this.signer=await MT.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:i}=await Promise.resolve().then(function(){return hR});r=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(Ks({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:r,optionalChains:i,rpcMap:n}=e;r&&Yr(r)&&(this.rpc.chains=r.map(s=>this.formatChainId(s)),r.forEach(s=>{this.rpc.rpcMap[s]=n?.[s]||this.getRpcUrl(s)})),i&&Yr(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i?.map(s=>this.formatChainId(s)),i.forEach(s=>{this.rpc.rpcMap[s]=n?.[s]||this.getRpcUrl(s)}))}getRpcUrl(e,r){var i;return((i=this.rpc.rpcMap)==null?void 0:i[e])||`${BT}?chainId=eip155:${e}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:r?.accounts),this.setAccounts(r?.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(r=>this.signer.logger.warn(r))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(r=>this.parseAccount(r))}}const zT=Xc,HT=Symbol(),z2=Object.getPrototypeOf,yd=new WeakMap,WT=t=>t&&(yd.has(t)?yd.get(t):z2(t)===Object.prototype||z2(t)===Array.prototype),VT=t=>WT(t)&&t[HT]||null,H2=(t,e=!0)=>{yd.set(t,e)},wd=t=>typeof t=="object"&&t!==null,Gi=new WeakMap,el=new WeakSet,KT=(t=Object.is,e=(l,u)=>new Proxy(l,u),r=l=>wd(l)&&!el.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),i=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},n=new WeakMap,s=(l,u,d=i)=>{const p=n.get(l);if(p?.[0]===u)return p[1];const m=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return H2(m,!0),n.set(l,[u,m]),Reflect.ownKeys(l).forEach(v=>{if(Object.getOwnPropertyDescriptor(m,v))return;const w=Reflect.get(l,v),S={value:w,enumerable:!0,configurable:!0};if(el.has(w))H2(w,!1);else if(w instanceof Promise)delete S.value,S.get=()=>d(w);else if(Gi.has(w)){const[x,A]=Gi.get(w);S.value=s(x,A(),d)}Object.defineProperty(m,v,S)}),Object.preventExtensions(m)},o=new WeakMap,a=[1,1],c=l=>{if(!wd(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const p=new Set,m=(M,U=++a[0])=>{d!==U&&(d=U,p.forEach($=>$(M,U)))};let v=a[1];const w=(M=++a[1])=>(v!==M&&!p.size&&(v=M,x.forEach(([U])=>{const $=U[1](M);$>d&&(d=$)})),d),S=M=>(U,$)=>{const h=[...U];h[1]=[M,...h[1]],m(h,$)},x=new Map,A=(M,U)=>{if(x.has(M))throw new Error("prop listener already exists");if(p.size){const $=U[3](S(M));x.set(M,[U,$])}else x.set(M,[U])},C=M=>{var U;const $=x.get(M);$&&(x.delete(M),(U=$[1])==null||U.call($))},D=M=>(p.add(M),p.size===1&&x.forEach(([$,h],b)=>{if(h)throw new Error("remove already exists");const _=$[3](S(b));x.set(b,[$,_])}),()=>{p.delete(M),p.size===0&&x.forEach(([$,h],b)=>{h&&(h(),x.set(b,[$]))})}),T=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),R=e(T,{deleteProperty(M,U){const $=Reflect.get(M,U);C(U);const h=Reflect.deleteProperty(M,U);return h&&m(["delete",[U],$]),h},set(M,U,$,h){const b=Reflect.has(M,U),_=Reflect.get(M,U,h);if(b&&(t(_,$)||o.has($)&&t(_,o.get($))))return!0;C(U),wd($)&&($=VT($)||$);let g=$;if($ instanceof Promise)$.then(y=>{$.status="fulfilled",$.value=y,m(["resolve",[U],y])}).catch(y=>{$.status="rejected",$.reason=y,m(["reject",[U],y])});else{!Gi.has($)&&r($)&&(g=c($));const y=!el.has(g)&&Gi.get(g);y&&A(U,y)}return Reflect.set(M,U,g,h),m(["set",[U],$,_]),!0}});o.set(l,R);const B=[T,w,s,D];return Gi.set(R,B),Reflect.ownKeys(l).forEach(M=>{const U=Object.getOwnPropertyDescriptor(l,M);"value"in U&&(R[M]=l[M],delete U.value,delete U.writable),Object.defineProperty(T,M,U)}),R})=>[c,Gi,el,t,e,r,i,n,s,o,a],[GT]=KT();function Zi(t={}){return GT(t)}function Rn(t,e,r){const i=Gi.get(t);i||console.warn("Please use proxy object");let n;const s=[],o=i[3];let a=!1;const l=o(u=>{if(s.push(u),r){e(s.splice(0));return}n||(n=Promise.resolve().then(()=>{n=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,l()}}function ZT(t,e){const r=Gi.get(t);r||console.warn("Please use proxy object");const[i,n,s]=r;return s(i,n(),e)}const $t=Zi({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),Se={state:$t,subscribe(t){return Rn($t,()=>t($t))},push(t,e){t!==$t.view&&($t.view=t,e&&($t.data=e),$t.history.push(t))},reset(t){$t.view=t,$t.history=[t]},replace(t){$t.history.length>1&&($t.history[$t.history.length-1]=t,$t.view=t)},goBack(){if($t.history.length>1){$t.history.pop();const[t]=$t.history.slice(-1);$t.view=t}},setData(t){$t.data=t}},V={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return V.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return V.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},formatNativeUrl(t,e,r){if(V.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let i=t;i.includes("://")||(i=t.replaceAll("/","").replaceAll(":",""),i=`${i}://`),i.endsWith("/")||(i=`${i}/`),this.setWalletConnectDeepLink(i,r);const n=encodeURIComponent(e);return`${i}wc?uri=${n}`},formatUniversalUrl(t,e,r){if(!V.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let i=t;if(i.startsWith("https://t.me")){const s=Buffer.from(e).toString("base64").replace(/[=]/g,"");i.endsWith("/")&&(i=i.slice(0,-1)),this.setWalletConnectDeepLink(i,r);const o=new URL(i);return o.searchParams.set("startapp",s),o.toString()}i.endsWith("/")||(i=`${i}/`),this.setWalletConnectDeepLink(i,r);const n=encodeURIComponent(e);return`${i}wc?uri=${n}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){const r=this.isTelegram()?"_blank":e;window.open(t,r,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(V.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(V.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(V.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(V.WCM_VERSION,"2.7.0")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=Se.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},YT=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),Ft=Zi({enabled:YT,userSessionId:"",events:[],connectedWalletId:void 0}),W2={state:Ft,subscribe(t){return Rn(Ft.events,()=>t(ZT(Ft.events[Ft.events.length-1])))},initialize(){Ft.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(Ft.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){Ft.connectedWalletId=t},click(t){if(Ft.enabled){const e={type:"CLICK",name:t.name,userSessionId:Ft.userSessionId,timestamp:Date.now(),data:t};Ft.events.push(e)}},track(t){if(Ft.enabled){const e={type:"TRACK",name:t.name,userSessionId:Ft.userSessionId,timestamp:Date.now(),data:t};Ft.events.push(e)}},view(t){if(Ft.enabled){const e={type:"VIEW",name:t.name,userSessionId:Ft.userSessionId,timestamp:Date.now(),data:t};Ft.events.push(e)}}},si=Zi({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),je={state:si,subscribe(t){return Rn(si,()=>t(si))},setChains(t){si.chains=t},setWalletConnectUri(t){si.walletConnectUri=t},setIsCustomDesktop(t){si.isCustomDesktop=t},setIsCustomMobile(t){si.isCustomMobile=t},setIsDataLoaded(t){si.isDataLoaded=t},setIsUiLoaded(t){si.isUiLoaded=t},setIsAuth(t){si.isAuth=t}},tl=Zi({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),ur={state:tl,subscribe(t){return Rn(tl,()=>t(tl))},setConfig(t){var e,r;W2.initialize(),je.setChains(t.chains),je.setIsAuth(!!t.enableAuthMode),je.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),je.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),V.setModalVersionInStorage(),Object.assign(tl,t)}};var JT=Object.defineProperty,V2=Object.getOwnPropertySymbols,QT=Object.prototype.hasOwnProperty,XT=Object.prototype.propertyIsEnumerable,K2=(t,e,r)=>e in t?JT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,eR=(t,e)=>{for(var r in e||(e={}))QT.call(e,r)&&K2(t,r,e[r]);if(V2)for(var r of V2(e))XT.call(e,r)&&K2(t,r,e[r]);return t};const _d="https://explorer-api.walletconnect.com",Ed="wcm",xd="js-2.7.0";async function rl(t,e){const r=eR({sdkType:Ed,sdkVersion:xd},e),i=new URL(t,_d);return i.searchParams.append("projectId",ur.state.projectId),Object.entries(r).forEach(([s,o])=>{o&&i.searchParams.append(s,String(o))}),(await fetch(i)).json()}const Nn={async getDesktopListings(t){return rl("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return rl("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return rl("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return rl("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${_d}/w3m/v1/getWalletImage/${t}?projectId=${ur.state.projectId}&sdkType=${Ed}&sdkVersion=${xd}`},getAssetImageUrl(t){return`${_d}/w3m/v1/getAssetImage/${t}?projectId=${ur.state.projectId}&sdkType=${Ed}&sdkVersion=${xd}`}};var tR=Object.defineProperty,G2=Object.getOwnPropertySymbols,rR=Object.prototype.hasOwnProperty,iR=Object.prototype.propertyIsEnumerable,Z2=(t,e,r)=>e in t?tR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nR=(t,e)=>{for(var r in e||(e={}))rR.call(e,r)&&Z2(t,r,e[r]);if(G2)for(var r of G2(e))iR.call(e,r)&&Z2(t,r,e[r]);return t};const Y2=V.isMobile(),oi=Zi({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),er={state:oi,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=ur.state;if(t==="NONE"||e==="ALL"&&!t)return oi.recomendedWallets;if(V.isArray(t)){const i={recommendedIds:t.join(",")},{listings:n}=await Nn.getAllListings(i),s=Object.values(n);s.sort((o,a)=>{const c=t.indexOf(o.id),l=t.indexOf(a.id);return c-l}),oi.recomendedWallets=s}else{const{chains:r,isAuth:i}=je.state,n=r?.join(","),s=V.isArray(e),o={page:1,sdks:i?"auth_v1":void 0,entries:V.RECOMMENDED_WALLET_AMOUNT,chains:n,version:2,excludedIds:s?e.join(","):void 0},{listings:a}=Y2?await Nn.getMobileListings(o):await Nn.getDesktopListings(o);oi.recomendedWallets=Object.values(a)}return oi.recomendedWallets},async getWallets(t){const e=nR({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:i}=ur.state,{recomendedWallets:n}=oi;if(i==="ALL")return oi.wallets;n.length?e.excludedIds=n.map(d=>d.id).join(","):V.isArray(r)&&(e.excludedIds=r.join(",")),V.isArray(i)&&(e.excludedIds=[e.excludedIds,i].filter(Boolean).join(",")),je.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=t,{listings:a,total:c}=Y2?await Nn.getMobileListings(e):await Nn.getDesktopListings(e),l=Object.values(a),u=o?"search":"wallets";return oi[u]={listings:[...oi[u].listings,...l],total:c,page:s??1},{listings:l,total:c}},getWalletImageUrl(t){return Nn.getWalletImageUrl(t)},getAssetImageUrl(t){return Nn.getAssetImageUrl(t)},resetSearch(){oi.search={listings:[],total:0,page:1}}},Gs=Zi({open:!1}),Bn={state:Gs,subscribe(t){return Rn(Gs,()=>t(Gs))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:i}=je.state;if(V.removeWalletConnectDeepLink(),je.setWalletConnectUri(t?.uri),je.setChains(t?.chains),Se.reset("ConnectWallet"),r&&i)Gs.open=!0,e();else{const n=setInterval(()=>{const s=je.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(n),Gs.open=!0,e())},200)}})},close(){Gs.open=!1}};var sR=Object.defineProperty,J2=Object.getOwnPropertySymbols,oR=Object.prototype.hasOwnProperty,aR=Object.prototype.propertyIsEnumerable,Q2=(t,e,r)=>e in t?sR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cR=(t,e)=>{for(var r in e||(e={}))oR.call(e,r)&&Q2(t,r,e[r]);if(J2)for(var r of J2(e))aR.call(e,r)&&Q2(t,r,e[r]);return t};function lR(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const oa=Zi({themeMode:lR()?"dark":"light"}),Yi={state:oa,subscribe(t){return Rn(oa,()=>t(oa))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(oa.themeMode=e),r&&(oa.themeVariables=cR({},r))}},Ln=Zi({open:!1,message:"",variant:"success"}),Ji={state:Ln,subscribe(t){return Rn(Ln,()=>t(Ln))},openToast(t,e){Ln.open=!0,Ln.message=t,Ln.variant=e},closeToast(){Ln.open=!1}};class uR{constructor(e){this.openModal=Bn.open,this.closeModal=Bn.close,this.subscribeModal=Bn.subscribe,this.setTheme=Yi.setThemeConfig,Yi.setThemeConfig(e),ur.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(function(){return wF});const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),je.setIsUiLoaded(!0)}}}var hR=Object.freeze({__proto__:null,WalletConnectModal:uR});/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const il=window,$d=il.ShadowRoot&&(il.ShadyCSS===void 0||il.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Id=Symbol(),X2=new WeakMap;class ev{constructor(e,r,i){if(this._$cssResult$=!0,i!==Id)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if($d&&e===void 0){const i=r!==void 0&&r.length===1;i&&(e=X2.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&X2.set(r,e))}return e}toString(){return this.cssText}}const dR=t=>new ev(typeof t=="string"?t:t+"",void 0,Id),he=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((i,n,s)=>i+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[s+1],t[0]);return new ev(r,t,Id)},fR=(t,e)=>{$d?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const i=document.createElement("style"),n=il.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=r.cssText,t.appendChild(i)})},tv=$d?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const i of e.cssRules)r+=i.cssText;return dR(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Sd;const nl=window,rv=nl.trustedTypes,pR=rv?rv.emptyScript:"",iv=nl.reactiveElementPolyfillSupport,Ad={toAttribute(t,e){switch(e){case Boolean:t=t?pR:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},nv=(t,e)=>e!==t&&(e==e||t==t),Pd={attribute:!0,type:String,converter:Ad,reflect:!1,hasChanged:nv},Od="finalized";class Zs extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,i)=>{const n=this._$Ep(i,r);n!==void 0&&(this._$Ev.set(n,i),e.push(n))}),e}static createProperty(e,r=Pd){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const i=typeof e=="symbol"?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,r);n!==void 0&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,r,i){return{get(){return this[r]},set(n){const s=this[e];this[r]=n,this.requestUpdate(e,s,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Pd}static finalize(){if(this.hasOwnProperty(Od))return!1;this[Od]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,i=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const n of i)this.createProperty(n,r[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const n of i)r.unshift(tv(n))}else e!==void 0&&r.push(tv(e));return r}static _$Ep(e,r){const i=r.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,i;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)===null||i===void 0||i.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return fR(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var i;return(i=r.hostConnected)===null||i===void 0?void 0:i.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var i;return(i=r.hostDisconnected)===null||i===void 0?void 0:i.call(r)})}attributeChangedCallback(e,r,i){this._$AK(e,i)}_$EO(e,r,i=Pd){var n;const s=this.constructor._$Ep(e,i);if(s!==void 0&&i.reflect===!0){const o=(((n=i.converter)===null||n===void 0?void 0:n.toAttribute)!==void 0?i.converter:Ad).toAttribute(r,i.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,r){var i;const n=this.constructor,s=n._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=n.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((i=o.converter)===null||i===void 0?void 0:i.fromAttribute)!==void 0?o.converter:Ad;this._$El=s,this[s]=a.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,i){let n=!0;e!==void 0&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||nv)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),i.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((n,s)=>this[s]=n),this._$Ei=void 0);let r=!1;const i=this._$AL;try{r=this.shouldUpdate(i),r?(this.willUpdate(i),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var s;return(s=n.hostUpdate)===null||s===void 0?void 0:s.call(n)}),this.update(i)):this._$Ek()}catch(n){throw r=!1,this._$Ek(),n}r&&this._$AE(i)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(i=>{var n;return(n=i.hostUpdated)===null||n===void 0?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,i)=>this._$EO(i,this[i],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}Zs[Od]=!0,Zs.elementProperties=new Map,Zs.elementStyles=[],Zs.shadowRootOptions={mode:"open"},iv?.({ReactiveElement:Zs}),((Sd=nl.reactiveElementVersions)!==null&&Sd!==void 0?Sd:nl.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Cd;const sl=window,Ys=sl.trustedTypes,sv=Ys?Ys.createPolicy("lit-html",{createHTML:t=>t}):void 0,Dd="$lit$",Qi=`lit$${(Math.random()+"").slice(9)}$`,ov="?"+Qi,gR=`<${ov}>`,Fn=document,aa=()=>Fn.createComment(""),ca=t=>t===null||typeof t!="object"&&typeof t!="function",av=Array.isArray,bR=t=>av(t)||typeof t?.[Symbol.iterator]=="function",Md=`[ 	
\f\r]`,la=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,cv=/-->/g,lv=/>/g,Un=RegExp(`>|${Md}(?:([^\\s"'>=/]+)(${Md}*=${Md}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),uv=/'/g,hv=/"/g,dv=/^(?:script|style|textarea|title)$/i,fv=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),W=fv(1),Me=fv(2),jn=Symbol.for("lit-noChange"),ft=Symbol.for("lit-nothing"),pv=new WeakMap,kn=Fn.createTreeWalker(Fn,129,null,!1);function gv(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return sv!==void 0?sv.createHTML(e):e}const mR=(t,e)=>{const r=t.length-1,i=[];let n,s=e===2?"<svg>":"",o=la;for(let a=0;a<r;a++){const c=t[a];let l,u,d=-1,p=0;for(;p<c.length&&(o.lastIndex=p,u=o.exec(c),u!==null);)p=o.lastIndex,o===la?u[1]==="!--"?o=cv:u[1]!==void 0?o=lv:u[2]!==void 0?(dv.test(u[2])&&(n=RegExp("</"+u[2],"g")),o=Un):u[3]!==void 0&&(o=Un):o===Un?u[0]===">"?(o=n??la,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Un:u[3]==='"'?hv:uv):o===hv||o===uv?o=Un:o===cv||o===lv?o=la:(o=Un,n=void 0);const m=o===Un&&t[a+1].startsWith("/>")?" ":"";s+=o===la?c+gR:d>=0?(i.push(l),c.slice(0,d)+Dd+c.slice(d)+Qi+m):c+Qi+(d===-2?(i.push(void 0),a):m)}return[gv(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),i]};class ua{constructor({strings:e,_$litType$:r},i){let n;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,u]=mR(e,r);if(this.el=ua.createElement(l,i),kn.currentNode=this.el.content,r===2){const d=this.el.content,p=d.firstChild;p.remove(),d.append(...p.childNodes)}for(;(n=kn.nextNode())!==null&&c.length<a;){if(n.nodeType===1){if(n.hasAttributes()){const d=[];for(const p of n.getAttributeNames())if(p.endsWith(Dd)||p.startsWith(Qi)){const m=u[o++];if(d.push(p),m!==void 0){const v=n.getAttribute(m.toLowerCase()+Dd).split(Qi),w=/([.?@])?(.*)/.exec(m);c.push({type:1,index:s,name:w[2],strings:v,ctor:w[1]==="."?yR:w[1]==="?"?_R:w[1]==="@"?ER:ol})}else c.push({type:6,index:s})}for(const p of d)n.removeAttribute(p)}if(dv.test(n.tagName)){const d=n.textContent.split(Qi),p=d.length-1;if(p>0){n.textContent=Ys?Ys.emptyScript:"";for(let m=0;m<p;m++)n.append(d[m],aa()),kn.nextNode(),c.push({type:2,index:++s});n.append(d[p],aa())}}}else if(n.nodeType===8)if(n.data===ov)c.push({type:2,index:s});else{let d=-1;for(;(d=n.data.indexOf(Qi,d+1))!==-1;)c.push({type:7,index:s}),d+=Qi.length-1}s++}}static createElement(e,r){const i=Fn.createElement("template");return i.innerHTML=e,i}}function Js(t,e,r=t,i){var n,s,o,a;if(e===jn)return e;let c=i!==void 0?(n=r._$Co)===null||n===void 0?void 0:n[i]:r._$Cl;const l=ca(e)?void 0:e._$litDirective$;return c?.constructor!==l&&((s=c?._$AO)===null||s===void 0||s.call(c,!1),l===void 0?c=void 0:(c=new l(t),c._$AT(t,r,i)),i!==void 0?((o=(a=r)._$Co)!==null&&o!==void 0?o:a._$Co=[])[i]=c:r._$Cl=c),c!==void 0&&(e=Js(t,c._$AS(t,e.values),c,i)),e}class vR{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:i},parts:n}=this._$AD,s=((r=e?.creationScope)!==null&&r!==void 0?r:Fn).importNode(i,!0);kn.currentNode=s;let o=kn.nextNode(),a=0,c=0,l=n[0];for(;l!==void 0;){if(a===l.index){let u;l.type===2?u=new ha(o,o.nextSibling,this,e):l.type===1?u=new l.ctor(o,l.name,l.strings,this,e):l.type===6&&(u=new xR(o,this,e)),this._$AV.push(u),l=n[++c]}a!==l?.index&&(o=kn.nextNode(),a++)}return kn.currentNode=Fn,s}v(e){let r=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,r),r+=i.strings.length-2):i._$AI(e[r])),r++}}class ha{constructor(e,r,i,n){var s;this.type=2,this._$AH=ft,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=i,this.options=n,this._$Cp=(s=n?.isConnected)===null||s===void 0||s}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&e?.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Js(this,e,r),ca(e)?e===ft||e==null||e===""?(this._$AH!==ft&&this._$AR(),this._$AH=ft):e!==this._$AH&&e!==jn&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):bR(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==ft&&ca(this._$AH)?this._$AA.nextSibling.data=e:this.$(Fn.createTextNode(e)),this._$AH=e}g(e){var r;const{values:i,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=ua.createElement(gv(n.h,n.h[0]),this.options)),n);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===s)this._$AH.v(i);else{const o=new vR(s,this),a=o.u(this.options);o.v(i),this.$(a),this._$AH=o}}_$AC(e){let r=pv.get(e.strings);return r===void 0&&pv.set(e.strings,r=new ua(e)),r}T(e){av(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let i,n=0;for(const s of e)n===r.length?r.push(i=new ha(this.k(aa()),this.k(aa()),this,this.options)):i=r[n],i._$AI(s),n++;n<r.length&&(this._$AR(i&&i._$AB.nextSibling,n),r.length=n)}_$AR(e=this._$AA.nextSibling,r){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,r);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class ol{constructor(e,r,i,n,s){this.type=1,this._$AH=ft,this._$AN=void 0,this.element=e,this.name=r,this._$AM=n,this.options=s,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=ft}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,i,n){const s=this.strings;let o=!1;if(s===void 0)e=Js(this,e,r,0),o=!ca(e)||e!==this._$AH&&e!==jn,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=Js(this,a[i+c],r,c),l===jn&&(l=this._$AH[c]),o||(o=!ca(l)||l!==this._$AH[c]),l===ft?e=ft:e!==ft&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!n&&this.j(e)}j(e){e===ft?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class yR extends ol{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ft?void 0:e}}const wR=Ys?Ys.emptyScript:"";class _R extends ol{constructor(){super(...arguments),this.type=4}j(e){e&&e!==ft?this.element.setAttribute(this.name,wR):this.element.removeAttribute(this.name)}}class ER extends ol{constructor(e,r,i,n,s){super(e,r,i,n,s),this.type=5}_$AI(e,r=this){var i;if((e=(i=Js(this,e,r,0))!==null&&i!==void 0?i:ft)===jn)return;const n=this._$AH,s=e===ft&&n!==ft||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,o=e!==ft&&(n===ft||s);s&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,i;typeof this._$AH=="function"?this._$AH.call((i=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}}class xR{constructor(e,r,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Js(this,e)}}const bv=sl.litHtmlPolyfillSupport;bv?.(ua,ha),((Cd=sl.litHtmlVersions)!==null&&Cd!==void 0?Cd:sl.litHtmlVersions=[]).push("2.8.0");const $R=(t,e,r)=>{var i,n;const s=(i=r?.renderBefore)!==null&&i!==void 0?i:e;let o=s._$litPart$;if(o===void 0){const a=(n=r?.renderBefore)!==null&&n!==void 0?n:null;s._$litPart$=o=new ha(e.insertBefore(aa(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Td,Rd;class ee extends Zs{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;const i=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=i.firstChild),i}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=$R(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return jn}}ee.finalized=!0,ee._$litElement$=!0,(Td=globalThis.litElementHydrateSupport)===null||Td===void 0||Td.call(globalThis,{LitElement:ee});const mv=globalThis.litElementPolyfillSupport;mv?.({LitElement:ee}),((Rd=globalThis.litElementVersions)!==null&&Rd!==void 0?Rd:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ae=t=>e=>typeof e=="function"?((r,i)=>(customElements.define(r,i),i))(t,e):((r,i)=>{const{kind:n,elements:s}=i;return{kind:n,elements:s,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const IR=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},SR=(t,e,r)=>{e.constructor.createProperty(r,t)};function J(t){return(e,r)=>r!==void 0?SR(t,e,r):IR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function tr(t){return J({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Nd;((Nd=window.HTMLSlotElement)===null||Nd===void 0?void 0:Nd.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const AR={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},PR=t=>(...e)=>({_$litDirective$:t,values:e});class OR{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,i){this._$Ct=e,this._$AM=r,this._$Ci=i}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $i=PR(class extends OR{constructor(t){var e;if(super(t),t.type!==AR.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,i;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((r=this.nt)===null||r===void 0)&&r.has(s))&&this.it.add(s);return this.render(e)}const n=t.element.classList;this.it.forEach(s=>{s in e||(n.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((i=this.nt)===null||i===void 0)&&i.has(s)||(o?(n.add(s),this.it.add(s)):(n.remove(s),this.it.delete(s)))}return jn}});function CR(t,e){t.indexOf(e)===-1&&t.push(e)}const vv=(t,e,r)=>Math.min(Math.max(r,t),e),xr={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},al=t=>typeof t=="number",Qs=t=>Array.isArray(t)&&!al(t[0]),DR=(t,e,r)=>{const i=e-t;return((r-t)%i+i)%i+t};function MR(t,e){return Qs(t)?t[DR(0,t.length,e)]:t}const yv=(t,e,r)=>-r*t+r*e+t,wv=()=>{},Xi=t=>t,Bd=(t,e,r)=>e-t===0?1:(r-t)/(e-t);function _v(t,e){const r=t[t.length-1];for(let i=1;i<=e;i++){const n=Bd(0,e,i);t.push(yv(r,1,n))}}function TR(t){const e=[0];return _v(e,t-1),e}function RR(t,e=TR(t.length),r=Xi){const i=t.length,n=i-e.length;return n>0&&_v(e,n),s=>{let o=0;for(;o<i-2&&!(s<e[o+1]);o++);let a=vv(0,1,Bd(e[o],e[o+1],s));return a=MR(r,o)(a),yv(t[o],t[o+1],a)}}const Ev=t=>Array.isArray(t)&&al(t[0]),Ld=t=>typeof t=="object"&&!!t.createAnimation,qn=t=>typeof t=="function",NR=t=>typeof t=="string",da={ms:t=>t*1e3,s:t=>t/1e3},xv=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,BR=1e-7,LR=12;function FR(t,e,r,i,n){let s,o,a=0;do o=e+(r-e)/2,s=xv(o,i,n)-t,s>0?r=o:e=o;while(Math.abs(s)>BR&&++a<LR);return o}function fa(t,e,r,i){if(t===e&&r===i)return Xi;const n=s=>FR(s,0,1,t,r);return s=>s===0||s===1?s:xv(n(s),e,i)}const UR=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const i=r*t,n=e==="end"?Math.floor(i):Math.ceil(i);return vv(0,1,n/t)},jR={ease:fa(.25,.1,.25,1),"ease-in":fa(.42,0,1,1),"ease-in-out":fa(.42,0,.58,1),"ease-out":fa(0,0,.58,1)},kR=/\((.*?)\)/;function $v(t){if(qn(t))return t;if(Ev(t))return fa(...t);const e=jR[t];if(e)return e;if(t.startsWith("steps")){const r=kR.exec(t);if(r){const i=r[1].split(",");return UR(parseFloat(i[0]),i[1].trim())}}return Xi}class Iv{constructor(e,r=[0,1],{easing:i,duration:n=xr.duration,delay:s=xr.delay,endDelay:o=xr.endDelay,repeat:a=xr.repeat,offset:c,direction:l="normal",autoplay:u=!0}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=Xi,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((p,m)=>{this.resolve=p,this.reject=m}),i=i||xr.easing,Ld(i)){const p=i.createAnimation(r);i=p.easing,r=p.keyframes||r,n=p.duration||n}this.repeat=a,this.easing=Qs(i)?Xi:$v(i),this.updateDuration(n);const d=RR(r,c,Qs(i)?i.map($v):Xi);this.tick=p=>{var m;s=s;let v=0;this.pauseTime!==void 0?v=this.pauseTime:v=(p-this.startTime)*this.rate,this.t=v,v/=1e3,v=Math.max(v-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(v=this.totalDuration);const w=v/this.duration;let S=Math.floor(w),x=w%1;!x&&w>=1&&(x=1),x===1&&S--;const A=S%2;(l==="reverse"||l==="alternate"&&A||l==="alternate-reverse"&&!A)&&(x=1-x);const C=v>=this.totalDuration?1:Math.min(x,1),D=d(this.easing(C));e(D),this.pauseTime===void 0&&(this.playState==="finished"||v>=this.totalDuration+o)?(this.playState="finished",(m=this.resolve)===null||m===void 0||m.call(this,D)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},u&&this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}var Fd=function(){};process.env.NODE_ENV!=="production"&&(Fd=function(t,e){if(!t)throw new Error(e)});class qR{setAnimation(e){this.animation=e,e?.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const Ud=new WeakMap;function Sv(t){return Ud.has(t)||Ud.set(t,{transforms:[],values:new Map}),Ud.get(t)}function zR(t,e){return t.has(e)||t.set(e,new qR),t.get(e)}const HR=["","X","Y","Z"],WR=["translate","scale","rotate","skew"],cl={x:"translateX",y:"translateY",z:"translateZ"},Av={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},VR={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:Av,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:Xi},skew:Av},pa=new Map,jd=t=>`--motion-${t}`,ll=["x","y","z"];WR.forEach(t=>{HR.forEach(e=>{ll.push(t+e),pa.set(jd(t+e),VR[t])})});const KR=(t,e)=>ll.indexOf(t)-ll.indexOf(e),GR=new Set(ll),Pv=t=>GR.has(t),ZR=(t,e)=>{cl[e]&&(e=cl[e]);const{transforms:r}=Sv(t);CR(r,e),t.style.transform=YR(r)},YR=t=>t.sort(KR).reduce(JR,"").trim(),JR=(t,e)=>`${t} ${e}(var(${jd(e)}))`,kd=t=>t.startsWith("--"),Ov=new Set;function QR(t){if(!Ov.has(t)){Ov.add(t);try{const{syntax:e,initialValue:r}=pa.has(t)?pa.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:r})}catch{}}}const qd=(t,e)=>document.createElement("div").animate(t,e),Cv={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{qd({opacity:[1]})}catch{return!1}return!0},finished:()=>!!qd({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{qd({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},zd={},Xs={};for(const t in Cv)Xs[t]=()=>(zd[t]===void 0&&(zd[t]=Cv[t]()),zd[t]);const XR=.015,eN=(t,e)=>{let r="";const i=Math.round(e/XR);for(let n=0;n<i;n++)r+=t(Bd(0,i-1,n))+", ";return r.substring(0,r.length-2)},Dv=(t,e)=>qn(t)?Xs.linearEasing()?`linear(${eN(t,e)})`:xr.easing:Ev(t)?tN(t):t,tN=([t,e,r,i])=>`cubic-bezier(${t}, ${e}, ${r}, ${i})`;function rN(t,e){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:e());return t}const iN=t=>Array.isArray(t)?t:[t];function Hd(t){return cl[t]&&(t=cl[t]),Pv(t)?jd(t):t}const ul={get:(t,e)=>{e=Hd(e);let r=kd(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!r&&r!==0){const i=pa.get(e);i&&(r=i.initialValue)}return r},set:(t,e,r)=>{e=Hd(e),kd(e)?t.style.setProperty(e,r):t.style[e]=r}};function Mv(t,e=!0){if(!(!t||t.playState==="finished"))try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch{}}function nN(t,e){var r;let i=e?.toDefaultUnit||Xi;const n=t[t.length-1];if(NR(n)){const s=((r=n.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(i=o=>o+s)}return i}function sN(){return window.__MOTION_DEV_TOOLS_RECORD}function oN(t,e,r,i={},n){const s=sN(),o=i.record!==!1&&s;let a,{duration:c=xr.duration,delay:l=xr.delay,endDelay:u=xr.endDelay,repeat:d=xr.repeat,easing:p=xr.easing,persist:m=!1,direction:v,offset:w,allowWebkitAcceleration:S=!1,autoplay:x=!0}=i;const A=Sv(t),C=Pv(e);let D=Xs.waapi();C&&ZR(t,e);const T=Hd(e),N=zR(A.values,T),R=pa.get(T);return Mv(N.animation,!(Ld(p)&&N.generator)&&i.record!==!1),()=>{const B=()=>{var $,h;return(h=($=ul.get(t,T))!==null&&$!==void 0?$:R?.initialValue)!==null&&h!==void 0?h:0};let M=rN(iN(r),B);const U=nN(M,R);if(Ld(p)){const $=p.createAnimation(M,e!=="opacity",B,T,N);p=$.easing,M=$.keyframes||M,c=$.duration||c}if(kd(T)&&(Xs.cssRegisterProperty()?QR(T):D=!1),C&&!Xs.linearEasing()&&(qn(p)||Qs(p)&&p.some(qn))&&(D=!1),D){R&&(M=M.map(b=>al(b)?R.toDefaultUnit(b):b)),M.length===1&&(!Xs.partialKeyframes()||o)&&M.unshift(B());const $={delay:da.ms(l),duration:da.ms(c),endDelay:da.ms(u),easing:Qs(p)?void 0:Dv(p,c),direction:v,iterations:d+1,fill:"both"};a=t.animate({[T]:M,offset:w,easing:Qs(p)?p.map(b=>Dv(b,c)):void 0},$),a.finished||(a.finished=new Promise((b,_)=>{a.onfinish=b,a.oncancel=_}));const h=M[M.length-1];a.finished.then(()=>{m||(ul.set(t,T,h),a.cancel())}).catch(wv),S||(a.playbackRate=1.000001)}else if(n&&C)M=M.map($=>typeof $=="string"?parseFloat($):$),M.length===1&&M.unshift(parseFloat(B())),a=new n($=>{ul.set(t,T,U?U($):$)},M,Object.assign(Object.assign({},i),{duration:c,easing:p}));else{const $=M[M.length-1];ul.set(t,T,R&&al($)?R.toDefaultUnit($):$)}return o&&s(t,e,M,{duration:c,delay:l,easing:p,repeat:d,offset:w},"motion-one"),N.setAnimation(a),a&&!x&&a.pause(),a}}const aN=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function Tv(t,e){var r;return typeof t=="string"?e?((r=e[t])!==null&&r!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const cN=t=>t(),Rv=(t,e,r=xr.duration)=>new Proxy({animations:t.map(cN).filter(Boolean),duration:r,options:e},uN),lN=t=>t.animations[0],uN={get:(t,e)=>{const r=lN(t);switch(e){case"duration":return t.duration;case"currentTime":return da.s(r?.[e]||0);case"playbackRate":case"playState":return r?.[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(hN)).catch(wv)),t.finished;case"stop":return()=>{t.animations.forEach(i=>Mv(i))};case"forEachNative":return i=>{t.animations.forEach(n=>i(n,t))};default:return typeof r?.[e]>"u"?void 0:()=>t.animations.forEach(i=>i[e]())}},set:(t,e,r)=>{switch(e){case"currentTime":r=da.ms(r);case"playbackRate":for(let i=0;i<t.animations.length;i++)t.animations[i][e]=r;return!0}return!1}},hN=t=>t.finished;function dN(t,e,r){return qn(t)?t(e,r):t}function fN(t){return function(r,i,n={}){r=Tv(r);const s=r.length;Fd(!!s,"No valid element provided."),Fd(!!i,"No keyframes defined.");const o=[];for(let a=0;a<s;a++){const c=r[a];for(const l in i){const u=aN(n,l);u.delay=dN(u.delay,a,s);const d=oN(c,l,i[l],u,t);o.push(d)}}return Rv(o,n,n.duration)}}const pN=fN(Iv);function gN(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}typeof SuppressedError=="function"&&SuppressedError;const bN={any:0,all:1};function mN(t,e,{root:r,margin:i,amount:n="any"}={}){if(typeof IntersectionObserver>"u")return()=>{};const s=Tv(t),o=new WeakMap,a=l=>{l.forEach(u=>{const d=o.get(u.target);if(u.isIntersecting!==!!d)if(u.isIntersecting){const p=e(u);qn(p)?o.set(u.target,p):c.unobserve(u.target)}else d&&(d(u),o.delete(u.target))})},c=new IntersectionObserver(a,{root:r,rootMargin:i,threshold:typeof n=="number"?n:bN[n]});return s.forEach(l=>c.observe(l)),()=>c.disconnect()}function Wd(t,e,r){t.dispatchEvent(new CustomEvent(e,{detail:{originalEvent:r}}))}function Nv(t,e,r){t.dispatchEvent(new CustomEvent(e,{detail:{originalEntry:r}}))}const vN={isActive:t=>!!t.inView,subscribe:(t,{enable:e,disable:r},{inViewOptions:i={}})=>{const{once:n}=i,s=gN(i,["once"]);return mN(t,o=>{if(e(),Nv(t,"viewenter",o),!n)return a=>{r(),Nv(t,"viewleave",a)}},s)}},Bv=(t,e,r)=>i=>{i.pointerType&&i.pointerType!=="mouse"||(r(),Wd(t,e,i))};[...Object.keys({inView:vN,hover:{isActive:t=>!!t.hover,subscribe:(t,{enable:e,disable:r})=>{const i=Bv(t,"hoverstart",e),n=Bv(t,"hoverend",r);return t.addEventListener("pointerenter",i),t.addEventListener("pointerleave",n),()=>{t.removeEventListener("pointerenter",i),t.removeEventListener("pointerleave",n)}}},press:{isActive:t=>!!t.press,subscribe:(t,{enable:e,disable:r})=>{const i=s=>{r(),Wd(t,"pressend",s),window.removeEventListener("pointerup",i)},n=s=>{e(),Wd(t,"pressstart",s),window.addEventListener("pointerup",i)};return t.addEventListener("pointerdown",n),()=>{t.removeEventListener("pointerdown",n),window.removeEventListener("pointerup",i)}}}})];function yN(t,e={}){return Rv([()=>{const r=new Iv(t,[0,1],e);return r.finished.catch(()=>{}),r}],e,e.duration)}function zn(t,e,r){return(qn(t)?yN:pN)(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Vt=t=>t??ft;var ga={},wN=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Lv={},hr={};let Vd;const _N=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];hr.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},hr.getSymbolTotalCodewords=function(e){return _N[e]},hr.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},hr.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Vd=e},hr.isKanjiModeEnabled=function(){return typeof Vd<"u"},hr.toSJIS=function(e){return Vd(e)};var hl={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,n){if(t.isValid(i))return i;try{return e(i)}catch{return n}}})(hl);function Fv(){this.buffer=[],this.length=0}Fv.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var EN=Fv;function ba(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}ba.prototype.set=function(t,e,r,i){const n=t*this.size+e;this.data[n]=r,i&&(this.reservedBit[n]=!0)},ba.prototype.get=function(t,e){return this.data[t*this.size+e]},ba.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},ba.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var xN=ba,Uv={};(function(t){const e=hr.getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const n=Math.floor(i/7)+2,s=e(i),o=s===145?26:Math.ceil((s-13)/(2*n-2))*2,a=[s-7];for(let c=1;c<n-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(i){const n=[],s=t.getRowColCoords(i),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||n.push([s[a],s[c]]);return n}})(Uv);var jv={};const $N=hr.getSymbolSize,kv=7;jv.getPositions=function(e){const r=$N(e);return[[0,0],[r-kv,0],[0,r-kv]]};var qv={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},t.from=function(n){return t.isValid(n)?parseInt(n,10):void 0},t.getPenaltyN1=function(n){const s=n.size;let o=0,a=0,c=0,l=null,u=null;for(let d=0;d<s;d++){a=c=0,l=u=null;for(let p=0;p<s;p++){let m=n.get(d,p);m===l?a++:(a>=5&&(o+=e.N1+(a-5)),l=m,a=1),m=n.get(p,d),m===u?c++:(c>=5&&(o+=e.N1+(c-5)),u=m,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(n){const s=n.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const l=n.get(a,c)+n.get(a,c+1)+n.get(a+1,c)+n.get(a+1,c+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(n){const s=n.size;let o=0,a=0,c=0;for(let l=0;l<s;l++){a=c=0;for(let u=0;u<s;u++)a=a<<1&2047|n.get(l,u),u>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|n.get(u,l),u>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(n){let s=0;const o=n.data.length;for(let c=0;c<o;c++)s+=n.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(i,n,s){switch(i){case t.Patterns.PATTERN000:return(n+s)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(n+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return n*s%2+n*s%3===0;case t.Patterns.PATTERN110:return(n*s%2+n*s%3)%2===0;case t.Patterns.PATTERN111:return(n*s%3+(n+s)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(n,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(n,c,a))},t.getBestMask=function(n,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let l=0;l<o;l++){s(l),t.applyMask(l,n);const u=t.getPenaltyN1(n)+t.getPenaltyN2(n)+t.getPenaltyN3(n)+t.getPenaltyN4(n);t.applyMask(l,n),u<c&&(c=u,a=l)}return a}})(qv);var dl={};const en=hl,fl=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],pl=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];dl.getBlocksCount=function(e,r){switch(r){case en.L:return fl[(e-1)*4+0];case en.M:return fl[(e-1)*4+1];case en.Q:return fl[(e-1)*4+2];case en.H:return fl[(e-1)*4+3];default:return}},dl.getTotalCodewordsCount=function(e,r){switch(r){case en.L:return pl[(e-1)*4+0];case en.M:return pl[(e-1)*4+1];case en.Q:return pl[(e-1)*4+2];case en.H:return pl[(e-1)*4+3];default:return}};var zv={},gl={};const ma=new Uint8Array(512),bl=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)ma[r]=e,bl[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)ma[r]=ma[r-255]})(),gl.log=function(e){if(e<1)throw new Error("log("+e+")");return bl[e]},gl.exp=function(e){return ma[e]},gl.mul=function(e,r){return e===0||r===0?0:ma[bl[e]+bl[r]]},function(t){const e=gl;t.mul=function(i,n){const s=new Uint8Array(i.length+n.length-1);for(let o=0;o<i.length;o++)for(let a=0;a<n.length;a++)s[o+a]^=e.mul(i[o],n[a]);return s},t.mod=function(i,n){let s=new Uint8Array(i);for(;s.length-n.length>=0;){const o=s[0];for(let c=0;c<n.length;c++)s[c]^=e.mul(n[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(i){let n=new Uint8Array([1]);for(let s=0;s<i;s++)n=t.mul(n,new Uint8Array([1,e.exp(s)]));return n}}(zv);const Hv=zv;function Kd(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Kd.prototype.initialize=function(e){this.degree=e,this.genPoly=Hv.generateECPolynomial(this.degree)},Kd.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const i=Hv.mod(r,this.genPoly),n=this.degree-i.length;if(n>0){const s=new Uint8Array(this.degree);return s.set(i,n),s}return i};var IN=Kd,Wv={},tn={},Gd={};Gd.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var ai={};const Vv="[0-9]+",SN="[A-Z $%*+\\-./:]+";let va="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";va=va.replace(/u/g,"\\u");const AN="(?:(?![A-Z0-9 $%*+\\-./:]|"+va+`)(?:.|[\r
]))+`;ai.KANJI=new RegExp(va,"g"),ai.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ai.BYTE=new RegExp(AN,"g"),ai.NUMERIC=new RegExp(Vv,"g"),ai.ALPHANUMERIC=new RegExp(SN,"g");const PN=new RegExp("^"+va+"$"),ON=new RegExp("^"+Vv+"$"),CN=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ai.testKanji=function(e){return PN.test(e)},ai.testNumeric=function(e){return ON.test(e)},ai.testAlphanumeric=function(e){return CN.test(e)},function(t){const e=Gd,r=ai;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function i(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+n)}}t.from=function(s,o){if(t.isValid(s))return s;try{return i(s)}catch{return o}}}(tn),function(t){const e=hr,r=dl,i=hl,n=tn,s=Gd,o=7973,a=e.getBCHDigit(o);function c(p,m,v){for(let w=1;w<=40;w++)if(m<=t.getCapacity(w,v,p))return w}function l(p,m){return n.getCharCountIndicator(p,m)+4}function u(p,m){let v=0;return p.forEach(function(w){const S=l(w.mode,m);v+=S+w.getBitsLength()}),v}function d(p,m){for(let v=1;v<=40;v++)if(u(p,v)<=t.getCapacity(v,m,n.MIXED))return v}t.from=function(m,v){return s.isValid(m)?parseInt(m,10):v},t.getCapacity=function(m,v,w){if(!s.isValid(m))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=n.BYTE);const S=e.getSymbolTotalCodewords(m),x=r.getTotalCodewordsCount(m,v),A=(S-x)*8;if(w===n.MIXED)return A;const C=A-l(w,m);switch(w){case n.NUMERIC:return Math.floor(C/10*3);case n.ALPHANUMERIC:return Math.floor(C/11*2);case n.KANJI:return Math.floor(C/13);case n.BYTE:default:return Math.floor(C/8)}},t.getBestVersionForData=function(m,v){let w;const S=i.from(v,i.M);if(Array.isArray(m)){if(m.length>1)return d(m,S);if(m.length===0)return 1;w=m[0]}else w=m;return c(w.mode,w.getLength(),S)},t.getEncodedBits=function(m){if(!s.isValid(m)||m<7)throw new Error("Invalid QR Code version");let v=m<<12;for(;e.getBCHDigit(v)-a>=0;)v^=o<<e.getBCHDigit(v)-a;return m<<12|v}}(Wv);var Kv={};const Zd=hr,Gv=1335,DN=21522,Zv=Zd.getBCHDigit(Gv);Kv.getEncodedBits=function(e,r){const i=e.bit<<3|r;let n=i<<10;for(;Zd.getBCHDigit(n)-Zv>=0;)n^=Gv<<Zd.getBCHDigit(n)-Zv;return(i<<10|n)^DN};var Yv={};const MN=tn;function eo(t){this.mode=MN.NUMERIC,this.data=t.toString()}eo.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},eo.prototype.getLength=function(){return this.data.length},eo.prototype.getBitsLength=function(){return eo.getBitsLength(this.data.length)},eo.prototype.write=function(e){let r,i,n;for(r=0;r+3<=this.data.length;r+=3)i=this.data.substr(r,3),n=parseInt(i,10),e.put(n,10);const s=this.data.length-r;s>0&&(i=this.data.substr(r),n=parseInt(i,10),e.put(n,s*3+1))};var TN=eo;const RN=tn,Yd=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function to(t){this.mode=RN.ALPHANUMERIC,this.data=t}to.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},to.prototype.getLength=function(){return this.data.length},to.prototype.getBitsLength=function(){return to.getBitsLength(this.data.length)},to.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let i=Yd.indexOf(this.data[r])*45;i+=Yd.indexOf(this.data[r+1]),e.put(i,11)}this.data.length%2&&e.put(Yd.indexOf(this.data[r]),6)};var NN=to,BN=function(e){for(var r=[],i=e.length,n=0;n<i;n++){var s=e.charCodeAt(n);if(s>=55296&&s<=56319&&i>n+1){var o=e.charCodeAt(n+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,n+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const LN=BN,FN=tn;function ro(t){this.mode=FN.BYTE,typeof t=="string"&&(t=LN(t)),this.data=new Uint8Array(t)}ro.getBitsLength=function(e){return e*8},ro.prototype.getLength=function(){return this.data.length},ro.prototype.getBitsLength=function(){return ro.getBitsLength(this.data.length)},ro.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var UN=ro;const jN=tn,kN=hr;function io(t){this.mode=jN.KANJI,this.data=t}io.getBitsLength=function(e){return e*13},io.prototype.getLength=function(){return this.data.length},io.prototype.getBitsLength=function(){return io.getBitsLength(this.data.length)},io.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=kN.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var qN=io,Jv={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,i,n){var s={},o={};o[i]=0;var a=e.PriorityQueue.make();a.push(i,0);for(var c,l,u,d,p,m,v,w,S;!a.empty();){c=a.pop(),l=c.value,d=c.cost,p=r[l]||{};for(u in p)p.hasOwnProperty(u)&&(m=p[u],v=d+m,w=o[u],S=typeof o[u]>"u",(S||w>v)&&(o[u]=v,a.push(u,v),s[u]=l))}if(typeof n<"u"&&typeof o[n]>"u"){var x=["Could not find a path from ",i," to ",n,"."].join("");throw new Error(x)}return s},extract_shortest_path_from_predecessor_list:function(r,i){for(var n=[],s=i;s;)n.push(s),r[s],s=r[s];return n.reverse(),n},find_path:function(r,i,n){var s=e.single_source_shortest_paths(r,i,n);return e.extract_shortest_path_from_predecessor_list(s,n)},PriorityQueue:{make:function(r){var i=e.PriorityQueue,n={},s;r=r||{};for(s in i)i.hasOwnProperty(s)&&(n[s]=i[s]);return n.queue=[],n.sorter=r.sorter||i.default_sorter,n},default_sorter:function(r,i){return r.cost-i.cost},push:function(r,i){var n={value:r,cost:i};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Jv),function(t){const e=tn,r=TN,i=NN,n=UN,s=qN,o=ai,a=hr,c=Jv.exports;function l(x){return unescape(encodeURIComponent(x)).length}function u(x,A,C){const D=[];let T;for(;(T=x.exec(C))!==null;)D.push({data:T[0],index:T.index,mode:A,length:T[0].length});return D}function d(x){const A=u(o.NUMERIC,e.NUMERIC,x),C=u(o.ALPHANUMERIC,e.ALPHANUMERIC,x);let D,T;return a.isKanjiModeEnabled()?(D=u(o.BYTE,e.BYTE,x),T=u(o.KANJI,e.KANJI,x)):(D=u(o.BYTE_KANJI,e.BYTE,x),T=[]),A.concat(C,D,T).sort(function(R,B){return R.index-B.index}).map(function(R){return{data:R.data,mode:R.mode,length:R.length}})}function p(x,A){switch(A){case e.NUMERIC:return r.getBitsLength(x);case e.ALPHANUMERIC:return i.getBitsLength(x);case e.KANJI:return s.getBitsLength(x);case e.BYTE:return n.getBitsLength(x)}}function m(x){return x.reduce(function(A,C){const D=A.length-1>=0?A[A.length-1]:null;return D&&D.mode===C.mode?(A[A.length-1].data+=C.data,A):(A.push(C),A)},[])}function v(x){const A=[];for(let C=0;C<x.length;C++){const D=x[C];switch(D.mode){case e.NUMERIC:A.push([D,{data:D.data,mode:e.ALPHANUMERIC,length:D.length},{data:D.data,mode:e.BYTE,length:D.length}]);break;case e.ALPHANUMERIC:A.push([D,{data:D.data,mode:e.BYTE,length:D.length}]);break;case e.KANJI:A.push([D,{data:D.data,mode:e.BYTE,length:l(D.data)}]);break;case e.BYTE:A.push([{data:D.data,mode:e.BYTE,length:l(D.data)}])}}return A}function w(x,A){const C={},D={start:{}};let T=["start"];for(let N=0;N<x.length;N++){const R=x[N],B=[];for(let M=0;M<R.length;M++){const U=R[M],$=""+N+M;B.push($),C[$]={node:U,lastCount:0},D[$]={};for(let h=0;h<T.length;h++){const b=T[h];C[b]&&C[b].node.mode===U.mode?(D[b][$]=p(C[b].lastCount+U.length,U.mode)-p(C[b].lastCount,U.mode),C[b].lastCount+=U.length):(C[b]&&(C[b].lastCount=U.length),D[b][$]=p(U.length,U.mode)+4+e.getCharCountIndicator(U.mode,A))}}T=B}for(let N=0;N<T.length;N++)D[T[N]].end=0;return{map:D,table:C}}function S(x,A){let C;const D=e.getBestModeForData(x);if(C=e.from(A,D),C!==e.BYTE&&C.bit<D.bit)throw new Error('"'+x+'" cannot be encoded with mode '+e.toString(C)+`.
 Suggested mode is: `+e.toString(D));switch(C===e.KANJI&&!a.isKanjiModeEnabled()&&(C=e.BYTE),C){case e.NUMERIC:return new r(x);case e.ALPHANUMERIC:return new i(x);case e.KANJI:return new s(x);case e.BYTE:return new n(x)}}t.fromArray=function(A){return A.reduce(function(C,D){return typeof D=="string"?C.push(S(D,null)):D.data&&C.push(S(D.data,D.mode)),C},[])},t.fromString=function(A,C){const D=d(A,a.isKanjiModeEnabled()),T=v(D),N=w(T,C),R=c.find_path(N.map,"start","end"),B=[];for(let M=1;M<R.length-1;M++)B.push(N.table[R[M]].node);return t.fromArray(m(B))},t.rawSplit=function(A){return t.fromArray(d(A,a.isKanjiModeEnabled()))}}(Yv);const ml=hr,Jd=hl,zN=EN,HN=xN,WN=Uv,VN=jv,Qd=qv,Xd=dl,KN=IN,vl=Wv,GN=Kv,ZN=tn,ef=Yv;function YN(t,e){const r=t.size,i=VN.getPositions(e);for(let n=0;n<i.length;n++){const s=i[n][0],o=i[n][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function JN(t){const e=t.size;for(let r=8;r<e-8;r++){const i=r%2===0;t.set(r,6,i,!0),t.set(6,r,i,!0)}}function QN(t,e){const r=WN.getPositions(e);for(let i=0;i<r.length;i++){const n=r[i][0],s=r[i][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(n+o,s+a,!0,!0):t.set(n+o,s+a,!1,!0)}}function XN(t,e){const r=t.size,i=vl.getEncodedBits(e);let n,s,o;for(let a=0;a<18;a++)n=Math.floor(a/3),s=a%3+r-8-3,o=(i>>a&1)===1,t.set(n,s,o,!0),t.set(s,n,o,!0)}function tf(t,e,r){const i=t.size,n=GN.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(n>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(i-15+s,8,o,!0),s<8?t.set(8,i-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(i-8,8,1,!0)}function eB(t,e){const r=t.size;let i=-1,n=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(n,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>s&1)===1),t.set(n,a-c,l),s--,s===-1&&(o++,s=7)}if(n+=i,n<0||r<=n){n-=i,i=-i;break}}}function tB(t,e,r){const i=new zN;r.forEach(function(c){i.put(c.mode.bit,4),i.put(c.getLength(),ZN.getCharCountIndicator(c.mode,t)),c.write(i)});const n=ml.getSymbolTotalCodewords(t),s=Xd.getTotalCodewordsCount(t,e),o=(n-s)*8;for(i.getLengthInBits()+4<=o&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const a=(o-i.getLengthInBits())/8;for(let c=0;c<a;c++)i.put(c%2?17:236,8);return rB(i,t,e)}function rB(t,e,r){const i=ml.getSymbolTotalCodewords(e),n=Xd.getTotalCodewordsCount(e,r),s=i-n,o=Xd.getBlocksCount(e,r),a=i%o,c=o-a,l=Math.floor(i/o),u=Math.floor(s/o),d=u+1,p=l-u,m=new KN(p);let v=0;const w=new Array(o),S=new Array(o);let x=0;const A=new Uint8Array(t.buffer);for(let R=0;R<o;R++){const B=R<c?u:d;w[R]=A.slice(v,v+B),S[R]=m.encode(w[R]),v+=B,x=Math.max(x,B)}const C=new Uint8Array(i);let D=0,T,N;for(T=0;T<x;T++)for(N=0;N<o;N++)T<w[N].length&&(C[D++]=w[N][T]);for(T=0;T<p;T++)for(N=0;N<o;N++)C[D++]=S[N][T];return C}function iB(t,e,r,i){let n;if(Array.isArray(t))n=ef.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const u=ef.rawSplit(t);l=vl.getBestVersionForData(u,r)}n=ef.fromString(t,l||40)}else throw new Error("Invalid data");const s=vl.getBestVersionForData(n,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=tB(e,r,n),a=ml.getSymbolSize(e),c=new HN(a);return YN(c,e),JN(c),QN(c,e),tf(c,r,0),e>=7&&XN(c,e),eB(c,o),isNaN(i)&&(i=Qd.getBestMask(c,tf.bind(null,c,r))),Qd.applyMask(i,c),tf(c,r,i),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:i,segments:n}}Lv.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let i=Jd.M,n,s;return typeof r<"u"&&(i=Jd.from(r.errorCorrectionLevel,Jd.M),n=vl.from(r.version),s=Qd.from(r.maskPattern),r.toSJISFunc&&ml.setToSJISFunction(r.toSJISFunc)),iB(e,n,i,s)};var Qv={},rf={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let i=r.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+r);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(s){return[s,s]}))),i.length===6&&i.push("F","F");const n=parseInt(i.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const n=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,s=i.width&&i.width>=21?i.width:void 0,o=i.scale||4;return{width:s,scale:s?4:o,margin:n,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,n){return n.width&&n.width>=i+n.margin*2?n.width/(i+n.margin*2):n.scale},t.getImageWidth=function(i,n){const s=t.getScale(i,n);return Math.floor((i+n.margin*2)*s)},t.qrToImageData=function(i,n,s){const o=n.modules.size,a=n.modules.data,c=t.getScale(o,s),l=Math.floor((o+s.margin*2)*c),u=s.margin*c,d=[s.color.light,s.color.dark];for(let p=0;p<l;p++)for(let m=0;m<l;m++){let v=(p*l+m)*4,w=s.color.light;if(p>=u&&m>=u&&p<l-u&&m<l-u){const S=Math.floor((p-u)/c),x=Math.floor((m-u)/c);w=d[a[S*o+x]?1:0]}i[v++]=w.r,i[v++]=w.g,i[v++]=w.b,i[v]=w.a}}})(rf),function(t){const e=rf;function r(n,s,o){n.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,l=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(l=i()),c=e.getOptions(c);const u=e.getImageWidth(s.modules.size,c),d=l.getContext("2d"),p=d.createImageData(u,u);return e.qrToImageData(p.data,s,c),r(d,l,u),d.putImageData(p,0,0),l},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const l=t.render(s,o,c),u=c.type||"image/png",d=c.rendererOpts||{};return l.toDataURL(u,d.quality)}}(Qv);var Xv={};const nB=rf;function ey(t,e){const r=t.a/255,i=e+'="'+t.hex+'"';return r<1?i+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':i}function nf(t,e,r){let i=t+e;return typeof r<"u"&&(i+=" "+r),i}function sB(t,e,r){let i="",n=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(i+=s?nf("M",c+r,.5+l+r):nf("m",n,0),n=0,s=!1),c+1<e&&t[a+1]||(i+=nf("h",o),o=0)):n++}return i}Xv.render=function(e,r,i){const n=nB.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+n.margin*2,c=n.color.light.a?"<path "+ey(n.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+ey(n.color.dark,"stroke")+' d="'+sB(o,s,n.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof i=="function"&&i(null,p),p};const oB=wN,sf=Lv,ty=Qv,aB=Xv;function of(t,e,r,i,n){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!oB())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(n=r,r=e,e=i=void 0):o===3&&(e.getContext&&typeof n>"u"?(n=i,i=void 0):(n=i,i=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=i=void 0):o===2&&!e.getContext&&(i=r,r=e,e=void 0),new Promise(function(c,l){try{const u=sf.create(r,i);c(t(u,e,i))}catch(u){l(u)}})}try{const c=sf.create(r,i);n(null,t(c,e,i))}catch(c){n(c)}}ga.create=sf.create,ga.toCanvas=of.bind(null,ty.render),ga.toDataURL=of.bind(null,ty.renderToDataURL),ga.toString=of.bind(null,function(t,e,r){return aB.render(t,r)});var cB=Object.defineProperty,ry=Object.getOwnPropertySymbols,lB=Object.prototype.hasOwnProperty,uB=Object.prototype.propertyIsEnumerable,iy=(t,e,r)=>e in t?cB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,af=(t,e)=>{for(var r in e||(e={}))lB.call(e,r)&&iy(t,r,e[r]);if(ry)for(var r of ry(e))uB.call(e,r)&&iy(t,r,e[r]);return t};function hB(){var t;const e=(t=Yi.state.themeMode)!=null?t:"dark",i={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":i.foreground[1],"--wcm-color-fg-2":i.foreground[2],"--wcm-color-fg-3":i.foreground[3],"--wcm-color-bg-1":i.background[1],"--wcm-color-bg-2":i.background[2],"--wcm-color-bg-3":i.background[3],"--wcm-color-overlay":i.overlay}}function ny(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const oe={getPreset(t){return ny()[t]},setTheme(){const t=document.querySelector(":root"),{themeVariables:e}=Yi.state;if(t){const r=af(af(af({},hB()),ny()),e);Object.entries(r).forEach(([i,n])=>t.style.setProperty(i,n))}},globalCss:he`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},dB=he`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var fB=Object.defineProperty,pB=Object.getOwnPropertyDescriptor,no=(t,e,r,i)=>{for(var n=i>1?void 0:i?pB(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&fB(e,r,n),n};let rn=class extends ee{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const t={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),W`<button class="${$i(t)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};rn.styles=[oe.globalCss,dB],no([J({type:Boolean})],rn.prototype,"disabled",2),no([J()],rn.prototype,"iconLeft",2),no([J()],rn.prototype,"iconRight",2),no([J()],rn.prototype,"onClick",2),no([J()],rn.prototype,"variant",2),rn=no([ae("wcm-button")],rn);const gB=he`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var bB=Object.defineProperty,mB=Object.getOwnPropertyDescriptor,cf=(t,e,r,i)=>{for(var n=i>1?void 0:i?mB(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&bB(e,r,n),n};let ya=class extends ee{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const t={"wcm-secondary":this.variant==="secondary"};return W`<button ?disabled="${this.disabled}" class="${$i(t)}"><slot></slot></button>`}};ya.styles=[oe.globalCss,gB],cf([J({type:Boolean})],ya.prototype,"disabled",2),cf([J()],ya.prototype,"variant",2),ya=cf([ae("wcm-button-big")],ya);const vB=he`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var yB=Object.defineProperty,wB=Object.getOwnPropertyDescriptor,_B=(t,e,r,i)=>{for(var n=i>1?void 0:i?wB(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&yB(e,r,n),n};let lf=class extends ee{render(){return W`<div><slot></slot></div>`}};lf.styles=[oe.globalCss,vB],lf=_B([ae("wcm-info-footer")],lf);const pe={CROSS_ICON:Me`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:Me`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:Me`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:Me`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:Me`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:Me`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:Me`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:Me`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:Me`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:Me`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:Me`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:Me`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:Me`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:Me`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:Me`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:Me`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:Me`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:Me`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},EB=he`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var xB=Object.defineProperty,$B=Object.getOwnPropertyDescriptor,IB=(t,e,r,i)=>{for(var n=i>1?void 0:i?$B(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&xB(e,r,n),n};let uf=class extends ee{render(){return W`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${pe.WALLET_CONNECT_LOGO} <button @click="${Bn.close}">${pe.CROSS_ICON}</button></div>`}};uf.styles=[oe.globalCss,EB],uf=IB([ae("wcm-modal-backcard")],uf);const SB=he`main{padding:20px;padding-top:0;width:100%}`;var AB=Object.defineProperty,PB=Object.getOwnPropertyDescriptor,OB=(t,e,r,i)=>{for(var n=i>1?void 0:i?PB(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&AB(e,r,n),n};let hf=class extends ee{render(){return W`<main><slot></slot></main>`}};hf.styles=[oe.globalCss,SB],hf=OB([ae("wcm-modal-content")],hf);const CB=he`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var DB=Object.defineProperty,MB=Object.getOwnPropertyDescriptor,TB=(t,e,r,i)=>{for(var n=i>1?void 0:i?MB(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&DB(e,r,n),n};let df=class extends ee{render(){return W`<footer><slot></slot></footer>`}};df.styles=[oe.globalCss,CB],df=TB([ae("wcm-modal-footer")],df);const RB=he`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var NB=Object.defineProperty,BB=Object.getOwnPropertyDescriptor,wa=(t,e,r,i)=>{for(var n=i>1?void 0:i?BB(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&NB(e,r,n),n};let Hn=class extends ee{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return W`<button class="wcm-back-btn" @click="${Se.goBack}">${pe.BACK_ICON}</button>`}actionBtnTemplate(){return W`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const t={"wcm-border":this.border},e=Se.state.history.length>1,r=this.title?W`<wcm-text variant="big-bold">${this.title}</wcm-text>`:W`<slot></slot>`;return W`<header class="${$i(t)}">${e?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};Hn.styles=[oe.globalCss,RB],wa([J()],Hn.prototype,"title",2),wa([J()],Hn.prototype,"onAction",2),wa([J()],Hn.prototype,"actionIcon",2),wa([J({type:Boolean})],Hn.prototype,"border",2),Hn=wa([ae("wcm-modal-header")],Hn);const Y={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(t,e){const r=t.renderRoot.querySelector(e);if(!r)throw new Error(`${e} not found`);return r},getWalletIcon({id:t,image_id:e}){const{walletImages:r}=ur.state;return r?.[t]?r[t]:e?er.getWalletImageUrl(e):""},getWalletName(t,e=!1){return e&&t.length>8?`${t.substring(0,8)}..`:t},isMobileAnimation(){return window.innerWidth<=Y.MOBILE_BREAKPOINT},async preloadImage(t){const e=new Promise((r,i)=>{const n=new Image;n.onload=r,n.onerror=i,n.crossOrigin="anonymous",n.src=t});return Promise.race([e,V.wait(3e3)])},getErrorMessage(t){return t instanceof Error?t.message:"Unknown Error"},debounce(t,e=500){let r;return(...i)=>{function n(){t(...i)}r&&clearTimeout(r),r=setTimeout(n,e)}},handleMobileLinking(t,e="_self"){const{walletConnectUri:r}=je.state,{mobile:i,name:n}=t,s=i?.native,o=i?.universal;Y.setRecentWallet(t);function a(c){if(s){const l=V.formatNativeUrl(s,c,n);V.openHref(l,e)}else if(o){const l=V.formatUniversalUrl(o,c,n);V.openHref(l,e)}}r&&a(r)},handleAndroidLinking(){const{walletConnectUri:t}=je.state;t&&(V.setWalletConnectAndroidDeepLink(t),V.openHref(t,V.isTelegram()?"_blank":"_self"))},async handleUriCopy(){const{walletConnectUri:t}=je.state;if(t)try{await navigator.clipboard.writeText(t),Ji.openToast("Link copied","success")}catch{Ji.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:t}=ur.state,e=Object.values(t??{});return Object.values(e)},truncate(t,e=8){return t.length<=e?t:`${t.substring(0,4)}...${t.substring(t.length-4)}`},setRecentWallet(t){try{localStorage.setItem(Y.WCM_RECENT_WALLET_DATA,JSON.stringify(t))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const t=localStorage.getItem(Y.WCM_RECENT_WALLET_DATA);return t?JSON.parse(t):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(t,e){return t.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){V.openHref(Y.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:t,mobile:e}=V.getWalletRouterData(),r=!!t?.native,i=!!t?.universal,n=!!e?.native||!!e?.universal;return{isDesktop:r,isMobile:n,isWeb:i}},goToConnectingView(t){Se.setData({Wallet:t});const e=V.isMobile(),{isDesktop:r,isWeb:i,isMobile:n}=Y.getCachedRouterWalletPlatforms();e?n?(Se.push("MobileConnecting"),!V.isAndroid()&&V.isTelegram()&&this.handleMobileLinking(t,"_blank")):i?Se.push("WebConnecting"):Se.push("InstallWallet"):r?Se.push("DesktopConnecting"):i?Se.push("WebConnecting"):n?Se.push("MobileQrcodeConnecting"):Se.push("InstallWallet")}},LB=he`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var FB=Object.defineProperty,UB=Object.getOwnPropertyDescriptor,ff=(t,e,r,i)=>{for(var n=i>1?void 0:i?UB(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&FB(e,r,n),n};let _a=class extends ee{constructor(){super(),this.view=Se.state.view,this.prevView=Se.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=Se.subscribe(t=>{this.view!==t.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([t])=>{const e=`${t.contentRect.height}px`;this.oldHeight!=="0px"&&zn(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var t,e;(t=this.unsubscribe)==null||t.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return Y.getShadowRootElement(this,".wcm-router")}get contentEl(){return Y.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return W`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return W`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return W`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return W`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return W`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return W`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return W`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return W`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return W`<div>Not Found</div>`}}async onChangeRoute(){await zn(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=Se.state.view,zn(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return W`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};_a.styles=[oe.globalCss,LB],ff([tr()],_a.prototype,"view",2),ff([tr()],_a.prototype,"prevView",2),_a=ff([ae("wcm-modal-router")],_a);const jB=he`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var kB=Object.defineProperty,qB=Object.getOwnPropertyDescriptor,sy=(t,e,r,i)=>{for(var n=i>1?void 0:i?qB(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&kB(e,r,n),n};let yl=class extends ee{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=Ji.subscribe(t=>{t.open?(this.open=!0,this.timeout=setTimeout(()=>Ji.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var t;(t=this.unsubscribe)==null||t.call(this),clearTimeout(this.timeout),Ji.closeToast()}render(){const{message:t,variant:e}=Ji.state,r={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?W`<div class="${$i(r)}">${e==="success"?pe.CHECKMARK_ICON:null} ${e==="error"?pe.CROSS_ICON:null}<wcm-text variant="small-regular">${t}</wcm-text></div>`:null}};yl.styles=[oe.globalCss,jB],sy([tr()],yl.prototype,"open",2),yl=sy([ae("wcm-modal-toast")],yl);const zB=.1,oy=2.5,Ii=7;function pf(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+zB}function HB(t,e){const r=Array.prototype.slice.call(ga.create(t,{errorCorrectionLevel:e}).modules.data,0),i=Math.sqrt(r.length);return r.reduce((n,s,o)=>(o%i===0?n.push([s]):n[n.length-1].push(s))&&n,[])}const WB={generate(t,e,r){const i="#141414",n="#ffffff",s=[],o=HB(t,"Q"),a=e/o.length,c=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];c.forEach(({x:v,y:w})=>{const S=(o.length-Ii)*a*v,x=(o.length-Ii)*a*w,A=.45;for(let C=0;C<c.length;C+=1){const D=a*(Ii-C*2);s.push(Me`<rect fill="${C%2===0?i:n}" height="${D}" rx="${D*A}" ry="${D*A}" width="${D}" x="${S+a*C}" y="${x+a*C}">`)}});const l=Math.floor((r+25)/a),u=o.length/2-l/2,d=o.length/2+l/2-1,p=[];o.forEach((v,w)=>{v.forEach((S,x)=>{if(o[w][x]&&!(w<Ii&&x<Ii||w>o.length-(Ii+1)&&x<Ii||w<Ii&&x>o.length-(Ii+1))&&!(w>u&&w<d&&x>u&&x<d)){const A=w*a+a/2,C=x*a+a/2;p.push([A,C])}})});const m={};return p.forEach(([v,w])=>{m[v]?m[v].push(w):m[v]=[w]}),Object.entries(m).map(([v,w])=>{const S=w.filter(x=>w.every(A=>!pf(x,A,a)));return[Number(v),S]}).forEach(([v,w])=>{w.forEach(S=>{s.push(Me`<circle cx="${v}" cy="${S}" fill="${i}" r="${a/oy}">`)})}),Object.entries(m).filter(([v,w])=>w.length>1).map(([v,w])=>{const S=w.filter(x=>w.some(A=>pf(x,A,a)));return[Number(v),S]}).map(([v,w])=>{w.sort((x,A)=>x<A?-1:1);const S=[];for(const x of w){const A=S.find(C=>C.some(D=>pf(x,D,a)));A?A.push(x):S.push([x])}return[v,S.map(x=>[x[0],x[x.length-1]])]}).forEach(([v,w])=>{w.forEach(([S,x])=>{s.push(Me`<line x1="${v}" x2="${v}" y1="${S}" y2="${x}" stroke="${i}" stroke-width="${a/(oy/2)}" stroke-linecap="round">`)})}),s}},VB=he`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var KB=Object.defineProperty,GB=Object.getOwnPropertyDescriptor,so=(t,e,r,i)=>{for(var n=i>1?void 0:i?GB(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&KB(e,r,n),n};let Si=class extends ee{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const e=Yi.state.themeMode==="light"?this.size:this.size-18*2;return Me`<svg height="${e}" width="${e}">${WB.generate(this.uri,e,e/4)}</svg>`}render(){const t={"wcm-dark":Yi.state.themeMode==="dark"};return W`<div style="${`width: ${this.size}px`}" class="${$i(t)}">${this.walletId||this.imageUrl?W`<wcm-wallet-image walletId="${Vt(this.walletId)}" imageId="${Vt(this.imageId)}" imageUrl="${Vt(this.imageUrl)}"></wcm-wallet-image>`:pe.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};Si.styles=[oe.globalCss,VB],so([J()],Si.prototype,"uri",2),so([J({type:Number})],Si.prototype,"size",2),so([J()],Si.prototype,"imageId",2),so([J()],Si.prototype,"walletId",2),so([J()],Si.prototype,"imageUrl",2),Si=so([ae("wcm-qrcode")],Si);const ZB=he`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var YB=Object.defineProperty,JB=Object.getOwnPropertyDescriptor,ay=(t,e,r,i)=>{for(var n=i>1?void 0:i?JB(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&YB(e,r,n),n};let wl=class extends ee{constructor(){super(...arguments),this.onChange=()=>null}render(){return W`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${pe.SEARCH_ICON}`}};wl.styles=[oe.globalCss,ZB],ay([J()],wl.prototype,"onChange",2),wl=ay([ae("wcm-search-input")],wl);const QB=he`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var XB=Object.defineProperty,eL=Object.getOwnPropertyDescriptor,tL=(t,e,r,i)=>{for(var n=i>1?void 0:i?eL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&XB(e,r,n),n};let gf=class extends ee{render(){return W`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};gf.styles=[oe.globalCss,QB],gf=tL([ae("wcm-spinner")],gf);const rL=he`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var iL=Object.defineProperty,nL=Object.getOwnPropertyDescriptor,bf=(t,e,r,i)=>{for(var n=i>1?void 0:i?nL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&iL(e,r,n),n};let Ea=class extends ee{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const t={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return W`<span><slot class="${$i(t)}"></slot></span>`}};Ea.styles=[oe.globalCss,rL],bf([J()],Ea.prototype,"variant",2),bf([J()],Ea.prototype,"color",2),Ea=bf([ae("wcm-text")],Ea);const sL=he`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var oL=Object.defineProperty,aL=Object.getOwnPropertyDescriptor,nn=(t,e,r,i)=>{for(var n=i>1?void 0:i?aL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&oL(e,r,n),n};let ci=class extends ee{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?W`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?W`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){W2.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var t;return W`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${Vt(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(t=this.label)!=null?t:Y.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};ci.styles=[oe.globalCss,sL],nn([J()],ci.prototype,"onClick",2),nn([J()],ci.prototype,"name",2),nn([J()],ci.prototype,"walletId",2),nn([J()],ci.prototype,"label",2),nn([J()],ci.prototype,"imageId",2),nn([J({type:Boolean})],ci.prototype,"installed",2),nn([J({type:Boolean})],ci.prototype,"recent",2),ci=nn([ae("wcm-wallet-button")],ci);const cL=he`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var lL=Object.defineProperty,uL=Object.getOwnPropertyDescriptor,_l=(t,e,r,i)=>{for(var n=i>1?void 0:i?uL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&lL(e,r,n),n};let oo=class extends ee{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var t;const e=(t=this.imageUrl)!=null&&t.length?this.imageUrl:Y.getWalletIcon({id:this.walletId,image_id:this.imageId});return W`${e.length?W`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:pe.WALLET_PLACEHOLDER}`}};oo.styles=[oe.globalCss,cL],_l([J()],oo.prototype,"walletId",2),_l([J()],oo.prototype,"imageId",2),_l([J()],oo.prototype,"imageUrl",2),oo=_l([ae("wcm-wallet-image")],oo);var hL=Object.defineProperty,dL=Object.getOwnPropertyDescriptor,cy=(t,e,r,i)=>{for(var n=i>1?void 0:i?dL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&hL(e,r,n),n};let mf=class extends ee{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(t){try{t?.length&&await Promise.all(t.map(async e=>Y.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",t)}}async preloadListings(){if(ur.state.enableExplorer){await er.getRecomendedWallets(),je.setIsDataLoaded(!0);const{recomendedWallets:t}=er.state,e=t.map(r=>Y.getWalletIcon(r));await this.loadImages(e)}else je.setIsDataLoaded(!0)}async preloadCustomImages(){const t=Y.getCustomImageUrls();await this.loadImages(t)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(t){console.error(t),Ji.openToast("Failed preloading","error")}}};cy([tr()],mf.prototype,"preload",2),mf=cy([ae("wcm-explorer-context")],mf);var fL=Object.defineProperty,pL=Object.getOwnPropertyDescriptor,gL=(t,e,r,i)=>{for(var n=i>1?void 0:i?pL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&fL(e,r,n),n};let ly=class extends ee{constructor(){super(),this.unsubscribeTheme=void 0,oe.setTheme(),this.unsubscribeTheme=Yi.subscribe(oe.setTheme)}disconnectedCallback(){var t;(t=this.unsubscribeTheme)==null||t.call(this)}};ly=gL([ae("wcm-theme-context")],ly);const bL=he`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var mL=Object.defineProperty,vL=Object.getOwnPropertyDescriptor,yL=(t,e,r,i)=>{for(var n=i>1?void 0:i?vL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&mL(e,r,n),n};let vf=class extends ee{onGoToQrcode(){Se.push("Qrcode")}render(){const{recomendedWallets:t}=er.state,e=[...t,...t],r=V.RECOMMENDED_WALLET_AMOUNT*2;return W`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${pe.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${pe.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((i,n)=>{const s=e[n%e.length];return s?W`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:pe.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${Y.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};vf.styles=[oe.globalCss,bL],vf=yL([ae("wcm-android-wallet-selection")],vf);const wL=he`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var _L=Object.defineProperty,EL=Object.getOwnPropertyDescriptor,ao=(t,e,r,i)=>{for(var n=i>1?void 0:i?EL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&_L(e,r,n),n};let sn=class extends ee{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var t,e;const s=(e=(t=Yi.state.themeVariables)==null?void 0:t["--wcm-wallet-icon-large-border-radius"])!=null?e:oe.getPreset("--wcm-wallet-icon-large-border-radius");let o=0;s.includes("%")?o=88/100*parseInt(s,10):o=parseInt(s,10),o*=1.17;const a=317-o*1.57,c=425-o*1.8;return W`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${o}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${a}" stroke-dashoffset="${c}"></use></svg>`}render(){const t={"wcm-error":this.isError,"wcm-stale":this.isStale};return W`<div class="${$i(t)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${Vt(this.walletId)}" imageId="${Vt(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};sn.styles=[oe.globalCss,wL],ao([J()],sn.prototype,"walletId",2),ao([J()],sn.prototype,"imageId",2),ao([J({type:Boolean})],sn.prototype,"isError",2),ao([J({type:Boolean})],sn.prototype,"isStale",2),ao([J()],sn.prototype,"label",2),sn=ao([ae("wcm-connector-waiting")],sn);const co={manualWallets(){var t,e;const{mobileWallets:r,desktopWallets:i}=ur.state,n=(t=co.recentWallet())==null?void 0:t.id,s=V.isMobile()?r:i,o=s?.filter(a=>n!==a.id);return(e=V.isMobile()?o?.map(({id:a,name:c,links:l})=>({id:a,name:c,mobile:l,links:l})):o?.map(({id:a,name:c,links:l})=>({id:a,name:c,desktop:l,links:l})))!=null?e:[]},recentWallet(){return Y.getRecentWallet()},recomendedWallets(t=!1){var e;const r=t||(e=co.recentWallet())==null?void 0:e.id,{recomendedWallets:i}=er.state;return i.filter(s=>r!==s.id)}},on={onConnecting(t){Y.goToConnectingView(t)},manualWalletsTemplate(){return co.manualWallets().map(e=>W`<wcm-wallet-button walletId="${e.id}" name="${e.name}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(t=!1){return co.recomendedWallets(t).map(r=>W`<wcm-wallet-button name="${r.name}" walletId="${r.id}" imageId="${r.image_id}" .onClick="${()=>this.onConnecting(r)}"></wcm-wallet-button>`)},recentWalletTemplate(){const t=co.recentWallet();if(t)return W`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${Vt(t.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`}},xL=he`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var $L=Object.defineProperty,IL=Object.getOwnPropertyDescriptor,SL=(t,e,r,i)=>{for(var n=i>1?void 0:i?IL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&$L(e,r,n),n};let yf=class extends ee{render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=ur.state,r=t!=="ALL"&&e,i=on.manualWalletsTemplate(),n=on.recomendedWalletsTemplate();let o=[on.recentWalletTemplate(),...i,...n];o=o.filter(Boolean);const a=o.length>4||r;let c=[];a?c=o.slice(0,3):c=o;const l=!!c.length;return W`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${Y.handleUriCopy}" .actionIcon="${pe.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${pe.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${pe.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${l?W`<wcm-modal-footer><div class="wcm-desktop-title">${pe.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${c} ${a?W`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};yf.styles=[oe.globalCss,xL],yf=SL([ae("wcm-desktop-wallet-selection")],yf);const AL=he`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var PL=Object.defineProperty,OL=Object.getOwnPropertyDescriptor,CL=(t,e,r,i)=>{for(var n=i>1?void 0:i?OL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&PL(e,r,n),n};let wf=class extends ee{render(){const{termsOfServiceUrl:t,privacyPolicyUrl:e}=ur.state;return t??e?W`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${t?W`<a href="${t}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${t&&e?"and":null} ${e?W`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};wf.styles=[oe.globalCss,AL],wf=CL([ae("wcm-legal-notice")],wf);const DL=he`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var ML=Object.defineProperty,TL=Object.getOwnPropertyDescriptor,RL=(t,e,r,i)=>{for(var n=i>1?void 0:i?TL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&ML(e,r,n),n};let _f=class extends ee{onQrcode(){Se.push("Qrcode")}render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=ur.state,r=t!=="ALL"&&e,i=on.manualWalletsTemplate(),n=on.recomendedWalletsTemplate();let o=[on.recentWalletTemplate(),...i,...n];o=o.filter(Boolean);const a=o.length>8||r;let c=[];a?c=o.slice(0,7):c=o;const l=!!c.length;return W`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${pe.QRCODE_ICON}"></wcm-modal-header>${l?W`<wcm-modal-content><div>${c} ${a?W`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};_f.styles=[oe.globalCss,DL],_f=RL([ae("wcm-mobile-wallet-selection")],_f);const NL=he`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var BL=Object.defineProperty,LL=Object.getOwnPropertyDescriptor,Ef=(t,e,r,i)=>{for(var n=i>1?void 0:i?LL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&BL(e,r,n),n};let lo=class extends ee{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=Bn.subscribe(t=>{t.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var t;(t=this.unsubscribeModal)==null||t.call(this)}get overlayEl(){return Y.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return Y.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(t){if(document.querySelector("body"))if(t){const r=document.getElementById("wcm-styles");r?.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(t){t.target===t.currentTarget&&Bn.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const t=Y.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,r=.2;await Promise.all([zn(this.overlayEl,{opacity:[0,1]},{delay:e,duration:r}).finished,zn(this.containerEl,t,{delay:e,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const t=Y.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([zn(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,zn(this.containerEl,t,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",t=>{var e;t.key==="Escape"?Bn.close():t.key==="Tab"&&((e=t.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var t;(t=this.abortController)==null||t.abort(),this.abortController=void 0}render(){const t={"wcm-overlay":!0,"wcm-active":this.active};return W`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${$i(t)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?W`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};lo.styles=[oe.globalCss,NL],Ef([tr()],lo.prototype,"open",2),Ef([tr()],lo.prototype,"active",2),lo=Ef([ae("wcm-modal")],lo);const FL=he`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var UL=Object.defineProperty,jL=Object.getOwnPropertyDescriptor,xa=(t,e,r,i)=>{for(var n=i>1?void 0:i?jL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&UL(e,r,n),n};let Wn=class extends ee{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){V.isMobile()?Se.replace("MobileConnecting"):Se.replace("MobileQrcodeConnecting")}onDesktop(){Se.replace("DesktopConnecting")}onWeb(){Se.replace("WebConnecting")}render(){return W`<div>${this.isRetry?W`<slot></slot>`:null} ${this.isMobile?W`<wcm-button .onClick="${this.onMobile}" .iconLeft="${pe.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?W`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${pe.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?W`<wcm-button .onClick="${this.onWeb}" .iconLeft="${pe.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};Wn.styles=[oe.globalCss,FL],xa([J({type:Boolean})],Wn.prototype,"isMobile",2),xa([J({type:Boolean})],Wn.prototype,"isDesktop",2),xa([J({type:Boolean})],Wn.prototype,"isWeb",2),xa([J({type:Boolean})],Wn.prototype,"isRetry",2),Wn=xa([ae("wcm-platform-selection")],Wn);const kL=he`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var qL=Object.defineProperty,zL=Object.getOwnPropertyDescriptor,HL=(t,e,r,i)=>{for(var n=i>1?void 0:i?zL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&qL(e,r,n),n};let xf=class extends ee{onClick(){Se.push("WalletExplorer")}render(){const{recomendedWallets:t}=er.state,e=co.manualWallets(),r=[...t,...e].reverse().slice(0,4);return W`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(i=>{const n=Y.getWalletIcon(i);if(n)return W`<img crossorigin="anonymous" src="${n}">`;const s=Y.getWalletIcon({id:i.id});return s?W`<img crossorigin="anonymous" src="${s}">`:pe.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>pe.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};xf.styles=[oe.globalCss,kL],xf=HL([ae("wcm-view-all-wallets-button")],xf);const WL=he`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var VL=Object.defineProperty,KL=Object.getOwnPropertyDescriptor,El=(t,e,r,i)=>{for(var n=i>1?void 0:i?KL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&VL(e,r,n),n};let uo=class extends ee{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:t}=je.state;this.uri=t},0)}get overlayEl(){return Y.getShadowRootElement(this,".wcm-qr-container")}render(){return W`<div class="wcm-qr-container">${this.uri?W`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${Vt(this.walletId)}" imageId="${Vt(this.imageId)}"></wcm-qrcode>`:W`<wcm-spinner></wcm-spinner>`}</div>`}};uo.styles=[oe.globalCss,WL],El([J()],uo.prototype,"walletId",2),El([J()],uo.prototype,"imageId",2),El([tr()],uo.prototype,"uri",2),uo=El([ae("wcm-walletconnect-qr")],uo);var GL=Object.defineProperty,ZL=Object.getOwnPropertyDescriptor,YL=(t,e,r,i)=>{for(var n=i>1?void 0:i?ZL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&GL(e,r,n),n};let $f=class extends ee{viewTemplate(){return V.isAndroid()&&!V.isTelegram()?W`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:V.isMobile()?W`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:W`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return W`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};$f.styles=[oe.globalCss],$f=YL([ae("wcm-connect-wallet-view")],$f);const JL=he`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var QL=Object.defineProperty,XL=Object.getOwnPropertyDescriptor,uy=(t,e,r,i)=>{for(var n=i>1?void 0:i?XL(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&QL(e,r,n),n};let xl=class extends ee{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(t){const{desktop:e,name:r}=V.getWalletRouterData(),i=e?.native,n=e?.universal;if(i){const s=V.formatNativeUrl(i,t,r);V.openHref(s,"_self")}else if(n){const s=V.formatUniversalUrl(n,t,r);V.openHref(s,"_blank")}}openDesktopApp(){const{walletConnectUri:t}=je.state,e=V.getWalletRouterData();Y.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=V.getWalletRouterData(),{isMobile:i,isWeb:n}=Y.getCachedRouterWalletPlatforms();return W`<wcm-modal-header title="${t}" .onAction="${Y.handleUriCopy}" .actionIcon="${pe.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Vt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${t} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${i}" .isWeb="${n}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${pe.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};xl.styles=[oe.globalCss,JL],uy([tr()],xl.prototype,"isError",2),xl=uy([ae("wcm-desktop-connecting-view")],xl);const eF=he`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var tF=Object.defineProperty,rF=Object.getOwnPropertyDescriptor,iF=(t,e,r,i)=>{for(var n=i>1?void 0:i?rF(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&tF(e,r,n),n};let If=class extends ee{onInstall(t){t&&V.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,homepage:i}=V.getWalletRouterData();return W`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Vt(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${t} to continue. If multiple browser extensions are installed, disable non ${t} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(i)}" .iconLeft="${pe.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};If.styles=[oe.globalCss,eF],If=iF([ae("wcm-install-wallet-view")],If);const nF=he`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var sF=Object.defineProperty,oF=Object.getOwnPropertyDescriptor,hy=(t,e,r,i)=>{for(var n=i>1?void 0:i?oF(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&sF(e,r,n),n};let $l=class extends ee{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(t,e=!1){const{mobile:r,name:i}=V.getWalletRouterData(),n=r?.native,s=r?.universal,o=V.isTelegram()?"_blank":"_self";if(t=V.isTelegram()&&V.isAndroid()?encodeURIComponent(t):t,n&&!e){const a=V.formatNativeUrl(n,t,i);V.openHref(a,o)}else if(s){const a=V.formatUniversalUrl(s,t,i);V.openHref(a,o)}}openMobileApp(t=!1){const{walletConnectUri:e}=je.state,r=V.getWalletRouterData();e&&this.onFormatAndRedirect(e,t),Y.setRecentWallet(r)}onGoToAppStore(t){t&&V.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,app:i,mobile:n}=V.getWalletRouterData(),{isWeb:s}=Y.getCachedRouterWalletPlatforms(),o=i?.ios,a=n?.universal;return W`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Vt(r)}" label="Tap 'Open' to continue" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${pe.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?W`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${Vt(r)}"></wcm-wallet-image><wcm-text>${`Get ${t}`}</wcm-text></div><wcm-button .iconRight="${pe.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};$l.styles=[oe.globalCss,nF],hy([tr()],$l.prototype,"isError",2),$l=hy([ae("wcm-mobile-connecting-view")],$l);const aF=he`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var cF=Object.defineProperty,lF=Object.getOwnPropertyDescriptor,uF=(t,e,r,i)=>{for(var n=i>1?void 0:i?lF(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&cF(e,r,n),n};let Sf=class extends ee{render(){const{name:t,id:e,image_id:r}=V.getWalletRouterData(),{isDesktop:i,isWeb:n}=Y.getCachedRouterWalletPlatforms();return W`<wcm-modal-header title="${t}" .onAction="${Y.handleUriCopy}" .actionIcon="${pe.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${Vt(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${t} app`}</wcm-text><wcm-platform-selection .isDesktop="${i}" .isWeb="${n}"></wcm-platform-selection></wcm-info-footer>`}};Sf.styles=[oe.globalCss,aF],Sf=uF([ae("wcm-mobile-qr-connecting-view")],Sf);var hF=Object.defineProperty,dF=Object.getOwnPropertyDescriptor,fF=(t,e,r,i)=>{for(var n=i>1?void 0:i?dF(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&hF(e,r,n),n};let Af=class extends ee{render(){return W`<wcm-modal-header title="Scan the code" .onAction="${Y.handleUriCopy}" .actionIcon="${pe.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};Af.styles=[oe.globalCss],Af=fF([ae("wcm-qrcode-view")],Af);const pF=he`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var gF=Object.defineProperty,bF=Object.getOwnPropertyDescriptor,$a=(t,e,r,i)=>{for(var n=i>1?void 0:i?bF(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&gF(e,r,n),n};const Pf=40;let Vn=class extends ee{constructor(){super(...arguments),this.loading=!er.state.wallets.listings.length,this.firstFetch=!er.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=Y.debounce(t=>{t.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=t,er.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),er.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect()}get placeholderEl(){return Y.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([t])=>{t.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:t,search:e}=er.state,{listings:r,total:i}=this.search?e:t;return i<=Pf||r.length>=i}async fetchWallets(){var t;const{wallets:e,search:r}=er.state,{listings:i,total:n,page:s}=this.search?r:e;if(!this.endReached&&(this.firstFetch||n>Pf&&i.length<n))try{this.loading=!0;const o=(t=je.state.chains)==null?void 0:t.join(","),{listings:a}=await er.getWallets({page:this.firstFetch?1:s+1,entries:Pf,search:this.search,version:2,chains:o}),c=a.map(l=>Y.getWalletIcon(l));await Promise.all([...c.map(async l=>Y.preloadImage(l)),V.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),Ji.openToast(Y.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(t){V.isAndroid()?Y.handleMobileLinking(t):Y.goToConnectingView(t)}onSearchChange(t){const{value:e}=t.target;this.searchDebounce(e)}render(){const{wallets:t,search:e}=er.state,{listings:r}=this.search?e:t,i=this.loading&&!r.length,n=this.search.length>=3;let s=on.manualWalletsTemplate(),o=on.recomendedWalletsTemplate(!0);n&&(s=s.filter(({values:l})=>Y.caseSafeIncludes(l[0],this.search)),o=o.filter(({values:l})=>Y.caseSafeIncludes(l[0],this.search)));const a=!this.loading&&!r.length&&!o.length,c={"wcm-loading":i,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return W`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${$i(c)}"><div class="wcm-grid">${i?null:s} ${i?null:o} ${i?null:r.map(l=>W`${l?W`<wcm-wallet-button imageId="${l.image_id}" name="${l.name}" walletId="${l.id}" .onClick="${()=>this.onConnect(l)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?W`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?W`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};Vn.styles=[oe.globalCss,pF],$a([tr()],Vn.prototype,"loading",2),$a([tr()],Vn.prototype,"firstFetch",2),$a([tr()],Vn.prototype,"search",2),$a([tr()],Vn.prototype,"endReached",2),Vn=$a([ae("wcm-wallet-explorer-view")],Vn);const mF=he`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var vF=Object.defineProperty,yF=Object.getOwnPropertyDescriptor,dy=(t,e,r,i)=>{for(var n=i>1?void 0:i?yF(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&vF(e,r,n),n};let Il=class extends ee{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(t){const{desktop:e,name:r}=V.getWalletRouterData(),i=e?.universal;if(i){const n=V.formatUniversalUrl(i,t,r);V.openHref(n,"_blank")}}openWebWallet(){const{walletConnectUri:t}=je.state,e=V.getWalletRouterData();Y.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=V.getWalletRouterData(),{isMobile:i,isDesktop:n}=Y.getCachedRouterWalletPlatforms(),s=V.isMobile();return W`<wcm-modal-header title="${t}" .onAction="${Y.handleUriCopy}" .actionIcon="${pe.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Vt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${t} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${i}" .isDesktop="${s?!1:n}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${pe.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Il.styles=[oe.globalCss,mF],dy([tr()],Il.prototype,"isError",2),Il=dy([ae("wcm-web-connecting-view")],Il);var wF=Object.freeze({__proto__:null,get WcmModal(){return lo},get WcmQrCode(){return Si}});$r.EthereumProvider=zT,$r.OPTIONAL_EVENTS=k2,$r.OPTIONAL_METHODS=j2,$r.REQUIRED_EVENTS=Yc,$r.REQUIRED_METHODS=Zc,$r.default=Xc,Object.defineProperty($r,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
