"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useWalletName = useWalletName;
exports.getQueryKeys = getQueryKeys;
exports.fetchWalletName = fetchWalletName;
const react_query_1 = require("@tanstack/react-query");
const function_id_js_1 = require("../../../utils/function-id.js");
const getWalletInfo_js_1 = require("../../../wallets/__generated__/getWalletInfo.js");
const provider_js_1 = require("../wallet/provider.js");
/**
 * @internal
 */
function useWalletName(props) {
    const { id } = (0, provider_js_1.useWalletContext)();
    const nameQuery = (0, react_query_1.useQuery)({
        queryKey: getQueryKeys({ id, formatFn: props.formatFn }),
        queryFn: async () => fetchWalletName({ id, formatFn: props.formatFn }),
        ...props.queryOptions,
    });
    return nameQuery;
}
/**
 * @internal Exported for tests only
 */
function getQueryKeys(props) {
    if (typeof props.formatFn === "function") {
        return [
            "walletName",
            props.id,
            { resolver: (0, function_id_js_1.getFunctionId)(props.formatFn) },
        ];
    }
    return ["walletName", props.id];
}
/**
 * @internal Exported for tests only
 */
async function fetchWalletName(props) {
    const info = await (0, getWalletInfo_js_1.getWalletInfo)(props.id);
    if (typeof props.formatFn === "function") {
        return props.formatFn(info.name);
    }
    return info.name;
}
//# sourceMappingURL=walletname.js.map